{
  "name": "Confuso",
  "type": "script",
  "author": "zypc4ueMMbKFzteu",
  "img": "systems/tormenta20/icons/conditions/confuso.svg",
  "scope": "global",
  "command": "// Macro desenvolvida por Sapodinho#0859 inspirado no exemplo de BrunoCF086#7267.\n// Teste de Morte do Tormenta20;\n(async () => {\n\tif (!token) {\n\t\tui.notifications.warn(\"Nenhum personagem selecionado!\");\n\t\treturn;\n\t}\n\tconst rollData = token.actor.getRollData();\n\tlet rolls = [];\n\t//const testeMorte = await new Roll(`1d20 + @con`, token.actor.getRollData()).evaluate();\n\tconst d6 = await game.tormenta20.dice.d20Roll({parts:['1d6']});\n\td6.options.title = 'Confusão'\n\trolls.push(d6);\n\tif ( d6.total == 1 ){\n\t\tconst d8 = await game.tormenta20.dice.d20Roll({parts:['1d8']});\n\t\td8.options.title = 'Direção'\n\t\trolls.push(d8);\n\t}\n\tfunction tabela(rolls) {\n\t\tlet dado = rolls[0].total;\n\t\tif (dado == 1) {\n\t\t\treturn tabela2(rolls)\n\t\t}\n\t\telse if (dado == 2 || dado == 3) return \"Não pode fazer ações, exceto reações, e fica balbuciando incoerentemente\";\n\t\telse if (dado == 4 || dado == 5) return \"Usa a arma que estiver empunhando para atacar a criatura mais próxima, ou a si mesmo se estiver sozinho (apenas role o dano)\";\n\t\telse if (dado == 6) return \"A condição termina e pode agir normalmente\";\n\t}\n\tfunction tabela2(rolls) {\n\t\tlet dado = rolls[1].total;\n\t\tconst direcoes = [\"cima\", \"o canto superior-direito\", \"direita\", \"o canto inferior-direito\", \"baixo\", \"o canto inferior-esquerdo\", \"esquerda\", \"o canto superior esquerdo\"]\n\t\treturn \"Movimenta-se para \" + direcoes[dado];\n\t}\n\tlet resultado = tabela(rolls);\n\t\n\tconst messageData = {\n\t\trolls: rolls,\n\t\ttemplateData: { item: { name: \"Confuso\", img: \"systems/tormenta20/icons/conditions/confuso.svg\" }, system: { description: { value: \"<p>\" + resultado + \". </p>\" } } }\n\t}\n\n\tgame.tormenta20.macros.rollChatMessage(messageData);\n})();",
  "flags": {
    "core": {
      "sourceId": "Macro.OK6TesXExvWxoBbn"
    }
  },
  "ownership": {
    "default": 0,
    "0bS8PF9mUpBd2z0H": 3,
    "zypc4ueMMbKFzteu": 3
  },
  "_stats": {
    "systemId": "tormenta20",
    "systemVersion": "1.4.002",
    "coreVersion": "10.285",
    "createdTime": 1662828138713,
    "modifiedTime": 1662923793361,
    "lastModifiedBy": "izTN2S0Mlytej3sI"
  },
  "folder": null,
  "sort": 0,
  "_id": "aPUaPZpBf72hmjOp",
  "_key": "!macros!aPUaPZpBf72hmjOp"
}
