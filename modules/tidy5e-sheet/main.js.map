{"version":3,"file":"main.js","sources":["../src/constants.ts","../src/utils/logging.ts","../src/settings/ResetSettingsDialog.ts","../src/theme/default-dark-theme.ts","../src/theme/default-light-theme.ts","../src/theme/theme-reference.ts","../node_modules/colord/index.mjs","../src/theme/theme.ts","../node_modules/svelte/src/runtime/internal/utils.js","../node_modules/svelte/src/runtime/internal/environment.js","../node_modules/svelte/src/runtime/internal/loop.js","../node_modules/svelte/src/runtime/internal/dom.js","../node_modules/svelte/src/runtime/internal/style_manager.js","../node_modules/svelte/src/runtime/internal/animations.js","../node_modules/svelte/src/runtime/internal/lifecycle.js","../node_modules/svelte/src/runtime/internal/scheduler.js","../node_modules/svelte/src/runtime/internal/transitions.js","../node_modules/svelte/src/runtime/internal/each.js","../node_modules/svelte/src/runtime/internal/spread.js","../node_modules/svelte/src/runtime/internal/Component.js","../node_modules/svelte/src/shared/version.js","../node_modules/svelte/src/runtime/store/index.js","../src/applications/SvelteFormApplicationBase.ts","../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../src/components/tabs/Tabs.svelte","../src/types/location-awareness.types.ts","../src/components/tabs/TabContent.svelte","../src/components/tabs/TabContents.svelte","../src/applications/settings/parts/CheckboxSetting.svelte","../src/applications/settings/parts/TextInputSetting.svelte","../src/applications/settings/user-settings/tabs/PlayerSettingsTab.svelte","../src/applications/settings/user-settings/tabs/NpcSettingsTab.svelte","../src/applications/settings/user-settings/tabs/VehicleSettingsTab.svelte","../src/applications/settings/user-settings/tabs/ActionsListSettingsTab.svelte","../src/applications/settings/user-settings/UserSettings.svelte","../src/applications/settings/user-settings/UserSettingsFormApplication.ts","../src/components/inputs/SelectOptions.svelte","../src/applications/settings/parts/SelectSetting.svelte","../src/applications/settings/world-settings/tabs/MiscWorldSettingsTab.svelte","../node_modules/svelte/src/runtime/easing/index.js","../node_modules/svelte/src/runtime/animate/index.js","../node_modules/svelte/src/runtime/transition/index.js","../src/components/listbox/Listbox.svelte","../src/components/listbox/SelectionListboxToolbar.svelte","../src/components/listbox/SelectionListbox.svelte","../src/applications/settings/parts/ListboxSetting.svelte","../src/applications/settings/world-settings/tabs/CharacterWorldSettingsTab.svelte","../src/applications/settings/world-settings/tabs/NpcWorldSettingsTab.svelte","../src/applications/settings/world-settings/tabs/VehicleWorldSettingsTab.svelte","../src/applications/settings/world-settings/tabs/ItemWorldSettingsTab.svelte","../src/applications/settings/parts/ExhaustionSetting.svelte","../src/features/exhaustion/exhaustion.ts","../src/applications/settings/world-settings/tabs/ExhaustionWorldSettingsTab.svelte","../src/applications/settings/world-settings/tabs/SheetLockWorldSettingsTab.svelte","../src/applications/settings/world-settings/tabs/IconsWorldSettingsTab.svelte","../src/applications/settings/world-settings/WorldSettings.svelte","../src/events/clickOutside.ts","../src/components/button-menu/button-menu-position.ts","../src/components/button-menu/ButtonMenu.svelte","../src/components/button-menu/ButtonMenuItem.svelte","../src/components/button-menu/ButtonMenuCommand.svelte","../src/components/inputs/InlineTextDropdownList.svelte","../src/utils/data.ts","../src/utils/active-effect.ts","../src/utils/formatting.ts","../src/sheets/actor/SkillsList.svelte","../src/sheets/actor/traits/TraitSection.svelte","../src/sheets/actor/traits/TraitSectionTools.svelte","../src/sheets/actor/traits/TraitSectionTags.svelte","../src/sheets/actor/traits/TraitSectionModifications.svelte","../src/foundry/TidyFlags.ts","../src/sheets/actor/traits/Traits.svelte","../src/components/expandable/ExpandableContainer.svelte","../src/features/expand-collapse/ExpandCollapseService.ts","../src/components/item-list/v1/ItemTable.svelte","../src/utils/element.ts","../src/components/item-list/v1/ItemTableHeaderRow.svelte","../src/runtime/ItemSummaryRuntime.ts","../src/components/item-summary/ItemSummaryCommandButton.svelte","../src/components/item-summary/ItemSummaryCommandButtonList.svelte","../src/components/layout/HorizontalLineSeparator.svelte","../src/components/item-list/ItemSummary.svelte","../src/foundry/TidyHooks.ts","../src/components/item-list/v1/ItemTableRow.svelte","../src/components/item-list/ItemCreateButton.svelte","../src/runtime/ActorItemRuntime.ts","../src/components/item-list/ItemTableFooter.svelte","../src/components/item-list/v1/ItemTableColumn.svelte","../src/components/item-list/v1/ItemTableCell.svelte","../src/components/item-list/ItemUseButton.svelte","../src/components/item-list/ActiveEffectsMarker.svelte","../src/components/item-list/ItemName.svelte","../src/utils/numbers.ts","../src/components/item-list/ItemUses.svelte","../src/components/item-list/ItemAddUses.svelte","../src/components/icon/Dnd5eIcon.svelte","../src/components/item-list/controls/ItemControl.svelte","../src/components/item-list/controls/ItemDeleteControl.svelte","../src/components/item-list/controls/ItemEditControl.svelte","../src/components/item-list/controls/EquipControl.svelte","../src/components/item-list/controls/AttuneControl.svelte","../src/components/item-list/InlineFavoriteIcon.svelte","../src/components/item-list/controls/ItemFavoriteControl.svelte","../src/sheets/actor/AmmoSelector.svelte","../src/runtime/action-list/ActionListRuntime.ts","../src/utils/formula.ts","../src/utils/ItemUtils.ts","../src/utils/SpellUtils.ts","../src/features/user-preferences/SheetPreferencesService.ts","../src/features/sections/SheetSections.ts","../src/features/sections/Inventory.ts","../src/features/containers/Container.ts","../src/features/actions/actions.ts","../src/components/item-list/controls/ActionFilterOverrideControl.svelte","../src/utils/form.ts","../src/components/inputs/TextInput.svelte","../src/sheets/shared/ClassicControls.svelte","../src/sheets/container/InlineContainerToggle.svelte","../src/features/containers/InlineContainerToggleService.ts","../src/sheets/container/CapacityBar.svelte","../src/components/table/TidyTable.svelte","../src/components/table/TidyTableToggleIcon.svelte","../src/components/table/TidyTableHeaderCell.svelte","../src/components/table/TidyTableHeaderRow.svelte","../src/components/table/TidyTableRow.svelte","../src/components/item-list/v2/ItemTableRowV2.svelte","../src/components/table/TidyTableCell.svelte","../src/sheets/container/ContainerContentsSections.svelte","../src/sheets/container/InlineContainerView.svelte","../src/sheets/actor/InventoryList.svelte","../src/components/item-list/controls/RechargeControl.svelte","../src/sheets/character/parts/FavoriteFeaturesList.svelte","../src/components/spellbook/SpellComponents.svelte","../src/components/spellbook/SpellPip.svelte","../src/components/spellbook/SpellPips.svelte","../src/components/spellbook/SpellSlotConfigButton.svelte","../src/components/spellbook/SpellSlotUses.svelte","../src/components/spellbook/SpellSlotManagement.svelte","../src/components/spellbook/ConcentrationOverlayIcon.svelte","../src/sheets/character/parts/FavoriteSpellsList.svelte","../src/components/item-list/ItemImage.svelte","../src/components/toggle/TidySwitch.svelte","../src/sheets/character/parts/FavoriteEffectsList.svelte","../src/runtime/item/default-item-filters.ts","../src/runtime/item/ItemFilterRuntime.ts","../src/features/filtering/ItemFilterService.ts","../src/features/sections/ItemVisibility.ts","../src/sheets/character/parts/Favorites.svelte","../src/sheets/character/parts/Resource.svelte","../src/sheets/character/parts/Resources.svelte","../src/components/utility-bar/UtilityToolbar.svelte","../src/components/utility-bar/UtilityToolbarCommand.svelte","../src/components/utility-bar/Search.svelte","../src/utils/value-cycling.ts","../src/components/filter/PinnedFilterToggle.svelte","../src/components/filter/PinnedFilterToggles.svelte","../src/components/filter/FilterToggleButton.svelte","../src/components/button-menu/ButtonMenuDivider.svelte","../src/components/filter/FilterMenu.svelte","../src/sheets/character/tabs/CharacterAttributesTab.svelte","../src/components/item-grid/GridPaneFavoriteIcon.svelte","../src/sheets/actor/InventoryGrid.svelte","../src/sheets/actor/Currency.svelte","../src/components/notice/Notice.svelte","../src/components/inputs/NumberInput.svelte","../src/sheets/actor/EncumbranceBar.svelte","../src/sheets/actor/TabFooter.svelte","../src/sheets/shared/ContainerPanel.svelte","../src/sheets/actor/tabs/ActorInventoryTab.svelte","../src/components/spellbook/SpellPrepareControl.svelte","../src/features/spell-school/SpellSchool.ts","../src/components/spellbook/SpellbookList.svelte","../src/components/inputs/Select.svelte","../src/applications/max-prepared-spells-config/MaxPreparedSpellsConfig.svelte","../src/applications/max-prepared-spells-config/MaxPreparedSpellsConfigFormApplication.ts","../src/components/spellbook/SpellbookFooter.svelte","../src/components/spellbook/SpellbookGrid.svelte","../src/components/spellbook/SpellbookClassFilter.svelte","../src/sheets/actor/NoSpells.svelte","../src/applications/spell-source-class-assignments/SpellSourceClassAssignments.svelte","../src/features/store/StoreSubscriptionsService.ts","../src/applications/spell-source-class-assignments/SpellSourceClassAssignmentsFormApplication.ts","../src/sheets/character/tabs/CharacterSpellbookTab.svelte","../src/sheets/actor/LevelUpDropdown.svelte","../src/sheets/character/tabs/CharacterFeaturesTab.svelte","../src/components/toggle/ConditionToggle.svelte","../src/sheets/actor/ActorConditions.svelte","../src/components/item-list/controls/ActorEffectToggleControl.svelte","../src/components/item-list/controls/EffectFavoriteControl.svelte","../src/sheets/character/tabs/CharacterEffectsTab.svelte","../src/components/editor/SheetEditor.svelte","../src/components/inputs/ContentEditableFormField.svelte","../src/components/utility/RerenderAfterFormSubmission.svelte","../src/sheets/character/tabs/CharacterBiographyTab.svelte","../src/sheets/actor/tabs/ActorJournalTab.svelte","../src/sheets/actor/tabs/ActorActionsTab.svelte","../src/runtime/HandlebarsTemplateRenderer.ts","../src/api/tab/CustomTabBase.ts","../src/api/tab/HandlebarsTab.ts","../src/api/tab/HtmlTab.ts","../src/api/tab/SvelteTab.ts","../src/runtime/tab/TabManager.ts","../src/api/content/CustomContentBase.ts","../src/api/content/HandlebarsContent.ts","../src/runtime/content/CustomContentManager.ts","../src/runtime/CharacterSheetRuntime.ts","../src/components/inputs/Checkbox.svelte","../src/sheets/npc/parts/NpcLegendaryActions.svelte","../src/components/item-list/ItemFilterLayoutToggle.svelte","../src/components/listbox/SortingListbox.svelte","../src/applications/section-config/DocumentTabSectionConfig.svelte","../src/applications/section-config/DocumentTabSectionConfigApplication.ts","../src/sheets/npc/tabs/NpcAbilitiesTab.svelte","../src/sheets/npc/tabs/NpcSpellbookTab.svelte","../src/sheets/npc/tabs/NpcBiographyTab.svelte","../src/sheets/npc/tabs/NpcEffectsTab.svelte","../src/runtime/NpcSheetRuntime.ts","../src/sheets/actor/ActorEffectsTab.svelte","../src/sheets/vehicle/parts/VehicleAttributes.svelte","../src/components/bar/Bar.svelte","../src/components/bar/HpBar.svelte","../src/components/bar/ResourceWithBar.svelte","../src/sheets/vehicle/parts/ItemCrewedControl.svelte","../src/sheets/vehicle/tabs/VehicleAttributesTab.svelte","../src/sheets/vehicle/parts/CargoList.svelte","../src/sheets/vehicle/parts/PassengerOrCrewList.svelte","../src/sheets/vehicle/tabs/VehicleCargoAndCrewTab.svelte","../src/sheets/vehicle/tabs/VehicleDescriptionTab.svelte","../src/runtime/VehicleSheetRuntime.ts","../src/applications/settings/world-settings/WorldSettingsFormApplication.ts","../src/sheets/shared/ThemeSelectorButtonMenuCommand.svelte","../src/applications/theme/ThemeSettingSheetMenu.svelte","../node_modules/svelte-awesome-slider/dist/Slider.svelte","../node_modules/svelte-awesome-color-picker/dist/components/Picker.svelte","../node_modules/svelte-awesome-color-picker/dist/components/variant/default/PickerIndicator.svelte","../node_modules/svelte-awesome-color-picker/dist/components/variant/default/TextInput.svelte","../node_modules/svelte-awesome-color-picker/dist/components/variant/default/Input.svelte","../node_modules/svelte-awesome-color-picker/dist/components/variant/default/Wrapper.svelte","../node_modules/svelte-awesome-color-picker/dist/utils/texts.js","../node_modules/svelte-awesome-color-picker/dist/utils/trapFocus.js","../node_modules/svelte-awesome-color-picker/dist/components/variant/default/NullabilityCheckbox.svelte","../node_modules/svelte-awesome-color-picker/dist/components/ColorPicker.svelte","../src/applications/theme/ThemeSettingColorArticle.svelte","../src/utils/file.ts","../src/applications/theme/ThemeSettingsSheet.svelte","../src/applications/theme/ThemeSettingsFormApplication.ts","../src/migrations/v3/npc-death-flags-to-system.ts","../src/migrations/migration-selection/MigrationSelection.svelte","../src/migrations/migration-selection/MigrationSelectionApplication.ts","../src/migrations/v3/NpcDeathSavesMigration.svelte","../src/migrations/v2/biographical-flags-to-system.ts","../src/migrations/v2/CharacterBiographyMigration.svelte","../src/migrations/v1/og-flags-to-v1.ts","../src/migrations/v1/og-settings-to-v1.ts","../src/migrations/v1/V1OnboardingMigration.svelte","../src/migrations/v3/ccss-to-tidy.ts","../src/migrations/v3/CcssToTidyMigration.svelte","../src/migrations/v4/favorites-to-system.ts","../src/migrations/v4/FavoritesToSystemMigration.svelte","../src/api/ApiConstants.ts","../src/api/config/action-list/ActionListApi.ts","../src/api/config/actor-item/ActorItemApi.ts","../src/runtime/ActorPortraitRuntime.ts","../src/api/config/actor-portrait/ActorPortraitApi.ts","../src/runtime/actor-traits/CustomActorTraitsRuntime.ts","../src/api/config/actor-traits/ActorTraitsApi.ts","../src/api/config/spell-school/SpellSchoolApi.ts","../src/api/config/item-summary/ItemSummaryApi.ts","../src/api/config/exhaustion/ExhaustionApi.ts","../src/context-menu/FloatingContextMenu.ts","../src/components/context-menu/FloatingContextMenu.svelte","../src/sheets/item/parts/ItemProfilePicture.svelte","../src/sheets/shared/Source.svelte","../src/sheets/item/parts/ItemIdentifiableName.svelte","../src/components/toggle/PropertyToggle.svelte","../src/sheets/item/parts/ItemHeaderToggles.svelte","../src/sheets/item/EquipmentSheet.svelte","../src/components/content-concealment/UnidentifiedNotice.svelte","../src/components/content-concealment/ContentConcealer.svelte","../src/sheets/item/tabs/ItemActiveEffectsTab.svelte","../src/components/utility/InlineSvg.svelte","../src/sheets/item/tabs/ItemAdvancementTab.svelte","../src/sheets/item/form/ItemFormGroup.svelte","../src/sheets/item/parts/ItemStartingEquipment.svelte","../src/sheets/item/tabs/ItemBackgroundDetailsTab.svelte","../src/sheets/item/parts/ItemSpellcasting.svelte","../src/sheets/item/tabs/ItemClassDetailsTab.svelte","../src/sheets/item/parts/ItemActivation.svelte","../src/sheets/item/parts/ItemAction.svelte","../src/utils/system-properties.ts","../src/sheets/item/parts/ItemProperties.svelte","../src/sheets/item/tabs/ItemConsumableDetailsTab.svelte","../src/sheets/item/tabs/ItemContainerContentsTab.svelte","../src/sheets/item/tabs/ItemContainerDetailsTab.svelte","../src/sheets/item/tabs/ItemDescriptionTab.svelte","../src/sheets/item/tabs/ItemRaceDetailsTab.svelte","../src/components/layout/VerticalLineSeparator.svelte","../src/components/accordion/Accordion.svelte","../src/components/accordion/AccordionItem.svelte","../src/sheets/item/parts/ItemDescriptions.svelte","../src/components/editor/OpenSheetEditor.svelte","../src/sheets/item/tabs/ItemDescriptionWithSidebarTab.svelte","../src/sheets/item/parts/ItemMountable.svelte","../src/sheets/item/tabs/ItemEquipmentDetailsTab.svelte","../src/sheets/item/tabs/ItemFeatDetailsTab.svelte","../src/sheets/item/tabs/ItemLootDetailsTab.svelte","../src/sheets/item/tabs/ItemRaceDescriptionTab.svelte","../src/sheets/item/tabs/ItemSpellDetailsTab.svelte","../src/sheets/item/tabs/ItemSubclassDetailsTab.svelte","../src/sheets/item/tabs/ItemToolDetailsTab.svelte","../src/sheets/item/tabs/ItemWeaponDetailsTab.svelte","../src/runtime/item/item-sheet-tabs.ts","../src/sheets/item/BackgroundSheet.svelte","../src/sheets/item/ClassSheet.svelte","../src/sheets/item/ConsumableSheet.svelte","../src/components/item-info-card/DefaultItemCardContentTemplate.svelte","../src/components/item-info-card/SpellbookItemCardContent.svelte","../src/components/item-info-card/InventoryItemCardContent.svelte","../src/components/item-info-card/item-info-card.ts","../src/components/item-info-card/ItemInfoCard.svelte","../src/sheets/item/ContainerSheet.svelte","../src/sheets/item/FeatSheet.svelte","../src/sheets/item/LootSheet.svelte","../src/sheets/item/SpellSheet.svelte","../src/sheets/item/SubclassSheet.svelte","../src/sheets/item/ToolSheet.svelte","../src/sheets/item/WeaponSheet.svelte","../src/sheets/item/RaceSheet.svelte","../src/runtime/item/ItemSheetRuntime.ts","../src/api/config/item/ItemConfigApi.ts","../src/api/config/ConfigApi.ts","../src/api/content/HtmlContent.ts","../src/sheets/actor/ExhaustionTracker.svelte","../src/sheets/character/parts/Inspiration.svelte","../src/sheets/actor/DeathSaves.svelte","../src/sheets/character/parts/Rest.svelte","../src/sheets/character/parts/HitDice.svelte","../src/sheets/character/parts/CharacterHitPoints.svelte","../src/sheets/actor/TempHp.svelte","../src/sheets/actor/ActorPortrait.svelte","../src/sheets/actor/ActorProfile.svelte","../src/sheets/actor/ExhaustionInput.svelte","../src/sheets/character/parts/CharacterProfile.svelte","../src/sheets/actor/ActorWarnings.svelte","../src/sheets/actor/SpecialSaves.svelte","../src/sheets/actor/AllowEditLock.svelte","../src/sheets/actor/ActorMovement.svelte","../src/sheets/actor/RollableBlockTitle.svelte","../src/sheets/actor/BlockScore.svelte","../src/sheets/actor/AttributeBlock.svelte","../src/sheets/actor/InitiativeBlock.svelte","../src/sheets/actor/AcShieldBase.svelte","../src/sheets/actor/AcShield.svelte","../src/sheets/actor/ActorHeaderStats.svelte","../src/applications/tab-selection/TabSelection.svelte","../src/applications/tab-selection/TabSelectionFormApplication.ts","../src/applications/ApplicationsManager.ts","../src/sheets/actor/SheetMenu.svelte","../src/sheets/shared/InlineCreatureType.svelte","../src/applications/actor-origin-summary/ActorOriginSummaryConfig.svelte","../src/applications/actor-origin-summary/ActorOriginSummaryConfigFormApplication.ts","../src/sheets/actor/ActorName.svelte","../src/sheets/character/CharacterSheetFull.svelte","../src/sheets/actor/LimitedHeader.svelte","../src/sheets/character/CharacterSheetLimited.svelte","../src/sheets/character/CharacterSheet.svelte","../src/context-menu/tidy5e-context-menu.ts","../src/utils/applications.ts","../src/utils/asynchrony.ts","../src/utils/content.ts","../src/sheets/CustomContentRenderer.ts","../src/utils/session-storage.ts","../src/features/caching/ItemTableToggleCacheService.ts","../src/utils/mutex.ts","../src/runtime/user-preferences/SheetPreferencesRuntime.ts","../src/sheets/Tidy5eBaseActorSheet.ts","../src/features/sections/CharacterSheetSections.ts","../src/sheets/mixins/BaseSheetCustomSectionMixin.ts","../src/features/conditions-and-effects/ConditionsAndEffects.ts","../src/sheets/Tidy5eCharacterSheet.ts","../src/sheets/npc/parts/NpcHitPoints.svelte","../src/sheets/npc/parts/NpcRest.svelte","../src/sheets/npc/parts/NpcHealthFormulaRoller.svelte","../src/sheets/npc/parts/NpcProfile.svelte","../src/components/layout/DelimitedTruncatedContent.svelte","../src/sheets/shared/InlineSource.svelte","../src/sheets/npc/NpcSheetFull.svelte","../src/sheets/npc/NpcSheetLimited.svelte","../src/sheets/npc/NpcSheet.svelte","../src/features/sections/NpcSheetSections.ts","../src/sheets/Tidy5eNpcSheet.ts","../src/sheets/vehicle/parts/VehicleHitPoints.svelte","../src/sheets/vehicle/parts/VehicleDamageAndMishapThresholds.svelte","../src/sheets/vehicle/parts/VehicleMovement.svelte","../src/sheets/vehicle/parts/VehicleProfile.svelte","../src/sheets/actor/AcShieldVehicle.svelte","../src/sheets/vehicle/VehicleSheetFull.svelte","../src/sheets/vehicle/VehicleSheetLimited.svelte","../src/sheets/vehicle/VehicleSheet.svelte","../src/utils/class-inheritance.ts","../src/sheets/Tidy5eKgarVehicleSheet.ts","../src/sheets/item/TypeNotFoundSheet.svelte","../src/sheets/Tidy5eItemSheet.ts","../src/sheets/Tidy5eContainerSheet.ts","../src/api/Tidy5eSheetsApi.ts","../src/migrations/v5/bonds-ideals-flaws-to-system.ts","../src/migrations/v5/BondsIdealsFlawsToSystemMigration.svelte","../src/migrations/v5/spell-class-to-source-class.ts","../src/migrations/v5/SpellClassToSourceClassMigration.svelte","../src/migrations/v5/npc-exhaustion-to-system.ts","../src/migrations/v5/NpcExhaustionToSystemMigration.svelte","../src/migrations/BulkMigrations.svelte","../src/migrations/BulkMigrationsApplication.ts","../src/applications/settings/about/About.svelte","../src/applications/settings/about/AboutApplication.ts","../src/applications/sheet-preferences/ApplyTidySheetPreferences.svelte","../src/applications/sheet-preferences/ApplyTidySheetPreferencesApplication.ts","../src/settings/settings.ts","../src/foundry/foundry-adapter.ts","../src/runtime/runtime-init.ts","../src/migrations/notification/MigrationNotification.svelte","../src/migrations/MigrationTally.ts","../src/migrations/notification/MigrationNotificationFormApplication.ts","../src/integration/modules/PopoutModuleIntegration.ts","../src/integration/modules/CustomCharacterSheetsModuleIntegration.ts","../src/integration/integration.ts","../src/main.ts"],"sourcesContent":["const moduleId = 'tidy5e-sheet';\nexport const CONSTANTS = {\n  ALPHA_MODULE_ID: 'tidy5e-sheet-kgar',\n  MODULE_ID: moduleId,\n  DND5E_SYSTEM_ID: 'dnd5e',\n  DOCUMENT_NAME_ACTOR: 'Actor',\n  ATTUNEMENT_OPTIONAL: 'optional',\n  ATTUNEMENT_REQUIRED: 'required',\n  ITEM_CAPACITY_TYPE_ITEMS: 'items',\n  ITEM_CAPACITY_TYPE_WEIGHT: 'weight',\n  ITEM_TYPE_BACKGROUND: 'background',\n  ITEM_TYPE_CLASS: 'class',\n  ITEM_TYPE_CONSUMABLE: 'consumable',\n  ITEM_TYPE_CONTAINER: 'container',\n  ITEM_TYPE_EQUIPMENT: 'equipment',\n  ITEM_TYPE_FEAT: 'feat',\n  ITEM_TYPE_LOOT: 'loot',\n  ITEM_TYPE_RACE: 'race',\n  ITEM_TYPE_SPELL: 'spell',\n  ITEM_TYPE_SUBCLASS: 'subclass',\n  ITEM_TYPE_TOOL: 'tool',\n  ITEM_TYPE_WEAPON: 'weapon',\n  ITEM_SYSTEM_TYPE_AMMO: 'ammo',\n  MESSAGE_BUS_COLLAPSE_ALL: 'collapse-all',\n  MESSAGE_BUS_EXPAND_ALL: 'expand-all',\n  /**\n   * Main button pressed, usually the left button or the un-initialized state\n   */\n  MOUSE_BUTTON_MAIN: 0,\n  /**\n   * Auxiliary button pressed, usually the wheel button or the middle button (if present)\n   */\n  MOUSE_BUTTON_AUXILIARY: 1,\n  /**\n   * Secondary button pressed, usually the right button\n   */\n  MOUSE_BUTTON_SECONDARY: 2,\n  CONTEXT_MENU_TYPE_EFFECTS: 'effects',\n  CONTEXT_MENU_TYPE_ITEMS: 'items',\n  CONTEXT_MENU_TYPE_ITEM_ADVANCEMENT: 'item-advancement',\n  DND5E_CLASSES: {\n    artificer: 'TIDY5E.Class.Artificer',\n    barbarian: 'TIDY5E.Class.Barbarian',\n    bard: 'TIDY5E.Class.Bard',\n    cleric: 'TIDY5E.Class.Cleric',\n    druid: 'TIDY5E.Class.Druid',\n    fighter: 'TIDY5E.Class.Fighter',\n    monk: 'TIDY5E.Class.Monk',\n    paladin: 'TIDY5E.Class.Paladin',\n    ranger: 'TIDY5E.Class.Ranger',\n    rogue: 'TIDY5E.Class.Rogue',\n    sorcerer: 'TIDY5E.Class.Sorcerer',\n    warlock: 'TIDY5E.Class.Warlock',\n    wizard: 'TIDY5E.Class.Wizard',\n    custom: 'TIDY5E.Class.Custom',\n  },\n  CHARACTER_FAVORITE_SECTION_GENERIC: 'generic',\n  CHARACTER_FEAT_SECTION_BACKGROUND: 'background',\n  CHARACTER_FEAT_SECTION_CLASSES: 'classes',\n  CHARACTER_FEAT_SECTION_ACTIVE: 'active',\n  CHARACTER_FEAT_SECTION_PASSIVE: 'passive',\n  CHARACTER_FEAT_SECTION_RACE: 'race',\n  NPC_ABILITY_SECTION_WEAPONS: 'weapons',\n  NPC_ABILITY_SECTION_ACTIONS: 'actions',\n  NPC_ABILITY_SECTION_PASSIVE: 'passive',\n  NPC_ABILITY_SECTION_EQUIPMENT: 'equipment',\n  NPC_ABILITY_SECTION_CLASSES: 'classes',\n  TAB_OPTION_CLASS: 'tab-option',\n  TAB_CONTAINER_CONTENTS: 'contents',\n  TAB_CONTAINER_SECTION_CONTENTS: 'contents',\n  TAB_ITEM_DESCRIPTION_ID: 'description',\n  TAB_ITEM_DETAILS_ID: 'details',\n  TAB_ITEM_ADVANCEMENT_ID: 'advancement',\n  TAB_ITEM_EFFECTS_ID: 'effects',\n  TAB_CHARACTER_ATTRIBUTES: 'attributes',\n  TAB_CHARACTER_INVENTORY: 'inventory',\n  TAB_CHARACTER_SPELLBOOK: 'spellbook',\n  TAB_CHARACTER_FEATURES: 'features',\n  TAB_CHARACTER_EFFECTS: 'effects',\n  TAB_CHARACTER_BIOGRAPHY: 'biography',\n  TAB_CHARACTER_JOURNAL: 'journal',\n  TAB_MIGRATIONS_V1_ONBOARDING: 'v1-onboarding',\n  TAB_MIGRATIONS_CHARACTER_BIOGRAPHY: 'character-bio',\n  TAB_MIGRATIONS_NPC_DEATH: 'npc-death',\n  TAB_MIGRATIONS_CCSS_TO_TIDY: 'ccss-to-tidy',\n  TAB_MIGRATIONS_FAVORITES_TO_SYSTEM: 'favorites-to-system',\n  TAB_MIGRATIONS_BONDS_IDEALS_FLAWS_TO_SYSTEM: 'bonds-ideals-flaws-to-system',\n  TAB_MIGRATIONS_SPELL_CLASS_TO_SOURCE_CLASS: 'spell-class-to-source-class',\n  TAB_MIGRATIONS_NPC_EXHAUSTION: 'npc-exhaustion',\n  TAB_NPC_ABILITIES: 'attributes',\n  TAB_NPC_INVENTORY: 'inventory',\n  TAB_NPC_SPELLBOOK: 'spellbook',\n  TAB_NPC_EFFECTS: 'effects',\n  TAB_NPC_BIOGRAPHY: 'biography',\n  TAB_NPC_JOURNAL: 'journal',\n  TAB_VEHICLE_ATTRIBUTES: 'attributes',\n  TAB_VEHICLE_CARGO_AND_CREW: 'cargo',\n  TAB_VEHICLE_EFFECTS: 'effects',\n  TAB_VEHICLE_DESCRIPTION: 'biography',\n  TAB_ACTOR_ACTIONS: 'actions',\n  TAB_WORLD_SETTINGS_CHARACTER: 'world-settings-character',\n  TAB_WORLD_SETTINGS_NPC: 'world-settings-npc',\n  TAB_WORLD_SETTINGS_VEHICLE: 'world-settings-vehicle',\n  TAB_WORLD_SETTINGS_ICONS: 'world-settings-icons',\n  TAB_WORLD_SETTINGS_ITEM: 'world-settings-item',\n  TAB_WORLD_SETTINGS_EXHAUSTION: 'world-settings-exhaustion',\n  TAB_WORLD_SETTINGS_SHEETLOCK: 'world-settings-sheet-lock',\n  TAB_WORLD_SETTINGS_MISC: 'world-settings-misc',\n  TAB_USER_SETTINGS_PLAYERS: 'user-settings-players',\n  TAB_USER_SETTINGS_NPCS: 'user-settings-npcs',\n  TAB_USER_SETTINGS_VEHICLES: 'user-settings-vehicles',\n  TAB_USER_SETTINGS_ACTIONS_LIST: 'user-settings-actions-list',\n  THEME_EXTENSION_WITH_DOT: '.tidy5e-theme',\n  THEME_ID_DEFAULT_LIGHT: 'light',\n  THEME_ID_DEFAULT_DARK: 'dark',\n  THEME_ID_DEFAULT: 'default',\n  SHEET_TYPE_CHARACTER: 'character',\n  SHEET_TYPE_NPC: 'npc',\n  SHEET_TYPE_VEHICLE: 'vehicle',\n  SHEET_TYPE_CONTAINER: 'container',\n  SHEET_LAYOUT_ALL: 'all',\n  SHEET_LAYOUT_CLASSIC: 'classic',\n  CIRCULAR_PORTRAIT_OPTION_ALL: 'all',\n  CIRCULAR_PORTRAIT_OPTION_CHARACTER: 'pc',\n  CIRCULAR_PORTRAIT_OPTION_NPCVEHICLE: 'npc-vehicle',\n  CIRCULAR_PORTRAIT_OPTION_NONE: 'none',\n  SPELL_PREPARATION_MODE_INNATE: 'innate',\n  SPELL_PREPARATION_MODE_PREPARED: 'prepared',\n  SPELL_PREPARATION_MODE_ALWAYS: 'always',\n  SPELL_PREPARATION_MODE_PACT: 'pact',\n  SPELL_PREPARATION_MODE_ATWILL: 'atwill',\n  SPELL_PREPARATION_MODE_RITUAL: 'ritual',\n  SPELL_SLOT_TRACKER_MODE_PREFERENCE: 'spellSlotTrackerMode',\n  SPELL_SLOT_TRACKER_MODE_PIPS: 'pips',\n  SPELL_SLOT_TRACKER_MODE_VALUE_MAX: 'value-max',\n  CONTEXT_GRID_CELL_HOVER: 'grid-cell-hover',\n  CLASS_TIDY_USE_CORE_LISTENERS: 'tidy-use-core-listeners',\n  CLASS_SELECTOR_TIDY_USE_CORE_LISTENERS: '.tidy-use-core-listeners',\n  CLASS_ACTOR_SHEET_5E: 'ActorSheet5e',\n  HTML_DYNAMIC_RENDERING_ATTRIBUTE: 'data-tidy-render-scheme=\"handlebars\"',\n  HTML_DYNAMIC_RENDERING_ATTRIBUTE_SELECTOR:\n    '[data-tidy-render-scheme=\"handlebars\"]',\n  /** The attribute which indicates a particular part of a sheet. */\n  SHEET_PART_ATTRIBUTE: 'data-tidy-sheet-part',\n  SHEET_PARTS: {\n    /** An interactable control that can open configuration settings for a target ability. */\n    ABILITY_CONFIGURATION_CONTROL: 'ability-configuration-control',\n\n    /** A rollable/interactable element which rolls an ability save or test. */\n    ABILITY_ROLLER: 'ability-roller',\n\n    /** An interactable toggle for ability saving throw proficiency. */\n    ABILITY_SAVE_PROFICIENCY_TOGGLE: 'ability-save-proficiency-toggle',\n\n    /** An ability score (e.g., \"str\", \"dex\", \"wis\", etc.), whether readonly or editable. */\n    ABILITY_SCORE: 'ability-score',\n\n    /** A rollable/interactable element which rolls an ability save. */\n    ABILITY_SAVE_ROLLER: 'ability-save-roller',\n\n    /** A container for a given ability score (e.g., \"str\", \"dex\", \"wis\", etc.). */\n    ABILITY_SCORE_CONTAINER: 'ability-score-container',\n\n    /** A rollable/interactable element which rolls an ability test. */\n    ABILITY_TEST_ROLLER: 'ability-test-roller',\n\n    /** A container which houses an actor portrait and other parts related to actor portrait features. */\n    ACTOR_PORTRAIT_CONTAINER: 'actor-portrait-container',\n\n    /** An overlay element for an actor portrait which provides a visual representation of remaining health. */\n    ACTOR_PORTRAIT_HEALTH_OVERLAY: 'actor-portrait-health-overlay',\n\n    /** An actor portrait image element. */\n    ACTOR_PORTRAIT_IMAGE: 'actor-portrait-image',\n\n    /** An actor trait container, such as Senses, Languages, or Tools. */\n    ACTOR_TRAIT: 'actor-trait',\n\n    /** The specific details of an actor trait container, such as Senses, Languages, or Tools. */\n    ACTOR_TRAIT_DETAILS: 'actor-trait-details',\n\n    /** A control for toggling a condition */\n    CONDITION_TOGGLE: 'condition-toggle',\n\n    /** A container for all form fields related to a given damage part. */\n    DAMAGE_PART_CONTAINER: 'damage-part-container',\n\n    /** An interactable control which the user can execute to delete a damage part to an item. */\n    DAMAGE_PART_DELETE_COMMAND: 'damage-part-delete-command',\n\n    /** An input element which contains a damage part formula, usually for an item. */\n    DAMAGE_PART_FORMULA: 'damage-part-formula',\n\n    /** An input element which represents the damage type of a damage part, usually for an item. */\n    DAMAGE_PART_TYPE: 'damage-part-type',\n\n    /** An input for the number of failed death saves an actor has. */\n    DEATH_SAVE_FAILURES: 'death-save-failures',\n\n    /** A rollable/interactable element which rolls a death saving throw. */\n    DEATH_SAVE_ROLLER: 'death-save-roller',\n\n    /** An input for the number of successful death saves an actor has. */\n    DEATH_SAVE_SUCCESSES: 'death-save-successes',\n\n    /** An interactable element which toggles a view */\n    EXPANSION_TOGGLE: 'table-expansion-toggle',\n\n    /** An interactable element which toggles an inline container's contents view */\n    INLINE_CONTAINER_TOGGLE: 'inline-container-toggle',\n\n    /** An interactable control which the user can execute to create an item (e.g., consumable, feature, loot, spell, weapon, etc.). */\n    ITEM_CREATE_COMMAND: 'item-create-command',\n\n    /** An image element for an item. */\n    ITEM_IMAGE: 'item-image',\n\n    /** The container element for an item image. */\n    ITEM_IMAGE_CONTAINER: 'item-image-container',\n\n    /** An element which contains the name of an item. */\n    ITEM_NAME: 'item-name',\n\n    /** A list-based tabular representation of items (e.g., equipment, loot, spells, etc.). */\n    ITEM_TABLE: 'item-table',\n\n    /** The header row of an item table. */\n    ITEM_TABLE_HEADER_ROW: 'item-table-header-row',\n\n    /** A row in an item table. */\n    ITEM_TABLE_ROW: 'item-table-row',\n\n    /** An interactable control which the user can execute to use an item (e.g., consumable, feature, loot, spell, weapon, etc.). */\n    ITEM_USE_COMMAND: 'item-use-command',\n\n    /** A series of properties related to an item, to be found on item summaries, item cards, and other locations where read-only item information is given. */\n    ITEM_PROPERTY_LIST: 'item-property-list',\n\n    /** A series of properties related to an item, viewed from that item's sheet. These include read-only properties, currency value, and other situational input. */\n    ITEM_SHEET_PROPERTIES: 'item-sheet-properties',\n\n    /** A summary of an item, usually taken from the item's chat data. */\n    ITEM_SUMMARY: 'item-summary',\n\n    /** A containing element for a series of item lists or grids. */\n    ITEMS_CONTAINER: 'items-container',\n\n    /** The element which contains the modifier text for melee spell attacks. */\n    MELEE_SPELL_ATTACK_MOD: 'melee-spell-attack-mod',\n\n    /**\n     * A container for a sheet name. The sheet name is usually in input, and its container has some additional styles associated with it.\n     * The container typically sits in a sheet header row with other header-related elements.\n     */\n    NAME_CONTAINER: 'name-container',\n\n    /** The sheet header row where the sheet name appears. */\n    NAME_HEADER_ROW: 'name-header-row',\n\n    /** A containing element for a series of item lists related to the NPC Abilities tab. */\n    NPC_ABILITIES_CONTAINER: 'npc-abilities-list',\n\n    /** The element which contains the modifier text for ranged spell attacks. */\n    RANGED_SPELL_ATTACK_MOD: 'ranged-spell-attack-mod',\n\n    /** A container for a single resource (first, second, third, etc.). */\n    RESOURCE: 'resource',\n\n    /** The container where all known resources (first, second, third, etc.) are kept. */\n    RESOURCES_CONTAINER: 'resources-container',\n\n    /** An interactable element that can clear the search input it is associated with. */\n    SEARCH_CLEAR: 'search-clear',\n\n    /** A container for a search input and its search clearing interactable element. */\n    SEARCH_CONTAINER: 'search-container',\n\n    /** A user input for performing searches. */\n    SEARCH_INPUT: 'search-input',\n\n    /** An interactable control that can open configuration settings for a target skill. */\n    SKILL_CONFIGURATION_CONTROL: 'skill-configuration-control',\n\n    /** A container for a single skill, including its roller, proficiency toggle, and any other elements related to the skill. */\n    SKILL_CONTAINER: 'skill-container',\n\n    /** An interactable toggle for skill proficiency. */\n    SKILL_PROFICIENCY_TOGGLE: 'skill-proficiency-toggle',\n\n    /** A rollable/interactable element which rolls a skill check. */\n    SKILL_ROLLER: 'skill-roller',\n\n    /** A list of skills for the target actor. */\n    SKILLS_LIST: 'skills-list',\n\n    /** An interactable toggle for showing/hiding unproficienct skills. */\n    SKILLS_SHOW_PROFICIENT_TOGGLE: 'skills-show-proficiency-toggle',\n\n    /** The element which contains the modifier text for spell attacks in general. This field is shown when melee and ranged spell attack mods are the same. */\n    SPELL_ATTACK_MOD: 'spell-attack-mod',\n\n    /** The element which contains spell DC. */\n    SPELL_DC: 'spell-dc',\n\n    /** A cell in a table row. */\n    TABLE_CELL: 'table-cell',\n\n    /** A cell in a table's header row. */\n    TABLE_HEADER_CELL: 'table-header-cell',\n\n    /** The header row in a table. */\n    TABLE_HEADER_ROW: 'table-header-row',\n\n    /** A row in a table. */\n    TABLE_ROW: 'table-row',\n\n    /** An interactable control that can open configuration settings for a target tool. */\n    TOOL_CONFIGURATION_CONTROL: 'tool-configuration-control',\n\n    /** A container for a single tool, including its roller, proficiency toggle, and any other elements related to the tool. */\n    TOOL_CONTAINER: 'tool-container',\n\n    /** An interactable toggle for tool proficiency. */\n    TOOL_PROFICIENCY_TOGGLE: 'tool-proficiency-toggle',\n\n    /** A rollable/interactable element which rolls a tool check. */\n    TOOL_ROLLER: 'tool-roller',\n\n    /** A list of tools for the target actor. */\n    TOOLS_LIST: 'tools-list',\n\n    /** A toolbar that usually sits at the top of a section of content, providing features like search, filtering, etc. */\n    UTILITY_TOOLBAR: 'utility-toolbar',\n\n    /** A toolbar command, usually a button */\n    UTILITY_TOOLBAR_COMMAND: 'utility-toolbar-command',\n  },\n  ACTIVATION_COST_ACTION: 'action',\n  ACTIVATION_COST_BONUS: 'bonus',\n  ACTIVATION_COST_CREW: 'crew',\n  ACTIVATION_COST_LAIR: 'lair',\n  ACTIVATION_COST_LEGENDARY: 'legendary',\n  ACTIVATION_COST_MYTHIC: 'mythic',\n  ACTIVATION_COST_NONE: 'none',\n  ACTIVATION_COST_REACTION: 'reaction',\n  ACTIVATION_COST_SPECIAL: 'special',\n  LIMITED_USES_PER_CHARGES: 'charges',\n  LIMITED_USES_PER_DAWN: 'dawn',\n  LIMITED_USES_PER_DAY: 'day',\n  LIMITED_USES_PER_DUSK: 'dusk',\n  LIMITED_USES_PER_LONG_REST: 'lr',\n  LIMITED_USES_PER_SHORT_REST: 'sr',\n  SHEET_SETTINGS_OPTION_NONE: 'none',\n  SHEET_SETTINGS_OPTION_GM_ONLY: 'gm-only',\n  SHEET_SETTINGS_OPTION_GM_AND_OWNERS: 'gm-and-owners',\n  TEXT_EDITOR_ACTIVATION_ELEMENT_SELECTOR: '.editor-content[data-edit]',\n  SVELTE_CONTEXT: {\n    ACCORDION_CONTEXT: 'accordionContext',\n    APP_ID: 'appId',\n    APPLY: 'apply',\n    BUTTON_MENU_CONTEXT: 'buttonMenuContext',\n    CARD: 'card',\n    CONFIRM: 'confirm',\n    CONTEXT: 'context',\n    CURRENT_TAB_ID: 'currentTabId',\n    EXPANDED_ITEM_DATA: 'expandedItemData',\n    EXPANDED_ITEMS: 'expandedItems',\n    FUNCTIONS: 'functions',\n    INITIAL_TAB_ID: 'initialTabId',\n    INLINE_CONTAINER_TOGGLE_SERVICE: 'inlineContainerToggleService',\n    ITEM_FILTER_SERVICE: 'itemFilterService',\n    ITEM_IDS_TO_SHOW: 'itemIdsToShow',\n    ITEM_TABLE_TOGGLES: 'itemTableToggles',\n    LOCATION: 'location',\n    MESSAGE_BUS: 'messageBus',\n    ON_FILTER_CLEAR_ALL: 'onFilterClearAll',\n    ON_FILTER: 'onFilter',\n    ON_ITEM_TABLE_TOGGLE: 'onItemTableToggle',\n    ON_ITEM_TOGGLED: 'onItemToggled',\n    ON_SEARCH: 'onSearch',\n    ON_TAB_SELECTED: 'onTabSelected',\n    SEARCH_FILTERS: 'searchFilters',\n    STATS: 'stats',\n    TAB_ID: 'tabId',\n    USE_DEFAULT: 'useDefault',\n    VALIDATE: 'validate',\n  },\n} as const;\n","// ================================\n// Logger utility\n// ================================\n\nimport { CONSTANTS } from 'src/constants';\nimport { SettingsProvider } from 'src/settings/settings';\n\n// 0 = none, warnings = 1, debug = 2, all = 3\nexport function debug(msg: string, args?: any) {\n  if (SettingsProvider.settings.debug.get()) {\n    let formattedMsg = `DEBUG | ${CONSTANTS.MODULE_ID} | ${msg}`;\n\n    if (args !== undefined) {\n      console.log(formattedMsg, args);\n    } else {\n      console.log(formattedMsg);\n    }\n  }\n}\n\nexport function log(message: string, args?: any) {\n  message = `${CONSTANTS.MODULE_ID} | ${message}`;\n\n  const formattedLog = message.replace('<br>', '\\n');\n\n  if (args !== undefined) {\n    console.log(formattedLog, args);\n  } else {\n    console.log(formattedLog);\n  }\n}\n\nexport function notify(message: string) {\n  message = `${CONSTANTS.MODULE_ID} | ${message}`;\n  ui.notifications?.notify(message);\n  console.log(message.replace('<br>', '\\n'));\n}\n\nexport function info(info: string, notify = false, args?: any) {\n  info = `${CONSTANTS.MODULE_ID} | ${info}`;\n\n  if (notify) {\n    ui.notifications?.info(info);\n  }\n\n  const formattedInfo = info.replace('<br>', '\\n');\n\n  if (args !== undefined) {\n    console.log(formattedInfo, args);\n  } else {\n    console.log(formattedInfo);\n  }\n}\n\nexport function warn(warning: string, notify = false, args?: any) {\n  warning = `${CONSTANTS.MODULE_ID} | ${warning}`;\n\n  if (notify) {\n    ui.notifications?.warn(warning);\n  }\n\n  const formattedWarning = warning.replace('<br>', '\\n');\n\n  if (args !== undefined) {\n    console.warn(formattedWarning, args);\n  } else {\n    console.warn(formattedWarning);\n  }\n}\n\nexport function error(message: string, notify = true, args?: any) {\n  message = `${CONSTANTS.MODULE_ID} | ${message}`;\n\n  if (notify) {\n    ui.notifications?.error(message);\n  }\n\n  if (args !== undefined) {\n    console.error(message, args);\n  } else {\n    console.error(message);\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { log } from 'src/utils/logging';\n\nexport class ResetSettingsDialog extends FormApplication {\n  constructor(...args: any[]) {\n    super(...args);\n    return new Dialog({\n      title: FoundryAdapter.localize(`TIDY5E.Settings.Reset.dialogs.title`),\n      content:\n        '<p style=\"margin-bottom:1rem;\">' +\n        FoundryAdapter.localize(`TIDY5E.Settings.Reset.dialogs.content`) +\n        '</p>',\n      buttons: {\n        confirm: {\n          icon: '<i class=\"fas fa-check\"></i>',\n          label: FoundryAdapter.localize(`TIDY5E.Settings.Reset.dialogs.confirm`),\n          callback: async () => {\n            const storedSettings = game.settings.storage\n              .get('world')\n              .filter((setting: any) =>\n                setting.key.startsWith(`${CONSTANTS.MODULE_ID}.`)\n              );\n\n            for (let setting of storedSettings) {\n              log(`Reset setting '${setting.key}'`);\n              await setting.delete();\n            }\n            //window.location.reload();\n          },\n        },\n        cancel: {\n          icon: '<i class=\"fas fa-times\"></i>',\n          label: FoundryAdapter.localize(`TIDY5E.Settings.Reset.dialogs.cancel`),\n        },\n      },\n      default: 'cancel',\n    });\n  }\n\n  async _updateObject(...args: any[]) {\n    // do nothing\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport type { Tidy5eTheme } from 'src/types/theme.types';\n\nexport const defaultDarkTheme: Tidy5eTheme = {\n  name: 'TIDY5E.Settings.SheetTheme.dark',\n  id: CONSTANTS.THEME_ID_DEFAULT_DARK,\n  description: 'The default Tidy 5e Dark theme.',\n  variables: {\n    '--t5e-title-font-family':\n      \"'Modesto Condensed', 'Palatino Linotype', serif\",\n    '--t5e-body-font-family': \"'Signika', sans-serif\",\n    '--t5e-primary-font-color': 'rgba(255, 255, 255, 0.8)',\n    '--t5e-background': 'rgba(30, 30, 30, 1)',\n    '--t5e-faintest-color': 'rgba(255, 255, 255, 0.05)',\n    '--t5e-faint-color': 'rgba(255, 255, 255, 0.1)',\n    '--t5e-light-color': 'rgba(255, 255, 255, 0.25)',\n    '--t5e-primary-color': 'rgba(255, 255, 255, 0.8)',\n    '--t5e-secondary-color': 'rgba(255, 255, 255, 0.65)',\n    '--t5e-tertiary-color': 'rgba(255, 255, 255, 0.4)',\n    '--t5e-primary-accent-color': 'hsl(23.53, 80%, 50%)',\n    '--spell-level-button-available-slots-text-color': 'white',\n    '--t5e-white': 'rgba(0, 0, 0, 1)',\n    '--t5e-faint-white': 'rgba(255, 255, 255, 0.2)',\n    '--t5e-linked-accent-color': 'rgba(0, 255, 0, 0.75)',\n    '--t5e-unlinked-accent-color': 'rgba(255, 0, 0, 0.75)',\n    '--t5e-linked-light-color': 'rgba(0, 255, 0, 0.4)',\n    '--t5e-unlinked-light-color': 'rgba(255, 0, 0, 0.4)',\n    '--t5e-sheet-unlocked-icon-background': 'rgba(0, 150, 100, 0.6)',\n    '--t5e-sheet-locked-icon-background': 'rgba(255, 0, 0, 0.6)',\n    '--t5e-header-background': 'rgba(255, 255, 255, 0.05)',\n    '--t5e-prepareable-color': 'rgba(119, 136, 153, 1)',\n    '--t5e-equipped-background': 'rgba(0, 250, 180, 0.3)',\n    '--t5e-equipped-item-grid-tile-outline-color': 'rgba(50, 205, 50, 1)',\n    '--t5e-equipped-item-grid-tile-accent-color': 'rgba(173, 255, 47, 1)',\n    '--t5e-prepared-background': 'rgba(0, 250, 180, 0.3)',\n    '--t5e-prepared-item-grid-tile-outline-color': 'rgba(50, 205, 50, 1)',\n    '--t5e-prepared-item-grid-tile-accent-color': 'rgba(173, 255, 47, 1)',\n    '--t5e-pact-background': 'rgba(250, 0, 180, 0.3)',\n    '--t5e-pact-outline-color': 'rgba(250, 50, 213, 1)',\n    '--t5e-pact-accent-color': 'rgba(198, 119, 193, 1)',\n    '--t5e-atwill-background': 'rgba(226, 246, 4, 0.3)',\n    '--t5e-atwill-outline-color': 'rgba(163, 165, 50, 1)',\n    '--t5e-atwill-accent-color': 'rgba(255, 242, 0, 1)',\n    '--t5e-innate-background': 'rgba(255, 0, 0, 0.3)',\n    '--t5e-innate-outline': 'rgba(231, 23, 23, 1)',\n    '--t5e-innate-accent': 'rgba(195, 69, 69, 1)',\n    '--t5e-ritual-only-background': 'hsl(260.36deg 50% 21.96%)',\n    '--t5e-ritual-only-outline-color': 'hsl(260.36deg 50% 21.96%)',\n    '--t5e-ritual-only-accent-color': 'hsl(260.36deg 50% 21.96%)',\n    '--t5e-alwaysprepared-background': 'rgba(0, 100, 255, 0.3)',\n    '--t5e-alwaysprepared-outline-color': 'rgba(65, 105, 225, 1)',\n    '--t5e-alwaysprepared-accent-color': 'rgba(0, 191, 255, 1)',\n    '--t5e-magic-accent-color': '#ada11a',\n    '--t5e-attunement-required-color': 'var(--t5e-light-color)',\n    '--t5e-attuned-color': 'var(--t5e-primary-accent-color)',\n    '--t5e-attuned-item-grid-icon-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-xp-bar-background': 'rgba(94, 225, 146, 1)',\n    '--t5e-encumbrance-bar-background': 'rgba(108, 138, 165, 1)',\n    '--t5e-encumbrance-bar-outline-color': 'var(--t5e-separator-color)',\n    '--t5e-encumbrance-outline-color': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-encumbrance-text-color': 'rgba(238, 238, 238, 1)',\n    '--t5e-encumbrance-bar-text-shadow-color': '#000',\n    '--t5e-warning-accent-color': 'rgba(255, 30, 0, 0.65)',\n    '--t5e-warning-accent-contrast-color': 'rgba(255, 255, 255, 0.8)',\n    '--t5e-icon-background': 'rgba(30, 30, 30, 1)',\n    '--t5e-icon-shadow-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-icon-outline-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-icon-font-color': 'rgba(255, 255, 255, 0.4)',\n    '--t5e-icon-hover-color': 'rgba(255, 255, 255, 0.8)',\n    '--t5e-ability-modifiers-hover-label-background': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-exhaustion-severity1-background': 'rgba(255, 230, 0, 1)',\n    '--t5e-exhaustion-severity2-background': 'rgba(255, 130, 0, 1)',\n    '--t5e-exhaustion-severity3-background': 'rgba(255, 50, 0, 1)',\n    '--t5e-ability-accent-background': 'rgb(80, 80, 80)',\n    '--t5e-context-outline-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-context-shadow-color': 'rgba(0, 0, 0, 0.65)',\n    '--t5e-check-default-background-image':\n      \"url('../../modules/tidy5e-sheet/images/check-dark-unchecked.svg')\",\n    '--t5e-check-checked-background-image':\n      \"url('../../modules/tidy5e-sheet/images/check-light-checked.svg')\",\n    '--t5e-checkbox-font-color': 'rgba(255, 255, 255, 0.8)',\n    '--t5e-checkbox-outline-color': 'rgba(50, 50, 50, 1)',\n    '--t5e-checkbox-unchecked-color': 'rgba(75, 75, 75, 1)',\n    '--t5e-checkbox-checked-color': 'hsl(120deg 100% 40% / 50%)',\n    '--t5e-item-input-background': 'rgba(255, 255, 255, 0.1)',\n    '--t5e-item-input-hover-background': 'rgba(255, 255, 255, 0.2)',\n    '--t5e-death-save-icon-color': 'rgba(255, 255, 255, 0.75)',\n    '--t5e-death-save-text-color': 'white',\n    '--t5e-inspiration-hover-color': 'rgba(255, 255, 255, 0.75)',\n    '--t5e-inspiration-text-shadow-hover-color': 'rgba(118, 228, 255, 0.5)',\n    '--t5e-inspiration-inspired-text-shadow-color': '#76e4ff',\n    '--t5e-inspiration-inspired-background': 'rgba(153, 153, 153, 1)',\n    '--t5e-vehicle-motion-hover-color': 'rgba(255, 255, 255, 0.75)',\n    '--t5e-vehicle-motion-text-shadow-hover-color': 'rgba(118, 228, 255, 0.5)',\n    '--t5e-vehicle-in-motion-text-shadow-color': '#76e4ff',\n    '--t5e-vehicle-in-motion-background': 'rgba(153, 153, 153, 1)',\n    '--t5e-hp-bar-color': 'rgba(50, 149, 50, 0.6)',\n    '--t5e-resource-bar-color': 'rgba(21, 51, 98, 1)',\n    '--t5e-death-save-backdrop-background': 'rgba(255, 0, 0, 0.5)',\n    '--t5e-death-save-text-shadow-color': 'rgb(34, 34, 34)',\n    '--t5e-hp-overlay-background': 'rgba(255, 0, 0, 1)',\n    '--t5e-inventory-grid-image-contrast-text-shadow-color': 'rgba(0, 0, 0, 1)',\n    '--t5e-inventory-grid-hover-use-item-contrast-text-shadow-color':\n      'rgba(255, 255, 255, 1)',\n    '--t5e-sheet-background': 'var(--t5e-background)',\n    '--t5e-item-info-card-background': 'var(--t5e-background)',\n    '--t5e-content-entity-link-color': 'var(--t5e-primary-font-color)',\n    '--t5e-content-entity-link-hover-color': 'var(--t5e-primary-font-color)',\n    '--t5e-content-entity-link-background': 'var(--t5e-faint-color)',\n    '--t5e-content-entity-link-hover-background':\n      'var(--t5e-primary-accent-color)',\n    '--t5e-activated-profile-toggle-color': 'var(--t5e-primary-font-color)',\n    '--t5e-exhaustion-severity1-color': 'var(--t5e-icon-outline-color)',\n    '--t5e-exhaustion-severity2-color': 'rgba(255, 255, 255, 0.7)',\n    '--t5e-exhaustion-severity3-color': 'rgba(255, 255, 255, 0.7)',\n    '--t5e-tinymce-toolbar-background': '#fff',\n    '--t5e-tinymce-sidebar-background': 'var(--t5e-secondary-color)',\n    '--t5e-tinyme-toolbar-button-color': '#222',\n    '--t5e-prosemirror-button-color': 'rgba(100, 100, 100, 1)',\n    '--t5e-prosemirror-dropdown-item-hover-color': 'rgba(50, 50, 50, 1)',\n    '--t5e-item-info-card-box-shadow-color': 'rgba(0, 0, 0, 0.5)',\n    '--t5e-sheet-lock-icon-color': 'rgba(255, 255, 255, 0.6)',\n    '--t5e-grid-pane-favorite-icon-color': 'rgba(0, 200, 100, 1)',\n    '--t5e-settings-dialog-box-shadow-color': 'rgba(0, 0, 0, 0.75)',\n    '--t5e-sheet-lock-icon-hover-color': '#fff',\n    '--t5e-settings-dialog-border-color': '#ff6400',\n    '--t5e-spell-level-button-border-color': '#c9c7b8',\n    '--t5e-ability-modifiers-label-text-color': '#fff',\n    '--t5e-ability-mod-text-color': '#fff',\n    '--t5e-ability-mod-save-text-hover-color': '#fff',\n    '--t5e-button-menu-background': 'var(--t5e-sheet-background)',\n    '--t5e-button-menu-hover-color': 'var(--t5e-faint-color)',\n    '--t5e-button-menu-divider-color': 'var(--t5e-separator-color)',\n    '--t5e-focus-visible-box-shadow':\n      '-0.0625rem -0.0625rem 0 var(--t5e-primary-accent-color), -0.0625rem 0.0625rem 0 var(--t5e-primary-accent-color), 0.0625rem 0.0625rem 0 var(--t5e-primary-accent-color), 0.0625rem -0.0625rem 0 var(--t5e-primary-accent-color)',\n    '--t5e-button-background': 'var(--t5e-faintest-color)',\n    '--t5e-button-hover-background': 'var(--t5e-faint-color)',\n    '--t5e-button-disabled-color': 'var(--t5e-light-color)',\n    '--t5e-separator-color': 'rgba(120, 120, 120, 0.1)',\n    '--t5e-table-header-row-color': '#111111',\n    '--t5e-table-header-row-border-color': '#111111',\n    '--t5e-tab-strip-border-color': 'transparent',\n    '--t5e-tabs-background': 'var(--t5e-header-background)',\n    '--t5e-active-tab-background': 'var(--t5e-sheet-background)',\n    '--t5e-tab-background': 'transparent',\n    '--t5e-scrollbar-thumb-color': '#782e22',\n    '--t5e-scrollbar-track-color': '#0000',\n    '--t5e-spell-pip-active-background': 'var(--t5e-primary-accent-color)',\n    '--t5e-spell-pip-empty-background': 'transparent',\n    '--t5e-spell-pip-border-color': 'var(--t5e-primary-accent-color)',\n    '--t5e-switch-slider-color': '#DDD',\n  },\n  type: 'dark',\n};\n","import { CONSTANTS } from 'src/constants';\nimport type { Tidy5eTheme } from 'src/types/theme.types';\n\nexport const defaultLightTheme: Tidy5eTheme = {\n  name: 'TIDY5E.Settings.SheetTheme.light',\n  id: CONSTANTS.THEME_ID_DEFAULT_LIGHT,\n  description: 'The default Tidy 5e Light theme.',\n  variables: {\n    '--t5e-title-font-family':\n      \"'Modesto Condensed', 'Palatino Linotype', serif\",\n    '--t5e-body-font-family': \"'Signika', sans-serif\",\n    '--t5e-primary-font-color': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-background': '#f1ebe8',\n    '--t5e-faintest-color': 'rgba(0, 0, 0, 0.05)',\n    '--t5e-faint-color': 'rgba(0, 0, 0, 0.1)',\n    '--t5e-light-color': 'rgba(0, 0, 0, 0.25)',\n    '--t5e-primary-color': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-secondary-color': 'rgba(0, 0, 0, 0.65)',\n    '--t5e-tertiary-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-primary-accent-color': 'rgba(255, 100, 0, 1)',\n    '--spell-level-button-available-slots-text-color': 'white',\n    '--t5e-white': 'rgba(255, 255, 255, 1)',\n    '--t5e-faint-white': 'rgba(255, 255, 255, 0.2)',\n    '--t5e-linked-accent-color': 'rgba(0, 255, 0, 0.75)',\n    '--t5e-unlinked-accent-color': 'rgba(255, 0, 0, 0.75)',\n    '--t5e-linked-light-color': 'rgba(0, 255, 0, 0.4)',\n    '--t5e-unlinked-light-color': 'rgba(255, 0, 0, 0.4)',\n    '--t5e-sheet-unlocked-icon-background': 'rgba(0, 150, 100, 0.6)',\n    '--t5e-sheet-locked-icon-background': 'rgba(255, 0, 0, 0.6)',\n    '--t5e-header-background': 'rgba(255, 255, 255, 0.2)',\n    '--t5e-prepareable-color': 'rgba(119, 136, 153, 1)',\n    '--t5e-equipped-background': 'rgba(50, 205, 50, 0.3)',\n    '--t5e-equipped-item-grid-tile-outline-color': 'rgba(50, 205, 50, 1)',\n    '--t5e-equipped-item-grid-tile-accent-color': 'rgba(173, 255, 47, 1)',\n    '--t5e-prepared-background': 'rgba(50, 205, 50, 0.3)',\n    '--t5e-prepared-item-grid-tile-outline-color': 'rgba(50, 205, 50, 1)',\n    '--t5e-prepared-item-grid-tile-accent-color': 'rgba(173, 255, 47, 1)',\n    '--t5e-pact-background': 'rgba(250, 0, 180, 0.3)',\n    '--t5e-pact-outline-color': 'rgba(250, 50, 213, 1)',\n    '--t5e-pact-accent-color': 'rgba(198, 119, 193, 1)',\n    '--t5e-atwill-background': 'rgba(226, 246, 4, 0.3)',\n    '--t5e-atwill-outline-color': 'rgba(163, 165, 50, 1)',\n    '--t5e-atwill-accent-color': 'rgba(255, 242, 0, 1)',\n    '--t5e-innate-background': 'rgba(255, 0, 0, 0.3)',\n    '--t5e-innate-outline': 'rgba(231, 23, 23, 1)',\n    '--t5e-innate-accent': 'rgba(195, 69, 69, 1)',\n    '--t5e-ritual-only-background': 'hsl(260.09deg 100% 45.1% / 25.88%)',\n    '--t5e-ritual-only-outline-color': 'hsl(260.09deg 100% 45.1% / 25.88%)',\n    '--t5e-ritual-only-accent-color': 'hsl(260.09deg 100% 45.1% / 25.88%)',\n    '--t5e-alwaysprepared-background': 'rgba(0, 0, 255, 0.15)',\n    '--t5e-alwaysprepared-outline-color': 'rgba(65, 105, 225, 1)',\n    '--t5e-alwaysprepared-accent-color': 'rgba(0, 191, 255, 1)',\n    '--t5e-magic-accent-color': '#ada11a',\n    '--t5e-attunement-required-color': 'var(--t5e-light-color)',\n    '--t5e-attuned-color': 'var(--t5e-primary-accent-color)',\n    '--t5e-attuned-item-grid-icon-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-xp-bar-background': 'rgba(94, 225, 146, 1)',\n    '--t5e-encumbrance-bar-background': 'rgba(108, 138, 165, 1)',\n    '--t5e-encumbrance-bar-outline-color': 'var(--t5e-separator-color)',\n    '--t5e-encumbrance-outline-color': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-encumbrance-text-color': 'rgba(238, 238, 238, 1)',\n    '--t5e-encumbrance-bar-text-shadow-color': '#000',\n    '--t5e-warning-accent-color': 'rgba(255, 0, 0, 0.6)',\n    '--t5e-warning-accent-contrast-color': 'rgba(255, 255, 255, 0.8)',\n    '--t5e-icon-background': 'rgba(236, 233, 223, 1)',\n    '--t5e-icon-shadow-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-icon-outline-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-icon-font-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-icon-hover-color': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-ability-modifiers-hover-label-background': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-exhaustion-severity1-background': 'rgba(255, 230, 0, 1)',\n    '--t5e-exhaustion-severity2-background': 'rgba(255, 130, 0, 1)',\n    '--t5e-exhaustion-severity3-background': 'rgba(255, 50, 0, 1)',\n    '--t5e-ability-accent-background': 'darkslategrey',\n    '--t5e-context-outline-color': 'rgba(0, 0, 0, 0.4)',\n    '--t5e-context-shadow-color': 'rgba(0, 0, 0, 0.65)',\n    '--t5e-check-default-background-image':\n      \"url('../../modules/tidy5e-sheet/images/check-dark-unchecked.svg')\",\n    '--t5e-check-checked-background-image':\n      \"url('../../modules/tidy5e-sheet/images/check-dark-checked.svg')\",\n    '--t5e-checkbox-font-color': 'rgba(0, 0, 0, 0.9)',\n    '--t5e-checkbox-outline-color': 'rgba(150, 150, 150, 1)',\n    '--t5e-checkbox-unchecked-color': '#d8d7d1',\n    '--t5e-checkbox-checked-color': 'rgba(0, 255, 0, 0.3)',\n    '--t5e-item-input-background': 'rgba(255, 255, 255, 0.3)',\n    '--t5e-item-input-hover-background': 'rgba(255, 255, 255, 0.5)',\n    '--t5e-death-save-icon-color': 'rgba(255, 255, 255, 0.75)',\n    '--t5e-death-save-text-color': 'white',\n    '--t5e-inspiration-hover-color': 'rgba(255, 255, 255, 0.75)',\n    '--t5e-inspiration-text-shadow-hover-color': 'rgba(118, 228, 255, 0.5)',\n    '--t5e-inspiration-inspired-text-shadow-color': '#76e4ff',\n    '--t5e-inspiration-inspired-background': 'rgba(153, 153, 153, 1)',\n    '--t5e-vehicle-motion-hover-color': 'rgba(255, 255, 255, 0.75)',\n    '--t5e-vehicle-motion-text-shadow-hover-color': 'rgba(118, 228, 255, 0.5)',\n    '--t5e-vehicle-in-motion-text-shadow-color': '#76e4ff',\n    '--t5e-vehicle-in-motion-background': 'rgba(153, 153, 153, 1)',\n    '--t5e-hp-bar-color': 'rgba(0, 200, 0, 0.6)',\n    '--t5e-resource-bar-color': 'rgba(120, 167, 242, 1)',\n    '--t5e-death-save-backdrop-background': 'rgba(255, 0, 0, 0.5)',\n    '--t5e-death-save-text-shadow-color': 'rgb(34, 34, 34)',\n    '--t5e-hp-overlay-background': 'rgba(255, 0, 0, 1)',\n    '--t5e-inventory-grid-image-contrast-text-shadow-color': 'rgba(0, 0, 0, 1)',\n    '--t5e-inventory-grid-hover-use-item-contrast-text-shadow-color':\n      'rgba(255, 255, 255, 1)',\n    '--t5e-item-info-card-background': `url(../../modules/tidy5e-sheet/images/parchment-texture-top.webp) no-repeat top center / 150% auto, #f1ebe8 url(../../modules/tidy5e-sheet/images/parchment-texture-bottom.webp) no-repeat bottom center / 150% auto;`,\n    '--t5e-content-entity-link-color': 'var(--t5e-primary-font-color)',\n    '--t5e-content-entity-link-hover-color': 'var(--t5e-white)',\n    '--t5e-content-entity-link-background': 'var(--t5e-faintest-color)',\n    '--t5e-content-entity-link-hover-background':\n      'var(--t5e-primary-accent-color)',\n    '--t5e-activated-profile-toggle-color': 'var(--t5e-white)',\n    '--t5e-exhaustion-severity1-color': 'var(--t5e-icon-font-color)',\n    '--t5e-exhaustion-severity2-color': 'rgba(255, 255, 255, 0.7)',\n    '--t5e-exhaustion-severity3-color': 'rgba(255, 255, 255, 0.7)',\n    '--t5e-tinymce-toolbar-background': 'transparent',\n    '--t5e-prosemirror-button-color': '#deded3',\n    '--t5e-prosemirror-dropdown-item-hover-color': 'var(--t5e-faint-color)',\n    '--t5e-item-info-card-box-shadow-color': 'rgba(0, 0, 0, 0.5)',\n    '--t5e-sheet-lock-icon-color': 'rgba(255, 255, 255, 0.6)',\n    '--t5e-grid-pane-favorite-icon-color': 'rgba(0, 200, 100, 1)',\n    '--t5e-settings-dialog-box-shadow-color': 'rgba(0, 0, 0, 0.75)',\n    '--t5e-sheet-lock-icon-hover-color': '#fff',\n    '--t5e-settings-dialog-border-color': '#ff6400',\n    '--t5e-spell-level-button-border-color': '#c9c7b8',\n    '--t5e-ability-modifiers-label-text-color': '#fff',\n    '--t5e-ability-mod-text-color': '#fff',\n    '--t5e-ability-mod-save-text-hover-color': '#fff',\n    '--t5e-button-menu-background': 'var(--t5e-background)',\n    '--t5e-button-menu-hover-color': 'var(--t5e-faint-color)',\n    '--t5e-button-menu-divider-color': 'var(--t5e-separator-color)',\n    '--t5e-focus-visible-box-shadow':\n      '-0.0625rem -0.0625rem 0 var(--t5e-primary-accent-color), -0.0625rem 0.0625rem 0 var(--t5e-primary-accent-color), 0.0625rem 0.0625rem 0 var(--t5e-primary-accent-color), 0.0625rem -0.0625rem 0 var(--t5e-primary-accent-color)',\n    '--t5e-button-background': 'var(--t5e-faint-color)',\n    '--t5e-button-hover-background': 'var(--t5e-faintest-color)',\n    '--t5e-button-disabled-color': 'var(--t5e-light-color)',\n    '--t5e-separator-color': 'var(--t5e-light-color)',\n    '--t5e-table-header-row-color': 'var(--t5e-faint-color)',\n    '--t5e-table-header-row-border-color': 'var(--t5e-light-color)',\n    '--t5e-tab-strip-border-color': 'rgba(0, 0, 0, 0.25)',\n    '--t5e-active-tab-background': 'transparent',\n    '--t5e-tab-background': 'var(--t5e-header-background)',\n    '--t5e-scrollbar-thumb-color': '#782e22',\n    '--t5e-scrollbar-track-color': '#0000',\n    '--t5e-spell-pip-active-background': 'var(--t5e-primary-accent-color)',\n    '--t5e-spell-pip-empty-background': 'transparent',\n    '--t5e-spell-pip-border-color': 'var(--t5e-primary-accent-color)',\n    '--t5e-switch-slider-color': '#FFF',\n  },\n  type: 'light',\n};\n","import { CONSTANTS } from 'src/constants';\nimport { defaultDarkTheme } from './default-dark-theme';\nimport { defaultLightTheme } from './default-light-theme';\nimport type { Tidy5eTheme } from 'src/types/theme.types';\n\nexport function getCoreThemes(includeDefault: boolean) {\n  let themes: Record<string, string> = {};\n\n  if (includeDefault) {\n    themes[CONSTANTS.THEME_ID_DEFAULT] = 'TIDY5E.Settings.SheetTheme.default';\n  }\n\n  themes[CONSTANTS.THEME_ID_DEFAULT_LIGHT] = defaultLightTheme.name;\n  themes[CONSTANTS.THEME_ID_DEFAULT_DARK] = defaultDarkTheme.name;\n\n  return themes;\n}\n\n/**\n * Provides a record where the key is the theme ID and the value is the theme definition.\n * @returns all registered themes\n */\nexport function getThemes(): Record<string, Tidy5eTheme> {\n  return {\n    [CONSTANTS.THEME_ID_DEFAULT_LIGHT]: defaultLightTheme,\n    [CONSTANTS.THEME_ID_DEFAULT_DARK]: defaultDarkTheme,\n  };\n}\n\nexport const themeVariables = {\n  '--t5e-title-font-family': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-body-font-family': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-primary-font-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-faintest-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-faint-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-light-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-primary-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-secondary-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-tertiary-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-primary-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--spell-level-button-available-slots-text-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-white': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-faint-white': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-linked-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-unlinked-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-linked-light-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-unlinked-light-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-sheet-unlocked-icon-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-sheet-locked-icon-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-header-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-prepareable-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-equipped-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-equipped-item-grid-tile-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-equipped-item-grid-tile-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-prepared-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-prepared-item-grid-tile-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-prepared-item-grid-tile-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-pact-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-pact-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-pact-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-atwill-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-atwill-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-atwill-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ritual-only-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ritual-only-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ritual-only-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-innate-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-innate-outline': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-innate-accent': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-alwaysprepared-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-alwaysprepared-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-alwaysprepared-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-magic-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-attunement-required-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-attuned-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-attuned-item-grid-icon-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-xp-bar-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-encumbrance-bar-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-encumbrance-bar-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-encumbrance-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-warning-accent-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-warning-accent-contrast-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-icon-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-icon-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-icon-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-icon-font-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-icon-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ability-modifiers-hover-label-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-exhaustion-severity1-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-exhaustion-severity2-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-exhaustion-severity3-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ability-accent-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-context-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-context-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-check-default-background-image': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-check-checked-background-image': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-checkbox-font-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-checkbox-outline-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-checkbox-unchecked-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-checkbox-checked-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-item-input-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-item-input-hover-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-encumbrance-text-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-death-save-icon-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-inspiration-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-inspiration-text-shadow-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-inspiration-inspired-text-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-inspiration-inspired-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-vehicle-motion-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-vehicle-motion-text-shadow-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-vehicle-in-motion-text-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-vehicle-in-motion-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-hp-bar-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-resource-bar-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-death-save-backdrop-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-death-save-text-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-hp-overlay-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-inventory-grid-image-contrast-text-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-inventory-grid-hover-use-item-contrast-text-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-sheet-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-item-info-card-background': {\n    type: 'todo',\n    group: 'todo,',\n  },\n  '--t5e-content-entity-link-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-content-entity-link-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-content-entity-link-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-content-entity-link-hover-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-activated-profile-toggle-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-exhaustion-severity1-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-exhaustion-severity2-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-exhaustion-severity3-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-death-save-text-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-tinymce-toolbar-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-tinymce-sidebar-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-tinyme-toolbar-button-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-prosemirror-button-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-prosemirror-dropdown-item-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-item-info-card-box-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-sheet-lock-icon-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-grid-pane-favorite-icon-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-settings-dialog-box-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-sheet-lock-icon-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-settings-dialog-border-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-spell-level-button-border-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ability-modifiers-label-text-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ability-mod-text-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-ability-mod-save-text-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-encumbrance-bar-text-shadow-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-button-menu-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-button-menu-hover-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-button-menu-divider-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-focus-visible-box-shadow': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-button-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-button-hover-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-button-disabled-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-separator-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-table-header-row-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-table-header-row-border-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-tab-strip-border-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-tabs-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-active-tab-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-tab-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-scrollbar-thumb-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-scrollbar-track-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-spell-pip-active-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-spell-pip-empty-background': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-spell-pip-border-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n  '--t5e-switch-slider-color': {\n    type: 'todo',\n    group: 'todo',\n  },\n};\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","import type {\n  ThemeColorSetting,\n  Tidy5eTheme as Tidy5eTheme,\n  Tidy5eThemeDataV1,\n} from 'src/types/theme.types';\nimport { themeVariables } from './theme-reference';\nimport { debug } from 'src/utils/logging';\nimport { SettingsProvider } from 'src/settings/settings';\nimport { defaultDarkTheme } from './default-dark-theme';\nimport { defaultLightTheme } from './default-light-theme';\nimport { Colord } from 'colord';\nimport { CONSTANTS } from 'src/constants';\n\nexport function applyTheme(\n  theme: Tidy5eTheme,\n  colorPickerEnabledOverride: boolean | null = null\n) {\n  try {\n    const styleTagId = 'tidy5e-sheet-theme';\n    let existingThemeStyle = document.getElementById(styleTagId);\n\n    if (existingThemeStyle) {\n      existingThemeStyle.remove();\n    }\n\n    // Temporary measure for applying color overrides. Larger theme overhaul coming later.\n    const overrideBaseTheme =\n      (colorPickerEnabledOverride === null &&\n        SettingsProvider.settings.colorPickerEnabled.get()) ||\n      colorPickerEnabledOverride;\n\n    if (overrideBaseTheme) {\n      theme = overrideColorPickerSettings(theme);\n    }\n\n    document.head.insertAdjacentHTML(\n      'beforeend',\n      `\n    <style id=\"${styleTagId}\">\n      :root {\n        ${Object.entries(theme.variables)\n          .filter(([variable]) => variable in themeVariables)\n          .map(([variable, value]) => `${variable}: ${value};`)\n          .join('\\n')}\n      }\n    </style>\n    `\n    );\n  } catch (e) {\n    console.error(e);\n    debug(\n      'Unable to apply Tidy 5e style tag; falling back to root style properties.'\n    );\n    Object.keys(themeVariables).forEach((variable) => {\n      document.documentElement.style.setProperty(\n        variable,\n        theme.variables[variable] ?? null\n      );\n    });\n  }\n}\n\nfunction overrideColorPickerSettings(theme: Tidy5eTheme) {\n  const overriddenTheme = structuredClone(theme);\n\n  const themeableColors = getThemeableColors();\n  for (let color of themeableColors) {\n    overriddenTheme.variables[color.cssVariable] = SettingsProvider.settings[\n      color.key\n    ]\n      .get()\n      ?.toString();\n  }\n\n  return overriddenTheme;\n}\n\nexport function applyCurrentTheme(\n  colorPickerEnabledOverride: boolean | null = null\n) {\n  const currentTheme = SettingsProvider.settings.colorScheme.get();\n  SettingsProvider.settings.colorScheme.options.onChange(\n    currentTheme,\n    colorPickerEnabledOverride\n  );\n}\n\nexport function getThemeableColors(): ThemeColorSetting[] {\n  return Object.entries(SettingsProvider.settings)\n    .filter(([, value]) => 'representsCssVariable' in value)\n    .map(([key, value]) => ({\n      key: key as any,\n      name: value.options.name,\n      hint: 'hint' in value.options ? value.options.hint : '',\n      cssVariable:\n        'representsCssVariable' in value ? value.representsCssVariable : '',\n    }));\n}\n\nexport function getThemeOrDefault(themeId: string): Tidy5eTheme {\n  if (themeId === CONSTANTS.THEME_ID_DEFAULT) {\n    const defaultThemeId = SettingsProvider.settings.defaultTheme.get();\n    themeId = defaultThemeId;\n  }\n\n  const themes: Record<string, Tidy5eTheme> = {\n    light: defaultLightTheme,\n    dark: defaultDarkTheme,\n    // TODO: Aggregate all other available themes\n  };\n\n  return themes[themeId] ?? defaultLightTheme;\n}\n\ntype ProcessedColor = {\n  original: string;\n  hexa?: string;\n  parsed: boolean;\n};\n\nexport function trySetRootCssVariable(\n  cssVariable: string,\n  value: string,\n  colorPickerEnabled: boolean\n) {\n  if (colorPickerEnabled) {\n    document.documentElement.style.setProperty(cssVariable, value);\n  }\n}\n\nexport function clearTidy5eRootCssVariables() {\n  Object.keys(themeVariables).forEach((key) =>\n    document.documentElement.style.removeProperty(key)\n  );\n}\n\nexport function colorToHexaString(color: Colord | undefined): string {\n  if (color?.isValid()) {\n    return color.toHex();\n  }\n\n  return '';\n}\n\nexport function settingValueToHexaString(value: string): ProcessedColor {\n  const result = colorToHexaString(new Colord(value.toString()));\n\n  if (result !== '') {\n    return {\n      original: value?.toString() ?? '',\n      hexa: result,\n      parsed: true,\n    };\n  }\n\n  var ctx = document.createElement('canvas').getContext('2d');\n  if (ctx) {\n    ctx.fillStyle = value?.toString() ?? '';\n    return {\n      original: value,\n      hexa: ctx.fillStyle,\n      parsed: true,\n    };\n  }\n\n  return {\n    original: value,\n    parsed: true,\n  };\n}\n\nexport function extractSettingsUpdateDeltaFromTheme(\n  theme: Tidy5eThemeDataV1,\n  themeableColors: ThemeColorSetting[]\n) {\n  return Object.keys(theme.variables).reduce<Record<string, string>>(\n    (prev, key) => {\n      const themeableColor = themeableColors.find((c) => c.cssVariable === key);\n      if (themeableColor) {\n        prev[themeableColor.key] = theme.variables[key];\n      }\n\n      return prev;\n    },\n    {}\n  );\n}\n\nexport function validateImportFile(theme: Tidy5eThemeDataV1) {\n  return theme.version === 1 && typeof theme.variables === 'object';\n}\n","/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { noop } from './utils.js';\n\nexport const is_client = typeof window !== 'undefined';\n\n/** @type {() => number} */\nexport let now = is_client ? () => window.performance.now() : () => Date.now();\n\nexport let raf = is_client ? (cb) => requestAnimationFrame(cb) : noop;\n\n// used internally for testing\n/** @returns {void} */\nexport function set_now(fn) {\n\tnow = fn;\n}\n\n/** @returns {void} */\nexport function set_raf(fn) {\n\traf = fn;\n}\n","import { raf } from './environment.js';\n\nconst tasks = new Set();\n\n/**\n * @param {number} now\n * @returns {void}\n */\nfunction run_tasks(now) {\n\ttasks.forEach((task) => {\n\t\tif (!task.c(now)) {\n\t\t\ttasks.delete(task);\n\t\t\ttask.f();\n\t\t}\n\t});\n\tif (tasks.size !== 0) raf(run_tasks);\n}\n\n/**\n * For testing purposes only!\n * @returns {void}\n */\nexport function clear_loops() {\n\ttasks.clear();\n}\n\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n * @param {import('./private.js').TaskCallback} callback\n * @returns {import('./private.js').Task}\n */\nexport function loop(callback) {\n\t/** @type {import('./private.js').TaskEntry} */\n\tlet task;\n\tif (tasks.size === 0) raf(run_tasks);\n\treturn {\n\t\tpromise: new Promise((fulfill) => {\n\t\t\ttasks.add((task = { c: callback, f: fulfill }));\n\t\t}),\n\t\tabort() {\n\t\t\ttasks.delete(task);\n\t\t}\n\t};\n}\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { append_empty_stylesheet, detach, get_root_for_style } from './dom.js';\nimport { raf } from './environment.js';\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\n/** @type {Map<Document | ShadowRoot, import('./private.d.ts').StyleInformation>} */\nconst managed_styles = new Map();\n\nlet active = 0;\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\n/**\n * @param {string} str\n * @returns {number}\n */\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\n/**\n * @param {Document | ShadowRoot} doc\n * @param {Element & ElementCSSInlineStyle} node\n * @returns {{ stylesheet: any; rules: {}; }}\n */\nfunction create_style_information(doc, node) {\n\tconst info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n\tmanaged_styles.set(doc, info);\n\treturn info;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {number} a\n * @param {number} b\n * @param {number} duration\n * @param {number} delay\n * @param {(t: number) => number} ease\n * @param {(t: number, u: number) => string} fn\n * @param {number} uid\n * @returns {string}\n */\nexport function create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + (b - a) * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\tconst rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n\tconst name = `__svelte_${hash(rule)}_${uid}`;\n\tconst doc = get_root_for_style(node);\n\tconst { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n\tif (!rules[name]) {\n\t\trules[name] = true;\n\t\tstylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n\t}\n\tconst animation = node.style.animation || '';\n\tnode.style.animation = `${\n\t\tanimation ? `${animation}, ` : ''\n\t}${name} ${duration}ms linear ${delay}ms 1 both`;\n\tactive += 1;\n\treturn name;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {string} [name]\n * @returns {void}\n */\nexport function delete_rule(node, name) {\n\tconst previous = (node.style.animation || '').split(', ');\n\tconst next = previous.filter(\n\t\tname\n\t\t\t? (anim) => anim.indexOf(name) < 0 // remove specific animation\n\t\t\t: (anim) => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n\t);\n\tconst deleted = previous.length - next.length;\n\tif (deleted) {\n\t\tnode.style.animation = next.join(', ');\n\t\tactive -= deleted;\n\t\tif (!active) clear_rules();\n\t}\n}\n\n/** @returns {void} */\nexport function clear_rules() {\n\traf(() => {\n\t\tif (active) return;\n\t\tmanaged_styles.forEach((info) => {\n\t\t\tconst { ownerNode } = info.stylesheet;\n\t\t\t// there is no ownerNode if it runs on jsdom.\n\t\t\tif (ownerNode) detach(ownerNode);\n\t\t});\n\t\tmanaged_styles.clear();\n\t});\n}\n","import { identity as linear, noop } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {import('./private.js').PositionRect} from\n * @param {import('./private.js').AnimationFn} fn\n */\nexport function create_animation(node, from, fn, params) {\n\tif (!from) return noop;\n\tconst to = node.getBoundingClientRect();\n\tif (\n\t\tfrom.left === to.left &&\n\t\tfrom.right === to.right &&\n\t\tfrom.top === to.top &&\n\t\tfrom.bottom === to.bottom\n\t)\n\t\treturn noop;\n\tconst {\n\t\tdelay = 0,\n\t\tduration = 300,\n\t\teasing = linear,\n\t\t// @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n\t\tstart: start_time = now() + delay,\n\t\t// @ts-ignore todo:\n\t\tend = start_time + duration,\n\t\ttick = noop,\n\t\tcss\n\t} = fn(node, { from, to }, params);\n\tlet running = true;\n\tlet started = false;\n\tlet name;\n\t/** @returns {void} */\n\tfunction start() {\n\t\tif (css) {\n\t\t\tname = create_rule(node, 0, 1, duration, delay, easing, css);\n\t\t}\n\t\tif (!delay) {\n\t\t\tstarted = true;\n\t\t}\n\t}\n\t/** @returns {void} */\n\tfunction stop() {\n\t\tif (css) delete_rule(node, name);\n\t\trunning = false;\n\t}\n\tloop((now) => {\n\t\tif (!started && now >= start_time) {\n\t\t\tstarted = true;\n\t\t}\n\t\tif (started && now >= end) {\n\t\t\ttick(1, 0);\n\t\t\tstop();\n\t\t}\n\t\tif (!running) {\n\t\t\treturn false;\n\t\t}\n\t\tif (started) {\n\t\t\tconst p = now - start_time;\n\t\t\tconst t = 0 + 1 * easing(p / duration);\n\t\t\ttick(t, 1 - t);\n\t\t}\n\t\treturn true;\n\t});\n\tstart();\n\ttick(0, 1);\n\treturn stop;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @returns {void}\n */\nexport function fix_position(node) {\n\tconst style = getComputedStyle(node);\n\tif (style.position !== 'absolute' && style.position !== 'fixed') {\n\t\tconst { width, height } = style;\n\t\tconst a = node.getBoundingClientRect();\n\t\tnode.style.position = 'absolute';\n\t\tnode.style.width = width;\n\t\tnode.style.height = height;\n\t\tadd_transform(node, a);\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {import('./private.js').PositionRect} a\n * @returns {void}\n */\nexport function add_transform(node, a) {\n\tconst b = node.getBoundingClientRect();\n\tif (a.left !== b.left || a.top !== b.top) {\n\t\tconst style = getComputedStyle(node);\n\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\t\tnode.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n\t}\n}\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro — restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro — we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro — needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","/** @returns {{}} */\nexport function get_spread_update(levels, updates) {\n\tconst update = {};\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\treturn update;\n}\n\nexport function get_spread_object(spread_props) {\n\treturn typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.18';\nexport const PUBLIC_VERSION = '4';\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type { SvelteComponent } from 'svelte';\n\nexport default abstract class SvelteFormApplicationBase extends FormApplication {\n  component: SvelteComponent | undefined;\n  staticExtraApplicationClasses: string[] = [];\n\n  constructor(...args: any[]) {\n    super(...args);\n  }\n\n  static get defaultOptions() {\n    return {\n      ...super.defaultOptions,\n      classes: ['tidy5e-sheet', 'application-shell'],\n      submitOnClose: false,\n      minimizable: true,\n      popOut: true,\n      resizable: true,\n    };\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template.hbs');\n  }\n\n  activateListeners(html: any) {\n    const node = html.get(0);\n    this.refreshContext();\n    this.component = this.createComponent(node);\n  }\n\n  abstract createComponent(node: HTMLElement): SvelteComponent;\n\n  close(options: unknown = {}) {\n    this.component?.$destroy();\n    return super.close(options);\n  }\n\n  render(force = false, ...args: any[]) {\n    if (force) {\n      this.component?.$destroy();\n      super.render(force, ...args);\n      return this;\n    }\n\n    this.refreshContext();\n    return this;\n  }\n\n  refreshContext() {\n    /* Implement in a subclass if needed */\n  }\n\n  async _updateObject() {\n    /* Implement in a subclass if needed */\n  }\n}\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { Tab, OnTabSelectedFn } from 'src/types/types';\n  import { createEventDispatcher, getContext, onMount } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let tabs: Tab[];\n  export let selectedTabId: string | undefined = undefined;\n  export let cssClass: string = '';\n  export let orientation: 'horizontal' | 'vertical' = 'horizontal';\n\n  const context = getContext<Readable<any> | undefined>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  const onTabSelected = getContext<OnTabSelectedFn>(\n    CONSTANTS.SVELTE_CONTEXT.ON_TAB_SELECTED,\n  );\n\n  const dispatcher = createEventDispatcher<{ tabSelected: Tab }>();\n\n  let nav: HTMLElement;\n\n  function selectTab(tab: Tab) {\n    const sheet = $context?.actor?.sheet ?? $context?.item?.sheet;\n    if (sheet && !FoundryAdapter.onTabSelecting(sheet, tab.id)) {\n      return;\n    }\n    selectedTabId = tab.id;\n    dispatcher('tabSelected', tab);\n    onTabSelected?.(tab.id);\n  }\n\n  function onKeyDown(ev: KeyboardEvent, i: number) {\n    switch (ev.key) {\n      case 'ArrowRight':\n      case 'ArrowDown':\n        const nextTab = tabs[(i + 1) % tabs.length];\n        selectTab(nextTab);\n        setTimeout(() => {\n          nav\n            .querySelector<HTMLElement>(`[data-tab-id='${nextTab.id}']`)\n            ?.focus();\n        });\n        break;\n      case 'ArrowLeft':\n      case 'ArrowUp':\n        const previousTab = tabs.at(i - 1);\n        if (previousTab) {\n          selectTab(previousTab);\n          setTimeout(() => {\n            nav\n              .querySelector<HTMLElement>(`[data-tab-id='${previousTab.id}']`)\n              ?.focus();\n          });\n        }\n        break;\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n  const currentTabId = getContext<string>(\n    CONSTANTS.SVELTE_CONTEXT.CURRENT_TAB_ID,\n  );\n\n  let mounted = false;\n  onMount(() => {\n    const initialTab = tabs.find((t) => t.id === currentTabId);\n    if (initialTab) {\n      selectTab(initialTab);\n    }\n    mounted = true;\n  });\n\n  $: {\n    if (mounted && !tabs.some((tab) => tab.id === selectedTabId)) {\n      selectTab(tabs[0]);\n    }\n  }\n</script>\n\n<nav\n  class=\"tidy-tabs {cssClass}\"\n  class:vertical={orientation === 'vertical'}\n  bind:this={nav}\n>\n  {#if tabs.length > 1}\n    {#each tabs as tab, i (tab.id)}\n      <button\n        type=\"button\"\n        class=\"{CONSTANTS.TAB_OPTION_CLASS} inline-transparent-button\"\n        class:active={tab.id === selectedTabId}\n        class:first-tab={i === 0}\n        class:no-border-on-last-tab={!$$slots['tab-end'] &&\n          i === tabs.length - 1}\n        data-tab-id={tab.id}\n        role=\"tab\"\n        on:click={() => selectTab(tab)}\n        on:keydown={(ev) => onKeyDown(ev, i)}\n        tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      >\n        {localize(tab.title)}\n      </button>\n    {/each}\n  {/if}\n  <slot name=\"tab-end\" />\n</nav>\n\n<style lang=\"scss\">\n  .tidy-tabs {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: row;\n    flex-wrap: wrap;\n    background: var(--t5e-tabs-background);\n\n    .tab-option {\n      background: var(--t5e-tab-background);\n      font-size: 0.8125rem;\n      text-align: left;\n      flex: 1 1 auto;\n      border-top-left-radius: 0.1875rem;\n      border-top-right-radius: 0.1875rem;\n      text-shadow: none;\n\n      &:hover {\n        background: var(--t5e-tab-background);\n        color: var(--t5e-primary-accent-color);\n      }\n\n      &.active {\n        background: var(--t5e-active-tab-background);\n        font-weight: 700;\n        cursor: default;\n        text-shadow: none;\n\n        &:hover {\n          color: inherit;\n        }\n      }\n    }\n\n    &:not(.vertical) {\n      .tab-option {\n        height: 1.625rem;\n        padding: 0.3125rem 0.5rem 0 0.5rem;\n        border-bottom: 0.0625rem solid var(--t5e-tab-strip-border-color);\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n\n        &.first-tab.active {\n          border-left-color: transparent;\n          border-top-left-radius: 0;\n        }\n\n        &.no-border-on-last-tab.active {\n          border-right-color: transparent;\n          border-top-right-radius: 0;\n        }\n\n        &:first-child {\n          padding-left: 1rem;\n        }\n\n        &.active {\n          border: 0.0625rem solid var(--t5e-tab-strip-border-color);\n          border-bottom-color: transparent;\n        }\n      }\n    }\n\n    &.vertical {\n      flex-direction: column;\n      justify-content: flex-start;\n      align-items: stretch;\n\n      > * {\n        flex: 0;\n        padding: 0.5rem;\n      }\n\n      .tab-option {\n        border-top: none;\n        border-left: none;\n        border-bottom: none;\n        border-right: 0.0625rem solid var(--t5e-tab-strip-border-color);\n        transition: border-left-width 0.125s;\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n\n        &.first-tab.active {\n          border-top-color: transparent;\n        }\n\n        &.active {\n          border: 0.0625rem solid var(--t5e-tab-strip-border-color);\n          border-right-color: transparent;\n          border-left-width: 0.25rem;\n          border-left-color: var(--t5e-primary-accent-color);\n          border-top-left-radius: 0.3125rem;\n          border-bottom-left-radius: 0.3125rem;\n        }\n      }\n    }\n  }\n</style>\n","import { CONSTANTS } from 'src/constants';\nimport { getContext, setContext } from 'svelte';\n\n/**\n * Appends current location to the location context.\n * **Important**: Only use this during svelte component initialization. Treat it exactly like calling `getContext` and `setContext`.\n * @param segments strings of text to provide context for the current location\n * @returns void\n */\nexport function declareLocation(...segments: string[]) {\n  if (segments.length === 0) {\n    return;\n  }\n  const location = getContext<string>(CONSTANTS.SVELTE_CONTEXT.LOCATION) ?? '';\n  setContext(\n    CONSTANTS.SVELTE_CONTEXT.LOCATION,\n    [location, ...segments].join('/')\n  );\n}\n","<script lang=\"ts\">\n  import type { Tab } from 'src/types/types';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import { CONSTANTS } from 'src/constants';\n  import { getAllContexts, getContext, onMount, setContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { error } from 'src/utils/logging';\n\n  export let tab: Tab;\n  export let active: boolean;\n  export let cssClass: string = '';\n\n  const context = getContext<Readable<any>>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  const allContexts = getAllContexts();\n\n  declareLocation('tab', tab.id);\n  setContext(CONSTANTS.SVELTE_CONTEXT.TAB_ID, tab.id);\n\n  $: useCoreListenersClass = tab.activateDefaultSheetListeners\n    ? CONSTANTS.CLASS_TIDY_USE_CORE_LISTENERS\n    : '';\n\n  let tidyTab: HTMLElement;\n\n  onMount(() => {\n    if (tab.content.type !== 'svelte') {\n      return;\n    }\n\n    try {\n      const props = tab.content.getProps?.($context) ?? {};\n      const tabComponentContext =\n        tab.content.getContext?.(allContexts) ?? allContexts;\n      const svelteTabComponent = new tab.content.component({\n        target: tidyTab,\n        context: tabComponentContext,\n        props: props,\n      });\n\n      return () => {\n        svelteTabComponent.$destroy();\n      };\n    } catch (e) {\n      error('Failed to render svelte tab', false, e);\n    }\n  });\n</script>\n\n<div\n  class=\"tidy-tab {tab.id} {cssClass} {tab.content.cssClass ??\n    ''} {useCoreListenersClass}\"\n  class:active\n  data-tab-contents-for={tab.id}\n  bind:this={tidyTab}\n></div>\n\n<style lang=\"scss\">\n  .tidy-tab {\n    height: 100%;\n    flex-direction: column;\n    display: none;\n\n    &.active {\n      display: flex;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { Tab } from 'src/types/types';\n  import TabContent from './TabContent.svelte';\n\n  export let tabs: Tab[];\n  export let selectedTabId: string;\n  export let cssClass: string = '';\n</script>\n\n{#each tabs as tab (tab.id)}\n  <TabContent active={selectedTabId === tab.id} {tab} {cssClass} />\n{/each}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n\n  export let value: boolean;\n  export let name: string;\n  export let hint: string;\n  export let id: string;\n\n  const appId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<article class=\"setting\">\n  <input type=\"checkbox\" id=\"{id}-{appId}\" bind:checked={value} />\n  <div class=\"description\">\n    <label for=\"{id}-{appId}\">{localize(name)}</label>\n    <p class=\"tidy5e-notes\">{localize(hint)}</p>\n  </div>\n</article>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n\n  export let value: string;\n  export let name: string;\n  export let hint: string;\n  export let id: string;\n\n  const appId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n\n  $: calculatedId = `${id}-${appId}`;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<article class=\"setting group\">\n  <div>\n    <div class=\"description\">\n      <label for={calculatedId}>{localize(name)}</label>\n      <p class=\"tidy5e-notes\">{localize(hint)}</p>\n    </div>\n    <div class=\"settings-group\">\n      <article>\n        <input type=\"text\" id={calculatedId} bind:value />\n      </article>\n      <slot name=\"additional-inputs\" />\n    </div>\n  </div>\n</article>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { SettingsProvider } from 'src/settings/settings';\n  import { getContext } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import TextInputSetting from 'src/applications/settings/parts/TextInputSetting.svelte';\n  import type { UserSettingsContext } from '../UserSettings.types';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Writable<UserSettingsContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<h2>{localize('TIDY5E.UserSettings.TabPlayers.header')}</h2>\n\n<CheckboxSetting\n  bind:value={$context.settings.useClassicControlsForCharacter}\n  name={SettingsProvider.settings.useClassicControlsForCharacter.options.name}\n  hint={SettingsProvider.settings.useClassicControlsForCharacter.options.hint}\n  id=\"useClassicControlsForCharacter\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showClassList}\n  name={SettingsProvider.settings.showClassList.options.name}\n  hint={SettingsProvider.settings.showClassList.options.hint}\n  id=\"showClassList\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.animateInspiration}\n  name={SettingsProvider.settings.animateInspiration.options.name}\n  hint={SettingsProvider.settings.animateInspiration.options.hint}\n  id=\"animateInspiration\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.hideIfZero}\n  name={SettingsProvider.settings.hideIfZero.options.name}\n  hint={SettingsProvider.settings.hideIfZero.options.hint}\n  id=\"hideIfZero\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showInspirationOnHover}\n  name={SettingsProvider.settings.showInspirationOnHover.options.name}\n  hint={SettingsProvider.settings.showInspirationOnHover.options.hint}\n  id=\"showInspirationOnHover\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showExhaustionOnHover}\n  name={SettingsProvider.settings.showExhaustionOnHover.options.name}\n  hint={SettingsProvider.settings.showExhaustionOnHover.options.hint}\n  id=\"showExhaustionOnHover\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useHpBar}\n  name={SettingsProvider.settings.useHpBar.options.name}\n  hint={SettingsProvider.settings.useHpBar.options.hint}\n  id=\"useHpBar\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useHpOverlay}\n  name={SettingsProvider.settings.useHpOverlay.options.name}\n  hint={SettingsProvider.settings.useHpOverlay.options.hint}\n  id=\"useHpOverlay\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.toggleEmptyCharacterSkills}\n  name={SettingsProvider.settings.toggleEmptyCharacterSkills.options.name}\n  hint={SettingsProvider.settings.toggleEmptyCharacterSkills.options.hint}\n  id=\"toggleEmptyCharacterSkills\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.toggleEmptyCharacterTraits}\n  name={SettingsProvider.settings.toggleEmptyCharacterTraits.options.name}\n  hint={SettingsProvider.settings.toggleEmptyCharacterTraits.options.hint}\n  id=\"toggleEmptyCharacterTraits\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.moveTraitsBelowCharacterResources}\n  name={SettingsProvider.settings.moveTraitsBelowCharacterResources.options\n    .name}\n  hint={SettingsProvider.settings.moveTraitsBelowCharacterResources.options\n    .hint}\n  id=\"moveTraitsBelowCharacterResources\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showEquippedAmmoOnly}\n  name={SettingsProvider.settings.showEquippedAmmoOnly.options.name}\n  hint={SettingsProvider.settings.showEquippedAmmoOnly.options.hint}\n  id=\"showEquippedAmmoOnly\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useContextMenu}\n  name={SettingsProvider.settings.useContextMenu.options.name}\n  hint={SettingsProvider.settings.useContextMenu.options.hint}\n  id=\"useContextMenu\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showIconsNextToTheItemName}\n  name={SettingsProvider.settings.showIconsNextToTheItemName.options.name}\n  hint={SettingsProvider.settings.showIconsNextToTheItemName.options.hint}\n  id=\"showIconsNextToTheItemName\"\n/>\n\n<h3>{localize('TIDY5E.Settings.MulticlassSpellbookFilterLabel')}</h3>\n\n<CheckboxSetting\n  bind:value={$context.settings.useMulticlassSpellbookFilter}\n  name={SettingsProvider.settings.useMulticlassSpellbookFilter.options.name}\n  hint={SettingsProvider.settings.useMulticlassSpellbookFilter.options.hint}\n  id=\"useMulticlassSpellbookFilter\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useSpellClassFilterIcons}\n  name={SettingsProvider.settings.useSpellClassFilterIcons.options.name}\n  hint={SettingsProvider.settings.useSpellClassFilterIcons.options.hint}\n  id=\"useSpellClassFilterIcons\"\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import { SettingsProvider } from 'src/settings/settings';\n  import type { UserSettingsContext } from '../UserSettings.types';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Writable<UserSettingsContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<h2>{localize('TIDY5E.UserSettings.TabNPCs.header')}</h2>\n\n<CheckboxSetting\n  bind:value={$context.settings.useClassicControlsForNpc}\n  name={SettingsProvider.settings.useClassicControlsForNpc.options.name}\n  hint={SettingsProvider.settings.useClassicControlsForNpc.options.hint}\n  id=\"useClassicControlsForNpc\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useHpBarNpc}\n  name={SettingsProvider.settings.useHpBarNpc.options.name}\n  hint={SettingsProvider.settings.useHpBarNpc.options.hint}\n  id=\"useHpBarNpc\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useHpOverlayNpc}\n  name={SettingsProvider.settings.useHpOverlayNpc.options.name}\n  hint={SettingsProvider.settings.useHpOverlayNpc.options.hint}\n  id=\"useHpOverlayNpc\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.alwaysShowNpcTraits}\n  name={SettingsProvider.settings.alwaysShowNpcTraits.options.name}\n  hint={SettingsProvider.settings.alwaysShowNpcTraits.options.hint}\n  id=\"alwaysShowNpcTraits\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.moveTraitsBelowNpcResources}\n  name={SettingsProvider.settings.moveTraitsBelowNpcResources.options.name}\n  hint={SettingsProvider.settings.moveTraitsBelowNpcResources.options.hint}\n  id=\"moveTraitsBelowNpcResources\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.alwaysShowNpcSkills}\n  name={SettingsProvider.settings.alwaysShowNpcSkills.options.name}\n  hint={SettingsProvider.settings.alwaysShowNpcSkills.options.hint}\n  id=\"alwaysShowNpcSkills\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showSpellbookTabNpc}\n  name={SettingsProvider.settings.showSpellbookTabNpc.options.name}\n  hint={SettingsProvider.settings.showSpellbookTabNpc.options.hint}\n  id=\"showSpellbookTabNpc\"\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import { SettingsProvider } from 'src/settings/settings';\n  import NumberInputSetting from 'src/applications/settings/parts/NumberInputSetting.svelte';\n  import type { UserSettingsContext } from '../UserSettings.types';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Writable<UserSettingsContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  const localize = FoundryAdapter.localize;\n</script>\n\n<h2>{localize('TIDY5E.UserSettings.TabVehicles.header')}</h2>\n\n<CheckboxSetting\n  bind:value={$context.settings.useClassicControlsForVehicle}\n  name={SettingsProvider.settings.useClassicControlsForVehicle.options.name}\n  hint={SettingsProvider.settings.useClassicControlsForVehicle.options.hint}\n  id=\"useClassicControlsForVehicle\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useHpBarVehicle}\n  name={SettingsProvider.settings.useHpBarVehicle.options.name}\n  hint={SettingsProvider.settings.useHpBarVehicle.options.hint}\n  id=\"useHpBarVehicle\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.useHpOverlayVehicle}\n  name={SettingsProvider.settings.useHpOverlayVehicle.options.name}\n  hint={SettingsProvider.settings.useHpOverlayVehicle.options.hint}\n  id=\"useHpOverlayVehicle\"\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import { SettingsProvider } from 'src/settings/settings';\n  import CheckboxSetting from '../../parts/CheckboxSetting.svelte';\n  import type { UserSettingsContext } from '../UserSettings.types';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Writable<UserSettingsContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<h2>{localize('TIDY5E.Settings.ActionList.Header')}</h2>\n\n<CheckboxSetting\n  bind:value={$context.settings.actionListLimitActionsToCantrips}\n  name={SettingsProvider.settings.actionListLimitActionsToCantrips.options.name}\n  hint={SettingsProvider.settings.actionListLimitActionsToCantrips.options.hint}\n  id=\"actionListLimitActionsToCantrips\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.actionListIncludeMinuteLongSpellsAsActions}\n  name={SettingsProvider.settings.actionListIncludeMinuteLongSpellsAsActions\n    .options.name}\n  hint={SettingsProvider.settings.actionListIncludeMinuteLongSpellsAsActions\n    .options.hint}\n  id=\"actionListIncludeMinuteLongSpellsAsActions\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.actionListIncludeSpellsWithActiveEffects}\n  name={SettingsProvider.settings.actionListIncludeSpellsWithActiveEffects\n    .options.name}\n  hint={SettingsProvider.settings.actionListIncludeSpellsWithActiveEffects\n    .options.hint}\n  id=\"actionListIncludeSpellsWithActiveEffects\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.actionListIncludeConsumables}\n  name={SettingsProvider.settings.actionListIncludeConsumables.options.name}\n  hint={SettingsProvider.settings.actionListIncludeConsumables.options.hint}\n  id=\"actionListIncludeConsumables\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.actionListScaleCantripDamage}\n  name={SettingsProvider.settings.actionListScaleCantripDamage.options.name}\n  hint={SettingsProvider.settings.actionListScaleCantripDamage.options.hint}\n  id=\"actionListScaleCantripDamage\"\n/>\n","<script lang=\"ts\">\n  import type { Tab } from 'src/types/types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import PlayerSettingsTab from './tabs/PlayerSettingsTab.svelte';\n  import NpcSettingsTab from './tabs/NpcSettingsTab.svelte';\n  import VehicleSettingsTab from './tabs/VehicleSettingsTab.svelte';\n  import ActionsListSettingsTab from './tabs/ActionsListSettingsTab.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import { CONSTANTS } from 'src/constants';\n  import type {\n    UserSettingsFunctions,\n    UserSettingsStore,\n  } from './UserSettings.types';\n\n  let selectedTabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.INITIAL_TAB_ID);\n  let context = getContext<UserSettingsStore>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  let functions = getContext<UserSettingsFunctions>(CONSTANTS.SVELTE_CONTEXT.FUNCTIONS);\n\n  let tabs: Tab[] = [];\n\n  tabs = [\n    {\n      id: CONSTANTS.TAB_USER_SETTINGS_PLAYERS,\n      title: 'TIDY5E.UserSettings.TabPlayers.tabLabel',\n      content: {\n        component: PlayerSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_USER_SETTINGS_NPCS,\n      title: 'TIDY5E.UserSettings.TabNPCs.tabLabel',\n      content: {\n        component: NpcSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_USER_SETTINGS_VEHICLES,\n      title: 'TIDY5E.UserSettings.TabVehicles.tabLabel',\n      content: {\n        component: VehicleSettingsTab,\n        type: 'svelte',\n      },\n    },\n  ];\n\n  tabs.push({\n    id: CONSTANTS.TAB_USER_SETTINGS_ACTIONS_LIST,\n    title: 'TIDY5E.UserSettings.TabActionsList.tabLabel',\n    content: {\n      component: ActionsListSettingsTab,\n      type: 'svelte',\n    },\n  });\n\n  selectedTabId ??= tabs[0].id;\n\n  let applyingChanges = false;\n\n  async function save() {\n    applyingChanges = true;\n\n    try {\n      await functions.save($context);\n    } finally {\n      applyingChanges = false;\n    }\n  }\n\n  async function apply() {\n    applyingChanges = true;\n\n    try {\n      await functions.apply($context);\n    } finally {\n      applyingChanges = false;\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"settings-form\">\n  <div role=\"presentation\" class=\"vertical-tab-container flex-column no-gap\">\n    <Tabs {tabs} bind:selectedTabId orientation=\"vertical\" />\n    <div role=\"presentation\" class=\"remaining-vertical-space\" />\n  </div>\n\n  <TabContents {tabs} {selectedTabId} cssClass=\"tidy-sheet-body\" />\n  <div class=\"button-bar\">\n    <button\n      type=\"button\"\n      class=\"save-changes-btn\"\n      on:click={save}\n      disabled={applyingChanges}\n    >\n      <i class=\"fas fa-save\" />\n      {localize('TIDY5E.SaveChanges')}\n    </button>\n    <button\n      type=\"button\"\n      class=\"apply-changes-btn\"\n      on:click={apply}\n      disabled={applyingChanges}\n    >\n      <i class=\"fas fa-check\" />\n      {localize('TIDY5E.ApplyChanges')}\n    </button>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .settings-form {\n    height: 100%;\n    display: grid;\n    grid-template-areas:\n      'nav    body'\n      'nav    buttons';\n    grid-template-rows: 1fr auto;\n    grid-template-columns: 15rem 1fr;\n    gap: 0.5rem;\n\n    .vertical-tab-container {\n      grid-area: nav;\n      margin-top: -0.5rem;\n      margin-left: -0.5rem;\n      margin-bottom: -0.5rem;\n    }\n\n    :global(.tidy-sheet-body) {\n      grid-area: body;\n      overflow-y: scroll;\n      padding-top: 0.5rem;\n      padding-right: 0.5rem;\n      margin-right: -0.25rem;\n      flex: 1;\n    }\n\n    .button-bar {\n      grid-area: buttons;\n    }\n  }\n\n  .button-bar {\n    flex: 0;\n    display: flex;\n    padding-right: 0.5rem;\n  }\n\n  .remaining-vertical-space {\n    margin-right: -0.0625rem;\n    border-right: 0.0625rem solid var(--t5e-tab-strip-border-color);\n    flex: 1;\n    background-color: var(--t5e-header-background);\n  }\n</style>\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type { SvelteComponent } from 'svelte';\nimport { writable } from 'svelte/store';\nimport {\n  getCurrentSettings,\n  type CurrentSettings,\n  type Tidy5eSettingKey,\n} from 'src/settings/settings';\nimport { debug } from 'src/utils/logging';\nimport { CONSTANTS } from 'src/constants';\nimport SvelteFormApplicationBase from 'src/applications/SvelteFormApplicationBase';\nimport UserSettings from './UserSettings.svelte';\nimport type {\n  UserSettingsContext,\n  UserSettingsFunctions,\n  UserSettingsStore,\n} from './UserSettings.types';\n\nexport class UserSettingsFormApplication extends SvelteFormApplicationBase {\n  initialTabId: string;\n\n  constructor(initialTabId: string, ...args: any[]) {\n    super(...args);\n    this.initialTabId = initialTabId ?? CONSTANTS.TAB_USER_SETTINGS_PLAYERS;\n  }\n\n  static get defaultOptions() {\n    return {\n      ...super.defaultOptions,\n      height: 750,\n      width: 750,\n      classes: [...super.defaultOptions.classes, 'settings'],\n      id: 'tidy-5e-sheets-user-settings',\n      popOut: true,\n    };\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template.hbs');\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.UserSettings.Menu.title', {\n      userName: game.user.name,\n    });\n  }\n\n  getData(): UserSettingsContext {\n    const currentSettings = getCurrentSettings();\n\n    return {\n      settings: {\n        actionListIncludeConsumables:\n          currentSettings.actionListIncludeConsumables,\n        actionListIncludeMinuteLongSpellsAsActions:\n          currentSettings.actionListIncludeMinuteLongSpellsAsActions,\n        actionListIncludeSpellsWithActiveEffects:\n          currentSettings.actionListIncludeSpellsWithActiveEffects,\n        actionListLimitActionsToCantrips:\n          currentSettings.actionListLimitActionsToCantrips,\n        actionListScaleCantripDamage:\n          currentSettings.actionListScaleCantripDamage,\n        alwaysShowNpcSkills: currentSettings.alwaysShowNpcSkills,\n        alwaysShowNpcTraits: currentSettings.alwaysShowNpcTraits,\n        animateInspiration: currentSettings.animateInspiration,\n        hideIfZero: currentSettings.hideIfZero,\n        moveTraitsBelowCharacterResources:\n          currentSettings.moveTraitsBelowCharacterResources,\n        moveTraitsBelowNpcResources:\n          currentSettings.moveTraitsBelowNpcResources,\n        showClassList: currentSettings.showClassList,\n        showEquippedAmmoOnly: currentSettings.showEquippedAmmoOnly,\n        showExhaustionOnHover: currentSettings.showExhaustionOnHover,\n        showIconsNextToTheItemName: currentSettings.showIconsNextToTheItemName,\n        showInspirationOnHover: currentSettings.showInspirationOnHover,\n        showSpellbookTabNpc: currentSettings.showSpellbookTabNpc,\n        toggleEmptyCharacterSkills: currentSettings.toggleEmptyCharacterSkills,\n        toggleEmptyCharacterTraits: currentSettings.toggleEmptyCharacterTraits,\n        useClassicControlsForCharacter:\n          currentSettings.useClassicControlsForCharacter,\n        useClassicControlsForNpc: currentSettings.useClassicControlsForNpc,\n        useClassicControlsForVehicle:\n          currentSettings.useClassicControlsForVehicle,\n        useContextMenu: currentSettings.useContextMenu,\n        useHpBar: currentSettings.useHpBar,\n        useHpBarNpc: currentSettings.useHpBarNpc,\n        useHpBarVehicle: currentSettings.useHpBarVehicle,\n        useHpOverlay: currentSettings.useHpOverlay,\n        useHpOverlayNpc: currentSettings.useHpOverlayNpc,\n        useHpOverlayVehicle: currentSettings.useHpOverlayVehicle,\n        useMulticlassSpellbookFilter:\n          currentSettings.useMulticlassSpellbookFilter,\n        useSpellClassFilterIcons: currentSettings.useSpellClassFilterIcons,\n      },\n    };\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    const data = this.getData();\n\n    debug('Sheet Settings context data', data);\n\n    return new UserSettings({\n      target: node,\n      context: new Map<any, any>([\n        ['context', writable(data) satisfies UserSettingsStore],\n        [\n          'functions',\n          {\n            save: this.saveChangedSettings.bind(this),\n            apply: this.applyChangedSettings.bind(this),\n            validate: this.validate.bind(this),\n          } satisfies UserSettingsFunctions,\n        ],\n        ['appId', this.appId],\n        ['initialTabId', this.initialTabId],\n      ]),\n    });\n  }\n\n  validate(context: UserSettingsContext) {\n    let valid = true;\n\n    // Add data validation here as needed\n    // if (somethingIsNotValid) {\n    //   valid = false;\n    //   error(\n    //     FoundryAdapter.localize(\n    //       'Some.ValidationRule.Violation.Key.Here'\n    //     ),\n    //     true\n    //   );\n    // }\n\n    return valid;\n  }\n\n  async applyChangedSettings(context: UserSettingsContext) {\n    if (!this.validate(context)) {\n      return false;\n    }\n\n    const newSettings: Partial<CurrentSettings> = {\n      ...context.settings,\n    };\n\n    const currentSettings = getCurrentSettings();\n    const keys = Object.keys(newSettings) as Tidy5eSettingKey[];\n    for (let key of keys) {\n      const currentValue = currentSettings[key];\n      const newValue = newSettings[key];\n      if (currentValue !== newValue) {\n        await FoundryAdapter.setTidySetting(key, newValue);\n        debug(`Updated ${key} to ${newValue}`);\n      }\n    }\n\n    return true;\n  }\n\n  async saveChangedSettings(context: UserSettingsContext) {\n    const changesApplied = await this.applyChangedSettings(context);\n\n    if (!changesApplied) {\n      return;\n    }\n\n    this.close();\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let data: Record<string, unknown>;\n  export let valueProp: string | null = null;\n  export let labelProp: string | null = null;\n  export let blank: string | null = null;\n\n  function getLabel(value: unknown): string {\n    if (\n      labelProp !== null &&\n      value !== null &&\n      typeof value === 'object' &&\n      labelProp in value\n    ) {\n      return (value as Record<string, unknown>)[labelProp]?.toString() ?? '';\n    }\n\n    return value?.toString() ?? '';\n  }\n\n  function getValue(key: string, value: unknown): string {\n    if (\n      valueProp !== null &&\n      value !== null &&\n      typeof value === 'object' &&\n      valueProp in value\n    ) {\n      return (value as Record<string, unknown>)[valueProp]?.toString() ?? '';\n    }\n\n    return key;\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if blank !== null}\n  <option value=\"\">{localize(blank)}</option>\n{/if}\n{#each Object.entries(data) as [key, value]}\n  <option value={getValue(key, value)}>{localize(getLabel(value))}</option>\n{/each}\n","<script lang=\"ts\">\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n\n  export let value: string;\n  export let name: string;\n  export let hint: string;\n  export let id: string;\n  export let options: Record<string, unknown>;\n\n  const appId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<article class=\"setting group\">\n  <section>\n    <div class=\"description\">\n      <label for=\"{id}-{appId}\">{localize(name)}</label>\n      <p class=\"tidy5e-notes\">{localize(hint)}</p>\n    </div>\n    <div class=\"settings-group\">\n      <select id=\"{id}-{appId}\" bind:value>\n        <SelectOptions data={options} />\n      </select>\n      <slot name=\"additional-inputs\" />\n    </div>\n  </section>\n</article>\n","<script lang=\"ts\">\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import { SettingsProvider } from 'src/settings/settings';\n  import TextInputSetting from 'src/applications/settings/parts/TextInputSetting.svelte';\n  import SelectSetting from 'src/applications/settings/parts/SelectSetting.svelte';\n  import type { WorldSettingsContextStore } from '../WorldSettings.types';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<CheckboxSetting\n  bind:value={$context.settings.hideDeathSavesFromPlayers}\n  name={'TIDY5E.Settings.HideDeathSavesFromPlayers.name'}\n  hint={'TIDY5E.Settings.HideDeathSavesFromPlayers.hint'}\n  id=\"hideDeathSavesFromPlayers\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showExpandedLimitedView}\n  name={'TIDY5E.Settings.ShowExpandedLimitedView.name'}\n  hint={'TIDY5E.Settings.ShowExpandedLimitedView.hint'}\n  id=\"showExpandedLimitedView\"\n/>\n\n<TextInputSetting\n  bind:value={$context.settings.itemCardsFixKey}\n  name={'TIDY5E.Settings.ItemCardsFixKey.name'}\n  hint={'TIDY5E.Settings.ItemCardsFixKey.hint'}\n  id=\"itemCardsFixKey\"\n/>\n\n<SelectSetting\n  options={SettingsProvider.settings.useCircularPortraitStyle.options.choices}\n  bind:value={$context.settings.useCircularPortraitStyle}\n  name={'TIDY5E.Settings.UseCircularPortraitStyle.name'}\n  hint={'TIDY5E.Settings.UseCircularPortraitStyle.hint'}\n  id=\"useCircularPortraitStyle\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.limitEffectsManagementToGm}\n  name={'TIDY5E.Settings.LimitEffectsManagementToGM.name'}\n  hint={'TIDY5E.Settings.LimitEffectsManagementToGM.hint'}\n  id=\"limitEffectsManagementToGm\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showTraitLabels}\n  name={'TIDY5E.Settings.ShowTraitLabels.name'}\n  hint={'TIDY5E.Settings.ShowTraitLabels.hint'}\n  id=\"showTraitLabels\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.allowCantripsToBePrepared}\n  name={'TIDY5E.Settings.AllowCantripsToBePrepared.name'}\n  hint={'TIDY5E.Settings.AllowCantripsToBePrepared.hint'}\n  id=\"allowCantripsToBePrepared\"\n/>\n\n<CheckboxSetting\n  bind:value={$context.settings.showActiveEffectsMarker}\n  name={'TIDY5E.Settings.ShowActiveEffectsMarker.name'}\n  hint={'TIDY5E.Settings.ShowActiveEffectsMarker.hint'}\n  id=\"showActiveEffectsMarker\"\n/>\n","/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nexport { identity as linear } from '../internal/index.js';\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backInOut(t) {\n\tconst s = 1.70158 * 1.525;\n\tif ((t *= 2) < 1) return 0.5 * (t * t * ((s + 1) * t - s));\n\treturn 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backIn(t) {\n\tconst s = 1.70158;\n\treturn t * t * ((s + 1) * t - s);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backOut(t) {\n\tconst s = 1.70158;\n\treturn --t * t * ((s + 1) * t + s) + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceOut(t) {\n\tconst a = 4.0 / 11.0;\n\tconst b = 8.0 / 11.0;\n\tconst c = 9.0 / 10.0;\n\tconst ca = 4356.0 / 361.0;\n\tconst cb = 35442.0 / 1805.0;\n\tconst cc = 16061.0 / 1805.0;\n\tconst t2 = t * t;\n\treturn t < a\n\t\t? 7.5625 * t2\n\t\t: t < b\n\t\t? 9.075 * t2 - 9.9 * t + 3.4\n\t\t: t < c\n\t\t? ca * t2 - cb * t + cc\n\t\t: 10.8 * t * t - 20.52 * t + 10.72;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceInOut(t) {\n\treturn t < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0)) : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceIn(t) {\n\treturn 1.0 - bounceOut(1.0 - t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circInOut(t) {\n\tif ((t *= 2) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circIn(t) {\n\treturn 1.0 - Math.sqrt(1.0 - t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circOut(t) {\n\treturn Math.sqrt(1 - --t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicInOut(t) {\n\treturn t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicIn(t) {\n\treturn t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicOut(t) {\n\tconst f = t - 1.0;\n\treturn f * f * f + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticInOut(t) {\n\treturn t < 0.5\n\t\t? 0.5 * Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) * Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n\t\t: 0.5 *\n\t\t\t\tMath.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n\t\t\t\tMath.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n\t\t\t\t1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticIn(t) {\n\treturn Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticOut(t) {\n\treturn Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoInOut(t) {\n\treturn t === 0.0 || t === 1.0\n\t\t? t\n\t\t: t < 0.5\n\t\t? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n\t\t: -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoIn(t) {\n\treturn t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoOut(t) {\n\treturn t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadInOut(t) {\n\tt /= 0.5;\n\tif (t < 1) return 0.5 * t * t;\n\tt--;\n\treturn -0.5 * (t * (t - 2) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadIn(t) {\n\treturn t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadOut(t) {\n\treturn -t * (t - 2.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartInOut(t) {\n\treturn t < 0.5 ? +8.0 * Math.pow(t, 4.0) : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartIn(t) {\n\treturn Math.pow(t, 4.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartOut(t) {\n\treturn Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintInOut(t) {\n\tif ((t *= 2) < 1) return 0.5 * t * t * t * t * t;\n\treturn 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintIn(t) {\n\treturn t * t * t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintOut(t) {\n\treturn --t * t * t * t * t + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineInOut(t) {\n\treturn -0.5 * (Math.cos(Math.PI * t) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineIn(t) {\n\tconst v = Math.cos(t * Math.PI * 0.5);\n\tif (Math.abs(v) < 1e-14) return 1;\n\telse return 1 - v;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineOut(t) {\n\treturn Math.sin((t * Math.PI) / 2);\n}\n","import { cubicOut } from '../easing/index.js';\nimport { is_function } from '../internal/index.js';\n\n/**\n * The flip function calculates the start and end position of an element and animates between them, translating the x and y values.\n * `flip` stands for [First, Last, Invert, Play](https://aerotwist.com/blog/flip-your-animations/).\n *\n * https://svelte.dev/docs/svelte-animate#flip\n * @param {Element} node\n * @param {{ from: DOMRect; to: DOMRect }} fromTo\n * @param {import('./public.js').FlipParams} params\n * @returns {import('./public.js').AnimationConfig}\n */\nexport function flip(node, { from, to }, params = {}) {\n\tconst style = getComputedStyle(node);\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst [ox, oy] = style.transformOrigin.split(' ').map(parseFloat);\n\tconst dx = from.left + (from.width * ox) / to.width - (to.left + ox);\n\tconst dy = from.top + (from.height * oy) / to.height - (to.top + oy);\n\tconst { delay = 0, duration = (d) => Math.sqrt(d) * 120, easing = cubicOut } = params;\n\treturn {\n\t\tdelay,\n\t\tduration: is_function(duration) ? duration(Math.sqrt(dx * dx + dy * dy)) : duration,\n\t\teasing,\n\t\tcss: (t, u) => {\n\t\t\tconst x = u * dx;\n\t\t\tconst y = u * dy;\n\t\t\tconst sx = t + (u * from.width) / to.width;\n\t\t\tconst sy = t + (u * from.height) / to.height;\n\t\t\treturn `transform: ${transform} translate(${x}px, ${y}px) scale(${sx}, ${sy});`;\n\t\t}\n\t};\n}\n","import { cubicOut, cubicInOut, linear } from '../easing/index.js';\nimport { assign, split_css_unit, is_function } from '../internal/index.js';\n\n/**\n * Animates a `blur` filter alongside an element's opacity.\n *\n * https://svelte.dev/docs/svelte-transition#blur\n * @param {Element} node\n * @param {import('./public').BlurParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function blur(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst f = style.filter === 'none' ? '' : style.filter;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [value, unit] = split_css_unit(amount);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `opacity: ${target_opacity - od * u}; filter: ${f} blur(${u * value}${unit});`\n\t};\n}\n\n/**\n * Animates the opacity of an element from 0 to the current opacity for `in` transitions and from the current opacity to 0 for `out` transitions.\n *\n * https://svelte.dev/docs/svelte-transition#fade\n * @param {Element} node\n * @param {import('./public').FadeParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n\tconst o = +getComputedStyle(node).opacity;\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) => `opacity: ${t * o}`\n\t};\n}\n\n/**\n * Animates the x and y positions and the opacity of an element. `in` transitions animate from the provided values, passed as parameters to the element's default values. `out` transitions animate from the element's default values to the provided values.\n *\n * https://svelte.dev/docs/svelte-transition#fly\n * @param {Element} node\n * @param {import('./public').FlyParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fly(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [xValue, xUnit] = split_css_unit(x);\n\tconst [yValue, yUnit] = split_css_unit(y);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * xValue}${xUnit}, ${(1 - t) * yValue}${yUnit});\n\t\t\topacity: ${target_opacity - od * u}`\n\t};\n}\n\n/**\n * Slides an element in and out.\n *\n * https://svelte.dev/docs/svelte-transition#slide\n * @param {Element} node\n * @param {import('./public').SlideParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function slide(node, { delay = 0, duration = 400, easing = cubicOut, axis = 'y' } = {}) {\n\tconst style = getComputedStyle(node);\n\tconst opacity = +style.opacity;\n\tconst primary_property = axis === 'y' ? 'height' : 'width';\n\tconst primary_property_value = parseFloat(style[primary_property]);\n\tconst secondary_properties = axis === 'y' ? ['top', 'bottom'] : ['left', 'right'];\n\tconst capitalized_secondary_properties = secondary_properties.map(\n\t\t(e) => `${e[0].toUpperCase()}${e.slice(1)}`\n\t);\n\tconst padding_start_value = parseFloat(style[`padding${capitalized_secondary_properties[0]}`]);\n\tconst padding_end_value = parseFloat(style[`padding${capitalized_secondary_properties[1]}`]);\n\tconst margin_start_value = parseFloat(style[`margin${capitalized_secondary_properties[0]}`]);\n\tconst margin_end_value = parseFloat(style[`margin${capitalized_secondary_properties[1]}`]);\n\tconst border_width_start_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[0]}Width`]\n\t);\n\tconst border_width_end_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[1]}Width`]\n\t);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) =>\n\t\t\t'overflow: hidden;' +\n\t\t\t`opacity: ${Math.min(t * 20, 1) * opacity};` +\n\t\t\t`${primary_property}: ${t * primary_property_value}px;` +\n\t\t\t`padding-${secondary_properties[0]}: ${t * padding_start_value}px;` +\n\t\t\t`padding-${secondary_properties[1]}: ${t * padding_end_value}px;` +\n\t\t\t`margin-${secondary_properties[0]}: ${t * margin_start_value}px;` +\n\t\t\t`margin-${secondary_properties[1]}: ${t * margin_end_value}px;` +\n\t\t\t`border-${secondary_properties[0]}-width: ${t * border_width_start_value}px;` +\n\t\t\t`border-${secondary_properties[1]}-width: ${t * border_width_end_value}px;`\n\t};\n}\n\n/**\n * Animates the opacity and scale of an element. `in` transitions animate from an element's current (default) values to the provided values, passed as parameters. `out` transitions animate from the provided values to an element's default values.\n *\n * https://svelte.dev/docs/svelte-transition#scale\n * @param {Element} node\n * @param {import('./public').ScaleParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function scale(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst sd = 1 - start;\n\tconst od = target_opacity * (1 - opacity);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - sd * u});\n\t\t\topacity: ${target_opacity - od * u}\n\t\t`\n\t};\n}\n\n/**\n * Animates the stroke of an SVG element, like a snake in a tube. `in` transitions begin with the path invisible and draw the path to the screen over time. `out` transitions start in a visible state and gradually erase the path. `draw` only works with elements that have a `getTotalLength` method, like `<path>` and `<polyline>`.\n *\n * https://svelte.dev/docs/svelte-transition#draw\n * @param {SVGElement & { getTotalLength(): number }} node\n * @param {import('./public').DrawParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n\tlet len = node.getTotalLength();\n\tconst style = getComputedStyle(node);\n\tif (style.strokeLinecap !== 'butt') {\n\t\tlen += parseInt(style.strokeWidth);\n\t}\n\tif (duration === undefined) {\n\t\tif (speed === undefined) {\n\t\t\tduration = 800;\n\t\t} else {\n\t\t\tduration = len / speed;\n\t\t}\n\t} else if (typeof duration === 'function') {\n\t\tduration = duration(len);\n\t}\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_, u) => `\n\t\t\tstroke-dasharray: ${len};\n\t\t\tstroke-dashoffset: ${u * len};\n\t\t`\n\t};\n}\n\n/**\n * The `crossfade` function creates a pair of [transitions](https://svelte.dev/docs#template-syntax-element-directives-transition-fn) called `send` and `receive`. When an element is 'sent', it looks for a corresponding element being 'received', and generates a transition that transforms the element to its counterpart's position and fades it out. When an element is 'received', the reverse happens. If there is no counterpart, the `fallback` transition is used.\n *\n * https://svelte.dev/docs/svelte-transition#crossfade\n * @param {import('./public').CrossfadeParams & {\n * \tfallback?: (node: Element, params: import('./public').CrossfadeParams, intro: boolean) => import('./public').TransitionConfig;\n * }} params\n * @returns {[(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig, (node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig]}\n */\nexport function crossfade({ fallback, ...defaults }) {\n\t/** @type {Map<any, Element>} */\n\tconst to_receive = new Map();\n\t/** @type {Map<any, Element>} */\n\tconst to_send = new Map();\n\t/**\n\t * @param {Element} from_node\n\t * @param {Element} node\n\t * @param {import('./public').CrossfadeParams} params\n\t * @returns {import('./public').TransitionConfig}\n\t */\n\tfunction crossfade(from_node, node, params) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = (d) => Math.sqrt(d) * 30,\n\t\t\teasing = cubicOut\n\t\t} = assign(assign({}, defaults), params);\n\t\tconst from = from_node.getBoundingClientRect();\n\t\tconst to = node.getBoundingClientRect();\n\t\tconst dx = from.left - to.left;\n\t\tconst dy = from.top - to.top;\n\t\tconst dw = from.width / to.width;\n\t\tconst dh = from.height / to.height;\n\t\tconst d = Math.sqrt(dx * dx + dy * dy);\n\t\tconst style = getComputedStyle(node);\n\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\t\tconst opacity = +style.opacity;\n\t\treturn {\n\t\t\tdelay,\n\t\t\tduration: is_function(duration) ? duration(d) : duration,\n\t\t\teasing,\n\t\t\tcss: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${\n\t\t\t\tt + (1 - t) * dh\n\t\t\t});\n\t\t\t`\n\t\t};\n\t}\n\n\t/**\n\t * @param {Map<any, Element>} items\n\t * @param {Map<any, Element>} counterparts\n\t * @param {boolean} intro\n\t * @returns {(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig}\n\t */\n\tfunction transition(items, counterparts, intro) {\n\t\treturn (node, params) => {\n\t\t\titems.set(params.key, node);\n\t\t\treturn () => {\n\t\t\t\tif (counterparts.has(params.key)) {\n\t\t\t\t\tconst other_node = counterparts.get(params.key);\n\t\t\t\t\tcounterparts.delete(params.key);\n\t\t\t\t\treturn crossfade(other_node, node, params);\n\t\t\t\t}\n\t\t\t\t// if the node is disappearing altogether\n\t\t\t\t// (i.e. wasn't claimed by the other list)\n\t\t\t\t// then we need to supply an outro\n\t\t\t\titems.delete(params.key);\n\t\t\t\treturn fallback && fallback(node, params, intro);\n\t\t\t};\n\t\t};\n\t}\n\treturn [transition(to_send, to_receive, false), transition(to_receive, to_send, true)];\n}\n","<script lang=\"ts\" generics=\"TItem extends Record<string, unknown>\">\n  import { flip } from 'svelte/animate';\n  import { crossfade } from 'svelte/transition';\n  import { createEventDispatcher } from 'svelte';\n\n  const [send, receive] = crossfade({});\n\n  export let items: TItem[];\n  export let labelProp: string;\n  export let valueProp: string;\n  export let selectedItemIndex: number | null = null;\n  export let draggable = false;\n\n  let idRandomizer = Math.random().toString().substring(2);\n\n  const dispatcher = createEventDispatcher<{\n    select: number;\n    keydown: KeyboardEvent & { currentTarget: HTMLElement };\n    dragstart: { item: TItem; index: number; event: DragEvent };\n    dragend: { item: TItem; index: number; event: DragEvent };\n    listboxDrop: { event: DragEvent };\n    drop: { item: TItem; index: number; event: DragEvent };\n    dragover: { item: TItem; index: number; event: DragEvent };\n    dragenter: { item: TItem; index: number; event: DragEvent };\n    dragleave: { item: TItem; index: number; event: DragEvent };\n  }>();\n\n  let listbox: HTMLElement;\n\n  function handleListboxKeyDown(\n    ev: KeyboardEvent & { currentTarget: HTMLElement },\n  ) {\n    if (items.length) {\n      const currentIndex = selectedItemIndex ?? -1;\n\n      if (ev.key === 'ArrowUp' && !ev.altKey) {\n        selectItemAt(Math.max(0, currentIndex - 1));\n        ev.preventDefault();\n      } else if (ev.key === 'ArrowDown' && !ev.altKey) {\n        selectItemAt(Math.min(items.length - 1, currentIndex + 1));\n        ev.preventDefault();\n      } else if (ev.key === 'Home') {\n        selectItemAt(0);\n        ev.preventDefault();\n      } else if (ev.key === 'End') {\n        selectItemAt(items.length - 1);\n        ev.preventDefault();\n      }\n\n      listbox\n        .querySelector(`#listbox-item-${selectedItemIndex}-${idRandomizer}`)\n        ?.scrollIntoView({ block: 'nearest' });\n    }\n\n    dispatcher('keydown', ev);\n  }\n\n  function selectItemAt(index: number) {\n    selectedItemIndex = index;\n    dispatcher('select', index);\n  }\n</script>\n\n<ul\n  bind:this={listbox}\n  role=\"listbox\"\n  class=\"listbox {$$props.class ?? ''}\"\n  aria-activedescendant={selectedItemIndex !== null\n    ? `listbox-item-${selectedItemIndex}-${idRandomizer}`\n    : null}\n  tabindex=\"0\"\n  on:keydown={handleListboxKeyDown}\n  on:drop={(ev) => dispatcher('listboxDrop', { event: ev })}\n>\n  {#each items as item, i (item[valueProp])}\n    <li\n      id=\"listbox-item-{i}-{idRandomizer}\"\n      role=\"option\"\n      aria-selected={selectedItemIndex === i}\n      class:focused={selectedItemIndex === i}\n      class=\"flex-row small-gap align-items-center\"\n      on:click={() => selectItemAt(i)}\n      on:keydown={(ev) => handleListboxKeyDown(ev)}\n      {draggable}\n      on:dragstart={(ev) =>\n        dispatcher('dragstart', { event: ev, item, index: i })}\n      on:dragend={(ev) => dispatcher('dragend', { event: ev, item, index: i })}\n      on:drop={(ev) => dispatcher('drop', { event: ev, item, index: i })}\n      on:dragover={(ev) =>\n        dispatcher('dragover', { event: ev, item, index: i })}\n      on:dragenter={(ev) =>\n        dispatcher('dragenter', { event: ev, item, index: i })}\n      on:dragleave={(ev) =>\n        dispatcher('dragleave', { event: ev, item, index: i })}\n      animate:flip={{ duration: 150 }}\n      in:receive={{ key: item[valueProp] }}\n      out:send={{ key: item[valueProp] }}\n    >\n      {#if draggable}\n        <i class=\"drag-grip fa-solid fa-grip-lines fa-fw\"></i>\n      {/if}\n      <slot {item}>\n        {item[labelProp]}\n      </slot>\n    </li>\n  {/each}\n</ul>\n\n<style lang=\"scss\">\n  ul.listbox {\n    margin: 0;\n    padding: 0;\n    border: 0.0625rem solid var(--t5e-light-color);\n    overflow-y: auto;\n    max-height: inherit;\n    height: 100%;\n\n    &:focus-visible {\n      outline: 0.0625rem solid var(--t5e-primary-accent-color);\n    }\n  }\n  .listbox li {\n    list-style-type: none;\n    padding: 0.5rem;\n\n    &:has(.drag-grip) {\n      cursor: pointer;\n    }\n\n    .drag-grip {\n      font-size: 0.625rem;\n      color: var(--t5e-tertiary-color);\n    }\n  }\n  .listbox [role='option'].focused {\n    background-color: var(--t5e-faint-color);\n  }\n\n  .listbox [role='option']:hover {\n    background: var(--t5e-faintest-color);\n  }\n\n  .listbox [role='option'].focused:hover {\n    background-color: var(--t5e-faint-color);\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { createEventDispatcher } from 'svelte';\n\n  export let moveAllToTheLeftDisabled: boolean;\n  export let moveUpDisabled: boolean;\n  export let moveDownDisabled: boolean;\n  export let moveLeftDisabled: boolean;\n  export let moveRightDisabled: boolean;\n  export let moveAllToTheRightDisabled: boolean;\n\n  const dispatcher = createEventDispatcher<{\n    moveAllToTheLeft: void;\n    moveUp: void;\n    moveDown: void;\n    moveLeft: void;\n    moveRight: void;\n    moveAllToTheRight: void;\n  }>();\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"selection-listbox-toolbar {$$props.class ?? ''}\">\n  <button\n    title={localize('TIDY5E.Listbox.MoveUp')}\n    type=\"button\"\n    disabled={moveUpDisabled}\n    on:click={() => dispatcher('moveUp')}\n  >\n    <i class=\"fas fa-angle-up\"></i>\n  </button>\n  <button\n    title={localize('TIDY5E.Listbox.MoveDown')}\n    type=\"button\"\n    disabled={moveDownDisabled}\n    on:click={() => dispatcher('moveDown')}\n  >\n    <i class=\"fas fa-angle-down\"></i>\n  </button>\n  <button\n    title={localize('TIDY5E.Listbox.MoveLeft')}\n    type=\"button\"\n    disabled={moveLeftDisabled}\n    on:click={() => dispatcher('moveLeft')}\n  >\n    <i class=\"fas fa-angle-left\"></i>\n  </button>\n  <button\n    title={localize('TIDY5E.Listbox.MoveRight')}\n    type=\"button\"\n    disabled={moveRightDisabled}\n    on:click={() => dispatcher('moveRight')}\n  >\n    <i class=\"fas fa-angle-right\"></i>\n  </button>\n  <button\n    title={localize('TIDY5E.Listbox.MoveAllLeft')}\n    type=\"button\"\n    disabled={moveAllToTheLeftDisabled}\n    on:click={() => dispatcher('moveAllToTheLeft')}\n  >\n    <i class=\"fas fa-angles-left\"></i>\n  </button>\n  <button\n    title={localize('TIDY5E.Listbox.MoveAllRight')}\n    type=\"button\"\n    disabled={moveAllToTheRightDisabled}\n    on:click={() => dispatcher('moveAllToTheRight')}\n  >\n    <i class=\"fas fa-angles-right\"></i>\n  </button>\n</div>\n\n<style>\n  .selection-listbox-toolbar {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    gap: 0.5rem;\n  }\n\n  .selection-listbox-toolbar button {\n    padding: 0.25rem 0.5rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import Listbox from './Listbox.svelte';\n  import SelectionListboxToolbar from './SelectionListboxToolbar.svelte';\n\n  export let leftItems: any[];\n  export let selectedLeftItemIndex: number | null = null;\n  export let rightItems: any[];\n  export let selectedRightItemIndex: number | null = null;\n  export let labelProp: string;\n  export let valueProp: string;\n  export let listboxCssClass: string = '';\n\n  $: selectedItemIndex = selectedLeftItemIndex ?? selectedRightItemIndex;\n  $: selectedArray =\n    selectedLeftItemIndex !== null\n      ? leftItems\n      : selectedRightItemIndex !== null\n        ? rightItems\n        : null;\n\n  function moveAllToTheLeft() {\n    leftItems = [...leftItems, ...rightItems];\n    rightItems = [];\n    itemsMoved();\n  }\n\n  function moveUp() {\n    if (\n      selectedItemIndex === null ||\n      selectedItemIndex === 0 ||\n      selectedArray === null\n    ) {\n      return;\n    }\n\n    const topValue = selectedArray[selectedItemIndex - 1];\n    const bottomValue = selectedArray[selectedItemIndex];\n    selectedArray[selectedItemIndex - 1] = bottomValue;\n    selectedArray[selectedItemIndex] = topValue;\n\n    if (selectedLeftItemIndex) {\n      selectedLeftItemIndex -= 1;\n      leftItems = leftItems;\n    } else if (selectedRightItemIndex) {\n      selectedRightItemIndex -= 1;\n      rightItems = rightItems;\n    }\n\n    itemsMoved();\n  }\n\n  function moveDown() {\n    if (\n      selectedArray === null ||\n      selectedItemIndex === null ||\n      selectedItemIndex >= selectedArray.length - 1\n    ) {\n      return;\n    }\n\n    const topValue = selectedArray[selectedItemIndex];\n    const bottomValue = selectedArray[selectedItemIndex + 1];\n    selectedArray[selectedItemIndex] = bottomValue;\n    selectedArray[selectedItemIndex + 1] = topValue;\n\n    if (selectedLeftItemIndex !== null) {\n      selectedLeftItemIndex += 1;\n      leftItems = leftItems;\n    } else if (selectedRightItemIndex !== null) {\n      selectedRightItemIndex += 1;\n      rightItems = rightItems;\n    }\n\n    itemsMoved();\n  }\n\n  function moveLeft() {\n    if (selectedRightItemIndex === null) {\n      return;\n    }\n\n    const itemToMove = rightItems.splice(selectedRightItemIndex, 1)[0];\n\n    if (!itemToMove) {\n      return;\n    }\n\n    rightItems = rightItems;\n    leftItems.push(itemToMove);\n    leftItems = leftItems;\n    itemsMoved({ scrollToEnd: 'left' });\n  }\n\n  function moveRight() {\n    if (selectedLeftItemIndex === null) {\n      return;\n    }\n\n    const itemToMove = leftItems.splice(selectedLeftItemIndex, 1)[0];\n\n    if (!itemToMove) {\n      return;\n    }\n\n    leftItems = leftItems;\n    rightItems.push(itemToMove);\n    rightItems = rightItems;\n    itemsMoved({ scrollToEnd: 'right' });\n  }\n\n  function moveAllToTheRight() {\n    rightItems = [...rightItems, ...leftItems];\n    leftItems = [];\n    itemsMoved();\n  }\n\n  function itemsMoved(options?: { scrollToEnd?: 'left' | 'right' }) {\n    if (\n      selectedLeftItemIndex !== null &&\n      leftItems.at(selectedLeftItemIndex) === undefined\n    ) {\n      selectedLeftItemIndex = leftItems.length ? leftItems.length - 1 : null;\n    }\n\n    if (\n      selectedRightItemIndex !== null &&\n      rightItems.at(selectedRightItemIndex) === undefined\n    ) {\n      selectedRightItemIndex = rightItems.length ? rightItems.length - 1 : null;\n    }\n  }\n\n  function handleLeftListboxKeydown(\n    e: CustomEvent<KeyboardEvent & { currentTarget: HTMLElement }>,\n  ): void {\n    if (e.detail.code === 'Space') {\n      moveRight();\n      e.detail.preventDefault();\n    } else if (e.detail.key === 'ArrowUp' && e.detail.altKey) {\n      moveUp();\n    } else if (e.detail.key === 'ArrowDown' && e.detail.altKey) {\n      moveDown();\n    }\n  }\n  function handleRightListboxKeydown(\n    e: CustomEvent<KeyboardEvent & { currentTarget: HTMLElement }>,\n  ): void {\n    if (e.detail.code === 'Space') {\n      moveLeft();\n      e.detail.preventDefault();\n    } else if (e.detail.key === 'ArrowUp' && e.detail.altKey) {\n      moveUp();\n    } else if (e.detail.key === 'ArrowDown' && e.detail.altKey) {\n      moveDown();\n    }\n  }\n</script>\n\n<div class=\"selection-listbox {$$props.class ?? ''}\">\n  {#if $$slots['left-header'] || $$slots['right-header']}\n    <div class=\"column-1\">\n      <slot name=\"left-header\" />\n    </div>\n    <div class=\"column-3\">\n      <slot name=\"right-header\" />\n    </div>\n  {/if}\n  <Listbox\n    bind:items={leftItems}\n    {labelProp}\n    {valueProp}\n    bind:selectedItemIndex={selectedLeftItemIndex}\n    on:select={() => {\n      selectedRightItemIndex = null;\n    }}\n    on:keydown={handleLeftListboxKeydown}\n    class=\"column-1 {listboxCssClass}\"\n  />\n  <SelectionListboxToolbar\n    moveUpDisabled={selectedItemIndex === null || selectedItemIndex === 0}\n    on:moveUp={moveUp}\n    moveDownDisabled={selectedItemIndex === null ||\n      selectedArray === null ||\n      selectedItemIndex >= selectedArray.length - 1}\n    on:moveDown={moveDown}\n    moveLeftDisabled={selectedLeftItemIndex !== null ||\n      selectedRightItemIndex === null}\n    on:moveLeft={moveLeft}\n    moveRightDisabled={selectedLeftItemIndex === null ||\n      selectedRightItemIndex !== null}\n    on:moveRight={moveRight}\n    moveAllToTheLeftDisabled={rightItems.length === 0}\n    on:moveAllToTheLeft={moveAllToTheLeft}\n    moveAllToTheRightDisabled={leftItems.length === 0}\n    on:moveAllToTheRight={moveAllToTheRight}\n    class=\"column-2\"\n  />\n  <Listbox\n    bind:items={rightItems}\n    {labelProp}\n    {valueProp}\n    bind:selectedItemIndex={selectedRightItemIndex}\n    on:select={() => {\n      selectedLeftItemIndex = null;\n    }}\n    on:keydown={handleRightListboxKeydown}\n    class=\"column-3 {listboxCssClass}\"\n  />\n</div>\n\n<style>\n  .selection-listbox {\n    display: grid;\n    grid-template-columns: 1fr auto 1fr;\n    grid-template-rows: auto 1fr;\n    min-height: 0;\n    max-height: inherit;\n    height: 100%;\n    gap: 0.5rem;\n  }\n\n  .selection-listbox :global(.column-1) {\n    grid-column: 1;\n  }\n  .selection-listbox :global(.column-2) {\n    grid-column: 2;\n  }\n  .selection-listbox :global(.column-3) {\n    grid-column: 3;\n  }\n</style>\n","<script lang=\"ts\">\n  import SelectionListbox from 'src/components/listbox/SelectionListbox.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let name: string;\n  export let hint: string;\n  export let leftHeader: string = '';\n  export let leftItems: any[];\n  export let rightHeader: string = '';\n  export let rightItems: any[];\n  export let labelProp: string;\n  export let valueProp: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<article class=\"setting group\">\n  <div class=\"description flex-1\">\n    <b>{localize(name)}</b>\n    <p>\n      {localize(hint)}\n    </p>\n    <div class=\"flex-column small-gap\">\n      <SelectionListbox bind:leftItems bind:rightItems {labelProp} {valueProp}>\n        <b slot=\"left-header\">{localize(leftHeader)}</b>\n        <b slot=\"right-header\">{localize(rightHeader)}</b>\n      </SelectionListbox>\n      <slot name=\"below-listbox\" />\n    </div>\n  </div>\n</article>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import { SettingsProvider } from 'src/settings/settings';\n  import SelectSetting from 'src/applications/settings/parts/SelectSetting.svelte';\n  import type {\n    WorldSettingsContextStore,\n    WorldSettingsFunctions,\n  } from '../WorldSettings.types';\n  import ListboxSetting from '../../parts/ListboxSetting.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  let functions = getContext<WorldSettingsFunctions>(CONSTANTS.SVELTE_CONTEXT.FUNCTIONS);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"settings-form\">\n  <SelectSetting\n    options={SettingsProvider.settings.initialCharacterSheetTab.options.choices()}\n    bind:value={$context.settings.initialCharacterSheetTab}\n    name={SettingsProvider.settings.initialCharacterSheetTab.options.name}\n    hint={SettingsProvider.settings.initialCharacterSheetTab.options.hint}\n    id=\"initialCharacterSheetTab\"\n  />\n\n  <ListboxSetting\n    name={SettingsProvider.settings.defaultCharacterSheetTabs.options.name}\n    hint={SettingsProvider.settings.defaultCharacterSheetTabs.options.hint}\n    leftHeader=\"TIDY5E.Settings.DefaultSheetTabs.AvailableHeader\"\n    bind:leftItems={$context.defaultCharacterTabs.available}\n    rightHeader=\"TIDY5E.Settings.DefaultSheetTabs.SelectedHeader\"\n    bind:rightItems={$context.defaultCharacterTabs.selected}\n    labelProp=\"label\"\n    valueProp=\"id\"\n  >\n    <div slot=\"below-listbox\">\n      <button\n        type=\"button\"\n        on:click={() =>\n          functions.resetDefaultTabs(context, CONSTANTS.SHEET_TYPE_CHARACTER)}\n      >\n        <i class=\"fas fa-rotate-right\" />\n        {localize('TIDY5E.Reset')}\n      </button>\n    </div>\n  </ListboxSetting>\n\n  <CheckboxSetting\n    bind:value={$context.settings.useCharacterEncumbranceBar}\n    name={SettingsProvider.settings.useCharacterEncumbranceBar.options.name}\n    hint={SettingsProvider.settings.useCharacterEncumbranceBar.options.hint}\n    id=\"useCharacterEncumbranceBar\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.showPlayerName}\n    name={'TIDY5E.Settings.ShowPlayerName.name'}\n    hint={'TIDY5E.Settings.ShowPlayerName.hint'}\n    id=\"showPlayerName\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.useCharacterInspiration}\n    name={'TIDY5E.Settings.UseInspiration.name'}\n    hint={'TIDY5E.Settings.UseInspiration.hint'}\n    id=\"useCharacterInspiration\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.allowHpMaxOverride}\n    name={'TIDY5E.Settings.AllowHpMaxOverride.name'}\n    hint={'TIDY5E.Settings.AllowHpMaxOverride.hint'}\n    id=\"allowHpMaxOverride\"\n  />\n</div>\n\n<style lang=\"scss\">\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import { SettingsProvider } from 'src/settings/settings';\n  import SelectSetting from 'src/applications/settings/parts/SelectSetting.svelte';\n  import type {\n    WorldSettingsContextStore,\n    WorldSettingsFunctions,\n  } from '../WorldSettings.types';\n  import ListboxSetting from '../../parts/ListboxSetting.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  let functions = getContext<WorldSettingsFunctions>(CONSTANTS.SVELTE_CONTEXT.FUNCTIONS);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"settings-form\">\n  <SelectSetting\n    options={SettingsProvider.settings.initialNpcSheetTab.options.choices()}\n    bind:value={$context.settings.initialNpcSheetTab}\n    name={SettingsProvider.settings.initialNpcSheetTab.options.name}\n    hint={SettingsProvider.settings.initialNpcSheetTab.options.hint}\n    id=\"initialNpcSheetTab\"\n  />\n\n  <ListboxSetting\n    name={SettingsProvider.settings.defaultNpcSheetTabs.options.name}\n    hint={SettingsProvider.settings.defaultNpcSheetTabs.options.hint}\n    leftHeader=\"TIDY5E.Settings.DefaultSheetTabs.AvailableHeader\"\n    bind:leftItems={$context.defaultNpcTabs.available}\n    rightHeader=\"TIDY5E.Settings.DefaultSheetTabs.SelectedHeader\"\n    bind:rightItems={$context.defaultNpcTabs.selected}\n    labelProp=\"label\"\n    valueProp=\"id\"\n  >\n    <div slot=\"below-listbox\">\n      <button\n        type=\"button\"\n        on:click={() =>\n          functions.resetDefaultTabs(context, CONSTANTS.SHEET_TYPE_NPC)}\n      >\n        <i class=\"fas fa-rotate-right\" />\n        {localize('TIDY5E.Reset')}\n      </button>\n    </div>\n  </ListboxSetting>\n\n  <CheckboxSetting\n    bind:value={$context.settings.showNpcRestInChat}\n    name={'TIDY5E.Settings.ShowNPCRestInChat.name'}\n    hint={'TIDY5E.Settings.ShowNPCRestInChat.hint'}\n    id=\"showNpcRestInChat\"\n  />\n\n  <SelectSetting\n    options={{\n      default: 'TIDY5E.Settings.ShowNPCActorLinkMarker.default',\n      unlinked: 'TIDY5E.Settings.ShowNPCActorLinkMarker.unlinked',\n      both: 'TIDY5E.Settings.ShowNPCActorLinkMarker.both',\n    }}\n    bind:value={$context.settings.showNpcActorLinkMarker}\n    name=\"TIDY5E.Settings.ShowNPCActorLinkMarker.name\"\n    hint=\"TIDY5E.Settings.ShowNPCActorLinkMarker.hint\"\n    id=\"showNpcActorLinkMarker\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.useNpcEncumbranceBar}\n    name={SettingsProvider.settings.useNpcEncumbranceBar.options.name}\n    hint={SettingsProvider.settings.useNpcEncumbranceBar.options.hint}\n    id=\"useNpcEncumbranceBar\"\n  />\n</div>\n\n<style lang=\"scss\">\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import { SettingsProvider } from 'src/settings/settings';\n  import SelectSetting from 'src/applications/settings/parts/SelectSetting.svelte';\n  import type {\n    WorldSettingsContextStore,\n    WorldSettingsFunctions,\n  } from '../WorldSettings.types';\n  import ListboxSetting from '../../parts/ListboxSetting.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  let functions = getContext<WorldSettingsFunctions>(CONSTANTS.SVELTE_CONTEXT.FUNCTIONS);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"settings-form\">\n  <SelectSetting\n    options={SettingsProvider.settings.initialVehicleSheetTab.options.choices()}\n    bind:value={$context.settings.initialVehicleSheetTab}\n    name={SettingsProvider.settings.initialVehicleSheetTab.options.name}\n    hint={SettingsProvider.settings.initialVehicleSheetTab.options.hint}\n    id=\"initialVehicleSheetTab\"\n  />\n\n  <ListboxSetting\n    name={SettingsProvider.settings.defaultVehicleSheetTabs.options.name}\n    hint={SettingsProvider.settings.defaultVehicleSheetTabs.options.hint}\n    leftHeader=\"TIDY5E.Settings.DefaultSheetTabs.AvailableHeader\"\n    bind:leftItems={$context.defaultVehicleTabs.available}\n    rightHeader=\"TIDY5E.Settings.DefaultSheetTabs.SelectedHeader\"\n    bind:rightItems={$context.defaultVehicleTabs.selected}\n    labelProp=\"label\"\n    valueProp=\"id\"\n  >\n    <div slot=\"below-listbox\">\n      <button\n        type=\"button\"\n        on:click={() =>\n          functions.resetDefaultTabs(context, CONSTANTS.SHEET_TYPE_VEHICLE)}\n      >\n        <i class=\"fas fa-rotate-right\" />\n        {localize('TIDY5E.Reset')}\n      </button>\n    </div>\n  </ListboxSetting>\n\n  <CheckboxSetting\n    bind:value={$context.settings.useVehicleEncumbranceBar}\n    name={SettingsProvider.settings.useVehicleEncumbranceBar.options.name}\n    hint={SettingsProvider.settings.useVehicleEncumbranceBar.options.hint}\n    id=\"useVehicleEncumbranceBar\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.useVehicleMotion}\n    name={'TIDY5E.Settings.UseVehicleMotion.name'}\n    hint={'TIDY5E.Settings.UseVehicleMotion.hint'}\n    id=\"useVehicleMotion\"\n  />\n</div>\n\n<style lang=\"scss\">\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import { SettingsProvider } from 'src/settings/settings';\n  import SelectSetting from 'src/applications/settings/parts/SelectSetting.svelte';\n  import type { WorldSettingsContextStore } from '../WorldSettings.types';\n  import CheckboxSetting from '../../parts/CheckboxSetting.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<div class=\"settings-form\">\n  <SelectSetting\n    options={SettingsProvider.settings.itemIdentificationPermission.options\n      .choices}\n    bind:value={$context.settings.itemIdentificationPermission}\n    name={SettingsProvider.settings.itemIdentificationPermission.options.name}\n    hint={SettingsProvider.settings.itemIdentificationPermission.options.hint}\n    id=\"initialCharacterSheetTab\"\n  />\n\n  <CheckboxSetting\n    name={SettingsProvider.settings.includeFlagsInSpellScrollCreation.options\n      .name}\n    hint={SettingsProvider.settings.includeFlagsInSpellScrollCreation.options\n      .hint}\n    bind:value={$context.settings.includeFlagsInSpellScrollCreation}\n    id=\"includeFlagsInSpellScrollCreation\"\n  />\n</div>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext, onMount } from 'svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import type { ExhaustionConfig } from 'src/features/exhaustion/exhaustion.types';\n  import { CONSTANTS } from 'src/constants';\n\n  export let name: string;\n  export let hint: string;\n  export let config: ExhaustionConfig;\n\n  let appId = getContext(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n\n  $: levelsIterator =\n    config.type === 'specific' ? Array(config.levels + 1).fill(0) : [];\n  const localize = FoundryAdapter.localize;\n</script>\n\n<article class=\"setting group\">\n  <section>\n    <div class=\"description\">\n      <label for=\"exhaustionConfigType-{appId}\">{localize(name)}</label>\n      <p class=\"tidy5e-notes\">{localize(hint)}</p>\n    </div>\n    <div class=\"settings-group\">\n      <select id=\"exhaustionConfigType-{appId}\" bind:value={config.type}>\n        <SelectOptions\n          data={{\n            specific: 'TIDY5E.WorldSettings.Exhaustion.options.specific.text',\n            open: 'TIDY5E.WorldSettings.Exhaustion.options.open.text',\n          }}\n        ></SelectOptions>\n      </select>\n      {#if config.type === 'open'}\n        <p class=\"tidy5e-notes\">\n          {localize('TIDY5E.WorldSettings.Exhaustion.options.open.explanation')}\n        </p>\n      {/if}\n    </div>\n  </section>\n</article>\n\n{#if config.type === 'specific'}\n  <article class=\"setting group\">\n    <section>\n      <div class=\"description\">\n        <label for=\"exhaustionConfigTypeLevels-{appId}\"\n          >{localize(\n            'TIDY5E.WorldSettings.Exhaustion.options.specific.levels.name',\n          )}</label\n        >\n        <p class=\"tidy5e-notes\">\n          {localize(\n            'TIDY5E.WorldSettings.Exhaustion.options.specific.levels.hint',\n          )}\n        </p>\n      </div>\n      <div class=\"settings-group\">\n        <input type=\"number\" bind:value={config.levels} min=\"1\" />\n      </div>\n    </section>\n  </article>\n\n  {#if config.type === 'specific'}\n    {#each levelsIterator as _, i (i)}\n      <article class=\"setting group\">\n        <section class=\"\">\n          <div class=\"description\">\n            <label\n              for=\"exhaustion-level-{i}-{appId}\"\n              title={localize(config.hints[i])}\n              class=\"flex-row small-gap align-items-center\"\n            >\n              {localize(\n                'TIDY5E.WorldSettings.Exhaustion.options.specific.levels.tooltip.name',\n                {\n                  level: i,\n                },\n              )}\n              <i class=\"fas fa-info-circle\"></i>\n            </label>\n            <p class=\"tidy5e-notes\">\n              {localize(\n                'TIDY5E.WorldSettings.Exhaustion.options.specific.levels.tooltip.hint',\n              )}\n            </p>\n          </div>\n          <div class=\"settings-group\">\n            <input\n              type=\"text\"\n              id=\"exhaustion-level-{i}-{appId}\"\n              bind:value={config.hints[i]}\n            />\n          </div>\n        </section>\n      </article>\n    {/each}\n  {/if}\n{/if}\n","import type {\n  ExhaustionConfig,\n  IconWithSeverity,\n} from 'src/features/exhaustion/exhaustion.types';\n\nexport function getStandardExhaustionConfig(): ExhaustionConfig {\n  return {\n    type: 'specific',\n    levels: 6,\n    hints: [\n      'TIDY5E.StandardExhaustion0',\n      'TIDY5E.StandardExhaustion1',\n      'TIDY5E.StandardExhaustion2',\n      'TIDY5E.StandardExhaustion3',\n      'TIDY5E.StandardExhaustion4',\n      'TIDY5E.StandardExhaustion5',\n      'TIDY5E.StandardExhaustion6',\n    ],\n  };\n}\n\nexport function getOneDnDExhaustionConfig(): ExhaustionConfig {\n  return {\n    type: 'specific',\n    levels: 11,\n    hints: [\n      'TIDY5E.OneDnDExhaustion0',\n      'TIDY5E.OneDnDExhaustion1',\n      'TIDY5E.OneDnDExhaustion2',\n      'TIDY5E.OneDnDExhaustion3',\n      'TIDY5E.OneDnDExhaustion4',\n      'TIDY5E.OneDnDExhaustion5',\n      'TIDY5E.OneDnDExhaustion6',\n      'TIDY5E.OneDnDExhaustion7',\n      'TIDY5E.OneDnDExhaustion8',\n      'TIDY5E.OneDnDExhaustion9',\n      'TIDY5E.OneDnDExhaustion10',\n      'TIDY5E.OneDnDExhaustion11',\n    ],\n  };\n}\n\nexport function getStandardVehicleExhaustionConfig(): ExhaustionConfig {\n  return {\n    type: 'specific',\n    levels: 6,\n    hints: [\n      'TIDY5E.StandardVehicleExhaustion0',\n      'TIDY5E.StandardVehicleExhaustion1',\n      'TIDY5E.StandardVehicleExhaustion2',\n      'TIDY5E.StandardVehicleExhaustion3',\n      'TIDY5E.StandardVehicleExhaustion4',\n      'TIDY5E.StandardVehicleExhaustion5',\n      'TIDY5E.StandardVehicleExhaustion6',\n    ],\n  };\n}\n\nconst iconsWithSeverity: IconWithSeverity[] = [\n  { iconCssClass: 'far fa-grin', severity: 0 },\n  { iconCssClass: 'far fa-smile', severity: 1 },\n  { iconCssClass: 'far fa-meh', severity: 1 },\n  { iconCssClass: 'far fa-frown', severity: 2 },\n  { iconCssClass: 'far fa-frown-open', severity: 2 },\n  { iconCssClass: 'far fa-tired', severity: 3 },\n  { iconCssClass: 'far fa-dizzy', severity: 3 },\n];\n\nexport function getExhaustionIconsWithSeverity(\n  levels: number\n): IconWithSeverity[] {\n  const levelsIncludingZero = levels + 1;\n\n  if (levelsIncludingZero === 0) {\n    return [];\n  }\n\n  const lastIconWithSeverity = iconsWithSeverity[iconsWithSeverity.length - 1];\n\n  if (levelsIncludingZero === 1) {\n    return [iconsWithSeverity[0]];\n  }\n\n  if (levelsIncludingZero === 2) {\n    return [iconsWithSeverity[0], lastIconWithSeverity];\n  }\n\n  const middleIcons = iconsWithSeverity.slice(1, iconsWithSeverity.length - 1);\n  const middleIconsLength = middleIcons.length;\n\n  let distributedIcons: {\n    iconWithSeverity: IconWithSeverity;\n    order: number;\n  }[] = [];\n\n  for (let index = 0; index < levelsIncludingZero - 2; index++) {\n    const iconIndex = index % middleIconsLength;\n    distributedIcons.push({\n      iconWithSeverity: middleIcons[iconIndex],\n      order: iconIndex,\n    });\n  }\n\n  return [\n    iconsWithSeverity[0],\n    ...distributedIcons\n      .sort((a, b) => a.order - b.order)\n      .map((q) => q.iconWithSeverity),\n    lastIconWithSeverity,\n  ];\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import type { WorldSettingsContextStore } from '../WorldSettings.types';\n  import ExhaustionSetting from '../../parts/ExhaustionSetting.svelte';\n  import {\n    getOneDnDExhaustionConfig,\n    getStandardExhaustionConfig,\n    getStandardVehicleExhaustionConfig,\n  } from 'src/features/exhaustion/exhaustion';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"settings-form\">\n  <CheckboxSetting\n    bind:value={$context.settings.useExhaustion}\n    name={'TIDY5E.Settings.UseExhaustion.name'}\n    hint={'TIDY5E.Settings.UseExhaustion.hint'}\n    id=\"useExhaustion\"\n  />\n\n  <h2>{localize('TIDY5E.WorldSettings.Exhaustion.Header')}</h2>\n\n  <article class=\"setting buttons\">\n    <button\n      type=\"button\"\n      on:click={() =>\n        ($context.exhaustionConfig = getStandardExhaustionConfig())}\n    >\n      {localize('TIDY5E.WorldSettings.Exhaustion.useStandardExhaustion')}\n    </button>\n    <button\n      type=\"button\"\n      on:click={() => ($context.exhaustionConfig = getOneDnDExhaustionConfig())}\n    >\n      {localize('TIDY5E.WorldSettings.Exhaustion.useOneDnDExhaustion')}\n    </button>\n  </article>\n\n  <ExhaustionSetting\n    name=\"TIDY5E.WorldSettings.Exhaustion.name\"\n    hint=\"TIDY5E.WorldSettings.Exhaustion.hint\"\n    bind:config={$context.exhaustionConfig}\n  />\n\n  <h2>{localize('TIDY5E.WorldSettings.VehicleExhaustion.Header')}</h2>\n\n  <article class=\"setting buttons\">\n    <button\n      type=\"button\"\n      on:click={() =>\n        ($context.vehicleExhaustionConfig =\n          getStandardVehicleExhaustionConfig())}\n    >\n      {localize('TIDY5E.WorldSettings.Exhaustion.useStandardExhaustion')}\n    </button>\n  </article>\n\n  <ExhaustionSetting\n    name=\"TIDY5E.WorldSettings.VehicleExhaustion.name\"\n    hint=\"TIDY5E.WorldSettings.VehicleExhaustion.hint\"\n    bind:config={$context.vehicleExhaustionConfig}\n  />\n</div>\n\n<style lang=\"scss\">\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import CheckboxSetting from 'src/applications/settings/parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import type { WorldSettingsContextStore } from '../WorldSettings.types';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"settings-form\">\n  <CheckboxSetting\n    bind:value={$context.settings.permanentlyUnlockCharacterSheetForGm}\n    name={'TIDY5E.Settings.PermanentlyUnlockCharacterSheetForGM.name'}\n    hint={'TIDY5E.Settings.PermanentlyUnlockCharacterSheetForGM.hint'}\n    id=\"permanentlyUnlockCharacterSheetForGm\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.permanentlyUnlockNpcSheetForGm}\n    name={'TIDY5E.Settings.PermanentlyUnlockNPCSheetForGM.name'}\n    hint={'TIDY5E.Settings.PermanentlyUnlockNPCSheetForGM.hint'}\n    id=\"permanentlyUnlockNpcSheetForGm\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.permanentlyUnlockVehicleSheetForGm}\n    name={'TIDY5E.Settings.PermanentlyUnlockVehicleSheetForGM.name'}\n    hint={'TIDY5E.Settings.PermanentlyUnlockVehicleSheetForGM.hint'}\n    id=\"permanentlyUnlockVehicleSheetForGm\"\n  />\n\n  <h2>{localize('TIDY5E.WorldSettings.TabSheetLock.header')}</h2>\n  <p class=\"tab-notes\">{localize('TIDY5E.WorldSettings.TabSheetLock.hint')}</p>\n  <p class=\"tab-notes\">{localize('TIDY5E.WorldSettings.TabSheetLock.hint2')}</p>\n\n  <CheckboxSetting\n    bind:value={$context.settings.useTotalSheetLock}\n    name={'TIDY5E.Settings.UseTotalSheetLock.name'}\n    hint={'TIDY5E.Settings.UseTotalSheetLock.hint'}\n    id=\"useTotalSheetLock\"\n  />\n\n  <h3>{localize('TIDY5E.WorldSettings.TabSheetLock.labelGeneralLocks')}</h3>\n\n  <CheckboxSetting\n    bind:value={$context.settings.lockExpChanges}\n    name={'TIDY5E.Settings.LockExpChanges.name'}\n    hint={'TIDY5E.Settings.LockExpChanges.hint'}\n    id=\"lockExpChanges\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.lockHpMaxChanges}\n    name={'TIDY5E.Settings.LockHpMaxChanges.name'}\n    hint={'TIDY5E.Settings.LockHpMaxChanges.hint'}\n    id=\"lockHpMaxChanges\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.lockConfigureSheet}\n    name={'TIDY5E.Settings.LockConfigureSheet.name'}\n    hint={'TIDY5E.Settings.LockConfigureSheet.hint'}\n    id=\"lockConfigureSheet\"\n  />\n\n  <h3>{localize('TIDY5E.WorldSettings.TabSheetLock.labelInventoryLocks')}</h3>\n\n  <CheckboxSetting\n    bind:value={$context.settings.lockMoneyChanges}\n    name={'TIDY5E.Settings.LockMoneyChanges.name'}\n    hint={'TIDY5E.Settings.LockMoneyChanges.hint'}\n    id=\"lockMoneyChanges\"\n  />\n\n  <h3>{localize('TIDY5E.WorldSettings.TabSheetLock.labelFeaturesLocks')}</h3>\n\n  <CheckboxSetting\n    bind:value={$context.settings.lockLevelSelector}\n    name={'TIDY5E.Settings.LockLevelSelector.name'}\n    hint={'TIDY5E.Settings.LockLevelSelector.hint'}\n    id=\"lockLevelSelector\"\n  />\n\n  <CheckboxSetting\n    bind:value={$context.settings.lockItemQuantity}\n    name={'TIDY5E.Settings.LockItemQuantity.name'}\n    hint={'TIDY5E.Settings.LockItemQuantity.hint'}\n    id=\"lockItemQuantity\"\n  />\n</div>\n\n<style lang=\"scss\">\n</style>\n","<script lang=\"ts\">\n  import { SettingsProvider } from 'src/settings/settings';\n  import CheckboxSetting from '../../parts/CheckboxSetting.svelte';\n  import { getContext } from 'svelte';\n  import type { WorldSettingsContextStore } from '../WorldSettings.types';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<WorldSettingsContextStore>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<div class=\"settings-form\">\n  <CheckboxSetting\n    bind:value={$context.settings.useTidySpellSchoolIcons}\n    name={SettingsProvider.settings.useTidySpellSchoolIcons.options.name}\n    hint={SettingsProvider.settings.useTidySpellSchoolIcons.options.hint}\n    id=\"useTidySpellSchoolIcons\"\n  />\n</div>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import type { Tab } from 'src/types/types';\n  import MiscWorldSettingsTab from './tabs/MiscWorldSettingsTab.svelte';\n  import CharacterWorldSettingsTab from './tabs/CharacterWorldSettingsTab.svelte';\n  import NpcWorldSettingsTab from './tabs/NpcWorldSettingsTab.svelte';\n  import VehicleWorldSettingsTab from './tabs/VehicleWorldSettingsTab.svelte';\n  import ItemWorldSettingsTab from './tabs/ItemWorldSettingsTab.svelte';\n  import ExhaustionWorldSettingsTab from './tabs/ExhaustionWorldSettingsTab.svelte';\n  import SheetLockWorldSettingsTab from './tabs/SheetLockWorldSettingsTab.svelte';\n  import { getContext } from 'svelte';\n  import type {\n    WorldSettingsContextStore,\n    WorldSettingsFunctions,\n  } from './WorldSettings.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import IconsWorldSettingsTab from './tabs/IconsWorldSettingsTab.svelte';\n\n  let selectedTabId: string;\n  let functions = getContext<WorldSettingsFunctions>(CONSTANTS.SVELTE_CONTEXT.FUNCTIONS);\n  let context = getContext<WorldSettingsContextStore>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n\n  let tabs: Tab[] = [\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_MISC,\n      title: 'TIDY5E.WorldSettings.TabMisc.tabLabel',\n      content: {\n        component: MiscWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_CHARACTER,\n      title: 'TIDY5E.WorldSettings.TabCharacter.tabLabel',\n      content: {\n        component: CharacterWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_NPC,\n      title: 'TIDY5E.WorldSettings.TabNpc.tabLabel',\n      content: {\n        component: NpcWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_VEHICLE,\n      title: 'TIDY5E.WorldSettings.TabVehicle.tabLabel',\n      content: {\n        component: VehicleWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_ITEM,\n      title: 'TIDY5E.WorldSettings.TabItem.tabLabel',\n      content: {\n        component: ItemWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_EXHAUSTION,\n      title: 'TIDY5E.WorldSettings.TabExhaustion.tabLabel',\n      content: {\n        component: ExhaustionWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_SHEETLOCK,\n      title: 'TIDY5E.WorldSettings.TabSheetLock.tabLabel',\n      content: {\n        component: SheetLockWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_WORLD_SETTINGS_ICONS,\n      title: 'TIDY5E.WorldSettings.TabIcons.tabLabel',\n      content: {\n        component: IconsWorldSettingsTab,\n        type: 'svelte',\n      },\n    },\n  ];\n\n  selectedTabId ??= tabs[0].id;\n\n  let applyingChanges = false;\n\n  async function save() {\n    applyingChanges = true;\n\n    try {\n      await functions.save($context);\n    } finally {\n      applyingChanges = false;\n    }\n  }\n\n  async function apply() {\n    applyingChanges = true;\n\n    try {\n      await functions.apply($context);\n    } finally {\n      applyingChanges = false;\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"settings-form\">\n  <div role=\"presentation\" class=\"vertical-tab-container flex-column no-gap\">\n    <Tabs {tabs} bind:selectedTabId orientation=\"vertical\" />\n    <div role=\"presentation\" class=\"remaining-vertical-space\" />\n  </div>\n\n  <TabContents {tabs} {selectedTabId} cssClass=\"tidy-sheet-body\" />\n  <div class=\"button-bar\">\n    <button\n      type=\"button\"\n      class=\"save-changes-btn\"\n      on:click={save}\n      disabled={applyingChanges}\n    >\n      <i class=\"fas fa-save\" />\n      {localize('TIDY5E.SaveChanges')}\n    </button>\n    <button\n      type=\"button\"\n      class=\"apply-changes-btn\"\n      on:click={apply}\n      disabled={applyingChanges}\n    >\n      <i class=\"fas fa-check\" />\n      {localize('TIDY5E.ApplyChanges')}\n    </button>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .settings-form {\n    height: 100%;\n    display: grid;\n    grid-template-areas:\n      'nav    body'\n      'nav    buttons';\n    grid-template-rows: 1fr auto;\n    grid-template-columns: 15rem 1fr;\n    gap: 0.5rem;\n\n    .vertical-tab-container {\n      grid-area: nav;\n      margin-top: -0.5rem;\n      margin-left: -0.5rem;\n      margin-bottom: -0.5rem;\n    }\n\n    :global(.tidy-sheet-body) {\n      grid-area: body;\n      overflow-y: scroll;\n      padding-top: 0.5rem;\n      padding-right: 0.5rem;\n      margin-right: -0.25rem;\n      flex: 1;\n    }\n\n    .button-bar {\n      grid-area: buttons;\n    }\n  }\n\n  .button-bar {\n    flex: 0;\n    display: flex;\n    padding-right: 0.5rem;\n  }\n\n  .remaining-vertical-space {\n    margin-right: -0.0625rem;\n    border-right: 0.0625rem solid var(--t5e-tab-strip-border-color);\n    flex: 1;\n    background-color: var(--t5e-header-background);\n  }\n</style>","export function clickOutside(node: HTMLElement) {\n  function handleClick(e: MouseEvent) {\n    if (e.target instanceof Node && !node.contains(e.target)) {\n      node.dispatchEvent(new CustomEvent('outsideclick'));\n    }\n  }\n\n  setTimeout(() => {\n    window.addEventListener('click', handleClick);\n  });\n\n  return {\n    destroy() {\n      window.removeEventListener('click', handleClick);\n    },\n  };\n}\n","import type {\n  ButtonMenuAnchor,\n  ButtonMenuPosition,\n  ButtonMenuPositionStyleInPixels,\n} from './button-menu-types';\n\nexport function getPositionStyles(\n  openerEl: HTMLElement,\n  menuEl: HTMLElement,\n  position: ButtonMenuPosition,\n  anchor: ButtonMenuAnchor,\n  gap: string | false\n): string {\n  let styleObj =\n    position === 'bottom'\n      ? getBottomPositionStyles(openerEl, menuEl)\n      : position === 'left'\n      ? getLeftPositionStyles(openerEl, menuEl)\n      : position === 'top'\n      ? getTopPositionStyles(openerEl, menuEl)\n      : position === 'right'\n      ? getRightPositionStyles(openerEl, menuEl)\n      : null;\n\n  if (!styleObj) {\n    return '';\n  }\n\n  if (anchor !== 'center') {\n    styleObj = anchorMenu(styleObj, anchor, openerEl, menuEl);\n  }\n\n  let styleString = Object.entries({ ...styleObj })\n    .map((x) => `${x[0]}: ${x[1]}px`)\n    .join('; ');\n\n  const gapTransform = getGapTransform(position, gap);\n\n  if (gapTransform) {\n    styleString += `; transform: ${gapTransform}`;\n  }\n\n  return styleString;\n}\n\nfunction getBottomPositionStyles(\n  openerEl: HTMLElement,\n  menuEl: HTMLElement\n): ButtonMenuPositionStyleInPixels {\n  const openerCenterX = Math.ceil(\n    openerEl.offsetLeft + Math.max(openerEl.offsetWidth, 1) / 2\n  );\n\n  return {\n    left: Math.ceil(openerCenterX - menuEl.offsetWidth / 2),\n    top: Math.ceil(openerEl.offsetTop + openerEl.offsetHeight),\n  };\n}\n\nfunction getLeftPositionStyles(\n  openerEl: HTMLElement,\n  menuEl: HTMLElement\n): ButtonMenuPositionStyleInPixels {\n  const openerCenterY = Math.ceil(\n    openerEl.offsetTop + Math.max(openerEl.offsetHeight, 1) / 2\n  );\n\n  return {\n    left: Math.ceil(openerEl.offsetLeft - menuEl.offsetWidth),\n    top: Math.ceil(openerCenterY - menuEl.offsetHeight / 2),\n  };\n}\n\nfunction getRightPositionStyles(\n  openerEl: HTMLElement,\n  menuEl: HTMLElement\n): ButtonMenuPositionStyleInPixels {\n  const openerCenterY = Math.ceil(\n    openerEl.offsetTop + Math.max(openerEl.offsetHeight, 1) / 2\n  );\n\n  return {\n    left: Math.ceil(openerEl.offsetLeft + openerEl.offsetWidth),\n    top: Math.ceil(openerCenterY - menuEl.offsetHeight / 2),\n  };\n}\n\nfunction getTopPositionStyles(\n  openerEl: HTMLElement,\n  menuEl: HTMLElement\n): ButtonMenuPositionStyleInPixels {\n  const openerCenterX = Math.ceil(\n    openerEl.offsetLeft + Math.max(openerEl.offsetWidth, 1) / 2\n  );\n\n  return {\n    left: Math.ceil(openerCenterX - menuEl.offsetWidth / 2),\n    top: Math.ceil(openerEl.offsetTop - menuEl.offsetHeight),\n  };\n}\n\nfunction anchorMenu(\n  styleObj: ButtonMenuPositionStyleInPixels,\n  anchor: ButtonMenuAnchor,\n  openerEl: HTMLElement,\n  menuEl: HTMLElement\n): ButtonMenuPositionStyleInPixels {\n  switch (anchor) {\n    case 'top':\n      styleObj.top = openerEl.offsetTop;\n      break;\n    case 'right':\n      const anchoredMenuLeftPixels =\n        openerEl.offsetLeft + openerEl.offsetWidth - menuEl.offsetWidth;\n      styleObj.left = anchoredMenuLeftPixels;\n      break;\n    case 'bottom':\n      const anchoredMenuTopPixels =\n        openerEl.offsetTop + openerEl.offsetHeight - menuEl.offsetHeight;\n      styleObj.top = anchoredMenuTopPixels;\n      break;\n    case 'left':\n      styleObj.left = openerEl.offsetLeft;\n      break;\n  }\n\n  return styleObj;\n}\n\nfunction getGapTransform(position: ButtonMenuPosition, gap: string | false) {\n  const translation =\n    position === 'top'\n      ? `translateY(-${gap})`\n      : position === 'right'\n      ? `translateX(${gap})`\n      : position === 'bottom'\n      ? `translateY(${gap})`\n      : position === 'left'\n      ? `translateX(-${gap})`\n      : null;\n\n  if (translation && gap) {\n    return translation;\n  }\n\n  return null;\n}\n","<script lang=\"ts\">\n  import { setContext } from 'svelte';\n  import { clickOutside } from '../../events/clickOutside';\n  import type {\n    ButtonMenuAnchor,\n    ButtonMenuContext,\n    ButtonMenuPosition,\n  } from './button-menu-types';\n  import { getPositionStyles } from './button-menu-position';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  type StatefulIconClass = {\n    opened: string | null;\n    closed: string | null;\n  };\n\n  export let open = false;\n  export let buttonText: string = '';\n  export let iconClass: string | StatefulIconClass | null = null;\n  export let wrapperClass: string | null = null;\n  export let listClass: string | null = null;\n  export let buttonClass: string | null = null;\n  export let openerPadding: string | null = null;\n  export let ariaLabel: string | null = null;\n  export let title: string | null = null;\n  export let gap: string | false = '0.25rem';\n  export let position: ButtonMenuPosition = 'bottom';\n  export let anchor: ButtonMenuAnchor = 'center';\n  export let menuElement: keyof HTMLElementTagNameMap = 'ul';\n\n  let openerEl: HTMLElement;\n  let menuStyles: string = '';\n\n  setContext<ButtonMenuContext>(CONSTANTS.SVELTE_CONTEXT.BUTTON_MENU_CONTEXT, {\n    close: close,\n  });\n\n  function close() {\n    open = false;\n  }\n\n  function positionMenu(menuEl: HTMLElement) {\n    menuStyles = getPositionStyles(openerEl, menuEl, position, anchor, gap);\n  }\n\n  let actualIconClass: string | null;\n  $: {\n    if (iconClass !== null) {\n      if (typeof iconClass === 'string') {\n        actualIconClass = iconClass;\n      } else {\n        let potentialClass = open ? iconClass.opened : iconClass.closed;\n        potentialClass ??= iconClass.opened ?? iconClass.closed;\n        actualIconClass = potentialClass;\n      }\n    }\n  }\n</script>\n\n<div class=\"button-menu-wrapper {wrapperClass ?? ''}\">\n  <button\n    type=\"button\"\n    on:click={() => (open = !open)}\n    aria-label={ariaLabel}\n    bind:this={openerEl}\n    {title}\n    class=\"button-menu-opener {buttonClass ?? ''}\"\n    style:padding={openerPadding}\n    tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  >\n    {#if iconClass}\n      <i class={actualIconClass} />\n    {/if}\n    {buttonText}\n  </button>\n\n  {#if open}\n    <svelte:element\n      this={menuElement}\n      class=\"button-menu-list {listClass ?? ''}\"\n      use:clickOutside\n      on:outsideclick={() => close()}\n      style={menuStyles}\n      use:positionMenu\n    >\n      <slot />\n    </svelte:element>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  export let cssClass: string = '';\n</script>\n\n<li class=\"button-menu-item {cssClass}\">\n  <slot />\n</li>\n","<script lang=\"ts\">\n  import { createEventDispatcher, getContext } from 'svelte';\n  import ButtonMenuItem from './ButtonMenuItem.svelte';\n  import type { ButtonMenuContext } from './button-menu-types';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  export let iconClass: string = '';\n  export let useIconColumn: boolean = true;\n  export let title: string | null = null;\n  export let size: 'standard' | 'compact' = 'standard';\n  export let disabled = false;\n\n  const buttonMenuContext = getContext<ButtonMenuContext>(\n    CONSTANTS.SVELTE_CONTEXT.BUTTON_MENU_CONTEXT,\n  );\n  const dispatch = createEventDispatcher<{\n    click: {\n      event: MouseEvent & { currentTarget: HTMLButtonElement };\n    };\n  }>();\n\n  function handleClick(\n    event: MouseEvent & { currentTarget: HTMLButtonElement },\n  ) {\n    buttonMenuContext.close();\n    dispatch('click', { event });\n  }\n</script>\n\n<ButtonMenuItem cssClass=\"button-menu-command-li\">\n  <button\n    type=\"button\"\n    class=\"button-menu-command {size}\"\n    on:click={handleClick}\n    {title}\n    {disabled}\n    tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  >\n    {#if useIconColumn}\n      <span class=\"icon-container\">\n        {#if iconClass}\n          <i class={iconClass} role=\"presentation\" />\n        {/if}\n      </span>\n    {/if}\n    <span class=\"command-text\">\n      <slot />\n    </span>\n  </button>\n</ButtonMenuItem>\n","<script lang=\"ts\">\n  import type { DropdownListOption } from 'src/types/types';\n  import { createEventDispatcher } from 'svelte';\n  import ButtonMenu from '../button-menu/ButtonMenu.svelte';\n  import ButtonMenuCommand from '../button-menu/ButtonMenuCommand.svelte';\n\n  export let options: DropdownListOption[];\n  export let selected: DropdownListOption;\n  export let isOpen = false;\n  export let title: string | null = null;\n  export let buttonClass: string = '';\n\n  const dispatch = createEventDispatcher<{\n    optionClicked: DropdownListOption;\n  }>();\n\n  function optionClicked(selection: DropdownListOption): void {\n    dispatch('optionClicked', { ...selection });\n    isOpen = false;\n  }\n</script>\n\n<ButtonMenu\n  position=\"bottom\"\n  ariaLabel={title}\n  {title}\n  buttonText={selected.text}\n  buttonClass=\"inline-transparent-button primary {buttonClass}\"\n>\n  {#each options as option}\n    <ButtonMenuCommand\n      useIconColumn={false}\n      on:click={() => optionClicked(option)}\n      size=\"compact\"\n    >\n      {option.text}\n    </ButtonMenuCommand>\n  {/each}\n</ButtonMenu>\n","const nilValues = [null, undefined] as const;\nexport function isNil(value: any, ...or: any[]): value is null | undefined {\n  return nilValues.concat(or ?? []).includes(value);\n}\n\nfunction camelToLowerDashCase(str: string) {\n  if (str != str.toLowerCase()) {\n    str = str.replace(/[A-Z]/g, (m) => '-' + m.toLowerCase());\n  }\n  return str;\n}\n\nexport function buildDataset(obj: Record<string, unknown> | null) {\n  if (!obj) {\n    return {};\n  }\n\n  return Object.entries(obj).reduce<Record<string, unknown>>(\n    (acc, [key, value]) => {\n      acc[`data-${camelToLowerDashCase(key)}`] = value;\n      return acc;\n    },\n    {}\n  );\n}\n","import { isNil } from './data';\nimport { debug, error } from './logging';\n\nexport class ActiveEffectsHelper {\n  static isActiveEffectAppliedToField(document: any, field: string) {\n    try {\n      return (\n        document?.overrides &&\n        !isNil(field) &&\n        foundry.utils.getProperty(document.overrides, field)\n      );\n    } catch (e) {\n      error(\n        'An error occurred while checking if a field has an active effect applied',\n        false,\n        e\n      );\n      debug('Active effect error troubleshooting info', { document, field });\n      return false;\n    }\n  }\n}\n","import { FoundryAdapter } from \"src/foundry/foundry-adapter\";\nimport { isNil } from \"./data\";\n\n/**\n * An Handlebars helper to format numbers\n *\n * @param value    - The string or number to format\n * @param options  - Options for how the number should be formatted\n */\nexport function formatAsModifier(value: string | number): string {\n  if (value === null || value === undefined) {\n    return toSignedNumberString(0);\n  }\n\n  const parsed = typeof value === 'string' ? +value : value;\n\n  if (isNaN(parsed)) {\n    return toSignedNumberString(0);\n  }\n\n  return toSignedNumberString(parsed);\n}\n\nfunction toSignedNumberString(value: number) {\n  return value.toLocaleString(FoundryAdapter.getCurrentLang(), { signDisplay: 'always' });\n}\n\nexport function coalesce(...values: string[]) {\n  for (let value of values) {\n    if (!isNil(value?.trim(), '')) {\n      return value;\n    }\n  }\n\n  return '';\n}","<script lang=\"ts\">\n  import InlineTextDropdownList from 'src/components/inputs/InlineTextDropdownList.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { Actor5e, DropdownListOption } from 'src/types/types';\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { formatAsModifier } from 'src/utils/formatting';\n  import { warn } from 'src/utils/logging';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let toggleable: boolean = false;\n  export let actor: Actor5e;\n  export let expanded: boolean = true;\n  export let toggleField: string | null = null;\n\n  $: showAllSkills = !toggleable || expanded;\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  type SkillRef = {\n    key: string;\n    label: string;\n    ability: string;\n    skill: any | null;\n  };\n\n  let skillRefs: SkillRef[];\n  $: {\n    skillRefs = Array.from(Object.entries($context.config.skills)).reduce<\n      SkillRef[]\n    >((prev, [key, configSkill]: [string, any]) => {\n      const skill = getSkill(key);\n\n      if (!skill) {\n        warn(\n          'Unable to find skill. Ensure custom skills are added at \"init\" time.',\n          false,\n          { key, configSkill },\n        );\n        return prev;\n      }\n\n      prev.push({\n        key: key,\n        label: configSkill.label,\n        ability: skill.ability,\n        skill: skill,\n      });\n\n      return prev;\n    }, []);\n  }\n\n  $: abilities = FoundryAdapter.getAbilitiesAsDropdownOptions(\n    $context.abilities,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  function getSkill(key: string): any | null {\n    if (key in $context.actor.system.skills) {\n      return $context.skills[key];\n    }\n\n    return null;\n  }\n\n  function toggleShowAllSkills() {\n    if (toggleField === null) {\n      return;\n    }\n\n    actor.update({ [toggleField]: !expanded });\n  }\n\n  function onSkillAbilityChange(\n    ev: CustomEvent<DropdownListOption>,\n    skillRef: {\n      key: string;\n      label: string;\n      ability: string;\n      skill: any | null;\n    },\n  ): void {\n    $context.actor.update({\n      system: {\n        skills: {\n          [skillRef.key]: {\n            ability: ev.detail.value,\n          },\n        },\n      },\n    });\n  }\n</script>\n\n<div class=\"skills-list-container\">\n  <ul\n    class=\"skills-list\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SKILLS_LIST}\n  >\n    {#each skillRefs as skillRef (skillRef.key)}\n      {@const showSkill =\n        skillRef.skill && (showAllSkills || skillRef.skill.value > 0)}\n\n      {#if showSkill}\n        <li\n          class=\"proficiency-row skill\"\n          class:proficient={skillRef.skill.value}\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SKILL_CONTAINER}\n          data-key={skillRef.key}\n        >\n          {#if $context.editable && $context.unlocked}\n            {@const activeEffectApplied =\n              ActiveEffectsHelper.isActiveEffectAppliedToField(\n                $context.actor,\n                `system.skills.${skillRef.key}.value`,\n              )}\n            <button\n              type=\"button\"\n              class=\"configure-proficiency inline-icon-button\"\n              on:click={() =>\n                FoundryAdapter.renderProficiencyConfig(\n                  $context.actor,\n                  'skills',\n                  skillRef.key,\n                )}\n              title={localize('DND5E.SkillConfigure')}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n                .SKILL_CONFIGURATION_CONTROL}\n              tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            >\n              <i class=\"fas fa-cog\" />\n            </button>\n            <button\n              type=\"button\"\n              class=\"skill-proficiency-toggle inline-icon-button\"\n              on:click={() =>\n                FoundryAdapter.cycleProficiency(\n                  $context.actor,\n                  skillRef.key,\n                  skillRef.skill?.value,\n                  'skills',\n                )}\n              on:contextmenu={() =>\n                FoundryAdapter.cycleProficiency(\n                  $context.actor,\n                  skillRef.key,\n                  skillRef.skill?.value,\n                  'skills',\n                  true,\n                )}\n              title={skillRef.skill.hover}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n                .SKILL_PROFICIENCY_TOGGLE}\n              tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n              disabled={activeEffectApplied}\n              data-tooltip={activeEffectApplied\n                ? localize('DND5E.ActiveEffectOverrideWarning')\n                : null}>{@html skillRef.skill.icon}</button\n            >\n          {:else}\n            <span class=\"skill-proficiency\" title={skillRef.skill.hover}\n              >{@html skillRef.skill.icon}</span\n            >\n          {/if}\n          {#if $context.editable}\n            <button\n              type=\"button\"\n              class=\"tidy5e-skill-name transparent-button rollable\"\n              on:click={(event) =>\n                $context.actor.rollSkill(skillRef.key, { event })}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SKILL_ROLLER}\n              tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n              title={skillRef.skill.label}\n            >\n              {skillRef.skill.label}\n            </button>\n          {:else}\n            <span class=\"tidy5e-skill-name\" title={skillRef.skill.label}>\n              {skillRef.skill.label}\n            </span>\n          {/if}\n          {#if $context.unlocked && $context.editable}\n            <InlineTextDropdownList\n              options={abilities}\n              selected={{\n                text: skillRef.skill.abbreviation,\n                value: skillRef.skill.abbreviation,\n              }}\n              buttonClass=\"skill-ability\"\n              title={$context.abilities?.[skillRef.ability]?.label}\n              on:optionClicked={(ev) => onSkillAbilityChange(ev, skillRef)}\n            />\n          {:else}\n            <span class=\"skill-ability\">{skillRef.skill.abbreviation}</span>\n          {/if}\n\n          <span class=\"skill-mod\">{formatAsModifier(skillRef.skill.total)}</span\n          >\n          <span\n            class=\"skill-passive\"\n            title=\"{skillRef.skill.label} ({localize('DND5E.Passive')})\"\n            >({skillRef.skill.passive})</span\n          >\n        </li>\n      {/if}\n    {/each}\n  </ul>\n  {#if toggleable}\n    <div style=\"text-align:center;\">\n      <button\n        type=\"button\"\n        class=\"toggle-proficient inline-transparent-button\"\n        on:click={toggleShowAllSkills}\n        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n          .SKILLS_SHOW_PROFICIENT_TOGGLE}\n        tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      >\n        {#if showAllSkills}\n          {localize('TIDY5E.HideNotProficientSkills')}\n        {:else}\n          {localize('TIDY5E.ShowNotProficientSkills')}\n        {/if}</button\n      >\n    </div>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .skills-list {\n    border: 0.0625rem solid var(--t5e-faint-color);\n    border-radius: 0.3125rem;\n    overflow: visible;\n    padding: 0;\n    display: flex;\n    flex-direction: column;\n    flex: 0 0 auto;\n\n    .skill {\n      flex: 0 0 1.125rem;\n      display: flex;\n      gap: 0.25rem;\n      font-size: 0.75rem;\n      line-height: 0.875rem;\n      align-items: center;\n      padding: 0.1875rem 0.25rem 0.0625rem 0.25rem;\n      height: 1.125rem;\n      flex-wrap: nowrap;\n\n      &:nth-child(even) {\n        background: var(--t5e-faint-color);\n      }\n\n      .tidy5e-skill-name {\n        font-size: 0.75rem;\n        line-height: 0.875rem;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        flex: 1;\n        text-align: left;\n        font-weight: 400;\n      }\n\n      .configure-proficiency {\n        margin: 0;\n        padding: 0;\n        font-size: 0.625rem;\n        color: var(--t5e-tertiary-color);\n        &:hover {\n          color: var(--t5e-primary-color);\n        }\n      }\n\n      &.proficient .tidy5e-skill-name {\n        font-weight: 700;\n      }\n\n      .skill-proficiency {\n        font-size: 0.625rem;\n        color: var(--t5e-tertiary-color);\n      }\n\n      .skill-proficiency-toggle {\n        font-size: 0.625rem;\n        color: var(--t5e-tertiary-color);\n\n        &:hover {\n          color: var(--t5e-primary-font-color);\n        }\n\n        i {\n          vertical-align: baseline;\n        }\n      }\n\n      .skill-mod,\n      .skill-passive {\n        text-align: right;\n        flex: 0 0 1.5rem;\n      }\n\n      .skill-passive {\n        color: var(--t5e-tertiary-color);\n      }\n\n      :global(.skill-ability) {\n        flex: 0 0 1.5rem;\n        width: 1.5rem;\n        text-transform: capitalize;\n        text-align: left;\n      }\n    }\n  }\n\n  .skills-list-container .toggle-proficient {\n    font-size: 0.625rem;\n    text-transform: capitalize;\n    border: 0.0625rem solid var(--t5e-faint-color);\n    border-top: none;\n    padding: 0.125rem 0.5rem;\n    border-radius: 0 0 0.3125rem 0.3125rem;\n    cursor: pointer;\n    color: var(--t5e-secondary-color);\n    white-space: nowrap;\n\n    &:hover {\n      color: var(--t5e-primary-font-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { createEventDispatcher, getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  export let title: string;\n  export let configureButtonTitle: string;\n  export let iconCssClass: string | undefined = undefined;\n  export let traitCssClass: string | undefined = '';\n  export let show: boolean;\n\n  const dispatcher = createEventDispatcher<{\n    onConfigureClicked: MouseEvent;\n  }>();\n</script>\n\n{#if show}\n  <div\n    class=\"trait-form-group {traitCssClass ?? ''}\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ACTOR_TRAIT}\n  >\n    <span class=\"trait-icon\" aria-label={title} {title}>\n      {#if iconCssClass !== undefined}\n        <i class={iconCssClass} />\n      {/if}\n      <slot name=\"custom-icon\" />\n    </span>\n    <div\n      class=\"trait-label-and-list\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ACTOR_TRAIT_DETAILS}\n    >\n      {#if $settingStore.showTraitLabels}\n        <span class=\"trait-label\">{title}</span>\n      {/if}\n      <slot />\n    </div>\n    {#if $context.unlocked}\n      <button\n        type=\"button\"\n        class=\"trait-editor inline-icon-button flex-row align-items-flex-start justify-content-center\"\n        title={configureButtonTitle}\n        on:click|stopPropagation|preventDefault={(event) =>\n          dispatcher('onConfigureClicked', event)}\n        tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      >\n        <i class=\"fas fa-pencil-alt\" />\n      </button>\n    {/if}\n  </div>\n{/if}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let tools: [key: string, value: any][] = [];\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ul\n  class=\"trait-list tools\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TOOLS_LIST}\n>\n  {#each tools as [key, tool]}\n    <li\n      class=\"tool\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TOOL_CONTAINER}\n      data-key={key}\n    >\n      {#if $context.editable && !$context.lockSensitiveFields}\n        {@const activeEffectApplied =\n          ActiveEffectsHelper.isActiveEffectAppliedToField(\n            $context.actor,\n            `system.tools.${key}.value`,\n          )}\n        <button\n          type=\"button\"\n          class=\"tool-proficiency-toggle inline-transparent-button\"\n          title={tool.hover}\n          on:click|stopPropagation|preventDefault={(event) =>\n            FoundryAdapter.cycleProficiency(\n              $context.actor,\n              key,\n              tool.value,\n              'tools',\n            )}\n          on:contextmenu|stopPropagation|preventDefault={(event) =>\n            FoundryAdapter.cycleProficiency(\n              $context.actor,\n              key,\n              tool.value,\n              'tools',\n              true,\n            )}\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TOOL_PROFICIENCY_TOGGLE}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          disabled={activeEffectApplied}\n          data-tooltip={activeEffectApplied\n            ? localize('DND5E.ActiveEffectOverrideWarning')\n            : null}\n        >\n          {@html tool.icon}\n        </button>\n      {:else}\n        <span title={tool.hover} class=\"tool-proficiency-readonly\"\n          >{@html tool.icon}</span\n        >\n      {/if}\n\n      {#if $context.editable}\n        <button\n          type=\"button\"\n          class=\"tool-check-roller inline-transparent-button rollable\"\n          on:click={(event) => $context.actor.rollToolCheck(key, { event })}\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TOOL_ROLLER}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n        >\n          {tool.label}\n        </button>\n      {:else}\n        <span class=\"tool-check-roller\">\n          {tool.label}\n        </span>\n      {/if}\n\n      {#if $context.unlocked}\n        <button\n          type=\"button\"\n          class=\"tool-proficiency-editor inline-icon-button\"\n          title={localize('DND5E.ToolConfigure')}\n          on:click|stopPropagation|preventDefault={() =>\n            FoundryAdapter.renderProficiencyConfig(\n              $context.actor,\n              'tools',\n              key,\n            )}\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n            .TOOL_CONFIGURATION_CONTROL}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n        >\n          <i class=\"fas fa-cog\" />\n        </button>\n      {/if}\n    </li>\n  {/each}\n</ul>\n","<script lang=\"ts\">\n  export let tags: [key: string, value: string][] = [];\n</script>\n\n<ul class=\"trait-list traits\">\n  {#each tags as [key, value]}\n    <li class=\"trait-tag {key}\">{value}</li>\n  {/each}\n</ul>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ActorSheetContext,\n    DamageModificationContextEntry,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let modifications: DamageModificationContextEntry[];\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ul class=\"damage-modifications\">\n  {#each modifications as modification}\n    <li\n      class=\"damage-modification {modification.consequence} flex-row extra-small-gap\"\n    >\n      {#each modification.icons ?? [] as icon}\n        {@const propertyLabel =\n          $context.config.itemProperties[icon]?.label ?? ''}\n        <i\n          class=\"damage-modification-icon {icon}\"\n          title={localize('DND5E.DamagePhysicalBypassesShort', {\n            type: propertyLabel,\n          })}\n        ></i>\n      {/each}\n      {modification.label}\n    </li>\n  {/each}\n</ul>\n","import type { Item5e } from 'src/types/item.types';\nimport type { SheetTabSectionConfigs } from 'src/features/sections/sections.types';\nimport { CONSTANTS } from 'src/constants';\nimport { isNil } from 'src/utils/data';\nimport type { Actor5e } from 'src/types/types';\nimport type {\n  TidyFlagNamedNotes,\n  TidyFlagUnnamedNotes,\n} from './TidyFlags.types';\n\n/** Manages Tidy flags. */\nexport class TidyFlags {\n  static getFlagPropertyPath(key: string) {\n    return `flags.${CONSTANTS.MODULE_ID}.${key}`;\n  }\n\n  /**\n   * Determines whether an item whose default Action List behavior has been overridden\n   * to be included (`true`) or excluded (`false`).\n   * `undefined` means there is no override and standard Action List logic should be used.\n   * */\n  static actionFilterOverride = {\n    key: 'action-filter-override' as const,\n    prop: TidyFlags.getFlagPropertyPath('action-filter-override'),\n    /** Gets the item's Action Filter Override setting. */\n    get(item: Item5e): boolean | undefined {\n      return (\n        TidyFlags.tryGetFlag<boolean>(\n          item,\n          TidyFlags.actionFilterOverride.key\n        ) ?? undefined\n      );\n    },\n    /** Sets the item's Action Filter Override setting. */\n    set(item: Item5e, value: boolean): Promise<void> {\n      return TidyFlags.setFlag(item, TidyFlags.actionFilterOverride.key, value);\n    },\n    /**\n     * Clears the item's Action Filter Override setting,\n     * meaning the item should use the standard Action List logic\n     * for inclusion or exclusion. */\n    unset(item: Item5e) {\n      return TidyFlags.unsetFlag(item, TidyFlags.actionFilterOverride.key);\n    },\n  };\n\n  /**\n   * Indicates a custom section name for a given item,\n   * which determines the item's section placement\n   * in the Actions tab.\n   */\n  static actionSection = {\n    key: 'actionSection' as const,\n    prop: TidyFlags.getFlagPropertyPath('actionSection'),\n    /** Gets the item's Action Section setting. */\n    get(item: Item5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(item, TidyFlags.actionSection.key) ??\n        undefined\n      );\n    },\n    /** Sets the item's Action Section setting. */\n    set(item: Item5e, value: string) {\n      return TidyFlags.setFlag(item, TidyFlags.actionSection.key, value);\n    },\n    /**\n     * Clears the item's Action Section setting,\n     * meaning the item should use its default action section\n     * in the Actions tab.\n     */\n    unset(item: Item5e) {\n      return TidyFlags.unsetFlag(item, TidyFlags.actionSection.key);\n    },\n  };\n\n  /**\n   * The age of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static age = {\n    key: 'age' as const,\n    prop: TidyFlags.getFlagPropertyPath('age'),\n    /** Gets the actor's age. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.age.key) ?? undefined\n      );\n    },\n    /** Sets the actor's age. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.age.key, value);\n    },\n    /** Clears the actor's age. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.age.key);\n    },\n  };\n\n  /**\n   * Determines whether an actor's sheet should be editable per the sheet lock feature (default `true`).\n   * @param actor the actor\n   * @returns whether the sheet should be editable per the sheet lock feature\n   */\n  static allowEdit = {\n    key: 'allow-edit',\n    prop: TidyFlags.getFlagPropertyPath('allow-edit'),\n    /** Denotes whether the sheet is in edit mode. */\n    get(document: any): boolean {\n      return TidyFlags.tryGetFlag<boolean>(document, 'allow-edit') ?? true;\n    },\n    /** Sets whether the sheet is in edit mode. */\n    set(document: any, value: boolean) {\n      return TidyFlags.setFlag(document, TidyFlags.allowEdit.key, value);\n    },\n    /** Removes the actor's edit mode setting. */\n    unset(document: any) {\n      return TidyFlags.unsetFlag(document, TidyFlags.allowEdit.key);\n    },\n  };\n\n  /**\n   * The appearance of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static appearance = {\n    key: 'appearance' as const,\n    prop: TidyFlags.getFlagPropertyPath('appearance'),\n    /** Gets the actor's appearance. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.appearance.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's appearance. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.appearance.key, value);\n    },\n    /** Clears the actor's appearance. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.appearance.key);\n    },\n  };\n\n  /**\n   * A field used to filter spells based on an indicated class,\n   * showing only spells whose `system.sourceClass` property matches\n   * this `classFilter` selection.\n   */\n  static classFilter = {\n    key: 'classFilter' as const,\n    prop: TidyFlags.getFlagPropertyPath('classFilter'),\n    /** Gets the actor's class filter. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.classFilter.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's class filter. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.classFilter.key, value);\n    },\n    /** Clears the actor's class filter. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.classFilter.key);\n    },\n  };\n\n  /**\n   * The level exhaustion for a given actor.\n   * This flag applies to actors which don't yet possess\n   * standard exhaustion schema from the dnd5e system.\n   */\n  static exhaustion = {\n    key: 'exhaustion' as const,\n    prop: TidyFlags.getFlagPropertyPath('exhaustion'),\n    /** Gets the actor's exhaustion level. */\n    get(actor: Actor5e): number | undefined {\n      return (\n        TidyFlags.tryGetFlag<number>(actor, TidyFlags.exhaustion.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's exhaustion level. */\n    set(actor: Actor5e, value: number): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.exhaustion.key, value);\n    },\n    /** Clears the actor's exhaustion level. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.exhaustion.key);\n    },\n  };\n\n  /**\n   * The eyes of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static eyes = {\n    key: 'eyes' as const,\n    prop: TidyFlags.getFlagPropertyPath('eyes'),\n    /** Gets the actor's eyes. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.eyes.key) ?? undefined\n      );\n    },\n    /** Sets the actor's eyes. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.eyes.key, value);\n    },\n    /** Clears the actor's eyes. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.eyes.key);\n    },\n  };\n\n  /**\n   * The faith of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static faith = {\n    key: 'faith' as const,\n    prop: TidyFlags.getFlagPropertyPath('faith'),\n    /** Gets the actor's faith. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.faith.key) ?? undefined\n      );\n    },\n    /** Sets the actor's faith. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.faith.key, value);\n    },\n    /** Clears the actor's faith. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.faith.key);\n    },\n  };\n\n  /**\n   * The gender of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static gender = {\n    key: 'gender' as const,\n    prop: TidyFlags.getFlagPropertyPath('gender'),\n    /** Gets the actor's gender. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.gender.key) ?? undefined\n      );\n    },\n    /** Sets the actor's gender. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.gender.key, value);\n    },\n    /** Clears the actor's gender. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.gender.key);\n    },\n  };\n\n  /**\n   * The hair of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static hair = {\n    key: 'hair' as const,\n    prop: TidyFlags.getFlagPropertyPath('hair'),\n    /** Gets the actor's hair. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.hair.key) ?? undefined\n      );\n    },\n    /** Sets the actor's hair. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.hair.key, value);\n    },\n    /** Clears the actor's hair. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.hair.key);\n    },\n  };\n\n  /**\n   * The height of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static height = {\n    key: 'height' as const,\n    prop: TidyFlags.getFlagPropertyPath('height'),\n    /** Gets the actor's height. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.height.key) ?? undefined\n      );\n    },\n    /** Sets the actor's height. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.height.key, value);\n    },\n    /** Clears the actor's height. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.height.key);\n    },\n  };\n\n  /**\n   * Denotes whether to show a grid for a given inventory screen.\n   */\n  static inventoryGrid = {\n    key: 'inventory-grid',\n    prop: TidyFlags.getFlagPropertyPath('inventory-grid'),\n    /** Gets whether to show a grid for a given inventory screen. */\n    get(document: any): boolean {\n      return (\n        TidyFlags.tryGetFlag<boolean>(document, TidyFlags.inventoryGrid.key) ===\n        true\n      );\n    },\n    /** Sets whether to show a grid for a given inventory screen. */\n    set(document: any) {\n      return TidyFlags.setFlag(document, TidyFlags.inventoryGrid.key, true);\n    },\n    /** Clears whether to show a grid for a given inventory screen. */\n    unset(document: any) {\n      return TidyFlags.unsetFlag(document, TidyFlags.inventoryGrid.key);\n    },\n  };\n\n  /**\n   * A formula that determines the maximum number of\n   * prepared spells an actor can have.\n   */\n  static maxPreparedSpells = {\n    key: 'maxPreparedSpells' as const,\n    prop: TidyFlags.getFlagPropertyPath('maxPreparedSpells'),\n    /** Gets the actor's maximum number of prepared spells. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.maxPreparedSpells.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's maximum number of prepared spells. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.maxPreparedSpells.key, value);\n    },\n    /** Clears the actor's maximum number of prepared spells. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.maxPreparedSpells.key);\n    },\n  };\n\n  /**\n   * Denotes whether a vehicle is moving.\n   */\n  static motion = {\n    key: 'motion' as const,\n    prop: TidyFlags.getFlagPropertyPath('motion'),\n    /** Gets whether a vehicle is moving. */\n    get(actor: Actor5e): boolean | undefined {\n      return (\n        TidyFlags.tryGetFlag<boolean>(actor, TidyFlags.motion.key) ?? undefined\n      );\n    },\n    /** Sets whether a vehicle is moving. */\n    set(actor: Actor5e, value: boolean): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.motion.key, value);\n    },\n    /** Clears whether a vehicle is moving. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.motion.key);\n    },\n  };\n\n  /**\n   * Journal notes for an actor.\n   * This flag is for actors which don't yet have the standard notes schema.\n   */\n  static notes = {\n    key: 'notes' as const,\n    prop: TidyFlags.getFlagPropertyPath('notes'),\n    /** Gets the actor's journal notes. */\n    get(actor: Actor5e): TidyFlagUnnamedNotes | undefined {\n      return (\n        TidyFlags.tryGetFlag<TidyFlagUnnamedNotes>(\n          actor,\n          TidyFlags.notes.key\n        ) ?? undefined\n      );\n    },\n    /** Sets the actor's journal notes. */\n    set(actor: Actor5e, value: TidyFlagUnnamedNotes): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.notes.key, value);\n    },\n    /** Clears the actor's journal notes. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.notes.key);\n    },\n    /** The individual members of this flag. For flags that are not primitive values. */\n    members: {\n      /** The notes HTML. */\n      value: {\n        key: 'notes.value' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes.value'),\n        /** Gets the actor's notes HTML. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes.members.value.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's notes HTML. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes.members.value.key,\n            value\n          );\n        },\n        /** Clears the actor's notes HTML. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes.members.value.key);\n        },\n      },\n    },\n  };\n\n  /**\n   * Named journal notes for an actor.\n   * These notes represent extra notes that are available\n   * to actors for compartmentalizing notes.\n   */\n  static notes1 = {\n    key: 'notes1' as const,\n    prop: TidyFlags.getFlagPropertyPath('notes1'),\n    /** Gets the actor's first named journal notes. */\n    get(actor: Actor5e): TidyFlagNamedNotes | undefined {\n      return (\n        TidyFlags.tryGetFlag<TidyFlagNamedNotes>(actor, TidyFlags.notes1.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's first named journal notes. */\n    set(actor: Actor5e, value: TidyFlagNamedNotes): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.notes1.key, value);\n    },\n    /** Clears the actor's first named journal notes. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.notes1.key);\n    },\n    /** The individual members of this flag. For flags that are not primitive values. */\n    members: {\n      /** The notes name. */\n      name: {\n        key: 'notes1.name' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes1.name'),\n        /** Gets the actor's first named journal notes name. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes1.members.name.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's first named journal notes name. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes1.members.name.key,\n            value\n          );\n        },\n        /** Clears the actor's first named journal notes name. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes1.members.name.key);\n        },\n      },\n      /** The notes HTML. */\n      value: {\n        key: 'notes1.value' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes1.value'),\n        /** Gets the actor's first named journal notes HTML. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes1.members.value.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's first named journal notes HTML. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes1.members.value.key,\n            value\n          );\n        },\n        /** Clears the actor's first named journal notes HTML. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes1.members.value.key);\n        },\n      },\n    },\n  };\n\n  /**\n   * Named journal notes for an actor.\n   * These notes represent extra notes that are available\n   * to actors for compartmentalizing notes.\n   */\n  static notes2 = {\n    key: 'notes2' as const,\n    prop: TidyFlags.getFlagPropertyPath('notes2'),\n    /** Gets the actor's second named journal notes. */\n    get(actor: Actor5e): TidyFlagNamedNotes | undefined {\n      return (\n        TidyFlags.tryGetFlag<TidyFlagNamedNotes>(actor, TidyFlags.notes2.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's second named journal notes. */\n    set(actor: Actor5e, value: TidyFlagNamedNotes): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.notes2.key, value);\n    },\n    /** Clears the actor's second named journal notes. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.notes2.key);\n    },\n    /** The individual members of this flag. For flags that are not primitive values. */\n    members: {\n      /** The notes name. */\n      name: {\n        key: 'notes2.name' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes2.name'),\n        /** Gets the actor's second named journal notes name. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes2.members.name.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's second named journal notes name. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes2.members.name.key,\n            value\n          );\n        },\n        /** Clears the actor's second named journal notes name. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes2.members.name.key);\n        },\n      },\n      /** The notes HTML. */\n      value: {\n        key: 'notes2.value' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes2.value'),\n        /** Gets the actor's second named journal notes HTML. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes2.members.value.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's second named journal notes HTML. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes2.members.value.key,\n            value\n          );\n        },\n        /** Clears the actor's second named journal notes HTML. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes2.members.value.key);\n        },\n      },\n    },\n  };\n\n  /**\n   * Named journal notes for an actor.\n   * These notes represent extra notes that are available\n   * to actors for compartmentalizing notes.\n   */\n  static notes3 = {\n    key: 'notes3' as const,\n    prop: TidyFlags.getFlagPropertyPath('notes3'),\n    /** Gets the actor's third named journal notes. */\n    get(actor: Actor5e): TidyFlagNamedNotes | undefined {\n      return (\n        TidyFlags.tryGetFlag<TidyFlagNamedNotes>(actor, TidyFlags.notes3.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's third named journal notes. */\n    set(actor: Actor5e, value: TidyFlagNamedNotes): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.notes3.key, value);\n    },\n    /** Clears the actor's third named journal notes. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.notes3.key);\n    },\n    members: {\n      name: {\n        key: 'notes3.name' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes3.name'),\n        /** Gets the actor's third named journal notes name. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes3.members.name.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's third named journal notes name. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes3.members.name.key,\n            value\n          );\n        },\n        /** Clears the actor's third named journal notes name. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes3.members.name.key);\n        },\n      },\n      value: {\n        key: 'notes3.value' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes3.value'),\n        /** Gets the actor's third named journal notes HTML. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes3.members.value.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's third named journal notes HTML. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes3.members.value.key,\n            value\n          );\n        },\n        /** Clears the actor's third named journal notes HTML. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes3.members.value.key);\n        },\n      },\n    },\n  };\n\n  /**\n   * Named journal notes for an actor.\n   * These notes represent extra notes that are available\n   * to actors for compartmentalizing notes.\n   */\n  static notes4 = {\n    key: 'notes4' as const,\n    prop: TidyFlags.getFlagPropertyPath('notes4'),\n    /** Gets the actor's fourth named journal notes. */\n    get(actor: Actor5e): TidyFlagNamedNotes | undefined {\n      return (\n        TidyFlags.tryGetFlag<TidyFlagNamedNotes>(actor, TidyFlags.notes4.key) ??\n        undefined\n      );\n    },\n    /** Sets the actor's fourth named journal notes. */\n    set(actor: Actor5e, value: TidyFlagNamedNotes): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.notes4.key, value);\n    },\n    /** Clears the actor's fourth named journal notes. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.notes4.key);\n    },\n    /** The individual members of this flag. For flags that are not primitive values. */\n    members: {\n      /** The notes name. */\n      name: {\n        key: 'notes4.name' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes4.name'),\n        /** Gets the actor's fourth named journal notes name. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes4.members.name.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's fourth named journal notes name. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes4.members.name.key,\n            value\n          );\n        },\n        /** Clears the actor's fourth named journal notes name. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes4.members.name.key);\n        },\n      },\n      /** The notes HTML. */\n      value: {\n        key: 'notes4.value' as const,\n        prop: TidyFlags.getFlagPropertyPath('notes4.value'),\n        /** Gets the actor's fourth named journal notes HTML. */\n        get(actor: Actor5e): string | undefined {\n          return (\n            TidyFlags.tryGetFlag<string>(\n              actor,\n              TidyFlags.notes4.members.value.key\n            ) ?? undefined\n          );\n        },\n        /** Sets the actor's fourth named journal notes HTML. */\n        set(actor: Actor5e, value: string): Promise<void> {\n          return TidyFlags.setFlag(\n            actor,\n            TidyFlags.notes4.members.value.key,\n            value\n          );\n        },\n        /** Clears the actor's fourth named journal notes HTML. */\n        unset(actor: Actor5e) {\n          return TidyFlags.unsetFlag(actor, TidyFlags.notes4.members.value.key);\n        },\n      },\n    },\n  };\n\n  /**\n   * The name of the player who owns the actor.\n   * This is informational and not used for game logic.\n   */\n  static playerName = {\n    key: 'playerName' as const,\n    prop: TidyFlags.getFlagPropertyPath('playerName'),\n    /** Gets the name of the player who owns the actor. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.playerName.key) ??\n        undefined\n      );\n    },\n    /** Sets the name of the player who owns the actor. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.playerName.key, value);\n    },\n    /** Clears the name of the player who owns the actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.playerName.key);\n    },\n  };\n\n  /**\n   * Indicates a custom section name for a given item\n   * which determines the item's section placement\n   * in the item's default tab, as well as any other locations\n   * that aren't the Actions tab.\n   */\n  static section = {\n    key: 'section' as const,\n    prop: TidyFlags.getFlagPropertyPath('section'),\n    /** Gets the custom section name for an item. */\n    get(item: Item5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(item, TidyFlags.section.key) ?? undefined\n      );\n    },\n    /** Sets the custom section name for an item. */\n    set(item: Item5e, value: string) {\n      return TidyFlags.setFlag(item, TidyFlags.section.key, value);\n    },\n    /**\n     * Clears the item's custom section setting,\n     * meaning the item should use its default section\n     * in the item's default tab, as well as any other locations\n     * that aren't the Actions tab.\n     */\n    unset(item: Item5e) {\n      return TidyFlags.unsetFlag(item, TidyFlags.section.key);\n    },\n  };\n\n  /** Determines the order of item table sections for a given document sheet. */\n  static sectionConfig = {\n    key: 'sheet-section-config' as const,\n    prop: TidyFlags.getFlagPropertyPath('sheet-section-config'),\n    /** Gets the document sheet's section configuration. `undefined` means to use the default settings. */\n    get(document: any): SheetTabSectionConfigs | undefined {\n      const sectionConfigs = TidyFlags.tryGetFlag<SheetTabSectionConfigs>(\n        document,\n        TidyFlags.sectionConfig.key\n      );\n\n      if (!sectionConfigs) {\n        return undefined;\n      }\n\n      for (let section of Object.values(sectionConfigs)) {\n        // Account for how localized keys are stored. For each top-level property, flatten until SheetTabSectionConfigs shape achieved.\n        for (let [key, value] of Object.entries(section)) {\n          if (Object.getOwnPropertyNames(value).length > 1) {\n            continue;\n          }\n\n          let newKey = key;\n          let newValue: any = value;\n\n          while (true) {\n            const propNames = Object.getOwnPropertyNames(newValue);\n\n            let currentPropAtDepth = propNames[0];\n            if (isNil(currentPropAtDepth) || propNames.length > 1) {\n              break;\n            }\n\n            newKey += '.' + currentPropAtDepth;\n            newValue = newValue[currentPropAtDepth];\n          }\n\n          delete section[key];\n          section[newKey] = newValue;\n        }\n      }\n\n      return sectionConfigs;\n    },\n    /** Sets the document sheet's configuration. */\n    set(document: any, value: SheetTabSectionConfigs) {\n      return TidyFlags.setFlag(document, TidyFlags.sectionConfig.key, value);\n    },\n    /**\n     * Clears the document sheet's section config,\n     * meaning the target actor should use default settings.\n     * */\n    unset(document: any) {\n      return TidyFlags.unsetFlag(document, TidyFlags.sectionConfig.key);\n    },\n  };\n\n  /**\n   * The tabs that are currently selected for a given actor.\n   * This is used to determine which tabs are visible\n   * in the actor's sheet.\n   * When this field is empty, the actor uses the default tabs.\n   */\n  static selectedTabs = {\n    key: 'selected-tabs' as const,\n    prop: TidyFlags.getFlagPropertyPath('selected-tabs'),\n    /** Gets the selected tabs for an actor. */\n    get(actor: Actor5e): string[] | undefined {\n      return (\n        TidyFlags.tryGetFlag<string[]>(actor, TidyFlags.selectedTabs.key) ??\n        undefined\n      );\n    },\n    /** Sets the selected tabs for an actor. */\n    set(actor: Actor5e, value: string[]): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.selectedTabs.key, value);\n    },\n    /** Clears the selected tabs for an actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.selectedTabs.key);\n    },\n  };\n\n  /**\n   * Indicates whether the container panel should be shown for a given actor.\n   * This is used to determine whether the container panel is visible\n   * in the actor's inventory tab.\n   */\n  static showContainerPanel = {\n    key: 'showContainerPanel' as const,\n    prop: TidyFlags.getFlagPropertyPath('showContainerPanel'),\n    /** Gets whether the container panel should be shown for an actor. */\n    get(actor: Actor5e): boolean | undefined {\n      return (\n        TidyFlags.tryGetFlag<boolean>(\n          actor,\n          TidyFlags.showContainerPanel.key\n        ) ?? undefined\n      );\n    },\n    /** Sets whether the container panel should be shown for an actor. */\n    set(actor: Actor5e, value: boolean): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.showContainerPanel.key, value);\n    },\n    /** Clears whether the container panel should be shown for an actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.showContainerPanel.key);\n    },\n  };\n\n  /**\n   * Indicates whether the legendary toolbar should be shown for a given NPC.\n   */\n  static showLegendaryToolbar = {\n    key: 'showLegendaryToolbar' as const,\n    prop: TidyFlags.getFlagPropertyPath('showLegendaryToolbar'),\n    /** Gets whether the legendary toolbar should be shown for an NPC. */\n    get(actor: Actor5e): boolean | undefined {\n      return (\n        TidyFlags.tryGetFlag<boolean>(\n          actor,\n          TidyFlags.showLegendaryToolbar.key\n        ) ?? undefined\n      );\n    },\n    /** Sets whether the legendary toolbar should be shown for an NPC. */\n    set(actor: Actor5e, value: boolean): Promise<void> {\n      return TidyFlags.setFlag(\n        actor,\n        TidyFlags.showLegendaryToolbar.key,\n        value\n      );\n    },\n    /** Clears whether the legendary toolbar should be shown for an NPC. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.showLegendaryToolbar.key);\n    },\n  };\n\n  /**\n   * Indicates whether the additional personality info should be shown\n   * for a given NPC on the biography tab.\n   */\n  static showNpcPersonalityInfo = {\n    key: 'showNpcPersonalityInfo' as const,\n    prop: TidyFlags.getFlagPropertyPath('showNpcPersonalityInfo'),\n    /** Gets whether the additional personality info should be shown for an NPC. */\n    get(actor: Actor5e): boolean | undefined {\n      return (\n        TidyFlags.tryGetFlag<boolean>(\n          actor,\n          TidyFlags.showNpcPersonalityInfo.key\n        ) ?? undefined\n      );\n    },\n    /** Sets whether the additional personality info should be shown for an NPC. */\n    set(actor: Actor5e, value: boolean): Promise<void> {\n      return TidyFlags.setFlag(\n        actor,\n        TidyFlags.showNpcPersonalityInfo.key,\n        value\n      );\n    },\n    /** Clears whether the additional personality info should be shown for an NPC. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.showNpcPersonalityInfo.key);\n    },\n  };\n\n  /**\n   * Indicates whether the skills section should be expanded for a given actor.\n   * If this is set to `true`, all skills are shown.\n   * If this is set to `false`, unproficient skills are hidden and the rest are shown.\n   */\n  static skillsExpanded = {\n    key: 'skillsExpanded' as const,\n    prop: TidyFlags.getFlagPropertyPath('skillsExpanded'),\n    /** Gets whether the skills section should be expanded for an actor. */\n    get(actor: Actor5e): boolean | undefined {\n      return (\n        TidyFlags.tryGetFlag<boolean>(actor, TidyFlags.skillsExpanded.key) ??\n        undefined\n      );\n    },\n    /** Sets whether the skills section should be expanded for an actor. */\n    set(actor: Actor5e, value: boolean): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.skillsExpanded.key, value);\n    },\n    /** Clears whether the skills section should be expanded for an actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.skillsExpanded.key);\n    },\n  };\n\n  /**\n   * The skin of an actor.\n   * This is informational and not used for game logic.\n   */\n  static skin = {\n    key: 'skin' as const,\n    prop: TidyFlags.getFlagPropertyPath('skin'),\n    /** Gets the skin of an actor. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.skin.key) ?? undefined\n      );\n    },\n    /** Sets the skin of an actor. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.skin.key, value);\n    },\n    /** Clears the skin of an actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.skin.key);\n    },\n  };\n\n  /**\n   * Denotes whether to show a grid for a given spellbook screen.\n   */\n  static spellbookGrid = {\n    key: 'spellbook-grid',\n    prop: TidyFlags.getFlagPropertyPath('spellbook-grid'),\n    /** Gets whether to show a grid for a given spellbook screen. */\n    get(document: any): boolean {\n      return (\n        TidyFlags.tryGetFlag<boolean>(document, TidyFlags.spellbookGrid.key) ===\n        true\n      );\n    },\n    /** Sets whether to show a grid for a given spellbook screen. */\n    set(document: any) {\n      return TidyFlags.setFlag(document, TidyFlags.spellbookGrid.key, true);\n    },\n    /** Clears whether to show a grid for a given spellbook screen. */\n    unset(document: any) {\n      return TidyFlags.unsetFlag(document, TidyFlags.spellbookGrid.key);\n    },\n  };\n\n  /**\n   * The trait of an actor.\n   * This is informational and not used for game logic.\n   */\n  static trait = {\n    key: 'trait' as const,\n    prop: TidyFlags.getFlagPropertyPath('trait'),\n    /** Gets the trait of an actor. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.trait.key) ?? undefined\n      );\n    },\n    /** Sets the trait of an actor. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.trait.key, value);\n    },\n    /** Clears the trait of an actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.trait.key);\n    },\n  };\n\n  /**\n   * The weight of an actor.\n   * For this module, it is only an informational biographical field.\n   */\n  static weight = {\n    key: 'weight' as const,\n    prop: TidyFlags.getFlagPropertyPath('weight'),\n    /** Gets the weight of an actor. */\n    get(actor: Actor5e): string | undefined {\n      return (\n        TidyFlags.tryGetFlag<string>(actor, TidyFlags.weight.key) ?? undefined\n      );\n    },\n    /** Sets the weight of an actor. */\n    set(actor: Actor5e, value: string): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.weight.key, value);\n    },\n    /** Clears the weight of an actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.weight.key);\n    },\n  };\n\n  /**\n   * Indicates whether the traits section should be expanded for a given actor.\n   * If this is set to `true`, all traits are shown.\n   * If this is set to `false`, empty traits sections are hidden and the rest are shown.\n   * This does not apply to custom traits which are added through the Tidy API.\n   */\n  static traitsExpanded = {\n    key: 'traitsExpanded' as const,\n    prop: TidyFlags.getFlagPropertyPath('traitsExpanded'),\n    /** Gets whether the traits section should be expanded for an actor. */\n    get(actor: Actor5e): boolean | undefined {\n      return (\n        TidyFlags.tryGetFlag<boolean>(actor, TidyFlags.traitsExpanded.key) ??\n        undefined\n      );\n    },\n    /** Sets whether the traits section should be expanded for an actor. */\n    set(actor: Actor5e, value: boolean): Promise<void> {\n      return TidyFlags.setFlag(actor, TidyFlags.traitsExpanded.key, value);\n    },\n    /** Clears whether the traits section should be expanded for an actor. */\n    unset(actor: Actor5e) {\n      return TidyFlags.unsetFlag(actor, TidyFlags.traitsExpanded.key);\n    },\n  };\n\n  /**\n   * Attempts to get a flag from a document.\n   * @param flagged A document which supports flags.\n   * @param flagName The name of the flag to get.\n   * @returns The flag's value, or `undefined` if the flag is not set.\n   * \n   * @remarks\n   * This function is generic, but it is not performing parsing of the flag's value.\n   * It is simply doing an optimistic cast to the target type.\n   */\n  static tryGetFlag<T>(flagged: any, flagName: string) {\n    return flagged.getFlag(CONSTANTS.MODULE_ID, flagName) as\n      | T\n      | null\n      | undefined;\n  }\n\n  /**\n   * Sets a flag on a document.\n   * @param flagged A document to set the flag on.\n   * @param flagName The name of the flag to set.\n   * @param value The value to set the flag to.\n   * @returns A promise that resolves when the flag is set.\n   */\n  static setFlag(\n    flagged: any,\n    flagName: string,\n    value: unknown\n  ): Promise<void> {\n    return flagged.setFlag(CONSTANTS.MODULE_ID, flagName, value);\n  }\n\n  /**\n   * Clears a flag from a document.\n   * @param flagged A document to clear the flag from.\n   * @param flagName The name of the flag to clear.\n   * @returns A promise that resolves when the flag is cleared.\n   */\n  static unsetFlag(flagged: any, flagName: string): Promise<void> {\n    return flagged.unsetFlag(CONSTANTS.MODULE_ID, flagName);\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ActorSheetContext } from 'src/types/types';\n  import TraitSection from './TraitSection.svelte';\n  import TraitSectionTools from './TraitSectionTools.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { error } from 'src/utils/logging';\n  import TraitSectionTags from './TraitSectionTags.svelte';\n  import TraitSectionModifications from './TraitSectionModifications.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  export let toggleable: boolean;\n  export let useSenses: boolean = true;\n  export let enableSpecialTraitsConfiguration: boolean = true;\n\n  $: traitsExpanded =\n    !toggleable || TidyFlags.traitsExpanded.get($context.actor) === true;\n\n  function toggleTraitsExpanded() {\n    if (traitsExpanded) {\n      TidyFlags.traitsExpanded.unset($context.actor);\n    } else {\n      TidyFlags.traitsExpanded.set($context.actor, true);\n    }\n  }\n\n  // TODO: When Tidy takes over all data prep, give typings to tags\n  function getTags(obj: any): [key: string, value: string][] {\n    return Object.entries<string>(obj);\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"traits\"\n  class:expanded={TidyFlags.traitsExpanded.get($context.actor)}\n>\n  {#if useSenses && $context.senses}\n    {@const senses = getTags($context.senses)}\n    <TraitSection\n      title={localize('DND5E.Senses')}\n      iconCssClass=\"fas fa-eye\"\n      configureButtonTitle={localize('DND5E.SensesConfig')}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderActorSensesConfig($context.actor)}\n      show={traitsExpanded || !!senses.length}\n    >\n      <TraitSectionTags tags={senses} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits?.traits?.languages}\n    {@const languages = getTags($context.traits?.traits?.languages?.selected)}\n    <TraitSection\n      traitCssClass={$context.traits?.traits?.languages?.cssClass ?? ''}\n      title={localize('DND5E.Languages')}\n      iconCssClass=\"fas fa-comment\"\n      configureButtonTitle={localize('DND5e.TraitConfig', {\n        trait: localize('DND5E.Languages'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderTraitsSelector($context.actor, 'languages')}\n      show={traitsExpanded || !!languages.length}\n    >\n      <TraitSectionTags tags={languages} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.traits?.di}\n    {@const damageImmunities = getTags($context.traits.traits.di.selected)}\n    <TraitSection\n      traitCssClass={$context.traits.traits?.di?.cssClass ?? ''}\n      title={localize('DND5E.DamImm')}\n      iconCssClass=\"fas fa-heart\"\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.DamImm'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderTraitsSelector($context.actor, 'di')}\n      show={traitsExpanded || !!damageImmunities.length}\n    >\n      <TraitSectionTags tags={damageImmunities} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.traits?.dr}\n    {@const damageResistances = getTags($context.traits.traits.dr.selected)}\n    <TraitSection\n      traitCssClass={$context.traits.traits?.dr?.cssClass ?? ''}\n      title={localize('DND5E.DamRes')}\n      iconCssClass=\"far fa-heart\"\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.DamRes'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderTraitsSelector($context.actor, 'dr')}\n      show={traitsExpanded || !!damageResistances.length}\n    >\n      <TraitSectionTags tags={damageResistances} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.traits?.dv}\n    {@const vulnerabilities = getTags($context.traits.traits.dv.selected)}\n    <TraitSection\n      traitCssClass={$context.traits.traits?.dv?.cssClass ?? ''}\n      title={localize('DND5E.DamVuln')}\n      iconCssClass=\"fas fa-heart-broken\"\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.DamVuln'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderTraitsSelector($context.actor, 'dv')}\n      show={traitsExpanded || !!vulnerabilities.length}\n    >\n      <TraitSectionTags tags={vulnerabilities} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.traits?.dm}\n    <TraitSection\n      title={localize('DND5E.DamageModification.Label')}\n      iconCssClass=\"fas fa-heart-circle-plus\"\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.DamageModification.Label'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.openDamageModificationConfig($context.actor)}\n      show={traitsExpanded || !!$context.traits.traits.dm.length}\n    >\n      <TraitSectionModifications modifications={$context.traits.traits?.dm} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.traits?.ci}\n    {@const conditionImmunities = getTags($context.traits.traits.ci.selected)}\n    <TraitSection\n      traitCssClass={$context.traits.traits?.ci?.cssClass ?? ''}\n      title={localize('DND5E.ConImm')}\n      iconCssClass=\"fas fa-shield-virus\"\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.ConImm'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderTraitsSelector($context.actor, 'ci')}\n      show={traitsExpanded || !!conditionImmunities.length}\n    >\n      <TraitSectionTags tags={conditionImmunities} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.traits?.weaponProf}\n    {@const weaponProfs = getTags($context.traits.traits.weaponProf.selected)}\n    <TraitSection\n      traitCssClass={$context.traits.traits?.weaponProf?.cssClass ?? ''}\n      title={localize('DND5E.TraitWeaponProf')}\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.TraitWeaponProf'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderTraitsSelector($context.actor, 'weapon')}\n      show={traitsExpanded || !!weaponProfs.length}\n    >\n      <svg\n        slot=\"custom-icon\"\n        x=\"0px\"\n        y=\"0px\"\n        viewBox=\"0 0 512 512\"\n        xml:space=\"preserve\"\n      >\n        <path\n          d=\"M443.7,2.6c-2.2-2.5-5.8-3.3-8.8-1.8C417.9,9,358.8,36.1,304.4,43.5c-4.1,0.6-8-0.3-11.3-2.1c-1.5-0.8-2.4-2.5-2.4-4.2v0\n        c0-10.7-8.7-19.4-19.5-19.4h-30.5c-10.7,0-19.5,8.7-19.5,19.4v0c0,1.7-0.9,3.4-2.4,4.2c-3.3,1.8-7.2,2.7-11.3,2.1\n        C153.2,36.1,94.2,9,77.1,0.7c-3-1.5-6.6-0.7-8.8,1.8C56.3,16.4,21,64.9,21,154.9c0,83.4,30.3,143.6,44.3,166.9\n        c2.9,4.9,10,4.7,12.8-0.2c10.5-19,34-59.1,62-91.7c0.4-0.5,0.9-1,1.3-1.5c28.3-30.7,79.9-9.8,79.9,32v232.2\n        c0,10.7,8.7,19.4,19.5,19.4h30.5c10.7,0,19.5-8.7,19.5-19.4V260.4c0-41.8,51.5-62.7,79.9-32c0.4,0.5,0.9,1,1.3,1.5\n        c28,32.6,51.5,72.7,62,91.7c2.8,5,9.9,5.1,12.8,0.2c14-23.3,44.3-83.4,44.3-166.9C491,64.9,455.7,16.4,443.7,2.6z\"\n        />\n      </svg>\n\n      <TraitSectionTags tags={weaponProfs} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.traits?.armorProf}\n    {@const armorProfs = getTags($context.traits.traits.armorProf.selected)}\n    <TraitSection\n      traitCssClass={$context.traits.traits?.armorProf?.cssClass ?? ''}\n      title={localize('DND5E.TraitArmorProf')}\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.TraitArmorProf'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderTraitsSelector($context.actor, 'armor')}\n      show={traitsExpanded || !!armorProfs.length}\n    >\n      <svg\n        slot=\"custom-icon\"\n        x=\"0px\"\n        y=\"0px\"\n        viewBox=\"0 0 512 512\"\n        xml:space=\"preserve\"\n      >\n        <path\n          d=\"M471.7,198.8c0-56.6-37.8-107.3-81.7-147.1c-76-68.9-191.9-68.9-268,0c-43.9,39.8-81.7,90.5-81.7,147.1\n      c0,93-3.2,163.9-12.5,203c-3.9,16.2,4,33,18.3,39.6l113.6,66.3c27.9,13.6,60.3-6.7,60.3-37.7V258.3c0-5.2-3.3-9.8-8.3-11.5\n      l-91.3-30.4c-4.9-1.6-8.3-6.3-8.3-11.5v-15.1c0-6.7,5.4-12.1,12.1-12.1h263.4c6.7,0,12.1,5.4,12.1,12.1v15.1c0,5.2-3.3,9.8-8.3,11.5\n      l-91.3,30.4c-4.9,1.6-8.3,6.3-8.3,11.5V470c0,31,32.5,51.3,60.3,37.7l113.6-66.3c14.3-6.6,22.2-23.4,18.3-39.6\n      C474.9,362.7,471.7,291.8,471.7,198.8L471.7,198.8z\"\n        />\n      </svg>\n\n      <TraitSectionTags tags={armorProfs} />\n    </TraitSection>\n  {/if}\n\n  {#if $context.traits.tools}\n    {@const tools = Object.entries($context.tools)}\n    <TraitSection\n      traitCssClass={$context.traits.tools?.toolProf?.cssClass ?? ''}\n      title={localize('DND5E.TraitToolProf')}\n      iconCssClass=\"fas fa-hammer\"\n      configureButtonTitle={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.TraitToolProf'),\n      })}\n      on:onConfigureClicked={() =>\n        FoundryAdapter.renderToolSelector($context.actor)}\n      show={traitsExpanded || !!tools.length}\n    >\n      {#if tools.length}\n        <TraitSectionTools {tools} />\n      {/if}\n    </TraitSection>\n  {/if}\n\n  {#if $context.customActorTraits?.length}\n    {#each $context.customActorTraits as trait}\n      <TraitSection\n        title={trait.title}\n        iconCssClass={trait.iconClass}\n        configureButtonTitle={trait.openConfigurationTooltip ?? ''}\n        on:onConfigureClicked={(ev) => {\n          try {\n            trait.openConfiguration?.({\n              app: $context.actor.sheet,\n              data: $context,\n              element: $context.actor.sheet.element.get(0),\n              event: ev.detail,\n            });\n          } catch (e) {\n            error(\n              'An error occurred while handling trait configuration click event',\n              false,\n              e,\n            );\n          }\n        }}\n        show={trait.alwaysShow || traitsExpanded}\n      />\n    {/each}\n  {/if}\n\n  {#if toggleable}\n    <button\n      type=\"button\"\n      class=\"toggle-traits inline-transparent-button\"\n      on:click|stopPropagation|preventDefault={() => toggleTraitsExpanded()}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      {#if traitsExpanded}\n        {localize('TIDY5E.HideEmptyTraits')}\n      {:else}\n        {localize('TIDY5E.ShowEmptyTraits')}\n      {/if}\n    </button>\n  {/if}\n  {#if enableSpecialTraitsConfiguration && !$context.lockSensitiveFields}\n    <button\n      type=\"button\"\n      class=\"configure-special-traits inline-icon-button\"\n      title={localize('DND5E.TraitConfig', {\n        trait: localize('DND5E.SpecialTraits'),\n      })}\n      on:click|stopPropagation|preventDefault={() =>\n        FoundryAdapter.renderActorSheetFlags($context.actor)}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class=\"fas fa-star\" />\n    </button>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .traits {\n    border: 0.0625rem solid var(--t5e-faint-color);\n    border-radius: 0.3125rem 0.3125rem 0 0;\n    overflow: visible;\n    position: relative;\n    margin-bottom: 0.75rem; // Accounts for floating button to configure flags\n\n    :global(.trait-form-group:nth-child(odd)) {\n      background: none;\n    }\n\n    :global(.trait-form-group:nth-child(even)) {\n      background: var(--t5e-faint-color);\n    }\n\n    svg {\n      height: 0.75rem;\n      width: 0.875rem;\n\n      path {\n        fill: var(--t5e-tertiary-color);\n      }\n    }\n\n    .toggle-traits {\n      position: absolute;\n      display: inline-block;\n      top: calc(100% + 0.0625rem);\n      left: -0.0625rem;\n      border: 0.0625rem solid var(--t5e-faint-color);\n      border-top: 0;\n      border-radius: 0 0 0.1875rem 0.1875rem;\n      padding: 0.125rem 0.25rem;\n      font-size: 0.625rem;\n      color: var(--t5e-secondary-color);\n    }\n\n    .toggle-traits:hover {\n      color: var(--t5e-primary-font-color);\n    }\n\n    .configure-special-traits {\n      flex: 0;\n      position: absolute;\n      display: inline-block;\n      top: calc(100% + 0.0625rem);\n      right: -0.0625rem;\n      border: 0.0625rem solid var(--t5e-faint-color);\n      border-top: 0;\n      border-radius: 0 0 0.1875rem 0.1875rem;\n      padding: 0.125rem 0.25rem;\n      font-size: 0.625rem;\n    }\n\n    .configure-special-traits i.fas {\n      line-height: 0.625rem;\n      vertical-align: baseline;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n\n  export let expanded: boolean = true;\n\n  let overflowYHidden = !expanded;\n  let expandableContainer: HTMLElement;\n\n  onMount(() => {\n    expandableContainer.addEventListener('transitionstart', () => {\n      overflowYHidden = true;\n    });\n\n    expandableContainer.addEventListener('transitionend', () => {\n      overflowYHidden = !expanded;\n    });\n  });\n</script>\n\n<div\n  bind:this={expandableContainer}\n  class=\"expandable {$$restProps.class ?? ''}\"\n  class:expanded\n  class:overflow-y-hidden={overflowYHidden}\n  role=\"presentation\"\n>\n  <div role=\"presentation\" class=\"expandable-child-animation-wrapper\">\n    <slot />\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .expandable {\n    display: grid;\n    grid-template-rows: 0fr;\n    transition: grid-template-rows 0.2s ease;\n\n    &.expanded {\n      grid-template-rows: 1fr;\n    }\n  }\n\n  .overflow-y-hidden :global(> *) {\n    overflow-y: hidden;\n  }\n</style>\n","import { getContext, setContext } from 'svelte';\nimport { writable, type Readable, type Writable } from 'svelte/store';\nimport type { OnItemTableToggleFn } from '../caching/ItemTableToggleCacheService';\nimport { CONSTANTS } from 'src/constants';\n\nexport type ExpandCollapseServiceState = {\n  expanded: boolean;\n  toggleable: boolean;\n};\n\nexport class ExpandCollapseService {\n  static readonly contextKey = 'expandCollapseService';\n\n  private _onItemTableToggle: OnItemTableToggleFn | undefined | null;\n  private _location: string | undefined | null;\n  private _state: Writable<ExpandCollapseServiceState>;\n  state: Readable<ExpandCollapseServiceState>;\n\n  constructor(\n    initialState: ExpandCollapseServiceState = {\n      expanded: true,\n      toggleable: true,\n    }\n  ) {\n    this._state = writable({ ...initialState });\n    this.state = this._state;\n    this._onItemTableToggle = getContext<OnItemTableToggleFn>(\n      CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TABLE_TOGGLE\n    );\n    this._location = getContext<string>(CONSTANTS.SVELTE_CONTEXT.LOCATION);\n  }\n\n  toggle() {\n    this._state.update((current) => {\n      const newState = !current.expanded;\n      this._tryCacheExpandedState(newState);\n      return {\n        ...current,\n        expanded: newState,\n      };\n    });\n  }\n\n  private _tryCacheExpandedState(newState: boolean) {\n    if (!!this._location) {\n      this._onItemTableToggle?.(this._location, newState);\n    }\n  }\n\n  set(expanded: boolean) {\n    this._state.update((current) => {\n      return {\n        ...current,\n        expanded: expanded,\n      };\n    });\n    this._tryCacheExpandedState(expanded);\n  }\n\n  static initService(toggleable: boolean) {\n    const itemTableToggles = getContext<Map<string, boolean>>(\n      CONSTANTS.SVELTE_CONTEXT.ITEM_TABLE_TOGGLES\n    );\n    const location =\n      getContext<string>(CONSTANTS.SVELTE_CONTEXT.LOCATION) ?? '';\n\n    const service = new ExpandCollapseService({\n      expanded: itemTableToggles?.get(location) ?? true,\n      toggleable,\n    });\n    setContext(ExpandCollapseService.contextKey, service);\n    return service;\n  }\n\n  static getService() {\n    return getContext<ExpandCollapseService>(ExpandCollapseService.contextKey);\n  }\n}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import ExpandableContainer from 'src/components/expandable/ExpandableContainer.svelte';\n  import { ExpandCollapseService } from 'src/features/expand-collapse/ExpandCollapseService';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import { getContext } from 'svelte';\n  import type { MessageBus } from 'src/types/types';\n\n  /**\n   * A unique identifier for this table when viewed amongst other tables in the same logical grouping of tables, such as a tab.\n   */\n  export let key: string;\n  /**\n   * Denotes whether the table can be expanded and collapsed.\n   */\n  export let toggleable: boolean = true;\n\n  let { class: cssClass, ...attributes } = $$restProps;\n\n  const messageBus = getContext<MessageBus>(\n    CONSTANTS.SVELTE_CONTEXT.MESSAGE_BUS,\n  );\n  const tabId = getContext<string | undefined>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n  declareLocation('item-table', key);\n\n  const expandCollapseService = ExpandCollapseService.initService(toggleable);\n\n  $: expandedState = expandCollapseService.state;\n\n  $: {\n    if (\n      $messageBus?.tabId === tabId &&\n      $messageBus?.message === CONSTANTS.MESSAGE_BUS_EXPAND_ALL\n    ) {\n      expandCollapseService.set(true);\n    }\n    if (\n      $messageBus?.tabId === tabId &&\n      $messageBus?.message === CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL\n    ) {\n      expandCollapseService.set(false);\n    }\n  }\n</script>\n\n<section\n  class=\"item-table {cssClass ?? ''}\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_TABLE}\n  data-tidy-section-key={key}\n  {...attributes}\n>\n  <!-- svelte-ignore a11y-no-static-element-interactions -->\n  <!-- svelte-ignore a11y-click-events-have-key-events -->\n  <slot name=\"header\" />\n  <ExpandableContainer expanded={$expandedState.expanded}>\n    <div class=\"item-table-body\">\n      <slot name=\"body\" />\n    </div>\n  </ExpandableContainer>\n</section>\n","const inputTagNames = new Set([\n  'INPUT',\n  'BUTTON',\n  'SELECT',\n  'COLOR',\n  'DATE',\n  'DATETIME-LOCAL',\n  'EMAIL',\n  'FILE',\n  'HIDDEN',\n  'A',\n]);\nconst inputTabNamesSelector = Array.from(inputTagNames)\n  .map((i) => i.toLowerCase())\n  .join(', ');\n\n/**\n * Determines whether an HTML element is known to be user interactable—e.g., the user can click, input, or otherwise interact with the element.\n * @param el the element to evaluate\n * @returns whether the element is a standard user-interactable element\n */\nexport function isUserInteractable(el: HTMLElement) {\n  return (\n    // Is it one of the known interactables?\n    inputTagNames.has(el.tagName) ||\n    // Is it contained within an interactable?\n    el.closest(inputTabNamesSelector)\n  );\n}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { ExpandCollapseService } from 'src/features/expand-collapse/ExpandCollapseService';\n  import { isUserInteractable } from 'src/utils/element';\n\n  const expandCollapseService = ExpandCollapseService.getService();\n\n  function handleHeaderRowClick(ev: MouseEvent) {\n    if (!$expandState.toggleable) {\n      return;\n    }\n\n    if (\n      ev.target instanceof HTMLElement &&\n      isUserInteractable(ev.target) &&\n      ev.target.getAttribute(CONSTANTS.SHEET_PART_ATTRIBUTE) !==\n        CONSTANTS.SHEET_PARTS.EXPANSION_TOGGLE\n    ) {\n      // Avoid eagerly toggling expansion when a contained interactable element is being clicked.\n      return;\n    }\n\n    ev.stopPropagation();\n\n    expandCollapseService.toggle();\n  }\n\n  $: expandState = expandCollapseService.state;\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<header\n  class=\"item-table-header-row\"\n  class:toggleable={$expandState.toggleable}\n  on:click={handleHeaderRowClick}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_TABLE_HEADER_ROW}\n>\n  {#if $expandState.toggleable}\n    <i\n      class=\"expand-indicator fas fa-angle-right\"\n      class:expanded={$expandState.expanded}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.EXPANSION_TOGGLE}\n    ></i>\n  {/if}\n  <slot />\n</header>\n\n<style lang=\"scss\">\n  .item-table-header-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.25rem 0 0.125rem 0.375rem;\n    line-height: 0.75rem;\n    font-size: 0.75rem;\n    background: var(--t5e-table-header-row-color);\n    box-shadow: 0 0 0.1875rem inset var(--t5e-table-header-row-border-color);\n    border-radius: 0.3125rem;\n\n    &.toggleable {\n      cursor: pointer;\n    }\n\n    .expand-indicator {\n      color: var(--t5e-tertiary-color);\n      transition: transform 0.2s;\n      margin-right: 0.325rem;\n      align-self: basline;\n\n      &.expanded {\n        transform: rotate(90deg);\n      }\n    }\n  }\n</style>\n","import type { ItemSummaryCommand } from 'src/api/api.types';\nimport type { RegisteredItemSummaryCommand } from './types';\nimport type { Item5e } from 'src/types/item.types';\n\nexport class ItemSummaryRuntime {\n  private static _itemSummaryCommands: RegisteredItemSummaryCommand[] = [];\n\n  static registerItemSummaryCommands(commands: ItemSummaryCommand[]) {\n    ItemSummaryRuntime._itemSummaryCommands.push(...commands);\n  }\n\n  static getItemSummaryCommands(item: Item5e): RegisteredItemSummaryCommand[] {\n    return [...ItemSummaryRuntime._itemSummaryCommands].filter(\n      (c) => item && (c.enabled?.({ item }) ?? true)\n    );\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { RegisteredItemSummaryCommand } from 'src/runtime/types';\n  import { settingStore } from 'src/settings/settings';\n  import type { Item5e } from 'src/types/item.types';\n\n  export let command: RegisteredItemSummaryCommand;\n  export let item: Item5e;\n</script>\n\n<button\n  type=\"button\"\n  class=\"item-summary-command\"\n  title={command.tooltip ?? null}\n  on:click={() => command.execute?.({ item: item })}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n>\n  {#if command.iconClass}\n    <i class={command.iconClass}></i>\n  {/if}\n  {FoundryAdapter.localize(command.label ?? '')}\n</button>\n\n<style lang=\"scss\">\n  .item-summary-command {\n    width: auto;\n    line-height: 1rem;\n    padding: 0.125rem 0.25rem;\n    border-radius: 0.3125rem;\n    background: var(--t5e-content-entity-link-background);\n    color: var(--t5e-content-entity-link-color);\n    border: 0.0625rem solid var(--t5e-separator-color);\n    font-size: 0.75rem;\n    margin: 0;\n\n    display: inline-flex;\n    align-items: center;\n    gap: 0.25rem;\n\n    i {\n      color: var(--t5e-content-entity-link-color);\n    }\n\n    &:hover {\n      color: var(--t5e-content-entity-link-hover-color);\n      background: var(--t5e-content-entity-link-hover-background);\n\n      i {\n        color: var(--t5e-content-entity-link-hover-color);\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { ItemSummaryRuntime } from 'src/runtime/ItemSummaryRuntime';\n  import ItemSummaryCommandButton from './ItemSummaryCommandButton.svelte';\n  import type { Item5e } from 'src/types/item.types';\n\n  export let item: Item5e;\n\n  $: itemSummaryCommands = ItemSummaryRuntime.getItemSummaryCommands(item);\n</script>\n\n{#each itemSummaryCommands as command}\n  <ItemSummaryCommandButton {item} {command} />\n{/each}\n","<script lang=\"ts\">\n  export let borderColor: 'faint' | 'light' = 'faint';\n  export let cssClass: string | null = null;\n</script>\n\n<div\n  aria-hidden=\"true\"\n  role=\"presentation\"\n  class=\"horizontal-line-separator {borderColor} {cssClass}\"\n/>\n\n<style lang=\"scss\">\n  .horizontal-line-separator {\n    height: 0.0625rem;\n    flex: 0 0 auto;\n  }\n\n  .faint {\n    background: var(--t5e-faint-color);\n  }\n\n  .light {\n    background: var(--t5e-separator-color);\n  }\n</style>\n","<script lang=\"ts\">\n  import { slide } from 'svelte/transition';\n  import { quadInOut } from 'svelte/easing';\n  import ItemSummaryCommandButtonList from '../item-summary/ItemSummaryCommandButtonList.svelte';\n  import type { Item5e, ItemChatData } from 'src/types/item.types';\n  import { ItemSummaryRuntime } from 'src/runtime/ItemSummaryRuntime';\n  import HorizontalLineSeparator from '../layout/HorizontalLineSeparator.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n\n  export let chatData: ItemChatData;\n  export let item: Item5e;\n  export let useTransition: boolean;\n\n  $: itemSummaryCommands = ItemSummaryRuntime.getItemSummaryCommands(item);\n  $: concealDetails = FoundryAdapter.concealDetails(item);\n</script>\n\n<div\n  transition:slide={{\n    duration: useTransition ? 200 : 0,\n    easing: quadInOut,\n  }}\n  class=\"item-summary\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_SUMMARY}\n>\n  {#if concealDetails}\n    {@html chatData.unidentified.description}\n  {:else}\n    {@html chatData.description.value}\n  {/if}\n\n  {#if itemSummaryCommands.length}\n    <HorizontalLineSeparator />\n    <div class=\"inline-wrapped-elements\">\n      <ItemSummaryCommandButtonList {item} />\n    </div>\n  {/if}\n\n  {#if chatData.properties}\n    <HorizontalLineSeparator />\n    <div\n      class=\"inline-wrapped-elements\"\n      inert={concealDetails}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_PROPERTY_LIST}\n    >\n      {#each chatData.properties as prop}<span class=\"tag\">{prop}</span>{/each}\n    </div>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .item-summary {\n    flex: 0 0 100%;\n    padding-top: var(--item-summary-padding-top, 0);\n    padding-right: var(--item-summary-padding-right, 0.5rem);\n    padding-bottom: var(--item-summary-padding-bottom, 0.25rem);\n    padding-left: var(--item-summary-padding-left, 0.5rem);\n    border-top: 0.0625rem solid var(--t5e-faint-color);\n    font-size: 0.75rem;\n\n    :global(p:not(:first-child)) {\n      margin-top: 0.5em;\n    }\n\n    :global(.horizontal-line-separator) {\n      margin-left: -0.5rem;\n      margin-right: -0.5rem;\n    }\n  }\n\n  .inline-wrapped-elements {\n    margin-top: 0.25rem;\n    margin-bottom: 0.25rem;\n  }\n\n  .inline-wrapped-elements:last-of-type {\n    margin-bottom: 0;\n  }\n</style>\n","import type { Tidy5eSheetsApi } from 'src/api';\nimport type { ContextMenuPositionInfo } from 'src/context-menu/context-menu.types';\nimport type {\n  ActiveEffect5e,\n  Actor5e,\n  ActorSheetContext,\n  CharacterSheetContext,\n  NpcSheetContext,\n  TidyResource,\n  VehicleSheetContext,\n} from 'src/types/types';\nimport type { ContextMenuEntry } from './foundry.types';\nimport type {\n  ContainerSheetContext,\n  Item5e,\n  ItemSheetContext,\n} from 'src/types/item.types';\nimport type { RollConfig, Roll, RestConfiguration } from './dnd5e.types';\n\n/** Manages all Hook usage in Tidy 5e Sheets */\nexport class TidyHooks {\n  /**\n   * The active effect context menu has established its options and is about to show.\n   * @param {ActiveEffect5e} effect The active effect document instance.\n   * @param {ContextMenuEntry[]} menuItems The menu items for this active effect.\n   * @returns {boolean} `true` to allow the menu to show, `false` to prevent the default menu from showing.\n   *\n   * @example\n   * ```js\n   * Hooks.on('dnd5e.getActiveEffectContextOptions', (effect, menuItems) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static dnd5eGetActiveEffectContextOptions(\n    effect: ActiveEffect5e,\n    menuItems: ContextMenuEntry[]\n  ): boolean {\n    return Hooks.call('dnd5e.getActiveEffectContextOptions', effect, menuItems);\n  }\n\n  /**\n   * The context menu for the advancements list has been constructed.\n   * @param {jQuery} html The HTML element to which the context options are attached.\n   * @param {ContextMenuEntry[]} contextOptions The context menu entries.\n   * @returns {boolean} `true` to allow the menu to show, `false` to prevent the default menu from showing.\n   *\n   * @example\n   * ```js\n   * Hooks.on('dnd5e.getItemAdvancementContext', (html, contextOptions) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static dnd5eGetItemAdvancementContext(\n    html: any,\n    contextOptions: ContextMenuEntry[]\n  ): boolean {\n    return Hooks.call('dnd5e.getItemAdvancementContext', html, contextOptions);\n  }\n\n  /**\n   * The item context menu has established its options and is about to show.\n   * @param {Item5e} item The item document instance.\n   * @param {ContextMenuEntry[]} menuItems The menu items for this item.\n   * @returns {boolean} `true` to allow the menu to show, `false` to prevent the default menu from showing.\n   *\n   * @example\n   * ```js\n   * Hooks.on('dnd5e.getItemContextOptions', (item, menuItems) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static dnd5eGetItemContextOptions(\n    item: Item5e,\n    menuItems: ContextMenuEntry[]\n  ): boolean {\n    return Hooks.call('dnd5e.getItemContextOptions', item, menuItems);\n  }\n\n  /**\n   * A hit die roll is about to occur.\n   * @param {Actor5e} actor The affected actor.\n   * @param {RollConfig} rollConfig The configuration for the roll.\n   * @param {string} denomination The roll denomination.\n   * @returns {boolean} `true` to allow the roll, `false` to prevent it.\n   *\n   * @example\n   * ```js\n   * Hooks.on('dnd5e.preRollHitDie', (actor, rollConfig, denomination) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static dnd5ePreRollHitDie(\n    actor: Actor5e,\n    rollConfig: RollConfig,\n    denomination: string\n  ): boolean {\n    return Hooks.call('dnd5e.preRollHitDie', actor, rollConfig, denomination);\n  }\n\n  /**\n   * A short rest is about to start.\n   * @param {Actor5e} actor The actor that is being rested.\n   * @param {RestConfiguration} config Configuration options for the rest.\n   * @returns {boolean} Explicitly return `false` to prevent the rest from being started.\n   *\n   * @example\n   * ```js\n   * Hooks.on('dnd5e.preShortRest', (actor, config) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static dnd5ePreShortRest(actor: Actor5e, config: RestConfiguration): boolean {\n    return Hooks.call('dnd5e.preShortRest', actor, config);\n  }\n\n  /**\n   * A hook event that fires after a hit die has been rolled for an Actor, but before updates have been performed.\n   * @param {Actor5e} actor Actor for which the hit die has been rolled.\n   * @param {Roll} roll The resulting roll.\n   * @param {object} updates\n   * @param {object} updates.actor Updates that will be applied to the actor.\n   * @param {object} updates.class Updates that will be applied to the class.\n   * @returns {boolean} `true` to allow the roll, `false` to prevent it.\n   *\n   * @example\n   * ```js\n   * Hooks.on('dnd5e.rollHitDie', (actor, roll, updates) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static dnd5eRollHitDie(actor: Actor5e, roll: Roll, updates: object): boolean {\n    return Hooks.call('dnd5e.rollHitDie', actor, roll, updates);\n  }\n\n  /**\n   * The context menu is about to show for a given item on a sheet.\n   * @param {Item5e} item The item document instance.\n   * @param {object} options The mouse event which triggered the context menu.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.actorItemUseContextMenu', (item, options) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsActorItemUseContextMenu(\n    item: Item5e,\n    options: { event: Event }\n  ) {\n    Hooks.callAll('tidy5e-sheet.actorItemUseContextMenu', item, options);\n  }\n\n  /**\n   * An item is about to be used by an actor.\n   * @param {Item5e} item The affected item document instance.\n   * @param {any} config Any configuration for the item use.\n   * @param {any} options Any options for the item use.\n   * @returns {boolean} `true` to allow the item use, `false` to prevent it.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.actorPreUseItem', (item, config, options) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static tidy5eSheetsActorPreUseItem(\n    item: Item5e,\n    config: any,\n    options: any\n  ): boolean {\n    return Hooks.call('tidy5e-sheet.actorPreUseItem', item, config, options);\n  }\n\n  /**\n   * A user has hovered off an item, typically from an item table row.\n   * @param {Event} event The triggering mouse event.\n   * @param {any} item The item which is no longer hovered.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.itemHoverOff', (event, item) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsItemHoverOff(event: Event, item: any) {\n    Hooks.callAll('tidy5e-sheet.itemHoverOff', event, item);\n  }\n\n  /**\n   * A user has hovered over an item, typically on an item table row.\n   * @param {Event} event The triggering mouse event.\n   * @param {any} item The hovered-over item.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.itemHoverOn', (event, item) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsItemHoverOn(event: Event, item: any) {\n    Hooks.callAll('tidy5e-sheet.itemHoverOn', event, item);\n  }\n\n  /**\n   * Sheet item/effect sections are about to be configured. Use this hook to inject additional items, sections, etc., or to adjust context data.\n   * @param {any} app The sheet application instance.\n   * @param {HTMLElement} element The sheet HTML element.\n   * @param {CharacterSheetContext | NpcSheetContext | ContainerSheetContext} data The data context from `getData()`.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.preConfigureSections', (app, element, data) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsPreConfigureSections(\n    app: any,\n    element: HTMLElement,\n    data: CharacterSheetContext | NpcSheetContext | ContainerSheetContext\n  ) {\n    Hooks.callAll('tidy5e-sheet.preConfigureSections', app, element, data);\n  }\n\n  /**\n   * An active effect is about to be created for an owning document.\n   * This was initiated specifically through Tidy 5e Sheets,\n   * whether directly by the user, or indirectly through some user interaction.\n   * @param {any} owner The owning document instance which will receive the created effect.\n   * @param {object} createData The data used to create it.\n   * @param {string} userId The user who initiated the creation.\n   * @returns {boolean} `true` to allow the effect creation, `false` to prevent it.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.preCreateActiveEffect', (owner, createData, userId) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static tidy5eSheetsPreCreateActiveEffect(\n    owner: any,\n    createData: object,\n    userId: string\n  ): boolean {\n    return Hooks.call(\n      'tidy5e-sheet.preCreateActiveEffect',\n      owner,\n      createData,\n      userId\n    );\n  }\n\n  /**\n   * An item is about to be created for an owning document.\n   * This was initiated specifically through Tidy 5e Sheets,\n   * whether directly by the user, or indirectly through some user interaction.\n   * @param {any} owner The owning document instance which will receive the created item.\n   * @param {object} createData The data used to create it.\n   * @param {string} userId The user who initiated the creation.\n   * @returns {boolean} `true` to allow the item creation, `false` to prevent it.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.preCreateItem', (owner, createData, userId) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static tidy5eSheetsPreCreateItem(\n    owner: any,\n    createData: object,\n    userId: string\n  ): boolean {\n    return Hooks.call('tidy5e-sheet.preCreateItem', owner, createData, userId);\n  }\n\n  /**\n   * The portrait picker is about to open.\n   * @param {ActorSheetContext} context The actor sheet data from `getData()`.\n   * @param {MouseEvent & { currentTarget: EventTarget & HTMLElement }} event The triggering event.\n   * @returns {boolean} `true` to allow the picker to open, `false` to prevent it.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.preOpenActorPortraitFilePicker', (context, event) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static tidy5eSheetsPreOpenActorPortraitFilePicker(\n    context: ActorSheetContext,\n    event: MouseEvent & { currentTarget: EventTarget & HTMLElement }\n  ): boolean {\n    return Hooks.call(\n      'tidy5e-sheet.preOpenActorPortraitFilePicker',\n      context,\n      event\n    );\n  }\n\n  /**\n   * The floating context menu's positioning is being determined.\n   * @param {ContextMenuPositionInfo} positionInfo Context menu positioning info, used for determining where to put the context menu.\n   * @returns {boolean} `true` to allow the menu to show, `false` to prevent the default menu from showing.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.prepareFloatingContextMenuPosition', (positionInfo) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static tidy5eSheetsPrepareFloatingContextMenuPosition(\n    positionInfo: ContextMenuPositionInfo\n  ): boolean {\n    return Hooks.call(\n      'tidy5e-sheet.prepareFloatingContextMenuPosition',\n      positionInfo\n    );\n  }\n\n  /**\n   * Resources have been prepared. Use this hook to adjust them and/or add new resources.\n   * @param {TidyResource[]} tidyResources The resources that have been prepared for the sheet.\n   * @param {Actor5e} actor The affected actor.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.prepareResources', (tidyResources, actor) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsPrepareResources(\n    tidyResources: TidyResource[],\n    actor: Actor5e\n  ) {\n    Hooks.callAll('tidy5e-sheet.prepareResources', tidyResources, actor);\n  }\n\n  /**\n   * A tab is about to be selected.\n   * @param {any} app The sheet application instance.\n   * @param {HTMLElement} element The sheet's HTML element.\n   * @param {object} data The current tab ID before selecting the new tab, and the new tab ID to be selected.\n   * @returns {boolean} `false` to cancel tabbing.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.preSelectTab', (app, element, data) => {\n   *   return true;\n   * });\n   * ```\n   */\n  static tidy5eSheetsPreSelectTab(\n    app: any,\n    element: HTMLElement,\n    data: { currentTab: any; newTab: string }\n  ): boolean {\n    return Hooks.call('tidy5e-sheet.preSelectTab', app, element, data);\n  }\n\n  /**\n   * Tidy 5e Sheets is ready to be used and customized.\n   * @param {Tidy5eSheetsApi} api The Tidy 5e Sheets API, used for customizing and registering content with Tidy 5e Sheets.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.ready', (api) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsReady(api: Tidy5eSheetsApi): void {\n    Hooks.callAll('tidy5e-sheet.ready', api);\n  }\n\n  /**\n   * The actor sheet has rendered all content and registered custom content. Is called on partial and full renders.\n   * @param {any} app The sheet application instance.\n   * @param {HTMLElement} element The sheet's HTML element.\n   * @param {CharacterSheetContext | NpcSheetContext | VehicleSheetContext} data The data context from `getData()`.\n   * @param {boolean} forced `true` when performing a full re-render; `false` when performing a partial re-render.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.renderActorSheet', (app, element, data, forced) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsRenderActorSheet(\n    app: any,\n    element: HTMLElement,\n    data: CharacterSheetContext | NpcSheetContext | VehicleSheetContext,\n    forced: boolean\n  ) {\n    Hooks.callAll('tidy5e-sheet.renderActorSheet', app, element, data, forced);\n  }\n\n  /**\n   * The item sheet has rendered all content and registered custom content. Is called on partial and full renders.\n   * @param {any} app The target item sheet application class instance.\n   * @param {HTMLElement} element The item sheet's HTML element.\n   * @param {ContainerSheetContext | ItemSheetContext} data The data context from `getData()`.\n   * @param {boolean} forced `true` when performing a full re-render; `false` when performing a partial re-render.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.renderItemSheet', (app, element, data, forced) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsRenderItemSheet(\n    app: any,\n    element: HTMLElement,\n    data: ContainerSheetContext | ItemSheetContext,\n    forced: boolean\n  ) {\n    Hooks.callAll('tidy5e-sheet.renderItemSheet', app, element, data, forced);\n  }\n\n  /**\n   * A tab has been selected on the sheet.\n   * @param {any} app The sheet application instance.\n   * @param {HTMLElement} element The sheet's HTML element.\n   * @param {string} newTabId The selected tab ID.\n   *\n   * @example\n   * ```js\n   * Hooks.on('tidy5e-sheet.selectTab', (app, element, newTabId) => {\n   *   // Your code here\n   * });\n   * ```\n   */\n  static tidy5eSheetsSelectTab(\n    app: any,\n    element: HTMLElement,\n    newTabId: string\n  ) {\n    Hooks.callAll('tidy5e-sheet.selectTab', app, element, newTabId);\n  }\n}\n","<script lang=\"ts\">\n  import { type Actor5e, type OnItemToggledFn } from 'src/types/types';\n  import ItemSummary from '../ItemSummary.svelte';\n  import { warn } from 'src/utils/logging';\n  import { createEventDispatcher, getContext, onMount } from 'svelte';\n  import type {\n    ItemCardStore,\n    ExpandedItemData,\n    ExpandedItemIdToLocationsMap,\n    ActiveEffect5e,\n    ActiveEffectContext,\n  } from 'src/types/types';\n  import type { Writable } from 'svelte/store';\n  import type {\n    Item5e,\n    ItemCardContentComponent,\n    ItemChatData,\n  } from 'src/types/item.types';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n  import { TidyHooks } from 'src/foundry/TidyHooks';\n\n  export let item: Item5e | null = null;\n  export let effect: ActiveEffect5e | ActiveEffectContext | null = null;\n  export let favoriteId: string | null = null;\n  export let contextMenu: { type: string; uuid: string } | null = null;\n  export let cssClass: string = '';\n  export let itemCardContentTemplate: ItemCardContentComponent | null = null;\n  export let hidden: boolean = false;\n  export let getDragData: (() => any) | null = null;\n\n  $: draggable = item ?? effect;\n\n  const expandedItemData = getContext<ExpandedItemData>(\n    CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEM_DATA,\n  );\n  const context = getContext<Writable<unknown>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  const expandedItems = getContext<ExpandedItemIdToLocationsMap>(\n    CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEMS,\n  );\n  const onItemToggled = getContext<OnItemToggledFn>(\n    CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TOGGLED,\n  );\n  const dispatcher = createEventDispatcher<{ mousedown: MouseEvent }>();\n  const location = getContext<string>(CONSTANTS.SVELTE_CONTEXT.LOCATION);\n\n  let card: Writable<ItemCardStore> | undefined = getContext<\n    Writable<ItemCardStore>\n  >(CONSTANTS.SVELTE_CONTEXT.CARD);\n  let showSummary = false;\n  let chatData: ItemChatData | undefined;\n  let useTransition: boolean = false;\n\n  async function toggleSummary(actor: Actor5e) {\n    if (!item) {\n      warn('Unable to show summary. No item was provided.');\n      showSummary = false;\n      return;\n    }\n\n    chatData ??= await item.getChatData({ secrets: actor.isOwner });\n    showSummary = !showSummary;\n    onItemToggled?.(item.id, showSummary, location);\n  }\n\n  async function onMouseEnter(event: Event) {\n    TidyHooks.tidy5eSheetsItemHoverOn(event, item);\n\n    if (!item?.getChatData || !$settingStore.itemCardsForAllItems) {\n      return;\n    }\n\n    card?.update((card) => {\n      card.item = item;\n      card.itemCardContentTemplate = itemCardContentTemplate;\n      return card;\n    });\n  }\n\n  async function onMouseLeave(event: Event) {\n    TidyHooks.tidy5eSheetsItemHoverOff(event, item);\n\n    card?.update((card) => {\n      card.item = null;\n      card.itemCardContentTemplate = null;\n      return card;\n    });\n  }\n\n  function handleDragStart(event: DragEvent) {\n    if (!draggable) {\n      return;\n    }\n\n    // Don't show cards while dragging\n    onMouseLeave(event);\n\n    card?.update((card) => {\n      return card;\n    });\n\n    const dragData = getDragData?.() ?? draggable.toDragData?.();\n    if (dragData) {\n      event.dataTransfer?.setData('text/plain', JSON.stringify(dragData));\n    }\n  }\n\n  function restoreItemSummaryIfExpanded() {\n    if (!item) {\n      useTransition = true;\n      return;\n    }\n\n    useTransition = false;\n\n    const isExpandedAtThisLocation = expandedItems?.get(item.id)?.has(location);\n\n    if (isExpandedAtThisLocation) {\n      chatData = expandedItemData.get(item.id);\n      showSummary = true;\n    }\n\n    setTimeout(() => {\n      useTransition = true;\n    });\n  }\n\n  onMount(() => {\n    let first = true;\n\n    const subscription = context?.subscribe(async (c: any) => {\n      if (first) {\n        first = false;\n        restoreItemSummaryIfExpanded();\n        return;\n      }\n\n      if (item && showSummary) {\n        item\n          .getChatData({ secrets: item.actor.isOwner })\n          .then((data: ItemChatData) => {\n            chatData = data;\n          });\n      } else if (item && !showSummary && chatData) {\n        // Reset chat data for non-expanded, hydrated chatData\n        // so it rehydrates on next open\n        chatData = undefined;\n      }\n    });\n\n    return subscription;\n  });\n</script>\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<div\n  class=\"item-table-row-container\"\n  class:hidden\n  aria-hidden={hidden}\n  data-context-menu={contextMenu?.type}\n  data-context-menu-document-uuid={contextMenu?.uuid}\n  data-effect-id={effect?.id}\n  data-parent-id={effect?.parentId ?? effect?.parent?.id}\n  on:mousedown={(event) => dispatcher('mousedown', event)}\n  on:mouseenter={onMouseEnter}\n  on:mouseleave={onMouseLeave}\n  on:dragstart={handleDragStart}\n  draggable={!!draggable}\n  data-item-id={item?.id}\n  data-tidy-table-row\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_TABLE_ROW}\n  data-tidy-item-type={item?.type ?? 'unknown'}\n  data-favorite-id={favoriteId ?? null}\n>\n  <div class=\"item-table-row {cssClass ?? ''}\">\n    <slot {toggleSummary} />\n  </div>\n  {#if showSummary && chatData}\n    <ItemSummary {chatData} {useTransition} {item} />\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .item-table-row-container {\n    position: relative;\n    border-radius: 0.3125rem;\n    margin: 0.125rem 0 0.125rem 0.5rem;\n    background: var(--t5e-faintest-color);\n\n    &:global(.context) {\n      box-shadow: 0 0 0.1875rem 0.0625rem var(--t5e-primary-accent-color) inset;\n    }\n\n    .item-table-row {\n      display: flex;\n      flex-direction: row;\n      flex-wrap: wrap;\n      border-radius: 0.3125rem;\n\n      // TODO: Eliminate the CSS class injection; set the background color CSS variable via an inline style with a color taken from a function, rather than using the classes. Put the variable assignment outside of the item table row so that scripters can set the CSS variable on the row itself.\n      --t5e-item-table-row-background: transparent;\n      &.prepared {\n        --t5e-item-table-row-background: var(--t5e-prepared-background);\n      }\n\n      &.always-prepared {\n        --t5e-item-table-row-background: var(--t5e-alwaysprepared-background);\n      }\n\n      &.pact {\n        --t5e-item-table-row-background: var(--t5e-pact-background);\n      }\n\n      &.at-will {\n        --t5e-item-table-row-background: var(--t5e-atwill-background);\n      }\n\n      &.ritual-only {\n        --t5e-item-table-row-background: var(--t5e-ritual-only-background);\n      }\n\n      &.innate {\n        --t5e-item-table-row-background: var(--t5e-innate-background);\n      }\n\n      &.equipped {\n        --t5e-item-table-row-background: var(--t5e-equipped-background);\n      }\n\n      &.magic-item {\n        box-shadow: 0 0 0 0.0625rem var(--t5e-magic-accent-color) inset;\n      }\n\n      & {\n        background: linear-gradient(\n          to right,\n          var(--t5e-item-table-row-background),\n          transparent 120%\n        );\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import { type Actor5e } from 'src/types/types';\n\n  export let dataset: any;\n  export let actor: Actor5e;\n  export let create: (() => void) | undefined = defaultCreateFunction;\n\n  const localize = FoundryAdapter.localize;\n\n  function defaultCreateFunction() {\n    return FoundryAdapter.createItem(dataset, actor);\n  }\n</script>\n\n<button\n  type=\"button\"\n  class=\"item-list-footer-button\"\n  on:click={create}\n  title={localize('DND5E.FeatureAdd')}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_CREATE_COMMAND}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n>\n  <i class=\"fas fa-plus-circle\" />\n  {localize('DND5E.Add')}\n</button>\n","import type { ActorItemSectionFooterCommand } from 'src/api/api.types';\nimport type {\n  RegisteredActorItemSectionFooterCommand,\n  RegisteredActorItemSectionFooterCommandEnabledParams,\n} from './types';\nimport type { Actor5e } from 'src/types/types';\nimport { error } from 'src/utils/logging';\n\nexport class ActorItemRuntime {\n  private static _actorItemSectionCommands: RegisteredActorItemSectionFooterCommand[] =\n    [];\n\n  static registerActorItemSectionCommands(\n    commands: ActorItemSectionFooterCommand[]\n  ) {\n    ActorItemRuntime._actorItemSectionCommands.push(...commands);\n  }\n\n  static getActorItemSectionCommands({\n    section,\n    actor,\n  }: RegisteredActorItemSectionFooterCommandEnabledParams): RegisteredActorItemSectionFooterCommand[] {\n    return [...ActorItemRuntime._actorItemSectionCommands].filter((c) => {\n      try {\n        return section && (c.enabled?.({ section, actor }) ?? true);\n      } catch (e) {\n        error(\n          'Failed to check if actor item section command is enabled',\n          false,\n          { error: e, actor, section }\n        );\n        return false;\n      }\n    });\n  }\n}\n","<script lang=\"ts\" generics=\"TSection extends TidySectionBase\">\n  import { TidyHooks } from 'src/foundry/TidyHooks';\n  import type {\n    Actor5e,\n    CustomSectionOptions,\n    TidySectionBase,\n  } from 'src/types/types';\n  import ItemCreateButton from '../item-list/ItemCreateButton.svelte';\n  import { ActorItemRuntime } from 'src/runtime/ActorItemRuntime';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n\n  export let section: TSection;\n  export let actor: Actor5e;\n  export let canCreate = true;\n  /**\n   * Override for the underlying create button's `create()` function.\n   */\n  export let create: (() => void) | undefined = undefined;\n  export let isItem: boolean;\n\n  let customCommands = isItem\n    ? ActorItemRuntime.getActorItemSectionCommands({ actor, section })\n    : [];\n\n  function createForCustom(custom: CustomSectionOptions) {\n    if (!custom.creationItemTypes.length) {\n      return;\n    }\n\n    if (custom.creationItemTypes.length === 1) {\n      FoundryAdapter.createItem(\n        { type: custom.creationItemTypes[0], ...section.dataset },\n        actor,\n      );\n    } else {\n      const createData = { ...section.dataset };\n\n      if (\n        !TidyHooks.tidy5eSheetsPreCreateItem(actor, createData, game.user.id)\n      ) {\n        return;\n      }\n\n      Item.implementation.createDialog(createData, {\n        parent: actor,\n        pack: actor.pack,\n        types: custom.creationItemTypes,\n      });\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<footer class=\"item-table-footer-row\">\n  <!-- TODO: Handle custom section item creation -->\n  {#if canCreate}\n    {@const custom = section.custom}\n    {#if custom}\n      <ItemCreateButton\n        dataset={section.dataset}\n        {actor}\n        create={() => createForCustom(custom)}\n      />\n    {:else}\n      <ItemCreateButton dataset={section.dataset} {actor} {create} />\n    {/if}\n  {/if}\n  {#each customCommands as command}\n    <button\n      type=\"button\"\n      class=\"item-list-footer-button\"\n      on:click={(ev) => command.execute?.({ section, event: ev, actor: actor })}\n      title={localize(command.tooltip ?? '')}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      {#if (command.iconClass ?? '') !== ''}\n        <i class={command.iconClass} />\n      {/if}\n      {localize(command.label ?? '')}\n    </button>\n  {/each}\n</footer>\n\n<style lang=\"scss\">\n  .item-table-footer-row {\n    display: flex;\n    justify-content: flex-end;\n    flex: 1;\n    margin-left: 0.5rem;\n    border-radius: 0 0 0.3125rem 0.3125rem;\n  }\n</style>\n","<script lang=\"ts\">\n  export let primary: boolean = false;\n  export let baseWidth: string | null = null;\n  export let title: string | null = null;\n  export let cssClass: string | null = '';\n</script>\n\n<div\n  class=\"item-table-column {cssClass}\"\n  class:primary\n  style:flex-basis={baseWidth}\n  {title}\n>\n  <slot />\n</div>\n\n<style lang=\"scss\">\n  .item-table-column {\n    color: var(--t5e-tertiary-color);\n    font-family: var(--t5e-body-font-family);\n    font-size: 0.75rem;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n\n    :global(i) {\n      font-size: 0.625rem;\n      color: var(--t5e-light-color);\n    }\n\n    &.primary {\n      color: var(--t5e-primary-font-color);\n      font-weight: 700;\n      font-size: 0.75rem;\n      flex: 1;\n      justify-content: flex-start;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { setContext } from 'svelte';\n  import { writable } from 'svelte/store';\n\n  export let baseWidth: string | undefined = undefined;\n  export let primary: boolean = false;\n  export let cssClass: string = '';\n  export let title: string | undefined = undefined;\n\n  const isHovering = writable<boolean>(false);\n  setContext(CONSTANTS.CONTEXT_GRID_CELL_HOVER, isHovering);\n\n  function mouseEnter(ev: MouseEvent) {\n    isHovering.set(true);\n  }\n\n  function mouseLeave(ev: MouseEvent) {\n    isHovering.set(false);\n  }\n</script>\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<div\n  class=\"item-table-cell {cssClass}\"\n  class:primary\n  style:flex-basis={baseWidth}\n  {title}\n  on:mouseenter={mouseEnter}\n  on:mouseleave={mouseLeave}\n  {...$$props.attributes}\n>\n  <slot />\n</div>\n\n<style lang=\"scss\">\n  .item-table-cell {\n    flex-grow: 0;\n    flex-shrink: 0;\n    font-size: 0.75rem;\n    font-family: var(--t5e-body-font-family);\n    min-height: 1.5rem;\n    color: var(--t5e-secondary-color);\n    overflow: hidden;\n    display: flex;\n    flex-direction: row;\n    gap: 0.25rem;\n    align-items: center;\n    justify-content: center;\n\n    &.primary {\n      flex: 1 1 0.0625rem;\n      align-items: stretch; // e.g., provide plenty of room to tap / click the primary item cell to show summary.\n      justify-content: initial;\n      color: var(--t5e-primary-color);\n    }\n\n    // &:hover {\n    //   :global(.item-use-button-image) {\n    //     background-image: none;\n    //   }\n    //   :global(.item-use-button i) {\n    //     display: initial;\n    //   }\n    // }\n\n    &:not(.primary) {\n      border-left: 0.0625rem solid var(--t5e-faintest-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let item: any;\n  export let imgUrlOverride: string | undefined = undefined;\n  export let disabled: boolean = false;\n  export let showDiceIconOnHover: boolean = true;\n\n  const showRoll = getContext<Readable<boolean>>(\n    CONSTANTS.CONTEXT_GRID_CELL_HOVER,\n  );\n\n  let buttonIsFocused = false;\n</script>\n\n<div\n  class=\"item-image\"\n  class:item-use-button-has-focus={buttonIsFocused}\n  style=\"background-image: url('{imgUrlOverride ?? item.img}')\"\n  class:show-roll={!disabled && $showRoll}\n  class:conceal={item.system.identified === false}\n>\n  <div\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    class=\"unidentified-glyph no-transition\"\n    class:conceal={item.system.identified === false}\n    class:hidden={$showRoll}\n  >\n    <i class=\"fas fa-question\" />\n  </div>\n  {#if !disabled}\n    <button\n      type=\"button\"\n      class=\"item-use-button icon-button\"\n      on:click={(event) => FoundryAdapter.actorTryUseItem(item, {}, { event })}\n      on:contextmenu={(event) =>\n        FoundryAdapter.onActorItemButtonContextMenu(item, { event })}\n      on:focusin={() => (buttonIsFocused = true)}\n      on:focusout={() => (buttonIsFocused = false)}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_USE_COMMAND}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class=\"fa fa-dice-d20\" class:invisible={!showDiceIconOnHover} />\n    </button>\n  {/if}\n  <slot name=\"after-roll-button\" />\n</div>\n\n<style lang=\"scss\">\n  .item-image {\n    position: relative;\n    align-self: center;\n    flex: 0 0 var(--t5e-image-size-override, 1.5rem);\n    height: var(--t5e-image-size-override, 1.5rem);\n    background-size: cover;\n    background-position: 50% 0;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 0.3125rem 0 0 0.3125rem;\n    gap: 0.25rem;\n\n    .item-use-button {\n      opacity: 0;\n\n      i {\n        color: var(--t5e-tertiary-color);\n        font-size: 1.125rem;\n\n        &.invisible {\n          visibility: hidden;\n        }\n      }\n\n      &:is(:hover, :focus-visible) i {\n        color: var(--t5e-primary-font-color);\n      }\n    }\n\n    &.show-roll,\n    &.item-use-button-has-focus {\n      background-image: none !important; // TODO: Figure out a way to avoid !important\n\n      .item-use-button {\n        opacity: 1;\n      }\n    }\n\n    &.conceal {\n      filter: grayscale(100%);\n    }\n\n    .unidentified-glyph {\n      font-size: calc(var(--t5e-image-size-override, 1.5rem) - 0.75rem);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<span class=\"ae-marker\" title={localize('TIDY5E.ActiveEffectsMarkerTitle')}>\n  Æ\n</span>\n\n<style lang=\"scss\">\n  .ae-marker {\n    display: inline-block;\n    padding: 0.0625rem 0.1875rem 0 0.1875rem;\n    font-size: 0.75rem;\n    line-height: 0.9375rem;\n    font-weight: 600;\n    background: var(--t5e-warning-accent-color);\n    color: var(--t5e-warning-accent-contrast-color);\n    border-radius: 0.1875rem;\n    flex: 0;\n    align-self: center;\n    margin: 0 0.25rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { settingStore } from 'src/settings/settings';\n  import type { Item5e } from 'src/types/item.types';\n  import { createEventDispatcher } from 'svelte';\n  import ActiveEffectsMarker from './ActiveEffectsMarker.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let cssClass: string = '';\n  export let hasChildren = true;\n  export let item: Item5e;\n  export let useActiveEffectsMarker: boolean = true;\n\n  $: hasActiveEffects = !!item.effects?.size;\n\n  const dispatcher = createEventDispatcher<{ toggle: Event }>();\n</script>\n\n<!-- TODO: Make this a button -->\n<span\n  role=\"button\"\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  on:click={(ev) => dispatcher('toggle', ev)}\n  class=\"item-name truncate {cssClass}\"\n  class:has-children={hasChildren}\n  on:keypress={(ev) => ev.key === 'Enter' && dispatcher('toggle', ev)}\n  class:italic={item.system.identified === false}\n>\n  <slot />\n</span>\n{#if useActiveEffectsMarker && $settingStore.showActiveEffectsMarker && hasActiveEffects}\n  <ActiveEffectsMarker />\n{/if}\n\n<style lang=\"scss\">\n  .item-name {\n    flex: 1 1 0.0625rem;\n    min-width: 0;\n\n    &:not(.has-children) {\n      align-self: center;\n    }\n    &.has-children {\n      display: flex;\n      align-items: center;\n    }\n\n    &:focus-visible {\n      outline: 0.0625rem solid var(--t5e-primary-accent-color);\n    }\n  }\n</style>\n","export function isRealNumber(inNumber: number | undefined | null): boolean {\n  return (\n    inNumber !== undefined &&\n    inNumber !== null &&\n    !isNaN(inNumber) &&\n    typeof inNumber === 'number' &&\n    isFinite(inNumber)\n  );\n}\n\nexport function clamp<T extends number>(num: T, min: T, max: T) {\n  return Math.min(Math.max(num, min), max);\n}\n\nexport function getPercentage(\n  value: number | null | undefined,\n  max: number | null | undefined\n) {\n  max ??= 0;\n  value ??= 0;\n\n  if (max <= 0) {\n    return 0;\n  }\n\n  const percentage = Math.ceil((value / max) * 100);\n\n  return clamp(percentage, 0, 100);\n}\n\nexport function toNumber(str: string) {\n  if (str.includes('/')) {\n    const pieces = str.split('/');\n    return parseInt(pieces[0]) / parseInt(pieces[1]);\n  }\n  return +str;\n}\n\nexport function isLessThanOneIsOne(inNumber: number) {\n  return inNumber < 1 ? 1 : inNumber;\n}\n","<script lang=\"ts\">\n  import { clamp } from 'src/utils/numbers';\n\n  export let item: any;\n\n  function onUsesChanged(\n    event: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    },\n    item: any\n  ) {\n    const uses = clamp(\n      0,\n      parseInt(event.currentTarget.value),\n      item.system.uses.max\n    );\n    event.currentTarget.value = uses.toString();\n    return item.update({ 'system.uses.value': uses });\n  }\n\n  function onUsesMaxChanged(\n    event: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    },\n    item: any\n  ) {\n    let uses = parseInt(event.currentTarget.value ?? item.system.uses.max ?? 0);\n\n    if (isNaN(uses)) {\n      uses = 0;\n    }\n\n    return item.update({ 'system.uses.max': uses });\n  }\n</script>\n\n<div class=\"item-uses\">\n  <input\n    class=\"uses-value\"\n    type=\"text\"\n    value={item.system.uses.value}\n    on:change|stopPropagation|preventDefault={(event) =>\n      onUsesChanged(event, item)}\n    disabled={!item.isOwner}\n    on:focus={(ev) => ev.currentTarget.select()}\n    data-tidy-field=\"system.uses.value\"\n  />\n  /\n  <input\n    class=\"uses-max\"\n    type=\"text\"\n    value={item.system.uses.max}\n    on:change|stopPropagation|preventDefault={(event) =>\n      onUsesMaxChanged(event, item)}\n    disabled={!item.isOwner}\n    on:focus={(ev) => ev.currentTarget.select()}\n    data-tidy-field=\"system.uses.max\"\n  />\n</div>\n\n<style lang=\"scss\">\n  .item-uses {\n    justify-self: center;\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    input {\n      width: 50%;\n      padding: 0 0.125rem 0 0;\n      color: var(--t5e-secondary-color);\n      line-height: 1;\n      height: 100%;\n\n      &.uses-value {\n        text-align: right;\n      }\n\n      &.uses-max {\n        text-align: left;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n\n  export let item: any;\n\n  function onAddUses() {\n    let data: Record<string, unknown> = {};\n    data['system.uses.value'] = 1;\n    data['system.uses.max'] = '1';\n    data['system.uses.per'] = CONSTANTS.LIMITED_USES_PER_CHARGES;\n\n    if (item.system.activation?.type === null) {\n      data['system.activation.type'] = CONSTANTS.ACTIVATION_COST_ACTION;\n    }\n\n    item.update(data);\n  }\n</script>\n\n<button\n  type=\"button\"\n  class=\"item-add-uses item-list-button\"\n  on:click={() => onAddUses()}\n  disabled={!item.isOwner}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n>\n  Add\n</button>\n\n<style lang=\"scss\">\n  .item-add-uses {\n    display: block;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &:hover {\n      opacity: 1;\n      color: var(--t5e-secondary-color);\n    }\n  }\n</style>\n","<!--\n @component\n A wrapper for the system-specific `<dnd5e-icon />` element. \n At the time of this writing, the component does not change images when the `src`\n attribute is changed, so re-rendering is required each time the `src` changes.\n -->\n\n<script lang=\"ts\">\n  export let src: string;\n</script>\n\n{#key src}\n  <dnd5e-icon {src} {...$$props} />\n{/key}\n","<script lang=\"ts\">\n  import Dnd5eIcon from 'src/components/icon/Dnd5eIcon.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  \n  export let iconCssClass: string | undefined = undefined;\n  export let iconSrc: string | undefined = undefined;\n  export let title: string | undefined = undefined;\n  export let active = true;\n  export let onclick:\n    | ((\n        ev: MouseEvent & {\n          currentTarget: EventTarget & HTMLButtonElement;\n        },\n      ) => any)\n    | undefined = undefined;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<button\n  type=\"button\"\n  class=\"item-list-button\"\n  class:inactive={!active}\n  on:click={onclick}\n  title={title !== undefined ? localize(title) : ''}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n>\n  {#if iconCssClass}\n    <i class={iconCssClass} />\n  {/if}\n  {#if iconSrc}\n    <Dnd5eIcon src={iconSrc} />\n  {/if}\n</button>\n\n<style lang=\"scss\">\n  .item-list-button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    align-self: stretch;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemControl from './ItemControl.svelte';\n\n  type OnDelete = () => boolean;\n\n  export let item: any;\n  export let onDelete: OnDelete = () => true;\n  export let deleteFn: Function = () =>\n    FoundryAdapter.onActorItemDelete(item.actor, item);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemControl\n  iconCssClass=\"fas fa-trash fa-fw\"\n  onclick={() => onDelete() && deleteFn()}\n  title={localize('DND5E.ItemDelete')}\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemControl from './ItemControl.svelte';\n\n  export let item: any;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemControl\n  iconCssClass=\"fas fa-edit fa-fw\"\n  title={localize('DND5E.ItemEdit')}\n  onclick={() => item.sheet.render(true)}\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemControl from './ItemControl.svelte';\n\n  export let ctx: any;\n  export let item: any;\n\n  function toggleEquipped() {\n    const value = FoundryAdapter.getProperty(item, 'system.equipped');\n\n    item.update({\n      'system.equipped': !value,\n    });\n  }\n</script>\n\n<ItemControl\n  title={ctx?.toggleTitle}\n  iconCssClass=\"fas fa-user-alt\"\n  active={item.system.equipped}\n  onclick={toggleEquipped}\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemControl from './ItemControl.svelte';\n  import type { Item5e } from 'src/types/item.types';\n\n  export let item: Item5e;\n  export let ctx: any;\n\n  $: isAttuned = item.system.attuned;\n\n  function toggleAttuned() {\n    const actor = item.actor;\n    if (!actor) {\n      return;\n    }\n\n    const currentAttunementCount = actor.system.attributes.attunement.value;\n\n    if (item.system.attuned) {\n      item.update({ 'system.attuned': false });\n    } else {\n      if (currentAttunementCount >= actor.system.attributes.attunement.max) {\n        ui.notifications.warn(\n          `${FoundryAdapter.localize('TIDY5E.AttunementWarning', {\n            number: currentAttunementCount,\n          })}`,\n        );\n      } else {\n        item.update({ 'system.attuned': true });\n      }\n    }\n  }\n</script>\n\n<ItemControl\n  title={ctx?.attunement?.title}\n  iconCssClass=\"fas fa-sun {ctx?.attunement?.cls}\"\n  active={isAttuned}\n  onclick={toggleAttuned}\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"is-favorite\" title={localize('TIDY5E.Favorite')}>\n  <i class=\"fas fa-bookmark icon-fav fa-fw\" />\n</div>\n\n<style lang=\"scss\">\n  .is-favorite {\n    font-size: 0.75rem;\n    color: var(--t5e-secondary-color);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n</style>\n","<script lang=\"ts\">\n  import type { Item5e } from 'src/types/item.types';\n  import ItemControl from './ItemControl.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let item: Item5e;\n\n  $: active = FoundryAdapter.isItemFavorited(item);\n  $: title = FoundryAdapter.localize(\n    active ? 'TIDY5E.RemoveFavorite' : 'TIDY5E.AddFavorite',\n  );\n</script>\n\n<ItemControl\n  iconCssClass=\"fas fa-bookmark\"\n  {active}\n  {title}\n  onclick={() => FoundryAdapter.toggleFavoriteItem(item)}\n/>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { ContainerSheetContext, Item5e } from 'src/types/item.types';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let item: Item5e;\n\n  let context = getContext<Readable<ActorSheetContext | ContainerSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: actor = $context.actor ?? $context.item.actor;\n\n  let ammos: { text: string; value: string | null; ammo: Item5e | null }[];\n  $: ammos = [\n    {\n      text: '',\n      value: null,\n      ammo: null,\n    },\n    ...(actor?.items ?? [])\n      .filter(\n        (item: any) =>\n          item.system.type?.value === 'ammo' &&\n          (!$settingStore.showEquippedAmmoOnly || item.system.equipped),\n      )\n      .map((item: any) => ({\n        text: `${item.name} (${item.system.quantity})`,\n        value: item.id,\n        ammo: item,\n      })),\n  ];\n</script>\n\n<select\n  on:click|stopPropagation\n  on:change={(event) =>\n    FoundryAdapter.onAmmoChange(item, event.currentTarget.value)}\n  disabled={!$context.editable}\n>\n  {#each ammos as ammo}\n    <option\n      value={ammo.value}\n      selected={item.system.consume?.target === ammo.value}>{ammo.text}</option\n    >\n  {/each}\n</select>\n\n<style lang=\"scss\"></style>\n","export class ActionListRuntime {\n  private static _activationTypeMappings: Record<string, string> = {};\n\n  static addActivationTypeMappings(mappings: Record<string, string>) {\n    ActionListRuntime._activationTypeMappings = foundry.utils.mergeObject(\n      ActionListRuntime._activationTypeMappings,\n      mappings\n    );\n  }\n\n  static getActivationTypeMappings() {\n    return { ...ActionListRuntime._activationTypeMappings };\n  }\n}\n","import type { Item5e } from 'src/types/item.types';\nimport { debug, error, warn } from './logging';\nimport type {\n  Actor5e,\n  MaxPreparedSpellFormula,\n  SpellCalculations,\n} from 'src/types/types';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { isNil } from './data';\n\nexport function scaleCantripDamageFormula(spell: Item5e, formula: string) {\n  try {\n    const scaledFormula = spell._scaleCantripDamage(\n      [formula],\n      spell.system.scaling.formula,\n      spell.actor.type === 'character'\n        ? spell.actor.system.details.level ?? 0\n        : spell.system.preparation.mode === 'innate'\n        ? Math.ceil(spell.actor.system.details.cr ?? 0)\n        : spell.actor.system.details.spellLevel ?? 0,\n      spell.getRollData()\n    );\n\n    return scaledFormula;\n  } catch (e) {\n    error(\n      'An error occurred while scaling cantrip damage. Returning original formula.',\n      false,\n      e\n    );\n    return formula;\n  }\n}\n\nexport function simplifyFormula(\n  formula: string,\n  removeFlavor: boolean = false\n): string {\n  try {\n    if (removeFlavor) {\n      formula = formula\n        ?.replace(RollTerm.FLAVOR_REGEXP, '')\n        ?.replace(RollTerm.FLAVOR_REGEXP_STRING, '')\n        ?.trim();\n    }\n\n    if (formula?.trim() === '') {\n      return '';\n    }\n\n    const roll = Roll.create(formula);\n\n    const simplifiedTerms = roll.terms.map((t: any) =>\n      t.isIntermediate\n        ? new NumericTerm({\n            number: FoundryAdapter.isFoundryV12OrHigher()\n              ? t.evaluateSync().total\n              : t.evaluate({ async: false }).total,\n            options: t.options,\n          })\n        : t\n    );\n\n    let simplifiedFormula = Roll.fromTerms(simplifiedTerms).formula;\n\n    return simplifiedFormula;\n  } catch (e) {\n    error('Unable to simplify formula due to an error.', false, e);\n    return formula;\n  }\n}\n\nexport function getMaxPreparedSpellsSampleFormulas(): MaxPreparedSpellFormula[] {\n  return [\n    {\n      label: 'TIDY5E.Class.Artificer',\n      value: '@abilities.int.mod + floor(@classes.artificer.levels / 2)',\n    },\n    {\n      label: 'TIDY5E.Class.Bard',\n      value:\n        'max(@classes.bard.levels + 3 - floor(@classes.bard.levels/20), (min(floor(@classes.bard.levels/10),1) * (14 + min(floor(@classes.bard.levels/11),1) + min(floor(@classes.bard.levels/13),1) + (min(floor(@classes.bard.levels/14),1) * 2) + min(floor(@classes.bard.levels/15),1) + min(floor(@classes.bard.levels/17),1) + (min(floor(@classes.bard.levels/18),1) * 2))))',\n    },\n    {\n      label: 'TIDY5E.Class.Cleric',\n      value: '@abilities.wis.mod + @classes.cleric.levels',\n    },\n    {\n      label: 'TIDY5E.Class.Druid',\n      value: '@abilities.wis.mod + @classes.druid.levels',\n    },\n    {\n      label: 'TIDY5E.Class.Paladin',\n      value: '@abilities.cha.mod + floor(@classes.paladin.levels / 2)',\n    },\n    { label: 'TIDY5E.Class.Ranger', value: 'ceil(@classes.ranger.levels/2)+1' },\n    {\n      label: 'TIDY5E.Class.Sorcerer',\n      value:\n        'min(@classes.sorcerer.levels + 1, 12 + min(floor(@classes.sorcerer.levels/13),1) + min(floor(@classes.sorcerer.levels/15),1) + min(floor(@classes.sorcerer.levels/17),1))',\n    },\n    {\n      label: 'TIDY5E.Class.Wizard',\n      value: '@abilities.int.mod + @classes.wizard.levels',\n    },\n  ];\n}\n\nexport function calculateSpellAttackAndDc(actor: Actor5e): SpellCalculations {\n  try {\n    const rollData = actor.getRollData();\n\n    const prof = actor.system.attributes.prof ?? 0;\n    const spellAbility = actor.system.attributes.spellcasting;\n    const abilityMod =\n      (spellAbility != '' ? actor.system.abilities[spellAbility].mod : 0) ?? 0;\n    const spellAttackMod = prof + abilityMod;\n\n    const rawRsak = Roll.replaceFormulaData(\n      actor.system.bonuses.rsak.attack,\n      rollData,\n      { missing: 0, warn: false }\n    );\n\n    const rsakBonusTotal = calculateDeterministicBonus(rawRsak);\n\n    let rsakTotal = (spellAttackMod + rsakBonusTotal).toString();\n\n    if (!rsakTotal.startsWith('-')) {\n      rsakTotal = '+' + rsakTotal;\n    }\n\n    let rawMsak = Roll.replaceFormulaData(\n      actor.system.bonuses.msak.attack,\n      rollData,\n      { missing: 0, warn: false }\n    );\n\n    let msakBonusTotal = calculateDeterministicBonus(rawMsak);\n\n    let msakTotal = (spellAttackMod + msakBonusTotal).toString();\n\n    if (!msakTotal.startsWith('-')) {\n      msakTotal = '+' + msakTotal;\n    }\n\n    const abilityName =\n      CONFIG.DND5E.abilities[spellAbility]?.label ??\n      FoundryAdapter.localize('DND5E.None');\n\n    return {\n      dc: actor.system.attributes.spelldc,\n      dcTooltip: getDcTooltip(actor),\n      meleeMod: msakTotal,\n      meleeTooltip: buildAttackModTooltip(\n        abilityName,\n        abilityMod,\n        prof,\n        msakBonusTotal\n      ),\n      meleeHasBonus: msakBonusTotal !== 0,\n      rangedMod: rsakTotal,\n      rangedTooltip: buildAttackModTooltip(\n        abilityName,\n        abilityMod,\n        prof,\n        rsakBonusTotal\n      ),\n      rangedHasBonus: rsakBonusTotal !== 0,\n    };\n  } catch (e) {\n    error('An error occurred while calculating spell attack bonus', false, e);\n    debug('Spell attack bonus error troubleshooting details', {\n      bonuses: actor.system.bonuses,\n      actor: actor,\n    });\n\n    return {\n      dc: actor.system.attributes.spelldc,\n      dcTooltip: '',\n      meleeMod: '',\n      meleeTooltip: '',\n      meleeHasBonus: false,\n      rangedMod: '',\n      rangedTooltip: '',\n      rangedHasBonus: false,\n    };\n  }\n}\n\nfunction buildAttackModTooltip(\n  abilityName: string,\n  abilityMod: number,\n  proficiency: number,\n  bonusTotal: number\n) {\n  let tooltip = '';\n  if (abilityMod !== 0) {\n    tooltip += abilityMod < 0 ? ' - ' : ' + ';\n    tooltip += `${Math.abs(abilityMod)} (${abilityName})`;\n  }\n\n  if (proficiency !== 0) {\n    tooltip += proficiency < 0 ? ' - ' : ' + ';\n    tooltip += `${Math.abs(proficiency)} (${FoundryAdapter.localize(\n      'DND5E.ProficiencyBonus'\n    )})`;\n  }\n\n  if (bonusTotal !== 0) {\n    tooltip += bonusTotal < 0 ? ' - ' : ' + ';\n    tooltip += `${Math.abs(bonusTotal)} (${FoundryAdapter.localize(\n      'DND5E.Bonus'\n    )})`;\n  }\n\n  return tooltip.trim();\n}\n\nfunction calculateDeterministicBonus(rawBonus: string): number {\n  if (!Roll.validate(rawBonus)) {\n    return 0;\n  }\n\n  const deterministicRawBonus = new Roll(rawBonus).terms.filter(\n    (t: any) => t.isDeterministic\n  );\n\n  // `Roll.fromTerms` doesn't allow an empty array since it expects a sequence\n  // of tokens that it can parse into a syntax tree. Therefore, we need to be\n  // careful about what we pass into it.\n  //\n  // TODO: To correctly prune non-deterministic terms from the formula, we need\n  // to invoke the RollParser and prune elements from the syntax tree.\n  //\n  // This `if` statement handles the most common failure case, wherein the whole\n  // formula is non-deterministic, but it's just a temporary band-aid; the real\n  // fix will be considerably more complicated to implement.\n  //\n  // Currently, an expression like `1 + 1d4 * 2` would prune the `1d4` and\n  // attempt to roll `1 + * 2`, causing an error. The try/catch block below\n  // anticipates that possibility and logs it as a warning since it's a known\n  // issue, but it should ideally be replaced with a more rigorous fix.\n  if (deterministicRawBonus.length == 0) {\n    return 0;\n  }\n\n  let bonusRoll = Roll.fromTerms([new NumericTerm(0)]);\n  try {\n    bonusRoll = Roll.fromTerms(deterministicRawBonus);\n\n    let bonusTotal = 0;\n    if (Roll.validate(bonusRoll.formula)) {\n      bonusTotal = FoundryAdapter.isFoundryV12OrHigher()\n        ? bonusRoll.evaluateSync().total\n        : bonusRoll.evaluate({ async: false }).total;\n    }\n    return bonusTotal;\n  } catch (e: any) {\n    warn(e.toString());\n    return 0;\n  }\n}\n\nexport function getDcTooltip(actor: Actor5e) {\n  const base = 8;\n  const spellAbility = actor.system.attributes.spellcasting;\n  const abilityMod =\n    (spellAbility != '' ? actor.system.abilities[spellAbility].mod : 0) ?? 0;\n  const abilityName =\n    CONFIG.DND5E.abilities[spellAbility]?.label ??\n    FoundryAdapter.localize('DND5E.None');\n  const prof = actor.system.attributes.prof ?? 0;\n\n  let tooltip = base.toString();\n\n  if (abilityMod !== 0) {\n    tooltip += abilityMod < 0 ? ' - ' : ' + ';\n    tooltip += `${Math.abs(abilityMod)} (${abilityName})`;\n  }\n\n  if (prof !== 0) {\n    tooltip += prof < 0 ? ' - ' : ' + ';\n    tooltip += `${Math.abs(prof)} (${FoundryAdapter.localize(\n      'DND5E.ProficiencyBonus'\n    )})`;\n  }\n\n  const rawBonus = actor.system.bonuses.spell.dc?.toString()?.trim();\n  if (!isNil(rawBonus, '') && Roll.validate(rawBonus)) {\n    const bonusRoll = new Roll(rawBonus);\n    FoundryAdapter.isFoundryV12OrHigher()\n      ? bonusRoll.evaluateSync()\n      : bonusRoll.evaluate({ async: false });\n    const bonusTotal = bonusRoll.total;\n\n    if (bonusTotal !== 0) {\n      tooltip += bonusTotal < 0 ? ' - ' : ' + ';\n      tooltip += `${Math.abs(bonusTotal)} (${FoundryAdapter.localize(\n        'DND5E.Bonus'\n      )})`;\n    }\n  }\n\n  return tooltip;\n}\n\ntype RawSpellAttackType = 'rsak' | 'msak';\n\nexport function rollRawSpellAttack(\n  ev: MouseEvent,\n  actor: Actor5e,\n  attackType?: RawSpellAttackType\n) {\n  let titleKey =\n    attackType === 'rsak'\n      ? 'TIDY5E.ActorRangedSpellAttackTitle'\n      : attackType === 'msak'\n      ? 'TIDY5E.ActorMeleeSpellAttackTitle'\n      : 'TIDY5E.ActorSpellAttackTitle';\n\n  let title = FoundryAdapter.localize(titleKey, {\n    actorName: actor.name,\n  });\n\n  let flavorKey =\n    attackType === 'rsak'\n      ? 'TIDY5E.ActorRangedSpellAttackFlavorText'\n      : attackType === 'msak'\n      ? 'TIDY5E.ActorMeleeSpellAttackFlavorText'\n      : 'TIDY5E.ActorSpellAttackFlavorText';\n\n  let flavor = FoundryAdapter.localize(flavorKey);\n\n  const effectiveAttackType = attackType ?? 'rsak';\n\n  const rollData: Record<string, string> = {};\n  const parts: string[] = [];\n\n  // Ability score modifier\n  const spellcastingAbility = actor.system.attributes.spellcasting;\n  const spellcastingMod = actor.system.abilities[spellcastingAbility]?.mod;\n  if (spellcastingAbility !== 'none' && spellcastingMod) {\n    parts.push('@mod');\n    rollData.mod = spellcastingMod;\n  }\n\n  // Add proficiency bonus.\n  parts.push('@prof');\n  rollData.prof = actor.system.attributes.prof;\n\n  // Actor-level global bonus to attack rolls\n  const actorBonusAttack = actor.system.bonuses?.[effectiveAttackType]?.attack;\n  if (actorBonusAttack) {\n    parts.push(actorBonusAttack);\n  }\n\n  const rollConfig = foundry.utils.mergeObject(\n    {\n      actor: actor,\n      data: rollData,\n      critical: actor.flags['dnd5e']?.spellCriticalThreshold,\n      title: title,\n      flavor: flavor,\n      elvenAccuracy: actor.flags['dnd5e']?.elvenAccuracy ?? false,\n      halflingLucky: actor.flags['dnd5e']?.halflingLucky ?? false,\n      dialogOptions: {\n        width: 400,\n        top: ev ? ev.clientY - 80 : null,\n        left: ev ? ev.clientX + 40 : null,\n      },\n      messageData: {\n        'flags.dnd5e.roll': {\n          type: 'attack',\n        },\n        speaker: ChatMessage.getSpeaker({ actor: actor }),\n      },\n      event: ev,\n    },\n    {}\n  );\n  rollConfig.parts = parts;\n  dnd5e.dice.d20Roll(rollConfig);\n}\n","import type { Item5e } from 'src/types/item.types';\nimport type { SortMode } from 'src/types/types';\nimport { isNil } from './data';\n\nexport class ItemUtils {\n  static canUse(item: any): boolean {\n    return (\n      ItemUtils.hasActivationType(item) &&\n      (ItemUtils.hasUnlimitedUses(item) ||\n        ItemUtils.hasSufficientLimitedUses(item)) &&\n      (!ItemUtils.hasConsumptionRequirements(item) ||\n        ItemUtils.hasSufficientConsumptionAmount(item)) &&\n      (!ItemUtils.hasRecharge(item) || ItemUtils.isCharged(item)) &&\n      ItemUtils.atLeastOneExists(item)\n    );\n  }\n  static atLeastOneExists(item: any): boolean {\n    return (item.system.quantity ?? 1) >= 1;\n  }\n  static hasActivationType(item: any): boolean {\n    return !isNil(item.system.activation?.type, '');\n  }\n  static hasUnlimitedUses(item: any): boolean {\n    return isNil(item.system.uses?.per, '');\n  }\n  static hasSufficientLimitedUses(item: any): any {\n    return ItemUtils.hasConfiguredUses(item) && item.system.uses?.value > 0;\n  }\n  static hasConfiguredUses(item: any) {\n    return item.system.uses?.per !== null;\n  }\n  static hasConsumptionRequirements(item: any): boolean {\n    return !isNil(item.system.consume?.type, '');\n  }\n  static hasSufficientConsumptionAmount(item: any): boolean {\n    const consumeTarget = item.parent?.items?.get(item.system.consume.target);\n    return (\n      // If there's no consume target, then we'll be permissive and allow the system to deal with whether it's usable\n      // Note: this is intentionally ignoring non-item / non-item-use consumption scenarios like consuming attributes\n      isNil(item.system.consume?.target, '') ||\n      (consumeTarget?.system.quantity ??\n        consumeTarget?.system.uses?.value ??\n        0) >= item.system.consume?.amount\n    );\n  }\n  static hasRecharge(item: any): boolean {\n    return (item.system.recharge?.value ?? 0) > 0;\n  }\n  static isCharged(item: any): boolean {\n    return item.system.recharge?.charged === true;\n  }\n\n  static getMaxUses(item: Item5e) {\n    return item.system.uses?.max;\n  }\n\n  static sortItems(items: Item5e[], sortMode: SortMode) {\n    if (sortMode === 'a') {\n      items.sort((a, b) => a.name.localeCompare(b.name));\n    } else if (sortMode === 'm') {\n      items.sort((a, b) => (a.sort || 0) - (b.sort || 0));\n    }\n  }\n}\n","import { SettingsProvider } from 'src/settings/settings';\nimport type { Item5e } from 'src/types/item.types';\nimport { ItemUtils } from './ItemUtils';\nimport { CONSTANTS } from 'src/constants';\n\nexport class SpellUtils {\n  /** Is a cantrip. */\n  static isCantrip(item: Item5e) {\n    return item.type === CONSTANTS.ITEM_TYPE_SPELL && item.system.level === 0;\n  }\n\n  /** The cantrip is castable. If cantrip preparation is turned on, then require the cantrip to be prepared to be castable. */\n  static isCastableCantrip(item: Item5e) {\n    return (\n      SpellUtils.isCantrip(item) &&\n      (SpellUtils.isCantripPrepared(item) ||\n        SpellUtils.isAlwaysPrepared(item) ||\n        SpellUtils.isUnlimitedAtWill(item) ||\n        SpellUtils.isUnlimitedInnate(item) ||\n        ItemUtils.hasSufficientLimitedUses(item))\n    );\n  }\n\n  /** While the Cantrip Formulas rule is enabled, this cantrip must have prepared status. If the rule is not enabled, a cantrip is always prepared.  */\n  static isCantripPrepared(item: Item5e) {\n    const prepareCantrips =\n      SettingsProvider.settings.allowCantripsToBePrepared.get();\n\n    return !prepareCantrips || (prepareCantrips && SpellUtils.isPrepared(item));\n  }\n\n  /** Spell is castable in this moment. */\n  static isCastableSpell(item: Item5e) {\n    return (\n      SpellUtils.isSpell(item) &&\n      (SpellUtils.isPrepared(item) ||\n        SpellUtils.isAlwaysPrepared(item) ||\n        SpellUtils.isUnlimitedAtWill(item) ||\n        SpellUtils.isUnlimitedInnate(item) ||\n        ItemUtils.hasSufficientLimitedUses(item) ||\n        SpellUtils.isPactMagic(item))\n    );\n  }\n\n  /** A spell item with a non-cantrip level. */\n  static isSpell(item: any) {\n    return item.type === CONSTANTS.ITEM_TYPE_SPELL && item.system.level > 0;\n  }\n\n  /** Spell is always prepared. */\n  static isAlwaysPrepared(item: any): any {\n    return (\n      item.system.preparation?.mode === CONSTANTS.SPELL_PREPARATION_MODE_ALWAYS\n    );\n  }\n\n  /** Is an At-Will spell with no limit on uses. */\n  static isUnlimitedAtWill(item: any): boolean {\n    return SpellUtils.isAtWill(item) && !ItemUtils.hasConfiguredUses(item);\n  }\n\n  /** Is an At-Will spell. */\n  static isAtWill(item: any): boolean {\n    return (\n      item.system.preparation?.mode === CONSTANTS.SPELL_PREPARATION_MODE_ATWILL\n    );\n  }\n\n  /** Is an Innate spell with no limit on uses. */\n  static isUnlimitedInnate(item: any): boolean {\n    return SpellUtils.isInnate(item) && !ItemUtils.hasConfiguredUses(item);\n  }\n  \n  /** Is an Innate spell. */\n  static isInnate(item: any): boolean {\n    return (\n      item.system.preparation?.mode === CONSTANTS.SPELL_PREPARATION_MODE_INNATE\n    );\n  }\n\n  /** Is pact magic. */\n  static isPactMagic(item: Item5e) {\n    return (\n      item.system.preparation?.mode === CONSTANTS.SPELL_PREPARATION_MODE_PACT\n    );\n  }\n\n  /** Is a spell that requires preparation and is prepared. */\n  static isPrepared(item: Item5e) {\n    return (\n      item.system.preparation?.mode === 'prepared' &&\n      item.system.preparation?.prepared\n    );\n  }\n\n  /** Is a spell that requires preparation but is unprepared. */\n  static isUnprepared(item: Item5e) {\n    return (\n      item.system.preparation?.mode === 'prepared' &&\n      !item.system.preparation?.prepared\n    );\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport type {\n  SheetPreferences,\n  SheetTypeTabPreferences,\n  SheetPreference,\n} from './user-preferences.types';\n\n/**\n * A service for managing sheet preferences that are cached on the user document under this module's flags.\n *\n * @example What the data looks like\n * ```json\n * {\n *   \"flags\": {\n *     \"tidy5e-sheet\": {\n *       \"sheetPreferences\": {\n *         \"character\": {\n *           \"tabs\": {\n *             \"inventory\": {\n *               \"sort\": \"m\"\n *             }\n *           },\n *           \"width\": 900,\n *           \"height\": 1000\n *         },\n *         \"npc\": {\n *           \"tabs\": {\n *             \"spellbook\": {\n *               \"sort\": \"a\"\n *             }\n *           },\n *           \"width\": 1080\n *         }\n *       }\n *     }\n *   }\n * }\n * ```\n */\nexport class SheetPreferencesService {\n\n  static async setDocumentTypeTabPreference<\n    K extends keyof SheetTypeTabPreferences,\n    V extends SheetTypeTabPreferences[K]\n  >(documentType: string, tabId: string, property: K, value: V) {\n    await game.user.setFlag(\n      CONSTANTS.MODULE_ID,\n      `sheetPreferences.${documentType}.tabs.${tabId}.${property}`,\n      value\n    );\n  }\n\n  static async setDocumentTypePreference<\n    K extends keyof SheetPreference,\n    V extends SheetPreference[K]\n  >(documentType: string, property: K, value: V) {\n    await game.user.setFlag(\n      CONSTANTS.MODULE_ID,\n      `sheetPreferences.${documentType}.${property}`,\n      value\n    );\n  }\n\n  static get(): SheetPreferences {\n    return (\n      foundry.utils.getProperty(\n        game.user,\n        `flags.${CONSTANTS.MODULE_ID}.sheetPreferences`\n      ) ?? {}\n    );\n  }\n\n  static getByType(documentType: string): SheetPreference {\n    return (\n      foundry.utils.getProperty(\n        game.user,\n        `flags.${CONSTANTS.MODULE_ID}.sheetPreferences.${documentType}`\n      ) ?? {}\n    );\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { Tidy5eCharacterSheet } from 'src/sheets/Tidy5eCharacterSheet';\nimport type { Tidy5eNpcSheet } from 'src/sheets/Tidy5eNpcSheet';\nimport type { Item5e } from 'src/types/item.types';\nimport type {\n  ActionSection,\n  Actor5e,\n  CharacterFeatureSection,\n  CharacterSheetContext,\n  CustomSectionOptions,\n  FavoriteSection,\n  FeatureSection,\n  InventorySection,\n  NpcAbilitySection,\n  NpcSheetContext,\n  SpellbookSection,\n  TidySectionBase,\n} from 'src/types/types';\nimport { isNil } from 'src/utils/data';\nimport type { SectionConfig } from './sections.types';\nimport { ItemUtils } from 'src/utils/ItemUtils';\nimport { SheetPreferencesService } from '../user-preferences/SheetPreferencesService';\nimport type { SheetPreference } from '../user-preferences/user-preferences.types';\nimport type { CharacterFavorite } from 'src/foundry/dnd5e.types';\nimport { error } from 'src/utils/logging';\nimport { sortActions } from '../actions/actions';\n\nexport class SheetSections {\n  static generateCustomSpellbookSections(\n    spells: Item5e[],\n    options: Partial<SpellbookSection>\n  ) {\n    const customSpellbook: Record<string, SpellbookSection> = {};\n    spells.forEach((s) =>\n      SheetSections.applySpellToSection(customSpellbook, s, options)\n    );\n    return Object.values(customSpellbook);\n  }\n\n  static applySpellToSection(\n    spellbook: Record<string, SpellbookSection>,\n    spell: Item5e,\n    options: Partial<SpellbookSection>\n  ) {\n    const customSectionName = TidyFlags.section.get(spell);\n\n    if (!customSectionName) {\n      // TODO: Eventually absorb core spellbook section prep to this service\n      return;\n    }\n\n    const section: SpellbookSection = (spellbook[customSectionName] ??= {\n      dataset: {\n        [TidyFlags.section.prop]: customSectionName,\n      },\n      spells: [],\n      label: customSectionName,\n      canCreate: true,\n      canPrepare: true,\n      usesSlots: false,\n      key: customSectionName,\n      custom: {\n        section: customSectionName,\n        creationItemTypes: [CONSTANTS.ITEM_TYPE_SPELL],\n      },\n      show: true,\n      ...options,\n    });\n\n    section.spells.push(spell);\n  }\n\n  static sortKeyedSections<\n    T extends { key: string; custom?: CustomSectionOptions }\n  >(sections: T[], sectionConfigs: Record<string, SectionConfig> | undefined) {\n    const sortMap = new Map(\n      Object.values(sectionConfigs ?? {}).map((e) => [e.key, e.order])\n    );\n    const defaultSortMap = new Map(\n      SheetSections.getDefaultSortOrder(sections).map((e, i) => [e, i])\n    );\n\n    const maxLength = sections.length;\n    sections.sort(\n      (a, b) =>\n        (sortMap.get(a.key) ?? defaultSortMap.get(a.key) ?? maxLength) -\n        (sortMap.get(b.key) ?? defaultSortMap.get(b.key) ?? maxLength)\n    );\n\n    return sections;\n  }\n\n  static getDefaultSortOrder<\n    T extends { key: string; custom?: CustomSectionOptions }\n  >(sections: T[]): string[] {\n    const { defaultSections, customSections } = sections.reduce<{\n      defaultSections: string[];\n      customSections: string[];\n    }>(\n      (prev, curr) => {\n        curr.custom\n          ? prev.customSections.push(curr.key)\n          : prev.defaultSections.push(curr.key);\n\n        return prev;\n      },\n      { defaultSections: [], customSections: [] }\n    );\n\n    customSections.sort((a, b) => a.localeCompare(b));\n\n    return [...defaultSections, ...customSections];\n  }\n\n  static prepareTidySpellbook(\n    context: CharacterSheetContext | NpcSheetContext,\n    spells: Item5e[],\n    options: Partial<SpellbookSection> = {},\n    app: Tidy5eCharacterSheet | Tidy5eNpcSheet\n  ): SpellbookSection[] {\n    const customSectionSpells = spells.filter((s) => TidyFlags.section.get(s));\n    spells = spells.filter((s) => !TidyFlags.section.get(s));\n\n    const spellbook: SpellbookSection[] = app\n      ._prepareSpellbook(context, spells)\n      .map(\n        (s: SpellbookSection) =>\n          ({\n            ...s,\n            key: s.key ?? s.prop,\n            show: true,\n          } satisfies SpellbookSection)\n      );\n\n    const spellbookMap = spellbook.reduce<Record<string, SpellbookSection>>(\n      (prev, curr) => {\n        const key = curr.prop ?? '';\n        curr.key = key;\n\n        // Tidy passes the dataset directly to the item creation code, rather than planting it on the HTML.\n        // When Tidy fully takes over its own spellbook preparation, eliminate the need for this correcting patch.\n        curr.dataset['system'] = {\n          level: curr.dataset.level,\n          preparationMode: curr.dataset.preparationMode,\n        };\n        delete curr.dataset.level;\n        delete curr.dataset.preparationMode;\n\n        prev[key] = curr;\n        return prev;\n      },\n      {}\n    );\n\n    customSectionSpells.forEach((spell) => {\n      SheetSections.applySpellToSection(spellbookMap, spell, options);\n    });\n\n    return Object.values(spellbookMap);\n  }\n\n  static prepareClassItems(\n    context: CharacterSheetContext | NpcSheetContext,\n    classes: Item5e[],\n    subclasses: Item5e[],\n    actor: Actor5e\n  ) {\n    const maxLevelDelta = CONFIG.DND5E.maxLevel - actor.system.details.level;\n    return classes.reduce((arr, cls) => {\n      arr.push(cls);\n      const ctx = (context.itemContext[cls.id] ??= {});\n      ctx.availableLevels = Array.fromRange(CONFIG.DND5E.maxLevel + 1)\n        .slice(1)\n        .map((level) => {\n          const delta = level - cls.system.levels;\n          return { level, delta, disabled: delta > maxLevelDelta };\n        });\n      const identifier =\n        cls.system.identifier || cls.name.slugify({ strict: true });\n      const subclass = subclasses.findSplice(\n        (s: Item5e) => s.system.classIdentifier === identifier\n      );\n      if (subclass) {\n        arr.push(subclass);\n        const subclassCtx = (context.itemContext[subclass.id] ??= {});\n        subclassCtx.parent = cls;\n      }\n      return arr;\n    }, []);\n  }\n\n  static collocateSubItems(\n    context: CharacterSheetContext | NpcSheetContext,\n    items: Item5e[]\n  ): Item5e[] {\n    const itemContext = context.itemContext;\n    const { parents, parentIdToChildren } = items.reduce<{\n      parents: Item5e[];\n      parentIdToChildren: Map<string, Item5e[]>;\n    }>(\n      (prev, item) => {\n        const parentItem = itemContext[item.id]?.parent;\n        const isChild = !!parentItem;\n        if (isChild) {\n          const children = prev.parentIdToChildren.get(parentItem.id) ?? [];\n          children.push(item);\n          prev.parentIdToChildren.set(parentItem.id, children);\n        } else {\n          prev.parents.push(item);\n        }\n        return prev;\n      },\n      { parents: [], parentIdToChildren: new Map<string, Item5e[]>() }\n    );\n\n    if (parents.length === items.length) {\n      return items;\n    }\n\n    return parents.reduce<Item5e[]>((result, item) => {\n      result.push(item);\n\n      const children = parentIdToChildren.get(item.id);\n\n      if (children) {\n        result.push(...children);\n      }\n\n      return result;\n    }, []);\n  }\n\n  static accountForExternalSections(\n    props: string[],\n    data: Record<string, any>\n  ) {\n    props.forEach((prop) => {\n      const sectionCollection = data[prop];\n      sectionCollection?.forEach((section: any) => {\n        if (!isNil(section.key)) {\n          return;\n        }\n\n        section.key = SheetSections.getSectionKey(section);\n        section.canCreate = false;\n        section.show = true;\n      });\n    });\n  }\n\n  static getSectionKey(section: TidySectionBase) {\n    if (isNil(section.key)) {\n      return `${section.label}-external`;\n    }\n\n    return section.key;\n  }\n\n  static configureInventory(\n    sections: InventorySection[],\n    tabId: string,\n    sheetPreferences: SheetPreference,\n    sectionConfig?: Record<string, SectionConfig>\n  ) {\n    try {\n      sections = SheetSections.sortKeyedSections(sections, sectionConfig);\n\n      const sortMode = sheetPreferences.tabs?.[tabId]?.sort ?? 'm';\n\n      sections.forEach((section) => {\n        ItemUtils.sortItems(section.items, sortMode);\n\n        // Apply visibility from configuration\n        section.show = sectionConfig?.[section.key]?.show !== false;\n      });\n    } catch (e) {\n      error('An error occurred while configuring inventory', false, e);\n    }\n\n    return sections;\n  }\n\n  static configureSpellbook(\n    document: any,\n    tabId: string,\n    sections: SpellbookSection[]\n  ) {\n    try {\n      const sectionConfigs = TidyFlags.sectionConfig.get(document);\n\n      sections = SheetSections.sortKeyedSections(\n        sections,\n        sectionConfigs?.[tabId]\n      );\n\n      const characterPreferences = SheetPreferencesService.getByType(\n        document.type\n      );\n\n      const sortMode = characterPreferences.tabs?.[tabId]?.sort ?? 'm';\n\n      sections.forEach((section) => {\n        // Sort Spellbook\n        ItemUtils.sortItems(section.spells, sortMode);\n\n        // TODO: Collocate Spellbook Sub Items\n\n        // Apply visibility from configuration\n        section.show =\n          sectionConfigs?.[CONSTANTS.TAB_CHARACTER_SPELLBOOK]?.[section.key]\n            ?.show !== false;\n      });\n    } catch (e) {\n      error('An error occurred while configuring spells', false, e);\n    }\n\n    return sections;\n  }\n\n  static configureFavorites(\n    favoriteSections: FavoriteSection[],\n    actor: Actor5e,\n    tabId: string,\n    sheetPreferences: SheetPreference,\n    sectionConfig?: Record<string, SectionConfig>\n  ) {\n    try {\n      favoriteSections = SheetSections.sortKeyedSections(\n        favoriteSections,\n        sectionConfig\n      );\n\n      const sortMode = sheetPreferences.tabs?.[tabId]?.sort ?? 'm';\n\n      const favoritesIdMap = actor.system.favorites.reduce(\n        (map: Map<string, CharacterFavorite>, f: CharacterFavorite) => {\n          map.set(f.id, f);\n          return map;\n        },\n        new Map<string, CharacterFavorite>()\n      );\n\n      (favoriteSections as FavoriteSection[]).forEach((section) => {\n        if ('effects' in section) {\n          let effectContexts = section.effects;\n\n          // Sort Favorite Effects\n          if (sortMode === 'm') {\n            const getSort = (effects: Item5e) =>\n              favoritesIdMap.get(effects.getRelativeUUID(actor))?.sort ??\n              Number.MAX_SAFE_INTEGER;\n\n            effectContexts.sort(\n              (a, b) => getSort(a.effect) - getSort(b.effect)\n            );\n          } else {\n            effectContexts.sort((a, b) =>\n              a.effect.name.localeCompare(b.effect.name)\n            );\n          }\n\n          // TODO: Filter Favorite Effects ?\n        } else {\n          let items = 'spells' in section ? section.spells : section.items;\n          // Sort Favorites Items\n          if (sortMode === 'm') {\n            const getSort = (item: Item5e) =>\n              favoritesIdMap.get(item.getRelativeUUID(actor))?.sort ??\n              Number.MAX_SAFE_INTEGER;\n\n            items.sort((a, b) => getSort(a) - getSort(b));\n          } else {\n            ItemUtils.sortItems(items, sortMode);\n          }\n\n          // TODO: Collocate Favorite Sub Items\n\n          if ('spells' in section) {\n            section.spells = items;\n          } else {\n            section.items = items;\n          }\n        }\n\n        // Apply visibility from configuration\n        section.show = sectionConfig?.[section.key]?.show !== false;\n      });\n    } catch (e) {\n      error('An error occurred while configuring favorites', false, e);\n    }\n\n    return favoriteSections;\n  }\n\n  static configureFeatures<\n    TSection extends\n      | CharacterFeatureSection\n      | FeatureSection\n      | NpcAbilitySection\n  >(\n    features: TSection[],\n    context: CharacterSheetContext | NpcSheetContext,\n    tabId: string,\n    sheetPreferences: SheetPreference,\n    sectionConfig?: Record<string, SectionConfig>\n  ): TSection[] {\n    try {\n      features = SheetSections.sortKeyedSections(features, sectionConfig);\n\n      const sortMode = sheetPreferences.tabs?.[tabId]?.sort ?? 'm';\n\n      features.forEach((section) => {\n        // Sort Features\n        ItemUtils.sortItems(section.items, sortMode);\n\n        // Collocate Feature Sub Items\n        section.items = SheetSections.collocateSubItems(context, section.items);\n\n        // Apply visibility from configuration\n        section.show = sectionConfig?.[section.key]?.show !== false;\n      });\n    } catch (e) {\n      error('An error occurred while configuring features', false, e);\n    }\n\n    return features;\n  }\n\n  static configureActions(\n    sections: ActionSection[],\n    tabId: string,\n    sheetPreferences: SheetPreference,\n    sectionConfigs: Record<string, SectionConfig> | undefined\n  ) {\n    try {\n      sections = SheetSections.sortKeyedSections(sections, sectionConfigs);\n\n      const sortMode = sheetPreferences.tabs?.[tabId]?.sort ?? 'm';\n\n      sections.forEach((section) => {\n        sortActions(section, sortMode);\n\n        section.show = sectionConfigs?.[section.key]?.show !== false;\n      });\n    } catch (e) {\n      error('An error occurred while configuring actions', false, e);\n    }\n\n    return sections;\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { Item5e } from 'src/types/item.types';\nimport type {\n  ContainerCapacityContext,\n  ContainerPanelItemContext,\n  InventorySection,\n  SortMode,\n} from 'src/types/types';\nimport { error } from 'src/utils/logging';\nimport type { SectionConfig, SheetTabSectionConfigs } from './sections.types';\nimport { SheetSections } from './SheetSections';\nimport { ItemUtils } from 'src/utils/ItemUtils';\nimport type { ItemFilterService } from '../filtering/ItemFilterService';\n\nexport class Inventory {\n  static getDefaultInventoryTypes(): string[] {\n    return Object.entries(CONFIG.Item.dataModels)\n      .filter(([, model]: [string, any]) => model.metadata?.inventoryItem)\n      .sort(\n        ([, lhs]: [string, any], [, rhs]: [string, any]) =>\n          lhs.metadata.inventoryOrder - rhs.metadata.inventoryOrder\n      )\n      .map((entry) => entry[0]);\n  }\n\n  static getDefaultInventorySections(\n    options: Partial<InventorySection> = {}\n  ): Record<string, InventorySection> {\n    const inventoryTypes = Inventory.getDefaultInventoryTypes();\n\n    const inventory: Record<string, InventorySection> = {};\n\n    for (const type of inventoryTypes) {\n      inventory[type] = {\n        canCreate: true,\n        dataset: { type },\n        items: [],\n        key: type,\n        label: `${CONFIG.Item.typeLabels[type]}Pl`,\n        show: true,\n        custom: undefined,\n        isExternal: false,\n        ...options,\n      };\n    }\n\n    return inventory;\n  }\n\n  static applyInventoryItemToSection(\n    inventory: Record<string, InventorySection>,\n    item: Item5e,\n    defaultInventoryTypes: string[],\n    customSectionOptions: Partial<InventorySection>\n  ) {\n    const customSectionName = TidyFlags.section.get(item);\n\n    if (!customSectionName) {\n      inventory[item.type].items.push(item);\n      return;\n    }\n\n    const customSection: InventorySection = (inventory[customSectionName] ??= {\n      dataset: { [TidyFlags.section.prop]: customSectionName },\n      items: [],\n      label: customSectionName,\n      canCreate: true,\n      key: customSectionName,\n      custom: {\n        section: customSectionName,\n        creationItemTypes: [...defaultInventoryTypes],\n      },\n      show: true,\n      ...customSectionOptions,\n    });\n\n    customSection.items.push(item);\n  }\n\n  static async getContainerPanelItems(items: Item5e[]) {\n    let containerPanelItems: ContainerPanelItemContext[] = [];\n    try {\n      let containers = items\n        .filter((i: Item5e) => i.type === CONSTANTS.ITEM_TYPE_CONTAINER)\n        .toSorted((a: Item5e, b: Item5e) => a.sort - b.sort);\n\n      for (let container of containers) {\n        const capacity =\n          (await container.system.computeCapacity()) as ContainerCapacityContext;\n        containerPanelItems.push({\n          container,\n          ...capacity,\n        });\n      }\n    } catch (e) {\n      error(\n        'An error occurred while preparing containers for the container panel',\n        false,\n        e\n      );\n    }\n    return containerPanelItems;\n  }\n\n  static getInventory(\n    items: Item5e[],\n    options: Partial<InventorySection> = {\n      canCreate: false,\n    }\n  ): InventorySection[] {\n    const inventory = Inventory.getDefaultInventorySections();\n\n    const inventoryTypes = Inventory.getDefaultInventoryTypes();\n\n    for (let item of items) {\n      Inventory.applyInventoryItemToSection(\n        inventory,\n        item,\n        inventoryTypes,\n        options\n      );\n    }\n\n    return Object.values(inventory);\n  }\n}\n","import type {\n  ContainerContents,\n  ContainerItemContext,\n  Item5e,\n} from 'src/types/item.types';\nimport { Inventory } from '../sections/Inventory';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { CONSTANTS } from 'src/constants';\nimport type { CharacterFavorite } from 'src/foundry/dnd5e.types';\n\nexport class Container {\n  static async getContainerContents(item: Item5e): Promise<ContainerContents> {\n    const containerItems = (await item.system.contents).values();\n\n    return {\n      capacity: await item.system.computeCapacity(),\n      currency: item.system.currency,\n      contents: Inventory.getInventory(containerItems),\n      itemContext: await Container.getContainerItemContext(item),\n    };\n  }\n\n  static async getContainerItemContext(\n    container: Item5e\n  ): Promise<Record<string, ContainerItemContext>> {\n    const itemContext: Record<string, ContainerItemContext> = {};\n\n    const favorites: CharacterFavorite[] | undefined =\n      container.actor?.system.favorites;\n\n    const containerValues = (await container.system.contents).values();\n    \n    for (const item of containerValues) {\n      const ctx = (itemContext[item.id] ??= {});\n      ctx.totalWeight = (await item.system.totalWeight).toNearest(0.1);\n      ctx.isStack = item.system.quantity > 1;\n      ctx.attunement = FoundryAdapter.getAttunementContext(item);\n\n      if (favorites) {\n        const relativeUuid = item.getRelativeUUID(container.actor);\n        // TODO: Determine if this looped array traversal is going to be an issue; if so, consider passing in a context object with a favorites map.\n        ctx.favoriteId = item.actor.system.favorites?.find(\n          (f: CharacterFavorite) => f.id === relativeUuid\n        )?.id;\n      }\n\n      if (item.type === CONSTANTS.ITEM_TYPE_CONTAINER) {\n        ctx.containerContents = await Container.getContainerContents(item);\n      }\n    }\n\n    return itemContext;\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { ActionListRuntime } from 'src/runtime/action-list/ActionListRuntime';\nimport { SettingsProvider } from 'src/settings/settings';\nimport type { ContainerContents, Item5e } from 'src/types/item.types';\nimport type {\n  ActionItem,\n  ActionSection,\n  Actor5e,\n  SortMode,\n} from 'src/types/types';\nimport { isNil } from 'src/utils/data';\nimport { scaleCantripDamageFormula, simplifyFormula } from 'src/utils/formula';\nimport { debug, error } from 'src/utils/logging';\nimport { SpellUtils } from 'src/utils/SpellUtils';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport { Container } from '../containers/Container';\n\nexport type ActionSets = Record<string, Set<ActionItem>>;\n\nconst itemTypeSortValues: Record<string, number> = {\n  weapon: 1,\n  equipment: 2,\n  feat: 3,\n  spell: 4,\n  consumable: 5,\n  tool: 6,\n  class: 8,\n  loot: 9,\n};\n\nconst activationTypeSortValues: Record<string, number> = {\n  action: 1,\n  bonus: 2,\n  reaction: 3,\n  legendary: 4,\n  mythic: 5,\n  lair: 6,\n  crew: 7,\n  special: 8,\n};\n\nexport async function getActorActionSections(\n  actor: Actor5e\n): Promise<ActionSection[]> {\n  try {\n    let eligibleItems: ActionItem[] = [];\n\n    for (let item of actor.items) {\n      if (!isItemInActionList(item)) {\n        continue;\n      }\n\n      eligibleItems.push(await mapActionItem(item));\n    }\n\n    return buildActionSections(actor, eligibleItems);\n  } catch (e) {\n    error('An error occurred while getting actions', false, e);\n    return [];\n  }\n}\n\nexport function sortActions(section: ActionSection, sortMode: SortMode) {\n  section.actions.sort(({ item: a }, { item: b }) => {\n    if (sortMode === 'a') {\n      return a.name.localeCompare(b.name);\n    }\n\n    // Sort by Arbitrary Action List Rules\n    if (a.type !== b.type) {\n      return itemTypeSortValues[a.type] - itemTypeSortValues[b.type];\n    }\n    if (a.type === 'spell' && b.type === 'spell') {\n      return a.system.level - b.system.level;\n    }\n    return (a.sort || 0) - (b.sort || 0);\n  });\n}\n\nfunction buildActionSections(\n  actor: Actor5e,\n  actionItems: ActionItem[]\n): ActionSection[] {\n  const customMappings = ActionListRuntime.getActivationTypeMappings();\n\n  let actionSections: Record<string, ActionSection> = {};\n\n  // Initialize the default sections in their default order.\n  Object.keys(activationTypeSortValues).forEach((activationType) => {\n    actionSections[activationType] = {\n      actions: [],\n      dataset: {},\n      label: FoundryAdapter.getActivationTypeLabel(activationType),\n      key: activationType,\n      show: true,\n    };\n  });\n\n  // partition items into sections\n  for (let actionItem of actionItems) {\n    const customSectionName = TidyFlags.actionSection.get(actionItem.item);\n    if (customSectionName) {\n      const customSection = (actionSections[customSectionName] ??= {\n        actions: [],\n        dataset: {},\n        key: customSectionName,\n        label: FoundryAdapter.localize(customSectionName),\n        show: true,\n        custom: {\n          creationItemTypes: [],\n          section: customSectionName,\n        },\n      });\n      customSection.actions.push(actionItem);\n    } else {\n      const activationType = getActivationType(\n        actionItem.item.system.activation?.type,\n        customMappings\n      );\n      const section = (actionSections[activationType] ??= {\n        actions: [],\n        dataset: {},\n        key: activationType,\n        label: FoundryAdapter.getActivationTypeLabel(activationType),\n        show: true,\n      });\n      section.actions.push(actionItem);\n    }\n  }\n\n  return Object.values(actionSections);\n}\n\nexport function isItemInActionList(item: Item5e): boolean {\n  // check our override\n  const override = TidyFlags.actionFilterOverride.get(item);\n\n  if (override !== undefined && override !== null) {\n    return override;\n  }\n\n  // perform normal filtering logic\n  switch (item.type) {\n    case CONSTANTS.ITEM_TYPE_WEAPON: {\n      return item.system.equipped;\n    }\n    case CONSTANTS.ITEM_TYPE_EQUIPMENT: {\n      return item.system.equipped && isActiveItem(item.system.activation?.type);\n    }\n    case CONSTANTS.ITEM_TYPE_CONSUMABLE: {\n      return (\n        SettingsProvider.settings.actionListIncludeConsumables.get() &&\n        isActiveItem(item.system.activation?.type)\n      );\n    }\n    case CONSTANTS.ITEM_TYPE_SPELL: {\n      const limitToCantrips =\n        SettingsProvider.settings.actionListLimitActionsToCantrips.get();\n\n      // only exclude spells which need to be prepared but aren't\n      if (\n        !SpellUtils.isCantrip(item) &&\n        (limitToCantrips || SpellUtils.isUnprepared(item))\n      ) {\n        return false;\n      }\n      const isReaction =\n        item.system.activation?.type === CONSTANTS.ACTIVATION_COST_REACTION;\n      const isBonusAction =\n        item.system.activation?.type === CONSTANTS.ACTIVATION_COST_BONUS;\n\n      //ASSUMPTION: If the spell causes damage, it will have damageParts\n      const isDamageDealer = item.system.damage?.parts?.length > 0;\n      let shouldInclude = isReaction || isBonusAction || isDamageDealer;\n      if (\n        SettingsProvider.settings.actionListIncludeMinuteLongSpellsAsActions.get()\n      ) {\n        const isOneMinuter =\n          item.system?.duration?.units === 'minute' &&\n          item.system?.duration?.value === 1;\n        const isOneRounder =\n          item.system?.duration?.units === 'round' &&\n          item.system?.duration?.value === 1;\n        shouldInclude = shouldInclude || isOneMinuter || isOneRounder;\n      }\n      if (\n        SettingsProvider.settings.actionListIncludeSpellsWithActiveEffects.get()\n      ) {\n        const hasEffects = !!item.effects.size;\n        shouldInclude = shouldInclude || hasEffects;\n      }\n      return shouldInclude;\n    }\n    case CONSTANTS.ITEM_TYPE_FEAT: {\n      return !!item.system.activation?.type;\n    }\n    default: {\n      return false;\n    }\n  }\n}\n\nasync function mapActionItem(item: Item5e): Promise<ActionItem> {\n  try {\n    let calculatedDerivedDamage = Array.isArray(item.labels.derivedDamage)\n      ? [...item.labels.derivedDamage].map(\n          ({ formula, label, damageType }: any, i: number) => {\n            const rawDamagePartFormula = item.system.damage?.parts[i]?.[0];\n\n            if (rawDamagePartFormula?.trim() === '') {\n              formula = '';\n            }\n\n            formula = simplifyFormula(formula, true);\n\n            const damageHealingTypeLabel =\n              FoundryAdapter.lookupDamageType(damageType) ??\n              FoundryAdapter.lookupHealingType(damageType) ??\n              '';\n\n            if (\n              item.type === 'spell' &&\n              item.system.scaling?.mode === 'cantrip' &&\n              SettingsProvider.settings.actionListScaleCantripDamage.get()\n            ) {\n              formula = scaleCantripDamageFormula(item, formula);\n              label = `${formula} ${damageHealingTypeLabel}`;\n            }\n\n            return {\n              label,\n              formula,\n              damageType,\n              damageHealingTypeLabel,\n            };\n          }\n        )\n      : [];\n\n    let containerContents: ContainerContents | undefined = undefined;\n    if (item.type === CONSTANTS.ITEM_TYPE_CONTAINER) {\n      containerContents = await Container.getContainerContents(item);\n    }\n\n    return {\n      item,\n      typeLabel: FoundryAdapter.localize(`ITEM.Type${item.type.titleCase()}`),\n      calculatedDerivedDamage,\n      containerContents,\n      ...getRangeTitles(item),\n    };\n  } catch (e) {\n    error(\n      'An error occurred while processing an item for the action list',\n      false,\n      e\n    );\n    debug('Action list mapping error troubleshooting info', { item });\n\n    return {\n      item,\n      typeLabel: FoundryAdapter.localize(`ITEM.Type${item.type.titleCase()}`),\n      calculatedDerivedDamage: [],\n      rangeTitle: '',\n      rangeSubtitle: '',\n    };\n  }\n}\n\nfunction getRangeTitles(item: Item5e): {\n  rangeTitle: string | null;\n  rangeSubtitle: string | null;\n} {\n  const rangeSubtitle =\n    item.system.target?.type !== 'self' && item.labels?.target\n      ? item.labels.target\n      : null;\n\n  const rangeTitle =\n    item.system.target?.type === 'self'\n      ? item.labels.target\n      : hasRange(item)\n      ? item.labels.range\n      : rangeSubtitle !== null\n      ? '—'\n      : null;\n\n  return {\n    rangeTitle,\n    rangeSubtitle,\n  };\n}\n\nfunction hasRange(item: Item5e): boolean {\n  return !isNil(item.system.range?.units);\n}\n\nfunction buildActionSets(filteredItems: any): ActionSets {\n  const customMappings = ActionListRuntime.getActivationTypeMappings();\n\n  // Build action sets based on what items are available.\n  let actionSets = filteredItems.reduce(\n    (acc: ActionSets, actionItem: ActionItem) => {\n      try {\n        /* \n          Priority 1: Custom Action Sections\n          Priority 2: Custom Mappings via the Tidy API\n          Priority 3: Item Activation Type\n        */\n        const customActionSection = TidyFlags.actionSection.get(\n          actionItem.item\n        );\n\n        const activationType = customActionSection\n          ? customActionSection\n          : getActivationType(\n              actionItem.item.system.activation?.type,\n              customMappings\n            );\n\n        if (!acc[activationType]) {\n          acc[activationType] = new Set<ActionItem>();\n        }\n        acc[activationType].add(actionItem);\n        return acc;\n      } catch (e) {\n        error('error trying to digest item', true, {\n          name: actionItem.item.name,\n          e,\n        });\n        return acc;\n      }\n    },\n    {}\n  );\n\n  // Sort action sets deterministically.\n  return Object.keys(actionSets)\n    .sort(\n      (a, b) =>\n        (activationTypeSortValues[a] || Number.MAX_VALUE) -\n        (activationTypeSortValues[b] || Number.MAX_VALUE)\n    )\n    .reduce<ActionSets>((result, key) => {\n      result[key] = actionSets[key];\n      return result;\n    }, {});\n}\n\nfunction getActivationType(\n  activationType: string,\n  customMappings: Record<string, string>\n) {\n  const customMapping = customMappings[activationType];\n  if (customMapping) {\n    return customMapping;\n  }\n\n  if (activationType in activationTypeSortValues) {\n    return activationType;\n  }\n\n  return 'other';\n}\n\nfunction isActiveItem(activationType: string) {\n  if (!activationType) {\n    return false;\n  }\n  if (['minute', 'hour', 'day', 'none'].includes(activationType)) {\n    return false;\n  }\n  return true;\n}\n\n// TODO: Put more Actions stuff into the static class\nexport class Actions {\n  static get damageAndHealingTypesIconSrcMap(): Record<string, string> {\n    const damageTypes = Object.entries(CONFIG.DND5E.damageTypes).reduce<\n      Record<string, string>\n    >((obj, [key, damageType]: [string, any]) => {\n      obj[key] = damageType.icon;\n      return obj;\n    }, {});\n    const healingTypes = Object.entries(CONFIG.DND5E.healingTypes).reduce<\n      Record<string, string>\n    >((obj, [key, damageType]: [string, any]) => {\n      obj[key] = damageType.icon;\n      return obj;\n    }, {});\n    return {\n      ...damageTypes,\n      ...healingTypes,\n    };\n  }\n}\n\nexport function actorUsesActionFeature(actor: Actor5e) {\n  const selectedTabIds = TidyFlags.selectedTabs.get(actor);\n\n  if (selectedTabIds) {\n    return selectedTabIds.includes(CONSTANTS.TAB_ACTOR_ACTIONS);\n  }\n\n  const defaultTabIds =\n    actor.type === CONSTANTS.SHEET_TYPE_CHARACTER\n      ? SettingsProvider.settings.defaultCharacterSheetTabs.get()\n      : actor.type === CONSTANTS.SHEET_TYPE_NPC\n      ? SettingsProvider.settings.defaultNpcSheetTabs.get()\n      : actor.type === CONSTANTS.SHEET_TYPE_VEHICLE\n      ? SettingsProvider.settings.defaultVehicleSheetTabs.get()\n      : [];\n\n  return defaultTabIds.includes(CONSTANTS.TAB_ACTOR_ACTIONS);\n}\n","<script lang=\"ts\">\n  import type { Item5e } from 'src/types/item.types';\n  import ItemControl from './ItemControl.svelte';\n  import { isItemInActionList } from 'src/features/actions/actions';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n\n  export let item: Item5e;\n\n  $: active = isItemInActionList(item);\n\n  let title: string;\n  $: {\n    const flagValue = TidyFlags.actionFilterOverride.get(item);\n    const titleKey =\n      flagValue === true\n        ? 'TIDY5E.Actions.OverriddenSetOverrideFalse'\n        : flagValue === false\n          ? 'TIDY5E.Actions.OverriddenSetOverrideTrue'\n          : isItemInActionList(item)\n            ? 'TIDY5E.Actions.SetOverrideFalse'\n            : 'TIDY5E.Actions.SetOverrideTrue';\n\n    title = localize(titleKey);\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemControl\n  iconCssClass=\"fas fa-fist-raised\"\n  {active}\n  {title}\n  onclick={(ev) =>\n    ev.shiftKey\n      ? TidyFlags.actionFilterOverride.unset(item)\n      : TidyFlags.actionFilterOverride.set(item, !isItemInActionList(item))}\n/>\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\nexport function processInputChangeDelta(\n  value: string,\n  entity: unknown,\n  field: string\n) {\n  if (['+', '-'].includes(value[0])) {\n    const delta = parseFloat(value);\n    return Number(FoundryAdapter.getProperty(entity, field)) + delta;\n  } else if (value[0] === '=') {\n    return Number(value.slice(1));\n  }\n  return Number(value);\n}\n","<script lang=\"ts\">\n  import { processInputChangeDelta } from 'src/utils/form';\n  import { buildDataset } from 'src/utils/data';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type {\n    ContainerSheetContext,\n    ItemSheetContext,\n  } from 'src/types/item.types';\n  import type {\n    CharacterSheetContext,\n    NpcSheetContext,\n    VehicleSheetContext,\n  } from 'src/types/types';\n\n  type OnSaveChangeFn = (\n    event: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    },\n  ) => boolean;\n\n  export let value: string | number | null = null;\n  export let placeholder: string | null = null;\n  export let field: string;\n  export let document: any;\n  export let tooltip: string | null = null;\n  export let id: string | null = null;\n  export let dataset: Record<string, unknown> | null = null;\n  export let cssClass: string | null = null;\n  export let maxlength: number | null = null;\n  export let ariaDescribedBy: string | null = null;\n  export let selectOnFocus: boolean = false;\n  export let saveEmptyAsNull: boolean = false;\n  export let title: string | null = null;\n  export let allowDeltaChanges: boolean = false;\n  export let disabled: boolean = false;\n  export let onSaveChange: OnSaveChangeFn = () => true;\n  /**\n   * There are cases where related data must be updated together,\n   * else odd behaviors will result.\n   */\n  export let additionalDataToSave: Record<string, any> = {};\n  /**\n   * Stop propagation on input change event.\n   * Useful for cases when outside listeners like\n   * the FormApplication are clearing an input\n   * during a change event, since these inputs\n   * do not use the `[name]` attribute.\n   */\n  export let stopChangePropagation: boolean = false;\n\n  $: draftValue = value?.toString() ?? '';\n  $: actualDataset = buildDataset(dataset);\n  let theInput: HTMLInputElement | undefined;\n\n  async function saveChange(\n    event: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    },\n  ) {\n    stopChangePropagation && event.stopPropagation();\n\n    const targetValue = event.currentTarget.value;\n\n    let valueToSave =\n      saveEmptyAsNull && targetValue === ''\n        ? null\n        : !isNaN(parseInt(targetValue)) && allowDeltaChanges\n          ? processInputChangeDelta(targetValue, document, field)\n          : targetValue;\n\n    await document.update({\n      ...additionalDataToSave,\n      [field]: valueToSave,\n    });\n\n    draftValue = value?.toString() ?? '';\n\n    setTimeout(() => {\n      if (selectOnFocus && theInput === window.document.activeElement) {\n        theInput.select();\n      }\n    });\n  }\n\n  const context =\n    getContext<\n      Readable<\n        | CharacterSheetContext\n        | NpcSheetContext\n        | VehicleSheetContext\n        | ContainerSheetContext\n        | ItemSheetContext\n      >\n    >('context');\n\n  $: activeEffectApplied = ActiveEffectsHelper.isActiveEffectAppliedToField(\n    document,\n    field,\n  );\n\n  $: isEnchanted =\n    $context.itemOverrides instanceof Set && $context.itemOverrides.has(field);\n\n  $: overrideTooltip = isEnchanted\n    ? localize('DND5E.Enchantment.Warning.Override')\n    : localize('DND5E.ActiveEffectOverrideWarning');\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<input\n  bind:this={theInput}\n  type=\"text\"\n  {id}\n  bind:value={draftValue}\n  {placeholder}\n  data-tooltip={activeEffectApplied ? overrideTooltip : tooltip}\n  {...actualDataset}\n  class={cssClass}\n  {maxlength}\n  aria-describedby={ariaDescribedBy}\n  {title}\n  disabled={disabled || activeEffectApplied}\n  on:change={(ev) => onSaveChange(ev) && saveChange(ev)}\n  on:click\n  on:keypress\n  on:focus={(ev) => selectOnFocus && ev.currentTarget.select()}\n  {...$$props.attributes}\n  data-tidy-field={field}\n/>\n","<script lang=\"ts\" generics=\"TParam\">\n  import type { RenderableClassicControl } from 'src/types/types';\n\n  export let controls: RenderableClassicControl<TParam>[];\n  export let params: TParam;\n</script>\n\n<div class=\"tidy5e-classic-controls\">\n  {#each controls as control}\n    {#if control.visible === undefined || control.visible(params)}\n      <svelte:component this={control.component} {...control.props?.(params)} />\n    {:else}\n      <span>&nbsp;</span>\n    {/if}\n  {/each}\n</div>\n\n<style lang=\"scss\">\n  .tidy5e-classic-controls {\n    flex: 1;\n    align-self: stretch;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    font-size: 0.75rem;\n    gap: 0.125rem;\n\n    :global(> *) {\n      flex: 1;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import type { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import { settingStore } from 'src/settings/settings';\n  import type { Item5e } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n\n  export let inlineContainerToggleService: InlineContainerToggleService;\n  export let item: Item5e;\n  export let iconClass: string = '';\n\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  $: inlineContainerToggleServiceStore = inlineContainerToggleService.store;\n</script>\n\n<button\n  type=\"button\"\n  class=\"inline-container-toggle inline-transparent-button\"\n  on:click={() => inlineContainerToggleService.toggle(tabId, item.id)}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.INLINE_CONTAINER_TOGGLE}\n>\n  {#if $inlineContainerToggleServiceStore.get(tabId)?.has(item.id)}\n    <i class=\"fa-solid fa-box-open fa-fw {iconClass}\" />\n  {:else}\n    <i class=\"fa-solid fa-box fa-fw {iconClass}\" />\n  {/if}\n</button>\n","import { writable, type Writable } from 'svelte/store';\n\n/** Service for tracking which inline containers are currently expanded to show their contents. */\nexport class InlineContainerToggleService {\n  /** Container IDs which represent all containers that are currently expanded. */\n  store: Writable<Map<string, Set<string>>> = writable(\n    new Map<string, Set<string>>()\n  );\n\n  /** Toggle a container to be expanded or collapsed, based on its current state. */\n  toggle(tabId: string, containerId: string) {\n    this.store.update((tabs) => {\n      if (!tabs.has(tabId)) {\n        tabs.set(tabId, new Set<string>());\n      }\n\n      const tab = tabs.get(tabId)!;\n\n      if (tab.has(containerId)) {\n        tab.delete(containerId);\n      } else {\n        tab.add(containerId);\n      }\n\n      return tabs;\n    });\n  }\n}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Item5e } from 'src/types/item.types';\n  import type { ContainerCapacityContext } from 'src/types/types';\n\n  export let container: Item5e;\n  export let capacity: ContainerCapacityContext;\n  export let showLabel = true;\n\n  $: readableValue =\n    container.system.capacity.type === CONSTANTS.ITEM_CAPACITY_TYPE_WEIGHT\n      ? (capacity.value ?? 0).toFixed(2)\n      : Math.ceil(capacity.value ?? 0);\n\n  $: capacityLabel = `${readableValue}/${capacity.max} ${capacity.units}`;\n\n  $: percentage = Math.round(capacity.pct);\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"tidy-capacity\"\n  role=\"meter\"\n  aria-label={localize('DND5E.ItemContainerCapacity')}\n  title={capacityLabel}\n  aria-valuetext={capacityLabel}\n  aria-valuemin=\"0\"\n  aria-valuenow={capacity.value}\n  aria-valuemax={capacity.max}\n  style=\"--percentage: {percentage}%\"\n  class:empty={percentage === 0}\n>\n  {#if showLabel}\n    <span class=\"capacity-label\">\n      {capacityLabel}\n    </span>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .tidy-capacity {\n    position: relative;\n    height: var(--capacity-bar-height, 1rem);\n    border-radius: var(--capacity-bar-container-border-radius, 0.1875rem);\n    background: var(--t5e-capacity-container-background);\n    border: 0.0625rem solid var(--t5e-capacity-container-border-color);\n\n    &:not(.empty)::before {\n      content: '';\n      position: absolute;\n      inline-size: var(--percentage);\n      inset: 0;\n      max-inline-size: calc(100% - 0.25rem);\n      margin: 0.0625rem;\n      border: 0.0625rem solid var(--t5e-capacity-border-color);\n      border-radius: 0.125rem;\n      background: var(--t5e-capacity-background);\n      transition: width 0.5s ease;\n    }\n\n    .capacity-label {\n      font-size: 0.75rem;\n      display: block;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      color: var(--t5e-capacity-text-color);\n      text-shadow:\n        0 0 0.125rem var(--t5e-capacity-bar-text-shadow-color),\n        0 0 0.125rem var(--t5e-capacity-bar-text-shadow-color),\n        0 0 0.125rem var(--t5e-capacity-bar-text-shadow-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import ExpandableContainer from 'src/components/expandable/ExpandableContainer.svelte';\n  import { ExpandCollapseService } from 'src/features/expand-collapse/ExpandCollapseService';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import { getContext } from 'svelte';\n  import type { MessageBus } from 'src/types/types';\n\n  export let key: string;\n  export let toggleable: boolean = true;\n\n  let { class: cssClass, ...attributes } = $$restProps;\n\n  const messageBus = getContext<MessageBus>(\n    CONSTANTS.SVELTE_CONTEXT.MESSAGE_BUS,\n  );\n  const tabId = getContext<string | undefined>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n  declareLocation('item-table', key);\n\n  const expandCollapseService = ExpandCollapseService.initService(toggleable);\n\n  $: expandedState = expandCollapseService.state;\n\n  $: {\n    if (\n      $messageBus?.tabId === tabId &&\n      $messageBus?.message === CONSTANTS.MESSAGE_BUS_EXPAND_ALL\n    ) {\n      expandCollapseService.set(true);\n    }\n    if (\n      $messageBus?.tabId === tabId &&\n      $messageBus?.message === CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL\n    ) {\n      expandCollapseService.set(false);\n    }\n  }\n</script>\n\n<section\n  class=\"tidy-table {cssClass ?? ''}\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_TABLE}\n  data-tidy-section-key={key}\n  {...attributes}\n>\n  <slot name=\"header\" />\n  <ExpandableContainer expanded={$expandedState.expanded}>\n    <div class=\"item-table-body\">\n      <slot name=\"body\" />\n    </div>\n  </ExpandableContainer>\n</section>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { ExpandCollapseService } from 'src/features/expand-collapse/ExpandCollapseService';\n\n  export let expanded = true;\n</script>\n\n<i\n  class=\"expand-indicator fas fa-angle-right\"\n  class:expanded\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.EXPANSION_TOGGLE}\n></i>","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { ExpandCollapseService } from 'src/features/expand-collapse/ExpandCollapseService';\n  import TidyTableToggleIcon from 'src/components/table/TidyTableToggleIcon.svelte';\n\n  export let primary: boolean = false;\n  export let baseWidth: string | null = null;\n  export let title: string | null = null;\n\n  const expandCollapseService = ExpandCollapseService.getService();\n  $: expandState = expandCollapseService.state;\n</script>\n\n<div\n  class=\"tidy-table-header-cell {$$restProps.class ?? ''}\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TABLE_HEADER_CELL}\n  class:primary\n  style:flex-basis={baseWidth}\n  {title}\n>\n  {#if primary && $expandState.toggleable}\n    <TidyTableToggleIcon expanded={$expandState.expanded} />\n  {/if}\n  <slot />\n</div>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { ExpandCollapseService } from 'src/features/expand-collapse/ExpandCollapseService';\n  import { isUserInteractable } from 'src/utils/element';\n\n  const expandCollapseService = ExpandCollapseService.getService();\n\n  function handleHeaderRowClick(ev: MouseEvent) {\n    if (!$expandState.toggleable) {\n      return;\n    }\n\n    if (\n      ev.target instanceof HTMLElement &&\n      isUserInteractable(ev.target) &&\n      ev.target.getAttribute(CONSTANTS.SHEET_PART_ATTRIBUTE) !==\n        CONSTANTS.SHEET_PARTS.EXPANSION_TOGGLE\n    ) {\n      // Avoid eagerly toggling expansion when a contained interactable element is being clicked.\n      return;\n    }\n\n    ev.stopPropagation();\n\n    expandCollapseService.toggle();\n  }\n\n  $: expandState = expandCollapseService.state;\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<header\n  class=\"tidy-table-header-row\"\n  class:toggleable={$expandState.toggleable}\n  on:click={handleHeaderRowClick}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TABLE_HEADER_ROW}\n>\n  <slot />\n</header>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n\n  export let hidden: boolean = false;\n  export let rowContainerClass: string = '';\n  export let rowClass: string = '';\n  export let rowContainerAttributes: Record<string, unknown> = {};\n  export let rowAttributes: Record<string, unknown> = {};\n</script>\n\n<div\n  class=\"tidy-table-row-container {rowContainerClass ?? ''}\"\n  class:hidden\n  aria-hidden={hidden}\n  {...rowContainerAttributes}\n>\n  <!-- svelte-ignore a11y-no-static-element-interactions -->\n  <div\n    class=\"tidy-table-row {rowClass ?? ''}\"\n    data-tidy-table-row\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TABLE_ROW}\n    {...rowAttributes}\n    on:mousedown\n    on:mouseenter\n    on:mouseleave\n    on:dragstart\n  >\n    <slot />\n  </div>\n\n  <!-- Consider an alternative: don't require content to be nested within this component in order to be associated visually with the target row. -->\n  <slot name=\"after-row\" />\n</div>\n","<script lang=\"ts\">\n  import TidyTableRow from 'src/components/table/TidyTableRow.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n  import type {\n    Item5e,\n    ItemCardContentComponent,\n    ItemChatData,\n  } from 'src/types/item.types';\n  import type {\n    ExpandedItemData,\n    ExpandedItemIdToLocationsMap,\n    OnItemToggledFn,\n    ItemCardStore,\n  } from 'src/types/types';\n  import { warn } from 'src/utils/logging';\n  import { getContext, createEventDispatcher, onMount } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import ItemSummary from '../ItemSummary.svelte';\n  import ExpandableContainer from 'src/components/expandable/ExpandableContainer.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { TidyHooks } from 'src/foundry/TidyHooks';\n\n  export let item: Item5e | null = null;\n  export let contextMenu: { type: string; uuid: string } | null = null;\n  export let rowClass: string = '';\n  export let itemCardContentTemplate: ItemCardContentComponent | null = null;\n  export let hidden: boolean = false;\n\n  $: draggable = item;\n\n  const emptyChatData: ItemChatData = {\n    description: { value: '' },\n    properties: [],\n    unidentified: { description: '' },\n  };\n\n  const expandedItemData = getContext<ExpandedItemData>(\n    CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEM_DATA,\n  );\n  const context = getContext<Writable<unknown>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  const expandedItems = getContext<ExpandedItemIdToLocationsMap>(\n    CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEMS,\n  );\n  const onItemToggled = getContext<OnItemToggledFn>(\n    CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TOGGLED,\n  );\n  const location = getContext<string>(CONSTANTS.SVELTE_CONTEXT.LOCATION);\n\n  let card: Writable<ItemCardStore> | undefined = getContext<\n    Writable<ItemCardStore>\n  >(CONSTANTS.SVELTE_CONTEXT.CARD);\n  let showSummary = false;\n  let chatData: ItemChatData | undefined;\n  let useTransition: boolean = false;\n\n  async function toggleSummary() {\n    if (!item) {\n      warn('Unable to show summary. No item was provided.');\n      showSummary = false;\n      return;\n    }\n\n    chatData ??= await item.getChatData({ secrets: item.isOwner });\n    showSummary = !showSummary;\n    onItemToggled?.(item.id, showSummary, location);\n  }\n\n  async function onMouseEnter(event: Event) {\n    TidyHooks.tidy5eSheetsItemHoverOn(event, item);\n\n    if (!item?.getChatData || !$settingStore.itemCardsForAllItems) {\n      return;\n    }\n\n    card?.update((card) => {\n      card.item = item;\n      card.itemCardContentTemplate = itemCardContentTemplate;\n      return card;\n    });\n  }\n\n  async function onMouseLeave(event: Event) {\n    TidyHooks.tidy5eSheetsItemHoverOff(event, item);\n\n    card?.update((card) => {\n      card.item = null;\n      card.itemCardContentTemplate = null;\n      return card;\n    });\n  }\n\n  function handleDragStart(event: DragEvent) {\n    if (!draggable) {\n      return;\n    }\n\n    // Don't show cards while dragging\n    onMouseLeave(event);\n\n    card?.update((card) => {\n      return card;\n    });\n\n    const dragData = draggable.toDragData();\n    event.dataTransfer?.setData('text/plain', JSON.stringify(dragData));\n  }\n\n  function restoreItemSummaryIfExpanded() {\n    if (!item) {\n      useTransition = true;\n      return;\n    }\n\n    useTransition = false;\n\n    const isExpandedAtThisLocation = expandedItems?.get(item.id)?.has(location);\n\n    if (isExpandedAtThisLocation) {\n      chatData = expandedItemData.get(item.id);\n      showSummary = true;\n    }\n\n    setTimeout(() => {\n      useTransition = true;\n    });\n  }\n\n  onMount(() => {\n    let first = true;\n\n    const subscription = context?.subscribe(async (c: any) => {\n      if (first) {\n        first = false;\n        restoreItemSummaryIfExpanded();\n        return;\n      }\n\n      if (item && showSummary) {\n        item\n          .getChatData({ secrets: item.actor.isOwner })\n          .then((data: ItemChatData) => {\n            chatData = data;\n          });\n      } else if (item && !showSummary && chatData) {\n        // Reset chat data for non-expanded, hydrated chatData\n        // so it rehydrates on next open\n        chatData = undefined;\n      }\n    });\n\n    return subscription;\n  });\n</script>\n\n<div style=\"display: contents;\" class=\"item-table-row\">\n  <TidyTableRow\n    {hidden}\n    rowContainerAttributes={{\n      ['data-context-menu']: contextMenu?.type,\n      ['data-context-menu-document-uuid']: contextMenu?.uuid,\n      ['data-item-id']: item?.id,\n      ['data-tidy-table-row']: '',\n      ['data-tidy-sheet-part']: CONSTANTS.SHEET_PARTS.ITEM_TABLE_ROW,\n      ['data-tidy-item-type']: item?.type ?? 'unknown',\n    }}\n    rowAttributes={{\n      draggable: !!draggable,\n    }}\n    {rowClass}\n    on:mousedown={(event) =>\n      item && FoundryAdapter.editOnMiddleClick(event, item)}\n    on:mouseenter={onMouseEnter}\n    on:mouseleave={onMouseLeave}\n    on:dragstart={handleDragStart}\n  >\n    <slot {toggleSummary} />\n\n    <svelte:fragment slot=\"after-row\">\n      <ExpandableContainer expanded={showSummary}>\n        <ItemSummary\n          chatData={chatData ?? emptyChatData}\n          {useTransition}\n          {item}\n        />\n      </ExpandableContainer>\n    </svelte:fragment>\n  </TidyTableRow>\n</div>\n\n<style lang=\"scss\">\n  .item-table-row {\n    :global(.tidy-table-row.prepared) {\n      --t5e-tidy-table-row-background: var(--t5e-prepared-background);\n    }\n\n    :global(.tidy-table-row.always-prepared) {\n      --t5e-tidy-table-row-background: var(--t5e-alwaysprepared-background);\n    }\n\n    :global(.tidy-table-row.pact) {\n      --t5e-tidy-table-row-background: var(--t5e-pact-background);\n    }\n\n    :global(.tidy-table-row.at-will) {\n      --t5e-tidy-table-row-background: var(--t5e-atwill-background);\n    }\n\n    :global(.tidy-table-row.ritual-only) {\n      --t5e-tidy-table-row-background: var(--t5e-ritual-only-background);\n    }\n\n    :global(.tidy-table-row.innate) {\n      --t5e-tidy-table-row-background: var(--t5e-innate-background);\n    }\n\n    :global(.tidy-table-row.equipped) {\n      --t5e-tidy-table-row-background: var(--t5e-equipped-background);\n    }\n\n    :global(.tidy-table-row.magic-item) {\n      box-shadow: 0 0 0 0.0625rem var(--t5e-magic-accent-color) inset;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { writable } from 'svelte/store';\n\n  export let primary: boolean = false;\n  export let title: string | undefined = undefined;\n\n  const isHovering = writable<boolean>(false);\n\n  function mouseEnter(ev: MouseEvent) {\n    isHovering.set(true);\n  }\n\n  function mouseLeave(ev: MouseEvent) {\n    isHovering.set(false);\n  }\n</script>\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<div\n  class=\"tidy-table-cell {$$restProps.class ?? ''}\"\n  class:primary\n  {title}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.TABLE_CELL}\n  on:mouseenter={mouseEnter}\n  on:mouseleave={mouseLeave}\n  {...$$restProps.attributes}\n>\n  <slot {isHovering} />\n</div>\n","<script lang=\"ts\">\n  import TidyTable from 'src/components/table/TidyTable.svelte';\n  import TidyTableHeaderCell from 'src/components/table/TidyTableHeaderCell.svelte';\n  import TidyTableHeaderRow from 'src/components/table/TidyTableHeaderRow.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ContainerItemContext, Item5e } from 'src/types/item.types';\n  import type { Actor5e, InventorySection } from 'src/types/types';\n  import ItemDeleteControl from 'src/components/item-list/controls/ItemDeleteControl.svelte';\n  import ItemEditControl from 'src/components/item-list/controls/ItemEditControl.svelte';\n  import ItemTableRowV2 from 'src/components/item-list/v2/ItemTableRowV2.svelte';\n  import TidyTableCell from 'src/components/table/TidyTableCell.svelte';\n  import ItemUseButton from 'src/components/item-list/ItemUseButton.svelte';\n  import ItemName from 'src/components/item-list/ItemName.svelte';\n  import InlineFavoriteIcon from 'src/components/item-list/InlineFavoriteIcon.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import InlineContainerToggle from 'src/sheets/container/InlineContainerToggle.svelte';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { getContext } from 'svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\n  import type { Readable } from 'svelte/store';\n  import InlineContainerView from './InlineContainerView.svelte';\n\n  export let contents: InventorySection[];\n  export let container: Item5e;\n  export let editable: boolean;\n  export let itemContext: Record<string, ContainerItemContext>;\n  export let inlineContainerToggleService: InlineContainerToggleService;\n  export let lockItemQuantity: boolean;\n  /** The sheet which is rendering this recursive set of container contents. */\n  export let sheetDocument: Actor5e | Item5e;\n\n  const tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  $: configuredContents = SheetSections.configureInventory(\n    contents.filter((i) => i.items.length),\n    tabId,\n    SheetPreferencesService.getByType(sheetDocument.type),\n    TidyFlags.sectionConfig.get(container)?.[CONSTANTS.TAB_CONTAINER_CONTENTS],\n  );\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  const classicControls = [\n    {\n      component: ItemEditControl,\n      getProps: (item: Item5e) => ({ item }),\n    },\n    {\n      component: ItemDeleteControl,\n      getProps: (item: Item5e) => ({\n        item,\n        deleteFn: () => item.deleteDialog(),\n      }),\n    },\n  ];\n\n  const weightUnit = FoundryAdapter.getWeightUnit();\n\n  const classicControlWidthRems = 1.5;\n\n  $: useClassicControls = FoundryAdapter.useClassicControls(container);\n\n  $: classicControlsWidth = useClassicControls\n    ? `/* Controls */ ${classicControlWidthRems * classicControls.length}rem`\n    : '';\n\n  $: gridTemplateColumns = `/* Name */ 1fr /* Weight */ 3rem /* Quantity */ 3rem ${classicControlsWidth}`;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#each configuredContents as section (section.key)}\n  {#if section.show}\n    <section\n      class=\"container-contents-list-section\"\n      style=\"--grid-template-columns: {gridTemplateColumns};\"\n    >\n      <TidyTable\n        key={section.key}\n        data-custom-section={section.custom ? true : null}\n      >\n        <svelte:fragment slot=\"header\">\n          <TidyTableHeaderRow>\n            <TidyTableHeaderCell primary={true}>\n              {localize(section.label)} ({section.items.length})\n            </TidyTableHeaderCell>\n            <TidyTableHeaderCell>\n              {localize('DND5E.Weight')}\n            </TidyTableHeaderCell>\n            <TidyTableHeaderCell>\n              {localize('DND5E.QuantityAbbr')}\n            </TidyTableHeaderCell>\n            {#if editable && useClassicControls}\n              <TidyTableHeaderCell></TidyTableHeaderCell>\n            {/if}\n          </TidyTableHeaderRow>\n        </svelte:fragment>\n        <svelte:fragment slot=\"body\">\n          {#each section.items as item (item.id)}\n            {@const ctx = itemContext[item.id]}\n            {@const weight = ctx?.totalWeight ?? item.system.weight.value}\n\n            <ItemTableRowV2\n              {item}\n              hidden={!!$itemIdsToShow && !$itemIdsToShow.has(item.id)}\n              rowClass={FoundryAdapter.getInventoryRowClasses(\n                item,\n                itemContext[item.id]?.attunement,\n              )}\n              let:toggleSummary\n              contextMenu={{\n                type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n                uuid: item.uuid,\n              }}\n            >\n              <TidyTableCell class=\"flex-row extra-small-gap\">\n                <ItemUseButton\n                  disabled={!FoundryAdapter.canUseItem(item)}\n                  {item}\n                />\n                {#if 'containerContents' in ctx && !!ctx.containerContents}\n                  <InlineContainerToggle\n                    {item}\n                    {inlineContainerToggleService}\n                  />\n                {/if}\n                <!-- This is generally what we want in Tidy Tables / Item Table V2; consider breaking off ItemNameV2 to propagate and replace the old ItemName gradually. -->\n                <ItemName\n                  on:toggle={() => toggleSummary()}\n                  cssClass=\"align-self-stretch flex-row align-items-center\"\n                  {item}\n                >\n                  <span\n                    class=\"truncate\"\n                    data-tidy-item-name={item.name}\n                    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                    >{item.name}</span\n                  >\n                </ItemName>\n                {#if !FoundryAdapter.concealDetails(item)}\n                  {@const attunementContext =\n                    FoundryAdapter.getAttunementContext(item)}\n\n                  {#if attunementContext}\n                    <i\n                      style=\"margin-left: auto; align-self: center;\"\n                      class=\"item-state-icon fas {attunementContext.icon} {attunementContext.cls} fa-fw\"\n                      title={localize(attunementContext.title)}\n                    />\n                  {/if}\n                {/if}\n                {#if !!ctx.favoriteId}\n                  <InlineFavoriteIcon />\n                {/if}\n              </TidyTableCell>\n              <TidyTableCell\n                title={localize('TIDY5E.Inventory.Weight.Text', {\n                  weight: weight,\n                  weightUnit: weightUnit,\n                })}\n              >\n                <span class=\"truncate\">\n                  {weight}\n                </span>\n              </TidyTableCell>\n              <TidyTableCell>\n                <!-- Qty -->\n                <TextInput\n                  document={item}\n                  field=\"system.quantity\"\n                  value={item.system.quantity}\n                  selectOnFocus={true}\n                  disabled={!editable || lockItemQuantity}\n                  placeholder=\"0\"\n                  allowDeltaChanges={true}\n                />\n              </TidyTableCell>\n              {#if editable && useClassicControls}\n                <TidyTableCell>\n                  {#each classicControls as control}\n                    <svelte:component\n                      this={control.component}\n                      {...control.getProps(item)}\n                    ></svelte:component>\n                  {/each}\n                </TidyTableCell>\n              {/if}\n            </ItemTableRowV2>\n            {#if 'containerContents' in ctx && !!ctx.containerContents}\n              <InlineContainerView\n                container={item}\n                containerContents={ctx.containerContents}\n                {editable}\n                {inlineContainerToggleService}\n                {lockItemQuantity}\n                {sheetDocument}\n              />\n            {/if}\n          {/each}\n        </svelte:fragment>\n      </TidyTable>\n    </section>\n  {/if}\n{/each}\n","<script lang=\"ts\">\n  import ExpandableContainer from 'src/components/expandable/ExpandableContainer.svelte';\n  import CapacityBar from './CapacityBar.svelte';\n  import ContainerContentsSections from './ContainerContentsSections.svelte';\n  import type { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ContainerContents, Item5e } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n\n  export let container: Item5e;\n  export let containerContents: ContainerContents;\n  export let editable: boolean;\n  export let inlineContainerToggleService: InlineContainerToggleService;\n  export let lockItemQuantity: boolean;\n  export let sheetDocument: any;\n\n  $: inlineContainerToggleServiceStore = inlineContainerToggleService.store;\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  async function onDrop(\n    event: DragEvent & { currentTarget: EventTarget & HTMLElement },\n  ) {\n    container.sheet._onDrop(event);\n\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n</script>\n\n<ExpandableContainer\n  expanded={$inlineContainerToggleServiceStore.get(tabId)?.has(container.id) ===\n    true}\n  class={!!$itemIdsToShow && !$itemIdsToShow.has(container.id) ? 'hidden' : ''}\n>\n  <!-- TODO: Apply proper a11y trappings for this -->\n  <!-- svelte-ignore a11y-no-static-element-interactions -->\n  <div\n    class=\"flex-column extra-small-gap flex-1 inline-container-view\"\n    data-tidy-container-id={container.id}\n    on:drop={onDrop}\n  >\n    <CapacityBar {container} capacity={containerContents.capacity} />\n    <ContainerContentsSections\n      contents={containerContents.contents}\n      {container}\n      {editable}\n      itemContext={containerContents.itemContext}\n      {lockItemQuantity}\n      {inlineContainerToggleService}\n      {sheetDocument}\n    />\n    {#if !containerContents.contents.some((c) => c.items.length > 0)}\n      <div class=\"empty-container\">\n        <span class=\"empty-container-text\"\n          >{FoundryAdapter.localize('TIDY5E.EmptyContainer')}</span\n        >\n      </div>\n    {/if}\n  </div>\n</ExpandableContainer>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Item5e } from 'src/types/item.types';\n  import ItemTable from '../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from '../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from '../../components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableFooter from '../../components/item-list/ItemTableFooter.svelte';\n  import ItemTableColumn from '../../components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableCell from '../../components/item-list/v1/ItemTableCell.svelte';\n  import ItemUseButton from '../../components/item-list/ItemUseButton.svelte';\n  import ItemName from '../../components/item-list/ItemName.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemUses from '../../components/item-list/ItemUses.svelte';\n  import ItemAddUses from '../../components/item-list/ItemAddUses.svelte';\n  import ItemDeleteControl from '../../components/item-list/controls/ItemDeleteControl.svelte';\n  import ItemEditControl from '../../components/item-list/controls/ItemEditControl.svelte';\n  import EquipControl from '../../components/item-list/controls/EquipControl.svelte';\n  import AttuneControl from '../../components/item-list/controls/AttuneControl.svelte';\n  import InlineFavoriteIcon from '../../components/item-list/InlineFavoriteIcon.svelte';\n  import ItemFavoriteControl from '../../components/item-list/controls/ItemFavoriteControl.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type {\n    CharacterSheetContext,\n    InventorySection,\n    NpcSheetContext,\n    RenderableClassicControl,\n  } from 'src/types/types';\n  import AmmoSelector from './AmmoSelector.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import ActionFilterOverrideControl from 'src/components/item-list/controls/ActionFilterOverrideControl.svelte';\n  import { coalesce } from 'src/utils/formatting';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import InlineContainerToggle from '../container/InlineContainerToggle.svelte';\n  import { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import InlineContainerView from '../container/InlineContainerView.svelte';\n\n  export let primaryColumnName: string;\n  export let items: Item5e[];\n  export let section: InventorySection;\n  export let extraInventoryRowClasses: string = '';\n  export let lockControls: boolean = false;\n  export let allowFavoriteIconNextToName: boolean = true;\n  export let includeWeightColumn: boolean = true;\n\n  let inlineContainerToggleService = getContext<InlineContainerToggleService>(\n    CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n  );\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  const localize = FoundryAdapter.localize;\n  const weightUnit = FoundryAdapter.getWeightUnit();\n\n  // TODO: Assign these controls to the inventory prop in `getData()`. Leave room for the API to inject additional controls.\n  let controls: RenderableClassicControl<{ item: Item5e; ctx: any }>[] = [];\n\n  $: {\n    controls = [];\n    controls.push(\n      {\n        component: AttuneControl,\n        props: ({ item, ctx }) => ({\n          item,\n          ctx,\n        }),\n        visible: ({ item, ctx }) =>\n          ctx?.attunement && !FoundryAdapter.concealDetails(item),\n      },\n      {\n        component: EquipControl,\n        props: ({ item, ctx }) => ({\n          item,\n          ctx,\n        }),\n        visible: ({ ctx }) => ctx?.canToggle === true,\n      },\n    );\n\n    if ('favorites' in $context.actor.system) {\n      controls.push({\n        component: ItemFavoriteControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n\n    controls.push({\n      component: ItemEditControl,\n      props: ({ item }) => ({\n        item,\n      }),\n    });\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemDeleteControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n\n    if ($context.useActionsFeature) {\n      controls.push({\n        component: ActionFilterOverrideControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n\n  function getInventoryRowClasses(item: Item5e) {\n    const extras: string[] = [];\n\n    if (extraInventoryRowClasses) {\n      extras.push(extraInventoryRowClasses);\n    }\n\n    return FoundryAdapter.getInventoryRowClasses(\n      item,\n      $context.itemContext[item.id],\n      extras,\n    );\n  }\n</script>\n\n<section class=\"inventory-list-section\">\n  <ItemTable\n    key={section.key}\n    data-custom-section={section.custom ? true : null}\n  >\n    <svelte:fragment slot=\"header\">\n      <ItemTableHeaderRow>\n        <ItemTableColumn primary={true}>\n          {primaryColumnName}\n        </ItemTableColumn>\n        {#if includeWeightColumn}\n          <ItemTableColumn\n            title=\"{localize('DND5E.Weight')} ({weightUnit})\"\n            baseWidth=\"4rem\"\n          >\n            <i class=\"fas fa-weight-hanging\" />\n          </ItemTableColumn>\n        {/if}\n        <ItemTableColumn title={localize('DND5E.Charges')} baseWidth=\"3.125rem\">\n          <i class=\"fas fa-bolt\" />\n        </ItemTableColumn>\n        <ItemTableColumn baseWidth=\"7.5rem\">\n          {localize('DND5E.Usage')}\n        </ItemTableColumn>\n        <ItemTableColumn baseWidth=\"3rem\">\n          {localize('DND5E.QuantityAbbr')}\n        </ItemTableColumn>\n        {#if $context.editable && $context.useClassicControls && !lockControls}\n          <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n        {/if}\n      </ItemTableHeaderRow>\n    </svelte:fragment>\n    <svelte:fragment slot=\"body\">\n      {#each items as item (item.id)}\n        {@const ctx = $context.itemContext[item.id]}\n        {@const itemName =\n          item.system.identified === false\n            ? coalesce(\n                item.system.unidentified.name,\n                localize('DND5E.Unidentified.Title'),\n              )\n            : item.name}\n        <ItemTableRow\n          {item}\n          on:mousedown={(event) =>\n            FoundryAdapter.editOnMiddleClick(event.detail, item)}\n          contextMenu={{\n            type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n            uuid: item.uuid,\n          }}\n          let:toggleSummary\n          cssClass={getInventoryRowClasses(item)}\n          hidden={!!$itemIdsToShow && !$itemIdsToShow.has(item.id)}\n          favoriteId={'favoriteId' in ctx ? ctx.favoriteId : null}\n        >\n          <ItemTableCell primary={true}>\n            <ItemUseButton disabled={!$context.editable} {item} />\n            {#if 'containerContents' in ctx && !!ctx.containerContents}\n              <InlineContainerToggle {item} {inlineContainerToggleService} />\n            {/if}\n            <ItemName\n              on:toggle={() => toggleSummary($context.actor)}\n              cssClass=\"extra-small-gap\"\n              {item}\n            >\n              <span\n                class=\"truncate\"\n                data-tidy-item-name={itemName}\n                data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                >{itemName}</span\n              >\n              {#if item.system?.properties?.has('amm')}\n                <span class=\"ammo\">\n                  <AmmoSelector {item} />\n                </span>\n              {/if}\n            </ItemName>\n          </ItemTableCell>\n          {#if $settingStore.showIconsNextToTheItemName}\n            <ItemTableCell cssClass=\"no-border\">\n              {#if ctx?.attunement && !FoundryAdapter.concealDetails(item)}\n                <div class=\"item-detail attunement\">\n                  <i\n                    class=\"item-state-icon fas {ctx.attunement.icon} {ctx\n                      .attunement.cls}\"\n                    title={localize(ctx.attunement.title)}\n                  />\n                </div>\n              {/if}\n            </ItemTableCell>\n            {#if 'favoriteId' in ctx && !!ctx.favoriteId && allowFavoriteIconNextToName}\n              <InlineFavoriteIcon />\n            {/if}\n          {/if}\n          {#if includeWeightColumn}\n            {@const weight = ctx?.totalWeight ?? item.system.weight.value}\n            <ItemTableCell\n              baseWidth=\"4rem\"\n              title={localize('TIDY5E.Inventory.Weight.Tooltip', {\n                weight: weight,\n                weightUnit: weightUnit,\n              })}\n            >\n              <span class=\"truncate\">\n                {localize('TIDY5E.Inventory.Weight.Text', {\n                  weight: weight,\n                  weightUnit: weightUnit,\n                })}\n              </span>\n            </ItemTableCell>\n          {/if}\n          <ItemTableCell baseWidth=\"3.125rem\" title={localize('DND5E.Uses')}>\n            {#if ctx?.hasUses}\n              <ItemUses {item} />\n            {:else}\n              <ItemAddUses {item} />\n            {/if}\n          </ItemTableCell>\n          <ItemTableCell baseWidth=\"7.5rem\" title={localize('DND5E.Usage')}>\n            {#if item.system.activation?.type}\n              {item.labels?.activation ?? ''}\n            {/if}\n          </ItemTableCell>\n          <ItemTableCell baseWidth=\"3rem\">\n            <TextInput\n              document={item}\n              field=\"system.quantity\"\n              value={item.system.quantity}\n              selectOnFocus={true}\n              disabled={!$context.editable || $context.lockItemQuantity}\n              placeholder=\"0\"\n              allowDeltaChanges={true}\n              cssClass=\"text-align-center\"\n            />\n          </ItemTableCell>\n          {#if $context.editable && $context.useClassicControls && !lockControls}\n            <ItemTableCell baseWidth={classicControlsColumnWidth}>\n              <ClassicControls {controls} params={{ item: item, ctx: ctx }} />\n            </ItemTableCell>\n          {/if}\n        </ItemTableRow>\n        {#if 'containerContents' in ctx && !!ctx.containerContents}\n          <InlineContainerView\n            container={item}\n            containerContents={ctx.containerContents}\n            editable={$context.editable}\n            {inlineContainerToggleService}\n            lockItemQuantity={$context.lockItemQuantity}\n            sheetDocument={$context.actor}\n          />\n        {/if}\n      {/each}\n      {#if $context.unlocked && section.canCreate}\n        <ItemTableFooter actor={$context.actor} {section} isItem={true} />\n      {/if}\n    </svelte:fragment>\n  </ItemTable>\n</section>\n\n<style lang=\"scss\">\n  .inventory-list-section {\n    .item-detail.attunement {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 0 0.25rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { Item5e } from 'src/types/item.types';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let item: Item5e;\n\n  const localize = FoundryAdapter.localize;\n\n  $: rechargeLabel =\n    item.system.recharge?.charged === false\n      ? localize('TIDY5E.RollRecharge.Hint', {\n          rechargeLabel: item.labels?.recharge ?? '',\n        })\n      : item.labels?.recharge ?? '';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<button\n  type=\"button\"\n  class=\"item-list-button\"\n  title={rechargeLabel}\n  on:click={(ev) =>\n    ev.shiftKey\n      ? item.update({ 'system.recharge.charged': true })\n      : item.rollRecharge()}\n  disabled={!$context.owner}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n>\n  <i class=\"fas fa-dice-six\" />\n  {item.system.recharge\n    ?.value}{#if item.system.recharge?.value !== 6}+{/if}</button\n>\n","<script lang=\"ts\">\n  import type { Item5e } from 'src/types/item.types';\n  import type {\n    CharacterFeatureSection,\n    CharacterSheetContext,\n  } from 'src/types/types';\n  import ItemTable from '../../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from '../../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableColumn from '../../../components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableRow from '../../../components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableCell from '../../../components/item-list/v1/ItemTableCell.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n  import ItemAddUses from '../../../components/item-list/ItemAddUses.svelte';\n  import ItemName from '../../../components/item-list/ItemName.svelte';\n  import ItemUseButton from '../../../components/item-list/ItemUseButton.svelte';\n  import ItemUses from '../../../components/item-list/ItemUses.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import RechargeControl from 'src/components/item-list/controls/RechargeControl.svelte';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  export let items: Item5e[] = [];\n  export let section: CharacterFeatureSection;\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemTable key={section.key} data-custom-section={section.custom ? true : null}>\n  <svelte:fragment slot=\"header\">\n    <ItemTableHeaderRow>\n      <ItemTableColumn primary={true}>\n        {localize(section.label ?? 'DND5E.Features')}\n      </ItemTableColumn>\n      <ItemTableColumn baseWidth=\"3.125rem\">\n        {localize('DND5E.Uses')}\n      </ItemTableColumn>\n      <ItemTableColumn baseWidth=\"7.5rem\">\n        {localize('DND5E.Usage')}\n      </ItemTableColumn>\n    </ItemTableHeaderRow>\n  </svelte:fragment>\n  <svelte:fragment slot=\"body\">\n    {#each items as item (item.id)}\n      {@const ctx = $context.itemContext[item.id]}\n      <ItemTableRow\n        {item}\n        let:toggleSummary\n        on:mousedown={(event) =>\n          FoundryAdapter.editOnMiddleClick(event.detail, item)}\n        contextMenu={{\n          type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n          uuid: item.uuid,\n        }}\n        hidden={!!$itemIdsToShow && !$itemIdsToShow.has(item.id)}\n        favoriteId={ctx.favoriteId}\n      >\n        <ItemTableCell primary={true}>\n          <ItemUseButton disabled={!$context.editable} {item} />\n          <ItemName\n            on:toggle={() => toggleSummary($context.actor)}\n            hasChildren={false}\n            {item}\n          >\n            <span\n              data-tidy-item-name={item.name}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n              >{item.name}</span\n            >\n          </ItemName>\n        </ItemTableCell>\n        <ItemTableCell baseWidth=\"3.125rem\">\n          {#if item.isOnCooldown}\n            <RechargeControl {item} />\n          {:else if item.system.recharge?.value}\n            <i class=\"fas fa-bolt\" title={localize('DND5E.Charged')} />\n          {:else if ctx?.hasUses}\n            <ItemUses {item} />\n          {:else}\n            <ItemAddUses {item} />\n          {/if}\n        </ItemTableCell>\n        <ItemTableCell baseWidth=\"7.5rem\">\n          {#if item.system.activation?.type}\n            {item.labels?.activation ?? ''}\n          {/if}\n        </ItemTableCell>\n      </ItemTableRow>\n    {/each}\n  </svelte:fragment>\n</ItemTable>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let spell: any;\n\n  const spellAbbreviationMap = FoundryAdapter.getSpellAbbreviationMap();\n</script>\n\n{#each spell.labels.components.all as component}\n  <span\n    class=\"spell-component\"\n    class:spell-tag={component.tag}\n    title={spellAbbreviationMap.get(component.abbr)}>{component.abbr}</span\n  >\n{/each}\n\n<style lang=\"scss\">\n  .spell-component.spell-tag {\n    color: var(--t5e-background);\n    background: var(--t5e-tertiary-color);\n    border-radius: 0.125rem;\n    padding: 0.0625rem 0.0625rem 0 0.0625rem;\n    margin: 0 0 0 0.0625rem;\n    line-height: 0.75rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { settingStore } from 'src/settings/settings';\n  import { onMount } from 'svelte';\n\n  export let isEmpty: boolean;\n  export let willChange: boolean;\n  export let disabled: boolean;\n\n  let pipEl: HTMLElement;\n  let animateExpended = false;\n  let animateRestored = false;\n  $: {\n    handlePipAnimation(isEmpty);\n  }\n\n  let animatePips = false;\n  onMount(() => {\n    animatePips = true;\n  });\n\n  function handlePipAnimation(isEmpty: boolean) {\n    if (\n      // Don't animate when the pip is still initializing\n      !animatePips ||\n      // Don't animate when the pip is not visible, as it will cause the pip to animate every time it becomes visible, until toggle manually\n      // Note: offsetParent === null when the pip is hidden because of an ancestor being hidden (e.g., the tab isn't selected)\n      !pipEl.offsetParent\n    ) {\n      return;\n    }\n    animateExpended = isEmpty;\n    animateRestored = !isEmpty;\n  }\n</script>\n\n<button\n  bind:this={pipEl}\n  type=\"button\"\n  class=\"pip\"\n  class:empty={isEmpty}\n  class:change={willChange}\n  class:animate-expended={animateExpended}\n  class:animate-restored={animateRestored}\n  on:click\n  on:mouseenter\n  on:mouseleave\n  on:focusin\n  on:focusout\n  on:transitionend={() => {\n    // Prevent unwanted additional animations after the pip effect has ended.\n    animateExpended = false;\n    animateRestored = false;\n  }}\n  {disabled}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n/>\n\n<style lang=\"scss\">\n  .pip {\n    margin: 0;\n    padding: 0;\n    line-height: normal;\n    width: 0.75rem;\n    height: 0.75rem;\n    border-radius: 50%;\n    background-color: var(--t5e-spell-pip-active-background);\n    border: 0.0625rem solid var(--t5e-spell-pip-border-color);\n    transition: background-color 0.3s ease;\n\n    &:is(:hover, :focus-visible),\n    &.change {\n      background-color: var(--t5e-warning-accent-color);\n    }\n\n    &.empty {\n      background: var(--t5e-spell-pip-empty-background);\n\n      &:is(:hover, :focus-visible),\n      &.change {\n        background-color: var(--t5e-prepared-background);\n      }\n    }\n\n    &.animate-expended {\n      animation: expended-pip 0.5s ease;\n    }\n    &.animate-restored {\n      animation: restored-pip 0.5s ease;\n    }\n\n    @keyframes expended-pip {\n      0% {\n        box-shadow: 0 0 0 0 var(--t5e-primary-accent-color);\n      }\n      100% {\n        box-shadow: 0 0 0 0.375rem rgba(0, 0, 0, 0);\n      }\n    }\n\n    @keyframes restored-pip {\n      0% {\n        box-shadow: 0 0 0 0.375rem var(--t5e-primary-accent-color);\n      }\n      100% {\n        box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type {\n    CharacterSheetContext,\n    NpcSheetContext,\n    SpellbookSection,\n  } from 'src/types/types';\n  import { getContext, type ComponentProps } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import SpellPip from './SpellPip.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  type SpellPipProps = ComponentProps<SpellPip> & { index: number };\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  export let section: SpellbookSection;\n\n  let targetedDotIndex: number | null = null;\n\n  function onSpellMarkerClick(section: SpellbookSection, markerIndex: number) {\n    let isEmpty = markerIndex >= (section.uses ?? 0);\n\n    let value = isEmpty ? markerIndex + 1 : markerIndex;\n\n    $context.actor.update({\n      [`system.spells.${section.prop}.value`]: value,\n    });\n  }\n\n  function isEmpty(index: number) {\n    return index >= (section.uses ?? 0);\n  }\n\n  function willChange(index: number): boolean {\n    if (targetedDotIndex === null) {\n      return false;\n    }\n\n    return (\n      (isEmpty(index) && index <= targetedDotIndex) ||\n      (!isEmpty(index) && index >= targetedDotIndex)\n    );\n  }\n\n  function onMouseEnterDot(index: number) {\n    targetedDotIndex = index;\n    pips = generatePips();\n  }\n\n  function onMouseLeaveDot(index: number) {\n    targetedDotIndex = null;\n    pips = generatePips();\n  }\n\n  function generatePips(): SpellPipProps[] {\n    return Array.from({ length: section.slots ?? 0 }, (x, i) => ({\n      index: i,\n      isEmpty: isEmpty(i),\n      willChange: willChange(i),\n      disabled: !$context.editable,\n    }));\n  }\n\n  let pips: SpellPipProps[];\n  $: section, (pips = generatePips());\n</script>\n\n{#if (section.slots ?? 0) > 0}\n  <div class=\"spell-slot-markers\">\n    {#each pips as pip}\n      <SpellPip\n        disabled={pip.disabled}\n        isEmpty={pip.isEmpty}\n        willChange={pip.willChange}\n        on:click={() => onSpellMarkerClick(section, pip.index)}\n        on:mouseenter={() => onMouseEnterDot(pip.index)}\n        on:mouseleave={() => onMouseLeaveDot(pip.index)}\n        on:focusin={() => onMouseEnterDot(pip.index)}\n        on:focusout={() => onMouseLeaveDot(pip.index)}\n      />\n    {/each}\n  </div>\n{/if}\n\n<style lang=\"scss\">\n  .spell-slot-markers {\n    display: flex;\n    gap: 0.125rem;\n    margin-top: -0.125rem;\n    align-items: center;\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<button\n  type=\"button\"\n  class=\"spell-slot-config inline-icon-button\"\n  title={localize('DND5E.SpellSlotsConfig')}\n  aria-label={localize('DND5E.SpellSlotsConfig')}\n  on:click={() => FoundryAdapter.openSpellSlotsConfig($context.actor)}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n>\n  <i class=\"fas fa-pencil\" />\n</button>\n","<script lang=\"ts\">\n  import {\n    type CharacterSheetContext,\n    type NpcSheetContext,\n    type SpellbookSection,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import TextInput from '../inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  export let section: SpellbookSection;\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<div class=\"spell-slots-detail\">\n  <TextInput\n    document={$context.actor}\n    field=\"system.spells.{section.prop}.value\"\n    cssClass=\"spell-slot-uses\"\n    value={section.uses}\n    placeholder=\"0\"\n    selectOnFocus={true}\n    allowDeltaChanges={true}\n    disabled={!$context.editable}\n  />\n  <span class=\"sep\"> / </span>\n\n  <span class=\"spell-max\" data-level={section.prop} data-slots={section.slots}>\n    {section.slots}\n  </span>\n</div>\n\n<style lang=\"scss\">\n  .spell-slots-detail {\n    display: flex;\n    flex: 0 0 0.0625rem;\n    align-items: center;\n    color: var(--t5e-secondary-color);\n    border-radius: 0.3125rem;\n    padding: 0 0.3125rem;\n\n    :global(input) {\n      text-align: right;\n      height: 0.8125rem;\n      margin-top: -0.0625rem;\n      min-width: 1rem;\n    }\n\n    .spell-max {\n      display: flex;\n      align-items: center;\n      line-height: 0.75rem;\n      text-align: left;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import type {\n    CharacterSheetContext,\n    NpcSheetContext,\n    SpellbookSection,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import SpellPips from './SpellPips.svelte';\n  import SpellSlotConfigButton from './SpellSlotConfigButton.svelte';\n  import SpellSlotUses from './SpellSlotUses.svelte';\n\n  export let section: SpellbookSection;\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<div class=\"flex-row extra-small-gap\">\n  {#if $context.spellSlotTrackerMode === CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS}\n    <SpellPips {section} />\n  {/if}\n  {#if $context.spellSlotTrackerMode === CONSTANTS.SPELL_SLOT_TRACKER_MODE_VALUE_MAX}\n    <SpellSlotUses {section} />\n  {/if}\n  {#if $context.unlocked}\n    <SpellSlotConfigButton />\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let ctx: any;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if ctx.concentration}\n  <i\n    class=\"concentration-overlay fas fa-arrow-rotate-left fa-spin fa-spin-reverse\"\n    aria-label={localize('DND5E.Concentration')}\n  ></i>\n{/if}\n\n<style lang=\"scss\">\n  .concentration-overlay {\n    --tidy-icon-font-size-internal: var(--tidy-icon-font-size, 1rem);\n    position: absolute;\n    opacity: 0.8;\n    font-size: var(--tidy-icon-font-size-internal);\n    pointer-events: none;\n\n    color: var(--t5e-item-image-icon-overlay-color);\n    text-shadow: var(--t5e-item-image-icon-overlay-text-shadow);\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import {\n    type CharacterSheetContext,\n    type SpellbookSection,\n  } from 'src/types/types';\n  import ItemName from '../../../components/item-list/ItemName.svelte';\n  import ItemTable from '../../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableCell from '../../../components/item-list/v1/ItemTableCell.svelte';\n  import ItemTableColumn from '../../../components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableHeaderRow from '../../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from '../../../components/item-list/v1/ItemTableRow.svelte';\n  import ItemUseButton from '../../../components/item-list/ItemUseButton.svelte';\n  import ItemUses from '../../../components/item-list/ItemUses.svelte';\n  import SpellComponents from '../../../components/spellbook/SpellComponents.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import SpellSlotManagement from 'src/components/spellbook/SpellSlotManagement.svelte';\n  import ConcentrationOverlayIcon from 'src/components/spellbook/ConcentrationOverlayIcon.svelte';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  export let section: SpellbookSection;\n  export let spells: any[];\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section class=\"spellbook-list-section\">\n  <ItemTable\n    key={section.key}\n    data-custom-section={section.custom ? true : null}\n  >\n    <svelte:fragment slot=\"header\">\n      <ItemTableHeaderRow>\n        <ItemTableColumn primary={true}>\n          {#if section.dataset['preparation.mode'] === CONSTANTS.SPELL_PREPARATION_MODE_PREPARED && section.dataset.level > 0}\n            {localize('TIDY5E.FavoriteSpellLevelLabel', {\n              number: section.dataset.level,\n            })}\n          {:else}\n            <span class=\"spell-primary-column-label\">\n              {localize(section.label)}\n            </span>\n          {/if}\n          {#if section.usesSlots}\n            <SpellSlotManagement {section} />\n          {/if}\n        </ItemTableColumn>\n        <ItemTableColumn\n          baseWidth=\"4.375rem\"\n          title={localize('DND5E.SpellComponents')}\n        >\n          <i class=\"fas fa-mortar-pestle\" />\n        </ItemTableColumn>\n        <ItemTableColumn\n          title={localize('DND5E.SpellUsage')}\n          baseWidth=\"7.5rem\"\n        >\n          {localize('DND5E.Usage')}\n        </ItemTableColumn>\n      </ItemTableHeaderRow>\n    </svelte:fragment>\n    <svelte:fragment slot=\"body\">\n      {#each spells as spell}\n        {@const ctx = $context.itemContext[spell.id]}\n        {@const spellImgUrl = FoundryAdapter.getSpellImageUrl($context, spell)}\n        <ItemTableRow\n          item={spell}\n          on:mousedown={(event) =>\n            FoundryAdapter.editOnMiddleClick(event.detail, spell)}\n          contextMenu={{\n            type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n            uuid: spell.uuid,\n          }}\n          let:toggleSummary\n          cssClass={FoundryAdapter.getSpellRowClasses(spell)}\n          hidden={!!$itemIdsToShow && !$itemIdsToShow.has(spell.id)}\n          favoriteId={ctx.favoriteId}\n        >\n          <ItemTableCell primary={true}>\n            <ItemUseButton\n              disabled={!$context.editable}\n              item={spell}\n              imgUrlOverride={spellImgUrl}\n            >\n              <svelte:fragment slot=\"after-roll-button\">\n                <ConcentrationOverlayIcon {ctx} />\n              </svelte:fragment>\n            </ItemUseButton>\n            <ItemName\n              on:toggle={() => toggleSummary($context.actor)}\n              item={spell}\n            >\n              <span\n                class=\"truncate\"\n                data-tidy-item-name={spell.name}\n                data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                >{spell.name}</span\n              >\n            </ItemName>\n          </ItemTableCell>\n          {#if spell.system.uses.per}\n            <ItemTableCell baseWidth=\"3.125rem\">\n              <ItemUses item={spell} />\n            </ItemTableCell>\n          {/if}\n          <ItemTableCell baseWidth=\"4.375rem\" cssClass=\"no-gap\">\n            <SpellComponents {spell} />\n          </ItemTableCell>\n          <ItemTableCell\n            baseWidth=\"7.5rem\"\n            title={localize('DND5E.SpellUsage')}\n          >\n            {spell.labels.activation}\n          </ItemTableCell>\n        </ItemTableRow>\n      {/each}\n    </svelte:fragment>\n  </ItemTable>\n</section>\n\n<style lang=\"scss\">\n  .spell-primary-column-label {\n    font-size: 0.75rem;\n    line-height: 0.75rem;\n    flex: 0 0 3.75rem;\n    white-space: nowrap;\n  }\n</style>\n","<script lang=\"ts\">\n  export let src: string;\n  export let alt: string = '';\n</script>\n\n<img class=\"item-image\" {src} {alt} />\n\n<style lang=\"scss\">\n  .item-image {\n    flex: 0 0 var(--t5e-image-size-override, 1.5rem);\n    height: var(--t5e-image-size-override, 1.5rem);\n    border-radius: 0.3125rem 0 0 0.3125rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { settingStore } from 'src/settings/settings';\n  import { createEventDispatcher } from 'svelte';\n\n  export let value: boolean = false;\n  export let disabled: boolean = false;\n\n  const switchLabelId = `switch-${Math.random()}-label`;\n  const dispatcher = createEventDispatcher<{\n    change: { originalValue: boolean };\n  }>();\n\n  function handleClick(\n    _: MouseEvent & {\n      currentTarget: EventTarget & HTMLButtonElement;\n    },\n  ) {\n    const originalValue = value;\n    value = !value;\n    dispatcher('change', { originalValue: originalValue });\n  }\n</script>\n\n<label\n  class=\"tidy-switch {$$props.class ?? ''}\"\n  class:disabled={disabled}\n  id={switchLabelId}\n  title={$$props.title ?? null}\n>\n  <slot />\n  <button\n    type=\"button\"\n    role=\"switch\"\n    on:click={(ev) => handleClick(ev)}\n    aria-checked={value}\n    aria-labelledby={switchLabelId}\n    tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    {disabled}\n  ></button>\n</label>\n","<script lang=\"ts\">\n  import ItemImage from 'src/components/item-list/ItemImage.svelte';\n  import ItemTable from 'src/components/item-list/v1/ItemTable.svelte';\n  import ItemTableCell from 'src/components/item-list/v1/ItemTableCell.svelte';\n  import ItemTableColumn from 'src/components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableHeaderRow from 'src/components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from 'src/components/item-list/v1/ItemTableRow.svelte';\n  import TidySwitch from 'src/components/toggle/TidySwitch.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    CharacterSheetContext,\n    EffectFavoriteSection,\n    FavoriteEffectContext,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  export let section: EffectFavoriteSection;\n\n  /**\n   * An optional subset of item IDs which will hide all other items not included in this set.\n   * Useful for showing only search results, for example.\n   */\n  export let visibleEffectIdSubset: Set<string> | null = null;\n\n  const localize = FoundryAdapter.localize;\n\n  function toggleEffect(context: FavoriteEffectContext): void {\n    context.effect.update({ disabled: !context.effect.disabled });\n  }\n\n  const subtitleColumnWidth = '5rem';\n  const controlsColumnWidth = '3rem';\n</script>\n\n<ItemTable key={section.key} class=\"favorite-effects\">\n  <svelte:fragment slot=\"header\">\n    <ItemTableHeaderRow>\n      <ItemTableColumn primary={true}>\n        {localize(section.label ?? 'DND5E.Effect')}\n      </ItemTableColumn>\n      <ItemTableColumn baseWidth={subtitleColumnWidth}>\n        <!-- Subtitle -->\n      </ItemTableColumn>\n      <ItemTableColumn baseWidth={controlsColumnWidth}>\n        <!-- Controls -->\n      </ItemTableColumn>\n    </ItemTableHeaderRow>\n  </svelte:fragment>\n  <svelte:fragment slot=\"body\">\n    {#each section.effects as effectContext (effectContext.effectId)}\n      <ItemTableRow\n        effect={effectContext.effect}\n        on:mousedown={(event) =>\n          FoundryAdapter.editOnMiddleClick(event.detail, effectContext.effect)}\n        contextMenu={{\n          type: CONSTANTS.CONTEXT_MENU_TYPE_EFFECTS,\n          uuid: effectContext.effect.uuid,\n        }}\n        hidden={visibleEffectIdSubset !== null &&\n          !visibleEffectIdSubset.has(effectContext.effect.id)}\n        favoriteId={effectContext.id}\n        cssClass={effectContext.suppressed ? 'suppressed' : ''}\n      >\n        <ItemTableCell\n          primary={true}\n          attributes={{\n            'data-tidy-effect-name-container': true,\n            'data-effect-id': effectContext.id,\n          }}\n        >\n          <ItemImage src={effectContext.img} />\n          <span\n            class=\"align-self-center truncate\"\n            data-tidy-effect-name={effectContext.effect.name}\n            >{effectContext.effect.name}</span\n          >\n        </ItemTableCell>\n        <ItemTableCell baseWidth={subtitleColumnWidth}>\n          {effectContext.subtitle ?? ''}\n        </ItemTableCell>\n        <ItemTableCell baseWidth={controlsColumnWidth}>\n          <TidySwitch\n            disabled={effectContext.suppressed}\n            value={effectContext.toggle.value}\n            on:change={() => toggleEffect(effectContext)}\n          />\n        </ItemTableCell>\n      </ItemTableRow>\n    {/each}\n  </svelte:fragment>\n</ItemTable>\n","import { CONSTANTS } from 'src/constants';\nimport type { FilterCategoriesToFilters, ItemFilter } from './item.types';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { SpellUtils } from 'src/utils/SpellUtils';\nimport { ItemUtils } from 'src/utils/ItemUtils';\n\nexport const defaultItemFilters = {\n  activationCostAction: {\n    name: 'activationCostAction',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_ACTION,\n    text: 'DND5E.Action',\n  },\n  activationCostBonus: {\n    name: 'activationCostBonus',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_BONUS,\n    text: 'DND5E.BonusAction',\n  },\n  activationCostReaction: {\n    name: 'activationCostReaction',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_REACTION,\n    text: 'DND5E.Reaction',\n  },\n  activationCostLegendary: {\n    name: 'activationCostLegendary',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_LEGENDARY,\n    text: 'DND5E.LegendaryActionLabel',\n  },\n  activationCostMythic: {\n    name: 'activationCostMythic',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_MYTHIC,\n    text: 'DND5E.MythicActionLabel',\n  },\n  activationCostLair: {\n    name: 'activationCostLair',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_LAIR,\n    text: 'DND5E.LairActionLabel',\n  },\n  activationCostCrew: {\n    name: 'activationCostCrew',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_CREW,\n    text: 'DND5E.VehicleCrewAction',\n  },\n  activationCostSpecial: {\n    name: 'activationCostSpecial',\n    predicate: (item) =>\n      item.system.activation?.type === CONSTANTS.ACTIVATION_COST_SPECIAL,\n    text: 'DND5E.Special',\n  },\n  activationCostOther: {\n    name: 'activationCostOther',\n    predicate: (item) =>\n      ![\n        CONSTANTS.ACTIVATION_COST_ACTION,\n        CONSTANTS.ACTIVATION_COST_BONUS,\n        CONSTANTS.ACTIVATION_COST_REACTION,\n      ].includes(item.system.activation?.type),\n    text: 'TIDY5E.ItemFilters.Filter.Other',\n  },\n  ritual: {\n    name: 'ritual',\n    predicate: (item) => item.system.properties?.has('ritual') === true,\n    text: 'DND5E.Ritual',\n  },\n  concentration: {\n    name: 'concentration',\n    predicate: (item) => item.system.properties?.has('concentration') === true,\n    text: 'DND5E.Concentration',\n    abbreviation: 'DND5E.AbbreviationConc',\n  },\n  verbal: {\n    name: 'verbal',\n    predicate: (item) => item.system.properties?.has('vocal') === true,\n    text: 'DND5E.ComponentVerbal',\n  },\n  somatic: {\n    name: 'somatic',\n    predicate: (item) => item.system.properties?.has('somatic') === true,\n    text: 'DND5E.ComponentSomatic',\n  },\n  material: {\n    name: 'material',\n    predicate: (item) => item.system.properties?.has('material') === true,\n    text: 'DND5E.ComponentMaterial',\n  },\n  prepared: {\n    name: 'prepared',\n    predicate: (item) => {\n      const isPreparedCantrip =\n        SpellUtils.isCantrip(item) && SpellUtils.isCantripPrepared(item);\n\n      return (\n        isPreparedCantrip ||\n        SpellUtils.isAlwaysPrepared(item) ||\n        SpellUtils.isInnate(item) ||\n        SpellUtils.isPrepared(item)\n      );\n    },\n    text: 'DND5E.Prepared',\n  },\n  canCastSpell: {\n    name: 'canCastSpell',\n    predicate: (item) => {\n      return (\n        item.type === CONSTANTS.ITEM_TYPE_SPELL &&\n        (SpellUtils.isCastableCantrip(item) || SpellUtils.isCastableSpell(item))\n      );\n    },\n    text: 'TIDY5E.ItemFilters.CanCast',\n  },\n  canUse: {\n    name: 'canUse',\n    predicate: (item) => ItemUtils.canUse(item),\n    text: 'TIDY5E.ItemFilters.CanUse',\n  },\n  equipped: {\n    name: 'equipped',\n    predicate: (item) => item.system.equipped === true,\n    text: 'DND5E.Equipped',\n  },\n} as const satisfies Record<string, ItemFilter>;\n\nexport function getItemRarityFilters(): ItemFilter[] {\n  const itemRarity = CONFIG.DND5E.itemRarity as Record<string, string>;\n\n  return Object.entries(itemRarity).map<ItemFilter>(\n    ([key, text]) =>\n      ({\n        name: key,\n        predicate: (item) =>\n          !FoundryAdapter.concealDetails(item) && item.system.rarity === key,\n        text: text,\n      } satisfies ItemFilter)\n  );\n}\n\nexport function getItemRarityFiltersAsObject(): Record<string, ItemFilter> {\n  return getItemRarityFilters().reduce<Record<string, ItemFilter>>(\n    (prev, curr) => {\n      prev[curr.name] = curr;\n      return prev;\n    },\n    {}\n  );\n}\n\nexport function getSpellSchoolFilters(): ItemFilter[] {\n  const spellSchools = CONFIG.DND5E.spellSchools as Record<string, any>;\n\n  return Object.entries(spellSchools).map<ItemFilter>(\n    ([key, schoolData]) =>\n      ({\n        name: key,\n        predicate: (item) => item.system.school === key,\n        text: schoolData.label,\n      } satisfies ItemFilter)\n  );\n}\n\nexport function getSpellSchoolFiltersAsObject(): Record<string, ItemFilter> {\n  return getSpellSchoolFilters().reduce<Record<string, ItemFilter>>(\n    (prev, curr) => {\n      prev[curr.name] = curr;\n      return prev;\n    },\n    {}\n  );\n}\n\nexport function getAttunementFilters(): ItemFilter[] {\n  return [\n    {\n      name: 'attunement-optional',\n      predicate: (item) =>\n        !FoundryAdapter.concealDetails(item) &&\n        item.system.attunement === CONSTANTS.ATTUNEMENT_OPTIONAL,\n      text: CONFIG.DND5E.attunementTypes[CONSTANTS.ATTUNEMENT_OPTIONAL],\n    },\n    {\n      name: 'attunement-required',\n      predicate: (item) =>\n        !FoundryAdapter.concealDetails(item) &&\n        item.system.attunement === CONSTANTS.ATTUNEMENT_REQUIRED,\n      text: CONFIG.DND5E.attunementTypes[CONSTANTS.ATTUNEMENT_REQUIRED],\n    },\n    {\n      name: 'attuned',\n      predicate: (item) =>\n        !FoundryAdapter.concealDetails(item) &&\n        !!item.system.attunement &&\n        item.system.attuned,\n      text: 'DND5E.AttunementAttuned',\n    },\n  ];\n}\n\nexport function getAttunementFiltersAsObject(): Record<string, ItemFilter> {\n  return getAttunementFilters().reduce<Record<string, ItemFilter>>(\n    (prev, curr) => {\n      prev[curr.name] = curr;\n      return prev;\n    },\n    {}\n  );\n}\n\nexport function getStandardSpellSchoolFilterCategories(): FilterCategoriesToFilters {\n  return {\n    'DND5E.SpellComponents': [\n      defaultItemFilters.verbal,\n      defaultItemFilters.somatic,\n      defaultItemFilters.material,\n      defaultItemFilters.concentration,\n      defaultItemFilters.ritual,\n    ],\n    'DND5E.SpellPreparationMode': [\n      defaultItemFilters.prepared,\n      defaultItemFilters.canCastSpell,\n    ],\n    'DND5E.SpellSchool': () => getSpellSchoolFilters(),\n  };\n}\n\nexport function getActionListFilterCategories(): FilterCategoriesToFilters {\n  return {\n    'DND5E.ItemActivationCost': [\n      defaultItemFilters.activationCostAction,\n      defaultItemFilters.activationCostBonus,\n      defaultItemFilters.activationCostReaction,\n      defaultItemFilters.activationCostLegendary,\n      defaultItemFilters.activationCostMythic,\n      defaultItemFilters.activationCostLair,\n      defaultItemFilters.activationCostCrew,\n      defaultItemFilters.activationCostSpecial,\n    ],\n    ...getStandardSpellSchoolFilterCategories(),\n  };\n}\n","import { CONSTANTS } from 'src/constants';\nimport type {\n  ConfiguredItemFilter,\n  DocumentFilters,\n  DocumentTypesToFilterTabs,\n  FilterTabsToCategories,\n  ItemFilter,\n} from './item.types';\nimport {\n  defaultItemFilters,\n  getActionListFilterCategories,\n  getAttunementFilters,\n  getAttunementFiltersAsObject,\n  getItemRarityFilters,\n  getItemRarityFiltersAsObject,\n  getSpellSchoolFiltersAsObject,\n  getStandardSpellSchoolFilterCategories,\n} from './default-item-filters';\nimport { debug, error } from 'src/utils/logging';\n\nexport class ItemFilterRuntime {\n  static _registeredItemFilters: Record<string, ItemFilter> = {};\n\n  static init() {\n    ItemFilterRuntime._registeredItemFilters = {\n      ...defaultItemFilters,\n      ...getAttunementFiltersAsObject(),\n      ...getItemRarityFiltersAsObject(),\n      ...getSpellSchoolFiltersAsObject(),\n    };\n  }\n\n  static defaultFilterPins: Record<string, Record<string, Set<string>>> = {\n    [CONSTANTS.SHEET_TYPE_CHARACTER]: {\n      [CONSTANTS.TAB_CHARACTER_ATTRIBUTES]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n        defaultItemFilters.canUse.name,\n        defaultItemFilters.canCastSpell.name,\n      ]),\n      [CONSTANTS.TAB_CHARACTER_INVENTORY]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n        defaultItemFilters.equipped.name,\n      ]),\n      [CONSTANTS.TAB_CHARACTER_FEATURES]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n        defaultItemFilters.canUse.name,\n      ]),\n      [CONSTANTS.TAB_CHARACTER_SPELLBOOK]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n        defaultItemFilters.concentration.name,\n        defaultItemFilters.ritual.name,\n        defaultItemFilters.canCastSpell.name,\n      ]),\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n      ]),\n    },\n    [CONSTANTS.SHEET_TYPE_NPC]: {\n      [CONSTANTS.TAB_NPC_ABILITIES]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n      ]),\n      [CONSTANTS.TAB_NPC_SPELLBOOK]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n        defaultItemFilters.concentration.name,\n        defaultItemFilters.ritual.name,\n        defaultItemFilters.canCastSpell.name,\n      ]),\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n      ]),\n      [CONSTANTS.TAB_NPC_INVENTORY]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n        defaultItemFilters.equipped.name,\n      ]),\n    },\n    [CONSTANTS.SHEET_TYPE_VEHICLE]: {\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n      ]),\n    },\n    [CONSTANTS.SHEET_TYPE_CONTAINER]: {\n      [CONSTANTS.TAB_CONTAINER_CONTENTS]: new Set<string>([\n        defaultItemFilters.activationCostAction.name,\n        defaultItemFilters.activationCostBonus.name,\n        defaultItemFilters.activationCostReaction.name,\n        defaultItemFilters.equipped.name,\n      ]),\n    },\n  };\n\n  static _documentTabFilters: DocumentTypesToFilterTabs = {\n    [CONSTANTS.SHEET_TYPE_CHARACTER]: {\n      [CONSTANTS.TAB_CHARACTER_ATTRIBUTES]: {\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n          defaultItemFilters.activationCostOther,\n        ],\n        'DND5E.SpellComponents': [\n          defaultItemFilters.verbal,\n          defaultItemFilters.somatic,\n          defaultItemFilters.material,\n          defaultItemFilters.concentration,\n          defaultItemFilters.ritual,\n        ],\n        'DND5E.SpellPreparationMode': [\n          defaultItemFilters.prepared,\n          defaultItemFilters.canCastSpell,\n        ],\n        'TIDY5E.ItemFilters.Category.Miscellaneous': () => [\n          defaultItemFilters.equipped,\n          defaultItemFilters.canUse,\n        ],\n      },\n      [CONSTANTS.TAB_CHARACTER_INVENTORY]: {\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n        ],\n        'DND5E.Rarity': () => getItemRarityFilters(),\n        'TIDY5E.ItemFilters.Category.Miscellaneous': () => [\n          defaultItemFilters.equipped,\n          ...getAttunementFilters(),\n        ],\n      },\n      [CONSTANTS.TAB_CHARACTER_SPELLBOOK]: {\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n          defaultItemFilters.activationCostOther,\n        ],\n        ...getStandardSpellSchoolFilterCategories(),\n      },\n      [CONSTANTS.TAB_CHARACTER_FEATURES]: {\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n        ],\n        'TIDY5E.ItemFilters.Category.Miscellaneous': () => [\n          defaultItemFilters.canUse,\n        ],\n      },\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: { ...getActionListFilterCategories() },\n    },\n    [CONSTANTS.SHEET_TYPE_NPC]: {\n      [CONSTANTS.TAB_NPC_SPELLBOOK]: {\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n          defaultItemFilters.activationCostOther,\n        ],\n        ...getStandardSpellSchoolFilterCategories(),\n      },\n      [CONSTANTS.TAB_NPC_ABILITIES]: {\n        // TODO: Upgrade the filter system so that it's easier to dynamically graft in additional filter sets rather than hardcoding them in\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n          defaultItemFilters.activationCostLegendary,\n          defaultItemFilters.activationCostMythic,\n          defaultItemFilters.activationCostLair,\n          defaultItemFilters.activationCostOther,\n        ],\n        ...getStandardSpellSchoolFilterCategories(),\n      },\n      [CONSTANTS.TAB_NPC_INVENTORY]: {\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n        ],\n        'DND5E.Rarity': () => getItemRarityFilters(),\n        'TIDY5E.ItemFilters.Category.Miscellaneous': () => [\n          defaultItemFilters.equipped,\n          ...getAttunementFilters(),\n        ],\n      },\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: { ...getActionListFilterCategories() },\n    },\n    [CONSTANTS.SHEET_TYPE_VEHICLE]: {\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: { ...getActionListFilterCategories() },\n    },\n    [CONSTANTS.SHEET_TYPE_CONTAINER]: {\n      [CONSTANTS.TAB_CONTAINER_CONTENTS]: {\n        'DND5E.ItemActivationCost': [\n          defaultItemFilters.activationCostAction,\n          defaultItemFilters.activationCostBonus,\n          defaultItemFilters.activationCostReaction,\n        ],\n        'DND5E.Rarity': () => getItemRarityFilters(),\n        'TIDY5E.ItemFilters.Category.Miscellaneous': () => [\n          defaultItemFilters.equipped,\n          ...getAttunementFilters(),\n        ],\n      },\n    },\n  };\n\n  static getFilter(filterName: ItemFilter['name']): ItemFilter | undefined {\n    return ItemFilterRuntime._registeredItemFilters[filterName];\n  }\n\n  static getDocumentFilters(document: any): FilterTabsToCategories {\n    return ItemFilterRuntime._documentTabFilters[document.type] ?? {};\n  }\n\n  static getPinnedFiltersForTab(\n    filterPins: Record<string, Set<string>>,\n    filterData: DocumentFilters,\n    tabId: string\n  ) {\n    let pinnedFilters = new Map<string, ConfiguredItemFilter>();\n\n    try {\n      let tabFilterPins = filterPins[tabId] ?? new Set<string>();\n\n      for (let categoryFilters of Object.values(filterData[tabId] ?? {})) {\n        for (let filter of categoryFilters) {\n          if (tabFilterPins.has(filter.name)) {\n            pinnedFilters.set(filter.name, filter);\n          }\n        }\n      }\n    } catch (e) {\n      error(\n        `An error occurred while searching for pinned filters on the ${tabId} tab.`,\n        false,\n        e\n      );\n      debug('Filter pins error troubleshooting info', {\n        filterData,\n        filterPins,\n        tabId,\n      });\n    }\n\n    return Array.from(pinnedFilters.values());\n  }\n}\n","import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\nimport type { DocumentFilters, ItemFilter } from 'src/runtime/item/item.types';\nimport type { Item5e } from 'src/types/item.types';\nimport { isNil } from 'src/utils/data';\nimport { debug, error } from 'src/utils/logging';\nimport { writable, type Readable, type Writable } from 'svelte/store';\n\n/*\n// Filter Data\n{\n  inventory: {\n    action: true,\n    reaction: false,\n    // nulls are just excluded\n    equipped: true,\n  },\n  spellbook: {\n    canCast: true,\n  },\n  features: {\n    action: true,\n  },\n}\n*/\n\ntype ItemFilterName = ItemFilter['name'];\ntype ItemFilters = Record<ItemFilterName, boolean | undefined>;\ntype ItemFilterGroupName = string;\ntype ItemFilterData = Record<ItemFilterGroupName, ItemFilters>;\n\nexport class ItemFilterService {\n  // Maybe svelte runes will make this easier?\n  private _filterData: ItemFilterData;\n\n  private _filterDataStore: Writable<ItemFilterData>;\n\n  private _document: any;\n\n  get filterData$(): Readable<ItemFilterData> {\n    return this._filterDataStore;\n  }\n\n  // TODO: Have sheets send in what they have in session storage upon construction\n  constructor(filterData: ItemFilterData = {}, document: any) {\n    this._filterData = filterData;\n    this._filterDataStore = writable(this._filterData);\n    this._document = document;\n  }\n\n  // TODO: Better yet, have composed store ready to use, and have it update whenever the filters update\n  compose(filterGroup: ItemFilterGroupName) {\n    const group = this._getGroup(filterGroup) ?? {};\n\n    const composition = Object.entries(group)\n      .map(([filterName, value]) => {\n        return {\n          filter: ItemFilterRuntime.getFilter(filterName),\n          value,\n        };\n      })\n      .filter((f) => typeof f.filter?.predicate === 'function')\n      .reduce(\n        (prev, curr) => {\n          return (item: Item5e) =>\n            prev(item) && curr.filter?.predicate?.(item) == curr.value;\n        },\n        (item: Item5e) => true\n      );\n\n    return (item: Item5e) => {\n      try {\n        return composition(item);\n      } catch (e) {\n        error('An error occurred while filtering an item', false, e);\n        debug('Item filtering error troubleshooting info', {\n          item,\n          filters: group,\n        });\n      }\n\n      return true;\n    };\n  }\n\n  onFilter(\n    filterGroup: ItemFilterGroupName,\n    filterName: ItemFilterName,\n    value: boolean | null\n  ) {\n    try {\n      let group = this._getGroup(filterGroup);\n\n      if (value === null) {\n        delete group[filterName];\n        return;\n      }\n\n      group[filterName] = value;\n    } finally {\n      this._notifyOfChange();\n    }\n  }\n\n  onFilterClearAll(filterGroup?: ItemFilterGroupName) {\n    if (!isNil(filterGroup, '')) {\n      delete this._filterData[filterGroup!];\n    } else {\n      this._filterData = {};\n    }\n\n    this._notifyOfChange();\n  }\n\n  private _getGroup(filterGroup: ItemFilterGroupName) {\n    let group = this._filterData[filterGroup];\n\n    if (!group) {\n      this._filterData[filterGroup] = group = {};\n    }\n\n    return group;\n  }\n\n  private _notifyOfChange() {\n    this._filterDataStore.set(this._filterData);\n  }\n\n  getDocumentItemFilterData(): DocumentFilters {\n    const documentFilters = ItemFilterRuntime.getDocumentFilters(\n      this._document\n    );\n    const documentItemFilterData: DocumentFilters = {};\n\n    for (let [tab, categories] of Object.entries(documentFilters)) {\n      documentItemFilterData[tab] ??= {};\n\n      for (let [category, filters] of Object.entries(categories)) {\n        documentItemFilterData[tab][category] ??= [];\n        const effectiveFilters = Array.isArray(filters) ? filters : filters();\n\n        for (let filter of effectiveFilters) {\n          try {\n            documentItemFilterData[tab][category].push({\n              ...filter,\n              value: this._filterData[tab]?.[filter.name] ?? null,\n            });\n          } catch (e) {\n            error(\n              'An error occurred while setting up document item filter data',\n              false,\n              e\n            );\n            debug('Document item filter data error troubleshooting info', {\n              tab,\n              category,\n              filter,\n              effectiveFilters,\n            });\n          }\n        }\n      }\n    }\n\n    return documentItemFilterData;\n  }\n}\n","import type { ContainerContents, Item5e } from 'src/types/item.types';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { getContext } from 'svelte';\nimport { ItemFilterService } from '../filtering/ItemFilterService';\nimport { debug } from 'src/utils/logging';\nimport type { ActionItem } from 'src/types/types';\n\nexport class ItemVisibility {\n  static countVisibleItems(items: Item5e[], itemIdsToShow?: Set<string>) {\n    if (!itemIdsToShow) {\n      return items.length;\n    }\n\n    return items.reduce(\n      (prev, curr) => prev + (itemIdsToShow.has(curr.id) ? 1 : 0),\n      0\n    );\n  }\n\n  static getItemsToShowAtDepth(args: {\n    tabId: string;\n    criteria: string;\n    sections: (\n      | { items: Item5e[] }\n      | { spells: Item5e[] }\n      | { actions: ActionItem[] }\n    )[];\n    itemContext: Record<string, { containerContents?: ContainerContents }>;\n  }) {\n    const itemFilterService = getContext<ItemFilterService | undefined>(\n      'itemFilterService'\n    );\n\n    // TODO: Have composed store always ready to use\n    const filter = itemFilterService?.compose(args.tabId) ?? (() => true);\n\n    // Is there a better way to do this? We are iterating over these items quite a lot.\n    const items = args.sections.flatMap((x) =>\n      'items' in x\n        ? x.items\n        : 'spells' in x\n        ? x.spells\n        : x.actions.map((y) => y.item)\n    );\n\n    const results = new Set(\n      ItemVisibility.recursivelyFindEligibleItems({\n        criteria: args.criteria,\n        filter: filter,\n        itemContext: args.itemContext,\n        items: items,\n      })\n    );\n\n    debug('Item IDs to show', { results, ...args });\n\n    return results;\n  }\n\n  private static recursivelyFindEligibleItems(args: {\n    criteria: string;\n    filter: (item: Item5e) => boolean;\n    items: Item5e[];\n    itemContext: Record<string, { containerContents?: ContainerContents }>;\n  }): string[] {\n    let results: string[] = [];\n\n    for (let item of args.items) {\n      const containerContents = args.itemContext[item.id]?.containerContents;\n      let containedItemsToInclude: string[] = [];\n      if (containerContents) {\n        containedItemsToInclude = ItemVisibility.recursivelyFindEligibleItems({\n          criteria: args.criteria,\n          filter: args.filter,\n          itemContext: containerContents.itemContext,\n          items: containerContents.contents.flatMap((s) => s.items),\n        });\n\n        results = results.concat(containedItemsToInclude);\n      }\n\n      const includeItem =\n        (FoundryAdapter.searchItem(item, args.criteria) && args.filter(item)) ||\n        !!containedItemsToInclude.length;\n      if (includeItem) {\n        results.push(item.id);\n      }\n    }\n\n    return results;\n  }\n}\n","<script lang=\"ts\">\n  import type { CharacterSheetContext } from 'src/types/types';\n  import InventoryList from '../../actor/InventoryList.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import FavoriteFeaturesList from './FavoriteFeaturesList.svelte';\n  import FavoriteSpellsList from 'src/sheets/character/parts/FavoriteSpellsList.svelte';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import { CONSTANTS } from 'src/constants';\n  import FavoriteEffectsList from './FavoriteEffectsList.svelte';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n\n  export let searchCriteria: string = '';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  $: favorites = SheetSections.configureFavorites(\n    $context.favorites,\n    $context.actor,\n    tabId,\n    SheetPreferencesService.getByType($context.actor.type),\n    TidyFlags.sectionConfig.get($context.actor)?.[tabId],\n  );\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: {\n    const sections = favorites.filter(\n      (x) => x.type !== CONSTANTS.TAB_CHARACTER_EFFECTS,\n    );\n\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: sections,\n      tabId: tabId,\n    });\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"flex-column small-gap\" data-tidy-favorites>\n  <!--  TODO: Sort favorites based on setting during data item preparation -->\n  {#each favorites as section}\n    {#if section.show}\n      {#if section.type === CONSTANTS.TAB_CHARACTER_INVENTORY}\n        <InventoryList\n          {section}\n          items={section.items}\n          primaryColumnName={localize(section.label)}\n          lockControls={true}\n          allowFavoriteIconNextToName={false}\n          includeWeightColumn={false}\n        />\n      {/if}\n      <!-- TODO: Cut a copy of the Favorite Features component and custom tailor it for the generic section -->\n      {#if section.type === CONSTANTS.TAB_CHARACTER_FEATURES || section.type === CONSTANTS.CHARACTER_FAVORITE_SECTION_GENERIC}\n        <FavoriteFeaturesList {section} items={section.items} />\n      {/if}\n      {#if section.type === CONSTANTS.TAB_CHARACTER_SPELLBOOK}\n        <FavoriteSpellsList {section} spells={section.spells} />\n      {/if}\n      {#if section.type === CONSTANTS.TAB_CHARACTER_EFFECTS}\n        {@const visibleEffectIdSubset = FoundryAdapter.searchEffects(\n          searchCriteria,\n          section.effects.map((e) => e.effect),\n        )}\n        <FavoriteEffectsList {section} {visibleEffectIdSubset} />\n      {/if}\n    {/if}\n  {/each}\n</div>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CharacterSheetContext, TidyResource } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import TextInput from '../../../components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n\n  export let resource: TidyResource;\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  let configActive = false;\n  // TODO: Remove this mouseenter/mouseleave show/hide logic when Firefox supports `:has()`\n  let viewingConfig = false;\n</script>\n\n<li\n  class=\"resource {resource.cssClasses?.join(' ') ?? ''}\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.RESOURCE}\n>\n  <h4 class=\"resource-name\" class:hidden={viewingConfig || configActive}>\n    <TextInput\n      document={$context.actor}\n      field={resource.labelName}\n      value={resource.label}\n      placeholder={resource.placeholder}\n      selectOnFocus={true}\n      disabled={!$context.editable || $context.lockSensitiveFields}\n    />\n  </h4>\n  <div\n    class=\"resource-value multiple\"\n    class:hidden={viewingConfig || configActive}\n  >\n    <TextInput\n      cssClass=\"resource-value\"\n      document={$context.actor}\n      field={resource.valueName}\n      value={resource.value ?? null}\n      placeholder=\"0\"\n      allowDeltaChanges={true}\n      maxlength={3}\n      selectOnFocus={true}\n      disabled={!$context.editable}\n    />\n    <span class=\"sep\"> / </span>\n    <TextInput\n      document={$context.actor}\n      field={resource.maxName}\n      cssClass=\"resource-max\"\n      value={resource.max ?? null}\n      placeholder=\"0\"\n      allowDeltaChanges={true}\n      maxlength={3}\n      selectOnFocus={true}\n      disabled={!$context.editable || $context.lockSensitiveFields}\n    />\n  </div>\n  <!-- svelte-ignore a11y-no-static-element-interactions -->\n  <header\n    class=\"resource-header\"\n    class:active={configActive}\n    on:mouseenter={() => (viewingConfig = true)}\n    on:mouseleave={() => (viewingConfig = false)}\n  >\n    <div class=\"resource-rest\">\n      <h4>{localize('TIDY5E.RestoreOnRest')}</h4>\n      <input\n        id=\"{$context.appId}-{resource.name}-sr\"\n        type=\"checkbox\"\n        checked={resource.sr}\n        on:change|stopPropagation|preventDefault={(event) =>\n          $context.actor.update({\n            [resource.srName]: event.currentTarget.checked,\n          })}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n        data-tidy-field={resource.srName}\n      />\n      <label\n        for=\"{$context.appId}-{resource.name}-sr\"\n        class=\"checkbox\"\n        title={localize('TIDY5E.ShortRest')}\n      >\n        {localize('DND5E.RestS')}\n      </label>\n      <input\n        id=\"{$context.appId}-{resource.name}-lr\"\n        type=\"checkbox\"\n        checked={resource.lr}\n        on:change|stopPropagation|preventDefault={(event) =>\n          $context.actor.update({\n            [resource.lrName]: event.currentTarget.checked,\n          })}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n        data-tidy-field={resource.lrName}\n      />\n      <label\n        for=\"{$context.appId}-{resource.name}-lr\"\n        class=\"checkbox\"\n        title={localize('TIDY5E.LongRest')}\n      >\n        {localize('DND5E.RestL')}\n      </label>\n    </div>\n    {#if $context.editable && !$context.lockSensitiveFields}\n      <button\n        type=\"button\"\n        class=\"inline-icon-button resource-options\"\n        class:active={configActive}\n        on:click={() => {\n          configActive = !configActive;\n        }}\n        tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      >\n        <i class=\"fas fa-cog\" />\n      </button>\n    {/if}\n  </header>\n</li>\n\n<style lang=\"scss\">\n  .resource {\n    padding: 0.0625rem 0 0 0;\n    height: 2.625rem;\n    position: relative;\n    border: none;\n    border-radius: 0;\n    border-left: 0.0625rem solid var(--t5e-faint-color);\n    border-top: 0.0625rem solid var(--t5e-faint-color);\n    flex: 1 0 33%;\n\n    &:nth-child(3n + 1) {\n      border-left: 0;\n    }\n\n    &:nth-child(-n + 3) {\n      border-top: 0;\n      margin-bottom: 0;\n      padding-top: 0;\n    }\n\n    &:is(:has(> .resource-header:hover), :has(.resource-options:focus-visible))\n      > :not(.resource-header) {\n      display: none;\n    }\n\n    .resource-header {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      display: flex;\n      justify-content: flex-end;\n      align-items: flex-end;\n      background-color: var(--t5e-sheet-background);\n      overflow: hidden;\n\n      .resource-options {\n        position: relative;\n        right: 0;\n        padding: 0.125rem;\n        bottom: 0;\n        font-size: 0.75rem;\n        color: var(--t5e-tertiary-color);\n        transition: color 0.3s ease;\n      }\n\n      .resource-rest {\n        display: none;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border-radius: 0.3125rem;\n\n        h4 {\n          margin: 0.25rem 0 0 0;\n          font-size: 0.75rem;\n          line-height: 1;\n          color: var(--t5e-secondary-color);\n          flex: 0 0 100%;\n          text-align: center;\n        }\n      }\n\n      label.checkbox {\n        border: 0.0625rem solid var(--t5e-light-color);\n        padding: 0.1875rem;\n        margin: 0 0.125rem;\n        border-radius: 0.3125rem;\n        font-size: 0.6875rem;\n        cursor: pointer;\n        transition: background-color 0.3s ease;\n        text-align: center;\n        flex: 0 0 3.125rem;\n        line-height: 1rem;\n\n        &:hover {\n          background-color: var(--t5e-light-color);\n        }\n      }\n\n      input {\n        display: none;\n      }\n\n      input:checked + label.checkbox {\n        background: var(--t5e-tertiary-color);\n        color: var(--t5e-background);\n      }\n\n      &.active,\n      &:hover,\n      // `:is()` is required to prevent this selector from crashing the whole style set if `:has()` is not supported\n      &:is(:has(.resource-options:focus-visible)) {\n        width: 100%;\n        height: 100%;\n\n        .resource-rest {\n          display: flex;\n          flex-wrap: wrap;\n          justify-content: center;\n        }\n\n        .resource-options {\n          color: var(--t5e-secondary-color);\n        }\n      }\n\n      &.active {\n        .resource-options {\n          color: var(--t5e-primary-accent-color);\n        }\n      }\n    }\n\n    .resource-name {\n      :global(input) {\n        font-family: var(--t5e-title-font-family);\n        font-weight: 700;\n        font-size: 1rem;\n        text-align: center;\n        height: 1.125rem;\n      }\n    }\n\n    .resource-value {\n      justify-content: center;\n      align-items: center;\n      height: 1.375rem;\n      line-height: 1.5625rem;\n      font-family: var(--t5e-title-font-family);\n\n      &:not(.hidden) {\n        display: flex;\n      }\n    }\n\n    .resource-value.multiple {\n      :global(input) {\n        font-size: 1.375rem;\n        max-width: 3.5ch;\n        height: 1.375rem;\n        padding-top: 0.125rem;\n      }\n\n      span.sep {\n        font-size: 1.3125rem;\n        opacity: 0.5;\n      }\n\n      :global(.resource-value) {\n        text-align: right;\n      }\n\n      :global(.resource-max) {\n        text-align: left;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { CharacterSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import Resource from './Resource.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<ul\n  class=\"resources\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.RESOURCES_CONTAINER}\n>\n  {#each $context.tidyResources as resource}\n    <Resource {resource} />\n  {/each}\n</ul>\n\n<style lang=\"scss\">\n  .resources {\n    border: 0.0625rem solid var(--t5e-faint-color);\n    border-radius: 0.3125rem;\n    display: flex;\n    flex-wrap: wrap;\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n</script>\n\n<section\n  class=\"utility-toolbar {$$props.class ?? ''}\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.UTILITY_TOOLBAR}\n>\n  <slot />\n</section>\n\n<style lang=\"scss\">\n  .utility-toolbar {\n    --vertical-padding-internal: 0.375rem;\n    display: flex;\n    gap: 0.5rem;\n    align-items: center;\n    border-bottom: 0.0625rem solid var(--t5e-separator-color);\n    margin-bottom: var(--utility-toolbar-margin-bottom, 0.25rem);\n    margin-left: var(--utility-toolbar-margin-left, -1rem);\n    margin-right: var(--utility-toolbar-margin-right, -0.25rem);\n    margin-top: var(\n      --utility-toolbar-margin-top,\n      calc(\n        var(--vertical-padding-internal) - var(--t5e-tab-contents-padding-top)\n      )\n    );\n    padding-bottom: var(--vertical-padding-internal);\n    padding-left: var(--utility-toolbar-padding-left, 1rem);\n    padding-right: var(--utility-toolbar-padding-right, 1.75rem);\n  }\n</style>\n","<script lang=\"ts\">\n  import { isNil } from 'src/utils/data';\n  import { createEventDispatcher, getContext } from 'svelte';\n  import type { UtilityToolbarCommandExecuteEvent } from './types';\n  import { settingStore } from 'src/settings/settings';\n  import type { Readable } from 'svelte/store';\n  import { CONSTANTS } from 'src/constants';\n\n  export let title: string | undefined = undefined;\n  export let iconClass: string | undefined = undefined;\n  export let text: string | undefined = undefined;\n  export let visible: boolean = true;\n\n  const context = getContext<Readable<unknown>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const dispatcher = createEventDispatcher<{\n    execute: UtilityToolbarCommandExecuteEvent;\n  }>();\n</script>\n\n<button\n  type=\"button\"\n  class=\"inline-icon-button\"\n  class:hidden={!visible}\n  on:click={(ev) => dispatcher('execute', { event: ev, context: $context })}\n  {title}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.UTILITY_TOOLBAR_COMMAND}\n>\n  {#if !isNil(iconClass, '')}\n    <i class={iconClass}></i>\n  {/if}\n  {#if !isNil(text, '')}\n    {text}\n  {/if}\n</button>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { LocationToSearchTextMap, OnSearchFn } from 'src/types/types';\n  import { getContext, onMount } from 'svelte';\n\n  export let value: string;\n\n  async function rememberSearch() {\n    onSearch?.(location, value);\n  }\n\n  async function clearSearch() {\n    value = '';\n    rememberSearch();\n  }\n\n  const searchFilters = getContext<LocationToSearchTextMap>(\n    CONSTANTS.SVELTE_CONTEXT.SEARCH_FILTERS,\n  );\n  const onSearch = getContext<OnSearchFn>(CONSTANTS.SVELTE_CONTEXT.ON_SEARCH);\n  const location = getContext<string>(CONSTANTS.SVELTE_CONTEXT.LOCATION);\n\n  const localize = FoundryAdapter.localize;\n\n  onMount(() => {\n    value = searchFilters?.get(location) ?? '';\n  });\n</script>\n\n<div\n  class=\"search-container\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SEARCH_CONTAINER}\n>\n  <input\n    class=\"search\"\n    type=\"text\"\n    title={localize('TIDY5E.SearchHint')}\n    placeholder={localize('TIDY5E.Search')}\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SEARCH_INPUT}\n    bind:value\n    on:blur|preventDefault|stopPropagation={() => rememberSearch()}\n  />\n  {#if value?.trim() !== ''}\n    <button\n      class=\"inline-icon-button search-close-button\"\n      on:click={() => clearSearch()}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SEARCH_CLEAR}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class=\"fas fa-times\"></i>\n    </button>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .search-container {\n    flex-grow: 1;\n    position: relative;\n\n    .search {\n      border-radius: 0.3125rem;\n      padding-left: 0.25rem;\n      padding-right: 0.25rem;\n      border: 0.0625rem solid var(--t5e-light-color);\n      font-size: 0.75rem;\n\n      &:focus,\n      &:hover {\n        border-color: none;\n      }\n    }\n\n    .search-close-button {\n      position: absolute;\n      right: 0.375rem;\n      top: 0.5rem;\n      color: var(--t5e-tertiary-color);\n      font-size: 0.75rem;\n    }\n  }\n</style>\n","const filterCycle = [null, true, false] as const;\n\nexport function cycleNullTrueFalseForward(currentValue: boolean | null) {\n  const currentValueIndex = filterCycle.indexOf(currentValue);\n  return filterCycle[(currentValueIndex + 1) % filterCycle.length];\n}\n\nexport function cycleNullTrueFalseBackward(currentValue: boolean | null) {\n  const currentValueIndex = filterCycle.indexOf(currentValue);\n  return filterCycle.at(currentValueIndex - 1) ?? null;\n}\n","<script lang=\"ts\">\n  import type { ItemFilterService } from 'src/features/filtering/ItemFilterService';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ConfiguredItemFilter } from 'src/runtime/item/item.types';\n  import { settingStore } from 'src/settings/settings';\n  import {\n    cycleNullTrueFalseForward,\n    cycleNullTrueFalseBackward,\n  } from 'src/utils/value-cycling';\n  import { getContext } from 'svelte';\n\n  export let filter: ConfiguredItemFilter;\n  export let filterGroupName: string;\n  const onFilter = getContext<ItemFilterService['onFilter']>('onFilter');\n\n  function cycleFilterForward(name: string, currentValue: boolean | null) {\n    onFilter(filterGroupName, name, cycleNullTrueFalseForward(currentValue));\n  }\n\n  function cycleFilterBackward(name: string, currentValue: boolean | null) {\n    onFilter(filterGroupName, name, cycleNullTrueFalseBackward(currentValue));\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<button\n  type=\"button\"\n  class=\"pinned-filter-toggle truncate\"\n  class:include={filter.value === true}\n  class:exclude={filter.value === false}\n  on:click={() => cycleFilterForward(filter.name, filter.value)}\n  on:contextmenu={() => cycleFilterBackward(filter.name, filter.value)}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  title={localize(filter.text)}\n>\n  <slot />\n</button>\n","<script lang=\"ts\">\n  import type { ConfiguredItemFilter } from 'src/runtime/item/item.types';\n  import PinnedFilterToggle from './PinnedFilterToggle.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let filters: ConfiguredItemFilter[];\n  export let filterGroupName: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if filters.length}\n  <div role=\"presentation\" class=\"pinned-filter-toggles\">\n    {#each filters as filter (filter.name)}\n      <PinnedFilterToggle {filterGroupName} {filter}>\n        {localize(filter.abbreviation ?? filter.text)}\n      </PinnedFilterToggle>\n    {/each}\n  </div>\n{/if}\n\n","<script lang=\"ts\">\n  import type { ItemFilterService } from 'src/features/filtering/ItemFilterService';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ConfiguredItemFilter } from 'src/runtime/item/item.types';\n  import { settingStore } from 'src/settings/settings';\n  import {\n    cycleNullTrueFalseForward,\n    cycleNullTrueFalseBackward,\n  } from 'src/utils/value-cycling';\n  import { getContext } from 'svelte';\n\n  export let filter: ConfiguredItemFilter;\n  export let filterGroupName: string;\n  const onFilter = getContext<ItemFilterService['onFilter']>('onFilter');\n\n  function cycleFilterForward(name: string, currentValue: boolean | null) {\n    onFilter(filterGroupName, name, cycleNullTrueFalseForward(currentValue));\n  }\n\n  function cycleFilterBackward(name: string, currentValue: boolean | null) {\n    onFilter(filterGroupName, name, cycleNullTrueFalseBackward(currentValue));\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<button\n  type=\"button\"\n  class=\"filter-toggle-button pill-button truncate\"\n  class:include={filter.value === true}\n  class:exclude={filter.value === false}\n  on:click={() => cycleFilterForward(filter.name, filter.value)}\n  on:contextmenu={() => cycleFilterBackward(filter.name, filter.value)}\n  tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  title={localize(filter.text)}\n>\n  <slot />\n</button>\n","<li class=\"button-menu-divider\" role=\"presentation\" />\n","<script lang=\"ts\">\n  import ButtonMenu from '../button-menu/ButtonMenu.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import type { ActorSheetContext } from 'src/types/types';\n  import type { Readable } from 'svelte/store';\n  import FilterToggleButton from './FilterToggleButton.svelte';\n  import type { ItemFilterService } from 'src/features/filtering/ItemFilterService';\n  import ButtonMenuDivider from 'src/components/button-menu/ButtonMenuDivider.svelte';\n  import type { ContainerSheetContext } from 'src/types/item.types';\n  import { CONSTANTS } from 'src/constants';\n\n  export let tabId: string;\n\n  const localize = FoundryAdapter.localize;\n  const context = getContext<\n    Readable<ActorSheetContext | ContainerSheetContext>\n  >(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  const onFilterClearAll =\n    getContext<ItemFilterService['onFilterClearAll']>('onFilterClearAll');\n  $: categories = $context.filterData[tabId] ?? {};\n  $: hasActiveFilters = Object.entries(categories).some(([_, filters]) =>\n    filters.some((f) => f.value !== null),\n  );\n\n  $: menuOpen = false;\n</script>\n\n<div role=\"presentation\" class=\"filter-menu\">\n  <ButtonMenu\n    iconClass=\"fas fa-filter\"\n    buttonClass=\"inline-icon-button filter-menu-button {hasActiveFilters\n      ? 'has-active-filters'\n      : ''} {menuOpen ? 'menu-is-open' : ''}\"\n    position=\"bottom\"\n    anchor=\"right\"\n    title={localize('TIDY5E.ItemFilters.MenuTooltip.Filters')}\n    bind:open={menuOpen}\n    menuElement=\"div\"\n  >\n    {#each Object.entries(categories) as [category, filters] (category)}\n      <section class=\"filter-group\">\n        <h4 class=\"filter-group-header\">\n          {localize(category)}\n        </h4>\n        <div class=\"filters\">\n          {#each filters as filter (filter.text)}\n            <FilterToggleButton filterGroupName={tabId} {filter}>\n              {localize(filter.text)}\n            </FilterToggleButton>\n          {/each}\n        </div>\n      </section>\n    {/each}\n    <ButtonMenuDivider />\n    <section class=\"filter-footer flex-row justify-content-center\">\n      <button\n        type=\"button\"\n        class=\"clear-all-button pill-button flex-row extra-small-gap align-items-center\"\n        on:click={(ev) => {\n          onFilterClearAll(tabId);\n          menuOpen = false;\n        }}\n      >\n        <i class=\"fas fa-filter-slash\"></i>\n        {localize('TIDY5E.ItemFilters.ClearAll')}</button\n      >\n    </section>\n  </ButtonMenu>\n</div>\n","<script lang=\"ts\">\n  import type { CharacterSheetContext } from 'src/types/types';\n  import SkillsList from '../../actor/SkillsList.svelte';\n  import Traits from '../../actor/traits/Traits.svelte';\n  import Favorites from '../parts/Favorites.svelte';\n  import Resources from '../parts/Resources.svelte';\n  import { isNil } from 'src/utils/data';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  $: showResources =\n    $context.unlocked ||\n    $context.resources.some(\n      (x: any) => !isNil(x.value) || !isNil(x.value, '') || !isNil(x.max),\n    );\n\n  let searchCriteria: string = '';\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n</script>\n\n<UtilityToolbar>\n  <Search bind:value={searchCriteria} />\n  <PinnedFilterToggles\n    filterGroupName={tabId}\n    filters={ItemFilterRuntime.getPinnedFiltersForTab(\n      $context.filterPins,\n      $context.filterData,\n      tabId,\n    )}\n  />\n  <FilterMenu {tabId} />\n  {#each utilityBarCommands as command (command.title)}\n    <UtilityToolbarCommand\n      title={command.title}\n      iconClass={command.iconClass}\n      text={command.text}\n      visible={command.visible ?? true}\n      on:execute={(ev) => command.execute?.(ev.detail)}\n    />\n  {/each}\n</UtilityToolbar>\n\n<div class=\"scroll-container\">\n  <div class=\"attributes-tab-contents\">\n    <section class=\"side-panel\">\n      <SkillsList\n        actor={$context.actor}\n        toggleable={$settingStore.toggleEmptyCharacterSkills}\n        expanded={!!TidyFlags.skillsExpanded.get($context.actor)}\n        toggleField={TidyFlags.skillsExpanded.prop}\n      />\n      {#if !$settingStore.moveTraitsBelowCharacterResources}\n        <Traits toggleable={$settingStore.toggleEmptyCharacterTraits} />\n      {/if}\n    </section>\n    <section class=\"main-panel\">\n      {#if showResources}\n        <Resources />\n      {/if}\n      {#if $settingStore.moveTraitsBelowCharacterResources}\n        <Traits toggleable={$settingStore.toggleEmptyCharacterTraits} />\n      {/if}\n      <Favorites {searchCriteria} />\n    </section>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .attributes-tab-contents {\n    display: flex;\n    flex-direction: row;\n    gap: 1.5rem;\n  }\n\n  .side-panel {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n    width: 15rem;\n  }\n\n  .main-panel {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n    flex: 1;\n    padding: 0;\n    height: auto;\n    overflow-x: auto;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<i\n  class=\"fas fa-bookmark icon-fav no-pointer-events\"\n  title={localize('TIDY5E.Favorite')}\n/>\n\n<style lang=\"scss\">\n  .icon-fav {\n    position: absolute;\n    top: -0.125rem;\n    left: 0.25rem;\n    color: var(--t5e-grid-pane-favorite-icon-color);\n    text-shadow: 0 0 0.125rem var(--t5e-primary-color);\n    font-size: 0.625rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import type {\n    CharacterSheetContext,\n    InventorySection,\n    ItemCardStore,\n    NpcSheetContext,\n  } from 'src/types/types';\n  import type { Item5e } from 'src/types/item.types';\n  import ItemTable from '../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from '../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableColumn from '../../components/item-list/v1/ItemTableColumn.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n  import GridPaneFavoriteIcon from '../../components/item-grid/GridPaneFavoriteIcon.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable, Writable } from 'svelte/store';\n  import TextInput from '../../components/inputs/TextInput.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import { ActorItemRuntime } from 'src/runtime/ActorItemRuntime';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import { TidyHooks } from 'src/foundry/TidyHooks';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n\n  export let section: InventorySection;\n  export let items: Item5e[];\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let card = getContext<Writable<ItemCardStore>>(CONSTANTS.SVELTE_CONTEXT.CARD);\n\n  $: customCommands = ActorItemRuntime.getActorItemSectionCommands({\n    actor: $context.actor,\n    section,\n  });\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  function getInventoryRowClasses(item: Item5e) {\n    const extras: string[] = [];\n\n    return FoundryAdapter.getInventoryRowClasses(\n      item,\n      $context.itemContext[item.id],\n      extras,\n    );\n  }\n\n  function preventUseItemEvent(ev: Event) {\n    ev.stopPropagation();\n  }\n\n  async function onMouseEnter(event: Event, item: Item5e) {\n    TidyHooks.tidy5eSheetsItemHoverOn(event, item);\n\n    card.update((card) => {\n      card.item = item;\n      return card;\n    });\n  }\n\n  async function onMouseLeave(event: Event, item: Item5e) {\n    TidyHooks.tidy5eSheetsItemHoverOff(event, item);\n\n    card.update((card) => {\n      card.item = null;\n      return card;\n    });\n  }\n\n  function handleDragStart(event: DragEvent, item: Item5e) {\n    if (!item) {\n      return;\n    }\n\n    // Don't show cards while dragging\n    onMouseLeave(event, item);\n\n    card.update((card) => {\n      return card;\n    });\n\n    const dragData = item.toDragData();\n    event.dataTransfer?.setData('text/plain', JSON.stringify(dragData));\n  }\n\n  declareLocation('inventory-grid');\n</script>\n\n<ItemTable key={section.key} data-custom-section={section.custom ? true : null}>\n  <svelte:fragment slot=\"header\">\n    <ItemTableHeaderRow>\n      <ItemTableColumn primary={true}>\n        <span class=\"inventory-primary-column-label\">\n          {localize(section.label)} ({ItemVisibility.countVisibleItems(\n            items,\n            $itemIdsToShow,\n          )})\n        </span>\n      </ItemTableColumn>\n    </ItemTableHeaderRow>\n  </svelte:fragment>\n  <div class=\"items\" slot=\"body\">\n    {#each items as item (item.id)}\n      {@const ctx = $context.itemContext[item.id]}\n      {@const hidden = !!$itemIdsToShow && !$itemIdsToShow.has(item.id)}\n      <button\n        type=\"button\"\n        class=\"item {getInventoryRowClasses(item)} transparent-button\"\n        class:hidden\n        aria-hidden={hidden}\n        data-context-menu={CONSTANTS.CONTEXT_MENU_TYPE_ITEMS}\n        data-context-menu-document-uuid={item.uuid}\n        on:click={(event) =>\n          $context.editable &&\n          FoundryAdapter.actorTryUseItem(item, {}, { event })}\n        on:contextmenu={(event) =>\n          FoundryAdapter.onActorItemButtonContextMenu(item, { event })}\n        on:mousedown={(event) => FoundryAdapter.editOnMiddleClick(event, item)}\n        on:mouseenter={(ev) => onMouseEnter(ev, item)}\n        on:mouseleave={(ev) => onMouseLeave(ev, item)}\n        on:dragstart={(ev) => handleDragStart(ev, item)}\n        draggable={true}\n        disabled={!$context.editable}\n        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_USE_COMMAND}\n        data-item-id={item.id}\n        tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n        data-tidy-grid-item\n      >\n        <div class=\"item-name\">\n          <div\n            class=\"item-image\"\n            class:conceal={item.system.identified === false}\n            style=\"background-image: url('{item.img}');\"\n          >\n            <i class=\"fa fa-dice-d20\" />\n          </div>\n          <div\n            role=\"presentation\"\n            aria-hidden=\"true\"\n            class=\"unidentified-glyph no-transition\"\n            class:conceal={item.system.identified === false}\n          >\n            <i class=\"fas fa-question\" />\n          </div>\n        </div>\n\n        {#if ctx.attunement && !FoundryAdapter.concealDetails(item)}\n          <i\n            class=\"fas fa-sun icon-attuned {ctx.attunement?.cls ??\n              ''} no-pointer-events\"\n            title={localize(ctx.attunement?.title ?? '')}\n          />\n        {/if}\n\n        {#if 'favoriteId' in ctx && !!ctx.favoriteId}\n          <GridPaneFavoriteIcon />\n        {/if}\n\n        {#if $context.editable}\n          <button\n            type=\"button\"\n            class=\"item-control item-edit\"\n            style=\"display:none\"\n            data-action=\"itemEdit\"\n            title={localize('DND5E.ItemEdit')}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          >\n            <i class=\"fas fa-edit fa-fw\" />\n          </button>\n        {/if}\n\n        <div class=\"item-stats\">\n          <div\n            class=\"item-detail item-uses\"\n            title=\"{localize('DND5E.Uses')}: {item.system.uses?.value}/{item\n              .system.uses?.max} \"\n          >\n            {#if ctx?.hasUses}\n              <i class=\"fas fa-bolt\" />\n              <TextInput\n                document={item}\n                field=\"system.uses.value\"\n                value={item.system.uses?.value}\n                placeholder=\"0\"\n                maxlength={2}\n                allowDeltaChanges={true}\n                selectOnFocus={true}\n                on:click={preventUseItemEvent}\n                disabled={!$context.editable}\n              />\n            {/if}\n          </div>\n          <span\n            class=\"item-quantity\"\n            class:isStack={item.isStack}\n            title={localize('DND5E.Quantity')}\n          >\n            <TextInput\n              document={item}\n              field=\"system.quantity\"\n              cssClass=\"item-count\"\n              value={item.system.quantity}\n              maxlength={2}\n              disabled={!$context.editable || $context.lockItemQuantity}\n              allowDeltaChanges={true}\n              selectOnFocus={true}\n              on:click={preventUseItemEvent}\n            />\n          </span>\n        </div>\n      </button>\n    {/each}\n    {#if $context.unlocked}\n      <div class=\"items-footer\">\n        <button\n          type=\"button\"\n          class=\"footer-command icon-button\"\n          title={localize('DND5E.ItemCreate')}\n          on:click|stopPropagation|preventDefault={() =>\n            FoundryAdapter.createItem(\n              {\n                ...section.dataset,\n                action: 'itemCreate',\n                tooltip: 'DND5E.ItemCreate',\n              },\n              $context.actor,\n            )}\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_CREATE_COMMAND}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n        >\n          <i class=\"fas fa-plus-circle\" />\n        </button>\n        {#each customCommands as command}\n          <button\n            type=\"button\"\n            class=\"footer-command icon-button\"\n            on:click={(ev) =>\n              command.execute?.({ section, event: ev, actor: $context.actor })}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            title={localize(command.tooltip ?? '')}\n          >\n            {#if (command.iconClass ?? '') !== ''}\n              <i class={command.iconClass} />\n            {/if}\n            {localize(command.label ?? '')}\n          </button>\n        {/each}\n      </div>\n    {/if}\n  </div>\n</ItemTable>\n\n<style lang=\"scss\">\n  .inventory-primary-column-label {\n    font-size: 0.75rem;\n    line-height: 0.75rem;\n    flex: 0 0 3.75rem;\n    white-space: nowrap;\n  }\n\n  .items {\n    padding: 0;\n    display: flex;\n    flex-wrap: wrap;\n\n    --item-width-height: 3.125rem;\n\n    .item {\n      width: var(--item-width-height);\n      height: var(--item-width-height);\n      position: relative;\n      margin: 0.1875rem;\n      box-shadow: 0 0 0.0625rem 0.0625rem var(--t5e-light-color);\n      border-radius: 0.3125rem;\n\n      &.context {\n        border: 0.0625rem solid var(--t5e-primary-accent-color);\n      }\n\n      &.equipped {\n        box-shadow: 0 0 0 0.125rem\n          var(--t5e-equipped-item-grid-tile-outline-color);\n        background: var(--t5e-equipped-background);\n\n        .item-image {\n          box-shadow: 0 0 0.0625rem 0.0625rem inset\n            var(--t5e-equipped-item-grid-tile-accent-color);\n          border-radius: 0.3125rem;\n        }\n      }\n\n      // TODO: Determine the best longterm way to support this...\n      &.magic-item {\n        .item-image {\n          box-shadow:\n            0 0 0 0.0625rem var(--t5e-magic-accent-color) inset,\n            0 0 0.1875rem 0.125rem var(--t5e-magic-accent-color) inset;\n          border-radius: 0.3125rem;\n        }\n\n        &.equipped .item-image {\n          box-shadow:\n            0 0 0rem 0.0625rem var(--t5e-magic-accent-color) inset,\n            0 0 0 0.0625rem var(--t5e-magic-accent-color) inset,\n            0 0 0.1875rem 0.125rem var(--t5e-magic-accent-color) inset;\n          border: none;\n        }\n      }\n\n      .icon-attuned {\n        font-size: 0.7188rem;\n        overflow: hidden;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--t5e-attuned-item-grid-icon-color);\n        width: 0.8125rem;\n        height: 0.8125rem;\n        background: var(--t5e-magic-accent-color);\n        position: absolute;\n        top: -0.0625rem;\n        right: -0.0625rem;\n        border-radius: 50%;\n        box-shadow: 0 0 0.1875rem 0.0625rem var(--t5e-magic-accent-color);\n\n        &.not-attuned {\n          background: var(--t5e-attunement-required-color);\n          box-shadow: 0 0 0.1875rem 0.0625rem\n            var(--t5e-attunement-required-color);\n        }\n      }\n\n      .item-name {\n        display: block;\n        flex: unset;\n        width: 100%;\n        height: 100%;\n        border-radius: 0.3125rem;\n        overflow: hidden;\n      }\n\n      .item-image {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        height: 100%;\n        margin: 0;\n        border-radius: 0;\n        background-repeat: no-repeat;\n        background-size: cover;\n        background-position: 50% 0;\n\n        i {\n          color: var(--t5e-tertiary-color);\n          text-align: center;\n          font-size: 1.125rem;\n          display: none;\n        }\n\n        &.conceal {\n          filter: grayscale(100%);\n        }\n      }\n\n      &:not([disabled]):hover .item-name .item-image {\n        background-image: none !important; // TODO: Figure out a way to avoid !important\n\n        i {\n          display: initial;\n        }\n      }\n\n      &:hover {\n        .unidentified-glyph {\n          display: none;\n        }\n      }\n\n      .unidentified-glyph {\n        font-size: calc(var(--item-width-height) - 1.5rem);\n      }\n\n      .item-name:hover {\n        .item-image:hover i {\n          color: var(--t5e-primary-font-color);\n        }\n      }\n\n      .item-stats {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        padding: 0 0.125rem 0 0.1875rem;\n        height: 0.875rem;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n\n        .item-quantity,\n        .item-uses {\n          border: none;\n          font-size: 0.75rem;\n\n          :global(input) {\n            height: 0.875rem;\n            text-shadow: 0 0 0.3125rem\n              var(--t5e-inventory-grid-image-contrast-text-shadow-color);\n            text-align: right;\n            min-width: 0;\n            width: 1rem;\n            padding: 0;\n          }\n        }\n\n        .item-uses {\n          line-height: 1;\n          display: flex;\n          align-items: center;\n\n          :global(input) {\n            text-align: left;\n          }\n\n          .fa-bolt {\n            font-size: 0.5rem;\n            margin-right: 0.0625rem;\n            text-shadow: 0 0 0.3125rem\n              var(--t5e-inventory-grid-image-contrast-text-shadow-color);\n          }\n        }\n      }\n\n      .item-name:hover ~ .item-stats :global(input) {\n        color: var(--t5e-primary-font-color);\n        text-shadow: 0 0 0.3125rem\n          var(--t5e-inventory-grid-hover-use-item-contrast-text-shadow-color);\n      }\n    }\n\n    .items-footer {\n      flex: 0 0 auto;\n      height: 3.125rem;\n      margin: 0.125rem;\n      display: flex;\n\n      .footer-command {\n        display: flex;\n        flex: 0 0 3.125rem;\n        justify-content: center;\n        align-items: center;\n        white-space: nowrap;\n        height: 100%;\n        font-size: 1.5rem;\n        color: var(--t5e-faint-color);\n\n        &:hover {\n          color: var(--t5e-tertiary-color);\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { ContainerSheetContext, Item5e } from 'src/types/item.types';\n  import type { Actor5e } from 'src/types/types';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let document: Actor5e | Item5e;\n\n  let context = getContext<Readable<ActorSheetContext | ContainerSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: currencies = Object.entries(document.system.currency).map((e) => ({\n    key: e[0],\n    value: e[1] as any,\n  }));\n\n  function confirmConvertCurrency() {\n    new dnd5e.applications.CurrencyManager(document).render(true);\n  }\n\n  function abbreviateCurrency(currencyKey: string) {\n    return CONFIG.DND5E.currencies[currencyKey]?.abbreviation ?? currencyKey;\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"inventory-currency\">\n  <ol class=\"currency\">\n    {#each currencies as currency}\n      <li\n        class=\"currency-item {currency.key}\"\n        title={$context.config.currencies[currency.key]?.label}\n      >\n        <TextInput\n          {document}\n          field=\"system.currency.{currency.key}\"\n          id=\"{$context.appId}-system.currency.{currency.key}\"\n          value={currency.value}\n          allowDeltaChanges={true}\n          selectOnFocus={true}\n          disabled={!$context.editable || $context.lockMoneyChanges}\n        />\n        <label\n          for=\"{$context.appId}-system.currency.{currency.key}\"\n          class=\"denomination {currency.key}\"\n          data-denom={currency.key}>{abbreviateCurrency(currency.key)}</label\n        >\n      </li>\n    {/each}\n    <li class=\"currency-item convert\">\n      <button\n        type=\"button\"\n        class=\"currency-convert\"\n        title={localize('DND5E.CurrencyManager.Title')}\n        on:click|stopPropagation|preventDefault={() => confirmConvertCurrency()}\n        disabled={!$context.editable}\n        tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      >\n        <i class=\"fas fa-coins\" />\n      </button>\n    </li>\n  </ol>\n</div>\n\n<style lang=\"scss\">\n  .inventory-currency {\n    --currency-line-height: 1.875rem;\n\n    .currency {\n      display: flex;\n      align-items: center;\n      list-style: none;\n      gap: 0.5rem;\n      margin: 0.25rem 0;\n      padding: 0;\n\n      .currency-item {\n        display: flex;\n        align-items: center;\n        background: var(--t5e-faint-color);\n        border-radius: 0.3125rem;\n        line-height: var(--currency-line-height);\n        padding-right: 0.5rem;\n\n        :global(input) {\n          text-align: right;\n          flex: 1;\n          padding-left: 0.5rem;\n        }\n\n        label {\n          margin-left: 0.25rem;\n          flex: 0 0 auto;\n        }\n\n        &.convert {\n          padding: 0;\n          flex: 0 0 0.0625rem;\n          text-align: center;\n          white-space: nowrap;\n        }\n\n        .currency-convert {\n          line-height: var(--currency-line-height);\n          border: none;\n          background: var(--t5e-faintest-color);\n          color: var(--t5e-secondary-color);\n          border-radius: 0.3125rem;\n          padding: 0 0.375rem;\n\n          &:hover {\n            background: var(--t5e-light-color);\n          }\n        }\n\n        .denomination {\n          text-transform: uppercase;\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  export let cssClass: string | null = null;\n</script>\n\n<div class=\"notice {cssClass}\">\n  <slot />\n</div>\n\n<style lang=\"scss\">\n  .notice {\n    display: block;\n    background: var(--t5e-warning-accent-color);\n    padding: 0.625rem;\n    font-size: 0.75rem;\n    color: var(--t5e-warning-accent-contrast-color);\n    border-radius: 0.3125rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ContainerSheetContext,\n    ItemSheetContext,\n  } from 'src/types/item.types';\n  import type {\n    CharacterSheetContext,\n    NpcSheetContext,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { buildDataset } from 'src/utils/data';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let value: number | null = null;\n  export let step: string = 'any';\n  export let placeholder: string | null = null;\n  export let field: string;\n  export let document: any;\n  export let tooltip: string | null = null;\n  export let min: string | number | null | undefined = null;\n  export let max: string | number | null | undefined = null;\n  export let id: string | null = null;\n  export let disabled: boolean | null = null;\n  export let dataset: Record<string, unknown> | null = null;\n  export let readonly: boolean | null = null;\n  export let cssClass: string | null = null;\n  export let maxlength: HTMLInputElement['maxLength'] | null = null;\n  export let selectOnFocus: boolean = false;\n  export let title: string | null = null;\n  export let stopClickPropagation: boolean = false;\n\n  $: draftValue = value;\n  $: datasetAttributes = buildDataset(dataset);\n  let theInput: HTMLInputElement | undefined;\n\n  async function saveChange(\n    event: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    },\n  ) {\n    const proposedValueToSave = parseFloat(event.currentTarget.value);\n\n    const parsedValueToSave = !isNaN(proposedValueToSave)\n      ? proposedValueToSave\n      : null;\n\n    await document.update({\n      [field]: parsedValueToSave,\n    });\n\n    draftValue = value;\n\n    if (selectOnFocus && theInput === window.document.activeElement) {\n      theInput.select();\n    }\n  }\n\n  const context =\n    getContext<\n      Readable<\n        | CharacterSheetContext\n        | NpcSheetContext\n        | VehicleSheetContext\n        | ContainerSheetContext\n        | ItemSheetContext\n      >\n    >('context');\n\n  $: activeEffectApplied = ActiveEffectsHelper.isActiveEffectAppliedToField(\n    document,\n    field,\n  );\n\n  $: isEnchanted =\n    $context.itemOverrides instanceof Set && $context.itemOverrides.has(field);\n\n  $: overrideTooltip = isEnchanted\n    ? localize('DND5E.Enchantment.Warning.Override')\n    : localize('DND5E.ActiveEffectOverrideWarning');\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<input\n  bind:this={theInput}\n  type=\"number\"\n  {id}\n  {step}\n  bind:value={draftValue}\n  {min}\n  {max}\n  {placeholder}\n  on:change={saveChange}\n  data-tooltip={activeEffectApplied ? overrideTooltip : tooltip}\n  disabled={disabled || activeEffectApplied}\n  {readonly}\n  class={cssClass}\n  {maxlength}\n  {...datasetAttributes}\n  on:focus={(ev) => selectOnFocus && ev.currentTarget.select()}\n  on:click={(ev) => stopClickPropagation && ev.stopPropagation()}\n  {title}\n  data-tidy-field={field}\n/>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"encumbrance\"\n  class:encumbered={$context.encumbrance.encumbered}\n  title={localize('TIDY5E.Encumbrance')}\n>\n  <span class=\"encumbrance-bar\" style=\"width:{$context.encumbrance.pct}%\" />\n  <span class=\"encumbrance-label\"\n    >{$context.encumbrance.value} / {$context.encumbrance.max}</span\n  >\n  <i class=\"encumbrance-breakpoint encumbrance-33 arrow-up\" />\n  <i class=\"encumbrance-breakpoint encumbrance-33 arrow-down\" />\n  <i class=\"encumbrance-breakpoint encumbrance-66 arrow-up\" />\n  <i class=\"encumbrance-breakpoint encumbrance-66 arrow-down\" />\n</div>\n\n<style lang=\"scss\">\n  .encumbrance {\n    background: var(--t5e-light-color);\n    border-radius: 0.3125rem;\n    position: relative;\n    box-shadow: 0 0 0 0.0625rem var(--t5e-encumbrance-outline-color) inset;\n\n    .encumbrance-bar {\n      position: absolute;\n      top: 0.0625rem;\n      left: 0.0625rem;\n      bottom: 0.0625rem;\n      max-width: calc(100% - 0.125rem);\n      border: 0.0625rem solid var(--t5e-encumbrance-bar-outline-color);\n      background: var(--t5e-encumbrance-bar-background);\n      border-radius: 0.25rem;\n      transition: width 0.3s ease;\n    }\n\n    .encumbrance-label {\n      display: block;\n      position: relative;\n      width: 100%;\n      text-align: center;\n      font-weight: 700;\n      color: var(--t5e-encumbrance-text-color);\n      text-shadow: 0 0 0.125rem var(--t5e-encumbrance-bar-text-shadow-color);\n    }\n\n    .encumbrance-breakpoint {\n      position: absolute;\n      width: 0;\n      height: 0;\n      transform: translateX(-50%);\n      border: 0.25rem solid transparent;\n    }\n\n    .encumbrance-33 {\n      left: calc(100% / 3);\n    }\n\n    .encumbrance-66 {\n      left: calc((100% / 3) * 2);\n    }\n\n    .arrow-up {\n      bottom: 0;\n      border-bottom-color: var(--t5e-encumbrance-outline-color);\n    }\n\n    .arrow-down {\n      top: 0;\n      border-top-color: var(--t5e-encumbrance-outline-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  export let cssClass: string | null = null;\n  export let mode: 'vertical' | 'horizontal';\n</script>\n\n<footer class=\"tab-footer {cssClass} {mode}\">\n  <slot />\n</footer>\n\n<style lang=\"scss\">\n  .tab-footer {\n    background-color: var(--t5e-header-background);\n    box-shadow: 0 0 0.1875rem 0 var(--t5e-tertiary-color);\n    padding: 0.25rem 1.5rem 0.5rem 0.75rem;\n    margin: 0 -0.25rem -1rem -1rem;\n    border-top: 0.0625rem solid var(--t5e-light-color);\n    display: flex;\n    gap: 0.25rem;\n\n    &.vertical {\n      flex-direction: column;\n    }\n\n    &.horizontal {\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: center;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type {\n    ContainerPanelItemContext,\n    ItemCardStore,\n  } from 'src/types/types';\n  import CapacityBar from '../container/CapacityBar.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import type { Writable } from 'svelte/store';\n  import { getContext } from 'svelte';\n  import type { Item5e } from 'src/types/item.types';\n  import { settingStore } from 'src/settings/settings';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { coalesce } from 'src/utils/formatting';\n  import { TidyHooks } from 'src/foundry/TidyHooks';\n\n  export let containerPanelItems: ContainerPanelItemContext[] = [];\n  export let searchCriteria: string = '';\n\n  $: visibleContainersIdsSubset = FoundryAdapter.searchItems(\n    searchCriteria,\n    containerPanelItems.map((c) => c.container),\n  );\n\n  let card: Writable<ItemCardStore> | undefined = getContext<\n    Writable<ItemCardStore>\n  >(CONSTANTS.SVELTE_CONTEXT.CARD);\n\n  async function onMouseEnter(event: Event, item: Item5e) {\n    TidyHooks.tidy5eSheetsItemHoverOn(event, item);\n\n    if (!item?.getChatData || !$settingStore.itemCardsForAllItems) {\n      return;\n    }\n\n    card?.update((card) => {\n      card.item = item;\n      return card;\n    });\n  }\n\n  async function onMouseLeave(event: Event, item: Item5e) {\n    TidyHooks.tidy5eSheetsItemHoverOff(event, item);\n\n    card?.update((card) => {\n      card.item = null;\n      card.itemCardContentTemplate = null;\n      return card;\n    });\n  }\n\n  function handleDragStart(event: DragEvent, item: Item5e) {\n    // Don't show cards while dragging\n    onMouseLeave(event, item);\n\n    card?.update((card) => {\n      return card;\n    });\n\n    const dragData = item.toDragData();\n    event.dataTransfer?.setData('text/plain', JSON.stringify(dragData));\n  }\n</script>\n\n<ul class=\"containers\">\n  {#each containerPanelItems as { container, ...capacity } (container.id)}\n    <!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n    <li\n      style=\"position: relative\"\n      draggable=\"true\"\n      data-item-id={container.id}\n      on:dragstart={(ev) => handleDragStart(ev, container)}\n      on:mouseenter={(ev) => onMouseEnter(ev, container)}\n      on:mouseleave={(ev) => onMouseLeave(ev, container)}\n      class=\"container\"\n      title={container.system.identified === false\n        ? coalesce(\n            container.system.unidentified.name,\n            FoundryAdapter.localize('DND5E.Unidentified.Title'),\n          )\n        : container.name}\n      class:hidden={!visibleContainersIdsSubset.has(container.id)}\n      aria-hidden={!visibleContainersIdsSubset.has(container.id)}\n    >\n      <button\n        type=\"button\"\n        class=\"transparent-button\"\n        on:click={() => container.sheet.render(true)}\n        data-context-menu={CONSTANTS.CONTEXT_MENU_TYPE_ITEMS}\n        data-context-menu-document-uuid={container.uuid}\n        disabled={!FoundryAdapter.userIsGm() && !container.isOwner}\n      >\n        <div\n          class=\"container-image\"\n          class:conceal={container.system.identified === false}\n          style=\"background-image: url('{container.img}')\"\n        >\n          <div\n            role=\"presentation\"\n            aria-hidden=\"true\"\n            class=\"unidentified-glyph\"\n            class:conceal={container.system.identified === false}\n          >\n            <i class=\"fas fa-question\" />\n          </div>\n        </div>\n      </button>\n      <CapacityBar\n        showLabel={false}\n        {container}\n        {capacity}\n        --capacity-bar-height=\"0.5rem\"\n        --capacity-bar-container-border-radius=\"0 0 0.1875rem 0.1875rem\"\n      />\n    </li>\n  {/each}\n</ul>\n\n<style lang=\"scss\">\n  .containers {\n    flex: 1;\n    display: grid;\n    grid-template-columns: repeat(\n      auto-fit,\n      minmax(var(--t5e-container-panel-item-size), max-content)\n    );\n    gap: 0.375rem;\n    margin-left: 0.1875rem;\n\n    .container {\n      position: relative; // 👈 required for correct drag preview\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n\n      &.hidden {\n        display: none;\n      }\n    }\n\n    .container-image {\n      aspect-ratio: 1;\n      border: 0.0625rem solid var(--t5e-separator-color);\n      border-radius: 0.1875rem 0.1875rem 0 0;\n      background-color: var(--t5e-light-color);\n      background-size: cover;\n      background-position: 50% 0;\n      transition: filter 0.75s;\n\n      &.conceal {\n        filter: grayscale(100%);\n      }\n    }\n\n    .unidentified-glyph {\n      font-size: calc(var(--t5e-container-panel-item-size) / 2);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { type CharacterSheetContext } from 'src/types/types';\n  import type {\n    InventorySection,\n    ItemLayoutMode,\n    NpcSheetContext,\n  } from 'src/types/types';\n  import InventoryList from '../InventoryList.svelte';\n  import InventoryGrid from '../InventoryGrid.svelte';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import Currency from 'src/sheets/actor/Currency.svelte';\n  import Notice from '../../../components/notice/Notice.svelte';\n  import NumberInput from '../../../components/inputs/NumberInput.svelte';\n  import EncumbranceBar from 'src/sheets/actor/EncumbranceBar.svelte';\n  import TabFooter from 'src/sheets/actor/TabFooter.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import ContainerPanel from 'src/sheets/shared/ContainerPanel.svelte';\n  import ExpandableContainer from 'src/components/expandable/ExpandableContainer.svelte';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n\n  export let tabId: string;\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: inventory = SheetSections.configureInventory(\n    $context.inventory,\n    tabId,\n    SheetPreferencesService.getByType($context.actor.type),\n    TidyFlags.sectionConfig.get($context.actor)?.[tabId],\n  );\n\n  let searchCriteria: string = '';\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: {\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: inventory,\n      tabId: tabId,\n    });\n  }\n\n  const localize = FoundryAdapter.localize;\n\n  let layoutMode: ItemLayoutMode;\n  $: layoutMode = TidyFlags.inventoryGrid.get($context.actor) ? 'grid' : 'list';\n\n  $: noItems =\n    inventory.some((section: InventorySection) => section.items.length > 0) ===\n    false;\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n</script>\n\n<UtilityToolbar>\n  <Search bind:value={searchCriteria} />\n  <PinnedFilterToggles\n    filterGroupName={tabId}\n    filters={ItemFilterRuntime.getPinnedFiltersForTab(\n      $context.filterPins,\n      $context.filterData,\n      tabId,\n    )}\n  />\n  <FilterMenu {tabId} />\n  {#each utilityBarCommands as command (command.title)}\n    <UtilityToolbarCommand\n      title={command.title}\n      iconClass={command.iconClass}\n      text={command.text}\n      visible={command.visible ?? true}\n      on:execute={(ev) => command.execute?.(ev.detail)}\n    />\n  {/each}\n</UtilityToolbar>\n\n<div\n  class=\"tidy-inventory-container scroll-container flex-column small-gap\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEMS_CONTAINER}\n>\n  {#if noItems && !$context.unlocked}\n    <Notice>{localize('TIDY5E.EmptySection')}</Notice>\n  {:else}\n    {@const containerPanelExpanded =\n      $context.showContainerPanel && !!$context.containerPanelItems.length}\n    <ExpandableContainer\n      expanded={containerPanelExpanded}\n      class=\"container-panel-wrapper {containerPanelExpanded\n        ? 'container-panel-expanded'\n        : ''}\"\n    >\n      <ContainerPanel\n        containerPanelItems={$context.containerPanelItems}\n        {searchCriteria}\n      />\n    </ExpandableContainer>\n    {#each inventory as section (section.key)}\n      {@const visibleItemCount = ItemVisibility.countVisibleItems(\n        section.items,\n        $itemIdsToShow,\n      )}\n      {#if section.show}\n        {#if (searchCriteria.trim() === '' && $context.unlocked) || visibleItemCount > 0}\n          {#if layoutMode === 'list'}\n            <InventoryList\n              primaryColumnName=\"{localize(section.label)} ({visibleItemCount})\"\n              {section}\n              items={section.items}\n            />\n          {:else}\n            <InventoryGrid items={section.items} {section} />\n          {/if}\n        {/if}\n      {/if}\n    {/each}\n  {/if}\n</div>\n\n<TabFooter mode=\"vertical\">\n  <div class=\"attunement-and-currency\">\n    <div\n      class=\"attuned-items-counter\"\n      class:overattuned={$context.actor.system.attributes.attunement.value >\n        $context.actor.system.attributes.attunement.max}\n      title={localize('DND5E.Attunement')}\n    >\n      <i class=\"attunement-icon fas fa-sun\" />\n      <span\n        class=\"attuned-items-current\"\n        title={localize('TIDY5E.AttunementItems')}\n        >{$context.system.attributes.attunement.value}</span\n      >\n      /\n      {#if $context.editable && FoundryAdapter.userIsGm()}\n        <NumberInput\n          selectOnFocus={true}\n          document={$context.actor}\n          field=\"system.attributes.attunement.max\"\n          cssClass=\"attuned-items-max\"\n          value={$context.system.attributes.attunement.max}\n          placeholder=\"0\"\n          title={localize('TIDY5E.AttunementMax')}\n          disabled={!$context.editable || $context.lockSensitiveFields}\n        />\n      {:else}\n        <span class=\"attuned-items-max\" title={localize('TIDY5E.AttunementMax')}\n          >{$context.system.attributes.attunement.max}</span\n        >\n      {/if}\n    </div>\n    <Currency document={$context.actor} />\n  </div>\n\n  {#if $settingStore.useCharacterEncumbranceBar}\n    <EncumbranceBar />\n  {/if}\n</TabFooter>\n\n<style lang=\"scss\">\n  .attunement-and-currency {\n    display: flex;\n    flex: 0 0 1.875rem;\n    gap: 0.5rem;\n\n    .attuned-items-counter {\n      display: flex;\n      align-items: center;\n      margin-left: 0.1875rem;\n      padding-left: 0.625rem;\n      border-radius: 0.3125rem;\n      background: var(--t5e-faint-color);\n\n      .attunement-icon {\n        color: var(--t5e-primary-accent-color);\n      }\n\n      &.overattuned {\n        animation: overflowing-with-arcane-power 2s infinite;\n      }\n\n      @keyframes overflowing-with-arcane-power {\n        0% {\n          box-shadow: 0 0 0 0 var(--t5e-primary-accent-color);\n        }\n        100% {\n          box-shadow: 0 0 0 0.375rem rgba(0, 0, 0, 0);\n        }\n      }\n\n      span {\n        font-size: 1rem;\n      }\n\n      i {\n        opacity: 0.6;\n        font-size: 1.25rem;\n        margin-right: 0.3125rem;\n        margin-left: 0.0625rem;\n      }\n\n      :global(.attuned-items-max) {\n        width: 1.5rem;\n      }\n\n      :global(input) {\n        font-size: 1rem;\n        font-family: var(--t5e-body-font-family);\n      }\n    }\n  }\n\n  .tidy-inventory-container\n    :global(.container-panel-wrapper:not(.container-panel-expanded)) {\n    margin-bottom: -0.5rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemControl from '../item-list/controls/ItemControl.svelte';\n\n  export let ctx: any;\n  export let spell: any;\n\n  function toggleSpellPreparation() {\n    const value = FoundryAdapter.getProperty(\n      spell,\n      'system.preparation.prepared'\n    );\n\n    spell.update({\n      'system.preparation.prepared': !value,\n    });\n  }\n</script>\n\n<ItemControl\n  title={ctx?.toggleTitle}\n  iconCssClass=\"fas fa-book\"\n  active={spell.system.preparation.prepared}\n  onclick={toggleSpellPreparation}\n/>\n","import type { SupportedSpellSchoolIcon } from 'src/api/config/spell-school/spell-school.types';\nimport { SettingsProvider } from 'src/settings/settings';\n\nexport class SpellSchool {\n  protected static _iconsMap: Record<string, SupportedSpellSchoolIcon> = {\n    abj: 'ra ra-shield',\n    con: 'ra ra-tentacle',\n    div: 'ra ra-crystal-ball',\n    enc: 'ra ra-aware',\n    evo: 'ra ra-burning-meteor',\n    ill: 'ra ra-bleeding-eye',\n    nec: 'ra ra-skull',\n    trs: 'ra ra-cycle',\n  };\n\n  static fallbackIcon = 'fas fa-hat-wizard';\n\n  static getIcon(schoolKey: string): SupportedSpellSchoolIcon {\n    if (SettingsProvider.settings.useTidySpellSchoolIcons.get()) {\n      return SpellSchool._iconsMap[schoolKey] ?? SpellSchool.fallbackIcon;\n    }\n\n    const dnd5eConfigIcon = CONFIG.DND5E.spellSchools[schoolKey]?.icon;\n\n    if (dnd5eConfigIcon) {\n      return {\n        iconSrc: dnd5eConfigIcon,\n      };\n    }\n\n    return SpellSchool.fallbackIcon;\n  }\n\n  static setIcon(schoolKey: string, iconClass: SupportedSpellSchoolIcon) {\n    SpellSchool._iconsMap[schoolKey] = iconClass;\n  }\n}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import {\n    type CharacterSheetContext,\n    type NpcSheetContext,\n    type RenderableClassicControl,\n    type SpellbookSection,\n  } from 'src/types/types';\n  import ItemDeleteControl from '../item-list/controls/ItemDeleteControl.svelte';\n  import ItemEditControl from '../item-list/controls/ItemEditControl.svelte';\n  import ItemName from '../item-list/ItemName.svelte';\n  import ItemTable from '../item-list/v1/ItemTable.svelte';\n  import ItemTableCell from '../item-list/v1/ItemTableCell.svelte';\n  import ItemTableColumn from '../item-list/v1/ItemTableColumn.svelte';\n  import ItemTableFooter from '../item-list/ItemTableFooter.svelte';\n  import ItemTableHeaderRow from '../item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from '../item-list/v1/ItemTableRow.svelte';\n  import ItemUseButton from '../item-list/ItemUseButton.svelte';\n  import ItemUses from '../item-list/ItemUses.svelte';\n  import SpellComponents from './SpellComponents.svelte';\n  import SpellPrepareControl from '../spellbook/SpellPrepareControl.svelte';\n  import InlineFavoriteIcon from '../item-list/InlineFavoriteIcon.svelte';\n  import ItemFavoriteControl from '../item-list/controls/ItemFavoriteControl.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import ActionFilterOverrideControl from '../item-list/controls/ActionFilterOverrideControl.svelte';\n  import { SpellSchool } from 'src/features/spell-school/SpellSchool';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import Dnd5eIcon from '../icon/Dnd5eIcon.svelte';\n  import SpellSlotManagement from './SpellSlotManagement.svelte';\n  import type { Item5e } from 'src/types/item.types';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import ConcentrationOverlayIcon from './ConcentrationOverlayIcon.svelte';\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  export let section: SpellbookSection;\n  export let spells: any[];\n  export let allowFavorites: boolean = true;\n  export let cssClass: string | null = null;\n\n  // TODO: replace this with column specification array default and then allow the caller to customize the table.\n  export let includeSchool: boolean = true;\n  export let includeRange: boolean = true;\n  export let spellComponentsBaseWidth: string = '3.75rem';\n  export let targetBaseWidth: string = '7.5rem';\n  export let usageBaseWidth: string = '7.5rem';\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  var spellSchoolBaseWidth = '2rem';\n\n  let controls: RenderableClassicControl<{ item: Item5e; ctx: any }>[] = [];\n  $: {\n    controls = [\n      {\n        component: SpellPrepareControl,\n        props: ({ item, ctx }) => ({\n          spell: item,\n          ctx,\n        }),\n        visible: ({ item }) => FoundryAdapter.canPrepareSpell(item),\n      },\n    ];\n\n    if (allowFavorites) {\n      controls.push({\n        component: ItemFavoriteControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n\n    controls.push({\n      component: ItemEditControl,\n      props: ({ item }) => ({\n        item,\n      }),\n    });\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemDeleteControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n\n    if ($context.useActionsFeature) {\n      controls.push({\n        component: ActionFilterOverrideControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n\n  $: classicControlsColumnWidth = `${controls.length * 1.25}rem`;\n\n  declareLocation('spellbook-list-view');\n</script>\n\n<section class=\"spellbook-list-section {cssClass}\">\n  <ItemTable\n    key={section.key}\n    data-custom-section={section.custom ? true : null}\n  >\n    <svelte:fragment slot=\"header\">\n      <ItemTableHeaderRow>\n        <ItemTableColumn primary={true}>\n          <span class=\"spell-primary-column-label\">\n            {localize(section.label)}\n          </span>\n          {#if section.usesSlots}\n            <SpellSlotManagement {section} />\n          {/if}\n        </ItemTableColumn>\n        <ItemTableColumn\n          baseWidth={spellComponentsBaseWidth}\n          title={localize('DND5E.SpellComponents')}\n        >\n          <i class=\"fas fa-mortar-pestle\" />\n        </ItemTableColumn>\n        {#if includeSchool}\n          <ItemTableColumn\n            baseWidth={spellSchoolBaseWidth}\n            title={localize('DND5E.SpellSchool')}\n          >\n            <i class=\"fas fa-hat-wizard\" />\n          </ItemTableColumn>\n        {/if}\n        <ItemTableColumn\n          baseWidth={targetBaseWidth}\n          title={localize('DND5E.SpellTarget')}\n        >\n          {localize('DND5E.Target')}\n        </ItemTableColumn>\n        {#if includeRange}\n          <ItemTableColumn baseWidth=\"4.375rem\" title={localize('DND5E.Range')}>\n            {localize('DND5E.Range')}\n          </ItemTableColumn>\n        {/if}\n        <ItemTableColumn\n          title={localize('DND5E.SpellUsage')}\n          baseWidth={usageBaseWidth}\n        >\n          {localize('DND5E.Usage')}\n        </ItemTableColumn>\n        {#if $context.editable && $context.useClassicControls}\n          <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n        {/if}\n      </ItemTableHeaderRow>\n    </svelte:fragment>\n    <svelte:fragment slot=\"body\">\n      {#each spells as spell (spell.id)}\n        {@const ctx = $context.itemContext[spell.id]}\n        {@const spellImgUrl = FoundryAdapter.getSpellImageUrl($context, spell)}\n        <ItemTableRow\n          item={spell}\n          on:mousedown={(event) =>\n            FoundryAdapter.editOnMiddleClick(event.detail, spell)}\n          contextMenu={{\n            type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n            uuid: spell.uuid,\n          }}\n          let:toggleSummary\n          cssClass={FoundryAdapter.getSpellRowClasses(spell)}\n          hidden={!!$itemIdsToShow && !$itemIdsToShow.has(spell.id)}\n        >\n          <ItemTableCell primary={true}>\n            <ItemUseButton\n              disabled={!$context.editable}\n              item={spell}\n              imgUrlOverride={spellImgUrl}\n              showDiceIconOnHover={!ctx.concentration}\n            >\n              <svelte:fragment slot=\"after-roll-button\">\n                <ConcentrationOverlayIcon {ctx} />\n              </svelte:fragment>\n            </ItemUseButton>\n            <ItemName\n              on:toggle={() => toggleSummary($context.actor)}\n              item={spell}\n            >\n              <span\n                class=\"truncate\"\n                data-tidy-item-name={spell.name}\n                data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                >{spell.name}</span\n              >\n            </ItemName>\n          </ItemTableCell>\n          {#if spell.hasLimitedUses}\n            <ItemTableCell baseWidth=\"3.125rem\">\n              <ItemUses item={spell} />\n            </ItemTableCell>\n          {/if}\n          {#if allowFavorites && $settingStore.showIconsNextToTheItemName && 'favoriteId' in ctx && !!ctx.favoriteId}\n            <InlineFavoriteIcon />\n          {/if}\n          <ItemTableCell baseWidth={spellComponentsBaseWidth} cssClass=\"no-gap\">\n            <SpellComponents {spell} />\n          </ItemTableCell>\n          {#if includeSchool}\n            {@const icon = SpellSchool.getIcon(spell.system.school)}\n            <ItemTableCell\n              baseWidth={spellSchoolBaseWidth}\n              title={spell.labels.school ?? ''}\n            >\n              {#if typeof icon === 'string'}\n                <i class=\"spell-school-icon {icon}\"></i>\n              {:else}\n                <Dnd5eIcon\n                  --icon-fill=\"var(--t5e-spell-school-icon-fill)\"\n                  --icon-width=\"var(--t5e-spell-school-icon-width)\"\n                  --icon-height=\"var(--t5e-spell-school-icon-height)\"\n                  src={icon.iconSrc}\n                />\n              {/if}\n            </ItemTableCell>\n          {/if}\n          <ItemTableCell\n            baseWidth={targetBaseWidth}\n            title=\"{localize('DND5E.Target')}: {spell.labels.target}\"\n          >\n            {#if spell.labels.target}\n              {spell.labels.target}\n            {:else}\n              {localize('DND5E.None')}\n            {/if}\n          </ItemTableCell>\n          {#if includeRange}\n            <ItemTableCell\n              baseWidth=\"4.375rem\"\n              title=\"{localize('DND5E.Range')}: {spell.labels.range}\"\n            >\n              {spell.labels.range}\n            </ItemTableCell>\n          {/if}\n          <ItemTableCell\n            baseWidth={usageBaseWidth}\n            title={localize('DND5E.SpellUsage')}\n          >\n            {spell.labels.activation}\n          </ItemTableCell>\n          {#if $context.editable && $context.useClassicControls}\n            <ItemTableCell baseWidth={classicControlsColumnWidth}>\n              <ClassicControls {controls} params={{ item: spell, ctx: ctx }} />\n            </ItemTableCell>\n          {/if}\n        </ItemTableRow>\n      {/each}\n      {#if $context.unlocked}\n        <ItemTableFooter\n          actor={$context.actor}\n          {section}\n          canCreate={section.canCreate}\n          isItem={true}\n        />\n      {/if}\n    </svelte:fragment>\n  </ItemTable>\n</section>\n\n<style lang=\"scss\">\n  .spell-primary-column-label {\n    font-size: 0.75rem;\n    line-height: 0.75rem;\n    flex: 0 0 3.75rem;\n    white-space: nowrap;\n  }\n\n  .spellbook-list-section {\n    .spell-school-icon {\n      color: var(--t5e-secondary-color);\n      font-size: var(--t5e-spell-school-font-icon-size);\n      margin: 0;\n      padding: 0;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ContainerSheetContext,\n    ItemSheetContext,\n  } from 'src/types/item.types';\n  import type {\n    CharacterSheetContext,\n    NpcSheetContext,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { buildDataset } from 'src/utils/data';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let value: unknown;\n  export let tooltip: string | null = null;\n  export let field: string;\n  export let document: any;\n  export let id: string | null = null;\n  export let dataset: Record<string, unknown> | null = null;\n  export let title: string | null = null;\n  export let disabled: boolean = false;\n  export let blankValue: any = null;\n\n  $: draftValue = value?.toString() ?? '';\n  $: datasetAttributes = buildDataset(dataset);\n\n  function saveChange(\n    event: Event & {\n      currentTarget: EventTarget & HTMLSelectElement;\n    },\n  ) {\n    const targetValue = event.currentTarget.value;\n\n    document.update({\n      [field]: targetValue !== '' ? targetValue : blankValue,\n    });\n\n    draftValue = value?.toString() ?? '';\n  }\n\n  const context =\n    getContext<\n      Readable<\n        | CharacterSheetContext\n        | NpcSheetContext\n        | VehicleSheetContext\n        | ContainerSheetContext\n        | ItemSheetContext\n      >\n    >('context');\n\n  $: activeEffectApplied = ActiveEffectsHelper.isActiveEffectAppliedToField(\n    document,\n    field,\n  );\n\n  $: isEnchanted =\n    $context.itemOverrides instanceof Set && $context.itemOverrides.has(field);\n\n  $: overrideTooltip = isEnchanted\n    ? localize('DND5E.Enchantment.Warning.Override')\n    : localize('DND5E.ActiveEffectOverrideWarning');\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<select\n  {id}\n  bind:value={draftValue}\n  data-tooltip={activeEffectApplied ? overrideTooltip : tooltip}\n  on:change={document && saveChange}\n  {title}\n  {...datasetAttributes}\n  disabled={disabled || activeEffectApplied}\n  data-tidy-field={field}\n  class={$$props.class ?? ''}\n>\n  <slot />\n</select>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { MaxPreparedSpellsConfigContext } from './MaxPreparedSpellsConfigFormApplication';\n  import type { Writable } from 'svelte/store';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n\n  const appId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n  const context = getContext<Writable<MaxPreparedSpellsConfigContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section class=\"flex-column\">\n  <div class=\"form-field\">\n    <label for=\"max-prepared-spells-edit-{appId}\"\n      >{localize('DND5E.Formula')}</label\n    >\n    <input\n      id=\"max-prepared-spells-edit-{appId}\"\n      type=\"text\"\n      placeholder=\"0\"\n      bind:value={$context.maxPreparedSpells}\n    />\n  </div>\n  <div role=\"presentation\">\n    <h3>{localize('TIDY5E.MaxPreparedSpellsConfig.ExamplesHeader')}</h3>\n    <p class=\"flex-row flex-wrap sample-formulas\">\n      {#each $context.formulas as formula}\n        <button\n          type=\"button\"\n          class=\"highlight-on-hover\"\n          on:click={() => {\n            $context.maxPreparedSpells = formula.value;\n          }}>{localize(formula.label)}</button\n        >\n      {/each}\n    </p>\n    <p>\n      <a\n        target=\"_blank\"\n        href=\"https://github.com/kgar/foundry-vtt-tidy-5e-sheets/wiki/Max-Prepared-Spells-Formulas\"\n        >{localize('TIDY5E.MaxPreparedSpellsConfig.MoreFormulas')}</a\n      >\n    </p>\n  </div>\n  <button type=\"submit\">\n    <i class=\"far fa-save\" />\n    {localize('Save')}\n  </button>\n</section>\n\n<style lang=\"scss\">\n  .sample-formulas {\n    button {\n      flex: 0 0 1rem;\n    }\n  }\n</style>\n","import type { SvelteComponent } from 'svelte';\nimport SvelteFormApplicationBase from '../SvelteFormApplicationBase';\nimport MaxPreparedSpellsConfig from './MaxPreparedSpellsConfig.svelte';\nimport type { Actor5e, MaxPreparedSpellFormula } from 'src/types/types';\nimport { get, writable, type Writable } from 'svelte/store';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { CONSTANTS } from 'src/constants';\nimport { getMaxPreparedSpellsSampleFormulas } from 'src/utils/formula';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\n\nexport type MaxPreparedSpellsConfigContext = {\n  maxPreparedSpells: string;\n  formulas: MaxPreparedSpellFormula[];\n  actor: Actor5e;\n};\n\nexport class MaxPreparedSpellsConfigFormApplication extends SvelteFormApplicationBase {\n  context: Writable<MaxPreparedSpellsConfigContext>;\n  actor: Actor5e;\n\n  constructor(actor: Actor5e, ...args: any[]) {\n    super(...args);\n    this.actor = actor;\n\n    this.context = writable({\n      maxPreparedSpells: '',\n      formulas: getMaxPreparedSpellsSampleFormulas(),\n      actor,\n    });\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    this.context.set(this.getData());\n\n    return new MaxPreparedSpellsConfig({\n      target: node,\n      context: new Map<any, any>([\n        ['context', this.context],\n        ['appId', this.appId],\n      ]),\n    });\n  }\n\n  getData(): MaxPreparedSpellsConfigContext {\n    return {\n      maxPreparedSpells: TidyFlags.maxPreparedSpells.get(this.actor) ?? '',\n      formulas: getMaxPreparedSpellsSampleFormulas(),\n      actor: this.actor,\n    };\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      width: 500,\n      height: 'auto',\n      sheetConfig: false,\n      resizable: false,\n    });\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.MaxPreparedSpellsConfig.Title', {\n      actorName: this.actor.name,\n    });\n  }\n\n  async _updateObject(): Promise<void> {\n    const data = get(this.context);\n    await this.actor.update({\n      [TidyFlags.maxPreparedSpells.prop]: data?.maxPreparedSpells ?? '',\n    });\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import NumberInput from '../inputs/NumberInput.svelte';\n  import Select from '../inputs/Select.svelte';\n  import TabFooter from 'src/sheets/actor/TabFooter.svelte';\n  import { MaxPreparedSpellsConfigFormApplication } from 'src/applications/max-prepared-spells-config/MaxPreparedSpellsConfigFormApplication';\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n  import { rollRawSpellAttack } from 'src/utils/formula';\n\n  let context =\n    getContext<Readable<CharacterSheetContext | NpcSheetContext>>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  export let cssClass: string | null = null;\n  export let includeAttackMod: boolean = true;\n  export let includePreparedSpells: boolean = true;\n\n  const localize = FoundryAdapter.localize;\n\n  $: abilities = FoundryAdapter.getAbilitiesAsDropdownOptions(\n    $context.abilities,\n  );\n</script>\n\n<TabFooter cssClass=\"{cssClass} spellbook-footer\" mode=\"horizontal\">\n  <h3 class=\"spell-dc spell-mod flex-row extra-small-gap\">\n    <div class=\"flex-row extra-small-gap\" style=\"align-items: baseline;\">\n      <div>{FoundryAdapter.localize('DND5E.AbbreviationDC')}:</div>\n      <div\n        class=\"dc-container\"\n        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SPELL_DC}\n        data-tooltip=\"{FoundryAdapter.localize('DND5E.SpellDC')}: {$context\n          .spellCalculations.dcTooltip}\"\n      >\n        {$context.spellCalculations.dc}\n      </div>\n\n      {#if includeAttackMod}\n        <span>|</span>\n        <span>{FoundryAdapter.localize('TIDY5E.AttackMod')}:</span>\n\n        {#if $context.spellCalculations.rangedMod !== $context.spellCalculations.meleeMod}\n          <button\n            type=\"button\"\n            on:click={(ev) => rollRawSpellAttack(ev, $context.actor, 'rsak')}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            data-tooltip=\"{FoundryAdapter.localize(\n              'TIDY5E.RangedSpellAttackMod',\n            )}: {$context.spellCalculations.rangedTooltip}\"\n            class=\"inline-transparent-button spell-attack-mod-button rollable\"\n          >\n            <i class=\"fa-solid fa-wand-magic-sparkles\"></i>\n            <span\n              class=\"spell-attack-mod\"\n              data-tidy-mod-has-bonus={$context.spellCalculations\n                .rangedHasBonus}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n                .RANGED_SPELL_ATTACK_MOD}\n            >\n              {$context.spellCalculations.rangedMod}\n            </span>\n          </button>\n          <button\n            type=\"button\"\n            on:click={(ev) => rollRawSpellAttack(ev, $context.actor, 'msak')}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            data-tooltip=\"{FoundryAdapter.localize(\n              'TIDY5E.MeleeSpellAttackMod',\n            )}: {$context.spellCalculations.meleeTooltip}\"\n            class=\"inline-transparent-button spell-attack-mod-button rollable\"\n          >\n            <i class=\"fa-solid fa-hand-sparkles\"></i>\n            <span\n              class=\"spell-attack-mod\"\n              data-tidy-mod-has-bonus={$context.spellCalculations.meleeHasBonus}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n                .MELEE_SPELL_ATTACK_MOD}\n            >\n              {$context.spellCalculations.meleeMod}\n            </span>\n          </button>\n        {:else}\n          <button\n            type=\"button\"\n            on:click={(ev) => rollRawSpellAttack(ev, $context.actor)}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            data-tooltip=\"{FoundryAdapter.localize(\n              'TIDY5E.SpellAttackMod',\n            )}: {$context.spellCalculations.rangedTooltip}\"\n            class=\"inline-transparent-button spell-attack-mod-button rollable\"\n          >\n            <span\n              class=\"spell-attack-mod\"\n              data-tidy-mod-has-bonus={$context.spellCalculations\n                .rangedHasBonus}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.SPELL_ATTACK_MOD}\n            >\n              {$context.spellCalculations.rangedMod}\n            </span>\n          </button>\n        {/if}\n      {/if}\n    </div>\n  </h3>\n  {#if includePreparedSpells}\n    <button\n      type=\"button\"\n      class=\"transparent-button secondary-footer-field highlight-on-hover\"\n      on:click={() =>\n        new MaxPreparedSpellsConfigFormApplication($context.actor).render(true)}\n      title={localize('TIDY5E.MaxPreparedSpellsConfig.ButtonTooltip')}\n      disabled={!$context.editable || $context.lockSensitiveFields}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <p>{localize('TIDY5E.PreparedSpells')}</p>\n      <span class=\"spells-prepared\">{$context.preparedSpells ?? 0}</span>\n      /\n      <span class=\"spells-max-prepared\"\n        >{$context.maxPreparedSpellsTotal ?? 0}</span\n      >\n    </button>\n  {/if}\n  <div class=\"spellcasting-attribute secondary-footer-field\">\n    <p>{localize('DND5E.SpellAbility')}</p>\n    <Select\n      document={$context.actor}\n      field=\"system.attributes.spellcasting\"\n      value={$context.system.attributes.spellcasting}\n      disabled={!$context.editable || $context.lockSensitiveFields}\n      blankValue=\"\"\n    >\n      <option value=\"\" selected={!$context.system.attributes.spellcasting}\n        >{localize('DND5E.None')}</option\n      >\n      {#each abilities as ability}\n        <option value={ability.value}>{ability.text}</option>\n      {/each}\n    </Select>\n  </div>\n  {#if $context.isNPC}\n    <div class=\"spellcasting-level-container secondary-footer-field\">\n      <p class=\"truncate\">{localize('DND5E.SpellcasterLevel')}</p>\n      <NumberInput\n        cssClass=\"spellcasting-level\"\n        document={$context.actor}\n        field=\"system.details.spellLevel\"\n        value={$context.system.details.spellLevel}\n        placeholder=\"0\"\n        min=\"0\"\n        step=\"1\"\n        selectOnFocus={true}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n      />\n    </div>\n  {/if}\n</TabFooter>\n\n<style lang=\"scss\">\n  :global(.tidy5e-sheet .spellbook-footer) {\n    min-height: 2.5rem;\n  }\n\n  .secondary-footer-field {\n    flex: 0;\n    display: flex;\n    align-items: center;\n    font-size: 0.75rem;\n  }\n\n  .spell-attack-mod-button,\n  .dc-container {\n    display: flex;\n    align-items: center;\n    gap: 0.125rem;\n  }\n\n  .spell-attack-mod-button {\n    font-family: var(--t5e-title-font-family);\n    font-weight: 700;\n  }\n\n  .spell-attack-mod-button i {\n    font-size: 1rem;\n  }\n\n  h3 {\n    font-size: 1.25rem;\n    font-family: var(--t5e-title-font-family);\n  }\n\n  p {\n    font-weight: 700;\n    margin: 0 0.25rem 0 0;\n    white-space: nowrap;\n  }\n\n  .spellcasting-attribute :global(select) {\n    height: 1.1875rem;\n    font-size: 0.75rem;\n    font-family: var(--t5e-body-font-family);\n  }\n\n  .spellcasting-level-container :global(.spellcasting-level) {\n    width: 1.25rem;\n    height: 1.25rem;\n    flex: 0;\n    text-align: center;\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import {\n    type CharacterSheetContext,\n    type ItemCardStore,\n    type NpcSheetContext,\n    type SpellbookSection,\n  } from 'src/types/types';\n  import ItemTable from '../item-list/v1/ItemTable.svelte';\n  import ItemTableColumn from '../item-list/v1/ItemTableColumn.svelte';\n  import ItemTableHeaderRow from '../item-list/v1/ItemTableHeaderRow.svelte';\n  import type { Item5e } from 'src/types/item.types';\n  import GridPaneFavoriteIcon from '../item-grid/GridPaneFavoriteIcon.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable, Writable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { ActorItemRuntime } from 'src/runtime/ActorItemRuntime';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import SpellSlotManagement from './SpellSlotManagement.svelte';\n  import ConcentrationOverlayIcon from './ConcentrationOverlayIcon.svelte';\n  import { TidyHooks } from 'src/foundry/TidyHooks';\n\n  export let section: SpellbookSection;\n  export let spells: Item5e[];\n  export let cssClass: string | null = null;\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let card = getContext<Writable<ItemCardStore>>(CONSTANTS.SVELTE_CONTEXT.CARD);\n\n  let itemIdsToShow = getContext<Readable<Set<string> | undefined>>(\n    CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW,\n  );\n\n  $: customCommands = ActorItemRuntime.getActorItemSectionCommands({\n    actor: $context.actor,\n    section,\n  });\n\n  const localize = FoundryAdapter.localize;\n\n  async function onMouseEnter(event: Event, item: Item5e) {\n    TidyHooks.tidy5eSheetsItemHoverOn(event, item);\n\n    card.update((card) => {\n      card.item = item;\n      return card;\n    });\n  }\n\n  async function onMouseLeave(event: Event, item: Item5e) {\n    TidyHooks.tidy5eSheetsItemHoverOff(event, item);\n\n    card.update((card) => {\n      card.item = null;\n      return card;\n    });\n  }\n\n  function handleDragStart(event: DragEvent, item: Item5e) {\n    if (!item) {\n      return;\n    }\n\n    // Don't show cards while dragging\n    onMouseLeave(event, item);\n\n    card.update((card) => {\n      return card;\n    });\n\n    const dragData = item.toDragData();\n    event.dataTransfer?.setData('text/plain', JSON.stringify(dragData));\n  }\n\n  declareLocation('spellbook-grid-view');\n</script>\n\n<section class=\"spellbook-grid {cssClass}\">\n  <ItemTable\n    key={section.key}\n    data-custom-section={section.custom ? true : null}\n  >\n    <svelte:fragment slot=\"header\">\n      <ItemTableHeaderRow>\n        <ItemTableColumn primary={true}>\n          <span class=\"spell-primary-column-label\">\n            {localize(section.label)}\n          </span>\n          {#if section.usesSlots}\n            <SpellSlotManagement {section} />\n          {/if}\n        </ItemTableColumn>\n      </ItemTableHeaderRow>\n    </svelte:fragment>\n    <div class=\"spells\" slot=\"body\">\n      {#each spells as spell}\n        {@const ctx = $context.itemContext[spell.id]}\n        {@const spellImgUrl = FoundryAdapter.getSpellImageUrl($context, spell)}\n        {@const hidden = !!$itemIdsToShow && !$itemIdsToShow.has(spell.id)}\n        <button\n          type=\"button\"\n          class=\"spell {FoundryAdapter.getSpellRowClasses(\n            spell,\n          )} transparent-button\"\n          class:hidden\n          aria-hidden={hidden}\n          data-context-menu={CONSTANTS.CONTEXT_MENU_TYPE_ITEMS}\n          data-context-menu-document-uuid={spell.uuid}\n          on:click={(event) =>\n            FoundryAdapter.actorTryUseItem(spell, {}, { event })}\n          on:contextmenu={(event) =>\n            FoundryAdapter.onActorItemButtonContextMenu(spell, { event })}\n          on:mousedown={(event) =>\n            FoundryAdapter.editOnMiddleClick(event, spell)}\n          on:mouseenter={(ev) => onMouseEnter(ev, spell)}\n          on:mouseleave={(ev) => onMouseLeave(ev, spell)}\n          on:dragstart={(ev) => handleDragStart(ev, spell)}\n          draggable={true}\n          disabled={!$context.editable}\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_USE_COMMAND}\n          data-item-id={spell.id}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          data-tidy-grid-item\n        >\n          {#if 'favoriteId' in ctx && !!ctx.favoriteId}\n            <GridPaneFavoriteIcon />\n          {/if}\n          <div class=\"spell-name\">\n            <div\n              class=\"spell-image\"\n              style=\"background-image: url('{spellImgUrl}');\"\n            >\n              {#if !ctx.concentration}\n                <i class=\"fa fa-dice-d20\" />\n              {/if}\n              <ConcentrationOverlayIcon --tidy-icon-font-size=\"1.25rem\" {ctx} />\n            </div>\n          </div>\n        </button>\n      {/each}\n      {#if $context.unlocked}\n        <div class=\"spells-footer\">\n          {#if section.canCreate}\n            <button\n              type=\"button\"\n              class=\"footer-command icon-button\"\n              title={localize('DND5E.SpellCreate')}\n              on:click|stopPropagation|preventDefault={() =>\n                FoundryAdapter.createItem(section.dataset, $context.actor)}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_CREATE_COMMAND}\n              tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            >\n              <i class=\"fas fa-plus-circle\" />\n            </button>\n          {/if}\n          {#each customCommands as command}\n            <button\n              type=\"button\"\n              class=\"footer-command icon-button\"\n              on:click={(ev) =>\n                command.execute?.({\n                  section,\n                  event: ev,\n                  actor: $context.actor,\n                })}\n              title={localize(command.tooltip ?? '')}\n              tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            >\n              {#if (command.iconClass ?? '') !== ''}\n                <i class={command.iconClass} />\n              {/if}\n              {localize(command.label ?? '')}\n            </button>\n          {/each}\n        </div>\n      {/if}\n    </div>\n  </ItemTable>\n</section>\n\n<style lang=\"scss\">\n  .spell-primary-column-label {\n    font-size: 0.75rem;\n    line-height: 0.75rem;\n    flex: 0 0 3.75rem;\n    white-space: nowrap;\n  }\n\n  .spellbook-grid {\n    .spells {\n      padding: 0;\n      display: flex;\n      flex-wrap: wrap;\n\n      .spell {\n        width: 3.125rem;\n        height: 3.125rem;\n        position: relative;\n        margin: 0.1875rem;\n        box-shadow: 0 0 0.0625rem 0.0625rem var(--t5e-light-color);\n        border-radius: 0.3125rem;\n\n        &.context {\n          border: 0.0625rem solid var(--t5e-primary-accent-color);\n        }\n\n        &.preparable {\n          .spell-image {\n            box-shadow: 0 0 0 0.125rem inset var(--t5e-prepareable-color);\n            border-radius: 0.3125rem;\n          }\n        }\n\n        &.prepared {\n          box-shadow: 0 0 0 0.125rem\n            var(--t5e-prepared-item-grid-tile-outline-color);\n          background-color: var(--t5e-equipped-background);\n\n          .spell-image {\n            box-shadow: 0 0 0.0625rem 0.0625rem inset\n              var(--t5e-prepared-item-grid-tile-accent-color);\n            border-radius: 0.3125rem;\n          }\n        }\n\n        &.pact {\n          box-shadow: 0 0 0 0.125rem var(--t5e-pact-outline-color);\n          background-color: var(--t5e-pact-background);\n\n          .spell-image {\n            box-shadow: 0 0 0.0625rem 0.0625rem inset\n              var(--t5e-pact-accent-color);\n            border-radius: 0.3125rem;\n          }\n        }\n\n        &.at-will {\n          box-shadow: 0 0 0 0.125rem var(--t5e-atwill-outline-color);\n          background-color: var(--t5e-atwill-background);\n\n          .spell-image {\n            box-shadow: 0 0 0.0625rem 0.0625rem inset\n              var(--t5e-atwill-accent-color);\n            border-radius: 0.3125rem;\n          }\n        }\n\n        &.ritual-only {\n          box-shadow: 0 0 0 0.125rem var(--t5e-ritual-only-outline-color);\n          background-color: var(--t5e-ritual-only-background);\n\n          .spell-image {\n            box-shadow: 0 0 0.0625rem 0.0625rem inset\n              var(--t5e-ritual-only-accent-color);\n            border-radius: 0.3125rem;\n          }\n        }\n\n        &.innate {\n          box-shadow: 0 0 0 0.125rem var(--t5e-innate-outline);\n          background-color: var(--t5e-innate-background);\n\n          .spell-image {\n            box-shadow: 0 0 0.0625rem 0.0625rem inset var(--t5e-innate-accent);\n            border-radius: 0.3125rem;\n          }\n        }\n\n        &.always-prepared {\n          box-shadow: 0 0 0 0.125rem var(--t5e-alwaysprepared-outline-color);\n          background-color: var(--t5e-alwaysprepared-background);\n\n          .spell-image {\n            box-shadow: 0 0 0.0625rem 0.0625rem inset\n              var(--t5e-alwaysprepared-accent-color);\n          }\n        }\n\n        .spell-name {\n          display: block;\n          flex: unset;\n          width: 100%;\n          height: 100%;\n          border-radius: 0.3125rem;\n          overflow: hidden;\n        }\n\n        .spell-image {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          width: 100%;\n          height: 100%;\n          margin: 0;\n          border-radius: 0;\n          background-repeat: no-repeat;\n          background-size: cover;\n          background-position: 50% 0;\n\n          i {\n            color: var(--t5e-tertiary-color);\n            text-align: center;\n            font-size: 1.125rem;\n            display: none;\n          }\n        }\n\n        &:not([disabled]):hover .spell-name .spell-image {\n          background-image: none !important; // TODO: Figure out a way to avoid !important\n\n          i {\n            display: initial;\n          }\n        }\n\n        .spell-name:hover .spell-image:hover i {\n          color: var(--t5e-primary-font-color);\n        }\n      }\n      .spells-footer {\n        flex: 0 0 auto;\n        height: 3.125rem;\n        margin: 0.125rem;\n        display: flex;\n\n        .footer-command {\n          display: flex;\n          flex: 0 0 3.125rem;\n          justify-content: center;\n          align-items: center;\n          white-space: nowrap;\n          height: 100%;\n          font-size: 1.5rem;\n          color: var(--t5e-faint-color);\n\n          &:hover {\n            color: var(--t5e-tertiary-color);\n          }\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Item5e } from 'src/types/item.types';\n  import {\n    type CharacterSheetContext,\n    type DropdownListOption,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let allClasses: DropdownListOption[] = [];\n\n  $: {\n    allClasses = [\n      { text: 'DND5E.Spellbook', value: '' },\n      ...Object.entries($context.actor.spellcastingClasses).map(\n        ([key, value]: [string, Item5e]) => ({\n          text: value.name,\n          value: key,\n        }),\n      ),\n    ];\n  }\n\n  const localize = FoundryAdapter.localize;\n\n  $: selectedClassFilter = TidyFlags.classFilter.get($context.actor) ?? '';\n</script>\n\n<select\n  class=\"class-filter\"\n  on:change|stopPropagation|preventDefault={(event) =>\n    $context.actor.update({\n      [TidyFlags.classFilter.prop]: event.currentTarget.value,\n    })}\n  disabled={!$context.editable}\n  data-tidy-field={TidyFlags.classFilter.prop}\n>\n  {#each allClasses as option}\n    <option\n      value={option.value}\n      selected={option.value === selectedClassFilter ?? undefined}\n      >{localize(option.text)}</option\n    >\n  {/each}\n</select>\n\n<style lang=\"scss\">\n  .class-filter {\n    text-overflow: ellipsis;\n  }\n</style>\n","<script lang=\"ts\">\n  import Notice from 'src/components/notice/Notice.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let editable: boolean;\n  export let cssClass: string | null = null;\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"no-spells-container {cssClass}\">\n  <Notice>{localize('DND5E.NoSpellLevels')}</Notice>\n  {#if $context.editable && editable}\n    <button\n      type=\"button\"\n      class=\"create-spell-btn flex-row align-items-center extra-small-gap\"\n      on:click={() =>\n        FoundryAdapter.createItem({ type: 'spell', level: '' }, $context.actor)}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class=\"fas fa-plus-circle\" />\n      {localize('DND5E.SpellCreate')}\n    </button>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .no-spells-container {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n\n    .create-spell-btn {\n      text-align: center;\n      min-width: 7.5rem;\n      align-self: center;\n      font-size: 0.75rem;\n      border-radius: 0.3125rem;\n      line-height: 1.5;\n      width: auto;\n      padding: 0.125rem 1.5rem;\n      border: none;\n      color: var(--t5e-secondary-color);\n      background-color: var(--t5e-faintest-color);\n\n      &:hover {\n        background-color: var(--t5e-light-color);\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { Readable, Writable } from 'svelte/store';\n  import type { SpellSourceClassAssignmentsContext } from './SpellSourceClassAssignmentsFormApplication';\n  import { getContext } from 'svelte';\n  import { CONSTANTS } from 'src/constants';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import TidyTable from 'src/components/table/TidyTable.svelte';\n  import type { Item5e } from 'src/types/item.types';\n  import TidyTableHeaderCell from 'src/components/table/TidyTableHeaderCell.svelte';\n  import TidyTableHeaderRow from 'src/components/table/TidyTableHeaderRow.svelte';\n  import TidyTableRow from 'src/components/table/TidyTableRow.svelte';\n  import TidyTableCell from 'src/components/table/TidyTableCell.svelte';\n  import TidySwitch from 'src/components/toggle/TidySwitch.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n\n  let context = getContext<Writable<SpellSourceClassAssignmentsContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let searchCriteria: string = '';\n\n  $: visibleSelectablesIdSubset = new Set<string>(\n    $context.assignments\n      .filter(\n        (s) =>\n          searchCriteria.trim() === '' ||\n          s.item.name?.toLowerCase().includes(searchCriteria.toLowerCase()),\n      )\n      .map((d) => d.item.id),\n  );\n\n  $: classColumns = Object.entries<Item5e>(\n    $context.actor.spellcastingClasses,\n  ).map(([key, value]) => ({\n    key: key,\n    item: value,\n  }));\n\n  let gridTemplateColumns: string = '';\n  $: {\n    let standardClassColumnWidth = '10rem';\n    let columns = '/* Spell Name */ minmax(200px, 1fr)';\n\n    classColumns.forEach((column) => {\n      columns += ` /* ${column.item.name} */ ${standardClassColumnWidth}`;\n    });\n\n    columns += ' /* Identifier */ 200px';\n    gridTemplateColumns = columns;\n  }\n\n  async function setItemSourceClass(item: Item5e, sourceClass: string) {\n    await item.update({\n      'system.sourceClass': sourceClass,\n    });\n  }\n\n  const localize = FoundryAdapter.localize;\n\n  var showUnassignedOnly = false;\n</script>\n\n<section class=\"flex-column small-gap full-height\">\n  <div role=\"presentation\" class=\"flex-row small-gap\">\n    <Search bind:value={searchCriteria} />\n    <label class=\"flex-row extra-small-gap align-items-center\">\n      <input type=\"checkbox\" bind:checked={showUnassignedOnly} />\n      {localize('TIDY5E.SpellSourceClassAssignments.ShowUnassignedOnly.Text')}\n    </label>\n  </div>\n  <div role=\"presentation\" class=\"scroll-container flex-1\">\n    <TidyTable\n      key=\"spell-source-class-assignments-matrix\"\n      toggleable={false}\n      --grid-template-columns={gridTemplateColumns}\n    >\n      <svelte:fragment slot=\"header\">\n        <TidyTableHeaderRow>\n          <TidyTableHeaderCell primary={true} class=\"p-1 capitalize\">\n            {localize('DND5E.spell')}\n          </TidyTableHeaderCell>\n          {#each classColumns as classColumn}\n            <TidyTableHeaderCell>\n              {classColumn.item.name}\n            </TidyTableHeaderCell>\n          {/each}\n          <TidyTableHeaderCell class=\"flex-row small-gap\">\n            <span\n              >{localize('TIDY5E.SpellSourceClassAssignments.Identifier')}</span\n            >\n            <i\n              class=\"fas fa-question-circle\"\n              title={localize(\n                'TIDY5E.SpellSourceClassAssignments.IdentifierHint',\n              )}\n            ></i>\n          </TidyTableHeaderCell>\n        </TidyTableHeaderRow>\n      </svelte:fragment>\n      <svelte:fragment slot=\"body\">\n        {#each $context.assignments as assignment (assignment.item.id)}\n          {@const sourceClassIsUnassigned =\n            (assignment.item.system.sourceClass?.trim() ?? '') === ''}\n          {@const hideRow =\n            !visibleSelectablesIdSubset.has(assignment.item.id) ||\n            (showUnassignedOnly && !sourceClassIsUnassigned)}\n          <TidyTableRow hidden={hideRow}>\n            <TidyTableCell primary={true} class=\"p-1 semibold\">\n              <button\n                type=\"button\"\n                class=\"inline-transparent-button highlight-on-hover\"\n                on:click={async () =>\n                  FoundryAdapter.renderSheetFromUuid(assignment.item.uuid)}\n              >\n                {assignment.item.name}\n              </button>\n            </TidyTableCell>\n            {#each classColumns as classColumn}\n              {@const selected =\n                assignment.item.system.sourceClass === classColumn.key}\n              <TidyTableHeaderCell>\n                <TidySwitch\n                  value={selected}\n                  on:change={() =>\n                    setItemSourceClass(\n                      assignment.item,\n                      selected ? '' : classColumn.key,\n                    )}\n                />\n              </TidyTableHeaderCell>\n            {/each}\n            <TidyTableCell>\n              <TextInput\n                document={assignment.item}\n                disabled={!assignment.item.isOwner}\n                field=\"system.sourceClass\"\n                selectOnFocus={true}\n                value={assignment.item.system.sourceClass}\n              />\n            </TidyTableCell>\n          </TidyTableRow>\n        {/each}\n      </svelte:fragment>\n    </TidyTable>\n  </div>\n</section>\n","export class StoreSubscriptionsService {\n  _subscriptions: (() => void)[] = [];\n\n  registerSubscriptions(...subscriptions: (() => void)[]) {\n    this.unsubscribeAll();\n    this._subscriptions = subscriptions;\n  }\n\n  unsubscribeAll() {\n    this._subscriptions.forEach((s) => s());\n    this._subscriptions = [];\n  }\n}\n","import type { SvelteComponent } from 'svelte';\nimport AssignSpellsToSourceClasses from './SpellSourceClassAssignments.svelte';\nimport SvelteFormApplicationBase from '../SvelteFormApplicationBase';\nimport type { Actor5e } from 'src/types/types';\nimport { writable, type Writable } from 'svelte/store';\nimport type { Item5e } from 'src/types/item.types';\nimport { CONSTANTS } from 'src/constants';\nimport { StoreSubscriptionsService } from 'src/features/store/StoreSubscriptionsService';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\nexport type SpellSourceClassAssignment = {\n  /**\n   * The spell to receive an assignment.\n   */\n  item: Item5e;\n  /**\n   * Represents the chosen source class.\n   */\n  sourceClass: string;\n};\n\nexport type SpellSourceClassAssignmentsContext = {\n  actor: Actor5e;\n  assignments: SpellSourceClassAssignment[];\n};\n\nexport default class SpellSourceClassAssignmentsFormApplication extends SvelteFormApplicationBase {\n  context: Writable<SpellSourceClassAssignmentsContext> = writable();\n  actor: Actor5e;\n  subscriptionsService: StoreSubscriptionsService;\n  updateHook: number | undefined;\n\n  constructor(actor: Actor5e, ...args: any[]) {\n    super(...args);\n    this.actor = actor;\n    this.subscriptionsService = new StoreSubscriptionsService();\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent {\n    this.context.set(this.getData());\n\n    return new AssignSpellsToSourceClasses({\n      target: node,\n      context: new Map<any, any>([\n        ['appId', this.appId],\n        ['context', this.context],\n      ]),\n    });\n  }\n\n  getData(): SpellSourceClassAssignmentsContext {\n    return {\n      actor: this.actor,\n      assignments: this.actor.items\n        .filter((item: Item5e) => item.type === CONSTANTS.ITEM_TYPE_SPELL)\n        .map((item: Item5e) => ({\n          item,\n          sourceClass: 'test',\n        })),\n    };\n  }\n\n  activateListeners(html: any): void {\n    Hooks.off('updateItem', this.updateHook);\n    this.trackActorChanges();\n    super.activateListeners(html);\n  }\n\n  private trackActorChanges() {\n    this.updateHook = Hooks.on('updateItem', (item: Item5e) => {\n      if (item.actor?.id !== this.actor.id) {\n        return;\n      }\n\n      this.context.set(this.getData());\n    });\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.Utilities.AssignSpellsToClasses');\n  }\n\n  close(options: unknown = {}) {\n    Hooks.off('updateItem', this.updateHook);\n    return super.close(options);\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    CharacterSheetContext,\n    ItemLayoutMode,\n    SpellbookSection,\n  } from 'src/types/types';\n  import SpellbookList from '../../../components/spellbook/SpellbookList.svelte';\n  import SpellbookFooter from '../../../components/spellbook/SpellbookFooter.svelte';\n  import SpellbookGrid from '../../../components/spellbook/SpellbookGrid.svelte';\n  import SpellbookClassFilter from '../../../components/spellbook/SpellbookClassFilter.svelte';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import NoSpells from 'src/sheets/actor/NoSpells.svelte';\n  import Notice from '../../../components/notice/Notice.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n  import ButtonMenu from 'src/components/button-menu/ButtonMenu.svelte';\n  import ButtonMenuCommand from 'src/components/button-menu/ButtonMenuCommand.svelte';\n  import SpellSourceClassAssignmentsFormApplication from 'src/applications/spell-source-class-assignments/SpellSourceClassAssignmentsFormApplication';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  $: spellbook = SheetSections.configureSpellbook(\n    $context.actor,\n    tabId,\n    $context.spellbook,\n  );\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: {\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: spellbook,\n      tabId: tabId,\n    });\n  }\n\n  const localize = FoundryAdapter.localize;\n\n  let searchCriteria: string = '';\n\n  let layoutMode: ItemLayoutMode;\n  $: layoutMode = TidyFlags.spellbookGrid.get($context.actor) ? 'grid' : 'list';\n\n  $: selectedClassFilter = TidyFlags.classFilter.get($context.actor) ?? '';\n\n  function tryFilterByClass(spells: any[]) {\n    if (\n      !$settingStore.useMulticlassSpellbookFilter ||\n      selectedClassFilter === ''\n    ) {\n      return spells;\n    }\n\n    return spells.filter(\n      (spell) =>\n        spell.system.sourceClass?.trim() === selectedClassFilter?.trim(),\n    );\n  }\n\n  $: noSpellLevels = !$context.spellbook.length;\n\n  $: noSpells =\n    spellbook.reduce(\n      (count: number, section: SpellbookSection) =>\n        count + section.spells.length,\n      0,\n    ) === 0;\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n</script>\n\n<UtilityToolbar>\n  <Search bind:value={searchCriteria} />\n  {#if $settingStore.useMulticlassSpellbookFilter}\n    <div class=\"spellbook-class-filter\">\n      <SpellbookClassFilter />\n    </div>\n  {/if}\n  <PinnedFilterToggles\n    filterGroupName={tabId}\n    filters={ItemFilterRuntime.getPinnedFiltersForTab(\n      $context.filterPins,\n      $context.filterData,\n      tabId,\n    )}\n  />\n  <FilterMenu {tabId} />\n  <ButtonMenu\n    iconClass=\"ra ra-fairy-wand\"\n    buttonClass=\"inline-icon-button\"\n    position=\"bottom\"\n    anchor=\"right\"\n    title={localize('TIDY5E.Utilities.Tools')}\n    menuElement=\"div\"\n  >\n    <ButtonMenuCommand\n      on:click={() => {\n        new SpellSourceClassAssignmentsFormApplication($context.actor).render(\n          true,\n        );\n      }}\n      iconClass=\"fas fa-list-check\"\n      disabled={!$context.editable}\n    >\n      {localize('TIDY5E.Utilities.AssignSpellsToClasses')}\n    </ButtonMenuCommand>\n  </ButtonMenu>\n  {#each utilityBarCommands as command (command.title)}\n    <UtilityToolbarCommand\n      title={command.title}\n      iconClass={command.iconClass}\n      text={command.text}\n      visible={command.visible ?? true}\n      on:execute={(ev) => command.execute?.(ev.detail)}\n    />\n  {/each}\n</UtilityToolbar>\n<div\n  class=\"scroll-container flex-column small-gap\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEMS_CONTAINER}\n>\n  {#if noSpellLevels}\n    <NoSpells editable={$context.unlocked} />\n  {:else}\n    {#each spellbook as section (section.key)}\n      {#if section.show}\n        {@const classSpells = tryFilterByClass(section.spells)}\n\n        {@const visibleItemCount = ItemVisibility.countVisibleItems(\n          section.spells,\n          $itemIdsToShow,\n        )}\n\n        {#if (searchCriteria.trim() === '' && $context.unlocked) || visibleItemCount > 0 || !!section.slots}\n          {#if layoutMode === 'list'}\n            <SpellbookList spells={classSpells} {section} />\n          {:else}\n            <SpellbookGrid spells={classSpells} {section} />\n          {/if}\n        {/if}\n      {/if}\n    {/each}\n  {/if}\n\n  {#if noSpells && !$context.unlocked}\n    <Notice>{localize('TIDY5E.EmptySection')}</Notice>\n  {/if}\n</div>\n\n<SpellbookFooter />\n\n<style lang=\"scss\">\n  .spellbook-class-filter {\n    margin-left: 0.25rem;\n    margin-right: 0.25rem;\n    align-self: center;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { AvailableClassLevel } from 'src/types/types';\n  import { formatAsModifier } from 'src/utils/formatting';\n\n  export let availableLevels: AvailableClassLevel[] = [];\n  export let disabled: boolean = false;\n  export let item: any;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<select\n  on:change={(event) => FoundryAdapter.onLevelChange(event, item, item.actor)}\n  {disabled}\n>\n  {#each availableLevels as availableLevel}\n    <option\n      value={availableLevel.delta}\n      disabled={availableLevel.disabled || undefined}\n      selected={availableLevel.delta === 0}\n    >\n      {localize('DND5E.LevelNumber', {\n        level: availableLevel.level,\n      })}\n      {#if availableLevel.delta}\n        ({formatAsModifier(availableLevel.delta)})\n      {/if}\n    </option>\n  {/each}\n</select>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import {\n    type CharacterFeatureSection,\n    type CharacterSheetContext,\n    type RenderableClassicControl,\n  } from 'src/types/types';\n  import ItemEditControl from '../../../components/item-list/controls/ItemEditControl.svelte';\n  import ItemDeleteControl from '../../../components/item-list/controls/ItemDeleteControl.svelte';\n  import ItemTable from '../../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from '../../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from '../../../components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableFooter from '../../../components/item-list/ItemTableFooter.svelte';\n  import ItemTableCell from '../../../components/item-list/v1/ItemTableCell.svelte';\n  import ItemTableColumn from '../../../components/item-list/v1/ItemTableColumn.svelte';\n  import ItemUseButton from '../../../components/item-list/ItemUseButton.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemName from '../../../components/item-list/ItemName.svelte';\n  import ItemUses from '../../../components/item-list/ItemUses.svelte';\n  import ItemAddUses from '../../../components/item-list/ItemAddUses.svelte';\n  import InlineFavoriteIcon from '../../../components/item-list/InlineFavoriteIcon.svelte';\n  import ItemFavoriteControl from '../../../components/item-list/controls/ItemFavoriteControl.svelte';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import Notice from '../../../components/notice/Notice.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import RechargeControl from 'src/components/item-list/controls/RechargeControl.svelte';\n  import ActionFilterOverrideControl from 'src/components/item-list/controls/ActionFilterOverrideControl.svelte';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import type { Item5e } from 'src/types/item.types';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import LevelUpDropdown from 'src/sheets/actor/LevelUpDropdown.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  $: features = SheetSections.configureFeatures(\n    $context.features,\n    $context,\n    tabId,\n    SheetPreferencesService.getByType($context.actor.type),\n    TidyFlags.sectionConfig.get($context.actor)?.[tabId],\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: noFeatures =\n    features.some(\n      (section: CharacterFeatureSection) => section.items.length > 0,\n    ) === false;\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: {\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: features,\n      tabId: tabId,\n    });\n  }\n\n  let searchCriteria: string = '';\n\n  declareLocation('features');\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n\n  let controls: RenderableClassicControl<{ item: Item5e }>[] = [];\n  $: {\n    controls = [\n      {\n        component: ItemFavoriteControl,\n        props: ({ item }) => ({ item }),\n      },\n      {\n        component: ItemEditControl,\n        props: ({ item }) => ({ item }),\n      },\n    ];\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemDeleteControl,\n        props: ({ item }) => ({ item }),\n      });\n    }\n\n    if ($context.useActionsFeature) {\n      controls.push({\n        component: ActionFilterOverrideControl,\n        props: ({ item }) => ({ item }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n</script>\n\n<UtilityToolbar>\n  <Search bind:value={searchCriteria} />\n  <PinnedFilterToggles\n    filterGroupName={tabId}\n    filters={ItemFilterRuntime.getPinnedFiltersForTab(\n      $context.filterPins,\n      $context.filterData,\n      tabId,\n    )}\n  />\n  <FilterMenu {tabId} />\n  {#each utilityBarCommands as command (command.title)}\n    <UtilityToolbarCommand\n      title={command.title}\n      iconClass={command.iconClass}\n      text={command.text}\n      visible={command.visible ?? true}\n      on:execute={(ev) => command.execute?.(ev.detail)}\n    />\n  {/each}\n</UtilityToolbar>\n<div\n  class=\"scroll-container flex-column small-gap\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEMS_CONTAINER}\n>\n  {#if noFeatures && !$context.unlocked}\n    <Notice>{localize('TIDY5E.EmptySection')}</Notice>\n  {:else}\n    {#each features as section (section.key)}\n      {#if section.show}\n        {@const visibleItemCount = ItemVisibility.countVisibleItems(\n          section.items,\n          $itemIdsToShow,\n        )}\n\n        {#if (searchCriteria.trim() === '' && $context.unlocked) || visibleItemCount > 0}\n          <ItemTable\n            key={section.key}\n            data-custom-section={section.custom ? true : null}\n          >\n            <svelte:fragment slot=\"header\">\n              <ItemTableHeaderRow>\n                <ItemTableColumn primary={true}>\n                  {localize(section.label)}\n                </ItemTableColumn>\n                {#if section.showUsesColumn}\n                  <ItemTableColumn baseWidth=\"3.125rem\">\n                    {localize('DND5E.Uses')}\n                  </ItemTableColumn>\n                {/if}\n                {#if section.showUsagesColumn}\n                  <ItemTableColumn baseWidth=\"7.5rem\">\n                    {localize('DND5E.Usage')}\n                  </ItemTableColumn>\n                {/if}\n                {#if section.showLevelColumn}\n                  <ItemTableColumn baseWidth=\"7.5rem\">\n                    {localize('DND5E.Level')}\n                  </ItemTableColumn>\n                {/if}\n                {#if section.showRequirementsColumn}\n                  <ItemTableColumn baseWidth=\"7.5rem\">\n                    {localize('DND5E.Requirements')}\n                  </ItemTableColumn>\n                {/if}\n                {#if $context.editable && $context.useClassicControls}\n                  <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n                {/if}\n              </ItemTableHeaderRow>\n            </svelte:fragment>\n            <svelte:fragment slot=\"body\">\n              {#each section.items as item (item.id)}\n                {@const ctx = $context.itemContext[item.id]}\n                <ItemTableRow\n                  {item}\n                  let:toggleSummary\n                  on:mousedown={(event) =>\n                    FoundryAdapter.editOnMiddleClick(event.detail, item)}\n                  contextMenu={{\n                    type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n                    uuid: item.uuid,\n                  }}\n                  hidden={!!$itemIdsToShow && !$itemIdsToShow.has(item.id)}\n                >\n                  <ItemTableCell primary={true}>\n                    <ItemUseButton disabled={!$context.editable} {item} />\n                    <ItemName\n                      on:toggle={() => toggleSummary($context.actor)}\n                      hasChildren={false}\n                      {item}\n                    >\n                      {#if ctx.parent}&rdsh;{/if}\n                      {#if !section.isClass && item.type === 'subclass'}\n                        <i class=\"fa-solid fa-link-slash align-self-center\"></i>\n                      {/if}\n                      <span\n                        data-tidy-item-name={item.name}\n                        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                        >{item.name}</span\n                      >\n                      {#if item.isOriginalClass}<i\n                          title={localize('DND5E.ClassOriginal')}\n                          class=\"fas fa-crown primary-accent-color\"\n                        ></i>{/if}\n                    </ItemName>\n                  </ItemTableCell>\n                  <!-- TODO: Handle more gracefully; it is sitting outside of any table cell -->\n                  {#if $settingStore.showIconsNextToTheItemName && 'favoriteId' in ctx && !!ctx.favoriteId}\n                    <InlineFavoriteIcon />\n                  {/if}\n                  {#if section.showUsesColumn}\n                    <ItemTableCell baseWidth=\"3.125rem\">\n                      {#if item.isOnCooldown}\n                        <RechargeControl {item} />\n                      {:else if item.system.recharge?.value}\n                        <i\n                          class=\"fas fa-bolt\"\n                          title={localize('DND5E.Charged')}\n                        />\n                      {:else if ctx?.hasUses}\n                        <ItemUses {item} />\n                      {:else}\n                        <ItemAddUses {item} />\n                      {/if}\n                    </ItemTableCell>\n                  {/if}\n                  {#if section.showUsagesColumn}\n                    <ItemTableCell baseWidth=\"7.5rem\">\n                      {#if item.system.activation?.type}\n                        {item.labels?.activation ?? ''}\n                      {/if}\n                    </ItemTableCell>\n                  {/if}\n                  {#if section.showLevelColumn}\n                    <ItemTableCell baseWidth=\"7.5rem\">\n                      {#if item.type === 'class'}\n                        <LevelUpDropdown\n                          availableLevels={ctx?.availableLevels}\n                          {item}\n                          disabled={!$context.editable ||\n                            $context.lockLevelSelector}\n                        />\n                      {/if}\n                    </ItemTableCell>\n                  {/if}\n                  {#if section.showRequirementsColumn}\n                    <ItemTableCell baseWidth=\"7.5rem\">\n                      <span\n                        class=\"truncate\"\n                        title={item.system.requirements ?? ''}\n                        >{item.system.requirements ?? ''}</span\n                      >\n                    </ItemTableCell>\n                  {/if}\n                  {#if $context.editable && $context.useClassicControls}\n                    <ItemTableCell baseWidth={classicControlsColumnWidth}>\n                      <ClassicControls {controls} params={{ item: item }} />\n                    </ItemTableCell>\n                  {/if}\n                </ItemTableRow>\n              {/each}\n              {#if $context.unlocked}\n                <ItemTableFooter\n                  {section}\n                  actor={$context.actor}\n                  isItem={true}\n                />\n              {/if}\n            </svelte:fragment>\n          </ItemTable>\n        {/if}\n      {/if}\n    {/each}\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import type { Dnd5eActorCondition } from 'src/foundry/foundry-and-system';\n  import { getContext } from 'svelte';\n  import type { ActorSheetContext } from 'src/types/types';\n  import type { Readable } from 'svelte/store';\n  import TidySwitch from './TidySwitch.svelte';\n  import Dnd5eIcon from 'src/components/icon/Dnd5eIcon.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { debug, error } from 'src/utils/logging';\n  import { CONSTANTS } from 'src/constants';\n\n  const context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  export let condition: Dnd5eActorCondition;\n\n  let switchOn: boolean = !condition.disabled;\n\n  $: {\n    switchOn = !condition.disabled;\n  }\n\n  async function handleChange(originalValue: boolean) {\n    try {\n      await FoundryAdapter.toggleCondition($context.actor, condition);\n    } catch (e) {\n      error('An error occurred while toggling a condition', false, e);\n      debug('Condition toggle error troubleshooting info', {\n        condition,\n        state: switchOn,\n      });\n      switchOn = originalValue;\n    }\n  }\n</script>\n\n<TidySwitch\n  class=\"flex-row small-gap tidy-condition-toggle {switchOn\n    ? 'active'\n    : 'inactive'}\"\n  bind:value={switchOn}\n  on:change={(ev) => handleChange(ev.detail.originalValue)}\n  title={condition.name}\n  disabled={!$context.editable}\n  data-uuid={condition.reference}\n  data-condition-id={condition.id}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.CONDITION_TOGGLE}\n>\n  <Dnd5eIcon src={condition.icon} />\n  <span class=\"flex-1 truncate\">{condition.name}</span>\n</TidySwitch>\n","<script lang=\"ts\">\n  import ItemTable from 'src/components/item-list/v1/ItemTable.svelte';\n  import ItemTableColumn from 'src/components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableHeaderRow from 'src/components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ConditionToggle from 'src/components/toggle/ConditionToggle.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemTable key=\"conditions\">\n  <svelte:fragment slot=\"header\">\n    <ItemTableHeaderRow>\n      <ItemTableColumn primary={true}>\n        {localize('DND5E.Conditions')}\n      </ItemTableColumn>\n    </ItemTableHeaderRow>\n  </svelte:fragment>\n  <svelte:fragment slot=\"body\">\n    <ul class=\"conditions-list\">\n      {#each $context.conditions as condition (condition.id)}\n        <li\n          class=\"condition\"\n          class:active={!condition.disabled}\n          data-uuid={condition.reference}\n          data-condition-id={condition.id}\n        >\n          <ConditionToggle {condition} />\n        </li>\n      {/each}\n    </ul>\n  </svelte:fragment>\n</ItemTable>\n\n<style lang=\"scss\">\n  .conditions-list {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(12.5rem, 1fr));\n    gap: 0.125rem;\n  }\n</style>\n","<!-- \n  @component\nFor effects only.\nA special item control which swaps between an Enable/Disable control and a special \"Break Concentration\" control.\nBecause the controls are mutually exclusive, it is more ergonomic to distinguish them in this component than to try to smartly toggle them inline while spinning up item controls for a give Effects component.\n -->\n<script lang=\"ts\">\n  import type { ActiveEffect5e, ActorSheetContext } from 'src/types/types';\n  import ItemControl from './ItemControl.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n\n  export let effect: ActiveEffect5e;\n\n  /** Character effects are not the full ActiveEffect5e instance;\n   * they are instead a subset of contextual data.\n   * Also, there are cases when, such as with deleting effects,\n   * that this logic fires immediately as an effect deletion is occurring.\n   * This seems related specifically to character sheets.\n   */\n  $: actualEffect =\n    effect instanceof dnd5e.documents.ActiveEffect5e\n      ? effect\n      : !!effect\n        ? FoundryAdapter.getEffect({\n            document: $context.actor,\n            effectId: effect.id,\n            parentId: effect.parentId,\n          })\n        : undefined;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: isConcentration = FoundryAdapter.isConcentrationEffect(\n    actualEffect,\n    $context.actor.sheet,\n  );\n</script>\n\n{#if actualEffect}\n  {#if isConcentration}\n    <ItemControl\n      iconSrc={`systems/dnd5e/icons/svg/break-concentration.svg`}\n      onclick={() => $context.actor.endConcentration(actualEffect)}\n      title={localize('DND5E.ConcentrationBreak')}\n    />\n  {:else}\n    <ItemControl\n      iconCssClass={`fas ${actualEffect.disabled ? 'fa-check' : 'fa-times'}`}\n      onclick={() => actualEffect.update({ disabled: !actualEffect.disabled })}\n      title={actualEffect.disabled\n        ? localize('DND5E.EffectEnable')\n        : localize('DND5E.EffectDisable')}\n    />\n  {/if}\n{:else}\n  <span>&nbsp;</span>\n{/if}\n","<script lang=\"ts\">\n  import ItemControl from './ItemControl.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ActiveEffectContext, Actor5e } from 'src/types/types';\n\n  export let effect: ActiveEffectContext;\n  export let actor: Actor5e;\n\n  $: active = FoundryAdapter.isActiveEffectContextFavorited(effect, actor);\n  $: title = FoundryAdapter.localize(\n    active ? 'TIDY5E.RemoveFavorite' : 'TIDY5E.AddFavorite',\n  );\n</script>\n\n<ItemControl\n  iconCssClass=\"fas fa-bookmark\"\n  {active}\n  {title}\n  onclick={() => {\n    const actor = effect.source.actor ?? effect.source;\n    const document = FoundryAdapter.getEffect({\n      document: actor,\n      effectId: effect.id,\n      parentId: effect.parentId,\n    });\n    FoundryAdapter.toggleFavoriteEffect(document);\n  }}\n/>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import {\n    type ActorSheetContext,\n    type RenderableClassicControl,\n  } from 'src/types/types';\n  import ItemTable from '../../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from '../../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from '../../../components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableColumn from '../../../components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableFooter from '../../../components/item-list/ItemTableFooter.svelte';\n  import ItemImage from '../../../components/item-list/ItemImage.svelte';\n  import ItemTableCell from '../../../components/item-list/v1/ItemTableCell.svelte';\n  import ItemControl from '../../../components/item-list/controls/ItemControl.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import Notice from 'src/components/notice/Notice.svelte';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import ActorConditions from '../../actor/ActorConditions.svelte';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import ActorEffectToggleControl from 'src/components/item-list/controls/ActorEffectToggleControl.svelte';\n  import EffectFavoriteControl from 'src/components/item-list/controls/EffectFavoriteControl.svelte';\n  import InlineFavoriteIcon from 'src/components/item-list/InlineFavoriteIcon.svelte';\n  import { settingStore } from 'src/settings/settings';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: effectSections = Object.values<any>($context.effects);\n\n  $: noEffects =\n    effectSections.some((section: any) => section.effects.length > 0) === false;\n\n  declareLocation('effects');\n\n  let controls: RenderableClassicControl<{ effect: any }>[] = [];\n\n  $: {\n    controls = [];\n    controls.push(\n      {\n        component: ActorEffectToggleControl,\n        props: ({ effect }) => ({\n          effect: effect,\n        }),\n      },\n      {\n        component: EffectFavoriteControl,\n        props: ({ effect }) => ({\n          effect: effect,\n          actor: $context.actor,\n        }),\n      },\n      {\n        component: ItemControl,\n        props: ({ effect }) => ({\n          onclick: () =>\n            FoundryAdapter.getEffect({\n              document: $context.actor,\n              effectId: effect.id,\n              parentId: effect.parentId,\n            }).sheet.render(true),\n          title: localize('DND5E.EffectEdit'),\n          iconCssClass: 'fas fa-edit',\n        }),\n      },\n    );\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemControl,\n        props: ({ effect }) => ({\n          onclick: () =>\n            FoundryAdapter.getEffect({\n              document: $context.actor,\n              effectId: effect.id,\n              parentId: effect.parentId,\n            }).deleteDialog(),\n          title: localize('DND5E.EffectDelete'),\n          iconCssClass: 'fas fa-trash',\n        }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n</script>\n\n<div class=\"scroll-container flex-column small-gap\">\n  {#if !$context.allowEffectsManagement && $context.unlocked}\n    <Notice>{localize('TIDY5E.GMOnlyEdit')}</Notice>\n  {/if}\n\n  {#if noEffects && !$context.unlocked && $context.allowEffectsManagement}\n    <Notice>{localize('TIDY5E.EmptySection')}</Notice>\n  {:else}\n    {#each effectSections as section}\n      {#if !section.hidden}\n        {#if ($context.unlocked && $context.allowEffectsManagement) || section.effects.length > 0}\n          <ItemTable key={section.label}>\n            <svelte:fragment slot=\"header\">\n              <ItemTableHeaderRow>\n                <ItemTableColumn primary={true}>\n                  {localize(section.label)}\n                </ItemTableColumn>\n                <ItemTableColumn baseWidth=\"12.5rem\">\n                  {localize('DND5E.Source')}\n                </ItemTableColumn>\n                <ItemTableColumn baseWidth=\"7.5rem\">\n                  {localize('DND5E.Duration')}\n                </ItemTableColumn>\n                {#if $context.editable && $context.useClassicControls && $context.allowEffectsManagement}\n                  <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n                {/if}\n              </ItemTableHeaderRow>\n            </svelte:fragment>\n            <svelte:fragment slot=\"body\">\n              {#each section.effects as effectContext}\n                <ItemTableRow\n                  on:mousedown={(event) =>\n                    FoundryAdapter.editOnMiddleClick(\n                      event.detail,\n                      FoundryAdapter.getEffect({\n                        document: $context.actor,\n                        effectId: effectContext.id,\n                        parentId: effectContext.parentId,\n                      }),\n                    )}\n                  contextMenu={{\n                    type: CONSTANTS.CONTEXT_MENU_TYPE_EFFECTS,\n                    uuid: effectContext.uuid,\n                  }}\n                  getDragData={() =>\n                    FoundryAdapter.getEffect({\n                      document: $context.actor,\n                      effectId: effectContext.id,\n                      parentId: effectContext.parentId,\n                    })?.toDragData()}\n                  effect={effectContext}\n                >\n                  <ItemTableCell\n                    primary={true}\n                    attributes={{\n                      'data-tidy-effect-name-container': true,\n                      'data-effect-id': effectContext.id,\n                    }}\n                  >\n                    <ItemImage src={effectContext.img} />\n                    <span\n                      class=\"align-self-center truncate\"\n                      data-tidy-effect-name={effectContext.name}\n                      >{effectContext.name}</span\n                    >\n                  </ItemTableCell>\n                  {#if FoundryAdapter.isActiveEffectContextFavorited(effectContext, $context.actor) && $settingStore.showIconsNextToTheItemName}\n                    <InlineFavoriteIcon />\n                  {/if}\n                  <ItemTableCell baseWidth=\"12.5rem\"\n                    >{effectContext.source?.name ?? ''}</ItemTableCell\n                  >\n                  <ItemTableCell baseWidth=\"7.5rem\"\n                    >{effectContext.duration?.label ?? ''}</ItemTableCell\n                  >\n                  {#if $context.editable && $context.useClassicControls && $context.allowEffectsManagement}\n                    <ItemTableCell baseWidth={classicControlsColumnWidth}>\n                      <ClassicControls\n                        {controls}\n                        params={{ effect: effectContext }}\n                      />\n                    </ItemTableCell>\n                  {/if}\n                </ItemTableRow>\n              {/each}\n              {#if $context.unlocked && $context.allowEffectsManagement}\n                <ItemTableFooter\n                  actor={$context.actor}\n                  {section}\n                  create={() =>\n                    FoundryAdapter.addEffect(section.type, $context.actor)}\n                  isItem={false}\n                />\n              {/if}\n            </svelte:fragment>\n          </ItemTable>\n        {/if}\n      {/if}\n    {/each}\n  {/if}\n  {#if $context.conditions}\n    <ActorConditions />\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  /**\n   * The HTML to render or to edit.\n   */\n  export let content: string;\n  /**\n   * The data field to update via form post, which will be applied to the entity the form represents (e.g., to the Actor).\n   */\n  export let target: string;\n  /**\n   * Whether or not the editor is editable or readonly.\n   */\n  export let editable: boolean;\n</script>\n\n{@html FoundryAdapter.createEditorHtml(content, target, editable)}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ContainerSheetContext,\n    ItemSheetContext,\n  } from 'src/types/item.types';\n  import type {\n    CharacterSheetContext,\n    NpcSheetContext,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { toNumber } from 'src/utils/numbers';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let element: keyof HTMLElementTagNameMap;\n  export let document: any;\n  export let field: string;\n  export let value: string;\n  export let editable: boolean;\n  export let cssClass: string = '';\n  export let spellcheck: boolean = false;\n  export let dataMaxLength: number = 40;\n  export let placeholder: string | null = null;\n  export let saveAs: 'string' | 'number' = 'string';\n  export let title: string | null = null;\n  export let selectOnFocus: boolean = false;\n\n  $: draftValue = value;\n\n  async function update() {\n    if (draftValue.length > dataMaxLength) {\n      draftValue = draftValue.substring(0, dataMaxLength);\n    }\n\n    const valueToSave = saveAs === 'number' ? toNumber(draftValue) : draftValue;\n\n    const result = await document.update({ [field]: valueToSave });\n\n    if (!result) {\n      draftValue = value;\n    }\n  }\n\n  function submitWhenEnterKey(e: KeyboardEvent) {\n    if (e.key == 'Enter') {\n      e.preventDefault();\n      update();\n    }\n  }\n\n  let _el: HTMLElement;\n\n  // [contenteditable] pasting can include HTML\n  // Only the text content is appropriate for this component\n  function handlePaste() {\n    setTimeout(() => {\n      value = _el.textContent ?? '';\n    }, 0);\n  }\n\n  function onFocus(ev: Event & { currentTarget: HTMLElement }) {\n    if (selectOnFocus && window.getSelection) {\n      const selection = window.getSelection();\n      const range = window.document.createRange();\n      range.selectNodeContents(ev.currentTarget);\n      selection?.removeAllRanges();\n      selection?.addRange(range);\n    }\n  }\n\n  const context =\n    getContext<\n      Readable<\n        | CharacterSheetContext\n        | NpcSheetContext\n        | VehicleSheetContext\n        | ContainerSheetContext\n        | ItemSheetContext\n      >\n    >('context');\n\n  $: activeEffectApplied = ActiveEffectsHelper.isActiveEffectAppliedToField(\n    document,\n    field,\n  );\n\n  $: isEnchanted =\n    $context.itemOverrides instanceof Set && $context.itemOverrides.has(field);\n\n  $: overrideTooltip = isEnchanted\n    ? localize('DND5E.Enchantment.Warning.Override')\n    : localize('DND5E.ActiveEffectOverrideWarning');\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if editable && !activeEffectApplied}\n  <svelte:element\n    this={element}\n    bind:this={_el}\n    contenteditable=\"true\"\n    class={cssClass}\n    bind:innerHTML={draftValue}\n    on:blur={update}\n    on:keypress={submitWhenEnterKey}\n    on:paste={handlePaste}\n    on:focus={onFocus}\n    role=\"textbox\"\n    tabindex=\"0\"\n    {spellcheck}\n    data-max-length={dataMaxLength}\n    data-placeholder={placeholder}\n    {title}\n    data-tidy-field={field}\n  />\n{:else}\n  <svelte:element\n    this={element}\n    class={cssClass}\n    {title}\n    data-tidy-field={field}\n    data-tooltip={activeEffectApplied ? overrideTooltip : null}\n  >\n    {value}\n  </svelte:element>\n{/if}\n\n<style lang=\"scss\">\n  [contenteditable] {\n    border: none;\n    outline: none;\n    border-radius: 0.1875rem;\n    -moz-user-select: text;\n    -khtml-user-select: text;\n    -webkit-user-select: text;\n    -o-user-select: text;\n    user-select: text;\n\n    &:empty::before {\n      content: attr(data-placeholder);\n      pointer-events: none;\n      display: block; // For Firefox\n      color: var(--t5e-tertiary-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { SheetStats } from 'src/types/types';\n  import { CONSTANTS } from 'src/constants';\n\n  let stats = getContext<Readable<SheetStats>>(CONSTANTS.SVELTE_CONTEXT.STATS);\n\n  export let andOnValueChange: unknown | null = null;\n</script>\n\n{#key $stats.lastSubmissionTime}\n  {#key andOnValueChange}\n    <slot />\n  {/key}\n{/key}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import SheetEditor from 'src/components/editor/SheetEditor.svelte';\n  import ContentEditableFormField from '../../../components/inputs/ContentEditableFormField.svelte';\n  import type { CharacterSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import RerenderAfterFormSubmission from '../../../components/utility/RerenderAfterFormSubmission.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  type SystemBioField = { field: string; value: string; text: string };\n\n  let bioFields: SystemBioField[] = [];\n  $: bioFields = [\n    {\n      field: 'system.details.gender',\n      value: $context.system.details.gender,\n      text: 'DND5E.Gender',\n    },\n    {\n      field: 'system.details.age',\n      value: $context.system.details.age,\n      text: 'DND5E.Age',\n    },\n    {\n      field: 'system.details.height',\n      value: $context.system.details.height,\n      text: 'DND5E.Height',\n    },\n    {\n      field: 'system.details.weight',\n      value: $context.system.details.weight,\n      text: 'DND5E.Weight',\n    },\n    {\n      field: 'system.details.eyes',\n      value: $context.system.details.eyes,\n      text: 'DND5E.Eyes',\n    },\n    {\n      field: 'system.details.skin',\n      value: $context.system.details.skin,\n      text: 'DND5E.Skin',\n    },\n    {\n      field: 'system.details.hair',\n      value: $context.system.details.hair,\n      text: 'DND5E.Hair',\n    },\n    {\n      field: 'system.details.faith',\n      value: $context.system.details.faith,\n      text: 'DND5E.Faith',\n    },\n  ];\n</script>\n\n<div class=\"scroll-container\">\n  <div class=\"notes-container\">\n    <div\n      class=\"top-notes note-entries\"\n      class:limited={$context.showLimitedSheet}\n    >\n      <article>\n        <ul class=\"character-details\">\n          {#each bioFields as bioField (bioField.field)}\n            <li>\n              <span>{localize(bioField.text)}:</span>\n              <ContentEditableFormField\n                selectOnFocus={true}\n                element=\"span\"\n                editable={$context.editable && !$context.lockSensitiveFields}\n                document={$context.actor}\n                field={bioField.field}\n                value={bioField.value ?? ''}\n                cssClass=\"detail-input\"\n              />\n            </li>\n          {/each}\n        </ul>\n      </article>\n    </div>\n    <div class=\"main-notes\">\n      <div\n        class=\"left-notes note-entries\"\n        class:limited={$context.showLimitedSheet}\n      >\n        <RerenderAfterFormSubmission\n          andOnValueChange={$context.system.details.trait}\n        >\n          <article use:$context.activateEditors>\n            <div class=\"section-titles biopage\">\n              {localize('DND5E.PersonalityTraits')}\n            </div>\n            <SheetEditor\n              content={$context.traitEnrichedHtml}\n              target=\"system.details.trait\"\n              editable={$context.editable}\n            />\n          </article>\n        </RerenderAfterFormSubmission>\n\n        <RerenderAfterFormSubmission\n          andOnValueChange={$context.system.details.ideal}\n        >\n          <article use:$context.activateEditors>\n            <div class=\"section-titles biopage\">{localize('DND5E.Ideals')}</div>\n            <SheetEditor\n              content={$context.idealEnrichedHtml}\n              target=\"system.details.ideal\"\n              editable={$context.editable}\n            />\n          </article>\n        </RerenderAfterFormSubmission>\n        <RerenderAfterFormSubmission\n          andOnValueChange={$context.system.details.bond}\n        >\n          <article use:$context.activateEditors>\n            <div class=\"section-titles biopage\">{localize('DND5E.Bonds')}</div>\n            <SheetEditor\n              content={$context.bondEnrichedHtml}\n              target=\"system.details.bond\"\n              editable={$context.editable}\n            />\n          </article>\n        </RerenderAfterFormSubmission>\n        <RerenderAfterFormSubmission\n          andOnValueChange={$context.system.details.flaw}\n        >\n          <article use:$context.activateEditors>\n            <div class=\"section-titles biopage\">{localize('DND5E.Flaws')}</div>\n            <SheetEditor\n              content={$context.flawEnrichedHtml}\n              target=\"system.details.flaw\"\n              editable={$context.editable}\n            />\n          </article>\n        </RerenderAfterFormSubmission>\n      </div>\n\n      <div\n        class=\"right-notes note-entries\"\n        class:limited={$context.showLimitedSheet}\n      >\n        <RerenderAfterFormSubmission\n          andOnValueChange={$context.system.details.appearance}\n        >\n          <article class=\"appearance-notes\" use:$context.activateEditors>\n            <div class=\"section-titles biopage\">\n              {localize('DND5E.Appearance')}\n            </div>\n            <SheetEditor\n              content={$context.appearanceEnrichedHtml}\n              target=\"system.details.appearance\"\n              editable={$context.editable}\n            />\n          </article>\n        </RerenderAfterFormSubmission>\n        <RerenderAfterFormSubmission\n          andOnValueChange={$context.system.details.biography.value}\n        >\n          <article class=\"biography-notes\" use:$context.activateEditors>\n            <div class=\"section-titles\">\n              {localize('DND5E.Background')}/{localize('DND5E.Biography')}\n            </div>\n            <SheetEditor\n              content={$context.biographyEnrichedHtml}\n              target=\"system.details.biography.value\"\n              editable={$context.editable}\n            />\n          </article>\n        </RerenderAfterFormSubmission>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .notes-container {\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    height: 100%;\n    gap: 1rem;\n  }\n\n  .main-notes {\n    display: flex;\n    flex: 1;\n    gap: 1rem;\n  }\n\n  .left-notes,\n  .right-notes {\n    flex: 1;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n\n  .left-notes {\n    max-width: 21.875rem;\n  }\n\n  .top-notes {\n    width: 100%;\n\n    .character-details {\n      margin: 0;\n      padding: 0;\n      display: flex;\n      gap: 0.25rem;\n      flex-wrap: wrap;\n    }\n\n    li {\n      display: flex;\n      flex: 0 0 calc(100% / 3 - 0.25rem);\n\n      :global(span) {\n        flex: 1;\n        margin: 0 0.5rem 0 0.25rem;\n      }\n\n      :global(span:first-child) {\n        flex: 0 0 0.0625rem;\n        font-weight: 600;\n        margin: 0;\n      }\n    }\n  }\n\n  .character-details :global(.detail-input) {\n    flex: 1;\n    margin: 0 0.5rem 0 0.25rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { type CharacterSheetContext } from 'src/types/types';\n  import SheetEditor from 'src/components/editor/SheetEditor.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import RerenderAfterFormSubmission from '../../../components/utility/RerenderAfterFormSubmission.svelte';\n  import TextInput from '../../../components/inputs/TextInput.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"scroll-container journal-container\">\n  <div\n    class=\"left-notes note-entries\"\n    class:limited={$context.showLimitedSheet}\n  >\n    <RerenderAfterFormSubmission\n      andOnValueChange={TidyFlags.notes1.members.value.get($context.actor) ??\n        ''}\n    >\n      <article use:$context.activateEditors>\n        <div class=\"section-titles\">\n          <TextInput\n            document={$context.actor}\n            field={TidyFlags.notes1.members.name.prop}\n            value={TidyFlags.notes1.members.name.get($context.actor) ?? ''}\n            placeholder={localize('TIDY5E.JournalPersonsOfInterest')}\n            selectOnFocus={true}\n            stopChangePropagation={true}\n            disabled={!$context.editable}\n          />\n        </div>\n        <SheetEditor\n          content={$context.notes1EnrichedHtml}\n          target={TidyFlags.notes1.members.value.prop}\n          editable={$context.editable}\n        />\n      </article>\n    </RerenderAfterFormSubmission>\n    <RerenderAfterFormSubmission\n      andOnValueChange={TidyFlags.notes2.members.value.get($context.actor) ??\n        ''}\n    >\n      <article use:$context.activateEditors>\n        <div class=\"section-titles\">\n          <TextInput\n            document={$context.actor}\n            field={TidyFlags.notes2.members.name.prop}\n            value={TidyFlags.notes2.members.name.get($context.actor) ?? ''}\n            placeholder={localize('TIDY5E.JournalLocationsOfInterest')}\n            selectOnFocus={true}\n            stopChangePropagation={true}\n            disabled={!$context.editable}\n          />\n        </div>\n        <SheetEditor\n          content={$context.notes2EnrichedHtml}\n          target={TidyFlags.notes2.members.value.prop}\n          editable={$context.editable}\n        />\n      </article>\n    </RerenderAfterFormSubmission>\n    <RerenderAfterFormSubmission\n      andOnValueChange={TidyFlags.notes3.members.value.get($context.actor) ??\n        ''}\n    >\n      <article use:$context.activateEditors>\n        <div class=\"section-titles\">\n          <TextInput\n            document={$context.actor}\n            field={TidyFlags.notes3.members.name.prop}\n            value={TidyFlags.notes3.members.name.get($context.actor) ?? ''}\n            placeholder={localize('TIDY5E.JournalQuests')}\n            selectOnFocus={true}\n            stopChangePropagation={true}\n            disabled={!$context.editable}\n          />\n        </div>\n        <SheetEditor\n          content={$context.notes3EnrichedHtml}\n          target={TidyFlags.notes3.members.value.prop}\n          editable={$context.editable}\n        />\n      </article>\n    </RerenderAfterFormSubmission>\n    <RerenderAfterFormSubmission\n      andOnValueChange={TidyFlags.notes4.members.value.get($context.actor) ??\n        ''}\n    >\n      <article use:$context.activateEditors>\n        <div class=\"section-titles\">\n          <TextInput\n            document={$context.actor}\n            field={TidyFlags.notes4.members.name.prop}\n            value={TidyFlags.notes4.members.name.get($context.actor) ?? ''}\n            placeholder={localize('TIDY5E.JournalMisc')}\n            selectOnFocus={true}\n            stopChangePropagation={true}\n            disabled={!$context.editable}\n          />\n        </div>\n        <SheetEditor\n          content={$context.notes4EnrichedHtml}\n          target={TidyFlags.notes4.members.value.prop}\n          editable={$context.editable}\n        />\n      </article>\n    </RerenderAfterFormSubmission>\n  </div>\n  <div\n    class=\"right-notes note-entries\"\n    class:limited={$context.showLimitedSheet}\n  >\n    <RerenderAfterFormSubmission\n      andOnValueChange={TidyFlags.notes.members.value.get($context.actor) ?? ''}\n    >\n      <article class=\"journal-notes\" use:$context.activateEditors>\n        <div class=\"section-titles\">{localize('TIDY5E.JournalEntries')}</div>\n        <SheetEditor\n          content={$context.notesEnrichedHtml}\n          target={TidyFlags.notes.members.value.prop}\n          editable={$context.editable}\n        />\n      </article>\n    </RerenderAfterFormSubmission>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .journal-container {\n    display: flex;\n    align-items: flex-start;\n    flex-direction: row;\n    overflow-x: inherit;\n    gap: 1rem;\n  }\n\n  .left-notes,\n  .right-notes {\n    flex: 1;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n\n  .left-notes {\n    max-width: 21.875rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import ItemTable from 'src/components/item-list/v1/ItemTable.svelte';\n  import ItemTableColumn from 'src/components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableHeaderRow from 'src/components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from 'src/components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableCell from 'src/components/item-list/v1/ItemTableCell.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import ItemName from 'src/components/item-list/ItemName.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemUseButton from 'src/components/item-list/ItemUseButton.svelte';\n  import RechargeControl from 'src/components/item-list/controls/RechargeControl.svelte';\n  import ActionFilterOverrideControl from 'src/components/item-list/controls/ActionFilterOverrideControl.svelte';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import { Actions } from 'src/features/actions/actions';\n  import Dnd5eIcon from 'src/components/icon/Dnd5eIcon.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n  import InlineContainerToggle from 'src/sheets/container/InlineContainerToggle.svelte';\n  import { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import InlineContainerView from 'src/sheets/container/InlineContainerView.svelte';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n  let inlineContainerToggleService = getContext<InlineContainerToggleService>(\n    CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n  );\n\n  $: actions = SheetSections.configureActions(\n    $context.actions,\n    tabId,\n    SheetPreferencesService.getByType($context.actor.type),\n    TidyFlags.sectionConfig.get($context.actor)?.[tabId],\n  );\n\n  let searchCriteria: string = '';\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: {\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: actions,\n      tabId: tabId,\n    });\n  }\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n\n  const localize = FoundryAdapter.localize;\n\n  declareLocation('actions');\n\n  const damageHealingTypeIconMap = Actions.damageAndHealingTypesIconSrcMap;\n</script>\n\n<UtilityToolbar class=\"abilities-toolbar\">\n  <Search bind:value={searchCriteria} />\n  <PinnedFilterToggles\n    filterGroupName={tabId}\n    filters={ItemFilterRuntime.getPinnedFiltersForTab(\n      $context.filterPins,\n      $context.filterData,\n      tabId,\n    )}\n  />\n  <FilterMenu {tabId} />\n  {#each utilityBarCommands as command (command.title)}\n    <UtilityToolbarCommand\n      title={command.title}\n      iconClass={command.iconClass}\n      text={command.text}\n      visible={command.visible ?? true}\n      on:execute={(ev) => command.execute?.(ev.detail)}\n    />\n  {/each}\n</UtilityToolbar>\n\n<div class=\"actions-tab-container scroll-container flex-column small-gap\">\n  {#each actions as section (section.key)}\n    {@const visibleItemCount = ItemVisibility.countVisibleItems(\n      section.actions.map((a) => a.item),\n      $itemIdsToShow,\n    )}\n    {#if visibleItemCount > 0 && section.show}\n      <ItemTable key={section.key}>\n        <svelte:fragment slot=\"header\">\n          <ItemTableHeaderRow>\n            <ItemTableColumn primary={true}>\n              {section.label}\n            </ItemTableColumn>\n            <ItemTableColumn baseWidth=\"6.25rem\"\n              >{localize('DND5E.Range')}</ItemTableColumn\n            >\n            <ItemTableColumn baseWidth=\"5rem\"\n              >{localize('TIDY5E.HitDC')}</ItemTableColumn\n            >\n            <ItemTableColumn baseWidth=\"7.5rem\"\n              >{localize('DND5E.Damage')}</ItemTableColumn\n            >\n            {#if $context.editable && $context.useClassicControls}\n              <ItemTableColumn baseWidth=\"1.5rem\"></ItemTableColumn>\n            {/if}\n          </ItemTableHeaderRow>\n        </svelte:fragment>\n        <svelte:fragment slot=\"body\">\n          {#each section.actions as actionItem (actionItem.item.id)}\n            <ItemTableRow\n              item={actionItem.item}\n              on:mousedown={(event) =>\n                FoundryAdapter.editOnMiddleClick(event.detail, actionItem.item)}\n              contextMenu={{\n                type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n                uuid: actionItem.item.uuid,\n              }}\n              hidden={!!$itemIdsToShow &&\n                !$itemIdsToShow.has(actionItem.item.id)}\n              let:toggleSummary\n            >\n              <ItemTableCell primary={true}>\n                <ItemUseButton\n                  disabled={!$context.editable}\n                  item={actionItem.item}\n                />\n                {#if 'containerContents' in actionItem && !!actionItem.containerContents}\n                  <InlineContainerToggle\n                    iconClass=\"fa-lg\"\n                    item={actionItem.item}\n                    {inlineContainerToggleService}\n                  />\n                {/if}\n                <ItemName\n                  item={actionItem.item}\n                  on:toggle={() => toggleSummary($context.actor)}\n                  useActiveEffectsMarker={false}\n                >\n                  {@const sourceClassText =\n                    $context.actor.spellcastingClasses?.[\n                      actionItem.item.system.sourceClass\n                    ]?.name ?? ''}\n                  <div class=\"flex-1 min-width-0\">\n                    <div\n                      data-tidy-item-name={actionItem.item.name}\n                      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                      class=\"truncate\"\n                      title={actionItem.item.name}\n                    >\n                      {actionItem.item.name}\n                    </div>\n                    <small>\n                      {#if actionItem.item.type !== CONSTANTS.ITEM_TYPE_SPELL}\n                        {actionItem.typeLabel}\n                      {:else if actionItem.item.system.level !== 0}\n                        {actionItem.item.labels?.level ?? ''}\n                        {actionItem.item.labels?.school ?? ''}\n                        {#if sourceClassText}\n                          • {localize(sourceClassText)}\n                        {/if}\n                      {:else}\n                        {actionItem.item.labels?.school ?? ''}\n                        {actionItem.item.labels?.level ?? ''}\n                        {#if sourceClassText}\n                          • {localize(sourceClassText)}\n                        {/if}\n                      {/if}\n                    </small>\n                  </div>\n                </ItemName>\n                {#if actionItem.item.system.recharge?.value || actionItem.item.hasLimitedUses || actionItem.item.system.activation?.type === 'legendary'}\n                  <div class=\"item-uses\" title={localize('DND5E.Uses')}>\n                    {#if actionItem.item.system.recharge?.charged && actionItem.item.system.recharge?.value}\n                      <i\n                        class=\"fas fa-bolt\"\n                        title={localize('DND5E.Charged')}\n                      />\n                    {:else if actionItem.item.system.recharge?.value}\n                      <RechargeControl item={actionItem.item} />\n                    {:else if actionItem.item.hasLimitedUses}\n                      {#if actionItem.item.system.uses?.value === actionItem.item.system.uses?.max && actionItem.item.system.uses?.autoDestroy}\n                        <div title={actionItem.item.system.quantity}>\n                          {actionItem.item.system.quantity ?? 0}\n                        </div>\n                        <small>{localize('DND5E.Quantity')}</small>\n                      {:else}\n                        <div>\n                          {actionItem.item.system.uses.value ?? 0} / {actionItem\n                            .item.system.uses.max ?? 0}\n                        </div>\n                        <small>{localize('DND5E.Uses')}</small>\n                      {/if}\n                    {/if}\n                    {#if actionItem.item.system.activation.type === 'legendary'}\n                      {actionItem.item.system.activation.cost}\n                    {/if}\n                  </div>\n                {/if}\n              </ItemTableCell>\n              <ItemTableCell\n                baseWidth=\"6.25rem\"\n                cssClass=\"truncate flex-column no-gap\"\n              >\n                <!-- Range -->\n                {#if actionItem.rangeTitle !== null}\n                  <div\n                    title={actionItem.rangeTitle}\n                    class=\"flex-column-truncate\"\n                  >\n                    {actionItem.rangeTitle ?? ''}\n                  </div>\n                {/if}\n                {#if actionItem.rangeSubtitle !== null}\n                  <small\n                    title={actionItem.rangeSubtitle}\n                    class=\"flex-column-truncate\"\n                  >\n                    {actionItem.rangeSubtitle ?? ''}\n                  </small>\n                {/if}\n              </ItemTableCell>\n              <ItemTableCell baseWidth=\"5rem\" cssClass=\"flex-column no-gap\">\n                <!-- HIT / DC -->\n                {#if actionItem.item.labels?.save || actionItem.item.labels?.toHit}\n                  {#if actionItem.item.labels?.save !== '' && actionItem.item.labels?.save !== undefined}\n                    {@const saveAbilityLabel =\n                      FoundryAdapter.lookupAbility(\n                        actionItem.item.system.save.ability,\n                      )?.label ?? ''}\n                    <span\n                      title={actionItem.item.labels?.save ?? ''}\n                      class=\"flex-column-truncate\"\n                    >\n                      {localize('DND5E.AbbreviationDC')}\n                      {actionItem.item.system.save.dc ?? ''}\n                    </span>\n                    <small title={saveAbilityLabel} class=\"flex-column-truncate\"\n                      >{saveAbilityLabel}</small\n                    >\n                  {:else}\n                    <span title={actionItem.item.labels?.toHit ?? ''}\n                      >{actionItem.item.labels?.toHit ?? ''}</span\n                    >\n                  {/if}\n                {/if}\n              </ItemTableCell>\n              <ItemTableCell\n                baseWidth=\"7.5rem\"\n                cssClass=\"flex-wrap flex-row small-gap extra-small-row-gap\"\n              >\n                <!-- Damage -->\n                {#each actionItem.calculatedDerivedDamage ?? [] as entry, i}\n                  {@const iconSrc = damageHealingTypeIconMap[entry.damageType]}\n                  <div\n                    title={entry.label ??\n                      entry.formula + entry.damageHealingTypeLabel}\n                    class=\"truncate flex-row align-items-flex-end extra-small-gap\"\n                  >\n                    <span>{entry.formula}</span>\n                    {#if iconSrc}\n                      <Dnd5eIcon src={iconSrc} />\n                    {/if}\n                  </div>\n                {/each}\n              </ItemTableCell>\n              {#if $context.editable && $context.useClassicControls}\n                <ItemTableCell baseWidth=\"1.5rem\">\n                  <ActionFilterOverrideControl item={actionItem.item} />\n                </ItemTableCell>\n              {/if}\n            </ItemTableRow>\n            {#if 'containerContents' in actionItem && !!actionItem.containerContents}\n              <InlineContainerView\n                container={actionItem.item}\n                containerContents={actionItem.containerContents}\n                editable={$context.editable}\n                {inlineContainerToggleService}\n                lockItemQuantity={$context.lockItemQuantity}\n                sheetDocument={$context.actor}\n                --t5e-image-size-override=\"1.5rem\"\n              />\n            {/if}\n          {/each}\n        </svelte:fragment>\n      </ItemTable>\n    {/if}\n  {/each}\n</div>\n\n<style lang=\"scss\">\n  .actions-tab-container {\n    --t5e-image-size-override: 2rem;\n    --icon-fill: var(--t5e-secondary-color);\n    --icon-width: 1rem;\n    --icon-height: 1rem;\n\n    :global(.item-table-row) {\n      min-height: 2rem;\n    }\n  }\n\n  .flex-column-truncate {\n    text-align: center;\n    width: 100%;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .item-uses {\n    align-self: center;\n    text-align: center;\n    flex-basis: 4.25rem;\n  }\n\n  small {\n    color: var(--t5e-tertiary-color);\n  }\n</style>\n","import { error } from 'src/utils/logging';\n\nexport class HandlebarsTemplateRenderer {\n  path: string;\n\n  constructor(props: Partial<HandlebarsTemplateRenderer>) {\n    this.path = props?.path ?? '';\n  }\n\n  async render(data: any) {\n    try {\n      return await renderTemplate(this.path, data);\n    } catch (e) {\n      error('Failed to render handlebars template', false, e);\n      return '';\n    }\n  }\n}\n","import type { OnRenderTabParams } from 'src/types/types';\nimport type { RenderScheme } from '../api.types';\n\n/**\n * The required static ID associated with a tab.\n *\n * @remarks\n * A `tabId` is a unique string of text that identifies your tab.\n * It needs to be in a format that can be put into an HTML attribute.\n * The tab ID is always required to register a tab.\n *\n * A `tabId` must be unique to the target sheet. For example,\n * the character sheet can only have one \"my-module-id-my-spellbook-tab\" ID,\n * and the NPC sheet can also only have one \"my-module-id-my-spellbook-tab\" ID, etc.\n *\n * Advice for crafting a unique tab ID:\n * - for modules, use your module ID as a prefix (e.g., \"my-module-id\")\n *   - for world scripts, use your game world name (e.g., \"my-game-world\")\n * - add a hyphenated version of the tab title (e.g., for a tab titled \"My Spellbook Tab\", use \"my-spellbook-tab\")\n * - join these two pieces together with a hyphen:\n * ```\n * \"my-module-id-my-spellbook-tab\"\n * ```\n * \n * @category Tabs\n */\nexport type TabId = string;\n\n/** @category Tabs */\nexport type CustomTabTitle = string | (() => string);\n\n/**\n * The basis of all custom registered tabs.\n */\n/** @category Tabs */\nexport abstract class CustomTabBase {\n  /**\n   * The title to display on the tab. Accepts localization keys and plain text.\n   */\n  abstract title: CustomTabTitle;\n\n  /** {@inheritDoc TabId} */\n  abstract tabId: TabId;\n\n  /**\n   * Optionally determines whether to refresh content each time an application render occurs.\n   *\n   * For svelte-based content, the default is \"force\". For HTML and Handlebars content, the default is \"handlebars\".\n   */\n  abstract renderScheme?: RenderScheme;\n\n  /**\n   * Optional function to determine whether the tab should be visible when viewing the sheet. When excluded, it defaults to `true`.\n   */\n  abstract enabled?: (context: any) => boolean;\n\n  /**\n   * Optional function which is called each time a change detection cycle occurs on the sheet. This is any time a FormApplication would normally call `render()`.\n   */\n  abstract onRender?: (params: OnRenderTabParams) => void;\n\n  /**\n   * An optional array of CSS classes to apply to the tab contents container.\n   */\n  abstract tabContentsClasses?: string[];\n\n  /**\n   * An optional override to whether the target tab should use default sheet event listeners.\n   * Defaults to `false`.\n   * \n   * @remarks\n   * The default sheet listeners pertain to the default 5e sheets. Behaviors include but are not limited to\n   * - `data-action` click handling\n   * - drag-and-drop behaviors\n   * - rollable items click handling\n   * - item controls click handling\n   * - proficiency toggling\n   * - ... etc.\n   *\n   * Leaving this field `false` means you wish to take full control of the event handling of your content.\n   */\n  abstract activateDefaultSheetListeners?: boolean;\n}\n","import type { OnRenderTabParams } from 'src/types/types';\nimport type { RenderScheme } from '../api.types';\nimport {\n  CustomTabBase,\n  type CustomTabTitle,\n  type TabId,\n} from './CustomTabBase';\n\n/**\n * The information necessary for rendering a handlebars-based tab.\n * \n * @example Getting the API and creating a handlebars-based item tab that only shows on spells\n * ```js\n * Hooks.once('tidy5e-sheet.ready', (api) => {\n *   const myTab = new api.models.HandlebarsTab({\n *     title: 'My Tab',\n *     tabId: 'my-module-id-my-example-handlebars-tab',\n *     path: '/modules/my-module-id/my-item-tab.hbs',\n *     enabled: (data) => data.item.type === 'spell',\n *     getData: (data) => {\n *       data['my-extra-data'] = 'Hello, world! 👋';\n *       return data;\n *     },\n *     onRender(params) {\n *       const myTab = $(params.tabContentsElement);\n *       myTab.find('.my-control').click(_myHandler.bind(params.app));\n *     },\n *   });\n *   // To Do: Register this handlebars-based item tab!\n * });\n * ```\n */\n/** @category Tabs */\nexport class HandlebarsTab extends CustomTabBase {\n  title: CustomTabTitle = '';\n  tabId: TabId = '';\n  /**\n   * The path to the handlebars template. Use a leading slash to look in the UserData directory.\n   * @example A template in a module's templates directory\n   * ```\"/modules/my-module-id/templates/my-module-template.hbs\"```\n   */\n  path: string = '';\n  renderScheme: RenderScheme = 'handlebars';\n  tabContentsClasses: string[] = [];\n  activateDefaultSheetListeners?: boolean | undefined = false;\n\n  constructor(props?: Partial<HandlebarsTab>) {\n    super();\n\n    const merged = foundry.utils.mergeObject(this, props);\n    Object.assign(this, merged);\n  }\n\n  /**\n   * An optional function that provides the relevant application context\n   * (item sheet context, character sheet context, NPC sheet context, etc.)\n   * and expects the same data or a replacement object in return.\n   * The return value is passed to the Handlebars template.\n   */\n  getData?: (context: any) => any | Promise<any>;\n\n  /**\n   * Optional function to determine whether the tab should be visible when viewing the sheet. When excluded, it defaults to `true`.\n   * The `context` field is the relevant application context (item sheet, character sheet, etc.).\n   */\n  enabled?: (context: any) => boolean;\n\n  /**\n   * Optional function which is called each time a change detection cycle occurs on the sheet.\n   * It is called after this tab's content is optionally re-rendered to the DOM.\n   */\n  onRender?: (params: OnRenderTabParams) => void;\n}\n","import type { OnRenderTabParams } from 'src/types/types';\nimport type { RenderScheme } from '../api.types';\nimport {\n  CustomTabBase,\n  type CustomTabTitle,\n  type TabId,\n} from './CustomTabBase';\n\n/**\n * The information necessary for rendering an HTML-based tab.\n * @example Getting the API and creating an HTML tab that wires an even on render\n * ```js\n * Hooks.once('tidy5e-sheet.ready', (api) => {\n *   const myTab = new api.models.HtmlTab({\n *     title: 'My Tab',\n *     tabId: \"my-module-id-my-example-html-tab\",\n *     html: `<button type=\"button\" class=\"my-button\">My button</button>`,\n *     onRender(params) {\n *       params.element\n *         .querySelector('.my-button')\n *         ?.addEventListener('click', () => {\n *           alert('clicked');\n *         });\n *     },\n *   });\n *   // To Do: Register this HTML-based tab!\n * });\n * ```\n */\n/** @category Tabs */\nexport class HtmlTab extends CustomTabBase {\n  title: CustomTabTitle = '';\n  tabId: TabId = '';\n  html: string = '';\n  renderScheme: RenderScheme = 'handlebars';\n  tabContentsClasses: string[] = [];\n  activateDefaultSheetListeners?: boolean | undefined = false;\n\n  constructor(props?: Partial<HtmlTab>) {\n    super();\n\n    const merged = foundry.utils.mergeObject(this, props);\n    Object.assign(this, merged);\n  }\n\n  enabled?: (context: any) => boolean;\n\n  onRender?: (params: OnRenderTabParams) => void;\n}\n","import type { ComponentType } from 'svelte';\nimport type { OnRenderTabParams } from 'src/types/types';\nimport type { RenderScheme } from '../api.types';\nimport { CustomTabBase, type CustomTabTitle } from './CustomTabBase';\n\n/**\n * The information necessary for rendering a svelte-based tab.\n *\n * @example Getting the API and creating a svelte-based tab with custom props and an extended context map.\n * ```js\n * Hooks.once('tidy5e-sheet.ready', (api) => {\n *   const myTab = new api.models.SvelteTab({\n *     tabId: 'my-module-id-my-example-svelte-tab',\n *     title: 'My Tab',\n *     component: MyCustomSvelteComponent,\n *     getProps(data) {\n *       return {\n *         message: `Hello, ${data.actor.name}! 👋`,\n *       };\n *     },\n *     getContext(context) {\n *       context.set(\n *         'custom-context',\n *         `This text came from some custom context that I injected during tab setup. It was rendered at ${new Date()}`\n *       );\n *       return context;\n *     },\n *   });\n *\n *   // To Do: Register this svelte-based tab!\n * });\n * ```\n */\n/** @category Tabs */\nexport class SvelteTab extends CustomTabBase {\n  /**\n   * A reference to the `.svelte` component.\n   */\n  component?: ComponentType = undefined;\n  title: CustomTabTitle = '';\n  tabId: string = '';\n  /**\n   * For svelte-based tabs, the render scheme is set to 'force' and generally ignored.\n   */\n  renderScheme?: RenderScheme = 'force';\n  tabContentsClasses?: string[] = [];\n  activateDefaultSheetListeners?: boolean | undefined = false;\n\n  constructor(props?: Partial<SvelteTab>) {\n    super();\n\n    const merged = foundry.utils.mergeObject(this, props);\n    Object.assign(this, merged);\n  }\n\n  /**\n   * An optional function that provides the relevant application context\n   * (item sheet context, character sheet context, NPC sheet context, etc.)\n   * and expects an object in return.\n   * The return value is passed to the svelte component as its props.\n   */\n  getProps?: (data: any) => Record<string, any>;\n\n  /**\n   * An optional function that provides the relevant svelte context map and\n   * expects the component's ideal context map in return.\n   * \n   * @remarks \n   * For most sheets, a guaranteed entry in the context map is a readable store \n   * of the sheet's application context \n   * (item sheet context, character sheet context, NPC sheet context, etc.).\n   */\n  getContext?: (context: Map<any, any>) => Map<any, any>;\n\n  enabled?: (data: any) => boolean;\n\n  onRender?: (params: OnRenderTabParams) => void;\n}\n","import { HandlebarsTemplateRenderer } from 'src/runtime/HandlebarsTemplateRenderer';\nimport { HandlebarsTab } from 'src/api/tab/HandlebarsTab';\nimport { HtmlTab } from 'src/api/tab/HtmlTab';\nimport type { HtmlTabContent, Tab } from 'src/types/types';\nimport { debug, error } from 'src/utils/logging';\nimport { CONSTANTS } from 'src/constants';\nimport { isNil } from 'src/utils/data';\nimport type { RegisteredTab, SheetLayout } from '../types';\nimport type { CustomTabTitle } from 'src/api/tab/CustomTabBase';\nimport type { SupportedTab } from 'src/api/api.types';\nimport { SvelteTab } from 'src/api/tab/SvelteTab';\n\nexport class TabManager {\n  static async prepareTabsForRender(\n    context: any,\n    registeredTabs: RegisteredTab<any>[]\n  ): Promise<Tab[]> {\n    let enabledTabs = getOrderedEnabledSheetTabs(context, registeredTabs);\n\n    let tabs: Tab[] = [];\n\n    for (let sheetTab of enabledTabs) {\n      try {\n        let tab: Tab = {\n          id: sheetTab.id,\n          title: TabManager.getTabTitle(sheetTab),\n          onRender: sheetTab.onRender,\n          content: await getTabContent(context, sheetTab),\n          activateDefaultSheetListeners: sheetTab.activateDefaultSheetListeners,\n          autoHeight: sheetTab.autoHeight,\n        };\n\n        tabs.push(tab);\n      } catch (e) {\n        error('Unable to prepare tab for rendering', false, {\n          error: e,\n          tab: sheetTab,\n        });\n      }\n    }\n    return tabs;\n  }\n\n  static getTabsAsConfigOptions<TContext>(\n    tabs: RegisteredTab<TContext>[]\n  ): Record<string, string> {\n    return tabs.reduce<Record<string, string>>((prev, curr) => {\n      prev[curr.id] = TabManager.getTabTitle(curr);\n      return prev;\n    }, {});\n  }\n\n  static validateTab(tab: SupportedTab) {\n    if (isNil(tab.tabId?.trim(), '')) {\n      error('A tab ID is required for registered tabs.', true);\n      return false;\n    }\n\n    // Add any other validation as needed.\n    \n    return true;\n  }\n\n  static mapCustomTabToRegisteredTab(\n    tab: SupportedTab,\n    layout?: SheetLayout | SheetLayout[]\n  ): RegisteredTab<any> | undefined {\n    let registeredTab: RegisteredTab<any> | undefined;\n    layout ??= CONSTANTS.SHEET_LAYOUT_ALL;\n\n    if (tab instanceof HandlebarsTab) {\n      registeredTab = {\n        content: new HandlebarsTemplateRenderer({ path: tab.path }),\n        id: tab.tabId,\n        title: tab.title,\n        enabled: tab.enabled,\n        layout: layout,\n        onRender: tab.onRender,\n        renderScheme: tab.renderScheme,\n        tabContentsClasses: tab.tabContentsClasses,\n        getData: tab.getData,\n        activateDefaultSheetListeners: tab.activateDefaultSheetListeners,\n      };\n    } else if (tab instanceof HtmlTab) {\n      registeredTab = {\n        content: {\n          html: tab.html,\n          type: 'html',\n          renderScheme: tab.renderScheme,\n          cssClass: tab.tabContentsClasses.join(' '),\n        },\n        id: tab.tabId,\n        title: tab.title,\n        enabled: tab.enabled,\n        layout: layout,\n        onRender: tab.onRender,\n        renderScheme: tab.renderScheme,\n        tabContentsClasses: tab.tabContentsClasses,\n        activateDefaultSheetListeners: tab.activateDefaultSheetListeners,\n      };\n    } else if (tab instanceof SvelteTab) {\n      // An external svelte tab should be instantiated\n      if (tab.component) {\n        registeredTab = {\n          content: {\n            type: 'svelte',\n            component: tab.component,\n            cssClass: tab.tabContentsClasses?.join(' ') ?? '',\n            getProps: tab.getProps,\n            getContext: tab.getContext,\n          },\n          id: tab.tabId,\n          title: tab.title,\n          enabled: tab.enabled,\n          layout: layout,\n          onRender: tab.onRender,\n          renderScheme: 'force',\n          tabContentsClasses: tab.tabContentsClasses,\n          activateDefaultSheetListeners: tab.activateDefaultSheetListeners,\n        };\n      }\n    }\n\n    return registeredTab;\n  }\n\n  static getTabTitle(tab: { title: CustomTabTitle }) {\n    try {\n      return typeof tab.title === 'function' ? tab.title() : tab.title;\n    } catch (e) {\n      error('An error occurred while getting the tab title', false, e);\n      debug('Tab title error troubleshooting info', { tab });\n      return '';\n    }\n  }\n}\n\nfunction getOrderedEnabledSheetTabs<TContext>(\n  context: TContext,\n  registeredTabs: RegisteredTab<TContext>[]\n) {\n  return [...registeredTabs].filter((t) => {\n    try {\n      return (\n        isNil(t.enabled) ||\n        (typeof t.enabled === 'function' && t.enabled(context))\n      );\n    } catch (e) {\n      error(\n        'An error occurred while determining if a tab should be enabled.',\n        false,\n        e\n      );\n      debug('Tab-enabled error troubleshooting info', { tab: t });\n      return false;\n    }\n  });\n}\n\nasync function getTabContent(data: any, tab: RegisteredTab<any>) {\n  if ('type' in tab.content && tab.content.type === 'svelte') {\n    return tab.content;\n  }\n\n  if ('type' in tab.content && tab.content.type === 'html') {\n    return tab.content;\n  }\n\n  if (tab.content instanceof HandlebarsTemplateRenderer) {\n    const handlebarsData =\n      typeof tab.getData === 'function' ? await tab.getData(data) : data;\n\n    return {\n      html: await tab.content.render(handlebarsData),\n      renderScheme: tab.renderScheme ?? 'handlebars',\n      type: 'html',\n      cssClass: tab.tabContentsClasses?.join(' '),\n    } satisfies HtmlTabContent;\n  }\n\n  error(\n    'Unble to get tab content. The provided tab information is unable to be rendered.',\n    false,\n    tab\n  );\n\n  return {\n    html: '',\n    renderScheme: 'force',\n    type: 'html',\n  } satisfies HtmlTabContent;\n}\n","import type {\n  CustomContentInjectParams,\n  OnContentReadyParams,\n  OnRenderParams,\n  RenderScheme,\n} from '../api.types';\n\n/** @category Content */\nexport abstract class CustomContentBase {\n  /** {@inheritDoc CustomContentInjectParams} */\n  abstract injectParams?: CustomContentInjectParams;\n\n  /**\n   * Optionally determines whether to refresh content each time an application render occurs.\n   *\n   * For svelte-based content, the default is \"force\". For HTML and Handlebars content, the default is \"handlebars\".\n   */\n  abstract renderScheme?: RenderScheme;\n\n  /**\n   * Optional function to determine whether the content should be rendered. When excluded, it defaults to `true`.\n   */\n  abstract enabled?: (context: any) => boolean;\n\n  /**\n   * After the custom content has been prepared for rendering and is ready to inject into the sheet,\n   * this callback is invoked.\n   *\n   * @remarks\n   * For more complex HTML insertion scenarios, one can skip {@link CustomContentInjectParams}\n   * and simply inject the prepared content with this callback.\n   *\n   * This callback is also useful for quick debug logging of the content to be rendered.\n   */\n  abstract onContentReady?: (params: OnContentReadyParams) => void;\n\n  /**\n   * Optional function which is called each time a change detection cycle occurs on the sheet. This is any time a FormApplication would normally call `render()`.\n   */\n  abstract onRender?: (params: OnRenderParams) => void;\n\n  /**\n   * An optional override to whether the target content should use default sheet event listeners.\n   * Defaults to `false`.\n   *\n   * @remarks\n   * The default sheet listeners pertain to the default 5e sheets. Behaviors include but are not limited to\n   * - `data-action` click handling\n   * - drag-and-drop behaviors\n   * - rollable items click handling\n   * - item controls click handling\n   * - proficiency toggling\n   * - ... etc.\n   *\n   * Leaving this field `false` means you wish to take full control of the event handling of your content.\n   */\n  abstract activateDefaultSheetListeners?: boolean;\n}\n","import type {\n  CustomContentInjectParams,\n  OnContentReadyParams,\n  OnRenderParams,\n  RenderScheme,\n} from '../api.types';\nimport { CustomContentBase } from './CustomContentBase';\n\n/** @category Content */\nexport class HandlebarsContent extends CustomContentBase {\n  injectParams?: CustomContentInjectParams | undefined;\n  /**\n   * The path to the handlebars template. Use a leading slash to look in the UserData directory.\n   * @example A template in a module's templates directory\n   * ```\"/modules/my-module-id/templates/my-module-template.hbs\"```\n   */\n  path: string = '';\n  renderScheme: RenderScheme = 'handlebars';\n  activateDefaultSheetListeners?: boolean | undefined = false;\n\n  constructor(props?: Partial<HandlebarsContent>) {\n    super();\n\n    const merged = foundry.utils.mergeObject(this, props);\n    Object.assign(this, merged);\n  }\n\n  onContentReady?: (params: OnContentReadyParams) => void;\n\n  /**\n   * An optional function that provides the relevant application context\n   * (item sheet context, character sheet context, NPC sheet context, etc.)\n   * and expects the same data or a replacement object in return.\n   * The return value is passed to the Handlebars template.\n   */\n  getData?: (context: any) => any | Promise<any>;\n\n  enabled?: (context: any) => boolean;\n\n  onRender?: (params: OnRenderParams) => void;\n}\n","import type { CustomContent, HtmlRuntimeContent } from 'src/types/types';\nimport type { RegisteredContent, SheetLayout } from '../types';\nimport { HandlebarsTemplateRenderer } from 'src/runtime/HandlebarsTemplateRenderer';\nimport { error } from 'src/utils/logging';\nimport { HandlebarsContent } from 'src/api/content/HandlebarsContent';\nimport type { SupportedContent } from 'src/api/api.types';\n\nexport class CustomContentManager {\n  static async prepareContentForRender(\n    context: any,\n    registeredContent: RegisteredContent<any>[]\n  ): Promise<CustomContent[]> {\n    let enabledContent = getEnabledContent(context, registeredContent);\n\n    let customContent: CustomContent[] = [];\n\n    for (let content of enabledContent) {\n      let c: CustomContent = {\n        content: await mapRenderableContent(context, content),\n        position: content.injectParams?.position,\n        selector: content.injectParams?.selector,\n        activateDefaultSheetListeners: content.activateDefaultSheetListeners,\n        onContentReady: content.onContentReady,\n        onRender: content.onRender,\n      };\n      customContent.push(c);\n    }\n\n    return customContent;\n  }\n\n  static mapToRegisteredContent(\n    content: SupportedContent,\n    layout?: SheetLayout | SheetLayout[]\n  ) {\n    let mappedContent: HtmlRuntimeContent | HandlebarsTemplateRenderer =\n      content instanceof HandlebarsContent\n        ? new HandlebarsTemplateRenderer({\n            path: content.path,\n          })\n        : ({\n            html: content.html,\n            renderScheme: content.renderScheme,\n            type: 'html',\n          } satisfies HtmlRuntimeContent);\n\n    return {\n      content: mappedContent,\n      activateDefaultSheetListeners: content.activateDefaultSheetListeners,\n      enabled: content.enabled,\n      injectParams: content.injectParams,\n      layout: layout ?? 'all',\n      renderScheme: content.renderScheme,\n      getData:\n        content instanceof HandlebarsContent ? content.getData : undefined,\n      onContentReady: content.onContentReady,\n      onRender: content.onRender,\n    } satisfies RegisteredContent<any>;\n  }\n}\n\nfunction getEnabledContent<TContext>(\n  context: TContext,\n  registeredContent: RegisteredContent<any>[]\n) {\n  return [...registeredContent].filter((c) => {\n    try {\n      return c.enabled?.(context) ?? true;\n    } catch (e) {\n      error(\n        'Unable to check custom content to determine if it is enabled because of an error',\n        false,\n        e\n      );\n      return false;\n    }\n  });\n}\n\nasync function mapRenderableContent(\n  data: any,\n  registeredContent: RegisteredContent<any>\n) {\n  if (\n    'type' in registeredContent.content &&\n    registeredContent.content.type === 'html'\n  ) {\n    return registeredContent.content;\n  }\n\n  if (registeredContent.content instanceof HandlebarsTemplateRenderer) {\n    const handlebarsData =\n      typeof registeredContent.getData === 'function'\n        ? await registeredContent.getData(data)\n        : data;\n\n    return {\n      html: await registeredContent.content.render(handlebarsData),\n      renderScheme: registeredContent.renderScheme ?? 'handlebars',\n      type: 'html',\n    } satisfies HtmlRuntimeContent;\n  }\n\n  error(\n    'Unble to get custom content. The provided custom content information is unable to be rendered.',\n    false,\n    registeredContent\n  );\n\n  return {\n    html: '',\n    renderScheme: 'force',\n    type: 'html',\n  } satisfies HtmlRuntimeContent;\n}\n","import type {\n  CharacterSheetContext,\n  CustomContent,\n  Tab,\n} from 'src/types/types';\nimport CharacterAttributesTab from 'src/sheets/character/tabs/CharacterAttributesTab.svelte';\nimport ActorInventoryTab from 'src/sheets/actor/tabs/ActorInventoryTab.svelte';\nimport CharacterSpellbookTab from 'src/sheets/character/tabs/CharacterSpellbookTab.svelte';\nimport CharacterFeaturesTab from 'src/sheets/character/tabs/CharacterFeaturesTab.svelte';\nimport CharacterEffectsTab from 'src/sheets/character/tabs/CharacterEffectsTab.svelte';\nimport CharacterBiographyTab from 'src/sheets/character/tabs/CharacterBiographyTab.svelte';\nimport ActorJournalTab from 'src/sheets/actor/tabs/ActorJournalTab.svelte';\nimport ActorActionsTab from 'src/sheets/actor/tabs/ActorActionsTab.svelte';\nimport type { RegisteredContent, RegisteredTab } from './types';\nimport { CONSTANTS } from 'src/constants';\nimport { debug, error, warn } from 'src/utils/logging';\nimport { TabManager } from './tab/TabManager';\nimport type { ActorTabRegistrationOptions } from 'src/api/api.types';\nimport { CustomContentManager } from './content/CustomContentManager';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\nexport class CharacterSheetRuntime {\n  private static _content: RegisteredContent<CharacterSheetContext>[] = [];\n  private static _tabs: RegisteredTab<CharacterSheetContext>[] = [\n    {\n      title: 'TIDY5E.Actions.TabName',\n      content: {\n        component: ActorActionsTab,\n        type: 'svelte',\n      },\n      id: CONSTANTS.TAB_ACTOR_ACTIONS,\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n      title: 'DND5E.Attributes',\n      content: {\n        component: CharacterAttributesTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_CHARACTER_INVENTORY,\n      title: 'DND5E.Inventory',\n      content: {\n        component: ActorInventoryTab,\n        type: 'svelte',\n        getProps() {\n          return {\n            tabId: CONSTANTS.TAB_CHARACTER_INVENTORY,\n          };\n        },\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n      title: 'DND5E.Spellbook',\n      content: {\n        component: CharacterSpellbookTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_CHARACTER_FEATURES,\n      title: 'DND5E.Features',\n      content: {\n        component: CharacterFeaturesTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_CHARACTER_EFFECTS,\n      title: 'DND5E.Effects',\n      content: {\n        component: CharacterEffectsTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_CHARACTER_BIOGRAPHY,\n      title: 'DND5E.Biography',\n      content: {\n        component: CharacterBiographyTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_CHARACTER_JOURNAL,\n      title: 'TIDY5E.JournalTabName',\n      content: {\n        component: ActorJournalTab,\n        type: 'svelte',\n      },\n      enabled: (context) => context.owner,\n      layout: 'classic',\n    },\n  ];\n\n  static async getContent(\n    context: CharacterSheetContext\n  ): Promise<CustomContent[]> {\n    return await CustomContentManager.prepareContentForRender(\n      context,\n      CharacterSheetRuntime._content\n    );\n  }\n\n  static async getTabs(context: CharacterSheetContext): Promise<Tab[]> {\n    return await TabManager.prepareTabsForRender(\n      context,\n      CharacterSheetRuntime._tabs\n    );\n  }\n\n  static getAllRegisteredTabs(): RegisteredTab<CharacterSheetContext>[] {\n    return [...CharacterSheetRuntime._tabs];\n  }\n\n  static registerContent(\n    registeredContent: RegisteredContent<CharacterSheetContext>\n  ) {\n    this._content.push(registeredContent);\n  }\n\n  static registerTab(\n    tab: RegisteredTab<CharacterSheetContext>,\n    options?: ActorTabRegistrationOptions\n  ) {\n    const tabExists = CharacterSheetRuntime._tabs.some((t) => t.id === tab.id);\n\n    if (tabExists && !options?.overrideExisting) {\n      warn(`Tab with id ${tab.id} already exists.`);\n      return;\n    }\n\n    if (tabExists && options?.overrideExisting) {\n      const index = CharacterSheetRuntime._tabs.findIndex(\n        (t) => t.id === tab.id\n      );\n      if (index >= 0) {\n        CharacterSheetRuntime._tabs.splice(index, 1);\n      }\n    }\n\n    CharacterSheetRuntime._tabs.push(tab);\n  }\n\n  static getTabTitle(tabId: string) {\n    try {\n      let tabTitle = this._tabs.find((t) => t.id === tabId)?.title;\n      if (typeof tabTitle === 'function') {\n        tabTitle = tabTitle();\n      }\n      return tabTitle ? FoundryAdapter.localize(tabTitle) : tabId;\n    } catch (e) {\n      error('An error occurred while searching for a tab title.', false, e);\n      debug('Tab title error troubleshooting information', { tabId });\n    }\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ContainerSheetContext,\n    ItemSheetContext,\n  } from 'src/types/item.types';\n  import type {\n    CharacterSheetContext,\n    NpcSheetContext,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { buildDataset } from 'src/utils/data';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  // TODO: File this away somewhere.\n  type SvelteInputEvent = (\n    event: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    },\n  ) => any;\n\n  export let value: number | null = null;\n  export let checked: boolean = false;\n  export let field: string;\n  export let document: any;\n  export let title: string | null = null;\n  export let tooltip: string | null = null;\n  export let id: string | null = null;\n  export let disabled: boolean | null = null;\n  export let dataset: Record<string, unknown> | null = null;\n  export let labelCssClass: string | null = null;\n  export let checkboxCssClass: string | null = null;\n  export let onDataPreparing: SvelteInputEvent | null = null;\n  // TODO: Get rid of the these horrendous green checkboxes and remove all the code that barely props them up.\n  export let greenCheckboxWidthOverride: string | null = null;\n  $: greenCheckboxStyle =\n    greenCheckboxWidthOverride !== null\n      ? `width: ${greenCheckboxWidthOverride}`\n      : '';\n\n  $: draftValue = value;\n  $: datasetAttributes = buildDataset(dataset);\n\n  async function saveChange(\n    event: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    },\n  ) {\n    let data: any = onDataPreparing?.(event) ?? {\n      [field]: value ?? event.currentTarget.checked,\n    };\n\n    await document.update(data);\n\n    draftValue = value;\n  }\n\n  const context =\n    getContext<\n      Readable<\n        | CharacterSheetContext\n        | NpcSheetContext\n        | VehicleSheetContext\n        | ContainerSheetContext\n        | ItemSheetContext\n      >\n    >('context');\n\n  $: activeEffectApplied = ActiveEffectsHelper.isActiveEffectAppliedToField(\n    document,\n    field,\n  );\n\n  $: isEnchanted =\n    $context.itemOverrides instanceof Set && $context.itemOverrides.has(field);\n\n  $: overrideTooltip = isEnchanted\n    ? localize('DND5E.Enchantment.Warning.Override')\n    : localize('DND5E.ActiveEffectOverrideWarning');\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<!-- TODO: Make label wrapper conditional when Svelte 5 snippets come out -->\n{#if $$slots.default}\n  <label\n    class={labelCssClass}\n    {title}\n    style={greenCheckboxStyle}\n    data-tooltip={activeEffectApplied ? overrideTooltip : tooltip}\n  >\n    <input\n      type=\"checkbox\"\n      {id}\n      bind:value={draftValue}\n      {checked}\n      on:change={saveChange}\n      disabled={disabled || activeEffectApplied}\n      {...datasetAttributes}\n      class={checkboxCssClass}\n      data-tidy-field={field}\n    />\n    <slot />\n  </label>\n{:else}\n  <input\n    type=\"checkbox\"\n    {id}\n    bind:value={draftValue}\n    {checked}\n    on:change={saveChange}\n    {title}\n    disabled={disabled || activeEffectApplied}\n    data-tooltip={activeEffectApplied ? overrideTooltip : tooltip}\n    {...datasetAttributes}\n    class={checkboxCssClass}\n    data-tidy-field={field}\n  />\n{/if}\n\n<style lang=\"scss\">\n  label {\n    --tidy-checkbox-width-internal: var(--tidy-checkbox-width, unset);\n    width: var(--tidy-checkbox-width-internal);\n  }\n</style>\n","<script lang=\"ts\">\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"counters\">\n  <div class=\"counter legendary\">\n    <h4>{localize('DND5E.LegAct')}</h4>\n    <div class=\"counter-value\">\n      <NumberInput\n        document={$context.actor}\n        field=\"system.resources.legact.value\"\n        value={$context.system.resources.legact.value}\n        step=\"any\"\n        placeholder=\"0\"\n        title={localize('DND5E.LegActRemaining')}\n        selectOnFocus={true}\n        disabled={!$context.editable}\n      />\n      <span class=\"sep\">/</span>\n      <NumberInput\n        document={$context.actor}\n        field=\"system.resources.legact.max\"\n        value={$context.system.resources.legact.max}\n        min={0}\n        step=\"1\"\n        placeholder=\"0\"\n        selectOnFocus={true}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n      />\n    </div>\n  </div>\n  <div class=\"counter legendary\">\n    <h4>{localize('DND5E.LegRes')}</h4>\n    <div class=\"counter-value\">\n      <NumberInput\n        document={$context.actor}\n        field=\"system.resources.legres.value\"\n        value={$context.system.resources.legres.value}\n        step=\"any\"\n        placeholder=\"0\"\n        title={localize('DND5E.LegResRemaining')}\n        selectOnFocus={true}\n      />\n      <span class=\"sep\">/</span>\n      <NumberInput\n        document={$context.actor}\n        field=\"system.resources.legres.max\"\n        value={$context.system.resources.legres.max}\n        min=\"0\"\n        step=\"1\"\n        placeholder=\"0\"\n        selectOnFocus={true}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n      />\n    </div>\n  </div>\n  <div class=\"counter lair\">\n    <h4>{localize('DND5E.LairAct')}</h4>\n    <div class=\"counter-value\">\n      <Checkbox\n        document={$context.actor}\n        field=\"system.resources.lair.value\"\n        checked={$context.system.resources.lair.value}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n      />\n      <TextInput\n        document={$context.actor}\n        field=\"system.resources.lair.initiative\"\n        value={$context.system.resources.lair.initiative}\n        placeholder=\"Init.\"\n        allowDeltaChanges={true}\n        selectOnFocus={true}\n        saveEmptyAsNull={true}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n      />\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .counters {\n    display: flex;\n    flex: none;\n    padding: 0;\n    border-bottom: none;\n    border: 0.0625rem solid var(--t5e-faint-color);\n    border-radius: 0.3125rem;\n\n    .counter {\n      height: auto;\n      line-height: 1rem;\n      flex: 1;\n      text-align: center;\n\n      .counter-value {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding-bottom: 0.125rem;\n        margin-top: 0.1875rem;\n        font-size: 1.5625rem;\n      }\n\n      :global(input) {\n        min-width: 1.875rem;\n        max-width: 3.125rem;\n      }\n\n      :global(input[type='text']:first-of-type) {\n        text-align: right;\n      }\n\n      :global(input[type='text']:last-of-type) {\n        text-align: left;\n      }\n\n      :global(input[type='text']),\n      :global(input[type='number']) {\n        height: 1.5625rem;\n        max-width: 1.25rem;\n      }\n\n      :global(input[type='checkbox']) {\n        width: 0.875rem;\n        height: 1.5625rem;\n        margin: 0;\n      }\n\n      h4 {\n        font-size: 0.75rem;\n        line-height: 0.75rem;\n        padding-top: 0.25rem;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { ItemLayoutMode } from 'src/types/types';\n  import { createEventDispatcher } from 'svelte';\n\n  export let mode: ItemLayoutMode;\n  export let element: HTMLElement['tagName'] = 'li';\n\n  $: toggleButtonPresentation =\n    mode === 'grid'\n      ? {\n          title: localize('TIDY5E.ListLayout'),\n          iconClass: 'fas fa-th-list fa-fw toggle-list',\n        }\n      : mode === 'list'\n        ? {\n            title: localize('TIDY5E.GridLayout'),\n            iconClass: 'fas fa-th-large fa-fw toggle-grid',\n          }\n        : null;\n\n  const localize = FoundryAdapter.localize;\n  const dispatcher = createEventDispatcher<{ toggle: void }>();\n</script>\n\n<svelte:element this={element} class=\"toggle-layout\">\n  {#if mode === 'grid' || mode === 'list'}\n    <button\n      type=\"button\"\n      class=\"icon-button\"\n      title={toggleButtonPresentation?.title}\n      on:click={() => dispatcher('toggle')}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class={toggleButtonPresentation?.iconClass} />\n    </button>\n  {:else}\n    <span title={localize('TIDY5E.LayoutNotSupported')}>😞</span>\n  {/if}\n</svelte:element>\n\n<style lang=\"scss\">\n  .toggle-layout {\n    margin: 0 0.25rem;\n    padding: 0 0.125rem;\n  }\n</style>\n","<script lang=\"ts\" generics=\"TItem extends Record<string, unknown>\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import Listbox from './Listbox.svelte';\n\n  export let items: TItem[];\n  export let selectedItemIndex: number | null = null;\n  export let labelProp: string;\n  export let valueProp: string;\n  export let listboxCssClass: string | null = null;\n\n  function handleListboxKeydown(\n    e: CustomEvent<KeyboardEvent & { currentTarget: HTMLElement }>,\n  ): void {\n    if (e.detail.key === 'ArrowUp' && e.detail.altKey) {\n      moveUp();\n    } else if (e.detail.key === 'ArrowDown' && e.detail.altKey) {\n      moveDown();\n    }\n  }\n\n  function moveUp() {\n    if (\n      selectedItemIndex === null ||\n      selectedItemIndex === 0 ||\n      items === null\n    ) {\n      return;\n    }\n\n    const topValue = items[selectedItemIndex - 1];\n    const bottomValue = items[selectedItemIndex];\n    items[selectedItemIndex - 1] = bottomValue;\n    items[selectedItemIndex] = topValue;\n\n    if (selectedItemIndex) {\n      selectedItemIndex -= 1;\n      items = items;\n    }\n\n    itemsMoved();\n  }\n\n  function moveDown() {\n    if (\n      items === null ||\n      selectedItemIndex === null ||\n      selectedItemIndex >= items.length - 1\n    ) {\n      return;\n    }\n\n    const topValue = items[selectedItemIndex];\n    const bottomValue = items[selectedItemIndex + 1];\n    items[selectedItemIndex] = bottomValue;\n    items[selectedItemIndex + 1] = topValue;\n\n    if (selectedItemIndex !== null) {\n      selectedItemIndex += 1;\n      items = items;\n    }\n\n    itemsMoved();\n  }\n\n  function itemsMoved() {\n    if (\n      selectedItemIndex !== null &&\n      items.at(selectedItemIndex) === undefined\n    ) {\n      selectedItemIndex = items.length ? items.length - 1 : null;\n    }\n  }\n\n  function onDragStart(\n    ev: CustomEvent<{ item: TItem; index: number; event: DragEvent }>,\n  ) {\n    selectedItemIndex = ev.detail.index;\n    ev.detail.event.dataTransfer?.setData(\n      'text/plain',\n      ev.detail.index.toString(),\n    );\n  }\n\n  function onDrop(\n    ev: CustomEvent<{ item: TItem; index: number; event: DragEvent }>,\n  ) {\n    ev.detail.event.stopPropagation();\n    ev.detail.event.preventDefault();\n\n    const draggedIndex = parseInt(\n      ev.detail.event.dataTransfer?.getData('text/plain') ?? '',\n    );\n\n    if (isNaN(draggedIndex)) {\n      return;\n    }\n\n    const theDragged = items.at(draggedIndex);\n\n    if (!theDragged) {\n      return;\n    }\n\n    const dropTargetIndex = ev.detail.index;\n\n    items = items.reduce<TItem[]>((acc, item, index) => {\n      // When dropping onto a higher entry, the dragged should come before the target.\n      if (index === dropTargetIndex && draggedIndex > dropTargetIndex) {\n        acc.push(theDragged);\n      }\n\n      // The dragged item is being excluded from its original place in the list, to be placed elsewhere.\n      if (index === draggedIndex) {\n        return acc;\n      }\n\n      acc.push(item);\n\n      // When dropping onto a lower entry, the dragged should come after the target.\n      if (index === dropTargetIndex && draggedIndex < dropTargetIndex) {\n        acc.push(theDragged);\n      }\n\n      return acc;\n    }, []);\n\n    selectedItemIndex = items.indexOf(theDragged);\n  }\n\n  function onListboxDrop(ev: CustomEvent<{ event: DragEvent }>) {\n    const draggedIndex = parseInt(\n      ev.detail.event.dataTransfer?.getData('text/plain') ?? '',\n    );\n\n    if (isNaN(draggedIndex)) {\n      return;\n    }\n\n    const theDragged = items.splice(draggedIndex, 1);\n\n    items.push(...theDragged);\n    items = items;\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"sorting-listbox flex-row small-gap {$$restProps.class ?? ''}\">\n  <div class=\"controls\">\n    <button\n      title={localize('TIDY5E.Listbox.MoveUp')}\n      type=\"button\"\n      disabled={selectedItemIndex === null || selectedItemIndex === 0}\n      aria-keyshortcuts=\"Alt+ArrowUp\"\n      data-testid=\"sorting-listbox-move-up\"\n      on:click={() => moveUp()}\n    >\n      <i class=\"fas fa-angle-up\"></i>\n    </button>\n    <button\n      title={localize('TIDY5E.Listbox.MoveDown')}\n      type=\"button\"\n      disabled={selectedItemIndex === null ||\n        items === null ||\n        selectedItemIndex >= items.length - 1}\n      aria-keyshortcuts=\"Alt+ArrowDown\"\n      on:click={() => moveDown()}\n      data-testid=\"sorting-listbox-move-down\"\n    >\n      <i class=\"fas fa-angle-down\"></i>\n    </button>\n  </div>\n  <Listbox\n    bind:items\n    {labelProp}\n    {valueProp}\n    bind:selectedItemIndex\n    on:keydown={handleListboxKeydown}\n    class=\"flex-1 {listboxCssClass ?? ''}\"\n    draggable={true}\n    on:dragstart={(ev) => onDragStart(ev)}\n    on:drop={(ev) => onDrop(ev)}\n    on:listboxDrop={(ev) => onListboxDrop(ev)}\n  >\n    <svelte:fragment let:item>\n      <slot {item}>\n        {item[labelProp]}\n      </slot>\n    </svelte:fragment>\n  </Listbox>\n</div>\n\n<style lang=\"scss\">\n  .sorting-listbox {\n    :global([role='option']) {\n      transition: padding-top 0.125s ease;\n    }\n\n    :global([role='option'].dragged-over) {\n      padding-top: 1rem;\n    }\n  }\n\n  .controls {\n    align-self: center;\n\n    button + button {\n      margin-top: 0.25rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import SortingListbox from 'src/components/listbox/SortingListbox.svelte';\n  import type { DocumentTabSectionConfigItem } from './section-config.types';\n\n  export let sections: DocumentTabSectionConfigItem[];\n  export let onSaveChanges: (\n    sections: DocumentTabSectionConfigItem[],\n  ) => void | Promise<void>;\n  export let onApply: (\n    sections: DocumentTabSectionConfigItem[],\n  ) => void | Promise<void>;\n  export let useDefault: () => void | Promise<void>;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section class=\"flex-column\">\n  <SortingListbox\n    bind:items={sections}\n    labelProp=\"label\"\n    valueProp=\"key\"\n    listboxCssClass=\"scroll-container\"\n    class=\"flex-1\"\n  >\n    <svelte:fragment let:item>\n      <span\n        data-section-key={item['key']}\n        data-testid=\"section-config-item-label\"\n        class=\"flex-1\"\n        class:marked-as-hidden={item.show === false}>{item.label}</span\n      >\n      {#if item.show !== false}\n        <button\n          type=\"button\"\n          class=\"inline-icon-button\"\n          title={localize('TIDY5E.Section.ConfigDialog.hideTooltip')}\n          data-testid=\"section-config-hide\"\n          on:click={() => {\n            item.show = false;\n            sections = sections;\n          }}\n        >\n          <i class=\"far fa-eye fa-fw\"></i>\n        </button>\n      {:else}\n        <button\n          type=\"button\"\n          class=\"inline-icon-button\"\n          title={localize('TIDY5E.Section.ConfigDialog.showTooltip')}\n          data-testid=\"section-config-show\"\n          on:click={() => {\n            item.show = true;\n            sections = sections;\n          }}\n        >\n          <i class=\"far fa-eye-slash fa-fw\"></i>\n        </button>\n      {/if}\n    </svelte:fragment>\n  </SortingListbox>\n\n  <div class=\"flex-row small-gap\">\n    <button\n      type=\"button\"\n      class=\"use-default-btn\"\n      data-testid=\"section-config-use-default\"\n      on:click={(ev) => useDefault()}\n    >\n      <i class=\"fas fa-rotate-right\" />\n      {localize('TIDY5E.UseDefault')}\n    </button>\n    <button\n      type=\"button\"\n      data-testid=\"section-config-save-changes\"\n      on:click={(ev) => onSaveChanges(sections)}\n      class=\"save-changes-btn\"\n    >\n      <i class=\"fas fa-save\" />\n      {localize('TIDY5E.SaveChanges')}\n    </button>\n    <button\n      type=\"button\"\n      class=\"apply-changes-btn\"\n      data-testid=\"section-config-apply-changes\"\n      on:click={() => onApply(sections)}\n    >\n      <i class=\"fas fa-check\" />\n      {localize('TIDY5E.ApplyChanges')}\n    </button>\n  </div>\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    :global(> :not(button)) {\n      overflow: hidden;\n    }\n  }\n\n  .marked-as-hidden {\n    font-style: italic;\n    color: var(--t5e-tertiary-color);\n  }\n</style>\n","import type { SvelteComponent } from 'svelte';\nimport SvelteFormApplicationBase from '../SvelteFormApplicationBase';\nimport DocumentTabSectionConfig from './DocumentTabSectionConfig.svelte';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type { Actor5e, TidySectionBase } from 'src/types/types';\nimport type { DocumentTabSectionConfigItem } from './section-config.types';\nimport type { Item5e } from 'src/types/item.types';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { SectionConfig } from 'src/features/sections/sections.types';\n\ntype SectionConfigConstructorArgs = {\n  document: Actor5e | Item5e;\n  sections: TidySectionBase[];\n  tabId: string;\n  tabTitle: string;\n};\n\nexport class DocumentTabSectionConfigApplication extends SvelteFormApplicationBase {\n  document: Actor5e | Item5e;\n  sections: DocumentTabSectionConfigItem[];\n  tabId: string;\n  tabTitle: string;\n\n  constructor({\n    document,\n    sections,\n    tabId,\n    tabTitle,\n  }: SectionConfigConstructorArgs) {\n    super();\n    this.document = document;\n    this.sections = sections.map((section) => ({\n      key: section.key,\n      label: section.label,\n      show: section.show !== false,\n    }));\n    this.tabId = tabId;\n    this.tabTitle = tabTitle;\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      width: 650,\n      height: 500,\n      id: 'tidy-5e-sheets-section-configuration',\n      popOut: true,\n    });\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.Section.ConfigDialog.title', {\n      tabTitle: this.tabTitle,\n    });\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    return new DocumentTabSectionConfig({\n      target: node,\n      props: {\n        sections: this.sections.map((curr: DocumentTabSectionConfigItem) => {\n          return {\n            key: curr.key,\n            label: FoundryAdapter.localize(curr.label),\n            show: curr.show,\n          };\n        }, {}),\n        onSaveChanges: this._onSaveChanges.bind(this),\n        onApply: this._onApply.bind(this),\n        useDefault: this._useDefault.bind(this),\n      },\n    });\n  }\n\n  private async _onSaveChanges(sections: DocumentTabSectionConfigItem[]) {\n    await this._onApply(sections);\n    this.close();\n  }\n\n  private async _onApply(sections: DocumentTabSectionConfigItem[]) {\n    const sectionConfig = TidyFlags.sectionConfig.get(this.document) ?? {};\n    sectionConfig[this.tabId] = sections.reduce<Record<string, SectionConfig>>(\n      (result, curr, i) => {\n        result[curr.key] = {\n          key: curr.key,\n          order: i,\n          show: curr.show !== false,\n        };\n        return result;\n      },\n      {}\n    );\n    await TidyFlags.sectionConfig.set(this.document, sectionConfig);\n  }\n\n  private _useDefault() {\n    Dialog.confirm({\n      title: FoundryAdapter.localize('TIDY5E.UseDefaultDialog.title'),\n      content: `<p>${FoundryAdapter.localize(\n        'TIDY5E.UseDefaultDialog.text'\n      )}</p>`,\n      yes: () => {\n        const sectionConfig = TidyFlags.sectionConfig.get(this.document) ?? {};\n        delete sectionConfig[this.tabId];\n        sectionConfig[`-=${this.tabId}`] = {};\n        TidyFlags.sectionConfig.set(this.document, sectionConfig);\n        this.close();\n      },\n      no: () => {},\n      defaultYes: false,\n    });\n  }\n}\n","<script lang=\"ts\">\n  import SkillsList from 'src/sheets/actor/SkillsList.svelte';\n  import Traits from '../../actor/traits/Traits.svelte';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import type {\n    ItemLayoutMode,\n    NpcSheetContext,\n    RenderableClassicControl,\n  } from 'src/types/types';\n  import Currency from '../../actor/Currency.svelte';\n  import ItemTableHeaderRow from 'src/components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTable from 'src/components/item-list/v1/ItemTable.svelte';\n  import ItemTableColumn from 'src/components/item-list/v1/ItemTableColumn.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemTableRow from 'src/components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableCell from 'src/components/item-list/v1/ItemTableCell.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemUseButton from 'src/components/item-list/ItemUseButton.svelte';\n  import ItemName from 'src/components/item-list/ItemName.svelte';\n  import ItemAddUses from 'src/components/item-list/ItemAddUses.svelte';\n  import ItemDeleteControl from 'src/components/item-list/controls/ItemDeleteControl.svelte';\n  import ItemEditControl from 'src/components/item-list/controls/ItemEditControl.svelte';\n  import ItemUses from 'src/components/item-list/ItemUses.svelte';\n  import ItemTableFooter from 'src/components/item-list/ItemTableFooter.svelte';\n  import NpcLegendaryActions from '../parts/NpcLegendaryActions.svelte';\n  import SpellbookList from 'src/components/spellbook/SpellbookList.svelte';\n  import NoSpells from '../../actor/NoSpells.svelte';\n  import SpellbookFooter from 'src/components/spellbook/SpellbookFooter.svelte';\n  import ItemFilterLayoutToggle from 'src/components/item-list/ItemFilterLayoutToggle.svelte';\n  import SpellbookGrid from 'src/components/spellbook/SpellbookGrid.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import EncumbranceBar from '../../actor/EncumbranceBar.svelte';\n  import TabFooter from '../../actor/TabFooter.svelte';\n  import AmmoSelector from '../../actor/AmmoSelector.svelte';\n  import RechargeControl from 'src/components/item-list/controls/RechargeControl.svelte';\n  import ActionFilterOverrideControl from 'src/components/item-list/controls/ActionFilterOverrideControl.svelte';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import ExpandableContainer from 'src/components/expandable/ExpandableContainer.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import type { Item5e } from 'src/types/item.types';\n  import LevelUpDropdown from 'src/sheets/actor/LevelUpDropdown.svelte';\n  import { DocumentTabSectionConfigApplication } from 'src/applications/section-config/DocumentTabSectionConfigApplication';\n  import ItemControl from 'src/components/item-list/controls/ItemControl.svelte';\n  import { NpcSheetRuntime } from 'src/runtime/NpcSheetRuntime';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import InlineContainerToggle from 'src/sheets/container/InlineContainerToggle.svelte';\n  import type { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n  import InlineContainerView from 'src/sheets/container/InlineContainerView.svelte';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  let inlineContainerToggleService = getContext<InlineContainerToggleService>(\n    CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n  );\n\n  $: noSpellLevels = !$context.spellbook.length;\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n\n  $: features = SheetSections.configureFeatures(\n    $context.features,\n    $context,\n    tabId,\n    SheetPreferencesService.getByType($context.actor.type),\n    TidyFlags.sectionConfig.get($context.actor)?.[tabId],\n  );\n\n  let searchCriteria: string = '';\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: spellbook = !$settingStore.showSpellbookTabNpc\n    ? SheetSections.configureSpellbook(\n        $context.actor,\n        tabId,\n        $context.spellbook,\n      )\n    : [];\n\n  $: {\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: [...features, ...spellbook],\n      tabId: tabId,\n    });\n  }\n\n  function toggleLayout() {\n    if (layoutMode === 'grid') {\n      TidyFlags.spellbookGrid.unset($context.actor);\n      return;\n    }\n\n    TidyFlags.spellbookGrid.set($context.actor);\n  }\n\n  let layoutMode: ItemLayoutMode;\n  $: layoutMode = TidyFlags.spellbookGrid.get($context.actor) ? 'grid' : 'list';\n\n  let showNoSpellsView = false;\n  const localize = FoundryAdapter.localize;\n\n  declareLocation('abilities');\n\n  let controls: RenderableClassicControl<{ item: Item5e }>[] = [];\n  $: {\n    controls = [\n      {\n        component: ItemEditControl,\n        props: ({ item }) => ({ item }),\n      },\n    ];\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemDeleteControl,\n        props: ({ item }) => ({ item }),\n      });\n    }\n\n    if ($context.useActionsFeature) {\n      controls.push({\n        component: ActionFilterOverrideControl,\n        props: ({ item }) => ({ item }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n</script>\n\n<UtilityToolbar class=\"abilities-toolbar\">\n  <Search bind:value={searchCriteria} />\n  <PinnedFilterToggles\n    filterGroupName={tabId}\n    filters={ItemFilterRuntime.getPinnedFiltersForTab(\n      $context.filterPins,\n      $context.filterData,\n      tabId,\n    )}\n  />\n  <FilterMenu {tabId} />\n  {#each utilityBarCommands as command (command.title)}\n    <UtilityToolbarCommand\n      title={command.title}\n      iconClass={command.iconClass}\n      text={command.text}\n      visible={command.visible ?? true}\n      on:execute={(ev) => command.execute?.(ev.detail)}\n    />\n  {/each}\n</UtilityToolbar>\n\n<section class=\"npc-abilities-content\" data-tidy-track-scroll-y>\n  <div class=\"side-panel\">\n    <SkillsList\n      actor={$context.actor}\n      toggleable={!$settingStore.alwaysShowNpcSkills}\n      expanded={!!TidyFlags.skillsExpanded.get($context.actor)}\n      toggleField={TidyFlags.skillsExpanded.prop}\n    />\n    {#if !$settingStore.moveTraitsBelowNpcResources}\n      <Traits toggleable={!$settingStore.alwaysShowNpcTraits} />\n    {/if}\n  </div>\n  <div\n    class=\"main-panel\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NPC_ABILITIES_CONTAINER}\n  >\n    <ExpandableContainer\n      expanded={$context.showLegendaryToolbar}\n      class=\"legendary-wrapper {$context.showLegendaryToolbar\n        ? 'legendary-expanded'\n        : ''}\"\n    >\n      <NpcLegendaryActions />\n    </ExpandableContainer>\n    {#if $settingStore.moveTraitsBelowNpcResources}\n      <Traits toggleable={!$settingStore.alwaysShowNpcTraits} />\n    {/if}\n    {#each features as section (section.key)}\n      {#if section.show}\n        {@const visibleItemCount = ItemVisibility.countVisibleItems(\n          section.items,\n          $itemIdsToShow,\n        )}\n        {#if $context.unlocked || visibleItemCount > 0}\n          <ItemTable\n            key={section.key}\n            data-custom-section={section.custom ? true : null}\n          >\n            <svelte:fragment slot=\"header\">\n              <ItemTableHeaderRow>\n                <ItemTableColumn primary={true}>\n                  {localize(section.label)}\n                </ItemTableColumn>\n                {#if section.hasActions}\n                  <ItemTableColumn baseWidth=\"3.125rem\">\n                    {localize('DND5E.Uses')}\n                  </ItemTableColumn>\n                  <ItemTableColumn baseWidth=\"7.5rem\">\n                    {localize('DND5E.Usage')}\n                  </ItemTableColumn>\n                {/if}\n                {#if section.dataset.type === 'loot'}\n                  <ItemTableColumn baseWidth=\"3rem\">\n                    {localize('DND5E.QuantityAbbr')}\n                  </ItemTableColumn>\n                {/if}\n                {#if $context.editable && $context.useClassicControls}\n                  <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n                {/if}\n              </ItemTableHeaderRow>\n            </svelte:fragment>\n            <svelte:fragment slot=\"body\">\n              {#each section.items as item}\n                {@const ctx = $context.itemContext[item.id]}\n                <ItemTableRow\n                  let:toggleSummary\n                  on:mousedown={(event) =>\n                    FoundryAdapter.editOnMiddleClick(event.detail, item)}\n                  contextMenu={{\n                    type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n                    uuid: item.uuid,\n                  }}\n                  {item}\n                  cssClass={FoundryAdapter.getInventoryRowClasses(item, ctx)}\n                  hidden={!!$itemIdsToShow && !$itemIdsToShow.has(item.id)}\n                >\n                  <ItemTableCell primary={true}>\n                    <ItemUseButton disabled={!$context.editable} {item} />\n                    {#if 'containerContents' in ctx && !!ctx.containerContents}\n                      <InlineContainerToggle\n                        {item}\n                        {inlineContainerToggleService}\n                      />\n                    {/if}\n                    <ItemName\n                      on:toggle={() => toggleSummary($context.actor)}\n                      cssClass=\"extra-small-gap\"\n                      {item}\n                    >\n                      {#if ctx.parent}&rdsh;{/if}\n                      {#if !section.isClass && item.type === 'subclass'}\n                        <i class=\"fa-solid fa-link-slash align-self-center\"></i>\n                      {/if}\n                      <span\n                        class=\"truncate\"\n                        data-tidy-item-name={item.name}\n                        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                        >{item.name}</span\n                      >\n                      {#if item.system?.properties?.has('amm')}\n                        <span class=\"ammo\">\n                          <AmmoSelector {item} />\n                        </span>\n                      {/if}\n                    </ItemName>\n                    {#if item.type === 'class'}\n                      <LevelUpDropdown\n                        availableLevels={ctx?.availableLevels}\n                        {item}\n                        disabled={!$context.editable ||\n                          $context.lockLevelSelector}\n                      />\n                    {/if}\n                  </ItemTableCell>\n                  {#if section.hasActions}\n                    <ItemTableCell baseWidth=\"3.125rem\">\n                      {#if item.isOnCooldown}\n                        <RechargeControl {item} />\n                      {:else if item.system.recharge?.value}\n                        <i\n                          class=\"fas fa-bolt\"\n                          title={localize('DND5E.Charged')}\n                        />\n                      {:else if ctx?.hasUses}\n                        <ItemUses {item} />\n                      {:else}\n                        <ItemAddUses {item} />\n                      {/if}\n                    </ItemTableCell>\n                    <ItemTableCell baseWidth=\"7.5rem\">\n                      {#if item.system.activation?.type}\n                        {item.labels?.activation ?? ''}\n                      {/if}\n                    </ItemTableCell>\n                  {/if}\n                  {#if section.dataset.type === 'loot'}\n                    <ItemTableCell baseWidth=\"3rem\">\n                      <TextInput\n                        document={item}\n                        field=\"system.quantity\"\n                        value={item.system.quantity}\n                        selectOnFocus={true}\n                        disabled={!$context.editable ||\n                          $context.lockItemQuantity}\n                        placeholder=\"0\"\n                        allowDeltaChanges={true}\n                        cssClass=\"text-align-center\"\n                      />\n                    </ItemTableCell>\n                  {/if}\n                  {#if $context.editable && $context.useClassicControls}\n                    <ItemTableCell baseWidth={classicControlsColumnWidth}>\n                      <ClassicControls {controls} params={{ item }} />\n                    </ItemTableCell>\n                  {/if}\n                </ItemTableRow>\n                {#if 'containerContents' in ctx && !!ctx.containerContents}\n                  <InlineContainerView\n                    container={item}\n                    containerContents={ctx.containerContents}\n                    editable={$context.editable}\n                    {inlineContainerToggleService}\n                    lockItemQuantity={$context.lockItemQuantity}\n                    sheetDocument={$context.actor}\n                  />\n                {/if}\n              {/each}\n              {#if $context.unlocked && section.dataset}\n                <ItemTableFooter\n                  actor={$context.actor}\n                  {section}\n                  isItem={true}\n                />\n              {/if}\n            </svelte:fragment>\n          </ItemTable>\n        {/if}\n      {/if}\n    {/each}\n    {#if !$settingStore.showSpellbookTabNpc}\n      {#if noSpellLevels}\n        <h2>\n          <button\n            type=\"button\"\n            class=\"transparent-button spellbook-title toggle-spellbook\"\n            on:click={() => (showNoSpellsView = !showNoSpellsView)}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          >\n            {localize('DND5E.Spellbook')}\n            {#if showNoSpellsView}\n              <i class=\"fas fa-caret-up\" />\n            {:else}\n              <i class=\"fas fa-caret-down\" />\n            {/if}\n          </button>\n        </h2>\n      {:else}\n        <h2 class=\"spellbook-title\">\n          <span>{localize('DND5E.Spellbook')}</span>\n          <span class=\"flex-row extra-small-gap\">\n            <ItemFilterLayoutToggle\n              mode={layoutMode}\n              element=\"span\"\n              on:toggle={() => toggleLayout()}\n            />\n            <ItemControl\n              iconCssClass=\"fas fa-cog\"\n              title=\"TIDY5E.Utilities.ConfigureSections\"\n              onclick={() =>\n                new DocumentTabSectionConfigApplication({\n                  document: $context.actor,\n                  sections: $context.spellbook,\n                  tabId: CONSTANTS.TAB_NPC_SPELLBOOK,\n                  tabTitle: NpcSheetRuntime.getTabTitle(\n                    CONSTANTS.TAB_NPC_SPELLBOOK,\n                  ),\n                }).render(true)}\n            />\n          </span>\n        </h2>\n      {/if}\n\n      <div\n        class=\"flex-1 flex-column small-padding-bottom no-gap\"\n        class:hidden={noSpellLevels && !showNoSpellsView}\n      >\n        {#if noSpellLevels}\n          <NoSpells cssClass=\"flex-1\" editable={$context.unlocked} />\n        {:else}\n          <div class=\"flex-1 small-padding-bottom flex-column small-gap\">\n            {#each spellbook as section (section.key)}\n              {#if section.show}\n                {#if layoutMode === 'list'}\n                  <SpellbookList\n                    spells={section.spells}\n                    {section}\n                    allowFavorites={false}\n                    includeRange={false}\n                    includeSchool={false}\n                    spellComponentsBaseWidth=\"3.125rem\"\n                    targetBaseWidth=\"5.625rem\"\n                    usageBaseWidth=\"5.625rem\"\n                  />\n                {:else}\n                  <SpellbookGrid spells={section.spells} {section} />\n                {/if}\n              {/if}\n            {/each}\n          </div>\n        {/if}\n\n        <SpellbookFooter\n          includeAttackMod={false}\n          includePreparedSpells={false}\n          cssClass=\"npc-abilities-spellbook-footer\"\n        />\n      </div>\n    {/if}\n  </div>\n</section>\n<TabFooter mode=\"vertical\" cssClass=\"abilities-footer\">\n  <Currency document={$context.actor} />\n  {#if $settingStore.useNpcEncumbranceBar}\n    <EncumbranceBar />\n  {/if}\n</TabFooter>\n\n<style lang=\"scss\">\n  section {\n    flex: 1;\n  }\n\n  :global(.tidy5e-sheet .abilities-footer) {\n    flex: 0;\n  }\n\n  .npc-abilities-content {\n    display: flex;\n    flex-direction: row;\n    gap: 0.5rem;\n    padding-right: 0.75rem;\n    overflow-y: scroll;\n\n    > .side-panel {\n      flex: 0 0 13.75rem;\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n\n    > .main-panel {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n      padding: 0;\n      height: auto;\n      gap: 0.5rem;\n    }\n\n    .spellbook-title {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0 0.25rem 0.125rem 0;\n      margin-top: 0.5rem;\n      line-height: 1;\n      border: 0.0625rem solid var(--t5e-light-color);\n      border-left: none;\n      border-right: none;\n      font-family: var(--t5e-title-font-family);\n      font-weight: 700;\n      font-size: 1.125rem;\n\n      &.toggle-spellbook {\n        opacity: 0.4;\n        transition: opacity 0.3s ease;\n        cursor: pointer;\n\n        &:hover {\n          opacity: 1;\n        }\n      }\n\n      :global(.toggle-layout) {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        padding-top: 0.125rem;\n        line-height: 0.75;\n        font-size: 0.875rem;\n      }\n    }\n\n    :global(.npc-abilities-spellbook-footer) {\n      margin: 0 0 -0.5rem 0;\n      padding: 0.375rem 0.25rem;\n    }\n    :global(.npc-abilities-spellbook-footer h3) {\n      font-size: 1.125rem;\n    }\n    :global(.npc-abilities-spellbook-footer input) {\n      height: 1.125rem;\n    }\n  }\n\n  .main-panel :global(.legendary-wrapper:not(.legendary-expanded)) {\n    margin-bottom: -0.5rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import SpellbookFooter from 'src/components/spellbook/SpellbookFooter.svelte';\n  import SpellbookGrid from 'src/components/spellbook/SpellbookGrid.svelte';\n  import SpellbookList from 'src/components/spellbook/SpellbookList.svelte';\n  import type { ItemLayoutMode, NpcSheetContext } from 'src/types/types';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import NoSpells from '../../actor/NoSpells.svelte';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { SheetSections } from 'src/features/sections/SheetSections';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n  import { CONSTANTS } from 'src/constants';\n  import ButtonMenu from 'src/components/button-menu/ButtonMenu.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ButtonMenuCommand from 'src/components/button-menu/ButtonMenuCommand.svelte';\n  import SpellSourceClassAssignmentsFormApplication from 'src/applications/spell-source-class-assignments/SpellSourceClassAssignmentsFormApplication';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  let searchCriteria: string = '';\n\n  $: spellbook = SheetSections.configureSpellbook(\n    $context.actor,\n    tabId,\n    $context.spellbook,\n  );\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: {\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: spellbook,\n      tabId: tabId,\n    });\n  }\n\n  let layoutMode: ItemLayoutMode;\n  $: layoutMode = TidyFlags.spellbookGrid.get($context.actor) ? 'grid' : 'list';\n\n  $: noSpellLevels = !$context.spellbook.length;\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<UtilityToolbar>\n  <Search bind:value={searchCriteria} />\n  <PinnedFilterToggles\n    filterGroupName={tabId}\n    filters={ItemFilterRuntime.getPinnedFiltersForTab(\n      $context.filterPins,\n      $context.filterData,\n      tabId,\n    )}\n  />\n  <FilterMenu {tabId} />\n  <ButtonMenu\n    iconClass=\"ra ra-fairy-wand\"\n    buttonClass=\"inline-icon-button\"\n    position=\"bottom\"\n    anchor=\"right\"\n    title={localize('TIDY5E.Utilities.Tools')}\n    menuElement=\"div\"\n  >\n    <ButtonMenuCommand\n      on:click={() => {\n        new SpellSourceClassAssignmentsFormApplication($context.actor).render(\n          true,\n        );\n      }}\n      iconClass=\"fas fa-list-check\"\n      disabled={!$context.editable}\n    >\n      {localize('TIDY5E.Utilities.AssignSpellsToClasses')}\n    </ButtonMenuCommand>\n  </ButtonMenu>\n  {#each utilityBarCommands as command (command.title)}\n    <UtilityToolbarCommand\n      title={command.title}\n      iconClass={command.iconClass}\n      text={command.text}\n      visible={command.visible ?? true}\n      on:execute={(ev) => command.execute?.(ev.detail)}\n    />\n  {/each}\n</UtilityToolbar>\n\n<div class=\"scroll-container flex-column small-gap\">\n  {#if noSpellLevels}\n    <NoSpells editable={$context.unlocked} />\n  {:else}\n    {#each spellbook as section (section.key)}\n      {#if section.show}\n        {@const visibleItemCount = ItemVisibility.countVisibleItems(\n          section.spells,\n          $itemIdsToShow,\n        )}\n        {#if (searchCriteria.trim() === '' && $context.unlocked) || visibleItemCount > 0 || !!section.slots}\n          {#if layoutMode === 'list'}\n            <SpellbookList\n              allowFavorites={false}\n              spells={section.spells}\n              {section}\n            />\n          {:else}\n            <SpellbookGrid spells={section.spells} {section} />\n          {/if}\n        {/if}\n      {/if}\n    {/each}\n  {/if}\n</div>\n<SpellbookFooter />\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import SheetEditor from 'src/components/editor/SheetEditor.svelte';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { CONSTANTS } from 'src/constants';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ContentEditableFormField from 'src/components/inputs/ContentEditableFormField.svelte';\n  import RerenderAfterFormSubmission from 'src/components/utility/RerenderAfterFormSubmission.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: showNpcPersonalityInfo =\n    TidyFlags.showNpcPersonalityInfo.get($context.actor) ?? false;\n\n  function togglePersonalityInfo() {\n    TidyFlags.setFlag(\n      $context.actor,\n      'showNpcPersonalityInfo',\n      !showNpcPersonalityInfo,\n    );\n  }\n\n  type FlagBioField = {\n    prop: string;\n    value: string | undefined | null;\n    text: string;\n  };\n\n  let bioFields: FlagBioField[] = [];\n  $: bioFields = [\n    {\n      prop: TidyFlags.gender.prop,\n      value: TidyFlags.gender.get($context.actor),\n      text: 'DND5E.Gender',\n    },\n    {\n      prop: TidyFlags.age.prop,\n      value: TidyFlags.age.get($context.actor),\n      text: 'DND5E.Age',\n    },\n    {\n      prop: TidyFlags.height.prop,\n      value: TidyFlags.height.get($context.actor),\n      text: 'DND5E.Height',\n    },\n    {\n      prop: TidyFlags.weight.prop,\n      value: TidyFlags.weight.get($context.actor),\n      text: 'DND5E.Weight',\n    },\n    {\n      prop: TidyFlags.eyes.prop,\n      value: TidyFlags.eyes.get($context.actor),\n      text: 'DND5E.Eyes',\n    },\n    {\n      prop: TidyFlags.skin.prop,\n      value: TidyFlags.skin.get($context.actor),\n      text: 'DND5E.Skin',\n    },\n    {\n      prop: TidyFlags.hair.prop,\n      value: TidyFlags.hair.get($context.actor),\n      text: 'DND5E.Hair',\n    },\n    {\n      prop: TidyFlags.faith.prop,\n      value: TidyFlags.faith.get($context.actor),\n      text: 'DND5E.Faith',\n    },\n  ];\n</script>\n\n<div class=\"scroll-container\">\n  <div class=\"notes-container\">\n    <div\n      class=\"top-notes note-entries\"\n      class:limited={$context.showLimitedSheet}\n    >\n      <article>\n        <ul class=\"character-details\">\n          {#each bioFields as bioField (bioField.prop)}\n            <li>\n              <span>{localize(bioField.text)}:</span>\n              <ContentEditableFormField\n                selectOnFocus={true}\n                element=\"span\"\n                editable={$context.editable && !$context.lockSensitiveFields}\n                document={$context.actor}\n                field={bioField.prop}\n                value={bioField.value ?? ''}\n                cssClass=\"detail-input\"\n              />\n            </li>\n          {/each}\n        </ul>\n      </article>\n    </div>\n    <div class=\"flex-row extra-small-gap full-height\">\n      <button\n        type=\"button\"\n        on:click={togglePersonalityInfo}\n        class=\"toggle-personality-info\"\n        title={localize('TIDY5E.TogglePersonalityInfo')}\n        tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      >\n        {#if showNpcPersonalityInfo}\n          <i class=\"fas fa-angle-double-left\" />\n        {:else}\n          <i class=\"fas fa-angle-double-right\" />\n        {/if}\n      </button>\n      <div class=\"main-notes\">\n        {#if showNpcPersonalityInfo}\n          <div\n            class=\"left-notes note-entries\"\n            class:limited={$context.showLimitedSheet}\n          >\n            <RerenderAfterFormSubmission\n              andOnValueChange={TidyFlags.trait.get($context.actor) ?? ''}\n            >\n              <article use:$context.activateEditors>\n                <div class=\"section-titles biopage\">\n                  {localize('DND5E.PersonalityTraits')}\n                </div>\n                <SheetEditor\n                  content={$context.traitEnrichedHtml}\n                  target={TidyFlags.trait.prop}\n                  editable={$context.editable}\n                />\n              </article>\n            </RerenderAfterFormSubmission>\n            <RerenderAfterFormSubmission\n              andOnValueChange={$context.system.details.ideal}\n            >\n              <article use:$context.activateEditors>\n                <div class=\"section-titles biopage\">\n                  {localize('DND5E.Ideals')}\n                </div>\n                <SheetEditor\n                  content={$context.idealEnrichedHtml}\n                  target=\"system.details.ideal\"\n                  editable={$context.editable}\n                />\n              </article>\n            </RerenderAfterFormSubmission>\n            <RerenderAfterFormSubmission\n              andOnValueChange={$context.system.details.bond}\n            >\n              <article use:$context.activateEditors>\n                <div class=\"section-titles biopage\">\n                  {localize('DND5E.Bonds')}\n                </div>\n                <SheetEditor\n                  content={$context.bondEnrichedHtml}\n                  target=\"system.details.bond\"\n                  editable={$context.editable}\n                />\n              </article>\n            </RerenderAfterFormSubmission>\n            <RerenderAfterFormSubmission\n              andOnValueChange={$context.system.details.flaw}\n            >\n              <article use:$context.activateEditors>\n                <div class=\"section-titles biopage\">\n                  {localize('DND5E.Flaws')}\n                </div>\n                <SheetEditor\n                  content={$context.flawEnrichedHtml}\n                  target=\"system.details.flaw\"\n                  editable={$context.editable}\n                />\n              </article>\n            </RerenderAfterFormSubmission>\n          </div>\n        {/if}\n        <div\n          class=\"right-notes note-entries\"\n          class:limited={$context.showLimitedSheet}\n        >\n          <!-- TODO: Offload this kind of thing to itemContext -->\n          <RerenderAfterFormSubmission\n            andOnValueChange={TidyFlags.appearance.get($context.actor) ?? ''}\n          >\n            <article class=\"appearance-notes\" use:$context.activateEditors>\n              <div class=\"section-titles biopage\">\n                {localize('DND5E.Appearance')}\n              </div>\n              <SheetEditor\n                content={$context.appearanceEnrichedHtml}\n                target={TidyFlags.appearance.prop}\n                editable={$context.editable}\n              />\n            </article>\n          </RerenderAfterFormSubmission>\n          <RerenderAfterFormSubmission\n            andOnValueChange={$context.system.details.biography.value}\n          >\n            <article class=\"biography-notes\" use:$context.activateEditors>\n              <div class=\"section-titles\">\n                {localize('DND5E.Background')}/{localize('DND5E.Biography')}\n              </div>\n              <SheetEditor\n                content={$context.biographyEnrichedHtml}\n                target=\"system.details.biography.value\"\n                editable={$context.editable}\n              />\n            </article>\n          </RerenderAfterFormSubmission>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .notes-container {\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  .main-notes {\n    display: flex;\n    flex: 1;\n    gap: 1rem;\n  }\n\n  .left-notes,\n  .right-notes {\n    flex: 1;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n  }\n\n  .left-notes {\n    max-width: 21.875rem;\n  }\n\n  .top-notes {\n    width: 100%;\n    margin-bottom: 1rem;\n\n    .character-details {\n      margin: 0;\n      padding: 0;\n      display: flex;\n      gap: 0.25rem;\n      flex-wrap: wrap;\n    }\n\n    li {\n      display: flex;\n      flex: 0 0 calc(100% / 3 - 0.25rem);\n\n      :global(span) {\n        flex: 1;\n        margin: 0 0.5rem 0 0.25rem;\n      }\n\n      :global(span:first-child) {\n        flex: 0 0 0.0625rem;\n        font-weight: 600;\n        margin: 0;\n      }\n    }\n  }\n\n  .character-details :global(.detail-input) {\n    flex: 1;\n    margin: 0 0.5rem 0 0.25rem;\n  }\n\n  .toggle-personality-info {\n    width: auto;\n    border: none;\n    align-self: flex-start;\n    transition:\n      color 0.3s ease,\n      transform 0.3s ease;\n    padding: 1.25rem 0.25rem;\n    background: var(--t5e-faint-color);\n    border-radius: 0.1875rem;\n    margin-right: 0.25rem;\n    color: var(--t5e-tertiary-color);\n    cursor: pointer;\n\n    &:hover {\n      color: var(--t5e-secondary-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import {\n    type ActorSheetContext,\n    type RenderableClassicControl,\n  } from 'src/types/types';\n  import ItemTable from '../../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from '../../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from '../../../components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableColumn from '../../../components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableFooter from '../../../components/item-list/ItemTableFooter.svelte';\n  import ItemImage from '../../../components/item-list/ItemImage.svelte';\n  import ItemTableCell from '../../../components/item-list/v1/ItemTableCell.svelte';\n  import ItemControl from '../../../components/item-list/controls/ItemControl.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import Notice from 'src/components/notice/Notice.svelte';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import ActorConditions from '../../actor/ActorConditions.svelte';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import ActorEffectToggleControl from 'src/components/item-list/controls/ActorEffectToggleControl.svelte';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: effectSections = Object.values<any>($context.effects);\n\n  $: noEffects =\n    effectSections.some((section: any) => section.effects.length > 0) === false;\n\n  declareLocation('effects');\n\n  let controls: RenderableClassicControl<{ effect: any }>[] = [];\n\n  $: {\n    controls = [];\n    controls.push(\n      {\n        component: ActorEffectToggleControl,\n        props: ({ effect }) => ({\n          effect: effect,\n        }),\n      },\n      {\n        component: ItemControl,\n        props: ({ effect }) => ({\n          onclick: () =>\n            FoundryAdapter.getEffect({\n              document: $context.actor,\n              effectId: effect.id,\n              parentId: effect.parentId,\n            }).sheet.render(true),\n          title: localize('DND5E.EffectEdit'),\n          iconCssClass: 'fas fa-edit',\n        }),\n      },\n    );\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemControl,\n        props: ({ effect }) => ({\n          onclick: () =>\n            FoundryAdapter.getEffect({\n              document: $context.actor,\n              effectId: effect.id,\n              parentId: effect.parentId,\n            }).deleteDialog(),\n          title: localize('DND5E.EffectDelete'),\n          iconCssClass: 'fas fa-trash',\n        }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n</script>\n\n<div class=\"scroll-container flex-column small-gap\">\n  {#if !$context.allowEffectsManagement && $context.unlocked}\n    <Notice>{localize('TIDY5E.GMOnlyEdit')}</Notice>\n  {/if}\n\n  {#if noEffects && !$context.unlocked && $context.allowEffectsManagement}\n    <Notice>{localize('TIDY5E.EmptySection')}</Notice>\n  {:else}\n    {#each effectSections as section}\n      {#if !section.hidden}\n        {#if ($context.unlocked && $context.allowEffectsManagement) || section.effects.length > 0}\n          <ItemTable key={section.label}>\n            <svelte:fragment slot=\"header\">\n              <ItemTableHeaderRow>\n                <ItemTableColumn primary={true}>\n                  {localize(section.label)}\n                </ItemTableColumn>\n                <ItemTableColumn baseWidth=\"12.5rem\">\n                  {localize('DND5E.Source')}\n                </ItemTableColumn>\n                <ItemTableColumn baseWidth=\"7.5rem\">\n                  {localize('DND5E.Duration')}\n                </ItemTableColumn>\n                {#if $context.editable && $context.useClassicControls && $context.allowEffectsManagement}\n                  <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n                {/if}\n              </ItemTableHeaderRow>\n            </svelte:fragment>\n            <svelte:fragment slot=\"body\">\n              {#each section.effects as effectContext}\n                <ItemTableRow\n                  on:mousedown={(event) =>\n                    FoundryAdapter.editOnMiddleClick(\n                      event.detail,\n                      FoundryAdapter.getEffect({\n                        document: $context.actor,\n                        effectId: effectContext.id,\n                        parentId: effectContext.parentId,\n                      }),\n                    )}\n                  contextMenu={{\n                    type: CONSTANTS.CONTEXT_MENU_TYPE_EFFECTS,\n                    uuid: effectContext.uuid,\n                  }}\n                  getDragData={() =>\n                    FoundryAdapter.getEffect({\n                      document: $context.actor,\n                      effectId: effectContext.id,\n                      parentId: effectContext.parentId,\n                    })?.toDragData()}\n                  effect={effectContext}\n                >\n                  <ItemTableCell\n                    primary={true}\n                    attributes={{\n                      'data-tidy-effect-name-container': true,\n                      'data-effect-id': effectContext.id,\n                    }}\n                  >\n                    <ItemImage src={effectContext.img} />\n                    <span\n                      class=\"align-self-center truncate\"\n                      data-tidy-effect-name={effectContext.name}\n                      >{effectContext.name}</span\n                    >\n                  </ItemTableCell>\n                  <ItemTableCell baseWidth=\"12.5rem\"\n                    >{effectContext.source?.name ?? ''}</ItemTableCell\n                  >\n                  <ItemTableCell baseWidth=\"7.5rem\"\n                    >{effectContext.duration?.label ?? ''}</ItemTableCell\n                  >\n                  {#if $context.editable && $context.useClassicControls && $context.allowEffectsManagement}\n                    <ItemTableCell baseWidth={classicControlsColumnWidth}>\n                      <ClassicControls\n                        {controls}\n                        params={{ effect: effectContext }}\n                      />\n                    </ItemTableCell>\n                  {/if}\n                </ItemTableRow>\n              {/each}\n              {#if $context.unlocked && $context.allowEffectsManagement}\n                <ItemTableFooter\n                  actor={$context.actor}\n                  {section}\n                  create={() =>\n                    FoundryAdapter.addEffect(section.type, $context.actor)}\n                  isItem={false}\n                />\n              {/if}\n            </svelte:fragment>\n          </ItemTable>\n        {/if}\n      {/if}\n    {/each}\n  {/if}\n  {#if $context.conditions}\n    <ActorConditions />\n  {/if}\n</div>\n","import type {\n  CharacterSheetContext,\n  CustomContent,\n  NpcSheetContext,\n  Tab,\n} from 'src/types/types';\nimport { CONSTANTS } from 'src/constants';\nimport NpcAbilitiesTab from 'src/sheets/npc/tabs/NpcAbilitiesTab.svelte';\nimport NpcSpellbookTab from 'src/sheets/npc/tabs/NpcSpellbookTab.svelte';\nimport NpcBiographyTab from 'src/sheets/npc/tabs/NpcBiographyTab.svelte';\nimport NpcEffectsTab from 'src/sheets/npc/tabs/NpcEffectsTab.svelte';\nimport ActorJournalTab from 'src/sheets/actor/tabs/ActorJournalTab.svelte';\nimport ActorActionsTab from 'src/sheets/actor/tabs/ActorActionsTab.svelte';\nimport type { RegisteredContent, RegisteredTab } from './types';\nimport { debug, error, warn } from 'src/utils/logging';\nimport { TabManager } from './tab/TabManager';\nimport type { ActorTabRegistrationOptions } from 'src/api/api.types';\nimport { CustomContentManager } from './content/CustomContentManager';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport ActorInventoryTab from 'src/sheets/actor/tabs/ActorInventoryTab.svelte';\n\nexport class NpcSheetRuntime {\n  private static _content: RegisteredContent<NpcSheetContext>[] = [];\n  private static _tabs: RegisteredTab<NpcSheetContext>[] = [\n    {\n      title: 'TIDY5E.Actions.TabName',\n      content: {\n        component: ActorActionsTab,\n        type: 'svelte',\n      },\n      id: CONSTANTS.TAB_ACTOR_ACTIONS,\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_NPC_ABILITIES,\n      title: 'TIDY5E.Abilities',\n      content: {\n        component: NpcAbilitiesTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_NPC_SPELLBOOK,\n      title: 'DND5E.Spellbook',\n      content: {\n        component: NpcSpellbookTab,\n        type: 'svelte',\n      },\n      enabled: (context) =>\n        !context.hideEmptySpellbook && context.showSpellbookTab,\n      layout: 'classic',\n    },\n    {\n      id: 'effects',\n      title: 'DND5E.Effects',\n      content: {\n        component: NpcEffectsTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: 'biography',\n      title: 'DND5E.Biography',\n      content: {\n        component: NpcBiographyTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: 'journal',\n      title: 'TIDY5E.JournalTabName',\n      content: {\n        component: ActorJournalTab,\n        type: 'svelte',\n      },\n      enabled: (context) => context.owner,\n      layout: 'classic',\n    },\n    {\n      id: 'inventory',\n      title: 'DND5E.Inventory',\n      content: {\n        component: ActorInventoryTab,\n        type: 'svelte',\n        getProps() {\n          return {\n            tabId: CONSTANTS.TAB_NPC_INVENTORY,\n          };\n        },\n      },\n      enabled: (context) => context.owner,\n      layout: 'classic',\n    },\n  ];\n\n  static async getContent(\n    context: CharacterSheetContext\n  ): Promise<CustomContent[]> {\n    return await CustomContentManager.prepareContentForRender(\n      context,\n      NpcSheetRuntime._content\n    );\n  }\n\n  static getTabs(context: NpcSheetContext): Promise<Tab[]> {\n    return TabManager.prepareTabsForRender(context, NpcSheetRuntime._tabs);\n  }\n\n  static getAllRegisteredTabs(): RegisteredTab<NpcSheetContext>[] {\n    return [...NpcSheetRuntime._tabs];\n  }\n\n  static registerContent(\n    registeredContent: RegisteredContent<NpcSheetContext>\n  ) {\n    this._content.push(registeredContent);\n  }\n\n  static registerTab(\n    tab: RegisteredTab<NpcSheetContext>,\n    options?: ActorTabRegistrationOptions\n  ) {\n    const tabExists = NpcSheetRuntime._tabs.some((t) => t.id === tab.id);\n\n    if (tabExists) {\n      warn(`Tab with id ${tab.id} already exists.`);\n      return;\n    }\n\n    if (tabExists && options?.overrideExisting) {\n      const index = NpcSheetRuntime._tabs.findIndex((t) => t.id === tab.id);\n      if (index >= 0) {\n        NpcSheetRuntime._tabs.splice(index, 1);\n      }\n    }\n\n    NpcSheetRuntime._tabs.push(tab);\n  }\n\n  static getTabTitle(tabId: string) {\n    try {\n      let tabTitle = this._tabs.find((t) => t.id === tabId)?.title;\n      if (typeof tabTitle === 'function') {\n        tabTitle = tabTitle();\n      }\n      return tabTitle ? FoundryAdapter.localize(tabTitle) : tabId;\n    } catch (e) {\n      error('An error occurred while searching for a tab title.', false, e);\n      debug('Tab title error troubleshooting information', { tabId });\n    }\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import {\n    type ActorSheetContext,\n    type RenderableClassicControl,\n  } from 'src/types/types';\n  import ItemTable from '../../components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from '../../components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from '../../components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableColumn from '../../components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableFooter from '../../components/item-list/ItemTableFooter.svelte';\n  import ItemImage from '../../components/item-list/ItemImage.svelte';\n  import ItemTableCell from '../../components/item-list/v1/ItemTableCell.svelte';\n  import ItemControl from '../../components/item-list/controls/ItemControl.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import Notice from 'src/components/notice/Notice.svelte';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import ClassicControls from '../shared/ClassicControls.svelte';\n  import ActorEffectToggleControl from 'src/components/item-list/controls/ActorEffectToggleControl.svelte';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: effectSections = Object.values<any>($context.effects);\n\n  $: noEffects =\n    effectSections.some((section: any) => section.effects.length > 0) === false;\n\n  declareLocation('effects');\n\n  let controls: RenderableClassicControl<{ effect: any }>[] = [];\n\n  $: {\n    controls = [];\n\n    controls.push(\n      {\n        component: ActorEffectToggleControl,\n        props: ({ effect }) => ({\n          effect: effect,\n        }),\n      },\n      {\n        component: ItemControl,\n        props: ({ effect }) => ({\n          onclick: () => effect.sheet.render(true),\n          title: localize('DND5E.EffectEdit'),\n          iconCssClass: 'fas fa-edit',\n        }),\n      },\n    );\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemControl,\n        props: ({ effect }) => ({\n          onclick: () => effect.deleteDialog(),\n          title: localize('DND5E.EffectDelete'),\n          iconCssClass: 'fas fa-trash',\n        }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n</script>\n\n<div class=\"scroll-container flex-column small-gap\">\n  {#if !$context.allowEffectsManagement && $context.unlocked}\n    <Notice>{localize('TIDY5E.GMOnlyEdit')}</Notice>\n  {/if}\n\n  {#if noEffects && !$context.unlocked && $context.allowEffectsManagement}\n    <Notice>{localize('TIDY5E.EmptySection')}</Notice>\n  {:else}\n    {#each effectSections as section}\n      {#if !section.hidden}\n        {#if ($context.unlocked && $context.allowEffectsManagement) || section.effects.length > 0}\n          <ItemTable key={section.label}>\n            <svelte:fragment slot=\"header\">\n              <ItemTableHeaderRow>\n                <ItemTableColumn primary={true}>\n                  {localize(section.label)}\n                </ItemTableColumn>\n                <ItemTableColumn baseWidth=\"12.5rem\">\n                  {localize('DND5E.Source')}\n                </ItemTableColumn>\n                <ItemTableColumn baseWidth=\"7.5rem\">\n                  {localize('DND5E.Duration')}\n                </ItemTableColumn>\n                {#if $context.editable && $context.useClassicControls && $context.allowEffectsManagement}\n                  <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n                {/if}\n              </ItemTableHeaderRow>\n            </svelte:fragment>\n            <svelte:fragment slot=\"body\">\n              {#each section.effects as effect}\n                <ItemTableRow\n                  on:mousedown={(event) =>\n                    FoundryAdapter.editOnMiddleClick(event.detail, effect)}\n                  contextMenu={{\n                    type: CONSTANTS.CONTEXT_MENU_TYPE_EFFECTS,\n                    uuid: effect.uuid,\n                  }}\n                  {effect}\n                >\n                  <ItemTableCell\n                    primary={true}\n                    attributes={{\n                      'data-tidy-effect-name-container': true,\n                      'data-effect-id': effect.id,\n                    }}\n                  >\n                    <ItemImage src={effect.img ?? effect.icon} />\n                    <span\n                      class=\"align-self-center truncate\"\n                      data-tidy-effect-name={effect.name}>{effect.name}</span\n                    >\n                  </ItemTableCell>\n                  <ItemTableCell baseWidth=\"12.5rem\"\n                    >{effect.sourceName ?? ''}</ItemTableCell\n                  >\n                  <ItemTableCell baseWidth=\"7.5rem\"\n                    >{effect.duration.label ?? ''}</ItemTableCell\n                  >\n                  {#if $context.editable && $context.useClassicControls && $context.allowEffectsManagement}\n                    <ItemTableCell baseWidth={classicControlsColumnWidth}>\n                      <ClassicControls {controls} params={{ effect: effect }} />\n                    </ItemTableCell>\n                  {/if}\n                </ItemTableRow>\n              {/each}\n              {#if $context.unlocked && $context.allowEffectsManagement}\n                <ItemTableFooter\n                  actor={$context.actor}\n                  {section}\n                  create={() =>\n                    FoundryAdapter.addEffect(section.type, $context.actor)}\n                  isItem={false}\n                />\n              {/if}\n            </svelte:fragment>\n          </ItemTable>\n        {/if}\n      {/if}\n    {/each}\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import ContentEditableFormField from 'src/components/inputs/ContentEditableFormField.svelte';\n  import HorizontalLineSeparator from 'src/components/layout/HorizontalLineSeparator.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import { quadInOut } from 'svelte/easing';\n  import type { Readable } from 'svelte/store';\n  import { slide } from 'svelte/transition';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: totalCrew = $context.system.cargo.crew.reduce(\n    (count: number, c: { quantity: number }) => count + c.quantity,\n    0,\n  );\n  $: totalActions = $context.system.attributes.actions.value ?? 0;\n  $: actionsPerTurn =\n    totalCrew >= $context.system.attributes.actions.thresholds[2]\n      ? totalActions\n      : totalCrew >= $context.system.attributes.actions.thresholds[1]\n        ? Math.max(totalActions - 1, 0)\n        : totalCrew >= $context.system.attributes.actions.thresholds[0]\n          ? Math.max(totalActions - 2, 0)\n          : 0;\n  $: crewTallyDescription =\n    actionsPerTurn === totalActions\n      ? localize('DND5E.VehicleActionThresholdsFull')\n      : actionsPerTurn === totalActions - 1\n        ? localize('DND5E.VehicleActionThresholdsMid')\n        : actionsPerTurn === totalActions - 2\n          ? localize('DND5E.VehicleActionThresholdsMin')\n          : null;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"counters counter-flex\">\n  <div class=\"counter creature-cap\">\n    <h4>{localize('DND5E.VehicleCreatureCapacity')}</h4>\n    <div class=\"counter-value\">\n      <ContentEditableFormField\n        element=\"div\"\n        document={$context.actor}\n        field=\"system.attributes.capacity.creature\"\n        editable={$context.editable && !$context.lockSensitiveFields}\n        placeholder=\"&mdash;\"\n        value={$context.system.attributes.capacity.creature}\n        dataMaxLength={1000}\n      />\n    </div>\n  </div>\n  <HorizontalLineSeparator />\n  <div class=\"counter cargo-cap\">\n    <h4 class=\"flex-1\">{localize('DND5E.VehicleCargoCapacity')}</h4>\n    <div class=\"counter-value\">\n      <NumberInput\n        document={$context.actor}\n        field=\"system.attributes.capacity.cargo\"\n        value={$context.system.attributes.capacity.cargo}\n        min=\"0\"\n        placeholder=\"0\"\n        selectOnFocus={true}\n        disabled={!$context.editable || $context.lockSensitiveFields}\n      />\n    </div>\n  </div>\n  <HorizontalLineSeparator />\n  <div class=\"counter stations\">\n    <div class=\"counter-value\">\n      <Checkbox\n        document={$context.actor}\n        field=\"system.attributes.actions.stations\"\n        checked={$context.system.attributes.actions.stations}\n        labelCssClass=\"action-stations-label\"\n        disabled={!$context.editable || $context.lockSensitiveFields}\n      >\n        <span>{localize('DND5E.VehicleActionStations')}</span>\n      </Checkbox>\n    </div>\n  </div>\n  {#if !$context.system.attributes.actions.stations}\n    <div\n      class=\"counter-flex\"\n      transition:slide={{ duration: 200, easing: quadInOut }}\n    >\n      <HorizontalLineSeparator />\n      <div class=\"counter actions\">\n        <h4>{localize('DND5E.ActionPl')}</h4>\n        <div class=\"counter-value\">\n          <NumberInput\n            document={$context.actor}\n            field=\"system.attributes.actions.value\"\n            value={$context.system.attributes.actions.value}\n            step=\"1\"\n            min=\"0\"\n            placeholder=\"0\"\n            title={localize('DND5E.VehicleActionsHint')}\n            selectOnFocus={true}\n            disabled={!$context.editable || $context.lockSensitiveFields}\n          />\n        </div>\n      </div>\n      <HorizontalLineSeparator />\n      <div class=\"counter action-thresholds\">\n        <h4>{localize('DND5E.VehicleActionThresholds')}</h4>\n        <div class=\"counter-value\">\n          <span class=\"sep\">&lt;</span>\n\n          <NumberInput\n            document={$context.actor}\n            field=\"system.attributes.actions.thresholds.2\"\n            value={$context.system.attributes.actions.thresholds['2']}\n            min=\"0\"\n            step=\"1\"\n            placeholder=\"&mdash;\"\n            title={localize('DND5E.VehicleActionThresholdsFull')}\n            selectOnFocus={true}\n            disabled={!$context.editable || $context.lockSensitiveFields}\n          />\n\n          <span class=\"sep\">&lt;</span>\n          <NumberInput\n            document={$context.actor}\n            field=\"system.attributes.actions.thresholds.1\"\n            value={$context.system.attributes.actions.thresholds['1']}\n            min=\"0\"\n            step=\"1\"\n            placeholder=\"&mdash;\"\n            title={localize('DND5E.VehicleActionThresholdsMid')}\n            selectOnFocus={true}\n            disabled={!$context.editable || $context.lockSensitiveFields}\n          />\n\n          <span class=\"sep\">&lt;</span>\n          <NumberInput\n            document={$context.actor}\n            field=\"system.attributes.actions.thresholds.0\"\n            value={$context.system.attributes.actions.thresholds['0']}\n            min=\"0\"\n            step=\"1\"\n            placeholder=\"&mdash;\"\n            title={localize('DND5E.VehicleActionThresholdsMin')}\n            selectOnFocus={true}\n            disabled={!$context.editable || $context.lockSensitiveFields}\n          />\n        </div>\n      </div>\n      <HorizontalLineSeparator />\n      <div class=\"counter action-summary\">\n        <h4>{localize('TIDY5E.TotalCrewCount')}</h4>\n        <div class=\"counter-value\" title={crewTallyDescription}>\n          {totalCrew}\n        </div>\n      </div>\n      <HorizontalLineSeparator />\n      <div class=\"counter action-summary\">\n        <h4>{localize('TIDY5E.ActionsPerTurn')}</h4>\n        <div class=\"counter-value\">\n          {actionsPerTurn}\n        </div>\n      </div>\n    </div>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .counter-flex {\n    display: flex;\n    flex-direction: column;\n    gap: 0.25rem;\n  }\n\n  .counters {\n    background: var(--t5e-faint-color);\n    border-radius: 0.3125rem;\n    padding: 0.25rem 0.5rem;\n    font-size: 0.75rem;\n\n    .counter-value :global(input[type='number']) {\n      height: 1.25rem;\n    }\n\n    .stations .counter-value :global(.action-stations-label) {\n      display: flex;\n      align-items: center;\n    }\n\n    .stations .counter-value :global(.action-stations-label input) {\n      margin-left: 0;\n    }\n\n    .action-thresholds .counter-value {\n      display: flex;\n      align-items: center;\n\n      :global(input) {\n        width: 2rem;\n        text-align: center;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { getPercentage } from 'src/utils/numbers';\n\n  export let value: number | null | undefined = null;\n  export let max: number | null | undefined = null;\n  export let percentage: number | null = null;\n  export let color: string = 'var(--t5e-hp-bar-color)';\n  export let cssClass: string | null = null;\n\n  $: barPercentage = percentage ?? getPercentage(value, max);\n</script>\n\n<div\n  class=\"bar {cssClass}\"\n  style=\"width: {barPercentage}%; --bar-color: {color}\"\n/>\n\n<style lang=\"scss\">\n  .bar {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    background: var(--bar-color);\n    transition: width 0.5s ease;\n  }\n</style>\n","<script lang=\"ts\">\n  import Bar from './Bar.svelte';\n\n  export let value: number | null | undefined = null;\n  export let max: number | null | undefined = null;\n  export let percentage: number | null = null;\n</script>\n\n<Bar {value} {max} {percentage} color=\"var(--t5e-hp-bar-color)\" />\n","<script lang=\"ts\">\n  import type { ComponentType } from 'svelte';\n  import TextInput from '../inputs/TextInput.svelte';\n\n  export let document: any;\n  export let value: number;\n  export let valueField: string;\n  export let valueTitle: string | null = null;\n  export let valueDisabled: boolean = false;\n  export let max: number;\n  export let maxField: string;\n  export let maxTitle: string | null = null;\n  export let maxDisabled: boolean = false;\n  export let percentage: number | null = null;\n  export let Bar: ComponentType | null = null;\n</script>\n\n<div class=\"resource-container\">\n  {#if Bar}\n    <svelte:component this={Bar} {percentage} {value} {max} />\n  {/if}\n  <TextInput\n    cssClass=\"resource-value\"\n    {document}\n    field={valueField}\n    {value}\n    placeholder=\"0\"\n    title={valueTitle}\n    selectOnFocus={true}\n    allowDeltaChanges={true}\n    maxlength={5}\n    ariaDescribedBy=\"tooltip\"\n    disabled={valueDisabled}\n  />\n  <span class=\"resource-separator\">/</span>\n  {#if !maxDisabled}\n    <TextInput\n      cssClass=\"resource-max\"\n      {document}\n      field={maxField}\n      value={max}\n      placeholder=\"0\"\n      title={maxTitle}\n      selectOnFocus={true}\n      allowDeltaChanges={true}\n      maxlength={5}\n      ariaDescribedBy=\"tooltip\"\n      disabled={maxDisabled}\n    />\n  {:else}\n    <span class=\"resource-max\" title={maxTitle}>{max}</span>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .resource-container {\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: var(--t5e-icon-background);\n    box-shadow: 0 0 0.3125rem var(--t5e-icon-shadow-color) inset;\n    border: 0.0625rem solid var(--t5e-icon-outline-color);\n    width: inherit;\n    height: inherit;\n    font-family: inherit;\n    font-weight: inherit;\n    border-radius: inherit;\n\n    :global(:not(.bar)) {\n      position: relative;\n    }\n\n    :global(.resource-value) {\n      text-align: right;\n    }\n\n    :global(.resource-max) {\n      text-align: left;\n    }\n\n    :global(.resource-max),\n    :global(.resource-value) {\n      flex: 1 1 0;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { Item5e } from 'src/types/item.types';\n  import ItemControl from 'src/components/item-list/controls/ItemControl.svelte';\n\n  export let item: Item5e;\n  export let ctx: any;\n</script>\n\n<ItemControl\n  iconCssClass=\"fas fa-user-alt {ctx?.toggleClass}\"\n  title={ctx?.toggleTitle}\n  active={ctx?.toggleClass === 'active'}\n  onclick={() =>\n    item.update({\n      ['system.crewed']: !item.system.crewed,\n    })}\n/>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import Traits from '../../actor/traits/Traits.svelte';\n  import VehicleAttributes from '../parts/VehicleAttributes.svelte';\n  import type { Readable } from 'svelte/store';\n  import type {\n    RenderableClassicControl,\n    VehicleFeatureSection,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemTable from 'src/components/item-list/v1/ItemTable.svelte';\n  import ItemTableHeaderRow from 'src/components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableColumn from 'src/components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableRow from 'src/components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableCell from 'src/components/item-list/v1/ItemTableCell.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemName from 'src/components/item-list/ItemName.svelte';\n  import ItemUseButton from 'src/components/item-list/ItemUseButton.svelte';\n  import ItemTableFooter from 'src/components/item-list/ItemTableFooter.svelte';\n  import ItemUses from 'src/components/item-list/ItemUses.svelte';\n  import ItemAddUses from 'src/components/item-list/ItemAddUses.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ItemDeleteControl from 'src/components/item-list/controls/ItemDeleteControl.svelte';\n  import ItemEditControl from 'src/components/item-list/controls/ItemEditControl.svelte';\n  import Notice from 'src/components/notice/Notice.svelte';\n  import HpBar from '../../../components/bar/HpBar.svelte';\n  import ResourceWithBar from 'src/components/bar/ResourceWithBar.svelte';\n  import RechargeControl from 'src/components/item-list/controls/RechargeControl.svelte';\n  import ActionFilterOverrideControl from 'src/components/item-list/controls/ActionFilterOverrideControl.svelte';\n  import { declareLocation } from 'src/types/location-awareness.types';\n  import ItemCrewedControl from 'src/sheets/vehicle/parts/ItemCrewedControl.svelte';\n  import type { Item5e } from 'src/types/item.types';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  let baseWidths: Record<string, string> = {\n    cover: '3.125rem',\n    'system.quantity': '4.375rem',\n    'system.armor.value': '2.5rem',\n    'system.hp.value': '4.375rem',\n    threshold: '2.5rem',\n  };\n\n  let alternateColumnHeaderContent: Record<string, string> = {\n    threshold: `<i class=\"fas fa-heart-crack\" title=\"${localize(\n      'DND5E.Threshold',\n    )}\"></i>`,\n  };\n\n  $: noFeatures = !$context.features.some(\n    (section: VehicleFeatureSection) => section.items.length,\n  );\n\n  declareLocation('attributes');\n\n  let controls: RenderableClassicControl<{ item: Item5e; ctx: any }>[] = [];\n\n  $: {\n    controls = [];\n    controls.push(\n      {\n        component: ItemCrewedControl,\n        props: ({ item, ctx }) => ({\n          item,\n          ctx,\n        }),\n      },\n      {\n        component: ItemEditControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      },\n    );\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemDeleteControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n\n    if ($context.useActionsFeature) {\n      controls.push({\n        component: ActionFilterOverrideControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n</script>\n\n<div class=\"attributes-tab-contents\" data-tidy-track-scroll-y>\n  <div class=\"side-panel\">\n    <VehicleAttributes />\n    <Traits\n      toggleable={true}\n      useSenses={false}\n      enableSpecialTraitsConfiguration={false}\n    />\n  </div>\n  <div class=\"main-panel flex-column small-gap\">\n    {#if noFeatures && !$context.unlocked}\n      <Notice>\n        {localize('TIDY5E.EmptySection')}\n      </Notice>\n    {:else}\n      {#each $context.features as section (section.key)}\n        {#if $context.unlocked || section.items.length}\n          <ItemTable key={section.key}>\n            <svelte:fragment slot=\"header\">\n              <ItemTableHeaderRow>\n                <ItemTableColumn primary={true}>\n                  {localize(section.label)}\n                </ItemTableColumn>\n                {#if section.hasActions}\n                  <ItemTableColumn baseWidth=\"3.125rem\">\n                    {localize('DND5E.Uses')}\n                  </ItemTableColumn>\n                  <ItemTableColumn baseWidth=\"7.5rem\">\n                    {localize('DND5E.Usage')}\n                  </ItemTableColumn>\n                {/if}\n                {#if section.columns}\n                  {#each section.columns as column}\n                    <ItemTableColumn\n                      cssClass=\"items-header-{column.css}\"\n                      baseWidth={baseWidths[column.property] ?? '3.125rem'}\n                    >\n                      {#if alternateColumnHeaderContent[column.property]}\n                        {@html alternateColumnHeaderContent[column.property]}\n                      {:else}\n                        {column.label}\n                      {/if}\n                    </ItemTableColumn>\n                  {/each}\n                {/if}\n                {#if $context.editable && $context.useClassicControls}\n                  <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n                {/if}\n              </ItemTableHeaderRow>\n            </svelte:fragment>\n            <svelte:fragment slot=\"body\">\n              {#each section.items as item (item.id)}\n                {@const ctx = $context.itemContext[item.id]}\n                <ItemTableRow\n                  let:toggleSummary\n                  on:mousedown={(event) =>\n                    FoundryAdapter.editOnMiddleClick(event.detail, item)}\n                  contextMenu={{\n                    type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n                    uuid: item.uuid,\n                  }}\n                  {item}\n                  cssClass={FoundryAdapter.getInventoryRowClasses(item, ctx)}\n                >\n                  <ItemTableCell primary={true}>\n                    <ItemUseButton disabled={!$context.editable} {item} />\n                    <ItemName\n                      on:toggle={() => toggleSummary($context.actor)}\n                      cssClass=\"extra-small-gap\"\n                      {item}\n                    >\n                      <span\n                        class=\"truncate\"\n                        data-tidy-item-name={item.name}\n                        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n                        >{item.name}</span\n                      >\n                    </ItemName>\n                  </ItemTableCell>\n                  {#if section.hasActions}\n                    <ItemTableCell baseWidth=\"3.125rem\">\n                      {#if item.isOnCooldown}\n                        <RechargeControl {item} />\n                      {:else if item.system.recharge?.value}\n                        <i\n                          class=\"fas fa-bolt\"\n                          title={localize('DND5E.Charged')}\n                        />\n                      {:else if ctx?.hasUses}\n                        <ItemUses {item} />\n                      {:else}\n                        <!-- TODO: Figure out how to make this work in a custom section. -->\n                        <ItemAddUses {item} />\n                      {/if}\n                    </ItemTableCell>\n                    <ItemTableCell baseWidth=\"7.5rem\">\n                      {#if item.system.activation?.type}\n                        <span>{item.labels?.activation ?? ''}</span>\n                      {/if}\n                    </ItemTableCell>\n                  {/if}\n                  {#if section.columns}\n                    {#each section.columns as column}\n                      {#if column.property === 'system.hp.value'}\n                        <!-- TODO: Extract to its own component; formalize this feature of overriding specific columns based on property matching -->\n                        <ItemTableCell baseWidth=\"4.375rem\">\n                          <div\n                            class=\"item-hp\"\n                            title={localize('DND5E.HitPoints')}\n                          >\n                            <ResourceWithBar\n                              document={item}\n                              value={item.system.hp.value}\n                              valueField=\"system.hp.value\"\n                              valueTitle={localize('DND5E.HitPointsCurrent')}\n                              valueDisabled={!$context.editable}\n                              max={item.system.hp.max}\n                              maxField=\"system.hp.max\"\n                              maxTitle={localize('DND5E.HitPointsMax')}\n                              maxDisabled={!$context.editable ||\n                                $context.lockSensitiveFields}\n                              Bar={HpBar}\n                            />\n                          </div>\n                        </ItemTableCell>\n                      {:else}\n                        {@const isNumber = column.editable === 'Number'}\n                        {@const fallback = isNumber ? '0' : ''}\n                        {@const value =\n                          FoundryAdapter.getProperty(\n                            item,\n                            column.property,\n                          )?.toString() ??\n                          FoundryAdapter.getProperty(\n                            ctx,\n                            column.property,\n                          )?.toString() ??\n                          fallback}\n                        <ItemTableCell\n                          baseWidth={baseWidths[column.property] ?? '3.125rem'}\n                        >\n                          {#if column.editable}\n                            <TextInput\n                              document={item}\n                              field={column.property}\n                              allowDeltaChanges={isNumber}\n                              selectOnFocus={true}\n                              {value}\n                              disabled={!$context.editable}\n                            />\n                          {:else}\n                            {FoundryAdapter.getProperty(\n                              item,\n                              column.property,\n                            ) ??\n                              FoundryAdapter.getProperty(\n                                ctx,\n                                column.property,\n                              ) ??\n                              fallback}\n                          {/if}\n                        </ItemTableCell>\n                      {/if}\n                    {/each}\n                  {/if}\n                  {#if $context.editable && $context.useClassicControls}\n                    <ItemTableCell baseWidth={classicControlsColumnWidth}>\n                      <ClassicControls\n                        {controls}\n                        params={{ item: item, ctx: ctx }}\n                      />\n                    </ItemTableCell>\n                  {/if}\n                </ItemTableRow>\n              {/each}\n              {#if $context.unlocked && section.dataset}\n                <ItemTableFooter\n                  actor={$context.actor}\n                  {section}\n                  isItem={true}\n                />\n              {/if}\n            </svelte:fragment>\n          </ItemTable>\n        {/if}\n      {/each}\n    {/if}\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .attributes-tab-contents {\n    flex: 1;\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    padding-right: 0.75rem;\n    overflow-y: scroll;\n    .side-panel {\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n      width: 13.75rem;\n    }\n\n    .main-panel {\n      flex: 1;\n    }\n\n    :global(.items-header-item-threshold) {\n      align-self: flex-start;\n    }\n\n    .item-hp {\n      align-self: center;\n      position: relative;\n      width: calc(100% - 0.25rem);\n      margin-left: 0.125rem;\n      margin-right: 0.125rem;\n      height: 1.325rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    RenderableClassicControl,\n    VehicleCargoSection,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ItemTable from 'src/components/item-list/v1/ItemTable.svelte';\n  import ItemTableColumn from 'src/components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableRow from 'src/components/item-list/v1/ItemTableRow.svelte';\n  import ItemTableHeaderRow from 'src/components/item-list/v1/ItemTableHeaderRow.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemTableCell from 'src/components/item-list/v1/ItemTableCell.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ItemUseButton from 'src/components/item-list/ItemUseButton.svelte';\n  import ItemName from 'src/components/item-list/ItemName.svelte';\n  import ItemTableFooter from 'src/components/item-list/ItemTableFooter.svelte';\n  import ItemDeleteControl from 'src/components/item-list/controls/ItemDeleteControl.svelte';\n  import ItemEditControl from 'src/components/item-list/controls/ItemEditControl.svelte';\n  import ActionFilterOverrideControl from 'src/components/item-list/controls/ActionFilterOverrideControl.svelte';\n  import type { Item5e } from 'src/types/item.types';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import type { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import InlineContainerToggle from 'src/sheets/container/InlineContainerToggle.svelte';\n  import InlineContainerView from 'src/sheets/container/InlineContainerView.svelte';\n\n  export let section: VehicleCargoSection;\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let inlineContainerToggleService = getContext<InlineContainerToggleService>(\n    CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n  );\n\n  let baseWidths: Record<string, string> = {\n    quantity: '5rem',\n    price: '4.375rem',\n    weight: '3.75rem',\n  };\n\n  let controls: RenderableClassicControl<{ item: Item5e }>[] = [];\n\n  $: {\n    controls = [\n      {\n        component: ItemEditControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      },\n    ];\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemDeleteControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n\n    if ($context.useActionsFeature) {\n      controls.push({\n        component: ActionFilterOverrideControl,\n        props: ({ item }) => ({\n          item,\n        }),\n      });\n    }\n  }\n\n  let classicControlsIconWidth = 1.25;\n\n  $: classicControlsColumnWidth = `${classicControlsIconWidth * controls.length}rem`;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemTable key={section.key}>\n  <svelte:fragment slot=\"header\">\n    <ItemTableHeaderRow>\n      <ItemTableColumn primary={true}>\n        {localize(section.label)}\n      </ItemTableColumn>\n      {#each section.columns as column}\n        <ItemTableColumn\n          cssClass=\"items-header-{column.css}\"\n          baseWidth={baseWidths[column.property] ?? '3.125rem'}\n        >\n          {column.label}\n        </ItemTableColumn>\n      {/each}\n      {#if $context.editable && $context.useClassicControls}\n        <ItemTableColumn baseWidth={classicControlsColumnWidth} />\n      {/if}\n    </ItemTableHeaderRow>\n  </svelte:fragment>\n  <svelte:fragment slot=\"body\">\n    {#each section.items as item, index (item.id ?? index)}\n      {@const ctx = $context.itemContext[item.id]}\n      <ItemTableRow\n        let:toggleSummary\n        on:mousedown={(event) =>\n          FoundryAdapter.editOnMiddleClick(event.detail, item)}\n        contextMenu={{\n          type: CONSTANTS.CONTEXT_MENU_TYPE_ITEMS,\n          uuid: item.uuid,\n        }}\n        {item}\n        cssClass={FoundryAdapter.getInventoryRowClasses(item, ctx)}\n      >\n        <ItemTableCell primary={true}>\n          <ItemUseButton disabled={!$context.editable} {item} />\n          {#if 'containerContents' in ctx && !!ctx.containerContents}\n            <InlineContainerToggle {item} {inlineContainerToggleService} />\n          {/if}\n          <ItemName\n            on:toggle={() => toggleSummary($context.actor)}\n            cssClass=\"extra-small-gap\"\n            {item}\n          >\n            <span\n              class=\"truncate\"\n              data-tidy-item-name={item.name}\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_NAME}\n              >{item.name}</span\n            >\n          </ItemName>\n        </ItemTableCell>\n        {#if section.columns}\n          {#each section.columns as column}\n            {@const isNumber = column.editable === 'Number'}\n            {@const fallback = isNumber ? '0' : ''}\n            {@const value =\n              FoundryAdapter.getProperty(item, column.property)?.toString() ??\n              FoundryAdapter.getProperty(ctx, column.property)?.toString() ??\n              fallback}\n            <ItemTableCell\n              baseWidth={baseWidths[column.property] ?? '3.125rem'}\n            >\n              {#if column.editable}\n                <TextInput\n                  document={item}\n                  field={column.property}\n                  allowDeltaChanges={isNumber}\n                  selectOnFocus={true}\n                  {value}\n                  disabled={!$context.editable ||\n                    (column.property === 'quantity' &&\n                      $context.lockItemQuantity)}\n                />\n              {:else}\n                {FoundryAdapter.getProperty(item, column.property) ??\n                  FoundryAdapter.getProperty(ctx, column.property) ??\n                  fallback}\n              {/if}\n            </ItemTableCell>\n          {/each}\n        {/if}\n        {#if $context.editable && $context.useClassicControls}\n          <ItemTableCell baseWidth={classicControlsColumnWidth}>\n            <ClassicControls {controls} params={{ item: item }} />\n          </ItemTableCell>\n        {/if}\n      </ItemTableRow>\n      {#if 'containerContents' in ctx && !!ctx.containerContents}\n        <InlineContainerView\n          container={item}\n          containerContents={ctx.containerContents}\n          editable={$context.editable}\n          {inlineContainerToggleService}\n          lockItemQuantity={$context.lockItemQuantity}\n          sheetDocument={$context.actor}\n        />\n      {/if}\n    {/each}\n    {#if $context.unlocked && section.dataset}\n      <ItemTableFooter\n        actor={$context.actor}\n        {section}\n        create={() =>\n          FoundryAdapter.createItem(\n            { type: section.dataset.type },\n            $context.actor,\n          )}\n        isItem={section.dataset.type !== 'crew' &&\n          section.dataset.type !== 'passengers'}\n      />\n    {/if}\n  </svelte:fragment>\n</ItemTable>\n","<script lang=\"ts\">\n  import ItemTableFooter from 'src/components/item-list/ItemTableFooter.svelte';\n  import ItemDeleteControl from 'src/components/item-list/controls/ItemDeleteControl.svelte';\n  import ItemTable from 'src/components/item-list/v1/ItemTable.svelte';\n  import ItemTableCell from 'src/components/item-list/v1/ItemTableCell.svelte';\n  import ItemTableColumn from 'src/components/item-list/v1/ItemTableColumn.svelte';\n  import ItemTableHeaderRow from 'src/components/item-list/v1/ItemTableHeaderRow.svelte';\n  import ItemTableRow from 'src/components/item-list/v1/ItemTableRow.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    CargoOrCrewItem,\n    RenderableClassicControl,\n    VehicleCargoSection,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ClassicControls from 'src/sheets/shared/ClassicControls.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  export let section: VehicleCargoSection;\n\n  let baseWidths: Record<string, string> = {\n    quantity: '5rem',\n    price: '4.375rem',\n    weight: '3.75rem',\n  };\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const classicControlsEditableRowBaseWidth = '1.5rem';\n\n  function saveNonItemSectionData(\n    ev: Event & { currentTarget: HTMLInputElement },\n    index: number,\n    field: string,\n    section: VehicleCargoSection,\n  ) {\n    const cargo = foundry.utils.deepClone(\n      $context.actor.system.cargo[section.dataset.type],\n    );\n\n    const value = ev.currentTarget.value;\n\n    const item = cargo[index];\n\n    if (item) {\n      item[field] = ev.currentTarget.type === 'number' ? Number(value) : value;\n\n      $context.actor.update({\n        [`system.cargo.${section.dataset.type}`]: cargo,\n      });\n    }\n\n    return false;\n  }\n\n  function deleteCrewOrPassenger(section: VehicleCargoSection, index: number) {\n    const cargo = foundry.utils\n      .deepClone($context.actor.system.cargo[section.dataset.type])\n      .filter((_: unknown, i: number) => i !== index);\n\n    $context.actor.update({\n      [`system.cargo.${section.dataset.type}`]: cargo,\n    });\n\n    return false;\n  }\n\n  async function onItemCreate(type: string) {\n    const actor = $context.actor;\n    const cargo = foundry.utils.deepClone(actor.system.cargo[type]);\n    cargo.push(FoundryAdapter.getNewCargo());\n    return actor.update({ [`system.cargo.${type}`]: cargo });\n  }\n\n  let controls: RenderableClassicControl<{\n    item: CargoOrCrewItem;\n    index: number;\n    section: VehicleCargoSection;\n  }>[] = [];\n\n  $: {\n    controls = [];\n\n    if ($context.unlocked) {\n      controls.push({\n        component: ItemDeleteControl,\n        props: ({ item, index, section }) => ({\n          onDelete: () => deleteCrewOrPassenger(section, index),\n          item: item,\n        }),\n      });\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemTable key={section.key}>\n  <svelte:fragment slot=\"header\">\n    <ItemTableHeaderRow>\n      <ItemTableColumn primary={true}>\n        {localize(section.label)}\n      </ItemTableColumn>\n      {#each section.columns as column}\n        <ItemTableColumn\n          cssClass=\"items-header-{column.css}\"\n          baseWidth={baseWidths[column.property] ?? '3.125rem'}\n        >\n          {column.label}\n        </ItemTableColumn>\n      {/each}\n      {#if $context.editable && $context.unlocked}\n        <ItemTableColumn baseWidth={classicControlsEditableRowBaseWidth} />\n      {/if}\n    </ItemTableHeaderRow>\n  </svelte:fragment>\n  <svelte:fragment slot=\"body\">\n    {#each section.items as item, index (item.id ?? index)}\n      {@const ctx = $context.itemContext[item.id]}\n      <ItemTableRow>\n        <ItemTableCell primary={true}>\n          <TextInput\n            document={item}\n            field=\"name\"\n            selectOnFocus={true}\n            onSaveChange={(ev) =>\n              saveNonItemSectionData(ev, index, 'name', section)}\n            value={item.name}\n            cssClass=\"editable-name\"\n            disabled={!$context.editable}\n            attributes={{ 'data-tidy-item-name': item.name }}\n          />\n        </ItemTableCell>\n        {#if section.columns}\n          {#each section.columns as column}\n            {@const isNumber = column.editable === 'Number'}\n            {@const fallback = isNumber ? '0' : ''}\n            {@const value =\n              FoundryAdapter.getProperty(item, column.property)?.toString() ??\n              FoundryAdapter.getProperty(ctx, column.property)?.toString() ??\n              fallback}\n            <ItemTableCell\n              baseWidth={baseWidths[column.property] ?? '3.125rem'}\n            >\n              {#if column.editable && !item.id}\n                <TextInput\n                  document={item}\n                  field={column.property}\n                  allowDeltaChanges={isNumber}\n                  selectOnFocus={true}\n                  {value}\n                  onSaveChange={(ev) =>\n                    saveNonItemSectionData(ev, index, column.property, section)}\n                  disabled={!$context.editable ||\n                    (column.property === 'quantity' &&\n                      $context.lockItemQuantity)}\n                />\n              {:else}\n                {FoundryAdapter.getProperty(item, column.property) ??\n                  FoundryAdapter.getProperty(ctx, column.property) ??\n                  fallback}\n              {/if}\n            </ItemTableCell>\n          {/each}\n        {/if}\n        {#if $context.editable && $context.unlocked}\n          <ItemTableCell baseWidth={classicControlsEditableRowBaseWidth}>\n            <ClassicControls\n              {controls}\n              params={{ item: item, index: index, section: section }}\n            />\n          </ItemTableCell>\n        {/if}\n      </ItemTableRow>\n    {/each}\n    {#if $context.unlocked && section.dataset}\n      <ItemTableFooter\n        actor={$context.actor}\n        {section}\n        create={() => onItemCreate(section.dataset.type)}\n        isItem={section.dataset.type !== 'crew' &&\n          section.dataset.type !== 'passengers'}\n      />\n    {/if}\n  </svelte:fragment>\n</ItemTable>\n\n<style lang=\"scss\">\n  :global(.tidy5e-sheet.vehicle input.editable-name) {\n    padding: 0 0.25rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    VehicleCargoSection,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import Notice from 'src/components/notice/Notice.svelte';\n  import Currency from '../../actor/Currency.svelte';\n  import EncumbranceBar from '../../actor/EncumbranceBar.svelte';\n  import TabFooter from '../../actor/TabFooter.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import CargoList from '../parts/CargoList.svelte';\n  import PassengerOrCrewList from '../parts/PassengerOrCrewList.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: noCargoOrCrew =\n    $context.cargo.some(\n      (section: VehicleCargoSection) => section.items.length > 0,\n    ) === false;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if noCargoOrCrew && !$context.unlocked}\n  <Notice>\n    {localize('TIDY5E.EmptySection')}\n  </Notice>\n{/if}\n\n<div class=\"scroll-container flex-column small-gap\">\n  {#each $context.cargo as section (section.key)}\n    {#if $context.unlocked || section.items.length}\n      {#if section.editableName}\n        <PassengerOrCrewList {section} />\n      {:else}\n        <CargoList {section} />\n      {/if}\n    {/if}\n  {/each}\n</div>\n\n<TabFooter mode=\"vertical\">\n  <div class=\"currency\">\n    <Currency document={$context.actor} />\n  </div>\n\n  {#if $settingStore.useVehicleEncumbranceBar}\n    <EncumbranceBar />\n  {/if}\n</TabFooter>\n","<script lang=\"ts\">\n  import SheetEditor from '../../../components/editor/SheetEditor.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import RerenderAfterFormSubmission from 'src/components/utility/RerenderAfterFormSubmission.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<div class=\"note-entries\" data-tidy-track-scroll-y>\n  <RerenderAfterFormSubmission\n    andOnValueChange={$context.system.details.biography.value}\n  >\n    <article class=\"biography-notes\" use:$context.activateEditors>\n      <SheetEditor\n        content={$context.biographyHTML}\n        target=\"system.details.biography.value\"\n        editable={$context.editable}\n      />\n    </article>\n  </RerenderAfterFormSubmission>\n</div>\n\n<style lang=\"scss\">\n  .note-entries {\n    flex: 1;\n    overflow-y: scroll;\n    padding-right: 0.75rem;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    :global(.editor) {\n      height: unset;\n    }\n  }\n</style>\n","import type { CustomContent, Tab, VehicleSheetContext } from 'src/types/types';\nimport { CONSTANTS } from 'src/constants';\nimport ActorEffectsTab from 'src/sheets/actor/ActorEffectsTab.svelte';\nimport VehicleAttributesTab from 'src/sheets/vehicle/tabs/VehicleAttributesTab.svelte';\nimport VehicleCargoAndCrewTab from 'src/sheets/vehicle/tabs/VehicleCargoAndCrewTab.svelte';\nimport VehicleDescriptionTab from 'src/sheets/vehicle/tabs/VehicleDescriptionTab.svelte';\nimport ActorActionsTab from 'src/sheets/actor/tabs/ActorActionsTab.svelte';\nimport type { RegisteredContent, RegisteredTab } from './types';\nimport { debug, error, warn } from 'src/utils/logging';\nimport { TabManager } from './tab/TabManager';\nimport type { ActorTabRegistrationOptions } from 'src/api/api.types';\nimport { CustomContentManager } from './content/CustomContentManager';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\nexport class VehicleSheetRuntime {\n  private static _content: RegisteredContent<VehicleSheetContext>[] = [];\n  private static _tabs: RegisteredTab<VehicleSheetContext>[] = [\n    {\n      title: 'TIDY5E.Actions.TabName',\n      content: {\n        component: ActorActionsTab,\n        type: 'svelte',\n      },\n      id: CONSTANTS.TAB_ACTOR_ACTIONS,\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_VEHICLE_ATTRIBUTES,\n      title: 'DND5E.Attributes',\n      content: {\n        component: VehicleAttributesTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_VEHICLE_CARGO_AND_CREW,\n      title: 'DND5E.VehicleCargoCrew',\n      content: {\n        component: VehicleCargoAndCrewTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_NPC_EFFECTS,\n      title: 'DND5E.Effects',\n      content: {\n        component: ActorEffectsTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n    {\n      id: CONSTANTS.TAB_VEHICLE_DESCRIPTION,\n      title: 'DND5E.Description',\n      content: {\n        component: VehicleDescriptionTab,\n        type: 'svelte',\n      },\n      layout: 'classic',\n    },\n  ];\n\n  static async getContent(\n    context: VehicleSheetContext\n  ): Promise<CustomContent[]> {\n    return await CustomContentManager.prepareContentForRender(\n      context,\n      VehicleSheetRuntime._content\n    );\n  }\n\n  static getTabs(context: VehicleSheetContext): Promise<Tab[]> {\n    return TabManager.prepareTabsForRender(context, VehicleSheetRuntime._tabs);\n  }\n\n  static getAllRegisteredTabs(): RegisteredTab<VehicleSheetContext>[] {\n    return [...VehicleSheetRuntime._tabs];\n  }\n\n  static registerContent(\n    registeredContent: RegisteredContent<VehicleSheetContext>\n  ) {\n    this._content.push(registeredContent);\n  }\n\n  static registerTab(\n    tab: RegisteredTab<VehicleSheetContext>,\n    options?: ActorTabRegistrationOptions\n  ) {\n    const tabExists = VehicleSheetRuntime._tabs.some((t) => t.id === tab.id);\n\n    if (tabExists) {\n      warn(`Tab with id ${tab.id} already exists.`);\n      return;\n    }\n\n    if (tabExists && options?.overrideExisting) {\n      const index = VehicleSheetRuntime._tabs.findIndex((t) => t.id === tab.id);\n      if (index >= 0) {\n        VehicleSheetRuntime._tabs.splice(index, 1);\n      }\n    }\n\n    VehicleSheetRuntime._tabs.push(tab);\n  }\n\n  static getTabTitle(tabId: string) {\n    try {\n      let tabTitle = this._tabs.find((t) => t.id === tabId)?.title;\n      if (typeof tabTitle === 'function') {\n        tabTitle = tabTitle();\n      }\n      return tabTitle ? FoundryAdapter.localize(tabTitle) : tabId;\n    } catch (e) {\n      error('An error occurred while searching for a tab title.', false, e);\n      debug('Tab title error troubleshooting information', { tabId });\n    }\n  }\n}\n","import SvelteFormApplicationBase from 'src/applications/SvelteFormApplicationBase';\nimport type { SvelteComponent } from 'svelte';\nimport WorldSettings from './WorldSettings.svelte';\nimport {\n  SettingsProvider,\n  getCurrentSettings,\n  type Tidy5eSettingKey,\n  type CurrentSettings,\n} from 'src/settings/settings';\nimport type {\n  DefaultTabSelectionFields,\n  WorldSettingsContext,\n  WorldSettingsContextStore,\n  WorldSettingsFunctions,\n} from './WorldSettings.types';\nimport type { RegisteredTab } from 'src/runtime/types';\nimport { CharacterSheetRuntime } from 'src/runtime/CharacterSheetRuntime';\nimport { NpcSheetRuntime } from 'src/runtime/NpcSheetRuntime';\nimport { VehicleSheetRuntime } from 'src/runtime/VehicleSheetRuntime';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { TabManager } from 'src/runtime/tab/TabManager';\nimport { debug, error } from 'src/utils/logging';\nimport { writable } from 'svelte/store';\nimport { CONSTANTS } from 'src/constants';\n\nexport class WorldSettingsFormApplication extends SvelteFormApplicationBase {\n  unchangedSettings?: CurrentSettings;\n\n  static get defaultOptions() {\n    return {\n      ...super.defaultOptions,\n      height: 750,\n      title: 'TIDY5E.WorldSettings.Menu.title',\n      width: 750,\n      classes: [...super.defaultOptions.classes, 'settings'],\n      id: 'tidy-5e-sheets-world-settings',\n      popOut: true,\n    };\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template.hbs');\n  }\n\n  getData(): WorldSettingsContext {\n    const currentSettings = getCurrentSettings();\n\n    return {\n      settings: {\n        hideDeathSavesFromPlayers: currentSettings.hideDeathSavesFromPlayers,\n        useCharacterEncumbranceBar: currentSettings.useCharacterEncumbranceBar,\n        useNpcEncumbranceBar: currentSettings.useNpcEncumbranceBar,\n        useVehicleEncumbranceBar: currentSettings.useVehicleEncumbranceBar,\n        showPlayerName: currentSettings.showPlayerName,\n        showExpandedLimitedView: currentSettings.showExpandedLimitedView,\n        itemCardsFixKey: currentSettings.itemCardsFixKey,\n        useCircularPortraitStyle: currentSettings.useCircularPortraitStyle,\n        permanentlyUnlockCharacterSheetForGm:\n          currentSettings.permanentlyUnlockCharacterSheetForGm,\n        permanentlyUnlockNpcSheetForGm:\n          currentSettings.permanentlyUnlockNpcSheetForGm,\n        permanentlyUnlockVehicleSheetForGm:\n          currentSettings.permanentlyUnlockVehicleSheetForGm,\n        limitEffectsManagementToGm: currentSettings.limitEffectsManagementToGm,\n        useCharacterInspiration: currentSettings.useCharacterInspiration,\n        useVehicleMotion: currentSettings.useVehicleMotion,\n        useExhaustion: currentSettings.useExhaustion,\n        showTraitLabels: currentSettings.showTraitLabels,\n        allowCantripsToBePrepared: currentSettings.allowCantripsToBePrepared,\n        allowHpMaxOverride: currentSettings.allowHpMaxOverride,\n        showActiveEffectsMarker: currentSettings.showActiveEffectsMarker,\n        useTotalSheetLock: currentSettings.useTotalSheetLock,\n        lockExpChanges: currentSettings.lockExpChanges,\n        lockHpMaxChanges: currentSettings.lockHpMaxChanges,\n        lockConfigureSheet: currentSettings.lockConfigureSheet,\n        lockMoneyChanges: currentSettings.lockMoneyChanges,\n        lockLevelSelector: currentSettings.lockLevelSelector,\n        lockItemQuantity: currentSettings.lockItemQuantity,\n        initialNpcSheetTab: currentSettings.initialNpcSheetTab,\n        showNpcRestInChat: currentSettings.showNpcRestInChat,\n        showNpcActorLinkMarker: currentSettings.showNpcActorLinkMarker,\n        initialCharacterSheetTab: currentSettings.initialCharacterSheetTab,\n        initialVehicleSheetTab: currentSettings.initialVehicleSheetTab,\n        itemIdentificationPermission:\n          currentSettings.itemIdentificationPermission,\n        includeFlagsInSpellScrollCreation:\n          currentSettings.includeFlagsInSpellScrollCreation,\n        useTidySpellSchoolIcons: currentSettings.useTidySpellSchoolIcons,\n      },\n      defaultCharacterTabs: this.mapTabSelectionFields(\n        CharacterSheetRuntime.getAllRegisteredTabs(),\n        currentSettings.defaultCharacterSheetTabs\n      ),\n      defaultNpcTabs: this.mapTabSelectionFields(\n        NpcSheetRuntime.getAllRegisteredTabs(),\n        currentSettings.defaultNpcSheetTabs\n      ),\n      defaultVehicleTabs: this.mapTabSelectionFields(\n        VehicleSheetRuntime.getAllRegisteredTabs(),\n        currentSettings.defaultVehicleSheetTabs\n      ),\n      exhaustionConfig: {\n        ...SettingsProvider.settings.exhaustionConfig.options.default,\n        ...currentSettings.exhaustionConfig,\n      },\n      vehicleExhaustionConfig: {\n        ...SettingsProvider.settings.vehicleExhaustionConfig.options.default,\n        ...currentSettings.vehicleExhaustionConfig,\n      },\n    };\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    const data = this.getData();\n\n    debug('World Settings context data', data);\n\n    return new WorldSettings({\n      target: node,\n      context: new Map<any, any>([\n        ['context', writable(data) satisfies WorldSettingsContextStore],\n        [\n          'functions',\n          {\n            save: this.saveChangedSettings.bind(this),\n            apply: this.applyChangedSettings.bind(this),\n            resetDefaultTabs: this.resetDefaultTabs.bind(this),\n          } satisfies WorldSettingsFunctions,\n        ],\n        ['appId', this.appId],\n      ]),\n    });\n  }\n\n  mapTabSelectionFields(\n    registeredTabs: RegisteredTab<any>[],\n    selectedTabIds: string[]\n  ): DefaultTabSelectionFields {\n    const available = registeredTabs\n      .filter((t) => !selectedTabIds.includes(t.id))\n      .map((t) => ({\n        id: t.id,\n        label: FoundryAdapter.localize(TabManager.getTabTitle(t)),\n      }));\n\n    const selected = registeredTabs\n      .filter((t) => selectedTabIds.includes(t.id))\n      .sort(\n        (a, b) => selectedTabIds.indexOf(a.id) - selectedTabIds.indexOf(b.id)\n      )\n      .map((t) => ({\n        id: t.id,\n        label: FoundryAdapter.localize(TabManager.getTabTitle(t)),\n      }));\n\n    return {\n      available,\n      selected,\n    };\n  }\n\n  validate(context: WorldSettingsContext) {\n    let valid = true;\n\n    if (\n      context.defaultCharacterTabs.selected.length === 0 ||\n      context.defaultNpcTabs.selected.length === 0 ||\n      context.defaultVehicleTabs.selected.length === 0\n    ) {\n      valid = false;\n      error(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.DefaultSheetTabs.AtLeastOneTabRequiredErrorMessage'\n        ),\n        true\n      );\n    }\n\n    if (\n      context.exhaustionConfig.type === 'specific' &&\n      context.exhaustionConfig.levels < 1\n    ) {\n      valid = false;\n      error(\n        FoundryAdapter.localize(\n          'TIDY5E.WorldSettings.Exhaustion.AtLeastOneLevelRequiredErrorMessage'\n        ),\n        true\n      );\n    }\n\n    if (\n      context.vehicleExhaustionConfig.type === 'specific' &&\n      context.vehicleExhaustionConfig.levels < 1\n    ) {\n      valid = false;\n      error(\n        FoundryAdapter.localize(\n          'TIDY5E.WorldSettings.VehicleExhaustion.AtLeastOneLevelRequiredErrorMessage'\n        ),\n        true\n      );\n    }\n\n    // Add more data validation here as needed\n\n    return valid;\n  }\n\n  async applyChangedSettings(context: WorldSettingsContext) {\n    if (!this.validate(context)) {\n      return false;\n    }\n\n    if (context.exhaustionConfig.type === 'specific') {\n      context.exhaustionConfig.hints = context.exhaustionConfig.hints.slice(\n        0,\n        context.exhaustionConfig.levels + 1\n      );\n    }\n\n    if (context.vehicleExhaustionConfig.type === 'specific') {\n      context.vehicleExhaustionConfig.hints =\n        context.vehicleExhaustionConfig.hints.slice(\n          0,\n          context.vehicleExhaustionConfig.levels + 1\n        );\n    }\n\n    const newSettings: Partial<CurrentSettings> = {\n      ...context.settings,\n      defaultCharacterSheetTabs: context.defaultCharacterTabs.selected.map(\n        (t) => t.id\n      ),\n      defaultNpcSheetTabs: context.defaultNpcTabs.selected.map((t) => t.id),\n      defaultVehicleSheetTabs: context.defaultVehicleTabs.selected.map(\n        (t) => t.id\n      ),\n      exhaustionConfig: context.exhaustionConfig,\n      vehicleExhaustionConfig: context.vehicleExhaustionConfig,\n    };\n\n    const currentSettings = getCurrentSettings();\n\n    const keys = Object.keys(newSettings) as Tidy5eSettingKey[];\n    for (let key of keys) {\n      const currentValue = currentSettings[key];\n      const newValue = newSettings[key];\n      if (currentValue !== newValue) {\n        await FoundryAdapter.setTidySetting(key, newValue);\n        debug(`Updated ${key} to ${newValue}`);\n      }\n    }\n\n    return true;\n  }\n\n  async saveChangedSettings(context: WorldSettingsContext) {\n    const changesApplied = await this.applyChangedSettings(context);\n\n    if (!changesApplied) {\n      return;\n    }\n\n    this.close();\n  }\n\n  resetDefaultTabs(store: WorldSettingsContextStore, actorType: string) {\n    switch (actorType) {\n      case CONSTANTS.SHEET_TYPE_CHARACTER:\n        store.update((context) => {\n          context.defaultCharacterTabs = this.mapTabSelectionFields(\n            CharacterSheetRuntime.getAllRegisteredTabs(),\n            [\n              ...SettingsProvider.settings.defaultCharacterSheetTabs.options\n                .default,\n            ]\n          );\n          return context;\n        });\n        break;\n      case CONSTANTS.SHEET_TYPE_NPC:\n        store.update((context) => {\n          context.defaultNpcTabs = this.mapTabSelectionFields(\n            NpcSheetRuntime.getAllRegisteredTabs(),\n            [...SettingsProvider.settings.defaultNpcSheetTabs.options.default]\n          );\n          return context;\n        });\n        break;\n      case CONSTANTS.SHEET_TYPE_VEHICLE:\n        store.update((context) => {\n          context.defaultVehicleTabs = this.mapTabSelectionFields(\n            VehicleSheetRuntime.getAllRegisteredTabs(),\n            [\n              ...SettingsProvider.settings.defaultVehicleSheetTabs.options\n                .default,\n            ]\n          );\n          return context;\n        });\n        break;\n    }\n  }\n}\n","<script lang=\"ts\">\n  import ButtonMenuItem from 'src/components/button-menu/ButtonMenuItem.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import { getCoreThemes } from 'src/theme/theme-reference';\n\n  const themes = Object.entries(getCoreThemes(true));\n\n  const idSuffix = Date.now().toString();\n\n  function setTheme(value: string) {\n    FoundryAdapter.setTidySetting('colorScheme', value);\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ButtonMenuItem cssClass=\"flex-column extra-small-gap\">\n  <label class=\"theme-label\" for=\"sheet-menu-{idSuffix}\">\n    {localize('TIDY5E.SheetMenu.themeLabel')}\n  </label>\n  <select\n    id=\"sheet-menu-{idSuffix}\"\n    on:change={(ev) => setTheme(ev.currentTarget.value)}\n    value={$settingStore.colorScheme}\n  >\n    {#each themes as [key, value]}\n      <option value={key}>{localize(value)}</option>\n    {/each}\n  </select>\n</ButtonMenuItem>\n\n<style lang=\"scss\">\n  .theme-label {\n    font-weight: 600;\n    margin-top: -0.5rem;\n    font-size: 0.875rem;\n  }\n\n  select {\n    font-size: 0.875rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import ButtonMenu from 'src/components/button-menu/ButtonMenu.svelte';\n  import ButtonMenuCommand from 'src/components/button-menu/ButtonMenuCommand.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { createEventDispatcher, getContext } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import type { CurrentSettings } from 'src/settings/settings';\n  import ThemeSelectorButtonMenuCommand from 'src/sheets/shared/ThemeSelectorButtonMenuCommand.svelte';\n  import ButtonMenuDivider from 'src/components/button-menu/ButtonMenuDivider.svelte';\n  import type { ThemeSettingsSheetFunctions } from './ThemeSettingsFormApplication';\n\n  let functions = getContext<ThemeSettingsSheetFunctions>(CONSTANTS.SVELTE_CONTEXT.FUNCTIONS);\n  let context = getContext<Writable<CurrentSettings>>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n  const dispatch = createEventDispatcher<{\n    selectFile: File;\n  }>();\n\n  let fileImportInput: HTMLInputElement;\n\n  const localize = FoundryAdapter.localize;\n\n  function onFileChanged(\n    ev: Event & {\n      currentTarget: EventTarget & HTMLInputElement;\n    }\n  ) {\n    const file = ev.currentTarget.files?.[0];\n\n    ev.currentTarget.value = '';\n\n    if (!file) {\n      return;\n    }\n\n    dispatch('selectFile', file);\n  }\n</script>\n\n<ButtonMenu\n  iconClass={{\n    opened: 'fas fa-caret-up',\n    closed: 'fas fa-caret-down',\n  }}\n  position=\"bottom\"\n  anchor=\"right\"\n  openerPadding=\"0.125rem 0.5rem\"\n  buttonText={localize('TIDY5E.ThemeSettings.Sheet.menuLabel')}\n>\n  <ThemeSelectorButtonMenuCommand />\n  <ButtonMenuDivider />\n  <ButtonMenuCommand\n    on:click={() => fileImportInput.click()}\n    iconClass=\"fas fa-file-import\"\n  >\n    {localize('TIDY5E.ThemeSettings.Sheet.import')}\n  </ButtonMenuCommand>\n  <ButtonMenuCommand\n    on:click={() => functions.exportTheme($context)}\n    iconClass=\"fas fa-file-export\"\n  >\n    {localize('TIDY5E.ThemeSettings.Sheet.export')}\n  </ButtonMenuCommand>\n  <ButtonMenuCommand\n    on:click={() =>\n      functions.useExistingThemeColors(CONSTANTS.THEME_ID_DEFAULT_LIGHT)}\n    iconClass=\"fas fa-sun\"\n  >\n    {localize('TIDY5E.ThemeSettings.Sheet.useDefaultLightColors')}\n  </ButtonMenuCommand>\n  <ButtonMenuCommand\n    on:click={() =>\n      functions.useExistingThemeColors(CONSTANTS.THEME_ID_DEFAULT_DARK)}\n    iconClass=\"fas fa-moon\"\n  >\n    {localize('TIDY5E.ThemeSettings.Sheet.useDefaultDarkColors')}\n  </ButtonMenuCommand>\n</ButtonMenu>\n<input\n  class=\"theme-import-input\"\n  type=\"file\"\n  accept={CONSTANTS.THEME_EXTENSION_WITH_DOT}\n  on:change={onFileChanged}\n  bind:this={fileImportInput}\n/>\n\n<style lang=\"scss\">\n  .theme-import-input {\n    display: none;\n  }\n</style>\n","<script>import { createEventDispatcher } from 'svelte';\n/** min value of the slider */\nexport let min = 0;\n$: _min = typeof min === 'string' ? parseFloat(min) : min;\n/** max value of the slider */\nexport let max = 100;\n$: _max = typeof max === 'string' ? parseFloat(max) : max;\n/** step value of the slider */\nexport let step = 1;\n$: _step = typeof step === 'string' ? parseFloat(step) : step;\n/** value of the slider */\nexport let value = 50;\n/**\n * method to convert the current value to a string representation of the value for the `aria-valuetext` attribute.\n * For example, a battery meter value might be conveyed as aria-valuetext=\"8% (34 minutes) remaining\".\n * See [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-valuetext)\n */\nexport let ariaValueText = (current) => current.toString();\n/** input name of the slider */\nexport let name = undefined;\n/** direction of the slider */\nexport let direction = 'horizontal';\n/** if true, the min and max values will be reversed */\nexport let reverse = false;\n/** disables mouse events */\nexport let keyboardOnly = false;\n/** div element representing the slider */\nexport let slider = undefined;\n/** aria-label props */\nexport let ariaLabel = undefined;\n/** aria-labelledby props */\nexport let ariaLabelledBy = undefined;\n/** aria-controls props */\nexport let ariaControls = undefined;\n/** indicate if the slider is being dragged */\nexport let isDragging = false;\nconst dispatch = createEventDispatcher();\nfunction bound(value) {\n    const ratio = 1 / _step;\n    const rounded = Math.round(value * ratio) / ratio;\n    return Math.max(_min, Math.min(_max, rounded));\n}\nfunction keyHandler(e) {\n    const inc = e.shiftKey ? _step * 10 : _step;\n    if (e.key === 'ArrowUp' || e.key === 'ArrowRight') {\n        value += inc;\n        e.preventDefault();\n    }\n    else if (e.key === 'ArrowDown' || e.key === 'ArrowLeft') {\n        value -= inc;\n        e.preventDefault();\n    }\n    else if (e.key === 'Home') {\n        value = _min;\n        e.preventDefault();\n    }\n    else if (e.key === 'End') {\n        value = _max;\n        e.preventDefault();\n    }\n    else if (e.key === 'PageUp') {\n        value += _step * 10;\n        e.preventDefault();\n    }\n    else if (e.key === 'PageDown') {\n        value -= _step * 10;\n        e.preventDefault();\n    }\n    value = bound(value);\n    dispatch('input', value);\n}\nconst config = {\n    horizontal: {\n        clientSize: 'clientWidth',\n        offset: 'left',\n        client: 'clientX'\n    },\n    vertical: {\n        clientSize: 'clientHeight',\n        offset: 'top',\n        client: 'clientY'\n    }\n};\nfunction updateValue(e) {\n    const clientWidth = slider?.[config[direction].clientSize] || 120;\n    const sliderOffsetX = slider?.getBoundingClientRect()[config[direction].offset] || 0;\n    let offsetX = e[config[direction].client] - sliderOffsetX;\n    if (direction === 'vertical')\n        offsetX = -1 * offsetX + clientWidth;\n    if (reverse) {\n        value = _max - (offsetX / clientWidth) * (_max - _min);\n    }\n    else {\n        value = (offsetX / clientWidth) * (_max - _min) + _min;\n    }\n    value = bound(value);\n    dispatch('input', value);\n}\nfunction jump(e) {\n    updateValue(e);\n    isDragging = true;\n}\nfunction drag(e) {\n    if (isDragging)\n        updateValue(e);\n}\nfunction endDrag() {\n    isDragging = false;\n}\nfunction touch(e) {\n    updateValue({\n        clientX: e.changedTouches[0].clientX,\n        clientY: e.changedTouches[0].clientY\n    });\n}\n$: position = (((value - _min) / (_max - _min)) * 1).toFixed(4);\n</script>\n\n<svelte:window on:mousemove={drag} on:mouseup={endDrag} />\n\n<div\n\tclass=\"slider\"\n\tclass:reverse\n\trole=\"slider\"\n\taria-orientation={direction}\n\taria-valuemax={_max}\n\taria-valuemin={_min}\n\taria-valuenow={value}\n\taria-valuetext={ariaValueText(value)}\n\taria-label={ariaLabel}\n\taria-labelledby={ariaLabelledBy}\n\taria-controls={ariaControls}\n\ttabindex=\"0\"\n\tbind:this={slider}\n\tstyle:--position={position}\n\ton:keydown={keyHandler}\n\ton:mousedown|self={keyboardOnly ? undefined : jump}\n\ton:touchstart|nonpassive|preventDefault={keyboardOnly ? undefined : touch}\n\ton:touchmove|nonpassive|preventDefault={keyboardOnly ? undefined : touch}\n\ton:touchend|nonpassive|preventDefault={keyboardOnly ? undefined : touch}\n>\n\t<div class=\"track\" />\n\t<div class=\"thumb\" />\n</div>\n\n{#if name}\n\t<input type=\"hidden\" {name} {value} />\n{/if}\n\n<!-- @component\n\n**Props**\n@prop min: string | number = 0 — min value of the slider\n@prop max: string | number = 100 — max value of the slider\n@prop step: string | number = 1 — step value of the slider\n@prop value: number = 50 — value of the slider\n@prop ariaValueText: (current: number) =&gt; string = (current) => current.toString() — method to convert the current value to a string representation of the value for the `aria-valuetext` attribute. For example, a battery meter value might be conveyed as aria-valuetext=\"8% (34 minutes) remaining\". See [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-valuetext)\n@prop name: string | undefined = undefined — input name of the slider\n@prop direction: 'horizontal' | 'vertical' = 'horizontal' — direction of the slider\n@prop reverse: boolean = false — if true, the min and max values will be reversed\n@prop keyboardOnly: boolean = false — disables mouse events\n@prop slider: HTMLDivElement | undefined = undefined — div element representing the slider\n@prop ariaLabel: string | undefined = undefined — aria-label props\n@prop ariaLabelledBy: string | undefined = undefined — aria-labelledby props\n@prop isDragging: boolean = false — indicate if the slider is being dragged\n-->\n\n<style>\n\t.slider {\n\t\t---track-width: var(--track-width, unset);\n\t\t---track-height: var(--track-height, 6px);\n\t\t---track-background: var(--track-background, #949494);\n\t\t---track-border: var(--track-border, none);\n\t\t---thumb-size: var(--thumb-size, 16px);\n\t\t---thumb-background: var(--thumb-background, #2d2d2d);\n\t\t---thumb-border: var(--thumb-border, none);\n\t\t---position: var(--position, 0px);\n\n\t\t---margin-inline-thumb-bigger: max(var(---thumb-size) - var(---track-height), 0px);\n\t\t---margin-inline-thumb-smaller: max(var(---track-height) - var(---thumb-size), 0px);\n\n\t\tposition: relative;\n\t\tmargin: auto;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t}\n\n\t[aria-orientation='horizontal'] {\n\t\twidth: var(---track-width);\n\t\tmax-width: calc(100% - 2 * var(---margin-inline-thumb-bigger));\n\t\theight: calc(max(var(---track-height), var(---thumb-size)) + 4px);\n\t\theight: max(var(---track-height), var(---thumb-size));\n\t\tmargin-inline: var(---margin-inline-thumb-bigger);\n\t\tmargin-block: var(--margin-block, 8px);\n\t}\n\n\t[aria-orientation='vertical'] {\n\t\twidth: calc(max(var(---track-height), var(---thumb-size)) + 4px);\n\t\twidth: max(var(---track-height), var(---thumb-size));\n\t\theight: var(---track-width);\n\t\tmax-height: calc(100% - 2 * var(---margin-inline-thumb-bigger));\n\t\tmargin-block: var(---margin-inline-thumb-bigger);\n\t\tmargin-inline: var(--margin-block, 8px);\n\t}\n\n\t.track {\n\t\tposition: absolute;\n\t\tpointer-events: none;\n\t\tbackground: var(---track-background);\n\t\tborder: var(---track-border);\n\t\tborder-radius: calc(var(---track-height) / 2);\n\t\tbox-sizing: border-box;\n\t}\n\n\t[aria-orientation='horizontal'] .track {\n\t\theight: var(---track-height);\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tleft: 0;\n\t\tright: 0;\n\t}\n\n\t[aria-orientation='vertical'] .track {\n\t\twidth: var(---track-height);\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\ttop: 0;\n\t\tbottom: 0;\n\t}\n\n\t.thumb {\n\t\tpointer-events: none;\n\t\tposition: absolute;\n\t\theight: var(---thumb-size);\n\t\twidth: var(---thumb-size);\n\t\tborder-radius: calc(var(---thumb-size) / 2);\n\t\tbackground: var(---thumb-background);\n\t\tborder: var(---thumb-border);\n\t\tbox-sizing: border-box;\n\n\t\ttransform: translate(-50%, -50%);\n\t\t--margin-left: (\n\t\t\t\t2 * var(---track-height) - var(---thumb-size) - var(---margin-inline-thumb-smaller)\n\t\t\t) / 2;\n\t\t--left: calc(var(---position) * (100% - 2 * var(--margin-left)) + var(--margin-left));\n\t}\n\n\t[aria-orientation='horizontal']:not(.reverse) .thumb {\n\t\ttop: 50%;\n\t\tleft: var(--left);\n\t}\n\n\t[aria-orientation='vertical']:not(.reverse) .thumb {\n\t\tleft: 50%;\n\t\tbottom: calc(var(--left) - var(---thumb-size));\n\t}\n\n\t[aria-orientation='horizontal'].reverse .thumb {\n\t\ttop: 50%;\n\t\tright: calc(var(--left) - var(---thumb-size));\n\t}\n\n\t[aria-orientation='vertical'].reverse .thumb {\n\t\tleft: 50%;\n\t\ttop: calc(var(--left));\n\t}\n\n\t.slider:focus-visible {\n\t\toutline: none;\n\t}\n\n\t.slider:focus-visible .track {\n\t\toutline: 2px solid var(--focus-color, red);\n\t\toutline-offset: 2px;\n\t}\n</style>\n","<script>import { colord } from 'colord';\nimport { Slider } from 'svelte-awesome-slider';\nimport { createEventDispatcher } from 'svelte';\nconst dispatch = createEventDispatcher();\n/** customize the ColorPicker component parts. Can be used to display a Chrome variant or an Accessibility Notice */\nexport let components;\n/** hue value */\nexport let h;\n/** saturation value */\nexport let s;\n/** vibrance value */\nexport let v;\n/** indicator whether the selected color is light or dark */\nexport let isDark;\nlet picker;\nlet isMouseDown = false;\nlet focused = false;\nlet pickerColorBg;\nlet pos = { x: 100, y: 0 };\n$: if (typeof h === 'number')\n    pickerColorBg = colord({ h, s: 100, v: 100, a: 1 }).toHex();\nfunction clamp(value, min, max) {\n    return Math.min(Math.max(min, value), max);\n}\nfunction onClick(e) {\n    const { width, left, height, top } = picker.getBoundingClientRect();\n    const mouse = { x: clamp(e.clientX - left, 0, width), y: clamp(e.clientY - top, 0, height) };\n    s = clamp(mouse.x / width, 0, 1) * 100;\n    v = clamp((height - mouse.y) / height, 0, 1) * 100;\n}\nfunction pickerMousedown(e) {\n    if (e.button === 0) {\n        isMouseDown = true;\n        onClick(e);\n    }\n}\nfunction mouseUp() {\n    isMouseDown = false;\n}\nfunction mouseMove(e) {\n    if (isMouseDown)\n        onClick(e);\n}\nfunction mouseDown(e) {\n    if (!e.target.isSameNode(picker))\n        focused = false;\n}\nfunction touch(e) {\n    e.preventDefault();\n    onClick(e.changedTouches[0]);\n}\n$: if (typeof s === 'number' && typeof v === 'number' && picker)\n    pos = {\n        x: s,\n        y: 100 - v\n    };\n$: dispatch('input', { s, v });\n</script>\n\n<svelte:window on:mouseup={mouseUp} on:mousedown={mouseDown} on:mousemove={mouseMove} />\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<div\n\tclass=\"picker\"\n\tbind:this={picker}\n\ton:mousedown|preventDefault={pickerMousedown}\n\ton:touchstart|nonpassive={touch}\n\ton:touchmove|nonpassive|preventDefault={touch}\n\ton:touchend|nonpassive={touch}\n\tstyle:--picker-color-bg={pickerColorBg}\n>\n\t<svelte:component this={components.pickerIndicator} {pos} {isDark} />\n\t<div class=\"s\" style:--pos-y={pos.y}>\n\t\t<Slider bind:value={s} keyboardOnly ariaValueText={(value) => `${value}%`} ariaLabel=\"saturation color\" />\n\t</div>\n\t<div class=\"v\" style:--pos-x={pos.x}>\n\t\t<Slider\n\t\t\tbind:value={v}\n\t\t\tkeyboardOnly\n\t\t\tariaValueText={(value) => `${value}%`}\n\t\t\tdirection=\"vertical\"\n\t\t\tariaLabel=\"brightness color\"\n\t\t/>\n\t</div>\n</div>\n\n<!-- \n@component Picker wrapper containing the mouse and keyboard logic to select the color. _internal component_ \n\n**Import**\nN.A.\n\n**Use**\nN.A.\n\n**Props**\n@prop components: Components — customize the ColorPicker component parts. Can be used to display a Chrome variant or an Accessibility Notice\n@prop h: number — hue value\n@prop s: number — saturation value\n@prop v: number — vibrance value\n@prop isDark: boolean — indicator whether the selected color is light or dark\n-->\n<style>\n\t.picker {\n\t\tposition: relative;\n\t\tdisplay: inline-block;\n\t\twidth: var(--picker-width, 200px);\n\t\theight: var(--picker-height, 200px);\n\t\tbackground: linear-gradient(#ffffff00, #000000ff), linear-gradient(0.25turn, #ffffffff, #00000000),\n\t\t\tvar(--picker-color-bg);\n\t\tborder-radius: var(--picker-radius, 8px);\n\t\toutline: none;\n\t\tuser-select: none;\n\t}\n\n\t.s,\n\t.v {\n\t\tposition: absolute;\n\t\t--track-background: none;\n\t\t--track-border: none;\n\t\t--thumb-background: none;\n\t\t--thumb-border: none;\n\t\t--thumb-size: 2px;\n\t\t--margin-block: 0;\n\t\t--track-height: var(--picker-indicator-size, 10px);\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t}\n\n\t.s {\n\t\ttop: calc(var(--pos-y) * (var(--picker-height, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);\n\t\tleft: 2px;\n\t\t--track-width: calc(var(--picker-width, 200px) - 4px);\n\t}\n\n\t.v {\n\t\ttop: 2px;\n\t\tleft: calc(var(--pos-x) * (var(--picker-width, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);\n\t\t--track-width: calc(var(--picker-height, 200px) - 4px);\n\t}\n</style>\n","<script>/** indicator position in % */\nexport let pos;\n/** indicator whether the selected color is light or dark */\nexport let isDark;\n</script>\n\n<div class=\"picker-indicator\" class:is-dark={isDark} style:--pos-x={pos.x} style:--pos-y={pos.y} />\n\n<style>\n\tdiv {\n\t\tposition: absolute;\n\t\tleft: calc(var(--pos-x) * (var(--picker-width, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);\n\t\ttop: calc(var(--pos-y) * (var(--picker-height, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);\n\n\t\twidth: var(--picker-indicator-size, 10px);\n\t\theight: var(--picker-indicator-size, 10px);\n\t\tbackground-color: white;\n\t\tbox-shadow: 0 0 4px black;\n\t\tborder-radius: 50%;\n\n\t\tpointer-events: none;\n\t\tz-index: 1;\n\t\ttransition: box-shadow 0.2s;\n\t}\n\t.is-dark {\n\t\tbox-shadow: 0 0 4px white;\n\t}\n</style>\n","<script>import { createEventDispatcher } from 'svelte';\nconst dispatch = createEventDispatcher();\n/** if set to false, disables the alpha channel */\nexport let isAlpha;\n/** rgb color */\nexport let rgb;\n/** hsv color */\nexport let hsv;\n/** hex color */\nexport let hex;\n/** configure which hex, rgb and hsv inputs will be visible and in which order. If overridden, it is necessary to provide at least one value */\nexport let textInputModes;\n/** all translation tokens used in the library; can be partially overridden; see [full object type](https://github.com/Ennoriel/svelte-awesome-color-picker/blob/master/src/lib/utils/texts.ts) */\nexport let texts;\nconst HEX_COLOR_REGEX = /^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;\nlet mode = textInputModes[0] || 'hex';\n$: nextMode = textInputModes[(textInputModes.indexOf(mode) + 1) % textInputModes.length];\n$: h = Math.round(hsv.h);\n$: s = Math.round(hsv.s);\n$: v = Math.round(hsv.v);\n$: a = hsv.a === undefined ? 1 : Math.round(hsv.a * 100) / 100;\nfunction updateHex(e) {\n    const target = e.target;\n    if (HEX_COLOR_REGEX.test(target.value)) {\n        hex = target.value;\n        dispatch('input', { hex });\n    }\n}\nfunction updateRgb(property) {\n    return function (e) {\n        rgb = { ...rgb, [property]: parseFloat(e.target.value) };\n        dispatch('input', { rgb });\n    };\n}\nfunction updateHsv(property) {\n    return function (e) {\n        hsv = { ...hsv, [property]: parseFloat(e.target.value) };\n        dispatch('input', { hsv });\n    };\n}\n</script>\n\n<div class=\"text-input\">\n\t<div class=\"input-container\">\n\t\t{#if mode === 'hex'}\n\t\t\t<input aria-label={texts.label.hex} value={hex} on:input={updateHex} style:flex={3} />\n\t\t{:else if mode === 'rgb'}\n\t\t\t<input aria-label={texts.label.r} value={rgb.r} type=\"number\" min=\"0\" max=\"255\" on:input={updateRgb('r')} />\n\t\t\t<input aria-label={texts.label.g} value={rgb.g} type=\"number\" min=\"0\" max=\"255\" on:input={updateRgb('g')} />\n\t\t\t<input aria-label={texts.label.b} value={rgb.b} type=\"number\" min=\"0\" max=\"255\" on:input={updateRgb('b')} />\n\t\t{:else}\n\t\t\t<input aria-label={texts.label.h} value={h} type=\"number\" min=\"0\" max=\"360\" on:input={updateHsv('h')} />\n\t\t\t<input aria-label={texts.label.s} value={s} type=\"number\" min=\"0\" max=\"100\" on:input={updateHsv('s')} />\n\t\t\t<input aria-label={texts.label.v} value={v} type=\"number\" min=\"0\" max=\"100\" on:input={updateHsv('v')} />\n\t\t{/if}\n\t\t{#if isAlpha}\n\t\t\t<input\n\t\t\t\taria-label={texts.label.a}\n\t\t\t\tvalue={a}\n\t\t\t\ttype=\"number\"\n\t\t\t\tmin=\"0\"\n\t\t\t\tmax=\"1\"\n\t\t\t\tstep=\"0.01\"\n\t\t\t\ton:input={mode === 'hsv' ? updateHsv('a') : updateRgb('a')}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\n\t{#if textInputModes.length > 1}\n\t\t<button type=\"button\" on:click={() => (mode = nextMode)}>\n\t\t\t<span class=\"disappear\" aria-hidden=\"true\">{texts.color[mode]}</span>\n\t\t\t<span class=\"appear\">{texts.changeTo} {nextMode}</span>\n\t\t</button>\n\t{:else}\n\t\t<div class=\"button-like\">{texts.color[mode]}</div>\n\t{/if}\n</div>\n\n<!-- \n@component text inputs for the hex, rgb and hsv colors. This component cannot be imported\ndirectly but can be overridden.\n\n**Import**\n_N.A._\n\n**Use**\n_N.A._\n\n**Props**\n@prop isAlpha: boolean — if set to false, disables the alpha channel\n@prop rgb: RgbaColor — rgb color\n@prop hsv: HsvaColor — hsv color\n@prop hex: string — hex color\n@prop textInputModes: Array&lt;'hex' | 'rgb' | 'hsv'&gt; — configure which hex, rgb and hsv inputs will be visible and in which order. If overridden, it is necessary to provide at least one value\n@prop texts: Texts — all translation tokens used in the library; can be partially overridden; see [full object type](https://github.com/Ennoriel/svelte-awesome-color-picker/blob/master/src/lib/utils/texts.ts)\n-->\n<style>\n\t.text-input {\n\t\tmargin: var(--text-input-margin, 5px 0 0);\n\t}\n\t.input-container {\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t\tgap: 10px;\n\t}\n\tinput,\n\tbutton,\n\t.button-like {\n\t\tflex: 1;\n\t\tborder: none;\n\t\tbackground-color: var(--cp-input-color, #eee);\n\t\tcolor: var(--cp-text-color, var(--cp-border-color));\n\t\tpadding: 0;\n\t\tborder-radius: 5px;\n\t\theight: 30px;\n\t\tline-height: 30px;\n\t\ttext-align: center;\n\t}\n\tinput {\n\t\twidth: 5px;\n\t\tfont-family: inherit;\n\t}\n\n\tbutton,\n\t.button-like {\n\t\tposition: relative;\n\t\tflex: 1;\n\t\tmargin: 8px 0 0;\n\t\theight: 30px;\n\t\twidth: 100%;\n\t\ttransition: background-color 0.2s;\n\t\tcursor: pointer;\n\t\tfont-family: inherit;\n\t}\n\n\t.button-like {\n\t\tcursor: default;\n\t}\n\n\t.appear,\n\t.disappear {\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\twidth: 100%;\n\t\ttransition: all 0.5s;\n\t}\n\tbutton:hover .disappear,\n\t.appear {\n\t\topacity: 0;\n\t}\n\n\t.disappear,\n\tbutton:hover .appear {\n\t\topacity: 1;\n\t}\n\n\tbutton:hover {\n\t\tbackground-color: var(--cp-button-hover-color, #ccc);\n\t}\n\n\tinput:focus,\n\tbutton:focus {\n\t\toutline: none;\n\t}\n\n\tinput:focus-visible,\n\tbutton:focus-visible {\n\t\toutline: 2px solid var(--focus-color, red);\n\t\toutline-offset: 2px;\n\t}\n</style>\n","<script>/** DOM element of the label wrapper */\nexport let labelElement;\n/** hex color */\nexport let hex;\n/** input label */\nexport let label;\n/** input name, useful in a native form */\nexport let name = undefined;\n/* svelte-ignore unused-export-let /** indicator of the popup state */\nexport let isOpen;\nfunction noop() {\n    /* prevent browser color picker from opening unless javascript is broken */\n}\n</script>\n\n<!-- svelte-ignore a11y-no-noninteractive-element-interactions a11y-click-events-have-key-events -->\n<label bind:this={labelElement} on:click|preventDefault={noop} on:mousedown|preventDefault={noop}>\n\t<div class=\"container\">\n\t\t<input\n\t\t\ttype=\"color\"\n\t\t\t{name}\n\t\t\tvalue={hex}\n\t\t\ton:click|preventDefault={noop}\n\t\t\ton:mousedown|preventDefault={noop}\n\t\t\taria-haspopup=\"dialog\"\n\t\t/>\n\t\t<div class=\"alpha\" />\n\t\t<div class=\"color\" style:background={hex} />\n\t</div>\n\t{label}\n</label>\n\n<!-- \n@component button to open the color picker. Also provides a hidden input with the hex value selected by the user\nto fallback to color picker to the default browser one if a problem happens. This component cannot be imported\ndirectly but can be overridden.\n\n**Import**\n_N.A._\n\n**Use**\n_N.A._\n\n**Props**\n@prop labelElement: HTMLLabelElement — DOM element of the label wrapper\n@prop hex: string | undefined — hex color\n@prop label: string — input label\n@prop name: string | undefined = undefined — input name, useful in a native form\n@prop isOpen: boolean — indicator of the popup state\n-->\n<style>\n\tlabel {\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\tgap: 8px;\n\t\tcursor: pointer;\n\t\tborder-radius: 3px;\n\t\tmargin: 4px;\n\t\theight: var(--input-size, 25px);\n\t\tuser-select: none;\n\t}\n\n\t.container {\n\t\tposition: relative;\n\t\tdisplay: block;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: var(--input-size, 25px);\n\t}\n\n\tinput {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tborder: none;\n\t\twidth: 1px;\n\t\theight: 1px;\n\t\tflex-shrink: 0;\n\t\topacity: 0;\n\t}\n\n\t.alpha {\n\t\tclip-path: circle(50%);\n\t\tbackground: var(--alpha-grid-bg);\n\t}\n\n\t.alpha,\n\t.color {\n\t\tposition: absolute;\n\t\twidth: var(--input-size, 25px);\n\t\theight: var(--input-size, 25px);\n\t\tborder-radius: 50%;\n\t\tuser-select: none;\n\t}\n\n\tinput:focus-visible ~ .color {\n\t\toutline: 2px solid var(--focus-color, red);\n\t\toutline-offset: 2px;\n\t}\n</style>\n","<script>/** DOM element of the wrapper element */\nexport let wrapper;\n/** indicator of the popup state */\nexport let isOpen;\n/** if set to true, the wrapper should have a dialog role and be absolute. It should be relative otherwise */\nexport let isDialog;\n</script>\n\n<div\n\tbind:this={wrapper}\n\tclass=\"wrapper\"\n\tclass:is-open={isOpen}\n\trole={isDialog ? 'dialog' : undefined}\n\taria-label=\"color picker\"\n>\n\t<slot />\n</div>\n\n<!-- \n@component Default variant wrapper\n\n**Import**\nthis component is the default variant and cannot be imported\n\n**Use**\nN.A.\n\n**Props**\n@prop wrapper: HTMLElement — DOM element of the wrapper element\n@prop isOpen: boolean — indicator of the popup state\n@prop isDialog: boolean — if set to true, the wrapper should have a dialog role and be absolute. It should be relative otherwise\n-->\n<style>\n\tdiv {\n\t\tpadding: 8px;\n\t\tbackground-color: var(--cp-bg-color, white);\n\t\tmargin: 0 10px 10px;\n\t\tborder: 1px solid var(--cp-border-color, black);\n\t\tborder-radius: 12px;\n\t\tdisplay: none;\n\t\twidth: max-content;\n\t}\n\t.is-open {\n\t\tdisplay: inline-block;\n\t}\n\t[role='dialog'] {\n\t\tposition: absolute;\n\t\ttop: calc(var(--input-size, 25px) + 12px);\n\t\tleft: 0;\n\t\tz-index: var(--picker-z-index, 2);\n\t}\n</style>\n","export const defaultTexts = {\n    label: {\n        h: 'hue channel',\n        s: 'saturation channel',\n        v: 'brightness channel',\n        r: 'red channel',\n        g: 'green channel',\n        b: 'blue channel',\n        a: 'alpha channel',\n        hex: 'hex color',\n        withoutColor: 'without color'\n    },\n    color: {\n        rgb: 'rgb',\n        hsv: 'hsv',\n        hex: 'hex'\n    },\n    changeTo: 'change to '\n};\nexport const defaultA11yTexts = {\n    contrast: 'contrast :',\n    nbGradeSummary: (count) => count ? `⚠️ ${count} contrast grade${count && 's'} fail` : 'Contrast grade information',\n    guidelines: `Learn more at <a href=\"https://webaim.org/articles/contrast/\" target=\"_blank\">WebAIM contrast guide</a>`\n};\n","// list taken from https://github.com/nico3333fr/van11y-accessible-modal-tooltip-aria/blob/1a83366c65358222483be849fbb768c31cefaf4d/src/van11y-accessible-modal-tooltip-aria.es6.js#L47\nexport const FOCUSABLE_ELEMENTS = \"a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]\";\n// code adapted from https://gist.github.com/JulienPradet/20dbb7ca06cbd9e2ec499bb2206aab55#file-trapfocus-ts-L1-L44\nfunction trapFocusListener(trapFocusElement) {\n    return function (event) {\n        if (event.target === window) {\n            return;\n        }\n        const eventTarget = event.target;\n        if (!trapFocusElement.contains(eventTarget)) {\n            return;\n        }\n        const focusable = trapFocusElement.querySelectorAll(FOCUSABLE_ELEMENTS);\n        const first = focusable[0];\n        const last = focusable[focusable.length - 1];\n        function isNext(event) {\n            return event.code === 'Tab' && !event.shiftKey;\n        }\n        function isPrevious(event) {\n            return event.code === 'Tab' && event.shiftKey;\n        }\n        if (isNext(event) && event.target === last) {\n            event.preventDefault();\n            first.focus();\n        }\n        else if (isPrevious(event) && event.target === first) {\n            event.preventDefault();\n            last.focus();\n        }\n    };\n}\nexport const trapFocus = (node) => {\n    const first = node.querySelector(FOCUSABLE_ELEMENTS);\n    if (first)\n        first.focus();\n    const listener = trapFocusListener(node);\n    document.addEventListener('keydown', listener);\n    return {\n        destroy() {\n            document.removeEventListener('keydown', listener);\n        }\n    };\n};\n","<script>/** whether the color picker is undefined */\nexport let isUndefined;\n/** all translation tokens used in the library; can be partially overridden; see [full object type](https://github.com/Ennoriel/svelte-awesome-color-picker/blob/master/src/lib/utils/texts.ts) */\nexport let texts;\n</script>\n\n<label class=\"nullability-checkbox\">\n\t<div>\n\t\t<input type=\"checkbox\" bind:checked={isUndefined} />\n\t\t<span />\n\t</div>\n\t{texts.label.withoutColor}\n</label>\n\n<style>\n\tlabel {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tmargin-bottom: 4px;\n\t\tgrid-area: nullable;\n\t\tuser-select: none;\n\t}\n\tinput {\n\t\tmargin: 0;\n\t}\n\tinput:focus-visible {\n\t\toutline: none;\n\t}\n\tinput:focus-visible + span {\n\t\twidth: 14px;\n\t\theight: 14px;\n\t\tborder-radius: 2px;\n\t\toutline: 2px solid var(--focus-color, red);\n\t\toutline-offset: 2px;\n\t}\n\n\tdiv {\n\t\twidth: 32px;\n\t\taspect-ratio: 2;\n\t\tposition: relative;\n\t}\n\tdiv * {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n</style>\n","<script>import { createEventDispatcher } from 'svelte';\nimport { colord } from 'colord';\nimport Picker from './Picker.svelte';\nimport { Slider } from 'svelte-awesome-slider';\nimport PickerIndicator from './variant/default/PickerIndicator.svelte';\nimport TextInput from './variant/default/TextInput.svelte';\nimport Input from './variant/default/Input.svelte';\nimport Wrapper from './variant/default/Wrapper.svelte';\nimport { defaultTexts } from '../utils/texts';\nimport { trapFocus } from '../utils/trapFocus';\nimport NullabilityCheckbox from './variant/default/NullabilityCheckbox.svelte';\nconst dispatch = createEventDispatcher();\n/** customize the ColorPicker component parts. Can be used to display a Chrome variant or an Accessibility Notice */\nexport let components = {};\n/** input label, hidden when the ColorPicker is always shown (prop `isDialog={false}`) */\nexport let label = 'Choose a color';\n/** input name, useful in a native form */\nexport let name = undefined;\n/** if set to true, the color picker becomes nullable (rgb, hsv and hex set to undefined) */\nexport let nullable = false;\n/** rgb color */\nexport let rgb = nullable ? undefined : { r: 255, g: 0, b: 0, a: 1 };\n/** hsv color */\nexport let hsv = nullable ? undefined : { h: 0, s: 100, v: 100, a: 1 };\n/** hex color */\nexport let hex = nullable ? undefined : '#ff0000';\n/** Colord color */\nexport let color = undefined;\n/** indicator whether the selected color is light or dark */\nexport let isDark = false;\n/** if set to false, disables the alpha channel */\nexport let isAlpha = true;\n/** if set to false, the input and the label will not be displayed and the ColorPicker will always be visible */\nexport let isDialog = true;\n/** indicator of the popup state */\nexport let isOpen = !isDialog;\n/** if set to false, hide the hex, rgb and hsv text inputs */\nexport let isTextInput = true;\n/** configure which hex, rgb and hsv inputs will be visible and in which order. If overridden, it is necessary to provide at least one value */\nexport let textInputModes = ['hex', 'rgb', 'hsv'];\n/** If set to \"horizontal\", the hue and alpha sliders will be displayed horizontally. It is necessary to set this props to \"horizontal\" for the ChromeVariant */\nexport let sliderDirection = 'vertical';\n/** If set to true, it will not be possible to close the color picker by clicking outside */\nexport let disableCloseClickOutside = false;\n/** used with the A11yVariant. Define the accessibility examples in the color picker */\nexport let a11yColors = [{ bgHex: '#ffffff' }];\n/** required WCAG contrast level */\nexport let a11yLevel = 'AA';\n/** all translation tokens used in the library; can be partially overridden; see [full object type](https://github.com/Ennoriel/svelte-awesome-color-picker/blob/master/src/lib/utils/texts.ts) */\nexport let texts = undefined;\n/** all a11y translation tokens used in the library; override with translations if necessary; see [full object type](https://github.com/Ennoriel/svelte-awesome-color-picker/blob/master/src/lib/utils/texts.ts) */\nexport let a11yTexts = undefined;\n/**\n * Internal old values to trigger color conversion\n */\nlet _rgb = { r: 255, g: 0, b: 0, a: 1 };\nlet _hsv = { h: 0, s: 100, v: 100, a: 1 };\nlet _hex = '#ff0000';\nlet isUndefined = false;\nlet _isUndefined = isUndefined;\nlet spanElement;\nlet labelElement;\nlet wrapper;\nlet trap = undefined;\nconst default_components = {\n    pickerIndicator: PickerIndicator,\n    textInput: TextInput,\n    input: Input,\n    nullabilityCheckbox: NullabilityCheckbox,\n    wrapper: Wrapper\n};\nfunction getComponents() {\n    return {\n        ...default_components,\n        ...components\n    };\n}\nfunction getTexts() {\n    return {\n        label: {\n            ...defaultTexts.label,\n            ...texts?.label\n        },\n        color: {\n            ...defaultTexts.color,\n            ...texts?.color\n        },\n        changeTo: texts?.changeTo ?? defaultTexts.changeTo\n    };\n}\nfunction mousedown({ target }) {\n    if (isDialog) {\n        if (labelElement.contains(target) || labelElement.isSameNode(target)) {\n            isOpen = !isOpen;\n        }\n        else if (isOpen && !wrapper.contains(target) && !disableCloseClickOutside) {\n            isOpen = false;\n        }\n    }\n}\nfunction keyup({ key, target }) {\n    if (!isDialog) {\n        return;\n    }\n    else if (key === 'Enter' && labelElement.contains(target)) {\n        isOpen = !isOpen;\n        setTimeout(() => {\n            trap = trapFocus(wrapper);\n        });\n    }\n    else if (key === 'Escape' && isOpen) {\n        isOpen = false;\n        if (spanElement.contains(target)) {\n            labelElement?.focus();\n            trap?.destroy();\n        }\n    }\n}\n/**\n * using a function seems to trigger the exported value change only once when all of them has been updated\n * and not just after the hsv change\n */\nfunction updateColor() {\n    if (isUndefined && !_isUndefined) {\n        _isUndefined = true;\n        hsv = rgb = hex = undefined;\n        dispatch('input', { color, hsv, rgb, hex });\n        return;\n    }\n    else if (_isUndefined && !isUndefined) {\n        _isUndefined = false;\n        hsv = _hsv;\n        rgb = _rgb;\n        hex = _hex;\n        dispatch('input', { color, hsv, rgb, hex });\n        return;\n    }\n    if (!hsv && !rgb && !hex) {\n        isUndefined = true;\n        _isUndefined = true;\n        dispatch('input', { color: undefined, hsv, rgb, hex });\n        return;\n    }\n    if (hsv &&\n        rgb &&\n        hsv.h === _hsv.h &&\n        hsv.s === _hsv.s &&\n        hsv.v === _hsv.v &&\n        hsv.a === _hsv.a &&\n        rgb.r === _rgb.r &&\n        rgb.g === _rgb.g &&\n        rgb.b === _rgb.b &&\n        rgb.a === _rgb.a &&\n        hex === _hex) {\n        return;\n    }\n    isUndefined = false;\n    // reinitialize empty alpha values\n    if (hsv && hsv.a === undefined)\n        hsv.a = 1;\n    if (_hsv.a === undefined)\n        _hsv.a = 1;\n    if (rgb && rgb.a === undefined)\n        rgb.a = 1;\n    if (_rgb.a === undefined)\n        _rgb.a = 1;\n    if (hex?.substring(7) === 'ff')\n        hex = hex.substring(0, 7);\n    if (hex?.substring(7) === 'ff')\n        hex = hex.substring(0, 7);\n    // check which color format changed and updates the others accordingly\n    if (hsv && (hsv.h !== _hsv.h || hsv.s !== _hsv.s || hsv.v !== _hsv.v || hsv.a !== _hsv.a)) {\n        color = colord(hsv);\n        rgb = color.toRgb();\n        hex = color.toHex();\n    }\n    else if (rgb && (rgb.r !== _rgb.r || rgb.g !== _rgb.g || rgb.b !== _rgb.b || rgb.a !== _rgb.a)) {\n        color = colord(rgb);\n        hex = color.toHex();\n        hsv = color.toHsv();\n    }\n    else if (hex && hex !== _hex) {\n        color = colord(hex);\n        rgb = color.toRgb();\n        hsv = color.toHsv();\n    }\n    if (color) {\n        isDark = color.isDark();\n    }\n    if (!hex)\n        return;\n    // update old colors\n    _hsv = Object.assign({}, hsv);\n    _rgb = Object.assign({}, rgb);\n    _hex = hex;\n    _isUndefined = isUndefined;\n    dispatch('input', { color, hsv, rgb, hex });\n}\n$: if (hsv || rgb || hex) {\n    updateColor();\n}\n$: isUndefined, updateColor();\nfunction updateLetter(letter) {\n    return (e) => {\n        if (!hsv)\n            hsv = { ..._hsv };\n        hsv[letter] = e.detail;\n    };\n}\nfunction updateLetters(letters) {\n    return (e) => {\n        if (!hsv)\n            hsv = { ..._hsv };\n        letters.forEach((letter) => {\n            if (hsv)\n                hsv[letter] = e.detail[letter];\n        });\n    };\n}\n</script>\n\n<svelte:window on:mousedown={mousedown} on:keyup={keyup} />\n\n<span bind:this={spanElement} class=\"color-picker {sliderDirection}\">\n\t{#if isDialog}\n\t\t<svelte:component this={getComponents().input} bind:labelElement isOpen {hex} {label} {name} />\n\t{:else if name}\n\t\t<input type=\"hidden\" value={hex} {name} />\n\t{/if}\n\t<svelte:component this={getComponents().wrapper} bind:wrapper {isOpen} {isDialog}>\n\t\t{#if nullable}\n\t\t\t<svelte:component this={getComponents().nullabilityCheckbox} bind:isUndefined texts={getTexts()} />\n\t\t{/if}\n\t\t<Picker\n\t\t\tcomponents={getComponents()}\n\t\t\th={hsv?.h ?? _hsv.h}\n\t\t\ts={hsv?.s ?? _hsv.s}\n\t\t\tv={hsv?.v ?? _hsv.v}\n\t\t\ton:input={updateLetters(['s', 'v'])}\n\t\t\t{isDark}\n\t\t/>\n\t\t<div class=\"h\">\n\t\t\t<Slider\n\t\t\t\tmin={0}\n\t\t\t\tmax={360}\n\t\t\t\tstep={1}\n\t\t\t\tvalue={hsv?.h ?? _hsv.h}\n\t\t\t\ton:input={updateLetter('h')}\n\t\t\t\tdirection={sliderDirection}\n\t\t\t\treverse={sliderDirection === 'vertical'}\n\t\t\t\tariaLabel={getTexts().label.h}\n\t\t\t/>\n\t\t</div>\n\t\t{#if isAlpha}\n\t\t\t<div class=\"a\" style:--alphaless-color={(hex ? hex : _hex).substring(0, 7)}>\n\t\t\t\t<Slider\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={1}\n\t\t\t\t\tstep={0.01}\n\t\t\t\t\tvalue={hsv?.a ?? _hsv.a}\n\t\t\t\t\ton:input={updateLetter('a')}\n\t\t\t\t\tdirection={sliderDirection}\n\t\t\t\t\treverse={sliderDirection === 'vertical'}\n\t\t\t\t\tariaLabel={getTexts().label.a}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t{/if}\n\t\t{#if isTextInput}\n\t\t\t<svelte:component\n\t\t\t\tthis={getComponents().textInput}\n\t\t\t\thex={hex ?? _hex}\n\t\t\t\trgb={rgb ?? _rgb}\n\t\t\t\thsv={hsv ?? _hsv}\n\t\t\t\ton:input={({ detail }) => {\n\t\t\t\t\tif (detail.hsv) {\n\t\t\t\t\t\thsv = detail.hsv;\n\t\t\t\t\t} else if (detail.rgb) {\n\t\t\t\t\t\trgb = detail.rgb;\n\t\t\t\t\t} else if (detail.hex) {\n\t\t\t\t\t\thex = detail.hex;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\t{isAlpha}\n\t\t\t\t{textInputModes}\n\t\t\t\ttexts={getTexts()}\n\t\t\t/>\n\t\t{/if}\n\t\t{#if getComponents().a11yNotice}\n\t\t\t<svelte:component\n\t\t\t\tthis={getComponents().a11yNotice}\n\t\t\t\tcomponents={getComponents()}\n\t\t\t\t{a11yColors}\n\t\t\t\thex={hex || '#00000000'}\n\t\t\t\t{a11yTexts}\n\t\t\t\t{a11yLevel}\n\t\t\t/>\n\t\t{/if}\n\t</svelte:component>\n</span>\n\n<!-- \n@component Color Picker Component — default export of the library\n\n**Import**\n```js\nimport ColorPicker from 'svelte-awesome-color-picker';\n```\n\n**Use**\n```svelte\n<ColorPicker bind:hex />\n```\n\n**Props**\n@prop components: Partial&lt;Components&gt; = {} — customize the ColorPicker component parts. Can be used to display a Chrome variant or an Accessibility Notice\n@prop label: string = 'Choose a color' — input label, hidden when the ColorPicker is always shown (prop `isDialog={false}`)\n@prop name: string | undefined = undefined — input name, useful in a native form\n@prop nullable: boolean = false — if set to true, the color picker becomes nullable (rgb, hsv and hex set to undefined)\n@prop rgb: RgbaColor | undefined = nullable ? undefined : { r: 255, g: 0, b: 0, a: 1 } — rgb color\n@prop hsv: HsvaColor | undefined = nullable ? undefined : { h: 0, s: 100, v: 100, a: 1 } — hsv color\n@prop hex: string | undefined = nullable ? undefined : '#ff0000' — hex color\n@prop color: Colord | undefined = undefined — Colord color\n@prop isDark: boolean = false — indicator whether the selected color is light or dark\n@prop isAlpha: boolean = true — if set to false, disables the alpha channel\n@prop isDialog: boolean = true — if set to false, the input and the label will not be displayed and the ColorPicker will always be visible\n@prop isOpen: boolean = !isDialog — indicator of the popup state\n@prop isTextInput: boolean = true — if set to false, hide the hex, rgb and hsv text inputs\n@prop textInputModes: Array&lt;'hex' | 'rgb' | 'hsv'&gt; = ['hex', 'rgb', 'hsv'] — configure which hex, rgb and hsv inputs will be visible and in which order. If overridden, it is necessary to provide at least one value\n@prop sliderDirection: 'horizontal' | 'vertical' = 'vertical' — If set to \"horizontal\", the hue and alpha sliders will be displayed horizontally. It is necessary to set this props to \"horizontal\" for the ChromeVariant\n@prop disableCloseClickOutside: boolean = false — If set to true, it will not be possible to close the color picker by clicking outside\n@prop a11yColors: Array&lt;A11yColor&gt; = [{ bgHex: '#ffffff' }] — used with the A11yVariant. Define the accessibility examples in the color picker\n@prop a11yLevel: 'AA' | 'AAA' = 'AA' — required WCAG contrast level\n@prop texts: TextsPartial | undefined = undefined — all translation tokens used in the library; can be partially overridden; see [full object type](https://github.com/Ennoriel/svelte-awesome-color-picker/blob/master/src/lib/utils/texts.ts)\n@prop a11yTexts: A11yTextsPartial | undefined = undefined — all a11y translation tokens used in the library; override with translations if necessary; see [full object type](https://github.com/Ennoriel/svelte-awesome-color-picker/blob/master/src/lib/utils/texts.ts)\n-->\n<style>\n\tspan {\n\t\tposition: relative;\n\t\tcolor: var(--cp-text-color, var(--cp-border-color));\n\n\t\t--alpha-grid-bg: linear-gradient(45deg, #eee 25%, #0000 25%, #0000 75%, #eee 75%) 0 0 / 10px 10px,\n\t\t\tlinear-gradient(45deg, #eee 25%, #0000 25%, #0000 75%, #eee 75%) 5px 5px / 10px 10px;\n\t}\n\n\t.h,\n\t.a {\n\t\tdisplay: inline-flex;\n\t\tjustify-content: center;\n\t\t--track-height: var(--slider-width, 10px);\n\t\t--track-width: var(--picker-height, 200px);\n\t\t--track-border: none;\n\t\t--thumb-size: calc(var(--slider-width, 10px) - 3px);\n\t\t--thumb-background: white;\n\t\t--thumb-border: 1px solid black;\n\t\t--margin-block: 0;\n\n\t\t--gradient-direction: 0.5turn;\n\t}\n\t.horizontal .h,\n\t.horizontal .a {\n\t\t--track-width: calc(var(--picker-width, 200px) - 12px);\n\n\t\t--gradient-direction: 0.25turn;\n\t\tmargin: 4px 6px;\n\t}\n\t.horizontal .h {\n\t\tmargin-top: 8px;\n\t}\n\t.vertical .h,\n\t.vertical .a {\n\t\tmargin-left: 3px;\n\t}\n\n\t.h {\n\t\tgrid-area: hue;\n\n\t\t--gradient-hue: #ff1500fb, #ffff00 17.2%, #ffff00 18.2%, #00ff00 33.3%, #00ffff 49.5%, #00ffff 51.5%, #0000ff 67.7%,\n\t\t\t#ff00ff 83.3%, #ff0000;\n\t\t--track-background: linear-gradient(var(--gradient-direction), var(--gradient-hue));\n\t}\n\n\t.a {\n\t\tgrid-area: alpha;\n\t\tmargin-top: 2px;\n\n\t\t--track-background: linear-gradient(var(--gradient-direction), rgba(0, 0, 0, 0), var(--alphaless-color)),\n\t\t\tvar(--alpha-grid-bg);\n\t}\n\n\tspan :global(.sr-only) {\n\t\tposition: absolute;\n\t\twidth: 1px;\n\t\theight: 1px;\n\t\tpadding: 0;\n\t\tmargin: -1px;\n\t\toverflow: hidden;\n\t\tclip: rect(0, 0, 0, 0);\n\t\twhite-space: nowrap;\n\t\tborder-width: 0;\n\t}\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ThemeColorSetting } from 'src/types/theme.types';\n  import { getContext, onMount } from 'svelte';\n  import ColorPicker from 'svelte-awesome-color-picker';\n  import type { Writable } from 'svelte/store';\n  import type { CurrentSettings } from 'src/settings/settings';\n  import {\n    settingValueToHexaString,\n    trySetRootCssVariable,\n    colorToHexaString,\n  } from 'src/theme/theme';\n  import { CONSTANTS } from 'src/constants';\n\n  export let colorToConfigure: ThemeColorSetting;\n\n  let appId = getContext(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n  let context = getContext<Writable<CurrentSettings>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let colorPickerIsOpen: boolean = false;\n\n  const eyeDropperEnabled = 'EyeDropper' in window;\n\n  function activateEyeDropper(colorToConfigure: ThemeColorSetting) {\n    if ('EyeDropper' in window) {\n      const EyeDropper = window.EyeDropper as any;\n      const eyeDropper = new EyeDropper();\n      eyeDropper.open().then(({ sRGBHex }: { sRGBHex: string }) => {\n        onColorSelected(colorToConfigure, sRGBHex);\n      });\n    }\n  }\n\n  function onColorSelected(colorToConfigure: ThemeColorSetting, value: string) {\n    const parsedColor = settingValueToHexaString(value);\n    if (!parsedColor) {\n      return;\n    }\n    trySetRootCssVariable(\n      colorToConfigure.cssVariable,\n      value,\n      $context.colorPickerEnabled,\n    );\n    $context = {\n      ...$context,\n      [colorToConfigure.key]: value,\n    };\n  }\n\n  let article: HTMLElement;\n  onMount(() => {\n    // Required in order to prevent unwanted form submissions by the chosen Color Picker.\n    article.querySelectorAll('button').forEach((button) => {\n      if (button.type === 'submit') {\n        button.type = 'button';\n      }\n    });\n  });\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<article bind:this={article}>\n  <div class=\"description\">\n    <label for=\"{colorToConfigure.key}-{appId}\">\n      {localize(colorToConfigure.name)}\n    </label>\n  </div>\n  <div class=\"theme-settings-group flex-row align-items-center extra-small-gap\">\n    <ColorPicker\n      bind:isOpen={colorPickerIsOpen}\n      isDialog={true}\n      label=\"\"\n      hex={settingValueToHexaString(\n        $context[colorToConfigure.key]?.toString() ?? '',\n      ).hexa}\n      on:input={(ev) =>\n        colorPickerIsOpen &&\n        onColorSelected(colorToConfigure, colorToHexaString(ev.detail.color))}\n    />\n    <input\n      type=\"text\"\n      id=\"{colorToConfigure.key}-{appId}\"\n      value={$context[colorToConfigure.key]}\n      class=\"theme-color-textbox\"\n      on:change={(ev) =>\n        onColorSelected(colorToConfigure, ev.currentTarget.value)}\n    />\n    {#if eyeDropperEnabled}\n      <button\n        type=\"button\"\n        class=\"eye-dropper\"\n        on:click={() => activateEyeDropper(colorToConfigure)}\n        ><i class=\"fas fa-eye-dropper\" /></button\n      >\n    {/if}\n  </div>\n</article>\n\n<style lang=\"scss\">\n  article {\n    background: var(--t5e-faintest-color);\n    border-radius: 0.3125rem;\n    margin: 0.125rem 0;\n    padding: 0.25rem;\n\n    label {\n      font-weight: 600;\n      padding-left: 0.25rem;\n    }\n\n    .theme-settings-group {\n      height: 3rem;\n\n      .theme-color-textbox {\n        flex-basis: 10rem;\n        flex: 1;\n      }\n\n      .eye-dropper {\n        flex: 0;\n        line-height: 1.25;\n        padding: 0.25rem 0.375rem;\n      }\n    }\n\n    :global(:is(.color-picker .wrapper)) {\n      color: unset;\n      box-shadow: 0 0 0.25rem 0.125rem var(--t5e-light-color);\n      background: var(--t5e-background);\n    }\n\n    :global(:is(.color-picker .wrapper input)) {\n      background: var(--t5e-faintest-color);\n      color: var(--t5e-primary-font-color);\n    }\n  }\n</style>\n","export function downloadTextFile(filename: string, text: string) {\n  const a = document.createElement('a');\n  const blob = new Blob([text], { type: 'text/json;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  a.setAttribute('href', url);\n  a.setAttribute('download', filename);\n  a.click();\n}\n\nexport function getSingleFileFromDropEvent(\n  ev: DragEvent & {\n    currentTarget: EventTarget & HTMLElement;\n  }\n): File | null {\n  ev.preventDefault();\n\n  let file: File | null = null;\n  if (ev.dataTransfer?.items) {\n    file = ev.dataTransfer.items[0]?.getAsFile();\n  } else if (ev.dataTransfer?.files) {\n    file = ev.dataTransfer.files[0];\n  }\n\n  return file;\n}\n\nexport function readFileAsText(file: File): Promise<string> {\n  return new Promise<string>((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.addEventListener('load', (event) => {\n      try {\n        const result = event.target?.result?.toString();\n        resolve(result ?? '');\n      } catch (e) {\n        reject(e);\n      }\n    });\n\n    fileReader.readAsText(file);\n  });\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CurrentSettings } from 'src/settings/settings';\n  import { getContext, onDestroy } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import type {\n    ThemeColorSetting,\n    Tidy5eThemeDataV1,\n  } from 'src/types/theme.types';\n  import { applyCurrentTheme } from 'src/theme/theme';\n  import { error } from 'src/utils/logging';\n  import ThemeSettingSheetMenu from './ThemeSettingSheetMenu.svelte';\n  import ThemeSettingColorArticle from './ThemeSettingColorArticle.svelte';\n  import {\n    clearTidy5eRootCssVariables,\n    extractSettingsUpdateDeltaFromTheme,\n    trySetRootCssVariable,\n    validateImportFile,\n  } from 'src/theme/theme';\n  import { getSingleFileFromDropEvent, readFileAsText } from 'src/utils/file';\n  import { CONSTANTS } from 'src/constants';\n\n  export let themeableColors: ThemeColorSetting[];\n  $: {\n    if ($context.colorPickerEnabled) {\n      themeableColors.forEach((color) =>\n        trySetRootCssVariable(\n          color.cssVariable,\n          $context[color.key]?.toString(),\n          $context.colorPickerEnabled,\n        ),\n      );\n    } else {\n      clearTidy5eRootCssVariables();\n      applyCurrentTheme(false);\n    }\n  }\n\n  let context = getContext<Writable<CurrentSettings>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let appId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n\n  const localize = FoundryAdapter.localize;\n\n  async function processImportFile(file: File) {\n    try {\n      let result = await readFileAsText(file);\n\n      // Provides backward compatibility with the alpha themes.\n      result = result.replaceAll(`\"--t5ek-`, `\"--t5e-`);\n\n      const theme = JSON.parse(result) as Tidy5eThemeDataV1;\n\n      const isValid = validateImportFile(theme);\n\n      if (!isValid) {\n        throw new Error(`Theme file ${file.name} is in an invalid format.`);\n      }\n\n      const storeUpdateData = extractSettingsUpdateDeltaFromTheme(\n        theme,\n        themeableColors,\n      );\n\n      context.update((settings) => ({\n        ...settings,\n        ...storeUpdateData,\n      }));\n\n      ui.notifications.info(\n        localize('TIDY5E.ThemeSettings.Sheet.importSuccess'),\n      );\n    } catch (e) {\n      ui.notifications.error(\n        localize('TIDY5E.ThemeSettings.Sheet.importError'),\n      );\n      error(\n        'An error occurred while attempting to import a theme file. See the devtools console for more details.',\n        true,\n        e,\n      );\n    }\n  }\n\n  function onDrop(\n    ev: DragEvent & {\n      currentTarget: EventTarget & HTMLElement;\n    },\n  ) {\n    let file = getSingleFileFromDropEvent(ev);\n\n    if (file) {\n      processImportFile(file);\n    }\n  }\n\n  onDestroy(() => {\n    clearTidy5eRootCssVariables();\n  });\n</script>\n\n<section class=\"theme-settings-wrapper\" on:drop={onDrop} aria-label=\"dropzone\">\n  <div class=\"theme-settings-form scroll-container\">\n    <h2 class=\"header flex-row justify-content-space-between\">\n      {localize('TIDY5E.ThemeSettings.Sheet.header')}\n      <ThemeSettingSheetMenu\n        on:selectFile={(ev) => processImportFile(ev.detail)}\n      />\n    </h2>\n\n    <div>\n      <label\n        for=\"colorPickerEnabled-{appId}\"\n        class=\"flex-row align-items-center extra-small-gap\"\n      >\n        <input\n          type=\"checkbox\"\n          id=\"colorPickerEnabled-{appId}\"\n          bind:checked={$context.colorPickerEnabled}\n        />\n        {localize('TIDY5E.Settings.ColorPickerEnabled.name')}\n      </label>\n    </div>\n\n    <p class=\"explanation\">\n      {localize('TIDY5E.ThemeSettings.Sheet.explanation')}\n    </p>\n\n    <p class=\"explanation drop-hint\">\n      {localize('TIDY5E.ThemeSettings.Sheet.importDropHint')}\n    </p>\n\n    <div class=\"color-pickers\">\n      {#each themeableColors as colorToConfigure}\n        <ThemeSettingColorArticle {colorToConfigure} />\n      {/each}\n    </div>\n  </div>\n  <div class=\"button-bar\">\n    <button type=\"submit\" class=\"save-changes-btn\">\n      <i class=\"fas fa-save\" />\n      {localize('TIDY5E.SaveChanges')}\n    </button>\n  </div>\n</section>\n\n<style lang=\"scss\">\n  .theme-settings-wrapper {\n    display: flex;\n    flex-direction: column;\n    gap: 0.25rem;\n    height: 100%;\n    margin-right: -0.25rem;\n\n    .header {\n      margin: 0;\n    }\n\n    .explanation {\n      margin: 0 0.5rem;\n    }\n\n    .drop-hint {\n      font-size: 0.75rem;\n      color: var(--t5e-secondary-color);\n    }\n\n    .theme-settings-form {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n      padding-right: 0.5rem;\n    }\n\n    .button-bar {\n      display: flex;\n      flex-direction: column;\n      gap: 0.25rem;\n      margin-right: 0.75rem;\n\n      button {\n        margin: 0;\n      }\n    }\n  }\n</style>\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport {\n  getCurrentSettings,\n  type CurrentSettings,\n} from 'src/settings/settings';\nimport {\n  applyCurrentTheme,\n  getThemeOrDefault,\n  getThemeableColors,\n} from 'src/theme/theme';\nimport type { ThemeColorSetting, Tidy5eThemeDataV1 } from 'src/types/theme.types';\nimport type { SvelteComponent } from 'svelte';\nimport { get, writable, type Writable } from 'svelte/store';\nimport ThemeSettingsSheet from './ThemeSettingsSheet.svelte';\nimport { downloadTextFile } from 'src/utils/file';\nimport { CONSTANTS } from 'src/constants';\nimport SvelteFormApplicationBase from 'src/applications/SvelteFormApplicationBase';\n\nexport type ThemeSettingsSheetFunctions = {\n  save(settings: CurrentSettings): Promise<unknown>;\n  useExistingThemeColors(themeId: string): void;\n  exportTheme(settings: CurrentSettings): void;\n};\n\nexport class ThemeSettingsFormApplication extends SvelteFormApplicationBase {\n  themeableColors: ThemeColorSetting[] = getThemeableColors();\n  context: Writable<CurrentSettings> = writable(getCurrentSettings());\n\n  static get defaultOptions() {\n    return {\n      ...super.defaultOptions,\n      height: 750,\n      width: 400,\n      submitOnClose: false,\n      minimizable: true,\n      id: 'tidy-5e-sheets-theme-settings',\n      popOut: true,\n      resizable: true,\n    };\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.ThemeSettings.Sheet.title', {\n      userName: game.user.name,\n    });\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    return new ThemeSettingsSheet({\n      target: node,\n      props: {\n        themeableColors: this.themeableColors,\n      },\n      context: new Map<any, any>([\n        ['context', this.context],\n        [\n          'functions',\n          {\n            save: this.saveChangedSettings.bind(this),\n            useExistingThemeColors: this.useExistingThemeColors.bind(this),\n            exportTheme: this.exportTheme.bind(this),\n          } satisfies ThemeSettingsSheetFunctions,\n        ],\n        ['appId', this.appId],\n      ]),\n    });\n  }\n\n  refreshContext(): void {\n    this.context.set(getCurrentSettings());\n  }\n\n  async saveChangedSettings(newSettings: CurrentSettings) {\n    for (let color of this.themeableColors) {\n      await FoundryAdapter.setTidySetting(color.key, newSettings[color.key]);\n    }\n\n    await FoundryAdapter.setTidySetting(\n      'colorPickerEnabled',\n      newSettings.colorPickerEnabled\n    );\n\n    applyCurrentTheme();\n\n    this.close();\n  }\n\n  useExistingThemeColors(themeId: string) {\n    const targetTheme = getThemeOrDefault(themeId);\n\n    const colorsToUpdate = this.themeableColors.reduce<Record<string, unknown>>(\n      (prev, color) => {\n        prev[color.key] = targetTheme.variables[color.cssVariable];\n        return prev;\n      },\n      {}\n    );\n\n    this.context.update((current) => {\n      return {\n        ...current,\n        ...colorsToUpdate,\n      };\n    });\n  }\n\n  exportTheme(settings: CurrentSettings) {\n    const variables = this.themeableColors.reduce<Record<string, string>>(\n      (prev, curr) => {\n        prev[curr.cssVariable] = settings[curr.key]?.toString();\n        return prev;\n      },\n      {}\n    );\n\n    const exportData: Tidy5eThemeDataV1 = {\n      version: 1,\n      variables,\n    };\n\n    downloadTextFile(\n      'theme' + CONSTANTS.THEME_EXTENSION_WITH_DOT,\n      JSON.stringify(exportData, null, ' ')\n    );\n  }\n\n  async _updateObject() {\n    const settings = get(this.context);\n    await this.saveChangedSettings(settings);\n  }\n}\n","import { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { Actor5e } from 'src/types/types';\n\ntype TidyDeath = {\n  success: boolean;\n  failure: boolean;\n};\n\ntype NpcDeathFlagToSystemMigrationParams = {\n  npc: Actor5e;\n  overwrite: boolean;\n  clearDeathFlagData: boolean;\n};\n\nexport async function migrateNpcDeathFlagsToSystem({\n  npc,\n  overwrite,\n  clearDeathFlagData,\n}: NpcDeathFlagToSystemMigrationParams) {\n  const tidyDeath = TidyFlags.tryGetFlag<TidyDeath | undefined>(npc, 'death');\n\n  if (!tidyDeath) {\n    return;\n  }\n\n  const systemDeath = npc.system.attributes?.death;\n\n  if (!systemDeath) {\n    return;\n  }\n\n  const update: Record<string, any> = {};\n\n  if (systemDeath?.success === 0 || overwrite) {\n    update['system.attributes.death.success'] = tidyDeath.success;\n  }\n\n  if (systemDeath?.failure === 0 || overwrite) {\n    update['system.attributes.death.failure'] = tidyDeath.failure;\n  }\n\n  if (Object.keys(systemDeath).length) {\n    await npc.update(update);\n  }\n\n  if (clearDeathFlagData) {\n    TidyFlags.unsetFlag(npc, 'death');\n  }\n}\n","<script lang=\"ts\">\n  import type { SelectableMigrationSelectionParams } from './migration-selection.types';\n  import TidyTable from 'src/components/table/TidyTable.svelte';\n  import TidyTableCell from 'src/components/table/TidyTableCell.svelte';\n  import TidyTableHeaderCell from 'src/components/table/TidyTableHeaderCell.svelte';\n  import TidyTableHeaderRow from 'src/components/table/TidyTableHeaderRow.svelte';\n  import TidyTableRow from 'src/components/table/TidyTableRow.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  export let params: SelectableMigrationSelectionParams<any>;\n\n  let searchCriteria: string = '';\n\n  $: visibleSelectablesIdSubset = new Set<string>(\n    params.selectables\n      .filter(\n        (s) =>\n          searchCriteria.trim() === '' ||\n          s.document.name?.toLowerCase().includes(searchCriteria.toLowerCase()),\n      )\n      .map((d) => d.document.id),\n  );\n\n  let gridTemplateColumns: string;\n\n  $: {\n    gridTemplateColumns = `/* Select */ 2.5rem`;\n    params.columns.forEach((c) => {\n      const measurement = c.cellWidth === 'primary' ? '1fr' : c.cellWidth;\n      gridTemplateColumns += ` /* ${c.name} */ ${measurement}`;\n    });\n  }\n  $: totalSelected = params.selectables.filter((t) => t.selected).length;\n  $: allSelected = totalSelected >= params.selectables.length;\n\n  function onMigrateClicked() {\n    const selectedTargets = params.selectables\n      .filter((t) => t.selected)\n      .map((t) => t.document);\n    params.onConfirm(selectedTargets);\n  }\n\n  function toggleAll() {\n    const targetState = !allSelected;\n    params.selectables.forEach((o) => (o.selected = targetState));\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section>\n  <div role=\"presentation\" class=\"search-container\">\n    <Search bind:value={searchCriteria} />\n  </div>\n  <div role=\"presentation\" class=\"scroll-container\">\n    <TidyTable\n      key=\"bulk-selection\"\n      toggleable={false}\n      --grid-template-columns={gridTemplateColumns}\n    >\n      <svelte:fragment slot=\"header\">\n        <TidyTableHeaderRow>\n          <TidyTableHeaderCell>\n            <input\n              type=\"checkbox\"\n              bind:checked={allSelected}\n              on:click={() => toggleAll()}\n              title={localize(\n                'TIDY5E.Settings.Migrations.Selection.SelectAllNoneTooltip',\n              )}\n            />\n          </TidyTableHeaderCell>\n          {#each params.columns as column}\n            <TidyTableHeaderCell primary={column?.cellWidth === 'primary'}>\n              {column.name ?? ''}\n            </TidyTableHeaderCell>\n          {/each}\n        </TidyTableHeaderRow>\n      </svelte:fragment>\n      <svelte:fragment slot=\"body\">\n        {#each params.selectables as selectable}\n          <TidyTableRow\n            hidden={!visibleSelectablesIdSubset.has(selectable.document.id)}\n          >\n            <TidyTableCell>\n              <input type=\"checkbox\" bind:checked={selectable.selected} />\n            </TidyTableCell>\n            {#each params.columns as column}\n              {@const field = column.field}\n              <TidyTableCell\n                primary={column?.cellWidth === 'primary'}\n                class=\"flex-row small-gap\"\n              >\n                {#if field.type === 'contextual'}\n                  {field.getText(selectable.document) ?? ''}\n                {:else if column.field.type === 'simple'}\n                  {@const text =\n                    FoundryAdapter.getProperty(\n                      selectable.document,\n                      field.propPath,\n                    ) ?? ''}\n                  {#if field.onClick}\n                    <button\n                      type=\"button\"\n                      on:click={() => field.onClick?.(selectable.document)}\n                      class=\"inline-transparent-button\"\n                    >\n                      {text}\n                    </button>\n                  {:else}\n                    <div>{text}</div>\n                  {/if}\n                {/if}\n              </TidyTableCell>\n            {/each}\n          </TidyTableRow>\n        {/each}\n      </svelte:fragment>\n    </TidyTable>\n  </div>\n  <footer>\n    <p>\n      {localize('TIDY5E.Settings.Migrations.Selection.TotalSelectedLabel', {\n        total: totalSelected,\n      })}\n    </p>\n    <button on:click={() => onMigrateClicked()}\n      >{localize('TIDY5E.ButtonConfirm.Text')}</button\n    >\n  </footer>\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 0rem;\n\n    > .scroll-container {\n      flex: 1;\n    }\n  }\n\n  .search-container {\n    margin-block-end: 0.5rem;\n  }\n\n  footer {\n    margin-left: -0.5rem;\n    margin-right: -0.5rem;\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n    border-top: 0.0625rem solid var(--t5e-faint-color);\n  }\n\n  input[type='checkbox'] {\n    flex-basis: 0.75rem;\n    width: auto;\n    height: auto;\n    margin: 0;\n    padding: 0;\n    line-height: 0.75rem;\n  }\n</style>\n","import type { SvelteComponent } from 'svelte';\nimport SvelteFormApplicationBase from 'src/applications/SvelteFormApplicationBase';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport MigrationSelection from './MigrationSelection.svelte';\nimport type {\n  MigrationSelectionParams,\n  SelectableMigrationSelectionParams,\n} from './migration-selection.types';\n\nexport class MigrationSelectionApplication<\n  T\n> extends SvelteFormApplicationBase {\n  _params: MigrationSelectionParams<T>;\n  _onClose?: Function;\n\n  constructor(\n    params: MigrationSelectionParams<T>,\n    onClose?: Function,\n    options?: any\n  ) {\n    super(\n      {},\n      FoundryAdapter.mergeObject(\n        MigrationSelectionApplication.defaultOptions,\n        options\n      )\n    );\n    this._params = params;\n    this._onClose = onClose;\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      width: 650,\n      height: 500,\n      id: 'tidy-5e-sheets-migration-selection',\n      popOut: true,\n    });\n  }\n\n  get title() {\n    return (\n      this._params.title ??\n      FoundryAdapter.localize('TIDY5E.Settings.Migrations.dialogTitle')\n    );\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    const selectableParams: SelectableMigrationSelectionParams<T> = {\n      ...this._params,\n      selectables: this._params.documents.map((d) => ({\n        document: d,\n        selected: true,\n      })),\n    };\n    return new MigrationSelection({\n      target: node,\n      props: {\n        params: selectableParams,\n      },\n    });\n  }\n\n  close(...args: any[]) {\n    this._onClose?.();\n    super.close(...args);\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Actor5e } from 'src/types/types';\n  import { debug, error } from 'src/utils/logging';\n  import { migrateNpcDeathFlagsToSystem } from './npc-death-flags-to-system';\n  import { MigrationSelectionApplication } from '../migration-selection/MigrationSelectionApplication';\n  import { CONSTANTS } from 'src/constants';\n\n  let migrating = false;\n  let overwrite = false;\n  let deleteFlags = false;\n\n  async function migrate() {\n    try {\n      const actorsToMigrate = Array.from<any>(game.actors)\n        .filter((a) => a.type === CONSTANTS.SHEET_TYPE_NPC && a.isOwner)\n        .map((a) => ({ actor: a, unlinked: false }));\n      const tokenActors = Array.from(canvas?.scene?.tokens ?? [])\n        .map((t: any) => ({ actor: t.actor, unlinked: true }))\n        .filter(\n          (a) =>\n            a.actor && !a.actor.prototypeToken?.actorLink && a.actor.isOwner,\n        );\n      actorsToMigrate.push(...tokenActors);\n      new MigrationSelectionApplication<{ actor: Actor5e; unlinked: boolean }>(\n        {\n          onConfirm: async (selected) => {\n            migrating = true;\n            ui.notifications.info(\n              localize('TIDY5E.Settings.Migrations.migrationBeginningMessage'),\n            );\n            migrateActors(selected.map((s) => s.actor));\n          },\n          columns: [\n            {\n              cellWidth: 'primary',\n              field: {\n                type: 'simple',\n                propPath: 'actor.name',\n                onClick: (target) => target.actor.sheet.render(true),\n              },\n              name: localize('TIDY5E.Settings.Migrations.Selection.ToMigrate'),\n            },\n            {\n              cellWidth: '5rem',\n              field: {\n                type: 'simple',\n                propPath: `actor.flags.${CONSTANTS.MODULE_ID}.death.success`,\n              },\n              name: localize('DND5E.DeathSaveSuccesses'),\n            },\n            {\n              cellWidth: '5rem',\n              field: {\n                type: 'simple',\n                propPath: `actor.flags.${CONSTANTS.MODULE_ID}.death.failure`,\n              },\n              name: localize('DND5E.DeathSaveFailures'),\n            },\n            {\n              cellWidth: '10rem',\n              name: '',\n              field: {\n                type: 'contextual',\n                getText: ({ unlinked }) =>\n                  unlinked\n                    ? FoundryAdapter.localize('TIDY5E.TokenUnlinked')\n                    : FoundryAdapter.localize('DOCUMENT.Actor'),\n              },\n            },\n          ],\n          documents: actorsToMigrate,\n          title: FoundryAdapter.localize(\n            'TIDY5E.Settings.Migrations.NpcDeathSaves.selectionDialogTitle',\n          ),\n        },\n        () => {\n          migrating = false;\n        },\n      ).render(true);\n    } catch (e) {\n      error('An error occurred while preparing a bulk migration', false, e);\n    }\n  }\n\n  async function migrateActors(actors: Actor5e[]) {\n    try {\n      for (let actorToMigrate of actors) {\n        await migrateActor(actorToMigrate);\n      }\n    } finally {\n      migrating = false;\n      ui.notifications.info(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationCompleteMessage',\n        ),\n      );\n      resetOptions();\n    }\n  }\n\n  function resetOptions() {\n    overwrite = false;\n    deleteFlags = false;\n  }\n\n  async function migrateActor(actor: Actor5e) {\n    try {\n      debug(`Migrating actor ${actor?.name}...`);\n      migrateNpcDeathFlagsToSystem({\n        npc: actor,\n        overwrite: overwrite,\n        clearDeathFlagData: deleteFlags,\n      });\n      debug(`Actor ${actor?.name} migration successful!`);\n    } catch (e) {\n      error(\n        `An error occurred while migrating NPC death save data for ${actor?.name}`,\n        false,\n        e,\n      );\n      ui.notifications.error(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationErrorMessage',\n        ),\n        { permanent: true },\n      );\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section>\n  <h2>\n    {localize('TIDY5E.Settings.Migrations.NpcDeathSaves.sectionTitle')}\n  </h2>\n  <ul>\n    <li>{localize('DND5E.DeathSave')}</li>\n  </ul>\n  <p>{localize('TIDY5E.Settings.Migrations.UnlinkedExplanation')}</p>\n  <h3>{localize('TIDY5E.Settings.Migrations.OptionsHeader')}</h3>\n  <div class=\"options grid-auto-columns\">\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionOverwrite.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={overwrite} disabled={migrating} />\n      {localize('TIDY5E.Settings.Migrations.OptionOverwrite.Text')}\n    </label>\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionDeleteFlags.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={deleteFlags} disabled={migrating} />\n\n      {localize('TIDY5E.Settings.Migrations.OptionDeleteFlags.Text')}\n    </label>\n  </div>\n\n  <button type=\"button\" on:click={(ev) => migrate()} disabled={migrating}\n    >{localize('TIDY5E.Settings.Migrations.ButtonMigration.Text')}</button\n  >\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .options {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  button {\n    margin-top: auto;\n  }\n</style>\n","import { isNil } from 'src/utils/data';\n\ntype TidyFlagToSystemMigrationMapping = {\n  system: string;\n  tidy: string;\n  tidyDelete: string;\n};\n\ntype BiographicalFlagsToSystemMigrationParams = {\n  document: any;\n  overwrite: boolean;\n  clearBiographicalFlagData: boolean;\n};\n\nconst mappings: TidyFlagToSystemMigrationMapping[] = [\n  {\n    system: 'system.details.gender',\n    tidy: 'flags.tidy5e-sheet.gender',\n    tidyDelete: 'flags.tidy5e-sheet.-=gender',\n  },\n  {\n    system: 'system.details.eyes',\n    tidy: 'flags.tidy5e-sheet.eyes',\n    tidyDelete: 'flags.tidy5e-sheet.-=eyes',\n  },\n  {\n    system: 'system.details.height',\n    tidy: 'flags.tidy5e-sheet.height',\n    tidyDelete: 'flags.tidy5e-sheet.-=height',\n  },\n  {\n    system: 'system.details.hair',\n    tidy: 'flags.tidy5e-sheet.hair',\n    tidyDelete: 'flags.tidy5e-sheet.-=hair',\n  },\n  {\n    system: 'system.details.skin',\n    tidy: 'flags.tidy5e-sheet.skin',\n    tidyDelete: 'flags.tidy5e-sheet.-=skin',\n  },\n  {\n    system: 'system.details.age',\n    tidy: 'flags.tidy5e-sheet.age',\n    tidyDelete: 'flags.tidy5e-sheet.-=age',\n  },\n  {\n    system: 'system.details.weight',\n    tidy: 'flags.tidy5e-sheet.weight',\n    tidyDelete: 'flags.tidy5e-sheet.-=weight',\n  },\n];\n\nexport async function migrateBiographicalFlagsToSystemData(\n  params: BiographicalFlagsToSystemMigrationParams\n) {\n  const { document, overwrite, clearBiographicalFlagData } = params;\n  let diff: Record<string, any> = {};\n  for (let { system, tidy, tidyDelete } of mappings) {\n    const systemValue = foundry.utils.getProperty(document, system) ?? '';\n    const tidyValue = foundry.utils.getProperty(document, tidy) ?? '';\n    if (isNil(systemValue, '') || overwrite) {\n      diff[system] = tidyValue;\n    }\n\n    if (clearBiographicalFlagData) {\n      diff[tidyDelete] = null;\n    }\n  }\n\n  if (Object.keys(diff).length) {\n    await document.update(diff);\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Actor5e } from 'src/types/types';\n  import { debug, error } from 'src/utils/logging';\n  import { migrateBiographicalFlagsToSystemData } from './biographical-flags-to-system';\n  import { CONSTANTS } from 'src/constants';\n\n  import { MigrationSelectionApplication } from '../migration-selection/MigrationSelectionApplication';\n\n  let migrating = false;\n  let overwrite = false;\n  let deleteFlags = false;\n\n  const localize = FoundryAdapter.localize;\n\n  async function migrate() {\n    try {\n      const actorsToMigrate = Array.from<any>(game.actors).filter(\n        (a) => a.type === CONSTANTS.SHEET_TYPE_CHARACTER,\n      );\n      new MigrationSelectionApplication<Actor5e>(\n        {\n          onConfirm: async (selected) => {\n            migrating = true;\n            ui.notifications.info(\n              localize('TIDY5E.Settings.Migrations.migrationBeginningMessage'),\n            );\n            migrateActors(selected);\n          },\n          columns: [\n            {\n              cellWidth: 'primary',\n              field: {\n                type: 'simple',\n                propPath: 'name',\n                onClick: (target: Actor5e) => target.sheet.render(true),\n              },\n              name: localize('TIDY5E.Settings.Migrations.Selection.ToMigrate'),\n            },\n          ],\n          documents: actorsToMigrate,\n          title: FoundryAdapter.localize(\n            'TIDY5E.Settings.Migrations.CharacterBiography.selectionDialogTitle',\n          ),\n        },\n        () => {\n          migrating = false;\n        },\n      ).render(true);\n    } catch (e) {\n      error('An error occurred while preparing a bulk migration', false, e);\n    }\n  }\n\n  async function migrateActors(actors: Actor5e[]) {\n    try {\n      for (let actorToMigrate of actors) {\n        await migrateActor(actorToMigrate);\n      }\n    } finally {\n      migrating = false;\n      ui.notifications.info(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationCompleteMessage',\n        ),\n      );\n      resetOptions();\n    }\n  }\n\n  function resetOptions() {\n    overwrite = false;\n    deleteFlags = false;\n  }\n\n  async function migrateActor(actor: Actor5e) {\n    try {\n      debug(`Migrating actor ${actor?.name}...`);\n      migrateBiographicalFlagsToSystemData({\n        document: actor,\n        clearBiographicalFlagData: deleteFlags,\n        overwrite: overwrite,\n      });\n      debug(`Actor ${actor?.name} migration successful!`);\n    } catch (e) {\n      error(\n        `An error occurred while migrating biographical data for ${actor?.name}`,\n        false,\n        e,\n      );\n      ui.notifications.error(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationErrorMessage',\n        ),\n        { permanent: true },\n      );\n    }\n  }\n</script>\n\n<section>\n  <h2>\n    {localize('TIDY5E.Settings.Migrations.CharacterBiography.sectionTitle')}\n  </h2>\n  <ul>\n    <li>{localize('DND5E.Age')}</li>\n    <li>{localize('DND5E.Eyes')}</li>\n    <li>{localize('DND5E.Gender')}</li>\n    <li>{localize('DND5E.Hair')}</li>\n    <li>{localize('DND5E.Height')}</li>\n    <li>{localize('DND5E.Skin')}</li>\n    <li>{localize('DND5E.Weight')}</li>\n  </ul>\n  <h3>{localize('TIDY5E.Settings.Migrations.OptionsHeader')}</h3>\n  <div class=\"options grid-auto-columns\">\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionOverwrite.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={overwrite} disabled={migrating} />\n      {localize('TIDY5E.Settings.Migrations.OptionOverwrite.Text')}\n    </label>\n\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionDeleteFlags.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={deleteFlags} disabled={migrating} />\n\n      {localize('TIDY5E.Settings.Migrations.OptionDeleteFlags.Text')}\n    </label>\n  </div>\n\n  <button type=\"button\" on:click={(ev) => migrate()} disabled={migrating}\n    >{localize('TIDY5E.Settings.Migrations.ButtonMigration.Text')}</button\n  >\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .options {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  button {\n    margin-top: auto;\n  }\n</style>\n","import { CONSTANTS } from 'src/constants';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { error } from 'src/utils/logging';\n\nexport async function migrateOgFlagsToV1() {\n  const flagDifferences = [\n    {\n      v1: 'skillsExpanded',\n      og: 'npcSkillsExpanded',\n    },\n  ];\n\n  for (let actor of game.actors) {\n    try {\n      let update: Record<string, any> = {};\n\n      for (let diff of flagDifferences) {\n        const flagValue = actor.flags[CONSTANTS.MODULE_ID]?.[diff.og];\n        if (flagValue !== null) {\n          update[diff.v1] = flagValue;\n        }\n      }\n\n      if (Object.keys(update).length) {\n        await actor.update({\n          flags: {\n            [CONSTANTS.MODULE_ID]: update,\n          },\n        });\n      }\n    } catch (e) {\n      const message = `${actor.name}: Transfer failed. See devtools console error for more details.`;\n      ui.notifications.error(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationErrorMessage'\n        ),\n        { permanent: true }\n      );\n      error(message, false, e);\n    }\n  }\n\n  ui.notifications.info(\n    FoundryAdapter.localize(\n      'TIDY5E.Settings.Migrations.migrationCompleteMessage'\n    )\n  );\n}\n","import { CONSTANTS } from 'src/constants';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { error } from 'src/utils/logging';\n\ntype SettingMap = {\n  v1Key: string;\n  ogKey: string;\n  convert?(setting: any): unknown;\n};\n\n/**\n * All settings whose names differ and optionally contain a conversion function to map to the correct value\n */\nconst settingsMap: SettingMap[] = [\n  {\n    v1Key: 'showTraitLabels',\n    ogKey: 'traitLabelsEnabled',\n  },\n  {\n    v1Key: 'showPlayerName',\n    ogKey: 'playerNameEnabled',\n  },\n  {\n    v1Key: 'showExpandedLimitedView',\n    ogKey: 'expandedSheetEnabled',\n  },\n  {\n    v1Key: 'useCircularPortraitStyle',\n    ogKey: 'portraitStyle',\n  },\n  {\n    v1Key: 'useTotalSheetLock',\n    ogKey: 'editTotalLockEnabled',\n  },\n  {\n    v1Key: 'permanentlyUnlockCharacterSheetForGm',\n    ogKey: 'editGmAlwaysEnabled',\n  },\n  {\n    v1Key: 'limitEffectsManagementToGm',\n    ogKey: 'editEffectsGmOnlyEnabled',\n  },\n  {\n    v1Key: 'hideDeathSavesFromPlayers',\n    ogKey: 'hiddenDeathSavesEnabled',\n  },\n  {\n    v1Key: 'useExhaustion',\n    ogKey: 'exhaustionDisabled',\n    convert: (setting: any) => !setting,\n  },\n  {\n    v1Key: 'useCharacterInspiration',\n    ogKey: 'inspirationDisabled',\n    convert: (setting: any) => !setting,\n  },\n  {\n    v1Key: 'showNpcRestInChat',\n    ogKey: 'restingForNpcsChatDisabled',\n    convert: (setting: any) => !setting,\n  },\n  {\n    v1Key: 'showNpcActorLinkMarker',\n    ogKey: 'linkMarkerNpc',\n  },\n  {\n    v1Key: 'showActiveEffectsMarker',\n    ogKey: 'activeEffectsMarker',\n  },\n  {\n    v1Key: 'permanentlyUnlockNpcSheetForGm',\n    ogKey: 'enablePermanentUnlockOnNPCIfYouAreGM',\n  },\n  {\n    v1Key: 'permanentlyUnlockVehicleSheetForGm',\n    ogKey: 'enablePermanentUnlockOnVehicleIfYouAreGM',\n  },\n  {\n    v1Key: 'allowCantripsToBePrepared',\n    ogKey: 'allowCantripToBePreparedOnContext',\n  },\n];\n\nexport async function migrateOgSettingsToV1() {\n  const tidyGmSettings = game.settings.storage\n    .get('world')\n    .filter((s: any) => s.key.startsWith(CONSTANTS.MODULE_ID));\n\n  for (let setting of tidyGmSettings) {\n    try {\n      const originalKey = setting.key.replace(`${CONSTANTS.MODULE_ID}.`, '');\n\n      const mappedSetting = settingsMap.find((s) => s.ogKey === originalKey);\n\n      if (!mappedSetting) {\n        continue;\n      }\n\n      const value = mappedSetting.convert\n        ? mappedSetting.convert(setting.value)\n        : setting.value;\n\n      if (\n        game.settings.settings.has(\n          `${CONSTANTS.MODULE_ID}.${mappedSetting.v1Key}`\n        )\n      ) {\n        await game.settings.set(\n          CONSTANTS.MODULE_ID,\n          mappedSetting.v1Key,\n          value\n        );\n      }\n    } catch (e) {\n      const message = `An error occurred while remapping setting \"${setting.key}\"`;\n      ui.notifications.error(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationErrorMessage'\n        ),\n        { permanent: true }\n      );\n      error(message, false, e);\n    }\n  }\n\n  ui.notifications.info(\n    FoundryAdapter.localize(\n      'TIDY5E.Settings.Migrations.migrationCompleteMessage'\n    )\n  );\n}\n","<script lang=\"ts\">\n  import { migrateOgFlagsToV1 } from 'src/migrations/v1/og-flags-to-v1';\n  import { migrateOgSettingsToV1 } from 'src/migrations/v1/og-settings-to-v1';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import type { ConfirmMigrationFunction } from '../BulkMigrationsApplication';\n  import { CONSTANTS } from 'src/constants';\n\n  const localize = FoundryAdapter.localize;\n\n  const confirm = getContext<ConfirmMigrationFunction>(\n    CONSTANTS.SVELTE_CONTEXT.CONFIRM,\n  );\n</script>\n\n<h2>{localize('TIDY5E.Settings.Migrations.v1.sectionTitle')}</h2>\n<div class=\"flex-row align-items-center callout-banner\">\n  <div>\n    <p>\n      {@html localize('TIDY5E.Settings.Migrations.v1.mainExplanation1')}\n    </p>\n    <p>\n      {@html localize('TIDY5E.Settings.Migrations.v1.mainExplanation2', {\n        boldStart: '<b>',\n        boldEnd: '</b>',\n      })}\n    </p>\n  </div>\n</div>\n<h2 class=\"flex-row align-items-center\">\n  <i class=\"fas fa-scroll\"></i>{@html localize(\n    'TIDY5E.Settings.Migrations.v1.originalHeader',\n  )}\n</h2>\n<p>{@html localize('TIDY5E.Settings.Migrations.v1.originalExplanation')}</p>\n<div class=\"flex-row extra-small-gap\">\n  <button type=\"button\" on:click={() => confirm(migrateOgFlagsToV1)}>\n    <i class=\"fas fa-flag\"></i>\n    {@html localize(\n      'TIDY5E.Settings.Migrations.migrateDocumentFlagsButtonLabel',\n    )}\n  </button>\n  <button type=\"button\" on:click={() => confirm(migrateOgSettingsToV1)}>\n    <i class=\"fas fa-cog\"></i>\n    {@html localize('TIDY5E.Settings.Migrations.migrateGmSettingsButtonLabel')}\n  </button>\n</div>\n\n<style lang=\"scss\">\n  .callout-banner {\n    background: var(--t5e-faintest-color);\n    margin: -0.5rem -0.5rem 1rem -0.5rem;\n    padding: 0.5rem 1rem;\n  }\n</style>\n","import { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { Item5e } from 'src/types/item.types';\nimport { isNil } from 'src/utils/data';\nimport { debug, error } from 'src/utils/logging';\n\ntype CcssToTidyItemMigrationParams = {\n  item: Item5e;\n  overwrite: boolean;\n  clearCcssFlagData: boolean;\n};\n\nexport const ccssFlagPropPath =\n  'flags.custom-character-sheet-sections.sectionName' as const;\n\nexport async function migrateCcssToTidyForItem({\n  item,\n  overwrite,\n  clearCcssFlagData,\n}: CcssToTidyItemMigrationParams) {\n  try {\n    const sectionName = getCcssSectionName(item);\n\n    if (isNil(sectionName, '')) {\n      return;\n    }\n\n    const tidySection = TidyFlags.section.get(item);\n\n    const shouldUpdateTidy = isNil(tidySection, '') || overwrite;\n\n    if (shouldUpdateTidy) {\n      TidyFlags.section.set(item, sectionName);\n    }\n\n    if (clearCcssFlagData) {\n      item.update({\n        'flags.custom-character-sheet-sections.-=sectionName': null,\n      });\n    }\n  } catch (e) {\n    error('An error occurred while migrating CCSS data from item.', false, e);\n    debug('CCSS Item Migration troubleshooting info', {\n      item: item?.toObject?.(),\n      overwrite,\n      clearCcssFlagData,\n    });\n  }\n}\n\nexport function getCcssSectionName(item: Item5e) {\n  return foundry.utils.getProperty(item, ccssFlagPropPath)?.trim();\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { debug, error } from 'src/utils/logging';\n  import { MigrationSelectionApplication } from '../migration-selection/MigrationSelectionApplication';\n  import type { Item5e } from 'src/types/item.types';\n  import {\n    ccssFlagPropPath,\n    getCcssSectionName,\n    migrateCcssToTidyForItem,\n  } from './ccss-to-tidy';\n  import { isNil } from 'src/utils/data';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import type { CompendiumToMigrate } from '../migration.types';\n\n  let migrating = false;\n  let overwrite = false;\n  let deleteFlags = false;\n\n  async function migrate() {\n    try {\n      const actorItemsToMigrate = Array.from<any>(game.actors)\n        .filter((a) => a.isOwner)\n        .map((a) => ({ actor: a, unlinked: false }))\n        .flatMap((value) =>\n          Array.from(value.actor.items).map((item) => ({\n            item,\n            unlinked: value.unlinked,\n          })),\n        );\n\n      const tokenActorItemsToMigrate = Array.from(canvas?.scene?.tokens ?? [])\n        .map((t: any) => ({ actor: t.actor, unlinked: true }))\n        .filter(\n          (a) =>\n            a.actor && !a.actor.prototypeToken?.actorLink && a.actor.isOwner,\n        )\n        .flatMap((value) =>\n          Array.from(value.actor.items).map((item) => ({\n            item,\n            unlinked: value.unlinked,\n          })),\n        );\n\n      const worldItemsToMigrate = Array.from<any>(game.items).map((item) => ({\n        item,\n        unlinked: true,\n      }));\n\n      const itemsToMigrate = [\n        ...tokenActorItemsToMigrate,\n        ...actorItemsToMigrate,\n        ...worldItemsToMigrate,\n      ].filter((value) => !isNil(getCcssSectionName(value.item), ''));\n\n      new MigrationSelectionApplication<{ item: Item5e; unlinked: boolean }>(\n        {\n          onConfirm: async (selected) => {\n            migrating = true;\n            ui.notifications.info(\n              localize('TIDY5E.Settings.Migrations.migrationBeginningMessage'),\n            );\n\n            for (let choice of selected) {\n              await migrateCcssToTidyForItem({\n                item: choice.item,\n                overwrite: overwrite,\n                clearCcssFlagData: deleteFlags,\n              });\n            }\n\n            migrating = false;\n            ui.notifications.info(\n              localize('TIDY5E.Settings.Migrations.migrationCompleteMessage'),\n            );\n            resetOptions();\n          },\n          columns: [\n            {\n              cellWidth: 'primary',\n              field: {\n                type: 'simple',\n                propPath: 'item.name',\n                onClick: (target) => target.item.sheet.render(true),\n              },\n              name: localize('TIDY5E.Settings.Migrations.Selection.ToMigrate'),\n            },\n            {\n              cellWidth: '8rem',\n              field: {\n                type: 'simple',\n                propPath: `item.${ccssFlagPropPath}`,\n              },\n              name: localize('TIDY5E.Settings.Migrations.CcssToTidy.ccss'),\n            },\n            {\n              cellWidth: '8rem',\n              field: {\n                type: 'simple',\n                propPath: `item.${TidyFlags.section.prop}`,\n              },\n              name: localize('TIDY5E.Settings.Migrations.CcssToTidy.section'),\n            },\n            {\n              cellWidth: '10rem',\n              field: {\n                type: 'simple',\n                propPath: `item.parent.name`,\n                onClick: (target) => target.item.parent?.sheet?.render(true),\n              },\n              name: localize('TIDY5E.Settings.Migrations.Parent'),\n            },\n            {\n              cellWidth: '10rem',\n              name: '',\n              field: {\n                type: 'contextual',\n                getText: ({ unlinked }) =>\n                  unlinked\n                    ? FoundryAdapter.localize('TIDY5E.TokenUnlinked')\n                    : FoundryAdapter.localize('DOCUMENT.Actor'),\n              },\n            },\n          ],\n          documents: itemsToMigrate,\n          title: FoundryAdapter.localize(\n            'TIDY5E.Settings.Migrations.CcssToTidy.selectionDialogTitle',\n          ),\n        },\n        () => {\n          migrating = false;\n        },\n        {\n          width: 960,\n        },\n      ).render(true);\n    } catch (e) {\n      error('An error occurred while preparing a bulk migration', false, e);\n    }\n  }\n\n  async function migrateCompendia() {\n    const compendiaForMigrating = Array.from(game.packs.values())\n      .filter((c: any) => !c.locked && c.documentName === 'Item')\n      .map((c: any) => ({\n        label: c.metadata.label,\n        type: c.metadata.type,\n        id: c.metadata.id,\n        size: c.index.size,\n      }));\n\n    new MigrationSelectionApplication<CompendiumToMigrate>({\n      onConfirm: async (selected) => {\n        ui.notifications.info(\n          localize(`TIDY5E.Settings.Migrations.migrationBeginningMessage`),\n        );\n        for (const compendium of selected) {\n          debug(`Migrating compendium \"${compendium.label}\"...`);\n          try {\n            const items = await game.packs.get(compendium.id).getDocuments();\n            for (const item of items) {\n              await migrateCcssToTidyForItem({\n                item: item,\n                overwrite: overwrite,\n                clearCcssFlagData: deleteFlags,\n              });\n            }\n            debug(`Compendium \"${compendium.label}\" migration successful.`);\n          } catch (e) {\n            error(\n              localize('TIDY5E.Settings.Migrations.migrationErrorMessage'),\n              true,\n            );\n            error(\n              `Error while migrating compendium \"${compendium.label}\"`,\n              false,\n              e,\n            );\n          }\n        }\n        ui.notifications.info(\n          localize(`TIDY5E.Settings.Migrations.migrationCompleteMessage`),\n        );\n      },\n      columns: [\n        {\n          cellWidth: 'primary',\n          field: {\n            type: 'simple',\n            propPath: 'label',\n            onClick: (target) => game.packs.get(target.id).render(true),\n          },\n          name: localize(\n            'TIDY5E.Settings.Migrations.MigrateCompendia.CompendiumLabel',\n          ),\n        },\n        {\n          cellWidth: '5rem',\n          field: {\n            type: 'contextual',\n            getText: (c) => localize(`DOCUMENT.${c.type}`),\n          },\n          name: localize('Type'),\n        },\n        {\n          cellWidth: '10rem',\n          field: {\n            type: 'simple',\n            propPath: 'size',\n          },\n          name: localize(\n            'TIDY5E.Settings.Migrations.MigrateCompendia.TotalEntriesLabel',\n          ),\n        },\n      ],\n      documents: compendiaForMigrating,\n      title: localize(\n        'TIDY5E.Settings.Migrations.MigrateCompendia.SelectionDialogTitle',\n      ),\n    }).render(true);\n  }\n\n  function resetOptions() {\n    overwrite = false;\n    deleteFlags = false;\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section>\n  <h2>\n    {localize('TIDY5E.Settings.Migrations.CcssToTidy.sectionTitle')}\n  </h2>\n  <div class=\"callout-banner\">\n    <p>{localize('TIDY5E.Settings.Migrations.CcssToTidy.explanation1')}</p>\n  </div>\n  <p>{localize('TIDY5E.Settings.Migrations.UnlinkedExplanation')}</p>\n  <h3>{localize('TIDY5E.Settings.Migrations.OptionsHeader')}</h3>\n  <div class=\"options grid-auto-columns\">\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.CcssToTidy.overwriteTooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={overwrite} disabled={migrating} />\n      {localize('TIDY5E.Settings.Migrations.CcssToTidy.overwrite')}\n    </label>\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.CcssToTidy.deleteFlagsTooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={deleteFlags} disabled={migrating} />\n\n      {localize('TIDY5E.Settings.Migrations.CcssToTidy.deleteFlags')}\n    </label>\n  </div>\n\n  <footer class=\"flex-row extra-small-gap\">\n    <button\n      type=\"button\"\n      on:click={(ev) => migrateCompendia()}\n      disabled={migrating}\n      >{localize('TIDY5E.Settings.Migrations.MigrateCompendia.Title')}</button\n    >\n    <button type=\"button\" on:click={(ev) => migrate()} disabled={migrating}\n      >{localize('TIDY5E.Settings.Migrations.ButtonMigration.Text')}</button\n    >\n  </footer>\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .options {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  footer {\n    margin-top: auto;\n  }\n\n  .callout-banner {\n    background: var(--t5e-faintest-color);\n    margin: -0.5rem -0.5rem 1rem -0.5rem;\n    padding: 0.5rem 1rem;\n  }\n</style>\n","import { CONSTANTS } from 'src/constants';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type { Item5e } from 'src/types/item.types';\nimport type { Actor5e } from 'src/types/types';\nimport { error } from 'src/utils/logging';\n\nconst tidyFlagFavorite = 'favorite';\n\ntype FavoritesToSystemMigrationParams = {\n  pc: Actor5e;\n  clearFavoriteFlagData: boolean;\n};\n\nexport async function migrateFavoritesToSystem({\n  pc,\n  clearFavoriteFlagData,\n}: FavoritesToSystemMigrationParams) {\n  if (!pc) {\n    return;\n  }\n\n  try {\n    // get all embedded items with favorites flag\n    const tidyFavorites = Array.from<Item5e>(pc.items).filter(\n      (i: Item5e) => !!i.flags[CONSTANTS.MODULE_ID]?.favorite\n    );\n\n    for (const favorite of tidyFavorites) {\n      await pc.system.addFavorite({\n        id: favorite.getRelativeUUID(pc),\n        type: 'item',\n      });\n\n      if (clearFavoriteFlagData) {\n        await TidyFlags.unsetFlag(favorite, tidyFlagFavorite);\n      }\n    }\n  } catch (e) {\n    error(\"An error occurred while migrating an actor's favorites\", false, {\n      error: e,\n      actor: pc,\n    });\n    error(\n      FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.migrationErrorMessage'\n      ),\n      true\n    );\n  }\n}\n","<script lang=\"ts\">\n  import { MigrationSelectionApplication } from '../migration-selection/MigrationSelectionApplication';\n  import type { Actor5e } from 'src/types/types';\n  import { migrateFavoritesToSystem } from './favorites-to-system';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n\n  let migrating = false;\n  let deleteFlags = false;\n\n  const localize = FoundryAdapter.localize;\n\n  async function migrate() {\n    const actorsToMigrate = Array.from<Actor5e>(game.actors).filter(\n      (a) => a.isOwner && a.type === CONSTANTS.SHEET_TYPE_CHARACTER,\n    );\n\n    new MigrationSelectionApplication<{ item: Actor5e }>({\n      onConfirm: async (selected) => {\n        migrating = true;\n\n        ui.notifications.info(\n          localize('TIDY5E.Settings.Migrations.migrationBeginningMessage'),\n        );\n\n        for (let choice of selected) {\n          await migrateFavoritesToSystem({\n            pc: choice,\n            clearFavoriteFlagData: deleteFlags,\n          });\n        }\n\n        ui.notifications.info(\n          localize('TIDY5E.Settings.Migrations.migrationCompleteMessage'),\n        );\n\n        resetOptions();\n\n        migrating = false;\n      },\n      columns: [\n        {\n          cellWidth: 'primary',\n          field: {\n            type: 'simple',\n            propPath: 'name',\n            onClick: (target: Actor5e) => target.sheet.render(true),\n          },\n          name: localize('TIDY5E.Settings.Migrations.Selection.ToMigrate'),\n        },\n      ],\n      documents: actorsToMigrate,\n      title: FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.FavoritesToSystem.selectionDialogTitle',\n      ),\n    }).render(true);\n\n    function resetOptions() {\n      deleteFlags = false;\n    }\n  }\n</script>\n\n<section>\n  <h2>\n    {localize('TIDY5E.Settings.Migrations.FavoritesToSystem.sectionTitle')}\n  </h2>\n  <h3>{localize('TIDY5E.Settings.Migrations.OptionsHeader')}</h3>\n  <div class=\"options grid-auto-columns\">\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionDeleteFlags.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={deleteFlags} disabled={migrating} />\n\n      {localize('TIDY5E.Settings.Migrations.OptionDeleteFlags.Text')}\n    </label>\n  </div>\n\n  <footer class=\"flex-row extra-small-gap\">\n    <button type=\"button\" on:click={(ev) => migrate()} disabled={migrating}\n      >{localize('TIDY5E.Settings.Migrations.ButtonMigration.Text')}</button\n    >\n  </footer>\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .options {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  footer {\n    margin-top: auto;\n  }\n</style>\n","import { CONSTANTS } from 'src/constants';\n\n/** @category Constants */\nconst ApiConstants = {\n  TAB_ID_CHARACTER_ATTRIBUTES: CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n  TAB_ID_CHARACTER_INVENTORY: CONSTANTS.TAB_CHARACTER_INVENTORY,\n  TAB_ID_CHARACTER_SPELLBOOK: CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n  TAB_ID_CHARACTER_FEATURES: CONSTANTS.TAB_CHARACTER_FEATURES,\n  TAB_ID_CHARACTER_EFFECTS: CONSTANTS.TAB_CHARACTER_EFFECTS,\n  TAB_ID_CHARACTER_BIOGRAPHY: CONSTANTS.TAB_CHARACTER_BIOGRAPHY,\n  TAB_ID_CHARACTER_JOURNAL: CONSTANTS.TAB_CHARACTER_JOURNAL,\n  TAB_ID_NPC_ABILITIES: CONSTANTS.TAB_NPC_ABILITIES,\n  TAB_ID_NPC_SPELLBOOK: CONSTANTS.TAB_NPC_SPELLBOOK,\n  TAB_ID_NPC_EFFECTS: CONSTANTS.TAB_NPC_EFFECTS,\n  TAB_ID_NPC_BIOGRAPHY: CONSTANTS.TAB_NPC_BIOGRAPHY,\n  TAB_ID_NPC_JOURNAL: CONSTANTS.TAB_NPC_JOURNAL,\n  TAB_ID_VEHICLE_ATTRIBUTES: CONSTANTS.TAB_VEHICLE_ATTRIBUTES,\n  TAB_ID_VEHICLE_CARGO_AND_CREW: CONSTANTS.TAB_VEHICLE_CARGO_AND_CREW,\n  TAB_ID_VEHICLE_EFFECTS: CONSTANTS.TAB_VEHICLE_EFFECTS,\n  TAB_ID_VEHICLE_DESCRIPTION: CONSTANTS.TAB_VEHICLE_DESCRIPTION,\n  TAB_ID_ACTOR_ACTIONS: CONSTANTS.TAB_ACTOR_ACTIONS,\n  /** The attribute which indicates a particular part of a sheet. */\n  SHEET_PART_ATTRIBUTE: CONSTANTS.SHEET_PART_ATTRIBUTE,\n  /**\n   * Values used in conjunction with the attribute `api.constants.SHEET_PART_ATTRIBUTE` to identify a part of a Tidy 5e sheet.\n   *\n   * @example an element which is tagged with a sheet part value\n   * ```html\n   * <div class=\"resources\" data-tidy-sheet-part=\"resources-container\">...</div>\n   * ```\n   *\n   * @example targeting a sheet part for content injection during Tidy render\n   * ```js\n   * // Every time Tidy renders, whether a full render or a partial\n   * Hooks.on(\"tidy5e-sheet.renderActorSheet\", (sheet, element, data) => {\n   *   const api = game.modules.get('tidy5e-sheet').api;\n   *   const selector = api.getSheetPartSelector(\n   *     api.constants.SHEET_PARTS.RESOURCES_CONTAINER\n   *   );\n   *   // get the resources container of the target actor sheet\n   *   element\n   *     .querySelector(selector)\n   *     // inject some HTML\n   *     ?.insertAdjacentHTML(\n   *       // put it as the first element inside the resources container; see https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML#afterbegin\n   *       \"afterbegin\",\n   *       // here's my content\n   *       // pro tip: `data-tidy-render-scheme=\"handlebars\"` causes this content to re-render on every Tidy render, full or partial\n   *       `<div style=\"display: contents;\" data-tidy-render-scheme=\"handlebars\">\n   *           <h2 type=\"button\" style=\"width: 100%;\">Resources for ${data.actor.name}</h2>\n   *         </div>`\n   *     );\n   * });\n   * ```\n   *\n   * @remarks\n   * Tidy 5e Sheets are tagged with `data-tidy-sheet-part` attributes\n   * so that most parts of the sheet can be generally identified.\n   * This module uses specific attributes rather than classes because of\n   * HTML classes' multiple purposes, including use for CSS styling.\n   * Using sheet part attributes allows for identifying the same general thing\n   * even when considering a potentially alternate Tidy sheet layout.\n   */\n  SHEET_PARTS: CONSTANTS.SHEET_PARTS,\n};\n\nexport default ApiConstants;\n","import { ActionListRuntime } from 'src/runtime/action-list/ActionListRuntime';\n\n/**\n * API functionality related to the Actions List feature.\n * \n * @category Configuration\n */\nexport class ActionListApi {\n  /**\n   * Remap how activation types are treated when the Action List organizes items into sections.\n   * @param mappings an object with `key`s and `value`s representing a mapping from source activation type to intended target activation type.\n   * @example Treating Midi-QoL reaction sub-types like a reaction\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.config.actionList.mapActivationTypesToSections({\n   *     reactionpreattack: 'reaction',\n   *     reactiondamage: 'reaction',\n   *     reactionmanual: 'reaction',\n   *   });\n   * });\n   * ```\n   * @remarks\n   * In terms of UI, the `key` and `value` fields are the `value` attribute on the Activation Type dropdown, or the database value.\n   * \n   * Multiple calls to this API function merge the latest results in, resulting in last-come, last-server.\n   * If multiple modules remap the same activation type, the last caller's remapping will be the winner.\n   */\n  mapActivationTypesToSections(mappings: Record<string, string>) {\n    ActionListRuntime.addActivationTypeMappings(mappings);\n  }\n}\n","import { ActorItemRuntime } from 'src/runtime/ActorItemRuntime';\nimport type { ActorItemSectionFooterCommand } from '../../api.types';\n\n/**\n * API functionality related to Actor-owned items.\n * \n * @category Configuration\n */\nexport class ActorItemApi {\n  /**\n   * Registers actor item section commands which Tidy 5e can render at select locations on the sheet.\n   * @param commands actor item section commands for Tidy 5e to render\n   *\n   * @example Registering a command that sorts items\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.config.actorItem.registerSectionFooterCommands([\n   *     {\n   *       enabled: (params) =>\n   *         params.section.items?.length > 1 || params.section.spells?.length > 1,\n   *       iconClass: 'fa-solid fa-arrow-up-a-z',\n   *       tooltip: 'Sort by Name Ascending',\n   *       execute: async (params) => {\n   *         const actor = params.actor;\n   *         const itemsToSort = params.section.items ?? params.section.spells;\n   *         await actor.updateEmbeddedDocuments(\n   *           'Item',\n   *           [...itemsToSort]\n   *             .sort((a, b) => {\n   *               return a.name.localeCompare(b.name);\n   *             })\n   *             .map((item, idx) => {\n   *               return { _id: item.id, sort: idx };\n   *             })\n   *         );\n   *       },\n   *     },\n   *   ]);\n   * });\n   * ```\n   */\n  registerSectionFooterCommands(commands: ActorItemSectionFooterCommand[]) {\n    ActorItemRuntime.registerActorItemSectionCommands(commands);\n  }\n}\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type { Actor5e } from 'src/types/types';\nimport type {\n  RegisteredPortraitMenuCommand,\n  RegisteredPortraitMenuCommandExecuteParams,\n} from './types';\nimport { error } from 'src/utils/logging';\n\nexport class ActorPortraitRuntime {\n  private static _portraitMenuCommands: RegisteredPortraitMenuCommand[] = [\n    {\n      label: 'TIDY5E.ShowPortraitArt',\n      execute: (params: RegisteredPortraitMenuCommandExecuteParams) => {\n        FoundryAdapter.renderImagePopout(params.actor.img, {\n          title: FoundryAdapter.localize('TIDY5E.PortraitTitle', {\n            subject: params.actor.name,\n          }),\n          shareable: true,\n          uuid: params.actor.uuid,\n        });\n      },\n      iconClass: 'fa-solid fa-image fa-fw',\n    },\n    {\n      label: 'TIDY5E.ShowTokenArt',\n      execute: async (params: RegisteredPortraitMenuCommandExecuteParams) => {\n        // Typically, if this token is on the canvas, then this is the image we want to see.\n        let imageSrc = params.actor.token?.texture?.src;\n\n        if (!imageSrc) {\n          // Account for the possibility of wildcard tokens.\n          let images = (await params.actor.getTokenImages()) as string[];\n\n          imageSrc =\n            images.length > 1\n              ? // Grab a random wildcard token upon request... for chaos.\n                images[Math.floor(Math.random() * images.length)]\n              : images[0];\n        }\n\n        FoundryAdapter.renderImagePopout(imageSrc, {\n          title: FoundryAdapter.localize('TIDY5E.PortraitTitle', {\n            subject: params.actor.name,\n          }),\n          shareable: true,\n          uuid: params.actor.uuid,\n        });\n      },\n      iconClass: 'fa-regular fa-circle-user fa-fw',\n    },\n  ];\n\n  static registerMenuCommands(commands: RegisteredPortraitMenuCommand[]) {\n    ActorPortraitRuntime._portraitMenuCommands.push(...commands);\n  }\n\n  static getEnabledPortraitMenuCommands(actor: Actor5e) {\n    return ActorPortraitRuntime._portraitMenuCommands.filter((c) => {\n      try {\n        return c.enabled?.({ actor }) ?? true;\n      } catch (e) {\n        error(\n          'Failed to check if actor portrait menu command is enabled',\n          false,\n          { error: e, actor }\n        );\n        return false;\n      }\n    });\n  }\n}\n","import type { PortraitMenuCommand } from '../..';\nimport { ActorPortraitRuntime } from 'src/runtime/ActorPortraitRuntime';\n\n/**\n * API functionality related to Actor portraits.\n *\n * @category Configuration\n */\nexport class ActorPortraitApi {\n  /**\n   * Register actor portrait menu commands which Tidy 5e can render on the sheet when appropriate.\n   * @param commands actor portrait menu commands for Tidy 5e to render\n   *\n   * @example Registering a command\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.config.actorPortrait.registerMenuCommands([\n   *     {\n   *       label: \"Test\",\n   *       iconClass: \"fa-solid fa-flask\",\n   *       tooltip: \"Click for test result\",\n   *       enabled: (params) => params.actor.type !== \"vehicle\",\n   *       execute: (params) => {\n   *         console.log(params);\n   *         ui.notifications.info(\n   *           \"Hello, Test Portrait Menu Command for \" + params.actor.name\n   *         );\n   *       },\n   *     },\n   *   ]);\n   * });\n   * ```\n   */\n  registerMenuCommands(commands: PortraitMenuCommand[]) {\n    ActorPortraitRuntime.registerMenuCommands([...commands]);\n  }\n}\n","import type { CustomActorTrait } from 'src/api/config/actor-traits/types';\nimport type { RegisteredCustomActorTrait } from '../types';\nimport { debug, error } from 'src/utils/logging';\n\nexport class CustomActorTraitsRuntime {\n  protected static _traits: RegisteredCustomActorTrait[] = [];\n\n  static registerCustomActorTraits(traits: CustomActorTrait[]) {\n    const registeredTraits = traits.map<RegisteredCustomActorTrait>((t) => ({\n      title: t.title,\n      iconClass: t.iconClass,\n      alwaysShow: t.alwaysShow,\n      openConfiguration: t.openConfiguration,\n      openConfigurationTooltip: t.openConfigurationTooltip,\n      enabled: t.enabled,\n    }));\n\n    CustomActorTraitsRuntime._traits.push(...registeredTraits);\n  }\n\n  static getEnabledTraits(context: any) {\n    return this._traits.filter((t) => {\n      try {\n        return t.enabled?.({ context }) ?? true;\n      } catch (e) {\n        error(\n          'An error occurred while determining if a custom actor trait is enabled.',\n          false,\n          e\n        );\n        debug('Custom actor trait enabled error details', {\n          context,\n          trait: t,\n        });\n        return false;\n      }\n    });\n  }\n}\n","import { CustomActorTraitsRuntime } from 'src/runtime/actor-traits/CustomActorTraitsRuntime';\nimport type { CustomActorTrait } from './types';\n\n/**\n * API functionality related to the Actor Traits section (languages, senses, tools, etc.) of the actor sheet.\n */\n/** @category Configuration */\nexport class ActorTraitsApi {\n  /**\n   * Registers multiple custom traits to the actor traits section of the actor sheet.\n   * @param traits traits to register\n   *\n   * @example Registering vehicle traits\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.config.actorTraits.registerActorTraits([\n   *     {\n   *       title: \"Vehicle Customization Options\",\n   *       iconClass: \"fa-solid fa-ferry\",\n   *       enabled: (params) => params.context.actor.type === \"vehicle\",\n   *       openConfiguration: (params) => {\n   *         // TODO: Open totally awesome config dialog for setting custom vehicle stuff.\n   *       },\n   *       openConfigurationTooltip: \"Click to customize!\",\n   *     },\n   *     {\n   *       title: \"Vehicle Tribble Manager\",\n   *       iconClass: \"fa-solid fa-ghost\",\n   *       enabled: (params) => params.context.actor.type === \"vehicle\",\n   *       openConfiguration: (params) => {\n   *         // TODO: Open a hopeless manager dialog for dealing with a tribble infestation.\n   *       },\n   *       openConfigurationTooltip: \"Click to manage the unmanageable tribble problem 😰\",\n   *       alwaysShow: true,\n   *     },\n   *   ]);\n   * });\n   * ```\n   */\n  registerActorTraits(traits: CustomActorTrait[]) {\n    CustomActorTraitsRuntime.registerCustomActorTraits(traits);\n  }\n\n  /**\n   * Registers a custom actor trait to the actor traits section of the actor sheet.\n   * @param trait the trait to register\n   *\n   * @example Registering an actor trait\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.config.actorTraits.registerActorTrait({\n   *     title: \"Configure My Module\",\n   *     iconClass: \"fa-solid fa-spaghetti-monster-flying\",\n   *     enabled: (params) =>\n   *       [\"character\", \"npc\"].includes(params.context.actor.type),\n   *     openConfiguration: (params) => {\n   *       // TODO: For example, open another form to input some data.\n   *     },\n   *     openConfigurationTooltip: \"Click to configure my module\",\n   *   });\n   * });\n   * ```\n   *\n   * @remarks\n   * The actor traits section is a good place to put a configuration button for opening another dialog for a custom module.\n   */\n  registerActorTrait(trait: CustomActorTrait) {\n    this.registerActorTraits([trait]);\n  }\n}\n","import { SpellSchool } from 'src/features/spell-school/SpellSchool';\nimport type { SupportedSpellSchoolIcon } from './spell-school.types';\n\n/**\n * Allows for configuration related to Spell Schools.\n * Currently, [FontAwesome](https://fontawesome.com/) and [RPG Awesome](https://nagoshiashumari.github.io/Rpg-Awesome/) icons are officially supported.\n *\n * @category Configuration\n */\nexport class SpellSchoolApi {\n  /**\n   * Sets an icon class for a target school key.\n   * @param schoolKey the key that represents a spell school, e.g. \"abj\" for Abjuration, \"nec\" for Necromancy, and \"trs\" for Transmutation\n   * @param iconClass a class string for an `<i>` element\n   *\n   * @example Changing the transmutation icon to some nice coins.\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.config.spellSchool.setIcon('trs', 'fa-solid fa-coins');\n   * });\n   * ```\n   */\n  setIcon(schoolKey: string, iconClass: SupportedSpellSchoolIcon) {\n    SpellSchool.setIcon(schoolKey, iconClass);\n  }\n}\n","import { ItemSummaryRuntime } from 'src/runtime/ItemSummaryRuntime';\nimport type { ItemSummaryCommand } from '../../api.types';\n\n/**\n * API functionality related to the Item Summary.\n *\n * @remarks\n * The item summary makes multiple appearances in Tidy 5e Sheets.\n * Particularly, it shows up when expanding an item table row or when\n * flying out an item info card.\n * \n * @category Configuration\n */\nexport class ItemSummaryApi {\n  /**\n   * Registers item summary commands which Tidy 5e can render at select locations on the sheet.\n   * @param commands item summary commands for Tidy 5e to render\n   *\n   * @example Registering commands that show for specific actor types\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.config.itemSummary.registerCommands([\n   *     {\n   *       label: 'Character Button',\n   *       enabled: (params) => params.item.actor?.type === 'character',\n   *       iconClass: 'fas fa-dice-d20',\n   *       execute: (params) => {\n   *         console.log('Clicked Character button', params.item);\n   *       },\n   *     },\n   *     {\n   *       label: 'NPC Button',\n   *       enabled: (params) => params.item.actor?.type === 'npc',\n   *       execute: (params) => {\n   *         console.log('Clicked NPC button', params.item);\n   *       },\n   *     },\n   *     {\n   *       label: 'Vehicle Button',\n   *       enabled: (params) => params.item.actor?.type === 'vehicle',\n   *       execute: (params) => {\n   *         console.log('Clicked Vehicle button', params.item);\n   *       },\n   *     },\n   *   ]);\n   * });\n   * ```\n   *\n   * @example Displaying a button for versatile weapons only\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.config.itemSummary.registerCommands([\n   *     {\n   *       label: 'Versatile Weapon Button',\n   *       enabled: (params) =>\n   *         params.item.type === 'weapon' &&\n   *         params.item.system?.properties?.has('ver') &&\n   *         params.item.system?.damage?.versatile,\n   *       iconClass: 'fa-solid fa-hands-praying',\n   *       execute: (params) => {\n   *         console.log('Do something versatile', params.item);\n   *       },\n   *     },\n   *   ]);\n   * });\n   * ```\n   */\n  registerCommands(commands: ItemSummaryCommand[] = []) {\n    ItemSummaryRuntime.registerItemSummaryCommands(commands);\n  }\n}\n","import { SettingsProvider } from 'src/settings/settings';\nimport type { UseSpecificLevelExhaustionParams } from '../../api.types';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type {\n  OpenExhaustionConfig,\n  SpecificExhaustionConfig,\n} from 'src/features/exhaustion/exhaustion.types';\n\n/**\n * API functionality related to the Exhaustion feature.\n * \n * @category Configuration\n */\nexport class ExhaustionApi {\n  /**\n   * Configures exhaustion to use an open number field,\n   * rather than a constrained set of levels.\n   *\n   * @example\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', async (api) => {\n   *   await api.config.exhaustion.useOpenNumberExhaustion();\n   * });\n   * ```\n   */\n  async useOpenNumberExhaustion(): Promise<void> {\n    const config: OpenExhaustionConfig = {\n      type: 'open',\n    };\n    await FoundryAdapter.setTidySetting('exhaustionConfig', config);\n  }\n\n  /**\n   * Configures exhaustion to use a constrained set of levels\n   * with optional hints (usually rendered as tooltips).\n   * @param params information needed to configure specific-level exhaustion\n   *\n   * @example Setting 3-level exhaustion\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', async (api) => {\n   *   await api.config.exhaustion.useSpecificLevelExhaustion({\n   *     totalLevels: 3,\n   *     hints: [\n   *       'No exhaustion',\n   *       'You are kind of tired',\n   *       'You look unwell',\n   *       'Dead 💀',\n   *     ],\n   *   });\n   * });\n   * ```\n   */\n  async useSpecificLevelExhaustion(\n    params?: UseSpecificLevelExhaustionParams\n  ): Promise<void> {\n    const config: SpecificExhaustionConfig = {\n      type: 'specific',\n      hints: params?.hints ?? [],\n      levels: Math.max(params?.totalLevels ?? 1, 1),\n    };\n    await FoundryAdapter.setTidySetting('exhaustionConfig', config);\n  }\n\n  /**\n   * Configures vehicle exhaustion to use an open number field,\n   * rather than a constrained set of levels.\n   *\n   * @example\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', async (api) => {\n   *   await api.config.exhaustion.useOpenNumberVehicleExhaustion();\n   * });\n   * ```\n   */\n  async useOpenNumberVehicleExhaustion(): Promise<void> {\n    const config: OpenExhaustionConfig = {\n      type: 'open',\n    };\n    await FoundryAdapter.setTidySetting('vehicleExhaustionConfig', config);\n  }\n\n  /**\n   * Configures vehicle exhaustion to use a constrained set of levels\n   * with optional hints (usually rendered as tooltips).\n   * @param params information needed to configure specific-level vehicle exhaustion\n   *\n   * @example Setting 3-level vehicle exhaustion\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', async (api) => {\n   *   await api.config.exhaustion.useSpecificLevelVehicleExhaustion({\n   *     totalLevels: 3,\n   *     hints: ['Ship shape', 'A shape', \"Uh oh, it's falling apart\", 'Borked'],\n   *   });\n   * });\n   * ```\n   */\n  async useSpecificLevelVehicleExhaustion(\n    params?: UseSpecificLevelExhaustionParams\n  ): Promise<void> {\n    const config: SpecificExhaustionConfig = {\n      type: 'specific',\n      hints: params?.hints ?? [],\n      levels: Math.max(params?.totalLevels ?? 1, 1),\n    };\n    await FoundryAdapter.setTidySetting('vehicleExhaustionConfig', config);\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport type { ContextMenuPositionInfo } from './context-menu.types';\nimport { TidyHooks } from 'src/foundry/TidyHooks';\n\n/**\n * A specialized subclass of ContextMenu that places the menu in a fixed position.\n * @extends {ContextMenu}\n */\nexport default class FloatingContextMenu extends ContextMenu {\n  constructor(...args: any[]) {\n    super(...args);\n  }\n\n  /** @override */\n  _setPosition([html]: [html: HTMLElement], [target]: [target: HTMLElement]) {\n    const positionInfo: ContextMenuPositionInfo = {\n      insertTarget: document.body,\n      html: html,\n      target: target,\n    };\n\n    if (\n      !TidyHooks.tidy5eSheetsPrepareFloatingContextMenuPosition(positionInfo)\n    ) {\n      return;\n    }\n\n    positionInfo.insertTarget.appendChild(html);\n    const { clientWidth, clientHeight } = positionInfo.insertTarget;\n    const { width, height } = html.getBoundingClientRect();\n\n    const { clientX, clientY } = window.event as MouseEvent;\n    const left = Math.min(clientX + 1, clientWidth - width);\n    this._expandUp = clientY + height > clientHeight;\n    html.classList.add('floating');\n    html.classList.add('tidy5e-sheet');\n    html.classList.toggle('expand-up', this._expandUp);\n    html.classList.toggle('expand-down', !this._expandUp);\n    html.style.visibility = '';\n    html.style.left = `${left}px`;\n    if (this._expandUp) html.style.bottom = `${clientHeight - clientY}px`;\n    else html.style.top = `${clientY}px`;\n    target.classList.add('context');\n  }\n}\n","<script lang=\"ts\">\n  import FloatingContextMenu from 'src/context-menu/FloatingContextMenu';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ContextMenuOption } from 'src/types/types';\n\n  export let containingElement: HTMLElement;\n  export let targetSelector: string;\n  export let options: ContextMenuOption[];\n\n  $: {\n    if (containingElement) {\n      initContextMenu(containingElement);\n    }\n  }\n\n  function initContextMenu(el: HTMLElement) {\n    new FloatingContextMenu(\n      FoundryAdapter.getJqueryWrappedElement(el),\n      targetSelector,\n      [],\n      {\n        onOpen: () => {\n          ui.context.menuItems = options;\n        },\n      },\n    );\n  }\n</script>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Item5e, ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import FloatingContextMenu from 'src/components/context-menu/FloatingContextMenu.svelte';\n  import type { ContextMenuOption } from 'src/types/types';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  function openItemImagePicker(target: HTMLImageElement, item: Item5e) {\n    const rect = target.getBoundingClientRect();\n    const current = item.img;\n    return FoundryAdapter.browseFilePicker({\n      type: 'image',\n      current,\n      callback: (path: string) => {\n        item.update({ img: path });\n      },\n      top: rect.top + 40,\n      left: rect.left + 10,\n    });\n  }\n\n  function showItemArt(item: Item5e) {\n    FoundryAdapter.renderImagePopout(item.img, {\n      title: FoundryAdapter.localize('TIDY5E.ItemImageTitle', {\n        subject: item.name,\n      }),\n      shareable: true,\n      uuid: item.uuid,\n    });\n  }\n\n  let itemImageContainer: HTMLElement;\n  let contextMenuOptions: ContextMenuOption[] = [];\n  $: contextMenuOptions = [\n    {\n      name: 'TIDY5E.ShowItemArt',\n      icon: '<i class=\"fa-solid fa-image fa-fw\"></i>',\n      callback: () => showItemArt($context.item),\n    },\n  ];\n</script>\n\n<FloatingContextMenu\n  containingElement={itemImageContainer}\n  targetSelector=\"[data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n    .ITEM_IMAGE_CONTAINER}]\"\n  options={contextMenuOptions}\n></FloatingContextMenu>\n<div\n  class=\"item-image item-image-show-item-art\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_IMAGE_CONTAINER}\n  bind:this={itemImageContainer}\n>\n  <!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n  <!-- svelte-ignore a11y-click-events-have-key-events -->\n  <!-- TODO: Figure out if there is an accessible way to provide this feature. -->\n  <img\n    class=\"profile\"\n    class:conceal={$context.item.system.identified === false}\n    src={$context.item.img}\n    alt={$context.item.name}\n    title=\"{localize('TIDY5E.EditActorImage')} / {localize(\n      'TIDY5E.ShowItemImage',\n    )}\"\n    on:click={(event) =>\n      openItemImagePicker(event.currentTarget, $context.item)}\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_IMAGE}\n  />\n  <div\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    class=\"unidentified-glyph\"\n    class:conceal={$context.item.system.identified === false}\n  >\n    <i class=\"fas fa-question\" />\n  </div>\n</div>\n","<script lang=\"ts\">\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n\n  export let document: any;\n  export let keyPath: string;\n  export let editable: boolean;\n\n  $: keyPathToCustom = `${keyPath}.custom`;\n\n  $: source = FoundryAdapter.getProperty<any>(document, keyPath);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"source-container flex-row extra-small-gap align-items-center\">\n  {#if source?.custom === source?.label || source?.label === ''}\n    <TextInput\n      {document}\n      field={keyPathToCustom}\n      value={source?.custom}\n      placeholder={localize('DND5E.Source')}\n      cssClass=\"source-custom\"\n    />\n  {:else}\n    <span class=\"source-label truncate\" title={source?.label ?? ''}\n      >{source?.label ?? ''}</span\n    >\n  {/if}\n  {#if editable}\n    <button\n      type=\"button\"\n      class=\"inline-icon-button config-button\"\n      on:click={() => FoundryAdapter.renderSourceConfig(document, keyPath)}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      ><i class=\"fas fa-cog\" /></button\n    >\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .source-container {\n    width: 100%;\n    line-height: inherit;\n\n    .source-label,\n    :global(.source-custom) {\n      flex: 1;\n      line-height: inherit;\n      height: inherit;\n    }\n\n    &:not(:hover) .config-button:not(:focus-visible) {\n      opacity: 0;\n      position: absolute;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if $context.system.identified}\n  <TextInput\n    document={$context.item}\n    field=\"name\"\n    value={$context.item.name}\n    attributes={{ 'data-tidy-item-name': $context.item.name }}\n    placeholder={localize('DND5E.ItemName')}\n    disabled={!$context.editable}\n    title={$context.item.name}\n  />\n{:else}\n  <TextInput\n    document={$context.item}\n    field=\"system.unidentified.name\"\n    value={$context.system.unidentified.name}\n    attributes={{\n      'data-tidy-item-name': $context.system.unidentified.name,\n    }}\n    placeholder={localize('DND5E.NameUnidentified')}\n    disabled={!$context.editable}\n    title={$context.identifiedName}\n  />\n{/if}\n","<script lang=\"ts\">\n  import TidySwitch from './TidySwitch.svelte';\n  import Dnd5eIcon from 'src/components/icon/Dnd5eIcon.svelte';\n  import { debug, error } from 'src/utils/logging';\n\n  export let document: any;\n  export let field: string;\n  export let checked: boolean;\n  export let title: string = '';\n  export let disabled: boolean = false;\n  export let iconSrc: string | null = null;\n  export let iconClass: string | null = null;\n\n  let switchOn: boolean = checked;\n\n  $: {\n    switchOn = checked;\n  }\n\n  async function handleChange(originalValue: boolean) {\n    try {\n      document.update({\n        [field]: !originalValue,\n      });\n    } catch (e) {\n      error('An error occurred while toggling a property', false, e);\n      debug('Property toggle error troubleshooting info', {\n        originalValue,\n        state: switchOn,\n      });\n      switchOn = originalValue;\n    }\n  }\n</script>\n\n<TidySwitch\n  class=\"flex-row small-gap tidy-property-toggle {switchOn\n    ? 'active'\n    : 'inactive'}\"\n  bind:value={switchOn}\n  on:change={(ev) => handleChange(ev.detail.originalValue)}\n  {title}\n  {disabled}\n>\n  {#if iconSrc}\n    <Dnd5eIcon src={iconSrc} />\n  {/if}\n  {#if iconClass}\n    <i class={iconClass}></i>\n  {/if}\n  <slot />\n</TidySwitch>\n","<script lang=\"ts\">\n  import PropertyToggle from 'src/components/toggle/PropertyToggle.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ContainerSheetContext,\n    ItemSheetContext,\n  } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext | ContainerSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: equipLabelWidthCh = Math.max(\n    localize('DND5E.Equipped').length,\n    localize('DND5E.Unequipped').length,\n  );\n  $: identifiedLabelWidthCh = Math.max(\n    localize('DND5E.Identified').length,\n    localize('DND5E.Unidentified.Title').length,\n  );\n</script>\n\n<div class=\"flex-row extra-small-gap flex-wrap\">\n  <PropertyToggle\n    document={$context.item}\n    field=\"system.equipped\"\n    checked={$context.system.equipped}\n    disabled={!$context.editable}\n    title={$context.system.equipped\n      ? localize('DND5E.Equipped')\n      : localize('DND5E.Unequipped')}\n    iconClass=\"fas fa-user-alt fa-fw\"\n  >\n    <div style=\"width: {equipLabelWidthCh}ch\">\n      {$context.system.equipped\n        ? localize('DND5E.Equipped')\n        : localize('DND5E.Unequipped')}\n    </div>\n  </PropertyToggle>\n\n  {#if FoundryAdapter.canIdentify($context.item)}\n    <PropertyToggle\n      document={$context.item}\n      field=\"system.identified\"\n      checked={$context.system.identified}\n      disabled={!$context.editable}\n      title={$context.system.identified\n        ? localize('DND5E.Identified')\n        : localize('DND5E.Unidentified.Title')}\n      iconClass=\"fas fa-magnifying-glass fa-fw\"\n    >\n      <div style=\"width: {identifiedLabelWidthCh}ch\">\n        {$context.system.identified\n          ? localize('DND5E.Identified')\n          : localize('DND5E.Unidentified.Title')}\n      </div>\n    </PropertyToggle>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemIdentifiableName from './parts/ItemIdentifiableName.svelte';\n  import ItemHeaderToggles from './parts/ItemHeaderToggles.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <ItemIdentifiableName />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>{$context.system.type.label}</li>\n      <li>\n        {#if $context.concealDetails}\n          <span>{localize('DND5E.Unidentified.Title')}</span>\n        {:else}\n          <Select\n            document={$context.item}\n            field=\"system.rarity\"\n            value={$context.system.rarity}\n            disabled={!$context.editable}\n            blankValue=\"\"\n          >\n            <SelectOptions data={$context.config.itemRarity} blank=\"\" />\n          </Select>\n        {/if}\n      </li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable && !$context.concealDetails}\n        />\n      </li>\n    </ul>\n    <ItemHeaderToggles />\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { fade } from 'svelte/transition';\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"unidentified-notice\" transition:fade={{ delay: 0, duration: 750 }}>\n  <div>\n    <strong>{localize('DND5E.Unidentified.Title')}</strong>\n    <p>{localize('DND5E.Unidentified.Notice')}</p>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .unidentified-notice {\n    position: absolute;\n    inset: 0;\n    display: grid;\n    place-content: start center;\n\n    div {\n      margin-block-start: 4rem;\n      margin-inline: auto;\n      padding: 2rem;\n      border: 0.0625rem solid var(--t5e-separator-color);\n      border-radius: 0.25rem;\n      box-shadow: 0 0 0.75rem rgb(0 0 0 / 45%);\n      background: var(--t5e-background);\n      text-align: center;\n\n      strong {\n        font-size: 1.5rem;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import UnidentifiedNotice from './UnidentifiedNotice.svelte';\n\n  export let conceal: boolean;\n</script>\n\n<div role=\"presentation\" class=\"concealing-parent inert-animation-container\">\n  <div role=\"presentation\" inert={conceal}>\n    <slot />\n  </div>\n  {#if conceal}\n    <UnidentifiedNotice />\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .concealing-parent {\n    flex: 1;\n    position: relative;\n  }\n</style>\n","<script lang=\"ts\">\n  import ContentConcealer from 'src/components/content-concealment/ContentConcealer.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import type { CharacterSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ItemSheetContext | CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: effects = Object.entries($context.effects) as Iterable<[string, any]>;\n\n  const localize = FoundryAdapter.localize;\n\n  function onAddClicked(section: any) {\n    const owner = $context.item;\n    return FoundryAdapter.addEffect(section.type, owner);\n  }\n\n  function handleMiddleClickToEdit(event: MouseEvent, effect: any) {\n    if (event.button === CONSTANTS.MOUSE_BUTTON_AUXILIARY) {\n      effect.sheet.render(true);\n    }\n  }\n\n  function handleDragStart(event: DragEvent, effect: any) {\n    if (!effect) {\n      return;\n    }\n\n    const dragData = effect.toDragData();\n    event.dataTransfer?.setData('text/plain', JSON.stringify(dragData));\n  }\n</script>\n\n<ContentConcealer conceal={$context.concealDetails}>\n  <ol\n    class=\"items-list effects-list\"\n    on:drop={(ev) => $context.item.sheet._onDrop(ev)}\n  >\n    {#each effects as [_, section]}\n      {#if !section.hidden}\n        <li class=\"items-header flexrow\" data-effect-type={section.type}>\n          <h3 class=\"item-name effect-name flexrow\">\n            {localize(section.label)}\n          </h3>\n          <div class=\"effect-source\">{localize('DND5E.Source')}</div>\n          <div class=\"effect-source\">{localize('DND5E.Duration')}</div>\n          <div class=\"item-controls active-effect-controls flexrow\">\n            {#if $context.editable}\n              <button\n                type=\"button\"\n                class=\"active-effect-control inline-icon-button\"\n                title={localize('DND5E.EffectCreate')}\n                on:click={(event) => onAddClicked(section)}\n                tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n              >\n                <i class=\"fas fa-plus\" />\n                {localize('DND5E.Add')}\n              </button>\n            {/if}\n          </div>\n        </li>\n\n        {#if section.info}\n          <ol class=\"info\">\n            {#each section.info as info}\n              <li class=\"notification info\">{info ?? ''}</li>\n            {/each}\n          </ol>\n        {/if}\n\n        <ol class=\"item-list\">\n          {#each section.effects as effect}\n            <!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n            <li\n              class=\"item effect flexrow\"\n              data-effect-id={effect.id}\n              on:mousedown={(event) => handleMiddleClickToEdit(event, effect)}\n              on:dragstart={(ev) => handleDragStart(ev, effect)}\n              draggable={true}\n            >\n              <div class=\"item-name effect-name flexrow\">\n                <img\n                  class=\"item-image\"\n                  src={effect.img ?? effect.icon}\n                  alt={effect.name ?? ''}\n                />\n                <h4>{effect.name ?? ''}</h4>\n              </div>\n              <div class=\"effect-source\">{effect.sourceName ?? ''}</div>\n              <div class=\"effect-duration\">\n                {effect.duration.label ?? ''}\n              </div>\n              <div class=\"item-controls active-effect-controls flexrow\">\n                {#if $context.editable}\n                  {#if section.type !== 'enchantment'}\n                    <button\n                      type=\"button\"\n                      class=\"active-effect-control inline-transparent-button\"\n                      title={effect.disabled\n                        ? 'DND5E.EffectEnable'\n                        : 'DND5E.EffectDisable'}\n                      on:click={() =>\n                        effect.update({ disabled: !effect.disabled })}\n                      tabindex={$settingStore.useAccessibleKeyboardSupport\n                        ? 0\n                        : -1}\n                    >\n                      <i\n                        class=\"fas\"\n                        class:fa-check={effect.disabled}\n                        class:fa-times={!effect.disabled}\n                      />\n                    </button>\n                  {/if}\n                  <button\n                    type=\"button\"\n                    class=\"active-effect-control inline-transparent-button\"\n                    title={localize('DND5E.EffectEdit')}\n                    on:click={() => effect.sheet.render(true)}\n                    tabindex={$settingStore.useAccessibleKeyboardSupport\n                      ? 0\n                      : -1}\n                  >\n                    <i class=\"fas fa-edit\" />\n                  </button>\n                  <button\n                    type=\"button\"\n                    class=\"active-effect-control inline-transparent-button\"\n                    title={localize('DND5E.EffectDelete')}\n                    on:click={() => effect.deleteDialog()}\n                    tabindex={$settingStore.useAccessibleKeyboardSupport\n                      ? 0\n                      : -1}\n                  >\n                    <i class=\"fas fa-trash\" />\n                  </button>\n                {/if}\n              </div>\n            </li>\n          {/each}\n        </ol>\n      {/if}\n    {/each}\n  </ol>\n</ContentConcealer>\n","<script lang=\"ts\">\n  import { error } from 'src/utils/logging';\n\n  export let svgUrl: string;\n  export let removeInlineStyles: boolean = true;\n\n  let svgHtml: string = '';\n  $: {\n    (async () => {\n      if (!svgUrl) {\n        return;\n      }\n\n      try {\n        const response = await fetch(svgUrl);\n        if (response.ok) {\n          svgHtml = await response.text();\n        }\n      } catch (e) {\n        error(\n          'An error occurred while getting SVG images. See devtools console for more details.',\n          true,\n          e\n        );\n        svgHtml = `<img src=\"${svgUrl}\" alt=\"\" />`;\n      }\n    })();\n  }\n\n  function preprocessSvg(node: HTMLElement) {\n    removeInlineStyles && node.querySelector('svg')?.removeAttribute('style');\n  }\n</script>\n\n{#key svgHtml}\n  <div use:preprocessSvg>\n    {@html svgHtml}\n  </div>\n{/key}\n","<script lang=\"ts\">\n  import InlineSvg from 'src/components/utility/InlineSvg.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { Item5e, ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: advancements = Object.entries($context.advancement) as Iterable<\n    [string, any]\n  >;\n\n  const localize = FoundryAdapter.localize;\n\n  function toggleAdvancementLock(item: Item5e) {\n    $context.toggleAdvancementLock();\n  }\n\n  const basicSvgFilePathRegex = /\\.svg$/i;\n\n  function isSvg(iconPath: string) {\n    return basicSvgFilePathRegex.test(iconPath?.trim());\n  }\n\n  function handleAdvancementDragStart(event: DragEvent, advancement: any) {\n    if (!advancement) {\n      return;\n    }\n\n    const dragData =\n      $context.item.advancement.byId[advancement.id]?.toDragData();\n    event.dataTransfer?.setData('text/plain', JSON.stringify(dragData));\n  }\n</script>\n\n<ol\n  class=\"items-list flex-1\"\n  on:drop={(ev) => $context.owner && $context.item.sheet._onDrop(ev)}\n>\n  {#if $context.editable}\n    <li\n      class=\"items-header main-controls advancement flex-row justify-content-space-between\"\n    >\n      <div class=\"item-controls configuration-mode-control\">\n        {#if $context.editable && $context.isEmbedded}\n          <button\n            class=\"inline-icon-button\"\n            on:click={() => toggleAdvancementLock($context.item)}\n            title={localize('DND5E.AdvancementConfigurationActionDisable')}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          >\n            {#if $context.advancementEditable}\n              <i class=\"fas fa-lock-open\" />\n              {localize('DND5E.AdvancementConfigurationModeEnabled')}\n            {:else}\n              <i class=\"fas fa-lock\" />\n              {localize('DND5E.AdvancementConfigurationModeDisabled')}\n            {/if}\n          </button>\n        {/if}\n      </div>\n      {#if $context.editable && $context.advancementEditable}\n        <div class=\"item-controls add-button\">\n          <button\n            type=\"button\"\n            class=\"inline-icon-button\"\n            title={localize('DND5E.AdvancementControlCreate')}\n            aria-label={localize('DND5E.AdvancementControlCreate')}\n            on:click={() =>\n              FoundryAdapter.createAdvancementSelectionDialog($context.item)}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          >\n            <i class=\"fas fa-plus\" />\n            {localize('DND5E.Add')}\n          </button>\n        </div>\n      {:else}\n        <div role=\"presentation\" />\n      {/if}\n    </li>\n  {/if}\n\n  {#each advancements as [level, data]}\n    <li class=\"items-header flexrow\" data-level={level}>\n      <h3 class=\"item-name flexrow\">\n        {#if level === '0'}\n          {localize('DND5E.AdvancementLevelAnyHeader')}\n        {:else if level === 'unconfigured'}\n          {localize('DND5E.AdvancementLevelNoneHeader')}\n        {:else}\n          {localize('DND5E.AdvancementLevelHeader', { level })}\n        {/if}\n      </h3>\n\n      {#if $context.editable && data.configured && level !== 'unconfigured'}\n        <div>\n          <button\n            type=\"button\"\n            class=\"inline-transparent-button\"\n            on:click={() =>\n              FoundryAdapter.modifyAdvancementChoices(level, $context.item)}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          >\n            {localize('DND5E.AdvancementModifyChoices')}\n          </button>\n        </div>\n      {/if}\n\n      {#if data.configured === 'full'}\n        <div\n          class=\"item-checkmark\"\n          title={localize('DND5E.AdvancementConfiguredComplete')}\n        >\n          <i class=\"fas fa-check-circle\" />\n        </div>\n      {:else if data.configured === 'partial'}\n        <div\n          class=\"item-warning\"\n          title={localize('DND5E.AdvancementConfiguredIncomplete')}\n        >\n          <i class=\"fas fa-exclamation-triangle\" />\n        </div>\n      {/if}\n    </li>\n    <ol class=\"item-list\">\n      {#each data.items as advancement}\n        {@const isSvgIcon = isSvg(advancement.icon)}\n        <li\n          class=\"advancement-item item flexrow\"\n          data-id={advancement.id}\n          on:dragstart={(ev) => handleAdvancementDragStart(ev, advancement)}\n          draggable={$context.owner}\n        >\n          <div class=\"item-name flexrow\">\n            <div class=\"item-image\" class:svg={isSvgIcon}>\n              {#if isSvgIcon}\n                <InlineSvg svgUrl={advancement.icon} />\n              {:else}\n                <img src={advancement.icon} alt=\"\" />\n              {/if}\n            </div>\n            <h4>{@html advancement.title}</h4>\n          </div>\n          {#if $context.advancementEditable || !$context.isEmbedded}\n            <div class=\"flexrow\">\n              {#if advancement.classRestriction === 'primary'}\n                {localize('DND5E.AdvancementClassRestrictionPrimary')}\n              {:else if advancement.classRestriction === 'secondary'}\n                {localize('DND5E.AdvancementClassRestrictionSecondary')}\n              {/if}\n            </div>\n          {/if}\n          {#if $context.editable && $context.advancementEditable}\n            <div class=\"item-controls flexrow\">\n              <button\n                type=\"button\"\n                class=\"inline-icon-button\"\n                title={localize('DND5E.AdvancementControlEdit')}\n                aria-label={localize('DND5E.AdvancementControlEdit')}\n                on:click={() =>\n                  FoundryAdapter.editAdvancement(advancement.id, $context.item)}\n                tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n              >\n                <i class=\"fas fa-edit\" />\n              </button>\n              <button\n                type=\"button\"\n                class=\"inline-icon-button\"\n                title={localize('DND5E.AdvancementControlDelete')}\n                aria-label={localize('DND5E.AdvancementControlDelete')}\n                on:click={() =>\n                  FoundryAdapter.deleteAdvancement(\n                    advancement.id,\n                    $context.item,\n                  )}\n                tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n              >\n                <i class=\"fas fa-trash\" />\n              </button>\n            </div>\n          {/if}\n          {#if advancement.summary}\n            <div class=\"item-summary\">\n              {@html advancement.summary}\n            </div>\n          {/if}\n        </li>\n      {/each}\n    </ol>\n  {/each}\n</ol>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let field: string | null = null;\n  export let labelText: string | null = null;\n  export let cssClass: string = '';\n\n  $: inputId =\n    field !== null ? `${$context.appId}-${field.replaceAll('.', '-')}` : null;\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<div class=\"form-group {cssClass}\" data-form-group-for={field ?? null}>\n  {#if labelText !== null}\n    <label for={inputId}>{labelText} <slot name=\"inside-after-label\" /></label>\n  {/if}\n  <slot {inputId} />\n</div>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { coalesce } from 'src/utils/formatting';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<h3 class=\"form-header flex-row justify-content-space-between\">\n  {localize('DND5E.StartingEquipment.Title')}\n  <span>\n    <button\n      type=\"button\"\n      class=\"configure-starting-equipment inline-icon-button\"\n      title={localize('DND5E.StartingEquipment.Action.Configure')}\n      aria-label={localize('DND5E.StartingEquipment.Action.Configure')}\n      on:click={() => FoundryAdapter.openStartingEquipmentConfig($context.item)}\n    >\n      <i class=\"fas fa-gear\"></i>\n    </button>\n  </span>\n</h3>\n\n{@html coalesce($context.system.startingEquipmentDescription, localize('None'))}\n\n<style lang=\"scss\">\n  span:has(.configure-starting-equipment) {\n    font-size: 0.875rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import ItemStartingEquipment from '../parts/ItemStartingEquipment.svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemFormGroup labelText={localize('DND5E.Identifier')}>\n  <div class=\"form-fields\">\n    <TextInput\n      document={$context.item}\n      field=\"system.identifier\"\n      value={$context.system.identifier}\n      placeholder={$context.item.identifier}\n    ></TextInput>\n  </div>\n  <p class=\"hint\">{localize('DND5E.IdentifierError')}</p>\n</ItemFormGroup>\n\n<ItemStartingEquipment />\n","<script lang=\"ts\">\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemFormGroup\n  field=\"system.spellcasting.progression\"\n  labelText={localize('DND5E.SpellProgression')}\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.spellcasting.progression\"\n      value={$context.system.spellcasting.progression}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.config.spellProgression} />\n    </Select>\n  </div>\n</ItemFormGroup>\n\n<ItemFormGroup\n  field=\"system.spellcasting.ability\"\n  labelText={localize('DND5E.SpellAbility')}\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.spellcasting.ability\"\n      value={$context.system.spellcasting.ability}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.abilities}\n        labelProp=\"label\"\n        blank=\"\"\n      />\n    </Select>\n  </div>\n</ItemFormGroup>\n","<script lang=\"ts\">\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemSpellcasting from '../parts/ItemSpellcasting.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ItemStartingEquipment from '../parts/ItemStartingEquipment.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemFormGroup\n  labelText={localize('DND5E.Identifier')}\n  field=\"system.identifier\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.identifier\"\n      value={$context.system.identifier}\n      placeholder={$context.item.identifier}\n      disabled={!$context.editable}\n    />\n  </div>\n  <p class=\"hint\">\n    {@html localize('DND5E.ClassIdentifierHint', {\n      identifier: $context.item.identifier,\n    })}\n    {localize('DND5E.IdentifierError')}\n  </p>\n</ItemFormGroup>\n\n<ItemFormGroup\n  labelText={localize('DND5E.HitDice')}\n  field=\"system.hitDice\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.hitDice\"\n      value={$context.system.hitDice}\n      disabled={!$context.editable}\n    >\n      {#each $context.config.hitDieTypes as type}\n        <option value={type}>{type}</option>\n      {/each}\n    </Select>\n  </div>\n</ItemFormGroup>\n\n<ItemFormGroup\n  labelText={localize('DND5E.HitDiceUsed')}\n  field=\"system.hitDiceUsed\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <NumberInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.hitDiceUsed\"\n      value={$context.system.hitDiceUsed}\n      placeholder=\"0\"\n      disabled={!$context.editable}\n    />\n  </div>\n</ItemFormGroup>\n\n<h3 class=\"form-header\">{localize('DND5E.Spellcasting')}</h3>\n<ItemSpellcasting />\n\n<ItemStartingEquipment />\n\n<ItemFormGroup\n  labelText={localize('DND5E.StartingEquipment.Wealth.Label')}\n  field=\"system.wealth\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <TextInput\n      id={inputId}\n      value={$context.system.wealth}\n      field=\"system.wealth\"\n      document={$context.item}\n      disabled={!$context.editable}\n    />\n  </div>\n  <p class=\"hint\">{localize('DND5E.StartingEquipment.Wealth.Hint')}</p>\n</ItemFormGroup>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemFormGroup\n  labelText={localize('DND5E.ItemActivationCost')}\n  cssClass=\"input-select\"\n  field=\"system.activation.cost\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    {#if $context.system.activation.type && !$context.isCostlessAction}\n      <NumberInput\n        id={inputId}\n        value={$context.system.activation.cost}\n        title={localize('DND5E.ConsumeQuanity')}\n        field=\"system.activation.cost\"\n        placeholder=\"&#8212;\"\n        document={$context.item}\n        disabled={!$context.editable}\n      />\n    {/if}\n    <Select\n      id=\"{$context.appId}-system-activation-type\"\n      value={$context.system.activation.type?.toString() ?? ''}\n      title={localize('DND5E.ItemActivationType')}\n      document={$context.item}\n      field=\"system.activation.type\"\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.config.abilityActivationTypes} blank=\"\" />\n    </Select>\n  </div>\n</ItemFormGroup>\n\n{#if $context.system.activation.type}\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemActivationCondition')}\n    field=\"system.activation.condition\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      <TextInput\n        id={inputId}\n        value={$context.system.activation.condition}\n        field=\"system.activation.condition\"\n        document={$context.item}\n        disabled={!$context.editable}\n      />\n    </div>\n  </ItemFormGroup>\n\n  {#if $context.isCrewed}\n    <ItemFormGroup\n      labelText={localize('DND5E.Cover')}\n      field=\"system.cover\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <Select\n          id={inputId}\n          value={$context.system.cover?.toString()}\n          title={localize('DND5E.ItemActivationType')}\n          document={$context.item}\n          field=\"system.cover\"\n          disabled={!$context.editable}\n        >\n          <SelectOptions data={$context.config.cover} blank=\"\" />\n        </Select>\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    cssClass=\"input-select-select\"\n    labelText={localize('DND5E.Target')}\n    field=\"system.target.type\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      {#if $context.system.hasScalarTarget}\n        <NumberInput\n          id=\"{$context.appId}-system-target-value\"\n          value={$context.system.target.value}\n          placeholder=\"&mdash;\"\n          field=\"system.target.value\"\n          document={$context.item}\n          disabled={!$context.editable}\n        />\n      {/if}\n      {#if $context.system.hasAreaTarget}\n        <Select\n          id=\"{$context.appId}-system-target-units\"\n          value={$context.system.target.units}\n          title={localize('DND5E.TargetUnits')}\n          field=\"system.target.units\"\n          document={$context.item}\n          disabled={!$context.editable}\n        >\n          <option value=\"\" />\n          <SelectOptions data={$context.config.movementUnits} />\n        </Select>\n      {/if}\n      <Select\n        id={inputId}\n        value={$context.system.target.type}\n        title={localize('DND5E.TargetType')}\n        field=\"system.target.type\"\n        document={$context.item}\n        disabled={!$context.editable}\n      >\n        <option value=\"\">{localize('DND5E.None')}</option>\n        <optgroup label={localize('DND5E.TargetTypeIndividual')}>\n          <SelectOptions data={$context.config.individualTargetTypes} />\n        </optgroup>\n        <optgroup label={localize('DND5E.TargetTypeArea')}>\n          <SelectOptions\n            data={$context.config.areaTargetTypes}\n            labelProp=\"label\"\n          />\n        </optgroup>\n      </Select>\n    </div>\n  </ItemFormGroup>\n\n  {#if $context.isLine}\n    <ItemFormGroup\n      cssClass=\"input-select-select\"\n      labelText={localize('DND5E.TargetWidth')}\n      field=\"system.target.width\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <NumberInput\n          id={inputId}\n          value={$context.system.target.width}\n          placeholder=\"&mdash;\"\n          field=\"system.target.width\"\n          document={$context.item}\n          disabled={!$context.editable}\n        />\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    cssClass=\"input-select\"\n    labelText={localize('DND5E.Range')}\n    field=\"system.range.units\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      {#if $context.system.hasScalarRange}\n        <NumberInput\n          id=\"{$context.appId}-system-target-width\"\n          value={$context.system.range.value}\n          placeholder={localize('DND5E.Normal')}\n          title={localize('DND5E.RangeNormal')}\n          field=\"system.range.value\"\n          document={$context.item}\n          disabled={!$context.editable}\n        />\n        <span class=\"sep\">/</span>\n        <NumberInput\n          id=\"{$context.appId}-system-range-long\"\n          value={$context.system.range.long}\n          placeholder={localize('DND5E.Long')}\n          title={localize('DND5E.RangeLong')}\n          field=\"system.range.long\"\n          document={$context.item}\n          disabled={!$context.editable}\n        />\n      {/if}\n      <Select\n        id={inputId}\n        value={$context.system.range.units}\n        title={localize('DND5E.RangeUnits')}\n        document={$context.item}\n        field=\"system.range.units\"\n        disabled={!$context.editable}\n      >\n        <option value=\"\">{localize('DND5E.None')}</option>\n        <optgroup label={localize('DND5E.RangeDistance')}>\n          <SelectOptions data={$context.config.movementUnits} />\n        </optgroup>\n        <SelectOptions data={$context.config.rangeTypes} />\n      </Select>\n    </div>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    cssClass=\"input-select\"\n    labelText={localize('DND5E.Duration')}\n    field=\"system.duration.units\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      {#if $context.system.hasScalarDuration}\n        <TextInput\n          id=\"{$context.appId}-source-duration-value\"\n          value={$context.source.duration.value}\n          placeholder=\"&mdash;\"\n          title={localize('DND5E.DurationValue')}\n          field=\"system.duration.value\"\n          document={$context.item}\n          dataset={{ formulaEditor: true }}\n          disabled={!$context.editable}\n        />\n      {/if}\n      <Select\n        id={inputId}\n        value={$context.system.duration.units}\n        title={localize('DND5E.DurationType')}\n        document={$context.item}\n        field=\"system.duration.units\"\n        disabled={!$context.editable}\n      >\n        <option value=\"\">{localize('DND5E.None')}</option>\n        <optgroup label={localize('DND5E.DurationTime')}>\n          <SelectOptions data={$context.config.scalarTimePeriods} />\n        </optgroup>\n        <optgroup label={localize('DND5E.DurationPermanent')}>\n          <SelectOptions data={$context.config.permanentTimePeriods} />\n        </optgroup>\n        <SelectOptions data={$context.config.specialTimePeriods} />\n      </Select>\n    </div>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    cssClass=\"uses-per\"\n    labelText={localize('DND5E.LimitedUses')}\n    field=\"system.uses.per\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      {#if $context.system.uses.per}\n        <NumberInput\n          id=\"{$context.appId}-system-uses-value\"\n          value={$context.system.uses.value}\n          title={localize('DND5E.UsesAvailable')}\n          field=\"system.uses.value\"\n          document={$context.item}\n        />\n        <span class=\"sep\">{localize('DND5E.of')}</span>\n        <TextInput\n          id=\"{$context.appId}-system-uses-max\"\n          value={$context.source.uses.max}\n          title={localize('DND5E.UsesMax')}\n          field=\"system.uses.max\"\n          document={$context.item}\n          dataset={{ formulaEditor: true }}\n          disabled={!$context.editable}\n        />\n        <span class=\"sep\">{localize('DND5E.per')}</span>\n      {/if}\n      <Select\n        id={inputId}\n        value={$context.system.uses.per}\n        title={localize('DND5E.UsesPeriod')}\n        document={$context.item}\n        field=\"system.uses.per\"\n        disabled={!$context.editable}\n      >\n        <SelectOptions\n          data={$context.config.limitedUsePeriods}\n          blank={localize('DND5E.None')}\n          labelProp=\"label\"\n        />\n      </Select>\n    </div>\n  </ItemFormGroup>\n\n  {#if $context.isFormulaRecharge}\n    <ItemFormGroup\n      labelText={localize('DND5E.RecoveryFormula')}\n      field=\"system.uses.recovery\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <TextInput\n          id={inputId}\n          value={$context.system.uses.recovery}\n          document={$context.item}\n          field=\"system.uses.recovery\"\n          dataset={{ formulaEditor: true }}\n          disabled={!$context.editable}\n        />\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    cssClass=\"consumption\"\n    labelText={localize('DND5E.ConsumeTitle')}\n    field=\"system.consume.type\"\n    let:inputId\n  >\n    <div class=\"form-fields flex-wrap\">\n      {#if $context.system.consume.type}\n        <NumberInput\n          id=\"{$context.appId}-system-consume-amount\"\n          value={$context.system.consume.amount}\n          title={localize('DND5E.ConsumeAmount')}\n          field=\"system.consume.amount\"\n          document={$context.item}\n          disabled={!$context.editable}\n          placeholder={localize('DND5E.QuantityAbbr')}\n          cssClass=\"qty-flex-basis\"\n        />\n        {#if $context.abilityConsumptionHint}\n          <TextInput\n            document={$context.item}\n            field=\"system.consume.target\"\n            value={$context.system.consume.target}\n            placeholder={localize($context.abilityConsumptionHint)}\n          />\n        {:else}\n          <Select\n            id=\"{$context.appId}-system-consume-target\"\n            value={$context.system.consume.target}\n            title={localize('DND5E.ConsumeTarget')}\n            document={$context.item}\n            field=\"system.consume.target\"\n            disabled={!$context.editable}\n          >\n            <option value=\"\" />\n            <SelectOptions data={$context.abilityConsumptionTargets} />\n          </Select>\n        {/if}\n      {/if}\n      <Select\n        id={inputId}\n        value={$context.system.consume.type}\n        title={localize('DND5E.ConsumeType')}\n        document={$context.item}\n        field=\"system.consume.type\"\n        disabled={!$context.editable}\n        class=\"flex-basis-full\"\n      >\n        <option value=\"\">{localize('DND5E.None')}</option>\n        <SelectOptions data={$context.config.abilityConsumptionTypes} />\n      </Select>\n    </div>\n  </ItemFormGroup>\n\n  <ItemFormGroup cssClass=\"stacked\">\n    {#if $context.item.type === 'consumable'}\n      <Checkbox\n        labelCssClass=\"checkbox\"\n        document={$context.item}\n        field=\"system.uses.autoDestroy\"\n        checked={$context.system.uses.autoDestroy}\n        disabled={!$context.editable}\n        title={localize('DND5E.ItemDestroyEmptyTooltip')}\n      >\n        {localize('DND5E.ItemDestroyEmpty')}\n      </Checkbox>\n    {/if}\n    {#if $context.item.hasAreaTarget}\n      <Checkbox\n        labelCssClass=\"checkbox\"\n        document={$context.item}\n        field=\"system.target.prompt\"\n        checked={$context.system.target.prompt}\n        disabled={!$context.editable}\n        title={localize('DND5E.TemplatePromptTooltip')}\n      >\n        {localize('DND5E.TemplatePrompt')}\n      </Checkbox>\n    {/if}\n    {#if $context.system.uses.per}\n      <Checkbox\n        labelCssClass=\"checkbox\"\n        document={$context.item}\n        field=\"system.uses.prompt\"\n        checked={$context.system.uses.prompt}\n        disabled={!$context.editable}\n        title={localize('DND5E.LimitedUsesPromptTooltip')}\n      >\n        {localize('DND5E.LimitedUsesPrompt')}\n      </Checkbox>\n    {/if}\n    {#if $context.item.type === 'spell' && $context.system.consume.type}\n      <Checkbox\n        labelCssClass=\"checkbox\"\n        document={$context.item}\n        field=\"system.consume.scale\"\n        checked={$context.system.consume.scale}\n        disabled={!$context.editable}\n        title={localize('DND5E.ConsumeScalingTooltip')}\n      >\n        {localize('DND5E.ConsumeScaling')}\n      </Checkbox>\n    {/if}\n  </ItemFormGroup>\n{/if}\n","<script lang=\"ts\">\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: damageIsEnchanted = !!FoundryAdapter.getProperty(\n    $context.item.overrides,\n    'system.damage.parts',\n  );\n  $: enchantedTooltip = damageIsEnchanted\n    ? localize('DND5E.Enchantment.Warning.Override')\n    : null;\n\n  function addDamageFormula() {\n    const damage = $context.item.system.damage;\n    return $context.item.update({\n      'system.damage.parts': damage.parts.concat([['', '']]),\n    });\n  }\n\n  function deleteDamageFormula(index: number) {\n    const damage = FoundryAdapter.deepClone($context.item.system.damage);\n    damage.parts.splice(index, 1);\n    return $context.item.update({ 'system.damage.parts': damage.parts });\n  }\n\n  $: damageParts = [...$context.system.damage.parts];\n\n  // TODO: Leverage a more generalized data batching scheme and plug in the proper components instead of raw elements.\n  function saveDamageFormulae() {\n    $context.item.update({\n      'system.damage.parts': damageParts,\n    });\n  }\n</script>\n\n<ItemFormGroup\n  cssClass=\"select\"\n  labelText={localize('DND5E.ItemActionType')}\n  field=\"system.actionType\"\n  let:inputId\n>\n  <Select\n    id={inputId}\n    value={$context.system.actionType}\n    document={$context.item}\n    field=\"system.actionType\"\n    disabled={!$context.editable}\n  >\n    <SelectOptions data={$context.config.itemActionTypes} blank=\"\" />\n  </Select>\n</ItemFormGroup>\n\n{#if $context.system.actionType}\n  <ItemFormGroup\n    cssClass=\"select\"\n    labelText={localize('DND5E.AbilityModifier')}\n    field=\"system.ability\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      value={$context.system.ability}\n      document={$context.item}\n      field=\"system.ability\"\n      disabled={!$context.editable}\n    >\n      <option value=\"\">{localize('DND5E.Default')}</option>\n      <option value=\"none\">{localize('DND5E.None')}</option>\n      <optgroup label={localize('DND5E.Ability')}>\n        <SelectOptions data={$context.config.abilities} labelProp=\"label\" />\n      </optgroup>\n    </Select>\n  </ItemFormGroup>\n\n  {#if $context.system.hasAttack}\n    <ItemFormGroup\n      labelText={localize('DND5E.ItemAttackBonus')}\n      field=\"system.attack.bonus\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <TextInput\n          id={inputId}\n          document={$context.item}\n          field=\"system.attack.bonus\"\n          value={$context.system.attack.bonus}\n          dataset={{ formulaEditor: true }}\n          disabled={!$context.editable}\n        />\n        <Checkbox\n          id=\"{$context.appId}-system-attack-flat\"\n          document={$context.item}\n          field=\"system.attack.flat\"\n          checked={$context.system.attack.flat}\n          labelCssClass=\"checkbox\"\n          greenCheckboxWidthOverride=\"{localize('DND5E.ItemAttackFlat').length +\n            4}ch\"\n          title={localize('DND5E.ItemAttackFlatHint')}\n        >\n          {localize('DND5E.ItemAttackFlat')}\n        </Checkbox>\n      </div>\n    </ItemFormGroup>\n\n    <ItemFormGroup\n      labelText={localize('DND5E.ItemCritThreshold')}\n      field=\"system.critical.threshold\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <NumberInput\n          id={inputId}\n          value={$context.system.critical.threshold}\n          document={$context.item}\n          field=\"system.critical.threshold\"\n          placeholder=\"20\"\n          max=\"20\"\n          min=\"1\"\n          step=\"1\"\n          disabled={!$context.editable}\n        />\n      </div>\n    </ItemFormGroup>\n\n    <ItemFormGroup\n      labelText={localize('DND5E.ItemCritExtraDamage')}\n      field=\"system.critical.damage\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <TextInput\n          id={inputId}\n          document={$context.item}\n          field=\"system.critical.damage\"\n          value={$context.system.critical.damage}\n          disabled={!$context.editable}\n        />\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <h4 class=\"damage-header\">\n    {#if $context.isHealing}\n      {localize('DND5E.Healing')}\n    {:else}\n      {localize('DND5E.Damage')}\n    {/if}\n    {localize('DND5E.Formula')}\n    <button\n      type=\"button\"\n      class=\"damage-formula-control add-damage\"\n      on:click={() => addDamageFormula()}\n      disabled={!$context.editable || damageIsEnchanted}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      data-tooltip={enchantedTooltip}\n    >\n      <i class=\"fas fa-plus\" />\n    </button>\n  </h4>\n  {#if damageParts?.length}\n    <ol class=\"damage-parts form-group\">\n      {#each damageParts as [formula, damageType], i}\n        <li\n          class=\"damage-part flexrow\"\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.DAMAGE_PART_CONTAINER}\n          data-tidy-damage-part-index={i}\n        >\n          <input\n            id=\"{$context.appId}-system-damage-part-{i}-0\"\n            type=\"text\"\n            bind:value={formula}\n            data-formula-editor\n            on:change={() => saveDamageFormulae()}\n            disabled={!$context.editable || damageIsEnchanted}\n            data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.DAMAGE_PART_FORMULA}\n            data-tidy-field={`system.damage.part-${i}-0`}\n            data-tooltip={enchantedTooltip}\n          />\n          <select\n            id=\"{$context.appId}-system-damage-part-{i}-1\"\n            bind:value={damageType}\n            data-formula-editor\n            on:change={() => saveDamageFormulae()}\n            disabled={!$context.editable || damageIsEnchanted}\n            data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.DAMAGE_PART_TYPE}\n            data-tidy-field={`system.damage.part-${i}-1`}\n            data-tooltip={enchantedTooltip}\n          >\n            <option value=\"\">{localize('DND5E.None')}</option>\n            <optgroup label={localize('DND5E.Damage')}>\n              <SelectOptions\n                data={$context.config.damageTypes}\n                labelProp=\"label\"\n              />\n            </optgroup>\n            <optgroup label={localize('DND5E.Healing')}>\n              <SelectOptions\n                data={$context.config.healingTypes}\n                labelProp=\"label\"\n              />\n            </optgroup>\n          </select>\n          <button\n            type=\"button\"\n            class=\"damage-formula-control delete-damage\"\n            on:click={() => deleteDamageFormula(i)}\n            disabled={!$context.editable || damageIsEnchanted}\n            data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n              .DAMAGE_PART_DELETE_COMMAND}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            data-tooltip={enchantedTooltip}\n          >\n            <i class=\"fas fa-minus\" />\n          </button>\n        </li>\n      {/each}\n    </ol>\n  {/if}\n\n  {#if $context.system.damage.parts.length}\n    <ItemFormGroup\n      labelText={localize('DND5E.VersatileDamage')}\n      field=\"system.damage.versatile\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <TextInput\n          id={inputId}\n          value={$context.system.damage.versatile}\n          placeholder={localize('DND5E.Formula')}\n          dataset={{ formulaEditor: true }}\n          document={$context.item}\n          field=\"system.damage.versatile\"\n          disabled={!$context.editable}\n          additionalDataToSave={{\n            // TODO: Use more universal/generalized batch saving scheme that shares the same logic between here and the related properties.\n            'system.damage.parts': damageParts,\n          }}\n        />\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    labelText={localize('DND5E.OtherFormula')}\n    field=\"system.formula\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      <TextInput\n        id={inputId}\n        document={$context.item}\n        field=\"system.formula\"\n        value={$context.system.formula}\n        placeholder={localize('DND5E.Formula')}\n        dataset={{ formulaEditor: true }}\n        disabled={!$context.editable}\n      />\n    </div>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    cssClass=\"input-select\"\n    labelText={localize('DND5E.ActionSave')}\n    field=\"system.save.ability\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      <Select\n        id={inputId}\n        value={$context.system.save.ability}\n        document={$context.item}\n        field=\"system.save.ability\"\n        disabled={!$context.editable}\n      >\n        <SelectOptions\n          data={$context.config.abilities}\n          labelProp=\"label\"\n          blank=\"\"\n        />\n      </Select>\n      <span>{localize('DND5E.VsDC')}</span>\n      <NumberInput\n        id=\"{$context.appId}-system-save-dc\"\n        step=\"any\"\n        document={$context.item}\n        field=\"system.save.dc\"\n        value={$context.system.save.dc ?? null}\n        placeholder={localize('DND5E.AbbreviationDC')}\n        disabled={!$context.editable || !$context.isFlatDC}\n      />\n      <Select\n        id=\"{$context.appId}-system-save-scaling\"\n        document={$context.item}\n        field=\"system.save.scaling\"\n        value={$context.system.save.scaling}\n        disabled={!$context.editable}\n      >\n        <option value=\"spell\">{localize('DND5E.Spellcasting')}</option>\n        <SelectOptions data={$context.config.abilities} labelProp=\"label\" />\n        <option value=\"flat\">{localize('DND5E.Flat')}</option>\n      </Select>\n    </div>\n  </ItemFormGroup>\n\n  {#if $context.system.isEnchantment}\n    <ItemFormGroup\n      labelText={localize('DND5E.Enchantment.Label')}\n      cssClass=\"enchantment\"\n    >\n      <div class=\"form-fields\">\n        <button\n          type=\"button\"\n          class=\"inline-transparent-button no-wrap highlight-on-hover\"\n          on:click={() => FoundryAdapter.openEnchantmentConfig($context.item)}\n        >\n          <i class=\"fa-solid fa-gear\" aria-hidden=\"true\"></i>\n          {localize('DND5E.Enchantment.Action.Configure')}\n        </button>\n      </div>\n      {#if $context.appliedEnchantments?.length}\n        <ul class=\"separated-list\">\n          {#each $context.appliedEnchantments as ae}\n            <li class=\"item\" data-enchantment-uuid={ae.enchantment.uuid}>\n              <div class=\"details flexrow\">\n                <img class=\"list-icon\" src={ae.item.img} alt={ae.name} />\n                <span class=\"name\">\n                  {#if ae.actor}\n                    {@html localize('DND5E.Enchantment.Items.Entry', {\n                      item: ae.name,\n                      actor: ae.actor.name,\n                    })}\n                  {:else}\n                    {@html ae.name}\n                  {/if}\n                </span>\n                <div class=\"list-controls flexrow\">\n                  {#if ae.item.isOwner}\n                    <button\n                      type=\"button\"\n                      class=\"transparent-button\"\n                      data-uuid={ae.item.uuid}\n                      data-tooltip=\"DND5E.ItemView\"\n                      aria-label={localize('DND5E.ItemView')}\n                      on:click={() =>\n                        FoundryAdapter.renderFromUuid(ae.item.uuid)}\n                    >\n                      <i class=\"fa-solid fa-eye\" aria-hidden=\"true\"></i>\n                    </button>\n                    <button\n                      type=\"button\"\n                      class=\"transparent-button\"\n                      data-tooltip=\"DND5E.Enchantment.Action.Remove\"\n                      aria-label={localize('DND5E.Enchantment.Action.Remove')}\n                      on:click={() =>\n                        FoundryAdapter.removeEnchantment(\n                          ae.enchantment.uuid,\n                          $context.item.sheet,\n                        )}\n                    >\n                      <i class=\"fa-solid fa-rotate-left\" aria-hidden=\"true\"></i>\n                    </button>\n                  {/if}\n                </div>\n              </div>\n            </li>\n          {/each}\n        </ul>\n      {/if}\n    </ItemFormGroup>\n  {/if}\n\n  {#if $context.system.actionType === 'summ'}\n    <ItemFormGroup\n      labelText={localize('DND5E.Summoning.Label')}\n      field=\"summon-config\"\n      cssClass=\"summoning\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <div\n          role=\"presentation\"\n          class=\"summon-controls flex-row justify-content-space-between flex-wrap extra-small-row-gap\"\n        >\n          <button\n            id={inputId}\n            type=\"button\"\n            class=\"inline-transparent-button no-wrap highlight-on-hover\"\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            on:click={() => FoundryAdapter.openSummonConfig($context.item)}\n          >\n            <i class=\"fa-solid fa-gear\" aria-hidden=\"true\"></i>\n            {localize('DND5E.Summoning.Action.Configure')}\n          </button>\n\n          <Checkbox\n            document={$context.item}\n            field=\"system.summons.prompt\"\n            checked={$context.system.summons?.prompt === true}\n            title={localize('DND5E.Summoning.Prompt.Hint')}\n            labelCssClass=\"green-checkbox align-items-center\"\n            >{localize('DND5E.Summoning.Prompt.Label')}</Checkbox\n          >\n        </div>\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    cssClass=\"stacked\"\n    labelText={localize('DND5E.ChatFlavor')}\n    field=\"system.chatFlavor\"\n    let:inputId\n  >\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.chatFlavor\"\n      value={$context.system.chatFlavor}\n      disabled={!$context.editable}\n    />\n  </ItemFormGroup>\n{/if}\n","import type { ItemSheetContext } from 'src/types/item.types';\n\nexport function mapPropertiesToSave(\n  context: ItemSheetContext,\n  ev: Event & { currentTarget: HTMLInputElement },\n  keyToSave: string\n) {\n  const allProperties = context.properties;\n\n  const propertiesToSave = Object.entries(allProperties)\n    .filter(\n      ([key, value]: [string, any]) =>\n        key !== keyToSave &&\n        value.selected &&\n        !context.itemOverrides.has(`system.properties.${key}`)\n    )\n    .map(([key, _]) => key);\n\n  if (ev.currentTarget.checked) {\n    propertiesToSave.push(keyToSave);\n  }\n\n  return {\n    'system.properties': propertiesToSave,\n  };\n}\n","<script lang=\"ts\">\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { mapPropertiesToSave } from 'src/utils/system-properties';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: properties = Object.entries<any>($context.properties);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#each properties as [key, property]}\n  {@const field = `system.properties.${key}`}\n  {@const isEnchanted = $context.itemOverrides.has(field)}\n  {@const enchantedTooltip = isEnchanted\n    ? localize('DND5E.Enchantment.Warning.Override')\n    : null}\n\n  <Checkbox\n    labelCssClass=\"checkbox\"\n    document={$context.item}\n    {field}\n    checked={property.selected}\n    disabled={!$context.editable || isEnchanted}\n    onDataPreparing={(ev) => mapPropertiesToSave($context, ev, key)}\n    tooltip={enchantedTooltip}\n  >\n    {property.label}\n  </Checkbox>\n{/each}\n","<script lang=\"ts\">\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import ItemActivation from '../parts/ItemActivation.svelte';\n  import ItemAction from '../parts/ItemAction.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import Select from 'src/components/inputs/Select.svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n  import ContentConcealer from 'src/components/content-concealment/ContentConcealer.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ContentConcealer conceal={$context.concealDetails}>\n  <h3 class=\"form-header\">{localize('DND5E.ItemConsumableDetails')}</h3>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemConsumableType')}\n    field=\"system.type.value\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.type.value\"\n      value={$context.system.type.value}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.config.consumableTypes} labelProp=\"label\" />\n    </Select>\n  </ItemFormGroup>\n  {#if $context.itemSubtypes}\n    {@const consumableSubTypeLabel = localize('DND5E.ItemConsumableSubtype', {\n      category:\n        $context.config.consumableTypes[$context.system.type.value]?.label,\n    })}\n\n    <ItemFormGroup\n      labelText={consumableSubTypeLabel}\n      field=\"system.type.subtype\"\n      let:inputId\n    >\n      <Select\n        id={inputId}\n        document={$context.item}\n        field=\"system.type.subtype\"\n        value={$context.system.type.subtype}\n        disabled={!$context.editable}\n      >\n        <SelectOptions data={$context.itemSubtypes} blank=\"\" />\n      </Select>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    labelText={localize('DND5E.Attunement')}\n    field=\"system.attunement\"\n    let:inputId\n  >\n    <Checkbox\n      id={`${$context.appId}-system-attuned`}\n      document={$context.item}\n      field=\"system.attuned\"\n      checked={$context.system.attuned}\n      disabled={!$context.editable || !$context.system.attunement}\n      title={localize('DND5E.AttunementAttuned')}\n    ></Checkbox>\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.attunement\"\n      value={$context.system.attunement}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.attunementTypes}\n        blank={localize('DND5E.AttunementNone')}\n      />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    cssClass=\"stacked weapon-properties\"\n    labelText={$context.system.type.value === 'ammo'\n      ? localize('DND5E.ItemAmmoProperties')\n      : localize('DND5E.ItemConsumableProperties')}\n  >\n    <ItemProperties />\n  </ItemFormGroup>\n\n  {#if $context.properties.mgc.selected && $context.system.type.value === CONSTANTS.ITEM_SYSTEM_TYPE_AMMO}\n    <ItemFormGroup\n      labelText={localize('DND5E.MagicalBonus')}\n      field=\"system.magicalBonus\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <NumberInput\n          id={inputId}\n          value={$context.system.magicalBonus}\n          field=\"system.magicalBonus\"\n          document={$context.item}\n          disabled={!$context.editable}\n          min=\"0\"\n          step=\"1\"\n          placeholder=\"0\"\n        />\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <h3 class=\"form-header\">{localize('DND5E.ItemConsumableUsage')}</h3>\n\n  <ItemActivation />\n\n  <h3 class=\"form-header\">{localize('DND5E.ItemConsumableActivation')}</h3>\n\n  <ItemAction />\n</ContentConcealer>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ContainerSheetContext, Item5e } from 'src/types/item.types';\n  import { getContext, setContext } from 'svelte';\n  import { writable, type Readable } from 'svelte/store';\n  import CapacityBar from 'src/sheets/container/CapacityBar.svelte';\n  import Currency from 'src/sheets/actor/Currency.svelte';\n  import UtilityToolbar from 'src/components/utility-bar/UtilityToolbar.svelte';\n  import UtilityToolbarCommand from 'src/components/utility-bar/UtilityToolbarCommand.svelte';\n  import Search from 'src/components/utility-bar/Search.svelte';\n  import FilterMenu from 'src/components/filter/FilterMenu.svelte';\n  import ButtonMenu from 'src/components/button-menu/ButtonMenu.svelte';\n  import ButtonMenuCommand from 'src/components/button-menu/ButtonMenuCommand.svelte';\n  import PinnedFilterToggles from 'src/components/filter/PinnedFilterToggles.svelte';\n  import { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\n  import ContainerContentsSections from 'src/sheets/container/ContainerContentsSections.svelte';\n  import { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\n  import { ItemVisibility } from 'src/features/sections/ItemVisibility';\n\n  let context = getContext<Readable<ContainerSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let tabId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.TAB_ID);\n\n  let inlineContainerToggleService = getContext<InlineContainerToggleService>(\n    CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n  );\n\n  let searchCriteria = '';\n\n  $: allItems = $context.containerContents.contents.flatMap((x) => x.items);\n\n  const itemIdsToShow = writable<Set<string> | undefined>(undefined);\n  setContext(CONSTANTS.SVELTE_CONTEXT.ITEM_IDS_TO_SHOW, itemIdsToShow);\n\n  $: {\n    $itemIdsToShow = ItemVisibility.getItemsToShowAtDepth({\n      criteria: searchCriteria,\n      itemContext: $context.itemContext,\n      sections: $context.containerContents.contents,\n      tabId: tabId,\n    });\n  }\n\n  const localize = FoundryAdapter.localize;\n\n  $: utilityBarCommands =\n    $context.utilities[tabId]?.utilityToolbarCommands ?? [];\n\n  $: menuOpen = false;\n</script>\n\n<div class=\"container-contents-wrapper\">\n  <div role=\"presentation\" class=\"currency-wrapper\">\n    <Currency document={$context.item} />\n  </div>\n\n  <UtilityToolbar>\n    <Search bind:value={searchCriteria}></Search>\n    <PinnedFilterToggles\n      filterGroupName={tabId}\n      filters={ItemFilterRuntime.getPinnedFiltersForTab(\n        $context.filterPins,\n        $context.filterData,\n        tabId,\n      )}\n    />\n    <FilterMenu {tabId} />\n    {#each utilityBarCommands as command (command.title)}\n      <UtilityToolbarCommand\n        title={command.title}\n        iconClass={command.iconClass}\n        text={command.text}\n        visible={command.visible ?? true}\n        on:execute={(ev) => command.execute?.(ev.detail)}\n      />\n    {/each}\n\n    {#if FoundryAdapter.userIsGm()}\n      <ButtonMenu\n        iconClass=\"ra ra-fairy-wand\"\n        buttonClass=\"inline-icon-button {menuOpen ? 'menu-is-open' : ''}\"\n        position=\"bottom\"\n        anchor=\"right\"\n        title={localize('TIDY5E.Utilities.GMTools')}\n        bind:open={menuOpen}\n        menuElement=\"div\"\n      >\n        <!-- TODO: identify all items recursively -->\n        <ButtonMenuCommand\n          on:click={() => {\n            FoundryAdapter.identifyAllItemsForContainer(\n              $context.item,\n              allItems,\n            );\n          }}\n          iconClass=\"fas fa-magnifying-glass\"\n        >\n          {localize('TIDY5E.Utilities.IdentifyAll')}\n        </ButtonMenuCommand>\n        <ButtonMenuCommand\n          on:click={() => {\n            FoundryAdapter.markAllItemsAsUnidentifiedForContainer(\n              $context.item,\n              allItems,\n            );\n          }}\n          iconClass=\"fas fa-question\"\n        >\n          {localize('TIDY5E.Utilities.MarkAllAsUnidentified')}\n        </ButtonMenuCommand>\n      </ButtonMenu>\n    {/if}\n  </UtilityToolbar>\n\n  <div\n    class=\"tidy-container-contents scroll-container flex-column small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEMS_CONTAINER}\n  >\n    <ContainerContentsSections\n      contents={$context.containerContents.contents}\n      container={$context.item}\n      editable={$context.editable}\n      itemContext={$context.containerContents.itemContext}\n      {inlineContainerToggleService}\n      lockItemQuantity={$context.lockItemQuantity}\n      sheetDocument={$context.item}\n    />\n  </div>\n  <footer class=\"container-contents-footer\">\n    <CapacityBar container={$context.item} capacity={$context.capacity} />\n  </footer>\n</div>\n\n<style lang=\"scss\">\n  .container-contents-wrapper {\n    height: 100%;\n    padding-left: 1rem;\n    padding-right: 0.25rem;\n    display: flex;\n    flex-direction: column;\n    --utility-toolbar-margin-top: 0;\n    --utility-toolbar-margin-right: -0.75rem;\n    --utility-toolbar-padding-right: 1.25rem;\n  }\n\n  .scroll-container {\n    padding-bottom: 0;\n    padding-right: 0.75rem;\n  }\n\n  .container-contents-footer {\n    padding: 0.25rem 0.75rem 0.25rem 0;\n    display: flex;\n    gap: 0.25rem;\n    flex-direction: column;\n  }\n\n  .currency-wrapper {\n    padding-right: 0.75rem;\n    padding-top: 0.25rem;\n    margin-block-end: 0.25rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ContainerSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n  import ContentConcealer from 'src/components/content-concealment/ContentConcealer.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ContainerSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ContentConcealer conceal={$context.concealDetails}>\n  <h3 class=\"form-header\">{localize('DND5E.ItemContainerDetails')}</h3>\n\n  <ItemFormGroup\n    cssClass=\"stacked container-properties\"\n    labelText={localize('DND5E.ItemContainerProperties')}\n  >\n    <ItemProperties />\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemContainerCapacity')}\n    let:inputId\n    field=\"system.capacity.value\"\n  >\n    <div class=\"form-fields\">\n      <NumberInput\n        id={inputId}\n        document={$context.item}\n        field=\"system.capacity.value\"\n        value={$context.system.capacity.value}\n        disabled={!$context.editable}\n        placeholder=\"&mdash;\"\n      />\n    </div>\n  </ItemFormGroup>\n\n  <ItemFormGroup labelText={localize('DND5E.ItemContainerCapacityType')}>\n    <Select\n      document={$context.item}\n      field=\"system.capacity.type\"\n      value={$context.system.capacity.type}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.config.itemCapacityTypes} />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.Attunement')}\n    field=\"system.attunement\"\n    let:inputId\n  >\n    <Checkbox\n      id={`${$context.appId}-system-attuned`}\n      document={$context.item}\n      field=\"system.attuned\"\n      checked={$context.system.attuned}\n      disabled={!$context.editable || !$context.system.attunement}\n      title={localize('DND5E.AttunementAttuned')}\n    ></Checkbox>\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.attunement\"\n      value={$context.system.attunement}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.attunementTypes}\n        blank={localize('DND5E.AttunementNone')}\n      />\n    </Select>\n  </ItemFormGroup>\n</ContentConcealer>\n","<script lang=\"ts\">\n  import RerenderAfterFormSubmission from 'src/components/utility/RerenderAfterFormSubmission.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import SheetEditor from 'src/components/editor/SheetEditor.svelte';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<RerenderAfterFormSubmission\n  andOnValueChange={$context.item.system.description.value}\n>\n  <article class=\"editor-container\" use:$context.activateEditors>\n    <h2 class=\"details-headline\">{localize('TIDY5E.ItemDetailsHeadline')}</h2>\n    <SheetEditor\n      content={$context.enriched.description}\n      editable={$context.editable}\n      target=\"system.description.value\"\n    />\n  </article>\n</RerenderAfterFormSubmission>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"form-group\">\n  <ItemFormGroup\n    labelText={localize('DND5E.Identifier')}\n    field=\"system.identifier\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      <TextInput\n        id={inputId}\n        document={$context.item}\n        field=\"system.identifier\"\n        value={$context.system.identifier}\n        placeholder={$context.item.identifier}\n      ></TextInput>\n    </div>\n    <p class=\"hint\">{localize('DND5E.IdentifierError')}</p>\n  </ItemFormGroup>\n</div>\n","<div class=\"vertical-line-separator\" aria-hidden=\"true\" role=\"presentation\" />\n\n<style lang=\"scss\">\n  .vertical-line-separator {\n    background: var(--t5e-separator-color);\n    width: 0.0625rem;\n    flex: 0 0 auto;\n  }\n</style>\n","<script context=\"module\" lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { setContext } from 'svelte';\n  import { writable, type Writable } from 'svelte/store';\n\n  export interface AccordionCtxType {\n    selected?: Writable<object>;\n  }\n</script>\n\n<script lang=\"ts\">\n  export let multiple: boolean = false;\n\n  $: setContext<AccordionCtxType>(CONSTANTS.SVELTE_CONTEXT.ACCORDION_CONTEXT, {\n    selected: multiple ? undefined : writable(),\n  });\n</script>\n\n{#key multiple}\n  <div class={$$props.class}>\n    <slot />\n  </div>\n{/key}\n","<script lang=\"ts\">\n  import { getContext, onMount } from 'svelte';\n  import type { AccordionCtxType } from './Accordion.svelte';\n  import { writable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import ExpandableContainer from 'src/components/expandable/ExpandableContainer.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  export let open: boolean = false;\n\n  const ctx = getContext<AccordionCtxType>(CONSTANTS.SVELTE_CONTEXT.ACCORDION_CONTEXT) ?? {};\n\n  const self = {};\n  const selected = ctx.selected ?? writable();\n\n  function toggle() {\n    selected.set(open ? {} : self);\n  }\n\n  onMount(() => {\n    if (open) {\n      $selected = self;\n    }\n    return selected.subscribe((x) => (open = x === self));\n  });\n</script>\n\n<section class=\"accordion-item {$$props.class ?? ''}\">\n  <h2 class=\"accordion-item-header\" class:open>\n    <button\n      class=\"accordion-item-toggle transparent-button\"\n      type=\"button\"\n      on:click={() => toggle()}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.EXPANSION_TOGGLE}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <span class=\"accordion-arrow\" class:open\n        ><i class=\"fas fa-chevron-right\" /></span\n      >\n      <slot name=\"header\" />\n    </button>\n  </h2>\n\n  <ExpandableContainer expanded={open}>\n    <div class=\"accordion-item-content\">\n      <slot />\n    </div>\n  </ExpandableContainer>\n</section>\n\n<style lang=\"scss\">\n  .accordion-item {\n    margin-block-end: 0.5rem;\n  }\n\n  .accordion-item-header {\n    padding: 0.25rem;\n    background-color: var(--t5e-table-header-row-color);\n    margin: 0;\n    border: 0.0625rem solid var(--t5e-table-header-row-color);\n    border-radius: 0.1875rem;\n  }\n\n  .accordion-item-toggle {\n    display: flex;\n    gap: 0.5rem;\n    align-items: center;\n\n    .accordion-arrow {\n      font-size: 0.75rem;\n      transition: transform 0.2s;\n\n      &.open {\n        transform: rotate(90deg);\n      }\n    }\n  }\n\n  .accordion-item-content {\n    padding-left: 0.25rem;\n\n    &.hidden {\n      display: none;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { createEventDispatcher, getContext, tick } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import Accordion from 'src/components/accordion/Accordion.svelte';\n  import AccordionItem from 'src/components/accordion/AccordionItem.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  /**\n   * When true, descriptions are rendered to the DOM; else, they are excluded.\n   *\n   * @remarks\n   * This is a compatibility feature to allow for the singleton active editor\n   * while preventing unwanted additional data saving from readonly editor content\n   * which has compatibility tags allowing it to render secret buttons.\n   *\n   * When showing the active editor and when saving active editor changes,\n   * readonly editors should not be in the form / DOM, else strange side effects occur.\n   */\n  export let renderDescriptions: boolean = true;\n\n  let editorsContainers: HTMLElement[] = [];\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const dispatcher = createEventDispatcher<{\n    edit: {\n      valueToEdit: string;\n      fieldToEdit: string;\n    };\n  }>();\n\n  let accordionItemOpenStates = $context.itemDescriptions.map(\n    (_, i) => i === 0,\n  );\n</script>\n\n{#if renderDescriptions}\n  <div class=\"item-descriptions-container\">\n    <Accordion multiple>\n      {#each $context.itemDescriptions as itemDescription, i (itemDescription.field)}\n        {#key itemDescription.content}\n          <div bind:this={editorsContainers[i]} use:$context.activateEditors>\n            <AccordionItem\n              bind:open={accordionItemOpenStates[i]}\n              class=\"editor\"\n            >\n              <span\n                slot=\"header\"\n                class=\"flex-1 flex-row justify-content-space-between\"\n              >\n                {itemDescription.label}\n\n                {#if $context.editable}\n                  <button\n                    type=\"button\"\n                    class=\"inline-icon-button edit-item-description\"\n                    on:click|stopPropagation={() =>\n                      dispatcher('edit', {\n                        valueToEdit: itemDescription.content,\n                        fieldToEdit: itemDescription.field,\n                      })}\n                    tabindex={$settingStore.useAccessibleKeyboardSupport\n                      ? 0\n                      : -1}><i class=\"fas fa-edit\" /></button\n                  >\n                {/if}\n              </span>\n              <div\n                data-edit={itemDescription.field}\n                class=\"item-editor-descriptions-html-container\"\n              >\n                {@html itemDescription.content}\n              </div>\n            </AccordionItem>\n          </div>\n        {/key}\n      {/each}\n    </Accordion>\n  </div>\n{/if}\n\n<style lang=\"scss\">\n  .item-descriptions-container {\n    padding-right: 0.3125rem;\n\n    .edit-item-description {\n      padding-left: 2rem;\n      padding-right: 0.125rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  /**\n   * The HTML to render or to edit.\n   */\n  export let content: string;\n  /**\n   * The data field to update via form post, which will be applied to the entity the form represents (e.g., to the Actor).\n   */\n  export let target: string;\n</script>\n\n{@html FoundryAdapter.createOpenEditorHtml(content, target)}\n","<script lang=\"ts\">\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ContainerSheetContext,\n    ItemSheetContext,\n  } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import HorizontalLineSeparator from 'src/components/layout/HorizontalLineSeparator.svelte';\n  import VerticalLineSeparator from 'src/components/layout/VerticalLineSeparator.svelte';\n  import ItemDescriptions from '../parts/ItemDescriptions.svelte';\n  import RerenderAfterFormSubmission from 'src/components/utility/RerenderAfterFormSubmission.svelte';\n  import OpenSheetEditor from 'src/components/editor/OpenSheetEditor.svelte';\n  import SheetEditor from 'src/components/editor/SheetEditor.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n\n  let context = getContext<Readable<ItemSheetContext | ContainerSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  function onEditorActivation(node: HTMLElement) {\n    if (editorIsActive) {\n      editing = false;\n      editorIsActive = false;\n      return;\n    }\n\n    $context.activateEditors(node, { bindSecrets: false });\n    editorIsActive = true;\n  }\n\n  let editing = false;\n  let editorIsActive = false;\n  let valueToEdit: string;\n  let fieldToEdit: string;\n\n  function edit(value: string, field: string) {\n    valueToEdit = value;\n    fieldToEdit = field;\n    editing = true;\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"item-description flexrow align-items-stretch small-gap\"\n  class:hidden={editing}\n>\n  <div\n    class=\"item-properties\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_SHEET_PROPERTIES}\n  >\n    {#if $context.isPhysical}\n      {#if $context.item.type !== CONSTANTS.ITEM_TYPE_CONTAINER}\n        <div class=\"form-group\">\n          <label for=\"{$context.appId}-{$context.item.id}-quantity\"\n            >{localize('DND5E.Quantity')}</label\n          >\n          <NumberInput\n            id=\"{$context.appId}-{$context.item.id}-quantity\"\n            value={$context.system.quantity}\n            field=\"system.quantity\"\n            document={$context.item}\n            step=\"1\"\n            disabled={!$context.editable || $context.lockItemQuantity}\n            selectOnFocus={true}\n          />\n        </div>\n\n        <HorizontalLineSeparator />\n      {/if}\n\n      <div class=\"form-group\">\n        <label for=\"{$context.appId}-{$context.item.id}-weight-value\"\n          >{localize('DND5E.Weight')}</label\n        >\n        <NumberInput\n          id=\"{$context.appId}-{$context.item.id}-weight-value\"\n          value={$context.system.weight.value}\n          step=\"any\"\n          field=\"system.weight.value\"\n          document={$context.item}\n          disabled={!$context.editable}\n          selectOnFocus={true}\n        />\n      </div>\n\n      <HorizontalLineSeparator />\n\n      <div class=\"form-group stacked\">\n        <label for=\"{$context.appId}-{$context.item.id}-price\"\n          >{localize('DND5E.Price')}</label\n        >\n        {#if $context.concealDetails}\n          <span>{localize('DND5E.Unidentified.Value')}</span>\n        {:else}\n          <NumberInput\n            id=\"{$context.appId}-{$context.item.id}-price\"\n            value={$context.system.price.value}\n            step=\"any\"\n            field=\"system.price.value\"\n            document={$context.item}\n            disabled={!$context.editable}\n            selectOnFocus={true}\n            cssClass=\"large-value\"\n          />\n          <Select\n            value={$context.system.price.denomination}\n            field=\"system.price.denomination\"\n            document={$context.item}\n            disabled={!$context.editable}\n          >\n            <SelectOptions\n              data={$context.config.currencies}\n              labelProp=\"abbreviation\"\n            />\n          </Select>\n        {/if}\n      </div>\n    {/if}\n\n    {#if $context.labels.toHit || $context.labels.derivedDamage}\n      <h4 class=\"properties-header\">\n        {localize('DND5E.Attack')}/{localize('DND5E.Damage')}\n      </h4>\n      <ol class=\"properties-list animate-inert\" inert={$context.concealDetails}>\n        {#if $context.labels.save}\n          <li>\n            {$context.labels.save}\n          </li>\n        {/if}\n\n        {#if $context.labels.toHit}\n          <li>\n            {$context.labels.toHit}\n            {localize('DND5E.ToHit')}\n          </li>\n        {/if}\n\n        {#each $context.labels.derivedDamage ?? [] as derivedDamage}\n          {@const label = derivedDamage.label}\n          <li>\n            {label}\n          </li>\n        {/each}\n      </ol>\n    {/if}\n\n    {#if $context.itemProperties.length}\n      <section class=\"inert-animation-container\">\n        <h4 class=\"properties-header\">{localize('DND5E.Properties')}</h4>\n        <ol class=\"properties-list\" inert={$context.concealDetails}>\n          {#each $context.itemProperties as prop}\n            <li>{prop}</li>\n          {/each}\n        </ol>\n      </section>\n    {/if}\n\n    <div class=\"flex-column small-gap\">\n      <ItemFormGroup\n        labelText={localize('TIDY5E.Section.Label')}\n        field={TidyFlags.section.prop}\n        cssClass=\"section\"\n        let:inputId\n      >\n        <TextInput\n          document={$context.item}\n          field={TidyFlags.section.prop}\n          id={inputId}\n          placeholder={localize('TIDY5E.Section.Default')}\n          value={TidyFlags.section.get($context.item) ?? ''}\n          selectOnFocus={true}\n          title={localize('TIDY5E.Section.Tooltip')}\n        ></TextInput>\n      </ItemFormGroup>\n      <ItemFormGroup\n        labelText={localize('TIDY5E.Section.ActionLabel')}\n        field={TidyFlags.actionSection.prop}\n        cssClass=\"section\"\n        let:inputId\n      >\n        <TextInput\n          document={$context.item}\n          field={TidyFlags.actionSection.prop}\n          id={inputId}\n          placeholder={localize('TIDY5E.Section.Default')}\n          value={TidyFlags.actionSection.get($context.item) ?? ''}\n          selectOnFocus={true}\n          title={localize('TIDY5E.Section.ActionTooltip')}\n        ></TextInput>\n      </ItemFormGroup>\n    </div>\n  </div>\n\n  <VerticalLineSeparator />\n\n  {#if FoundryAdapter.userIsGm() || $context.isIdentified}\n    <ItemDescriptions\n      on:edit={(ev) => edit(ev.detail.valueToEdit, ev.detail.fieldToEdit)}\n      renderDescriptions={!editing}\n    />\n  {:else if $context.editable || $context.system.unidentified.description}\n    <RerenderAfterFormSubmission\n      andOnValueChange={$context.enriched.unidentified}\n    >\n      <div class=\"flexrow\" role=\"presentation\" use:$context.activateEditors>\n        <SheetEditor\n          content={$context.enriched.unidentified}\n          editable={$context.editable}\n          target=\"system.unidentified.description\"\n        />\n      </div>\n    </RerenderAfterFormSubmission>\n  {/if}\n</div>\n\n{#if editing}\n  <RerenderAfterFormSubmission andOnValueChange={valueToEdit}>\n    <article class=\"editor-container\" use:onEditorActivation>\n      <OpenSheetEditor content={valueToEdit} target={fieldToEdit} />\n    </article>\n  </RerenderAfterFormSubmission>\n{/if}\n\n<style lang=\"scss\">\n  .item-properties {\n    flex: 0 0 7.5rem;\n  }\n\n  .editor-container {\n    width: 100%;\n  }\n</style>\n","<script lang=\"ts\">\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let appId = getContext<Readable<string>>(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"form-group\">\n  <label for=\"{$appId}-system.hp.value\">{localize('DND5E.HitPoints')}</label>\n  <div class=\"form-fields\">\n    <NumberInput\n      id=\"{$appId}-system.hp.value\"\n      document={$context.item}\n      field=\"system.hp.value\"\n      value={$context.item.system.hp.value}\n      placeholder=\"0\"\n    />\n    <span class=\"sep\">&sol;</span>\n    <NumberInput\n      id=\"{$appId}-system.hp.max\"\n      document={$context.item}\n      field=\"system.hp.max\"\n      value={$context.item.system.hp.max}\n      placeholder=\"0\"\n    />\n    <NumberInput\n      document={$context.item}\n      field=\"system.hp.dt\"\n      id=\"{$appId}-system.hp.dt\"\n      placeholder={localize('DND5E.Threshold')}\n      value={$context.item.system.hp.dt}\n    />\n  </div>\n</div>\n\n<div class=\"form-group\">\n  <label for=\"{$appId}-system.hp.conditions\"\n    >{localize('DND5E.HealthConditions')}</label\n  >\n  <div class=\"form-fields\">\n    <TextInput\n      id=\"{$appId}-system.hp.conditions\"\n      document={$context.item}\n      field=\"system.hp.conditions\"\n      value={$context.item.system.hp.conditions}\n    />\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import ItemMountable from '../parts/ItemMountable.svelte';\n  import ItemActivation from '../parts/ItemActivation.svelte';\n  import ItemAction from '../parts/ItemAction.svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n  import ContentConcealer from 'src/components/content-concealment/ContentConcealer.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ContentConcealer conceal={$context.concealDetails}>\n  <h3 class=\"form-header\">\n    {localize('DND5E.ItemEquipmentDetails')}\n  </h3>\n\n  <ItemFormGroup\n    field=\"system.type.value\"\n    labelText={localize('DND5E.ItemEquipmentType')}\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      value={$context.system.type.value}\n      field=\"system.type.value\"\n      document={$context.item}\n      disabled={!$context.editable}\n    >\n      <option value=\"\" />\n      <optgroup label={localize('DND5E.Armor')}>\n        <SelectOptions data={$context.config.armorTypes} />\n      </optgroup>\n      {#each $context.customEquipmentTypeGroups as group}\n        <optgroup label={localize(group.label)}>\n          <SelectOptions data={group.types} />\n        </optgroup>\n      {/each}\n      <SelectOptions data={$context.config.miscEquipmentTypes} />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    field=\"system.baseItem\"\n    labelText={localize('DND5E.ItemEquipmentBase')}\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      value={$context.system.type.baseItem}\n      field=\"system.type.baseItem\"\n      document={$context.item}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.baseItems} blank=\"\" />\n    </Select>\n  </ItemFormGroup>\n\n  {#if !$context.system.isMountable}\n    <ItemFormGroup\n      labelText={localize('DND5E.Attunement')}\n      field=\"system.attunement\"\n      let:inputId\n    >\n      <Checkbox\n        id={`${$context.appId}-system-attuned`}\n        document={$context.item}\n        field=\"system.attuned\"\n        checked={$context.system.attuned}\n        disabled={!$context.editable || !$context.system.attunement}\n        title={localize('DND5E.AttunementAttuned')}\n      ></Checkbox>\n      <Select\n        id={inputId}\n        document={$context.item}\n        field=\"system.attunement\"\n        value={$context.system.attunement}\n        disabled={!$context.editable}\n      >\n        <SelectOptions\n          data={$context.config.attunementTypes}\n          blank={localize('DND5E.AttunementNone')}\n        />\n      </Select>\n    </ItemFormGroup>\n\n    <ItemFormGroup labelText={localize('DND5E.Proficiency')}>\n      <Select\n        document={$context.item}\n        field=\"system.proficient\"\n        value={$context.system.proficient}\n        disabled={!$context.editable}\n      >\n        <SelectOptions\n          data={$context.config.weaponAndArmorProficiencyLevels}\n          blank={localize('DND5E.Automatic')}\n        />\n      </Select>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    cssClass=\"stacked weapon-properties\"\n    labelText={localize('DND5E.ItemEquipmentProperties')}\n  >\n    <ItemProperties />\n  </ItemFormGroup>\n\n  {#if $context.system.isArmor || $context.system.isMountable}\n    <ItemFormGroup\n      labelText={localize('DND5E.ArmorClass')}\n      field=\"system.armor.value\"\n      let:inputId\n    >\n      <NumberInput\n        id={inputId}\n        value={$context.source.armor.value}\n        step=\"1\"\n        field=\"system.armor.value\"\n        document={$context.item}\n        disabled={!$context.editable}\n      />\n    </ItemFormGroup>\n\n    {#if $context.properties.mgc.selected}\n      <ItemFormGroup\n        labelText={localize('DND5E.MagicalBonus')}\n        field=\"system.armor.magicalBonus\"\n        let:inputId\n      >\n        <div class=\"form-fields\">\n          <NumberInput\n            id={inputId}\n            value={$context.system.armor.magicalBonus}\n            field=\"system.armor.magicalBonus\"\n            document={$context.item}\n            disabled={!$context.editable}\n            min=\"0\"\n            step=\"1\"\n            placeholder=\"0\"\n          />\n        </div>\n      </ItemFormGroup>\n    {/if}\n  {/if}\n\n  {#if $context.hasDexModifier}\n    <ItemFormGroup\n      labelText={localize('DND5E.ItemEquipmentDexMod')}\n      field=\"system.armor.dex\"\n      let:inputId\n    >\n      <NumberInput\n        id={inputId}\n        step=\"1\"\n        placeholder={localize('DND5E.Unlimited')}\n        field=\"system.armor.dex\"\n        document={$context.item}\n        value={$context.system.armor.dex}\n        disabled={!$context.editable}\n      />\n    </ItemFormGroup>\n  {/if}\n\n  {#if $context.system.isArmor}\n    <ItemFormGroup\n      field=\"system.strength\"\n      labelText={localize('DND5E.ItemRequiredStr')}\n      let:inputId\n    >\n      <NumberInput\n        id={inputId}\n        step=\"1\"\n        placeholder={localize('DND5E.None')}\n        field=\"system.strength\"\n        document={$context.item}\n        value={$context.system.strength}\n        disabled={!$context.editable}\n      />\n    </ItemFormGroup>\n  {/if}\n\n  {#if $context.system.isMountable}\n    <ItemMountable />\n    <ItemFormGroup labelText={localize('DND5E.Speed')}>\n      <div class=\"form-fields\">\n        <NumberInput\n          placeholder=\"0\"\n          value={$context.system.speed.value}\n          field=\"system.speed.value\"\n          document={$context.item}\n          disabled={!$context.editable}\n        />\n        <span class=\"sep\">{localize('DND5E.FeetAbbr')}</span>\n        <TextInput\n          field=\"system.speed.conditions\"\n          document={$context.item}\n          value={$context.system.speed.conditions}\n          disabled={!$context.editable}\n        />\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <h3 class=\"form-header\">{localize('DND5E.ItemEquipmentUsage')}</h3>\n\n  <ItemActivation />\n\n  <h3 class=\"form-header\">{localize('DND5E.ItemEquipmentAction')}</h3>\n\n  <ItemAction />\n</ContentConcealer>\n","<script lang=\"ts\">\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import ItemAction from '../parts/ItemAction.svelte';\n  import ItemActivation from '../parts/ItemActivation.svelte';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import type { Readable } from 'svelte/store';\n  import { getContext } from 'svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import Select from 'src/components/inputs/Select.svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<h3 class=\"form-header\">{localize('DND5E.ItemFeatureDetails')}</h3>\n\n<ItemFormGroup\n  labelText={localize('DND5E.ItemFeatureType')}\n  field=\"system.type.value\"\n  let:inputId\n>\n  <Select\n    id={inputId}\n    document={$context.item}\n    field=\"system.type.value\"\n    value={$context.system.type.value}\n    disabled={!$context.editable}\n  >\n    <SelectOptions\n      data={$context.config.featureTypes}\n      labelProp=\"label\"\n      blank=\"\"\n    />\n  </Select>\n</ItemFormGroup>\n\n{#if $context.itemSubtypes}\n  {@const category =\n    $context.config.featureTypes[$context.system.type.value]?.label}\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemFeatureSubtype', { category })}\n    field=\"system.type.subtype\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.type.subtype\"\n      value={$context.system.type.subtype}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.itemSubtypes} blank=\"\" />\n    </Select>\n  </ItemFormGroup>\n{/if}\n\n<ItemFormGroup\n  cssClass=\"stacked weapon-properties\"\n  labelText={localize('DND5E.ItemEquipmentProperties')}\n>\n  <ItemProperties />\n</ItemFormGroup>\n\n<h3 class=\"form-header\">{localize('DND5E.Prerequisites.Header')}</h3>\n\n<ItemFormGroup\n  labelText={localize('DND5E.Prerequisites.FIELDS.prerequisites.level.label')}\n  field=\"system.prerequisites.level\"\n  let:inputId\n>\n  <NumberInput\n    id={inputId}\n    document={$context.item}\n    field=\"system.prerequisites.level\"\n    value={$context.system.prerequisites.level}\n    disabled={!$context.editable}\n    step=\"1\"\n  />\n\n  <p class=\"hint\">\n    {localize('DND5E.Prerequisites.FIELDS.prerequisites.level.hint')}\n  </p>\n</ItemFormGroup>\n\n{#if $context.system.isEnchantmentSource}\n  <h3 class=\"form-header\">{localize('DND5E.Enchantment.Label')}</h3>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.Enchantment.FIELDS.enchantment.items.max.label')}\n    field=\"system.enchantment.items.max\"\n    let:inputId\n  >\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.enchantment.items.max\"\n      value={$context.source.enchantment?.items.max}\n      disabled={!$context.editable}\n    />\n    <p class=\"hint\">\n      {localize('DND5E.Enchantment.FIELDS.enchantment.items.max.hint')}\n    </p>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize(\n      'DND5E.Enchantment.FIELDS.enchantment.items.period.label',\n    )}\n    field=\"system.enchantment.items.period\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.enchantment.items.period\"\n      value={$context.system.enchantment?.items.period}\n      blankValue=\"\"\n    >\n      <SelectOptions\n        blank={localize('DND5E.UsesPeriods.Never')}\n        data={$context.config.enchantmentPeriods}\n        labelProp=\"label\"\n      />\n      <p class=\"hint\">\n        {localize('DND5E.Enchantment.FIELDS.enchantment.items.period.hint')}\n      </p>\n    </Select>\n  </ItemFormGroup>\n{/if}\n\n<h3 class=\"form-header\">{localize('DND5E.FeatureUsage')}</h3>\n\n<ItemActivation />\n\n{#if $context.system.activation.type}\n  <ItemFormGroup\n    cssClass=\"recharge\"\n    labelText={localize('DND5E.FeatureActionRecharge')}\n    field=\"system.recharge.value\"\n    let:inputId\n  >\n    <div class=\"form-fields\">\n      <span>{localize('DND5E.FeatureRechargeOn')}</span>\n      <NumberInput\n        id={inputId}\n        document={$context.item}\n        field=\"system.recharge.value\"\n        placeholder={localize('DND5E.FeatureRechargeResult')}\n        value={$context.system.recharge.value}\n        disabled={!$context.editable}\n      />\n\n      <Checkbox\n        id=\"{$context.appId}-system-recharge-charged\"\n        labelCssClass=\"checkbox\"\n        document={$context.item}\n        field=\"system.recharge.charged\"\n        checked={$context.system.recharge.charged}\n        disabled={!$context.editable}\n        greenCheckboxWidthOverride=\"{localize('DND5E.Charged').length + 4}ch\"\n      >\n        {localize('DND5E.Charged')}\n      </Checkbox>\n    </div>\n  </ItemFormGroup>\n{/if}\n\n<h3 class=\"form-header\">{localize('DND5E.FeatureAttack')}</h3>\n\n<ItemAction />\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n  import ContentConcealer from 'src/components/content-concealment/ContentConcealer.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ContentConcealer conceal={$context.concealDetails}>\n  <h3 class=\"form-header\">{localize('DND5E.ItemLootDetails')}</h3>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemLootType')}\n    field=\"system.type.value\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.type.value\"\n      value={$context.system.type.value}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.lootTypes}\n        labelProp=\"label\"\n        blank=\"\"\n      />\n    </Select>\n  </ItemFormGroup>\n\n  {#if $context.lootSubtypes}\n    {@const subTypeLabel = localize('DND5E.ItemLootSubtype', {\n      category:\n        $context.config.lootTypes[$context.system.type.value]?.label ?? '',\n    })}\n    <ItemFormGroup\n      labelText={subTypeLabel}\n      field=\"system.type.subtype\"\n      let:inputId\n    >\n      <Select\n        id={inputId}\n        document={$context.item}\n        field=\"system.type.subtype\"\n        value={$context.system.type.subtype}\n        disabled={!$context.editable}\n      >\n        <SelectOptions data={$context.lootSubtypes} blank=\"\" />\n      </Select>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    cssClass=\"stacked loot-properties\"\n    labelText={localize('DND5E.ItemLootProperties')}\n  >\n    <ItemProperties />\n  </ItemFormGroup>\n</ContentConcealer>\n","<script lang=\"ts\">\n  import VerticalLineSeparator from 'src/components/layout/VerticalLineSeparator.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ItemDescription from './ItemDescriptionTab.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: movementLabels = Object.values(\n    $context.item.system.movementLabels,\n  ) as string[];\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"item-description flexrow align-items-stretch small-gap\">\n  <div\n    class=\"item-properties\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_SHEET_PROPERTIES}\n  >\n    <h4 class=\"properties-header flex-row justify-content-space-between\">\n      {localize('DND5E.Type')}\n      {#if $context.editable}\n        <button\n          class=\"inline-icon-button hidden-config-button\"\n          type=\"button\"\n          on:click={() => FoundryAdapter.renderItemTypeConfig($context.item)}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n        >\n          <i class=\"fas fa-cog\" />\n        </button>\n      {/if}\n    </h4>\n    <ol class=\"properties-list\">\n      <li>{$context.item.system.typeLabel}</li>\n    </ol>\n    <h4 class=\"properties-header flex-row justify-content-space-between\">\n      {localize('DND5E.Movement')}\n      {#if $context.editable}\n        <button\n          type=\"button\"\n          class=\"inline-icon-button hidden-config-button\"\n          data-action=\"movement\"\n          on:click={() =>\n            FoundryAdapter.renderItemMovementConfig($context.item)}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n        >\n          <i class=\"fas fa-cog\" />\n        </button>\n      {/if}\n    </h4>\n    <ol class=\"properties-list\">\n      {#each movementLabels as label}\n        <li>{label}</li>\n      {:else}\n        <li>{localize('DND5E.None')}</li>\n      {/each}\n    </ol>\n    <h4 class=\"properties-header flex-row justify-content-space-between\">\n      {localize('DND5E.Senses')}\n      {#if $context.editable}\n        <button\n          type=\"button\"\n          class=\"inline-icon-button hidden-config-button\"\n          data-action=\"senses\"\n          on:click={() => FoundryAdapter.renderItemSensesConfig($context.item)}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n        >\n          <i class=\"fas fa-cog\" />\n        </button>\n      {/if}\n    </h4>\n    <ol class=\"properties-list\">\n      {#each $context.item.system.sensesLabels as label}\n        <li>{label}</li>\n      {:else}\n        <li>{localize('DND5E.None')}</li>\n      {/each}\n    </ol>\n  </div>\n\n  <VerticalLineSeparator />\n\n  <ItemDescription />\n</div>\n\n<style lang=\"scss\">\n  .item-properties {\n    flex: 0 0 7.5rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Select from 'src/components/inputs/Select.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import ItemActivation from '../parts/ItemActivation.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemAction from '../parts/ItemAction.svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<h3 class=\"form-header\">{localize('DND5E.SpellDetails')}</h3>\n\n<ItemFormGroup\n  labelText={localize('DND5E.SpellLevel')}\n  field=\"system.level\"\n  let:inputId\n>\n  <Select\n    id={inputId}\n    document={$context.item}\n    field=\"system.level\"\n    value={$context.system.level}\n    disabled={!$context.editable}\n  >\n    <SelectOptions data={$context.config.spellLevels} />\n  </Select>\n</ItemFormGroup>\n\n<ItemFormGroup\n  labelText={localize('DND5E.SpellSchool')}\n  field=\"system.school\"\n  let:inputId\n>\n  <Select\n    id={inputId}\n    document={$context.item}\n    field=\"system.school\"\n    value={$context.system.school}\n    disabled={!$context.editable}\n  >\n    <SelectOptions\n      data={$context.config.spellSchools}\n      labelProp=\"label\"\n      blank=\"\"\n    />\n  </Select>\n</ItemFormGroup>\n\n<ItemFormGroup\n  cssClass=\"spell-components stacked\"\n  labelText={localize('DND5E.SpellComponents')}\n>\n  <ItemProperties />\n</ItemFormGroup>\n\n<ItemFormGroup\n  cssClass=\"stacked\"\n  labelText={localize('DND5E.SpellMaterials')}\n  field=\"system.materials.value\"\n  let:inputId\n>\n  <TextInput\n    id={inputId}\n    cssClass=\"materials\"\n    document={$context.item}\n    field=\"system.materials.value\"\n    value={$context.system.materials.value}\n    disabled={!$context.editable}\n  />\n  {#if $context.system.materials.value}\n    <div class=\"spell-materials flexrow align-items-center small-gap\">\n      <label for=\"{$context.appId}-system-materials-supply\"\n        >{localize('DND5E.Supply')}</label\n      >\n      <NumberInput\n        id=\"{$context.appId}-system-materials-supply\"\n        document={$context.item}\n        field=\"system.materials.supply\"\n        value={$context.system.materials.supply}\n        placeholder=\"0\"\n        disabled={!$context.editable}\n      />\n\n      <label for=\"{$context.appId}-system-materials-cost\"\n        >{localize('DND5E.CostGP')}</label\n      >\n      <NumberInput\n        id=\"{$context.appId}-system-materials-cost\"\n        document={$context.item}\n        field=\"system.materials.cost\"\n        value={$context.system.materials.cost}\n        placeholder=\"&mdash;\"\n        disabled={!$context.editable}\n      />\n\n      <Checkbox\n        id=\"{$context.appId}-system-materials-consumed\"\n        labelCssClass=\"checkbox\"\n        document={$context.item}\n        field=\"system.materials.consumed\"\n        checked={$context.system.materials.consumed}\n        disabled={!$context.editable}\n      >\n        {localize('DND5E.Consumed')}\n      </Checkbox>\n    </div>\n  {/if}\n</ItemFormGroup>\n\n<ItemFormGroup\n  cssClass=\"input-select\"\n  labelText={localize('DND5E.SpellPreparationMode')}\n>\n  <div class=\"form-fields spell-preparation-mode\">\n    <Checkbox\n      id=\"{$context.appId}-system-preparation-prepared\"\n      labelCssClass=\"checkbox prepared\"\n      document={$context.item}\n      field=\"system.preparation.prepared\"\n      checked={$context.system.preparation.prepared}\n      disabled={!$context.editable}\n      greenCheckboxWidthOverride=\"{localize('DND5E.SpellPrepared').length +\n        4}ch\"\n    >\n      {localize('DND5E.SpellPrepared')}\n    </Checkbox>\n    <Select\n      id=\"{$context.appId}-system-preparation-mode\"\n      document={$context.item}\n      field=\"system.preparation.mode\"\n      value={$context.system.preparation.mode}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.spellPreparationModes}\n        labelProp=\"label\"\n      />\n    </Select>\n  </div>\n</ItemFormGroup>\n\n{#if $context.isEmbedded && !!Object.keys($context.document.parent?.spellcastingClasses ?? {})?.length}\n  {@const classIsInvalidForActor =\n    ($context.system.sourceClass ?? '').trim() !== '' &&\n    !$context.document.parent?.spellcastingClasses?.[\n      $context.system.sourceClass\n    ]}\n  <ItemFormGroup\n    labelText={localize('DND5E.SpellSourceClass')}\n    field=\"system.sourceClass\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.sourceClass\"\n      value={$context.system.sourceClass}\n      disabled={!$context.editable}\n      blankValue=\"\"\n    >\n      <SelectOptions\n        data={$context.document.parent.spellcastingClasses}\n        labelProp=\"name\"\n        blank=\"\"\n      />\n      {#if classIsInvalidForActor}\n        <option value={$context.system.sourceClass}>\n          {localize('TIDY5E.SpellSourceIdentifierSelectText', {\n            identifier: $context.system.sourceClass,\n          })}\n        </option>\n      {/if}\n    </Select>\n    {#if classIsInvalidForActor}\n      <i\n        class=\"fas fa-fw fa-info-circle source-class-unowned-class-hint-icon flex-0\"\n        title={localize('TIDY5E.SpellSourceIdentifierLabelHint', {\n          identifier: $context.system.sourceClass,\n        })}\n      ></i>\n    {/if}\n  </ItemFormGroup>\n{:else}\n  <ItemFormGroup\n    labelText={localize('DND5E.SpellSourceClass')}\n    field=\"system.sourceClass\"\n    let:inputId\n  >\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.sourceClass\"\n      value={$context.system.sourceClass}\n      disabled={!$context.editable}\n    />\n  </ItemFormGroup>\n{/if}\n\n<h3 class=\"form-header\">{localize('DND5E.SpellCastingHeader')}</h3>\n\n<ItemActivation />\n\n<h3 class=\"form-header\">{localize('DND5E.SpellEffects')}</h3>\n\n<ItemAction />\n\n<ItemFormGroup\n  labelText={localize('DND5E.LevelScaling')}\n  field=\"system.scaling.mode\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.scaling.mode\"\n      value={$context.system.scaling.mode}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.config.spellScalingModes} />\n    </Select>\n    <TextInput\n      id=\"{$context.appId}-system-scaling-formula\"\n      document={$context.item}\n      field=\"system.scaling.formula\"\n      value={$context.system.scaling.formula}\n      placeholder={localize('DND5E.ScalingFormula')}\n      dataset={{ formulaEditor: true }}\n      disabled={!$context.editable}\n    />\n  </div>\n</ItemFormGroup>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import ItemSpellcasting from '../parts/ItemSpellcasting.svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemFormGroup\n  labelText={localize('DND5E.Identifier')}\n  field=\"system.identifier\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.identifier\"\n      value={$context.system.identifier}\n      placeholder={$context.item.identifier}\n      disabled={!$context.editable}\n    />\n  </div>\n  <p class=\"hint\">{localize('DND5E.IdentifierError')}</p>\n</ItemFormGroup>\n\n<ItemFormGroup\n  labelText={localize('DND5E.ClassIdentifier')}\n  field=\"system.classIdentifier\"\n  let:inputId\n>\n  <div class=\"form-fields\">\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.classIdentifier\"\n      value={$context.system.classIdentifier}\n      disabled={!$context.editable}\n    />\n  </div>\n  <p class=\"hint\">\n    {localize('DND5E.SubclassIdentifierHint')}\n  </p>\n</ItemFormGroup>\n\n<h3 class=\"form-header\">{localize('DND5E.Spellcasting')}</h3>\n<ItemSpellcasting />\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n  import ContentConcealer from 'src/components/content-concealment/ContentConcealer.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import ItemActivation from '../parts/ItemActivation.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ContentConcealer conceal={$context.concealDetails}>\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemToolType')}\n    field=\"system.type.value\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.type.value\"\n      value={$context.system.type.value}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.config.toolTypes} blank=\"\" />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemToolBase')}\n    field=\"system.type.baseItem\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.type.baseItem\"\n      value={$context.system.type.baseItem}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.baseItems} blank=\"\" />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    cssClass=\"stacked tool-properties\"\n    labelText={localize('DND5E.ItemToolProperties')}\n  >\n    <ItemProperties />\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.Attunement')}\n    field=\"system.attunement\"\n    let:inputId\n  >\n    <Checkbox\n      id={`${$context.appId}-system-attuned`}\n      document={$context.item}\n      field=\"system.attuned\"\n      checked={$context.system.attuned}\n      disabled={!$context.editable || !$context.system.attunement}\n      title={localize('DND5E.AttunementAttuned')}\n    ></Checkbox>\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.attunement\"\n      value={$context.system.attunement}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.attunementTypes}\n        blank={localize('DND5E.AttunementNone')}\n      />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemToolProficiency')}\n    field=\"system.proficient\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.proficient\"\n      value={$context.system.proficient}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.proficiencyLevels}\n        blank={localize('DND5E.Automatic')}\n      />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.DefaultAbilityCheck')}\n    field=\"system.ability\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.ability\"\n      value={$context.system.ability}\n      disabled={!$context.editable}\n    >\n      <SelectOptions\n        data={$context.config.abilities}\n        labelProp=\"label\"\n        blank={localize('DND5E.Default')}\n      />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemToolBonus')}\n    field=\"system.bonus\"\n    let:inputId\n  >\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.bonus\"\n      value={$context.system.bonus}\n      dataset={{ formulaEditor: true }}\n      disabled={!$context.editable}\n    />\n  </ItemFormGroup>\n\n  <h3 class=\"form-header\">{localize('DND5E.ItemToolUsage')}</h3>\n  <ItemActivation />\n\n  <ItemFormGroup\n    cssClass=\"stacked\"\n    labelText={localize('DND5E.ChatFlavor')}\n    field=\"system.chatFlavor\"\n    let:inputId\n  >\n    <TextInput\n      id={inputId}\n      document={$context.item}\n      field=\"system.chatFlavor\"\n      value={$context.system.chatFlavor}\n      disabled={!$context.editable}\n    />\n  </ItemFormGroup>\n</ContentConcealer>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import ItemMountable from '../parts/ItemMountable.svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemActivation from '../parts/ItemActivation.svelte';\n  import ItemAction from '../parts/ItemAction.svelte';\n  import ItemFormGroup from '../form/ItemFormGroup.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import ItemProperties from '../parts/ItemProperties.svelte';\n  import ContentConcealer from 'src/components/content-concealment/ContentConcealer.svelte';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ContentConcealer conceal={$context.concealDetails}>\n  <h3 class=\"form-header\">{localize('DND5E.ItemWeaponDetails')}</h3>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemWeaponType')}\n    field=\"system.type.value\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.type.value\"\n      value={$context.system.type.value}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.config.weaponTypes} />\n    </Select>\n  </ItemFormGroup>\n\n  <ItemFormGroup\n    labelText={localize('DND5E.ItemWeaponBase')}\n    field=\"system.type.baseItem\"\n    let:inputId\n  >\n    <Select\n      id={inputId}\n      document={$context.item}\n      field=\"system.type.baseItem\"\n      value={$context.system.type.baseItem}\n      disabled={!$context.editable}\n    >\n      <SelectOptions data={$context.baseItems} blank=\"\" />\n    </Select>\n  </ItemFormGroup>\n\n  {#if !$context.system.isMountable}\n    <ItemFormGroup\n      labelText={localize('DND5E.Attunement')}\n      field=\"system.attunement\"\n      let:inputId\n    >\n      <Checkbox\n        id={`${$context.appId}-system-attuned`}\n        document={$context.item}\n        field=\"system.attuned\"\n        checked={$context.system.attuned}\n        disabled={!$context.editable || !$context.system.attunement}\n        title={localize('DND5E.AttunementAttuned')}\n      ></Checkbox>\n      <Select\n        id={inputId}\n        document={$context.item}\n        field=\"system.attunement\"\n        value={$context.system.attunement}\n        disabled={!$context.editable}\n      >\n        <SelectOptions\n          data={$context.config.attunementTypes}\n          blank={localize('DND5E.AttunementNone')}\n        />\n      </Select>\n    </ItemFormGroup>\n\n    <ItemFormGroup labelText={localize('DND5E.Proficiency')}>\n      <Select\n        document={$context.item}\n        field=\"system.proficient\"\n        value={$context.system.proficient}\n        disabled={!$context.editable}\n      >\n        <SelectOptions\n          data={$context.config.weaponAndArmorProficiencyLevels}\n          blank={localize('DND5E.Automatic')}\n        />\n      </Select>\n    </ItemFormGroup>\n  {/if}\n\n  <ItemFormGroup\n    cssClass=\"stacked weapon-properties\"\n    labelText={localize('DND5E.ItemWeaponProperties')}\n  >\n    <ItemProperties />\n  </ItemFormGroup>\n\n  {#if $context.system.isMountable}\n    <ItemFormGroup\n      labelText={localize('DND5E.ArmorClass')}\n      field=\"system.armor.value\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <NumberInput\n          id={inputId}\n          document={$context.item}\n          field=\"system.armor.value\"\n          value={$context.system.armor.value}\n          disabled={!$context.editable}\n        />\n      </div>\n    </ItemFormGroup>\n\n    <ItemMountable />\n  {/if}\n\n  {#if $context.properties.mgc.selected}\n    <ItemFormGroup\n      labelText={localize('DND5E.MagicalBonus')}\n      field=\"system.magicalBonus\"\n      let:inputId\n    >\n      <div class=\"form-fields\">\n        <NumberInput\n          id={inputId}\n          value={$context.system.magicalBonus}\n          field=\"system.magicalBonus\"\n          document={$context.item}\n          disabled={!$context.editable}\n          min=\"0\"\n          step=\"1\"\n          placeholder=\"0\"\n        />\n      </div>\n    </ItemFormGroup>\n  {/if}\n\n  <h3 class=\"form-header\">{localize('DND5E.ItemWeaponUsage')}</h3>\n\n  <ItemActivation />\n\n  <h3 class=\"form-header\">{localize('DND5E.ItemWeaponAttack')}</h3>\n\n  <ItemAction />\n</ContentConcealer>\n","import { CONSTANTS } from 'src/constants';\nimport ItemActiveEffectsTab from '../../sheets/item/tabs/ItemActiveEffectsTab.svelte';\nimport ItemAdvancementTab from '../../sheets/item/tabs/ItemAdvancementTab.svelte';\nimport ItemBackgroundDetailsTab from '../../sheets/item/tabs/ItemBackgroundDetailsTab.svelte';\nimport ItemClassDetailsTab from '../../sheets/item/tabs/ItemClassDetailsTab.svelte';\nimport ItemConsumableDetailsTab from '../../sheets/item/tabs/ItemConsumableDetailsTab.svelte';\nimport ItemContainerContentsTab from '../../sheets/item/tabs/ItemContainerContentsTab.svelte';\nimport ItemContainerDetailsTab from '../../sheets/item/tabs/ItemContainerDetailsTab.svelte';\nimport ItemDescriptionTab from '../../sheets/item/tabs/ItemDescriptionTab.svelte';\nimport ItemRaceDetailsTab from '../../sheets/item/tabs/ItemRaceDetailsTab.svelte';\nimport ItemDescriptionWithSidebarTab from '../../sheets/item/tabs/ItemDescriptionWithSidebarTab.svelte';\nimport ItemEquipmentDetailsTab from '../../sheets/item/tabs/ItemEquipmentDetailsTab.svelte';\nimport ItemFeatDetailsTab from '../../sheets/item/tabs/ItemFeatDetailsTab.svelte';\nimport ItemLootDetailsTab from '../../sheets/item/tabs/ItemLootDetailsTab.svelte';\nimport ItemRaceDescriptionTab from '../../sheets/item/tabs/ItemRaceDescriptionTab.svelte';\nimport ItemSpellDetailsTab from '../../sheets/item/tabs/ItemSpellDetailsTab.svelte';\nimport ItemSubclassDetailsTab from '../../sheets/item/tabs/ItemSubclassDetailsTab.svelte';\nimport ItemToolDetailsTab from '../../sheets/item/tabs/ItemToolDetailsTab.svelte';\nimport ItemWeaponDetailsTab from '../../sheets/item/tabs/ItemWeaponDetailsTab.svelte';\nimport type { Tab } from 'src/types/types';\n\nconst itemSheetTabs: Record<string, Tab> = {\n  /**\n   * Advancement create/read/update/delete interface.\n   */\n  advancement: {\n    id: CONSTANTS.TAB_ITEM_ADVANCEMENT_ID,\n    title: 'DND5E.AdvancementTitle',\n    content: {\n      component: ItemAdvancementTab,\n      cssClass: 'detail-tab-contents items-list-container',\n      type: 'svelte',\n    },\n  },\n  /**\n   * Details form for background items.\n   */\n  backgroundDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemBackgroundDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Details form for class items.\n   */\n  classDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemClassDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Details form for consumable items.\n   */\n  consumableDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemConsumableDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  containerContents: {\n    id: CONSTANTS.TAB_CONTAINER_CONTENTS,\n    title: 'DND5E.Contents',\n    content: {\n      component: ItemContainerContentsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n  },\n  containerDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemContainerDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Description editor and a header for mechanics/flavor.\n   */\n  description: {\n    id: CONSTANTS.TAB_ITEM_DESCRIPTION_ID,\n    title: 'DND5E.Description',\n    content: {\n      component: ItemDescriptionTab,\n      cssClass: 'flexcol',\n      type: 'svelte',\n    },\n  },\n  /**\n   * A sidebar with item inputs and properties, and a description editor.\n   */\n  descriptionWithSidebar: {\n    id: CONSTANTS.TAB_ITEM_DESCRIPTION_ID,\n    title: 'DND5E.Description',\n    content: {\n      component: ItemDescriptionWithSidebarTab,\n      cssClass: 'flexrow',\n      type: 'svelte',\n    },\n  },\n  /**\n   * Active Effects create/read/update/delete interface.\n   */\n  effects: {\n    id: CONSTANTS.TAB_ITEM_EFFECTS_ID,\n    title: 'DND5E.Effects',\n    content: {\n      component: ItemActiveEffectsTab,\n      cssClass: 'flexcol items-list-container',\n      type: 'svelte',\n    },\n  },\n  /**\n   * Details form for equipment items.\n   */\n  equipmentDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemEquipmentDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Details form for feat items.\n   */\n  featDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemFeatDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Details form for loot.\n   */\n  lootDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemLootDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * A sidebar with race properties and configuration buttons, and a description editor.\n   */\n  raceDescription: {\n    id: CONSTANTS.TAB_ITEM_DESCRIPTION_ID,\n    title: 'DND5E.Description',\n    content: {\n      component: ItemRaceDescriptionTab,\n      cssClass: 'flexrow',\n      type: 'svelte',\n    },\n  },\n  /**\n   * A sidebar with race properties and configuration buttons, and a description editor.\n   */\n  raceDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemRaceDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n  },\n  /**\n   * Details form for spell items.\n   */\n  spellDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemSpellDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Details form for subclass items.\n   */\n  subclassDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemSubclassDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Details form for tool items.\n   */\n  toolDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemToolDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n  /**\n   * Details form for weapon items.\n   */\n  weaponDetails: {\n    id: CONSTANTS.TAB_ITEM_DETAILS_ID,\n    title: 'DND5E.Details',\n    content: {\n      component: ItemWeaponDetailsTab,\n      cssClass: 'detail-tab-contents',\n      type: 'svelte',\n    },\n    autoHeight: true,\n  },\n} as const;\n\nexport default itemSheetTabs;\n","<script lang=\"ts\">\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  export let selectedTabId: string = 'description';\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <TextInput\n        field=\"name\"\n        document={$context.item}\n        value={$context.item.name}\n        attributes={{ 'data-tidy-item-name': $context.item.name }}\n        placeholder={localize('DND5E.BackgroundName')}\n        disabled={!$context.editable}\n        title={$context.item.name}\n      />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n      <span class=\"item-status\">{$context.itemStatus ?? ''}</span>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable}\n        />\n      </li>\n    </ul>\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import type { Readable } from 'svelte/store';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <TextInput\n        field=\"name\"\n        document={$context.item}\n        value={$context.item.name}\n        attributes={{ 'data-tidy-item-name': $context.item.name }}\n        placeholder={localize('DND5E.ClassName')}\n        disabled={!$context.editable}\n        title={$context.item.name}\n      />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n      <span class=\"item-status\">{$context.itemStatus ?? ''}</span>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable}\n        />\n      </li>\n    </ul>\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import type { Readable } from 'svelte/store';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemIdentifiableName from './parts/ItemIdentifiableName.svelte';\n  import ItemHeaderToggles from './parts/ItemHeaderToggles.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <ItemIdentifiableName />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>{$context.itemType}</li>\n      <li>\n        {#if $context.concealDetails}\n          <span>{localize('DND5E.Unidentified.Title')}</span>\n        {:else}\n          <Select\n            document={$context.item}\n            field=\"system.rarity\"\n            value={$context.system.rarity}\n            disabled={!$context.editable}\n            blankValue=\"\"\n          >\n            <SelectOptions data={$context.config.itemRarity} blank=\"\" />\n          </Select>\n        {/if}\n      </li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable && !$context.concealDetails}\n        />\n      </li>\n    </ul>\n    <ItemHeaderToggles />\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    ContainerSheetContext,\n    Item5e,\n    ItemChatData,\n  } from 'src/types/item.types';\n  import HorizontalLineSeparator from '../layout/HorizontalLineSeparator.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type {\n    ActorSheetContext,\n    CharacterSheetContext,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { coalesce } from 'src/utils/formatting';\n\n  export let item: Item5e;\n  export let chatData: ItemChatData;\n\n  let context =\n    getContext<\n      Readable<\n        | CharacterSheetContext\n        | ActorSheetContext\n        | VehicleSheetContext\n        | ContainerSheetContext\n      >\n    >('context');\n\n  $: ctx = $context.itemContext[item.id] ?? {};\n  $: concealDetails = FoundryAdapter.concealDetails(item);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"info-card {item.attunement?.cls ?? ''}\"\n  class:magic-item={item.system.properties?.has('mgc')}\n  class:equipped={item.system.equipped}\n  data-item-id={item._id}\n>\n  <p class=\"info-card-name\">\n    {item.system.identified === false\n      ? coalesce(\n          item.system.unidentified.name,\n          localize('DND5E.Unidentified.Title'),\n        )\n      : item.name}\n  </p>\n  {#if 'hasUses' in ctx && ctx.hasUses}\n    <div class=\"info-card-amount\">\n      <span\n        ><i class=\"fas fa-bolt\" /><b>{localize('DND5E.Charges')}:</b>\n        {item.system.uses.value}/{item.system.uses.max}</span\n      >\n    </div>\n    <HorizontalLineSeparator borderColor=\"faint\" />\n  {/if}\n  <div class=\"description-wrap\">\n    <div class=\"info-card-description\">\n      {#if concealDetails}\n        {@html chatData.unidentified.description}\n      {:else}\n        {@html chatData.description.value}\n      {/if}\n    </div>\n  </div>\n\n  <slot />\n</div>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Item5e, ItemChatData } from 'src/types/item.types';\n  import HorizontalLineSeparator from '../layout/HorizontalLineSeparator.svelte';\n  import type { Readable } from 'svelte/store';\n  import { getContext } from 'svelte';\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import { CONSTANTS } from 'src/constants';\n\n  export let item: Item5e;\n  export let chatData: ItemChatData;\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: spellRowClasses = FoundryAdapter.getSpellRowClasses(item);\n  $: ctx = $context.itemContext[item.id];\n  $: canPrepare = FoundryAdapter.canPrepareSpell(item);\n</script>\n\n<div class=\"info-card spellbook {spellRowClasses}\" data-item-id={item._id}>\n  <p class=\"info-card-name\">{item.name}</p>\n  {#if item.labels?.school || ($context.owner && canPrepare)}\n    <div class=\"info-card-states\">\n      <span>{item.labels?.school ?? ''}</span>\n      {#if $context.owner}\n        {#if canPrepare}\n          <span>{ctx?.toggleTitle ?? ''}</span>\n        {/if}\n      {/if}\n    </div>\n    <HorizontalLineSeparator borderColor=\"faint\" />\n  {/if}\n  {#if ctx?.hasUses}\n    <div class=\"info-card-amount\">\n      <span\n        ><i class=\"fas fa-bolt\" /><b>{localize('DND5E.Charges')}:</b>\n        {item.system.uses.value}/{item.system.uses.max}</span\n      >\n    </div>\n    <HorizontalLineSeparator borderColor=\"faint\" />\n  {/if}\n  <div class=\"description-wrap\">\n    <div class=\"info-card-description\">\n      {@html chatData.description.value}\n    </div>\n  </div>\n\n  <slot />\n</div>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Item5e, ItemChatData } from 'src/types/item.types';\n  import HorizontalLineSeparator from '../layout/HorizontalLineSeparator.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { CharacterSheetContext } from 'src/types/types';\n  import AmmoSelector from '../../sheets/actor/AmmoSelector.svelte';\n  import { coalesce } from 'src/utils/formatting';\n  import { CONSTANTS } from 'src/constants';\n\n  export let item: Item5e;\n  export let chatData: ItemChatData;\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: ctx = $context.itemContext?.[item.id];\n  $: concealDetails = FoundryAdapter.concealDetails(item);\n\n  const localize = FoundryAdapter.localize;\n  const weightUnit = FoundryAdapter.getWeightUnit();\n</script>\n\n<div\n  class=\"info-card inventory {item.attunement?.cls ?? ''}\"\n  class:magic-item={item.system.properties?.has('mgc')}\n  class:equipped={item.system.equipped}\n  data-item-id={item._id}\n  data-item-index={item._id}\n>\n  <p class=\"info-card-name\">\n    {item.system.identified === false\n      ? coalesce(\n          item.system.unidentified.name,\n          localize('DND5E.Unidentified.Title'),\n        )\n      : item.name}\n  </p>\n  {#if item.system.properties?.has('amm')}\n    <p class=\"ammo-switch\" data-id={item._id}>\n      <AmmoSelector {item} />\n    </p>\n    <HorizontalLineSeparator borderColor=\"faint\" />\n  {/if}\n\n  {#if item.system.properties?.has('mgc') || ctx?.attunement}\n    <div class=\"info-card-states\">\n      {#if item.system.properties?.has('mgc')}\n        <span class=\"flex-row extra-small-gap align-items-center\"\n          ><i class=\"fas fa-magic\" />Magic Item</span\n        >\n      {/if}\n      {#if ctx?.attunement && !concealDetails}\n        <span\n          class=\"flex-row extra-small-gap align-items-center info-attuned {ctx\n            .attunement.cls ?? ''}\"\n        >\n          <i class=\"fas fa-sun\" />\n          {localize(ctx.attunement.title)}\n        </span>\n      {/if}\n    </div>\n    <HorizontalLineSeparator borderColor=\"faint\" />\n  {/if}\n  <div class=\"info-card-amount\">\n    <span class=\"info-weight\"\n      ><b>{localize('DND5E.Weight')}:</b>\n      {item.system.weight.value}\n      {weightUnit}</span\n    >\n    <span class=\"info-quantity\"\n      ><b>{localize('DND5E.Quantity')}:</b>\n      {item.system.quantity}\n      {#if item.system.price.value}\n        &times;\n        {#if concealDetails}\n          {localize('DND5E.Unidentified.Value')}\n        {:else}\n          {item.system.price.value}\n          {item.system.price.denomination}\n        {/if}\n      {/if}\n    </span>\n  </div>\n  <HorizontalLineSeparator borderColor=\"faint\" />\n  {#if ctx?.hasUses}\n    <div class=\"info-card-amount\">\n      <span\n        ><i class=\"fas fa-bolt\" /><b>{localize('DND5E.Charges')}:</b>\n        {item.system.uses.value}/{item.system.uses.max}</span\n      >\n    </div>\n    <HorizontalLineSeparator borderColor=\"faint\" />\n  {/if}\n  <div class=\"description-wrap\">\n    <div class=\"info-card-description\">\n      {#if concealDetails}\n        {@html chatData.unidentified.description}\n      {:else}\n        {@html chatData.description.value}\n      {/if}\n    </div>\n  </div>\n\n  <slot />\n</div>\n","import type { Item5e } from 'src/types/item.types';\nimport DefaultItemCardContentTemplate from './DefaultItemCardContentTemplate.svelte';\nimport SpellbookItemCardContent from './SpellbookItemCardContent.svelte';\nimport InventoryItemCardContent from './InventoryItemCardContent.svelte';\nimport { Inventory } from 'src/features/sections/Inventory';\n\nexport function getItemCardContentTemplate(item: Item5e) {\n  // TODO: Make item type to Card Content Template mod-able via the API.\n  const inventoryTypes = Inventory.getDefaultInventoryTypes();\n  const intentoryItems = new Set(inventoryTypes);\n\n  if (intentoryItems.has(item?.type)) {\n    return InventoryItemCardContent;\n  }\n\n  switch (item?.type) {\n    case 'spell':\n      return SpellbookItemCardContent;\n    case 'race':\n    case 'background':\n    case 'class':\n    case 'subclass':\n    case 'feat':\n    default:\n      return DefaultItemCardContentTemplate;\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    Item5e,\n    ItemCardContentComponent,\n    ItemChatData,\n  } from 'src/types/item.types';\n  import type { ItemCardStore } from 'src/types/types';\n  import { getContext, onDestroy, onMount } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import HorizontalLineSeparator from '../layout/HorizontalLineSeparator.svelte';\n  import { warn } from 'src/utils/logging';\n  import { settingStore } from 'src/settings/settings';\n  import { getItemCardContentTemplate } from './item-info-card';\n  import { ItemSummaryRuntime } from 'src/runtime/ItemSummaryRuntime';\n  import ItemSummaryCommandButtonList from '../item-summary/ItemSummaryCommandButtonList.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  // Fix Key\n  let frozen: boolean = false;\n  $: fixKey = $settingStore.itemCardsFixKey?.toUpperCase();\n  $: concealDetails = FoundryAdapter.concealDetails(item);\n\n  function detectFixStart(ev: KeyboardEvent) {\n    if (frozen) {\n      return;\n    }\n\n    frozen = ev.key?.toUpperCase() === fixKey;\n  }\n\n  function detectFixStop(ev: KeyboardEvent) {\n    if (ev.key?.toUpperCase() === fixKey) {\n      frozen = false;\n    }\n  }\n\n  // Floating\n  let lastMouseEvent: { clientX: number; clientY: number } | null = null;\n  let floatingTop: string | null = null;\n  let floatingLeft: string | null = null;\n  let sheetBorderRight: number = 0;\n  let sheetBorderBottom: number = 0;\n  let itemCardNode: HTMLElement;\n  let sheet: HTMLElement | null = null;\n\n  function onMouseMove(args: { clientX: number; clientY: number }) {\n    lastMouseEvent = args;\n\n    if (!$settingStore.itemCardsAreFloating || !open || frozen) {\n      return;\n    }\n\n    positionFloatingCard();\n  }\n\n  function positionFloatingCard() {\n    if (!lastMouseEvent) {\n      return;\n    }\n\n    const cardWidthPx = rootFontSizePx * cardWidthRem;\n    const cardHeightPx = rootFontSizePx * cardHeightRem;\n    const cardHalfHeightPx = cardHeightPx / 2;\n    const mouseCursorCardGapPx = rootFontSizePx * mouseCursorCardGapRem;\n\n    let mousePos = { x: lastMouseEvent.clientX, y: lastMouseEvent.clientY };\n    let top = `${mousePos.y - cardHalfHeightPx}px`;\n    let left = `${mousePos.x + mouseCursorCardGapPx}px`;\n\n    if (mousePos.x + cardWidthPx > sheetBorderRight) {\n      left = `${mousePos.x - cardWidthPx - mouseCursorCardGapPx}px`;\n    }\n\n    if (mousePos.y + cardHalfHeightPx > sheetBorderBottom) {\n      let diff = sheetBorderBottom - (mousePos.y + cardHalfHeightPx);\n      top = `${mousePos.y - cardHalfHeightPx + diff}px`;\n    }\n\n    floatingTop = top;\n    floatingLeft = left;\n  }\n\n  // Show/Hide\n  let open = false;\n  $: {\n    const body = itemCardNode?.ownerDocument?.body;\n    if (body && open) {\n      listenForBodyEvents(body);\n    } else if (body && !open) {\n      stopListeningForBodyEvents(body);\n    }\n  }\n  function listenForBodyEvents(body: HTMLElement) {\n    body.addEventListener('keydown', detectFixStart);\n    body.addEventListener('keyup', detectFixStop);\n    body.addEventListener('mousemove', onMouseMove);\n  }\n  function stopListeningForBodyEvents(body: HTMLElement) {\n    body.addEventListener('keydown', detectFixStart);\n    body.addEventListener('keyup', detectFixStop);\n    body.addEventListener('mousemove', onMouseMove);\n  }\n  let debug = false;\n  let timer: any;\n  let infoContentTemplate: ItemCardContentComponent | null;\n  $: delayMs = $settingStore.itemCardsDelay ?? 0;\n\n  async function showCard() {\n    if (!$card.item) {\n      return;\n    }\n\n    chatData = await $card.item.getChatData({\n      secrets: $card.item.actor?.isOwner,\n    });\n\n    /* \n      now that time has passed, \n      check the most current version of the card item, \n      in case the user has moused away. \n    */\n    if ($card.item) {\n      infoContentTemplate = $card.itemCardContentTemplate;\n      item = $card.item;\n\n      if ($settingStore.itemCardsAreFloating) {\n        rootFontSizePx = getRootFontSizePx();\n\n        const boundingClientRect = sheet?.getBoundingClientRect();\n        if (boundingClientRect) {\n          sheetBorderRight = boundingClientRect.right;\n          sheetBorderBottom = boundingClientRect.bottom;\n        }\n\n        positionFloatingCard();\n      }\n\n      open = true;\n    }\n  }\n\n  // Content\n  const card = getContext<Writable<ItemCardStore>>(CONSTANTS.SVELTE_CONTEXT.CARD);\n  const cardWidthRem: number = 17.5;\n  const cardHeightRem: number = 28.75;\n  const mouseCursorCardGapRem = 1.5;\n  let rootFontSizePx = getRootFontSizePx();\n  let item: Item5e | undefined;\n  $: itemSummaryCommands = ItemSummaryRuntime.getItemSummaryCommands(item);\n  let chatData: ItemChatData | undefined;\n  $: specialProps = getSpecialProperties(item);\n  $: itemProps = chatData?.properties ?? [];\n  $: $card,\n    (async () => {\n      if (frozen) {\n        return;\n      }\n\n      if ($card.item?.id === item?.id && open) {\n        return;\n      }\n\n      open = false;\n      clearTimeout(timer);\n\n      const newItem = $card.item;\n\n      if (!newItem) {\n        return;\n      }\n\n      timer = setTimeout(() => showCard(), delayMs);\n    })();\n\n  // Lifecycle\n  onMount(() => {\n    sheet = $card.sheet;\n    if (sheet) {\n      sheet.addEventListener('mousemove', onMouseMove);\n    } else {\n      warn(\n        'Item Card parent sheet not found. Unable to support floating item card.',\n      );\n    }\n  });\n\n  onDestroy(() => {\n    const body = itemCardNode.ownerDocument.body;\n    body && stopListeningForBodyEvents(body);\n  });\n\n  function getRootFontSizePx(): number {\n    return document.documentElement.style.fontSize !== ''\n      ? parseFloat(document.documentElement.style.fontSize)\n      : parseFloat(getComputedStyle(document.documentElement).fontSize);\n  }\n\n  function getSpecialProperties(item: Item5e | undefined): string[] {\n    const props: string[] = [];\n\n    if (item?.labels?.toHit) {\n      props.push(item.labels.toHit.replace('+ ', '+').replace('- ', '-'));\n    }\n    if (item?.labels?.damage && item.labels?.derivedDamage?.length > 0) {\n      props.push(\n        item.labels.derivedDamage[0].label\n          .replace(' + ', '+')\n          .replace(' - ', '-'),\n      );\n    }\n    if (item?.labels?.save) {\n      props.push(item.labels.save);\n    }\n\n    return props;\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section\n  bind:this={itemCardNode}\n  class=\"item-info-container\"\n  class:open={debug || open}\n  class:floating={$settingStore.itemCardsAreFloating}\n  style:top={$settingStore.itemCardsAreFloating ? floatingTop : undefined}\n  style:left={$settingStore.itemCardsAreFloating ? floatingLeft : undefined}\n  style:--card-width=\"{cardWidthRem}rem\"\n  style:--card-height=\"{cardHeightRem}rem\"\n>\n  <div class=\"info-wrap\">\n    <article class=\"item-info-container-content\">\n      {#if !!item && !!chatData}\n        <svelte:component\n          this={infoContentTemplate ?? getItemCardContentTemplate(item)}\n          {item}\n          {chatData}\n        >\n          {#if specialProps.length}\n            <HorizontalLineSeparator />\n            <div\n              class=\"inline-wrapped-elements\"\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_PROPERTY_LIST}\n              inert={concealDetails}\n            >\n              {#each specialProps as prop}\n                <span class=\"tag\">{prop}</span>\n              {/each}\n            </div>\n          {/if}\n          {#if itemProps.length}\n            <HorizontalLineSeparator />\n            <div\n              class=\"inline-wrapped-elements\"\n              data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ITEM_PROPERTY_LIST}\n              inert={concealDetails}\n            >\n              {#each itemProps as prop}\n                <span class=\"tag\">{prop}</span>\n              {/each}\n            </div>\n          {/if}\n          {#if itemSummaryCommands.length}\n            <HorizontalLineSeparator />\n            <div class=\"inline-wrapped-elements\">\n              <ItemSummaryCommandButtonList {item} />\n            </div>\n          {/if}\n        </svelte:component>\n      {:else}\n        <h2>😢 Unable to show item card contents</h2>\n      {/if}\n    </article>\n    <HorizontalLineSeparator />\n\n    <article class=\"item-info-card-hints\">\n      <p class:frozen>\n        <span class=\"key\">{fixKey}</span>\n        {localize('TIDY5E.ItemCardsKeyHint')}\n      </p>\n      <p><i class=\"fas fa-mouse\" /> {localize('TIDY5E.ItemCardsMouseHint')}</p>\n    </article>\n  </div>\n</section>\n\n<style lang=\"scss\">\n  .item-info-container {\n    position: absolute;\n    top: 50%;\n    right: calc(100%);\n    transform: translateY(-50%);\n    width: 0;\n    height: var(--card-height);\n    background: var(--t5e-item-info-card-background);\n    border-radius: 0.3125rem 0 0 0.3125rem;\n    z-index: -10;\n    box-shadow: 0 0 0.3125rem var(--t5e-item-info-card-box-shadow-color);\n    transition: width 0.2s ease;\n    overflow: hidden;\n\n    &.open {\n      width: var(--card-width);\n    }\n\n    &.floating {\n      position: fixed;\n      z-index: 100;\n      border-radius: 0.3125rem;\n      right: auto;\n      transform: translateY(0);\n      transition: none;\n\n      &.open {\n        transition: width 0.2s ease;\n      }\n\n      .info-wrap {\n        border: none;\n      }\n    }\n\n    .info-wrap {\n      display: flex;\n      height: 100%;\n      flex-direction: column;\n      border-right: 0.0625rem solid var(--t5e-faint-color);\n    }\n\n    .item-info-card-hints {\n      width: var(--card-width);\n      font-size: 0.75rem;\n      padding: 0.25rem 0.5rem 0 0.5rem;\n      font-style: italic;\n\n      .frozen .key {\n        background: var(--t5e-primary-accent-color);\n      }\n\n      .key {\n        display: inline-block;\n        background: var(--t5e-primary-font-color);\n        color: var(--t5e-background);\n        border-radius: 0.1875rem;\n        font-style: normal;\n        padding: 0 0.25rem;\n        text-transform: uppercase;\n      }\n      p {\n        margin: 0 0 0.25rem 0;\n      }\n    }\n  }\n\n  .item-info-container-content {\n    flex: 1;\n    overflow: hidden;\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import ItemIdentifiableName from './parts/ItemIdentifiableName.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ContainerSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Source from '../shared/Source.svelte';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import ItemInfoCard from 'src/components/item-info-card/ItemInfoCard.svelte';\n  import ItemHeaderToggles from './parts/ItemHeaderToggles.svelte';\n\n  let context = getContext<Readable<ContainerSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<ItemInfoCard />\n\n<header class=\"sheet-header container-header flexrow gap\">\n  <ItemProfilePicture />\n\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <ItemIdentifiableName />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>\n        {#if $context.concealDetails}\n          <span>{localize('DND5E.Unidentified.Title')}</span>\n        {:else}\n          <Select\n            document={$context.item}\n            field=\"system.rarity\"\n            value={$context.system.rarity}\n            disabled={!$context.editable}\n            blankValue=\"\"\n          >\n            <SelectOptions data={$context.config.itemRarity} blank=\"\" />\n          </Select>\n        {/if}\n      </li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable && !$context.concealDetails}\n        />\n      </li>\n    </ul>\n    <ItemHeaderToggles />\n  </div>\n</header>\n\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n\n<style lang=\"scss\">\n</style>\n","<script lang=\"ts\">\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import type { Readable } from 'svelte/store';\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <TextInput\n        document={$context.item}\n        field=\"name\"\n        placeholder={localize('DND5E.ItemName')}\n        value={$context.item.name}\n        attributes={{ 'data-tidy-item-name': $context.item.name }}\n        disabled={!$context.editable}\n        title={$context.item.name}\n      />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n      <span class=\"item-status\">{$context.itemStatus ?? ''}</span>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>\n        {$context.labels.featType ?? ''}\n      </li>\n      <li>\n        <TextInput\n          document={$context.item}\n          field=\"system.requirements\"\n          value={$context.system.requirements}\n          placeholder={localize('DND5E.Requirements')}\n          disabled={!$context.editable}\n        />\n      </li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable}\n        />\n      </li>\n    </ul>\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import type { Readable } from 'svelte/store';\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemIdentifiableName from './parts/ItemIdentifiableName.svelte';\n  import PropertyToggle from 'src/components/toggle/PropertyToggle.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  $: identifiedLabelWidthCh = Math.max(\n    localize('DND5E.Identified').length,\n    localize('DND5E.Unidentified.Title').length,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header loot-header flexrow gap\">\n  <ItemProfilePicture />\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <ItemIdentifiableName />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n      <span class=\"item-status\">{$context.itemStatus ?? ''}</span>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>\n        {#if $context.concealDetails}\n          <span>{localize('DND5E.Unidentified.Title')}</span>\n        {:else}\n          <Select\n            document={$context.item}\n            field=\"system.rarity\"\n            value={$context.system.rarity}\n            disabled={!$context.editable}\n            blankValue=\"\"\n          >\n            <SelectOptions data={$context.config.itemRarity} blank=\"\" />\n          </Select>\n        {/if}\n      </li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable && !$context.concealDetails}\n        />\n      </li>\n    </ul>\n    <div class=\"flex-row no-gap\">\n      {#if FoundryAdapter.canIdentify($context.item)}\n        <PropertyToggle\n          document={$context.item}\n          field=\"system.identified\"\n          checked={$context.system.identified}\n          disabled={!$context.editable}\n          title={$context.system.identified\n            ? localize('DND5E.Identified')\n            : localize('DND5E.Unidentified.Title')}\n          iconClass=\"fas fa-magnifying-glass fa-fw\"\n        >\n          <div style=\"width: {identifiedLabelWidthCh}ch\">\n            {$context.system.identified\n              ? localize('DND5E.Identified')\n              : localize('DND5E.Unidentified.Title')}\n          </div>\n        </PropertyToggle>\n      {/if}\n    </div>\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import type { Readable } from 'svelte/store';\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: selectedTabId = getContext<string>(\n    CONSTANTS.SVELTE_CONTEXT.CURRENT_TAB_ID,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <TextInput\n        document={$context.item}\n        field=\"name\"\n        value={$context.item.name}\n        attributes={{ 'data-tidy-item-name': $context.item.name }}\n        placeholder={localize('DND5E.SpellName')}\n        disabled={!$context.editable}\n        title={$context.item.name}\n      />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n      <span class=\"item-status\">{$context.itemStatus ?? ''}</span>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>{$context.labels.level ?? ''}</li>\n      <li>{$context.labels.school ?? ''}</li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable}\n        />\n      </li>\n    </ul>\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <TextInput\n        field=\"name\"\n        document={$context.item}\n        value={$context.item.name}\n        attributes={{ 'data-tidy-item-name': $context.item.name }}\n        placeholder={localize('DND5E.SubclassName')}\n        disabled={!$context.editable}\n        title={$context.item.name}\n      />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n      <span class=\"item-status\">{$context.itemStatus ?? ''}</span>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable}\n        />\n      </li>\n    </ul>\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemIdentifiableName from './parts/ItemIdentifiableName.svelte';\n  import ItemHeaderToggles from './parts/ItemHeaderToggles.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <ItemIdentifiableName />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>\n        {$context.system.type.label}\n      </li>\n      <li>\n        {#if $context.concealDetails}\n          <span>{localize('DND5E.Unidentified.Title')}</span>\n        {:else}\n          <Select\n            document={$context.item}\n            field=\"system.rarity\"\n            value={$context.system.rarity}\n            disabled={!$context.editable}\n            blankValue=\"\"\n          >\n            <SelectOptions data={$context.config.itemRarity} blank=\"\" />\n          </Select>\n        {/if}\n      </li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable && !$context.concealDetails}\n        />\n      </li>\n    </ul>\n    <ItemHeaderToggles />\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import Select from 'src/components/inputs/Select.svelte';\n  import SelectOptions from 'src/components/inputs/SelectOptions.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import ItemIdentifiableName from './parts/ItemIdentifiableName.svelte';\n  import ItemHeaderToggles from './parts/ItemHeaderToggles.svelte';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <ItemIdentifiableName />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li>{$context.system.type.label}</li>\n      <li>\n        {#if $context.concealDetails}\n          <span>{localize('DND5E.Unidentified.Title')}</span>\n        {:else}\n          <Select\n            document={$context.item}\n            field=\"system.rarity\"\n            value={$context.system.rarity}\n            disabled={!$context.editable}\n            blankValue=\"\"\n          >\n            <SelectOptions data={$context.config.itemRarity} blank=\"\" />\n          </Select>\n        {/if}\n      </li>\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable && !$context.concealDetails}\n        />\n      </li>\n    </ul>\n    <ItemHeaderToggles />\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","<script lang=\"ts\">\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import type { Readable } from 'svelte/store';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ItemProfilePicture from './parts/ItemProfilePicture.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import Source from '../shared/Source.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let selectedTabId: string;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<header class=\"sheet-header flexrow gap\">\n  <ItemProfilePicture />\n  <div\n    class=\"header-details flexrow small-gap\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n  >\n    <h1\n      class=\"charname\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n    >\n      <TextInput\n        field=\"name\"\n        document={$context.item}\n        value={$context.item.name}\n        attributes={{ 'data-tidy-item-name': $context.item.name }}\n        placeholder={localize('DND5E.ClassName')}\n        disabled={!$context.editable}\n        title={$context.item.name}\n      />\n    </h1>\n\n    <div class=\"item-subtitle\">\n      <h4 class=\"item-type\">{$context.itemType ?? ''}</h4>\n      <span class=\"item-status\">{$context.itemStatus ?? ''}</span>\n    </div>\n\n    <ul class=\"summary flexrow\">\n      <li class=\"flex-row\">\n        <Source\n          document={$context.item}\n          keyPath=\"system.source\"\n          editable={$context.editable}\n        />\n      </li>\n    </ul>\n  </div>\n</header>\n<Tabs bind:selectedTabId tabs={$context.tabs} />\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n","import { CONSTANTS } from 'src/constants';\nimport EquipmentSheet from 'src/sheets/item/EquipmentSheet.svelte';\nimport type { CustomContent, Tab } from 'src/types/types';\nimport itemSheetTabs from './item-sheet-tabs';\nimport BackgroundSheet from 'src/sheets/item/BackgroundSheet.svelte';\nimport ClassSheet from 'src/sheets/item/ClassSheet.svelte';\nimport ConsumableSheet from 'src/sheets/item/ConsumableSheet.svelte';\nimport ContainerSheet from 'src/sheets/item/ContainerSheet.svelte';\nimport FeatSheet from 'src/sheets/item/FeatSheet.svelte';\nimport LootSheet from 'src/sheets/item/LootSheet.svelte';\nimport SpellSheet from 'src/sheets/item/SpellSheet.svelte';\nimport SubclassSheet from 'src/sheets/item/SubclassSheet.svelte';\nimport ToolSheet from 'src/sheets/item/ToolSheet.svelte';\nimport WeaponSheet from 'src/sheets/item/WeaponSheet.svelte';\nimport RaceSheet from 'src/sheets/item/RaceSheet.svelte';\nimport type { ComponentType } from 'svelte';\nimport type { RegisteredContent, RegisteredTab } from '../types';\nimport type { ItemSheetContext } from 'src/types/item.types';\nimport { CustomContentManager } from '../content/CustomContentManager';\nimport type { RegisteredEquipmentTypeGroup } from './item.types';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { debug, error } from 'src/utils/logging';\n\nexport class ItemSheetRuntime {\n  private static _content: RegisteredContent<ItemSheetContext>[] = [];\n  private static _customTabs: RegisteredTab<ItemSheetContext>[] = [];\n  private static _customItemEquipmentTypeGroups: RegisteredEquipmentTypeGroup[] =\n    [];\n\n  static async getContent(context: ItemSheetContext): Promise<CustomContent[]> {\n    return await CustomContentManager.prepareContentForRender(\n      context,\n      ItemSheetRuntime._content\n    );\n  }\n\n  static registerContent(\n    registeredContent: RegisteredContent<ItemSheetContext>\n  ) {\n    this._content.push(registeredContent);\n  }\n\n  static registerTab(tab: RegisteredTab<ItemSheetContext>) {\n    ItemSheetRuntime._customTabs.push(tab);\n  }\n\n  static getCustomItemTabs(context: any) {\n    return ItemSheetRuntime._customTabs.filter(\n      (s) => s.enabled === undefined || s.enabled(context)\n    );\n  }\n\n  static sheets: Record<string, ItemSheetInfo> = {\n    [CONSTANTS.ITEM_TYPE_EQUIPMENT]: {\n      Sheet: EquipmentSheet,\n      defaultTabs: () => [\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.equipmentDetails,\n        itemSheetTabs.effects,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_BACKGROUND]: {\n      Sheet: BackgroundSheet,\n      defaultTabs: () => [\n        itemSheetTabs.description,\n        itemSheetTabs.backgroundDetails,\n        itemSheetTabs.advancement,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_CLASS]: {\n      Sheet: ClassSheet,\n      defaultTabs: () => [\n        itemSheetTabs.description,\n        itemSheetTabs.classDetails,\n        itemSheetTabs.advancement,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_CONSUMABLE]: {\n      Sheet: ConsumableSheet,\n      defaultTabs: () => [\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.consumableDetails,\n        itemSheetTabs.effects,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_CONTAINER]: {\n      Sheet: ContainerSheet,\n      defaultTabs: () => [\n        itemSheetTabs.containerContents,\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.containerDetails,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_FEAT]: {\n      Sheet: FeatSheet,\n      defaultTabs: () => [\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.featDetails,\n        itemSheetTabs.effects,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_LOOT]: {\n      Sheet: LootSheet,\n      defaultTabs: () => [\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.lootDetails,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_SPELL]: {\n      Sheet: SpellSheet,\n      defaultTabs: () => [\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.spellDetails,\n        itemSheetTabs.effects,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_SUBCLASS]: {\n      Sheet: SubclassSheet,\n      defaultTabs: () => [\n        itemSheetTabs.description,\n        itemSheetTabs.subclassDetails,\n        itemSheetTabs.advancement,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_TOOL]: {\n      Sheet: ToolSheet,\n      defaultTabs: () => [\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.toolDetails,\n        itemSheetTabs.effects,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_WEAPON]: {\n      Sheet: WeaponSheet,\n      defaultTabs: () => [\n        itemSheetTabs.descriptionWithSidebar,\n        itemSheetTabs.weaponDetails,\n        itemSheetTabs.effects,\n      ],\n    },\n    [CONSTANTS.ITEM_TYPE_RACE]: {\n      Sheet: RaceSheet,\n      defaultTabs: () => [\n        itemSheetTabs.raceDescription,\n        itemSheetTabs.raceDetails,\n        itemSheetTabs.advancement,\n      ],\n    },\n  };\n\n  static registerCustomEquipmentTypeGroup(group: RegisteredEquipmentTypeGroup) {\n    this._customItemEquipmentTypeGroups.push(group);\n  }\n\n  static getCustomEquipmentTypeGroups() {\n    return [...this._customItemEquipmentTypeGroups];\n  }\n\n  static getTabTitle(tabId: string) {\n    try {\n      let tabs = [...this._customTabs, ...Object.values(itemSheetTabs)];\n      let tabTitle = tabs.find((t) => t.id === tabId)?.title;\n      if (typeof tabTitle === 'function') {\n        tabTitle = tabTitle();\n      }\n      return tabTitle ? FoundryAdapter.localize(tabTitle) : tabId;\n    } catch (e) {\n      error('An error occurred while searching for a tab title.', false, e);\n      debug('Tab title error troubleshooting information', { tabId });\n    }\n  }\n}\n\ntype ItemSheetInfo = {\n  Sheet: ComponentType;\n  defaultTabs(): Tab[];\n};\n","import type { EquipmentTypeGroup } from 'src/api/api.types';\nimport { ItemSheetRuntime } from 'src/runtime/item/ItemSheetRuntime';\n\n/**\n * APIs related to the configuration of items.\n */\nexport class ItemConfigApi {\n  /**\n   * Registers a custom group of equipment types, to be rendered on the item sheet as their own section of options within the Equipment Type input.\n   *\n   * @param group the group to add\n   *\n   * @example Registering custom helmets\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.config.item.registerCustomEquipmentTypeGroup({\n   *     label: 'Helmet',\n   *     types: {\n   *       clothhat: 'Clothings Helmet',\n   *       lighthat: 'Light Helmet',\n   *       mediumhat: 'Medium Helmet',\n   *       heavyhat: 'Heavy Helmet',\n   *     },\n   *   });\n   * });\n   * ```\n   */\n  registerCustomEquipmentTypeGroup(group: EquipmentTypeGroup) {\n    ItemSheetRuntime.registerCustomEquipmentTypeGroup(group);\n  }\n}\n","import { ActorItemApi } from './actor-item/ActorItemApi';\nimport { ActorPortraitApi } from './actor-portrait/ActorPortraitApi';\nimport { ActionListApi } from './action-list/ActionListApi';\nimport { SpellSchoolApi } from './spell-school/SpellSchoolApi';\nimport { ItemSummaryApi } from './item-summary/ItemSummaryApi';\nimport { ExhaustionApi } from './exhaustion/ExhaustionApi';\nimport { ActorTraitsApi } from './actor-traits/ActorTraitsApi';\nimport { ItemConfigApi } from './item/ItemConfigApi';\n\n/**\n * Provides extensibility APIs for customizing various aspects of Tidy 5e Sheets.\n *\n * @category Configuration\n */\nexport class ConfigApi {\n  /** {@inheritDoc ActionListApi} */\n  actionList = new ActionListApi();\n\n  /** {@inheritDoc ActorItemApi} */\n  actorItem = new ActorItemApi();\n\n  /** {@inheritDoc ActorPortraitApi} */\n  actorPortrait = new ActorPortraitApi();\n\n  /** {@inheritDoc ActorTraitsApi} */\n  actorTraits = new ActorTraitsApi();\n  \n  /** {@inheritDoc ExhaustionApi} */\n  exhaustion = new ExhaustionApi();\n  \n  /** {@inheritDoc ItemConfigApi} */\n  item = new ItemConfigApi();\n\n  /** {@inheritDoc ItemSummaryApi} */\n  itemSummary = new ItemSummaryApi();\n\n  /**{@inheritDoc SpellSchoolApi} */\n  spellSchool = new SpellSchoolApi();\n}\n","import type {\n  CustomContentInjectParams,\n  OnContentReadyParams,\n  OnRenderParams,\n  RenderScheme,\n} from '../api.types';\nimport { CustomContentBase } from './CustomContentBase';\n\n/** @category Content */\nexport class HtmlContent extends CustomContentBase {\n  injectParams?: CustomContentInjectParams | undefined;\n  /**\n   * The HTML to be injected into the sheet.\n   */\n  html: string | ((data: any) => string) = '';\n  renderScheme: RenderScheme = 'handlebars';\n  activateDefaultSheetListeners?: boolean | undefined = false;\n\n  constructor(props?: Partial<HtmlContent>) {\n    super();\n\n    const merged = foundry.utils.mergeObject(this, props);\n    Object.assign(this, merged);\n  }\n\n  onContentReady?: (params: OnContentReadyParams) => void;\n\n  enabled?: (context: any) => boolean;\n\n  onRender?: (params: OnRenderParams) => void;\n}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { getExhaustionIconsWithSeverity } from 'src/features/exhaustion/exhaustion';\n  import type {\n    SpecificExhaustionConfig,\n    IconWithSeverity,\n  } from 'src/features/exhaustion/exhaustion.types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type {\n    ActorSheetContext,\n    PortraitCharmRadiusClass,\n  } from 'src/types/types';\n  import { createEventDispatcher, getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let cssClass: string = '';\n  export let radiusClass: PortraitCharmRadiusClass;\n  export let level: number;\n  export let onlyShowOnHover: boolean = false;\n  export let exhaustionConfig: SpecificExhaustionConfig;\n  export let isActiveEffectApplied: boolean;\n\n  let iconsWithSeverities: IconWithSeverity[];\n  $: {\n    iconsWithSeverities = getExhaustionIconsWithSeverity(\n      exhaustionConfig.levels,\n    );\n  }\n\n  let selectedLevel: IconWithSeverity;\n  let selectedHintKey: string;\n  $: {\n    selectedLevel = iconsWithSeverities[level] ?? iconsWithSeverities.at(-1);\n    selectedHintKey = exhaustionConfig.hints[level] ?? '';\n  }\n\n  let severityClass: string;\n  $: {\n    severityClass = `severity-${selectedLevel?.severity ?? 0}`;\n  }\n\n  const localize = FoundryAdapter.localize;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const dispatch = createEventDispatcher<{\n    levelSelected: { level: number };\n  }>();\n\n  let exhaustionOptionWidthRems = 1.25;\n  $: exhaustionExpandedWidth = `${\n    exhaustionOptionWidthRems * (exhaustionConfig.levels + 1) + 2.125\n  }rem`;\n</script>\n\n<div\n  class=\"exhaustion-container {severityClass} {cssClass}\"\n  class:only-show-on-hover={onlyShowOnHover}\n  style=\"--t5e-exhaustion-expanded-width: {exhaustionExpandedWidth}\"\n>\n  <div class=\"exhaustion-wrap {radiusClass}\">\n    <div\n      class=\"exhaustion-icon colorized\"\n      title={`${localize('DND5E.Exhaustion')} ${localize(\n        'DND5E.AbbreviationLevel',\n      )} ${level}, ${localize(selectedHintKey)}`}\n    >\n      <i class={selectedLevel.iconCssClass ?? ''} />\n    </div>\n    <ul class=\"exhaustion-levels\">\n      {#each iconsWithSeverities as _, i}\n        <li>\n          <button\n            type=\"button\"\n            class=\"exhaustion-level-option transparent-button\"\n            class:colorized={i <= level}\n            title={localize(exhaustionConfig.hints[i] ?? '')}\n            on:click={() => dispatch('levelSelected', { level: i })}\n            disabled={!$context.editable || isActiveEffectApplied}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            data-tooltip={isActiveEffectApplied\n              ? localize('DND5E.ActiveEffectOverrideWarning')\n              : null}\n          >\n            {i}\n          </button>\n        </li>\n      {/each}\n    </ul>\n  </div>\n  <div class=\"level-display\" class:colorized={level > 0}>\n    {level}\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .exhaustion-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 2.125rem;\n    width: 2.125rem;\n    z-index: 1;\n    color: var(--t5e-icon-font-color);\n\n    .level-display {\n      display: block;\n      width: 1rem;\n      height: 1rem;\n      line-height: 0.875rem;\n      text-align: center;\n      font-size: 0.875rem;\n      position: absolute;\n      background: var(--t5e-icon-background);\n      box-shadow: 0 0 0.5rem var(--t5e-icon-shadow-color) inset;\n      border: 0.0625rem solid var(--t5e-icon-outline-color);\n      top: -0.125rem;\n      left: -0.125rem;\n      border-radius: 50%;\n      font-weight: 700;\n    }\n\n    &:hover .exhaustion-wrap,\n    .exhaustion-wrap:has(button:focus-visible) {\n      width: var(--t5e-exhaustion-expanded-width);\n    }\n\n    .exhaustion-wrap {\n      height: 2.125rem;\n      width: 2.125rem;\n      overflow: hidden;\n      transition: width 0.3s ease;\n      background: var(--t5e-icon-background);\n      display: flex;\n      box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n      border: 0.0625rem solid var(--t5e-icon-outline-color);\n\n      &.rounded {\n        border-radius: 1.25rem;\n      }\n\n      .exhaustion-icon {\n        display: block;\n        flex: 0 0 2rem;\n        width: 2rem;\n        height: 2rem;\n        line-height: 2.125rem;\n        text-align: center;\n        font-size: 1.5rem;\n        position: relative;\n      }\n\n      .exhaustion-levels {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        display: flex;\n        flex: 1;\n\n        li {\n          flex: 0 0 1.25rem;\n          text-align: center;\n          line-height: 2.125rem;\n          display: flex;\n\n          .exhaustion-level-option {\n            border-radius: 0;\n\n            &:is(:hover, :focus-visible) {\n              background: var(--t5e-tertiary-color);\n              color: var(--t5e-primary-font-color);\n            }\n          }\n        }\n      }\n    }\n\n    .exhaustion-levels .exhaustion-level-option:not(.colorized) {\n      background: var(--t5e-light-color);\n    }\n\n    &.severity-0 .colorized {\n      background: transparent;\n    }\n\n    &.severity-1 .colorized {\n      background: var(--t5e-exhaustion-severity1-background);\n      color: var(--t5e-exhaustion-severity1-color);\n    }\n\n    &.severity-2 .colorized {\n      background: var(--t5e-exhaustion-severity2-background);\n      color: var(--t5e-exhaustion-severity2-color);\n    }\n\n    &.severity-3 .colorized {\n      background: var(--t5e-exhaustion-severity3-background);\n      color: var(--t5e-exhaustion-severity3-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    CharacterSheetContext,\n    PortraitCharmRadiusClass,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  export let inspired: boolean;\n  export let cssClass: string = '';\n  export let radiusClass: PortraitCharmRadiusClass;\n  export let onlyShowOnHover: boolean = false;\n  export let animate: boolean = true;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"inspiration inspiration-{inspired ? 1 : 0} {cssClass}\"\n  class:only-show-on-hover={onlyShowOnHover}\n  title={localize('DND5E.Inspiration')}\n>\n  <Checkbox\n    checkboxCssClass=\"inspiration-toggle\"\n    labelCssClass=\"{inspired ? 'inspired' : ''} {radiusClass} {$context.editable\n      ? 'pointer'\n      : ''}\"\n    document={$context.actor}\n    field=\"system.attributes.inspiration\"\n    checked={inspired}\n    disabled={!$context.editable}\n  >\n    <i class=\"inspiration-icon fas fa-dice-d20\" class:animate />\n  </Checkbox>\n</div>\n\n<style lang=\"scss\">\n  .inspiration {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 2.125rem;\n    height: 2.125rem;\n\n    :global(input.inspiration-toggle) {\n      display: none;\n    }\n\n    :global(label) {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.5rem;\n      color: var(--t5e-icon-font-color);\n      box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n      border: 0.0625rem solid var(--t5e-icon-outline-color);\n      background: var(--t5e-icon-background);\n    }\n\n    :global(label i) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n      text-align: center;\n      line-height: 2.125rem;\n    }\n\n    :global(label:hover) {\n      color: var(--t5e-inspiration-hover-color);\n      text-shadow: 0 0 0.3125rem var(--t5e-inspiration-text-shadow-hover-color);\n    }\n  }\n\n  .inspiration-1 {\n    :global(label) {\n      color: var(--t5e-activated-profile-toggle-color);\n      text-shadow: 0 0 0.625rem\n        var(--t5e-inspiration-inspired-text-shadow-color);\n      background: var(--t5e-inspiration-inspired-background);\n    }\n\n    :global(label i.animate) {\n      color: var(--t5e-activated-profile-toggle-color);\n      animation: glow 5s ease-in-out infinite alternate;\n    }\n  }\n\n  @keyframes glow {\n    0% {\n      transform: scale(1);\n    }\n    25% {\n      transform: scale(1.2);\n    }\n    60% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(1.1);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { createEventDispatcher, getContext } from 'svelte';\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import type { Readable } from 'svelte/store';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  export let successes: number;\n  export let failures: number;\n  export let successesField: string;\n  export let failuresField: string;\n  export let hasHpOverlay: boolean;\n\n  const localize = FoundryAdapter.localize;\n\n  const dispatcher = createEventDispatcher<{\n    rollDeathSave: { mouseEvent: MouseEvent };\n  }>();\n</script>\n\n<div class=\"death-saves\" class:rounded={$context.useRoundedPortraitStyle}>\n  <div class=\"death-save-counters\" class:show-backdrop={!hasHpOverlay}>\n    <i class=\"fas fa-check\" />\n    <TextInput\n      document={$context.actor}\n      field={successesField}\n      cssClass=\"death-save-result\"\n      selectOnFocus={true}\n      allowDeltaChanges={true}\n      placeholder=\"0\"\n      value={successes}\n      maxlength={1}\n      title={localize('DND5E.DeathSaveSuccesses')}\n      disabled={!$context.editable}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.DEATH_SAVE_SUCCESSES}\n    />\n    <button\n      type=\"button\"\n      class=\"death-save rollable\"\n      on:click={(event) => dispatcher('rollDeathSave', { mouseEvent: event })}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.DEATH_SAVE_ROLLER}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class=\"fas fa-skull\" />\n    </button>\n    <TextInput\n      document={$context.actor}\n      field={failuresField}\n      cssClass=\"death-save-result\"\n      selectOnFocus={true}\n      allowDeltaChanges={true}\n      placeholder=\"0\"\n      value={failures}\n      maxlength={1}\n      disabled={!$context.editable}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.DEATH_SAVE_FAILURES}\n      title={localize('DND5E.DeathSaveFailures')}\n    />\n    <i class=\"fas fa-times\" />\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .death-saves {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 0.3125rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-shadow: 0 0 0.3125rem 0.0625rem var(--t5e-death-save-text-shadow-color);\n    pointer-events: none;\n\n    .death-save-counters {\n      pointer-events: auto;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      color: var(--t5e-death-save-text-color);\n\n      &.show-backdrop {\n        background: var(--t5e-death-save-backdrop-background);\n        padding: 0 0.5rem;\n        border-radius: 0.3125rem;\n      }\n\n      :global(input[type='text'].death-save-result) {\n        color: var(--t5e-death-save-text-color);\n        font-weight: 700;\n        font-size: 1rem;\n        height: 1.1875rem;\n        padding: 0.3125rem 0.25rem 0.25rem 0.25rem;\n        min-width: unset;\n        text-align: center;\n        width: 1.125rem;\n      }\n\n      :global(input:hover) {\n        border-color: var(--t5e-death-save-text-color);\n      }\n\n      :global(.death-save) {\n        position: relative;\n        margin: 0 0.25rem;\n        color: var(--t5e-death-save-icon-color);\n        font-size: 1.875rem;\n        transition: color 0.3s ease;\n        border: none;\n        padding: 0;\n      }\n\n      :global(.death-save:hover) {\n        background: none;\n        color: var(--t5e-death-save-text-color);\n      }\n    }\n  }\n\n  .rounded {\n    border-radius: 50%;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CharacterSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"rest-container\" class:rounded={$context.useRoundedPortraitStyle}>\n  <div class=\"resting\">\n    <span class=\"resting-icon\" title={localize('TIDY5E.RestHint')}\n      ><i class=\"rest-icon fas fa-bed\" /></span\n    >\n    <button\n      type=\"button\"\n      class=\"rest icon-button\"\n      title={localize('TIDY5E.ShortRest')}\n      on:click={(event) => $context.actor.sheet.onShortRest(event)}\n      disabled={!$context.editable}\n      tabindex={!$settingStore.useDefaultSheetHpTabbing &&\n      $settingStore.useAccessibleKeyboardSupport\n        ? 0\n        : -1}\n    >\n      <i class=\"fas fa-hourglass-half\" />\n    </button>\n    <button\n      type=\"button\"\n      class=\"rest icon-button\"\n      title={localize('TIDY5E.LongRest')}\n      on:click={(event) => $context.actor.sheet.onLongRest(event)}\n      disabled={!$context.editable}\n      tabindex={!$settingStore.useDefaultSheetHpTabbing &&\n      $settingStore.useAccessibleKeyboardSupport\n        ? 0\n        : -1}\n    >\n      <i class=\"fas fa-hourglass-end\" />\n    </button>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .rest-container {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n\n    &.rounded {\n      bottom: -0.4375rem;\n\n      .resting {\n        border-radius: 1.25rem;\n      }\n    }\n\n    .resting {\n      &:is(:hover),\n      &:has(button:focus-visible) {\n        width: 6.875rem;\n      }\n    }\n  }\n\n  .resting {\n    width: 2.125rem;\n    height: 2.125rem;\n    overflow: hidden;\n    border-radius: 0 0.3125rem 0 0.3125rem;\n    transition: width 0.3s ease;\n    background: var(--t5e-icon-background);\n    display: flex;\n    box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n    border: 0.0625rem solid var(--t5e-icon-outline-color);\n    color: var(--t5e-icon-font-color);\n\n    .resting-icon {\n      flex: 0 0 2rem;\n      display: flex;\n      width: 2rem;\n      height: 2rem;\n      margin-right: 0.5rem;\n      justify-content: center;\n      align-items: center;\n      border-radius: 50%;\n      font-size: 1rem;\n    }\n\n    .rest {\n      flex: 0 0 2rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 2rem;\n      height: 2rem;\n      border-radius: 50%;\n      font-size: 1.125rem;\n      line-height: 2rem;\n      font-weight: 700;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CharacterSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: hitDice = $context.system.attributes.hd;\n  $: actorLevel = $context.system.details.level;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"portrait-hd\"\n  class:rounded={$context.useRoundedPortraitStyle}\n  title=\"{localize('DND5E.HitDice')}: {hitDice}/{actorLevel}&#10;{localize(\n    'DND5E.HitDiceConfig',\n  )}\"\n>\n  <button\n    type=\"button\"\n    class=\"current-hd config-button transparent-button\"\n    on:click={$context.editable &&\n      FoundryAdapter.renderActorHitDiceConfig($context.actor)}\n    disabled={!$context.editable}\n    tabindex={!$settingStore.useDefaultSheetHpTabbing &&\n    $settingStore.useAccessibleKeyboardSupport\n      ? 0\n      : -1}\n  >\n    {hitDice}\n  </button>\n</div>\n\n<style lang=\"scss\">\n  .portrait-hd {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    width: 2.125rem;\n    height: 2.125rem;\n    background: var(--t5e-icon-background);\n    box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n    border: 0.0625rem solid var(--t5e-icon-outline-color);\n    border-radius: 0.3125rem 0 0.3125rem 0;\n    color: var(--t5e-icon-font-color);\n\n    &.rounded {\n      bottom: -0.4375rem;\n      border-radius: 50%;\n    }\n\n    .current-hd {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n      font-family: var(--t5e-title-font-family);\n      font-size: 1.25rem;\n      font-weight: 700;\n      border-radius: 50%;\n      color: var(--t5e-icon-font-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { type Actor5e } from 'src/types/types';\n  import { settingStore } from 'src/settings/settings';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { CharacterSheetContext } from 'src/types/types';\n  import HpBar from 'src/components/bar/HpBar.svelte';\n  import ResourceWithBar from 'src/components/bar/ResourceWithBar.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  export let value: number;\n  export let max: number;\n  export let actor: Actor5e;\n  export let incapacitated: boolean;\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"portrait-hp\"\n  class:incapacitated\n  class:widen-for-rounded-portrait={$context.useRoundedPortraitStyle}\n  title={localize('DND5E.HitPoints')}\n>\n  <ResourceWithBar\n    document={actor}\n    {value}\n    valueField=\"system.attributes.hp.value\"\n    valueTitle={localize('DND5E.HitPointsCurrent')}\n    valueDisabled={!$context.editable}\n    {max}\n    maxField=\"system.attributes.hp.max\"\n    maxTitle={localize('DND5E.HitPointsMax')}\n    maxDisabled={!$context.allowMaxHpOverride ||\n      !$context.editable ||\n      $context.lockHpMaxChanges ||\n      $context.lockSensitiveFields}\n    percentage={$context.healthPercentage}\n    Bar={$settingStore.useHpBar ? HpBar : null}\n  />\n</div>\n\n<style lang=\"scss\">\n  .portrait-hp {\n    position: absolute;\n    width: 5.25rem;\n    left: 50%;\n    height: 1.25rem;\n    font-size: 1.125rem;\n    transform: translateX(-50%);\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-family: var(--t5e-title-font-family);\n\n    :global(.resource-value),\n    :global(.resource-max) {\n      font-weight: 700;\n    }\n\n    &.widen-for-rounded-portrait {\n      width: 5.5rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { CharacterSheetContext, NpcSheetContext } from 'src/types/types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext | NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"profile-temp\">\n  <TextInput\n    document={$context.actor}\n    field=\"system.attributes.hp.temp\"\n    cssClass=\"temphp\"\n    placeholder=\"+{localize('DND5E.Temp')}\"\n    value={$context.hp.temp || null}\n    allowDeltaChanges={true}\n    maxlength={5}\n    title={localize('DND5E.HitPointsTemp')}\n    disabled={!$context.editable}\n  />\n  <TextInput\n    document={$context.actor}\n    field=\"system.attributes.hp.tempmax\"\n    cssClass=\"max-temphp\"\n    placeholder=\"+{localize('DND5E.Max')}\"\n    value={$context.hp.tempmax || null}\n    allowDeltaChanges={true}\n    maxlength={5}\n    title={localize('DND5E.HitPointsTempMax')}\n    disabled={!$context.editable}\n  />\n  {#if $context.editable && $context.unlocked}\n    <button\n      type=\"button\"\n      class=\"inline-icon-button\"\n      title={localize('DND5E.HitPointsConfig')}\n      on:click|stopPropagation|preventDefault={() =>\n        FoundryAdapter.renderActorHitPointsDialog($context.actor)}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class=\"fas fa-cog\" />\n    </button>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .profile-temp {\n    display: flex;\n    justify-content: center;\n\n    :global(input) {\n      flex: 0 0 2.1875rem; // Or hard width\n      display: flex;\n      font-size: 0.75rem;\n      line-height: 0.75rem;\n      height: 0.875rem;\n      padding: 0.0625rem 0;\n    }\n\n    :global(input.temphp) {\n      text-align: center;\n    }\n\n    :global(input.max-temphp) {\n      text-align: center;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { type Actor5e } from 'src/types/types';\n  import type { ActorSheetContext, ContextMenuOption } from 'src/types/types';\n  import { isNil } from 'src/utils/data';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import FloatingContextMenu from 'src/components/context-menu/FloatingContextMenu.svelte';\n  import { debug, error } from 'src/utils/logging';\n  import { TidyHooks } from 'src/foundry/TidyHooks';\n\n  export let actor: Actor5e;\n  export let useHpOverlay: boolean;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  function openPortraitPicker(\n    event: MouseEvent & { currentTarget: EventTarget & HTMLElement },\n  ) {\n    if (\n      !TidyHooks.tidy5eSheetsPreOpenActorPortraitFilePicker($context, event)\n    ) {\n      return;\n    }\n    const rect = event.currentTarget.getBoundingClientRect();\n    const current = actor.img;\n    const fp = new FilePicker({\n      type: 'image',\n      current,\n      callback: (path: string) => {\n        actor.update({ img: path });\n      },\n      top: rect.top + 40,\n      left: rect.left + 10,\n    });\n    return fp.browse();\n  }\n\n  function onPortraitClick(\n    event: MouseEvent & { currentTarget: EventTarget & HTMLElement },\n  ) {\n    switch (event.button) {\n      case CONSTANTS.MOUSE_BUTTON_MAIN:\n        openPortraitPicker(event);\n        break;\n    }\n  }\n\n  let portraitContainer: HTMLElement;\n  // TODO: Consider sending context menu options down through document context in the first place.\n  let contextMenuOptions: ContextMenuOption[] = [];\n  $: {\n    try {\n      contextMenuOptions = $context.actorPortraitCommands.map((c) => ({\n        name: c.label ?? '',\n        icon: !isNil(c.iconClass, '') ? `<i class=\"${c.iconClass}\"></i>` : '',\n        callback: () => c.execute?.({ actor, context: $context }),\n      }));\n    } catch (e) {\n      error('An error occurred while getting context menu options', false, e);\n      debug('Context menu option error troubleshooting info', {\n        portraitContainer,\n        commands: $context.actorPortraitCommands,\n      });\n    }\n  }\n</script>\n\n<FloatingContextMenu\n  containingElement={portraitContainer}\n  targetSelector=\"[data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n    .ACTOR_PORTRAIT_CONTAINER}]\"\n  options={contextMenuOptions}\n></FloatingContextMenu>\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<div\n  bind:this={portraitContainer}\n  class=\"portrait\"\n  class:round-portrait={$context.useRoundedPortraitStyle}\n  on:mousedown={onPortraitClick}\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ACTOR_PORTRAIT_CONTAINER}\n>\n  <div\n    class=\"actor-image-wrap\"\n    class:overlay={useHpOverlay}\n    style=\"--overlay-height: calc(100% - {$context.healthPercentage}%)\"\n    data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ACTOR_PORTRAIT_HEALTH_OVERLAY}\n  >\n    <img\n      class=\"actor-image\"\n      src={actor.img}\n      alt={actor.name}\n      title={localize('TIDY5E.EditActorImage') +\n        ' / ' +\n        localize('TIDY5E.ShowActorImage')}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ACTOR_PORTRAIT_IMAGE}\n    />\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .portrait,\n  .actor-image-wrap,\n  .actor-image {\n    width: 100%;\n    height: 100%;\n  }\n\n  .portrait {\n    border-radius: 0.3125rem;\n    overflow: hidden;\n  }\n\n  .actor-image-wrap {\n    position: relative;\n    overflow: hidden;\n  }\n\n  .actor-image-wrap.overlay::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    background: var(--t5e-hp-overlay-background);\n    transition: height 0.5s ease-in-out;\n    mix-blend-mode: multiply;\n    height: var(--overlay-height);\n  }\n\n  .actor-image {\n    background: var(--t5e-icon-background);\n    box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    object-position: top;\n  }\n\n  .portrait,\n  .portrait .actor-image-wrap,\n  .portrait .actor-image {\n    border-radius: 0.3125rem;\n  }\n\n  .portrait.round-portrait,\n  .portrait.round-portrait .actor-image-wrap,\n  .portrait.round-portrait .actor-image {\n    border-radius: 50%;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import ActorPortrait from './ActorPortrait.svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { CONSTANTS } from 'src/constants';\n\n  export let useHpOverlay: boolean;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<div class=\"profile-wrap\">\n  <div class=\"profile\" class:round-portrait={$context.useRoundedPortraitStyle}>\n    <ActorPortrait actor={$context.actor} {useHpOverlay} />\n    <slot />\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .profile-wrap {\n    width: 9.375rem;\n    position: relative;\n\n    :global(.only-show-on-hover) {\n      visibility: hidden;\n    }\n\n    &:hover :global(.only-show-on-hover) {\n      visibility: visible;\n    }\n  }\n\n  .profile {\n    width: 9.375rem;\n    height: 9.375rem;\n\n    &.round-portrait {\n      border-radius: 50%;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { PortraitCharmRadiusClass } from 'src/types/types';\n  import { createEventDispatcher } from 'svelte';\n\n  export let cssClass: string = '';\n  export let radiusClass: PortraitCharmRadiusClass;\n  export let level: number;\n  export let onlyShowOnHover: boolean = false;\n  export let isActiveEffectApplied: boolean = false;\n\n  const localize = FoundryAdapter.localize;\n  const dispatch = createEventDispatcher<{\n    levelSelected: { level: number };\n  }>();\n\n  let fontScales = ['1.25rem', '1.125rem', '1rem'] as const;\n\n  let inputFontSize: string;\n  $: {\n    inputFontSize =\n      !level || level < 100\n        ? fontScales[0]\n        : level < 1000\n          ? fontScales[1]\n          : fontScales[2];\n  }\n</script>\n\n<div\n  class=\"exhaustion-container {cssClass}\"\n  class:only-show-on-hover={onlyShowOnHover}\n  title={localize('TIDY5E.WorldSettings.Exhaustion.Header')}\n  style=\"--t5e-exhaustion-input-font-size: {inputFontSize}\"\n>\n  <div class=\"exhaustion-wrap {radiusClass}\">\n    <input\n      type=\"number\"\n      on:change={() => dispatch('levelSelected', { level: level })}\n      bind:value={level}\n      placeholder=\"0\"\n      on:focus={(ev) => ev.currentTarget.select()}\n      disabled={isActiveEffectApplied}\n      data-tooltip={isActiveEffectApplied\n        ? localize('DND5E.ActiveEffectOverrideWarning')\n        : null}\n    />\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .exhaustion-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 2.125rem;\n    width: 2.125rem;\n    color: var(--t5e-icon-font-color);\n\n    .exhaustion-wrap {\n      height: 2.125rem;\n      width: 2.125rem;\n      overflow: hidden;\n      background: var(--t5e-icon-background);\n      display: flex;\n      align-items: center;\n      box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n      border: 0.0625rem solid var(--t5e-icon-outline-color);\n\n      &.rounded {\n        border-radius: 1.25rem;\n      }\n\n      input {\n        height: 100%;\n        width: 100%;\n        text-align: center;\n        font-size: var(--t5e-exhaustion-input-font-size);\n        border-radius: 1.25rem;\n        color: var(--t5e-tertiary-color);\n        transition: color 0.3s ease;\n        font-family: var(--t5e-title-font-family);\n\n        &:focus {\n          color: var(--t5e-primary-font-color);\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { type CharacterSheetContext } from 'src/types/types';\n  import ExhaustionTracker from '../../actor/ExhaustionTracker.svelte';\n  import Inspiration from './Inspiration.svelte';\n  import DeathSaves from '../../actor/DeathSaves.svelte';\n  import Rest from './Rest.svelte';\n  import HitDice from './HitDice.svelte';\n  import CharacterHitPoints from './CharacterHitPoints.svelte';\n  import TempHp from '../../actor/TempHp.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import ActorProfile from 'src/sheets/actor/ActorProfile.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import ExhaustionInput from 'src/sheets/actor/ExhaustionInput.svelte';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: incapacitated =\n    ($context.actor?.system?.attributes?.hp?.value ?? 0) <= 0 &&\n    $context.actor?.system?.attributes?.hp?.max !== 0;\n\n  async function onLevelSelected(event: CustomEvent<{ level: number }>) {\n    await $context.actor.update({\n      'system.attributes.exhaustion': event.detail.level,\n    });\n  }\n</script>\n\n<ActorProfile useHpOverlay={$settingStore.useHpOverlay}>\n  {#if incapacitated && (!$settingStore.hideDeathSavesFromPlayers || FoundryAdapter.userIsGm())}\n    <DeathSaves\n      successes={$context.system.attributes.death.success}\n      failures={$context.system.attributes.death.failure}\n      successesField=\"system.attributes.death.success\"\n      failuresField=\"system.attributes.death.failure\"\n      on:rollDeathSave={(event) =>\n        $context.actor.rollDeathSave({ event: event.detail.mouseEvent })}\n      hasHpOverlay={$settingStore.useHpOverlay}\n    />\n  {/if}\n\n  {#if $settingStore.useExhaustion && $settingStore.exhaustionConfig.type === 'specific'}\n    <ExhaustionTracker\n      level={$context.system.attributes.exhaustion}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-left'}\n      on:levelSelected={onLevelSelected}\n      onlyShowOnHover={$settingStore.showExhaustionOnHover ||\n        ($settingStore.hideIfZero &&\n          $context.system.attributes.exhaustion === 0)}\n      exhaustionConfig={$settingStore.exhaustionConfig}\n      isActiveEffectApplied={ActiveEffectsHelper.isActiveEffectAppliedToField(\n        $context.actor,\n        'system.attributes.exhaustion',\n      )}\n    />\n  {:else if $settingStore.useExhaustion && $settingStore.exhaustionConfig.type === 'open'}\n    <ExhaustionInput\n      level={$context.system.attributes.exhaustion}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-left'}\n      on:levelSelected={onLevelSelected}\n      onlyShowOnHover={$settingStore.showExhaustionOnHover ||\n        ($settingStore.hideIfZero &&\n          $context.system.attributes.exhaustion === 0)}\n      isActiveEffectApplied={ActiveEffectsHelper.isActiveEffectAppliedToField(\n        $context.actor,\n        'system.attributes.exhaustion',\n      )}\n    />\n  {/if}\n\n  {#if $settingStore.useCharacterInspiration}\n    <Inspiration\n      inspired={$context.actor.system.attributes.inspiration}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-right'}\n      onlyShowOnHover={$settingStore.showInspirationOnHover ||\n        ($settingStore.hideIfZero &&\n          !$context.actor.system.attributes.inspiration)}\n      animate={$settingStore.animateInspiration}\n    />\n  {/if}\n\n  <CharacterHitPoints\n    value={$context.system.attributes.hp.value}\n    max={$context.system.attributes.hp.max}\n    actor={$context.actor}\n    {incapacitated}\n  />\n\n  <Rest />\n\n  <HitDice />\n</ActorProfile>\n<TempHp />\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { settingStore } from 'src/settings/settings';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let warnings: any;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<ol class=\"warnings\">\n  {#each warnings as warning}\n    <li class=\"notification {warning.type}\">\n      {#if warning.link}\n        <button\n          type=\"button\"\n          class=\"inline-transparent-button\"\n          on:click={(ev) => $context.actor.sheet._onWarningLink(ev)}\n          tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          data-target={warning.link}>{warning.message}</button\n        >\n      {:else}\n        {warning.message}\n      {/if}\n    </li>\n  {/each}\n</ol>\n\n<style lang=\"scss\">\n  .warnings {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n\n    .notification {\n      margin: 0;\n      border-radius: 0;\n      box-shadow: none;\n    }\n\n    button {\n      color: inherit;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from '../../foundry/foundry-adapter';\n  import type { Readable } from 'svelte/store';\n  import Dnd5eIcon from 'src/components/icon/Dnd5eIcon.svelte';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n{#if $context.saves.concentration}\n  {@const save = $context.saves.concentration}\n  <span class=\"special-save\">\n    <button\n      type=\"button\"\n      class=\"inline-transparent-button flex-row extra-small-gap align-items-center highlight-on-hover\"\n      on:click={(ev) => $context.actor.rollConcentration({ event: ev })}\n    >\n      <Dnd5eIcon src=\"systems/dnd5e/icons/svg/statuses/concentrating.svg\" />\n      {save.label}:\n      <span class=\"special-save-mod\">{save.sign}{save.mod}</span>\n    </button>\n    {#if $context.unlocked}\n      <button\n        type=\"button\"\n        class=\"inline-icon-button\"\n        on:click={() =>\n          FoundryAdapter.openActorConcentrationConfig($context.actor)}\n        ><i class=\"fas fa-cog\" style=\"font-size: var(--icon-size);\"></i></button\n      >\n    {/if}\n  </span>\n{/if}\n\n<style lang=\"scss\">\n  .special-save {\n    display: flex;\n    flex-direction: row;\n    gap: 0.25rem;\n    align-items: center;\n    font-size: 0.75rem;\n\n    --icon-fill: var(--t5e-icon-hover-color);\n\n    button {\n      font-weight: 700;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n    import { CONSTANTS } from 'src/constants';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let hint: string | null = null;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  async function toggleLock() {\n    await TidyFlags.allowEdit.set($context.actor, !allowEdit);\n  }\n\n  $: allowEdit = TidyFlags.allowEdit.get($context.actor);\n\n  $: descriptionVariable =\n    hint ??\n    ($settingStore.useTotalSheetLock\n      ? localize('TIDY5E.SheetLock.Description')\n      : localize('TIDY5E.SheetEdit.Description'));\n  $: lockHintVariable = $settingStore.useTotalSheetLock\n    ? 'TIDY5E.SheetLock.Unlock.Hint'\n    : 'TIDY5E.SheetEdit.Enable.Hint';\n  $: unlockHintVariable = $settingStore.useTotalSheetLock\n    ? 'TIDY5E.SheetLock.Lock.Hint'\n    : 'TIDY5E.SheetEdit.Disable.Hint';\n  $: unlockTitle = localize(unlockHintVariable, {\n    description: descriptionVariable,\n  });\n  $: lockTitle = localize(lockHintVariable, {\n    description: descriptionVariable,\n  });\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"toggle-allow-edit\">\n  <button\n    type=\"button\"\n    class=\"lock-button\"\n    on:click={() => toggleLock()}\n    class:editing-enabled={allowEdit}\n    tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  >\n    {#if allowEdit}\n      <i class=\"fas fa-lock-open\" title={unlockTitle} />\n    {:else}\n      <i class=\"fas fa-lock\" title={lockTitle} />\n    {/if}\n  </button>\n</div>\n\n<style lang=\"scss\">\n  .toggle-allow-edit {\n    display: flex;\n    flex: 0;\n    flex-basis: 3rem;\n    align-items: center;\n    justify-content: center;\n    white-space: nowrap;\n    background: var(--t5e-tab-background);\n    border: 0.0625rem solid transparent;\n    border-bottom: 0.0625rem solid var(--t5e-tab-strip-border-color);\n    font-size: 0.8125rem;\n    text-align: left;\n    height: 1.625rem;\n\n    .lock-button {\n      background: var(--t5e-sheet-unlocked-icon-background);\n      color: var(--t5e-sheet-lock-icon-color);\n      border-radius: 0.1875rem;\n      width: 1.375rem;\n      border: none;\n      padding: 0;\n      line-height: normal;\n      transition: color 0.3s ease;\n\n      &.editing-enabled {\n        background: var(--t5e-sheet-locked-icon-background);\n      }\n\n      &:hover {\n        color: var(--t5e-sheet-lock-icon-hover-color);\n      }\n\n      i {\n        width: 100%;\n        text-align: center;\n        padding: 0.25rem 0;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section class=\"movement flex-row small-gap {$$restProps.class ?? ''}\">\n  <h4>{localize('DND5E.Speed')}</h4>\n  {#if $context.movement.primary}\n    <span title={$context.movement.primary}>{$context.movement.primary}</span>\n  {/if}\n  {#if $context.movement.special}\n    |\n    <span title={$context.movement.special}>{$context.movement.special}</span>\n  {/if}\n  {#if $context.unlocked}\n    <button\n      type=\"button\"\n      class=\"configure inline-icon-button\"\n      title={localize('DND5E.MovementConfig')}\n      on:click={() => FoundryAdapter.renderActorMovementConfig($context.actor)}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n      ><i class=\"fas fa-cog\" /></button\n    >\n  {/if}\n</section>\n\n<style lang=\"scss\">\n  .movement {\n    display: flex;\n    flex-direction: row;\n    gap: 0.25rem;\n    padding: 0.1875rem 0 0.125rem 0.25rem;\n    font-size: 0.75rem;\n    line-height: 1rem;\n\n    .configure {\n      font-size: 0.75rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { createEventDispatcher, getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let title: string | null = null;\n  export let text: string;\n  export let hideFromTabOrder: boolean = false;\n  export let attributes: Record<string, string> = {};\n\n  const dispatcher = createEventDispatcher<{ roll: MouseEvent }>();\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<button\n  type=\"button\"\n  class:rollable={$context.editable}\n  class=\"transparent-button\"\n  {title}\n  on:click={(ev) => dispatcher('roll', ev)}\n  disabled={!$context.editable}\n  tabindex={!hideFromTabOrder ? 0 : -1}\n  {...attributes}\n>\n  <h4 class=\"block-title\">\n    {text}\n  </h4>\n</button>\n\n<style lang=\"scss\">\n  .block-title {\n    position: relative;\n    font-family: var(--t5e-title-font-family);\n    font-size: 1.25rem;\n    line-height: 1;\n    margin: 0;\n    text-transform: capitalize;\n    text-align: center;\n\n    &::after {\n      display: block;\n      content: '';\n      height: 0;\n      width: 60%;\n      border-bottom: 0.0625rem solid var(--t5e-separator-color);\n      position: absolute;\n      left: 50%;\n      bottom: -0.0625rem;\n      transform: translate(-50%, 0);\n    }\n  }\n</style>\n","<div class=\"block-score\">\n  <slot />\n</div>\n\n<style lang=\"scss\">\n  .block-score > :global(*) {\n    font-size: 1.5rem;\n    margin: 0.125rem 0 0.1875rem 0;\n    padding: 0.125rem 0 0 0;\n    text-align: center;\n    font-family: var(--t5e-title-font-family);\n    font-weight: 700;\n    height: 1.4375rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { formatAsModifier } from 'src/utils/formatting';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import BlockTitle from './RollableBlockTitle.svelte';\n  import BlockScore from './BlockScore.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n\n  export let id: string;\n  export let ability: any;\n  export let useSavingThrowProficiency: boolean;\n  export let useConfigurationOption: boolean;\n\n  $: abbreviation = CONFIG.DND5E.abilities[id]?.abbreviation ?? id;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: activeEffectApplied = ActiveEffectsHelper.isActiveEffectAppliedToField(\n    $context.actor,\n    `system.abilities.${id}.proficient`,\n  );\n</script>\n\n<div\n  class=\"wrapper\"\n  data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ABILITY_SCORE_CONTAINER}\n  data-ability={id}\n>\n  <BlockTitle\n    title={ability.label}\n    text={abbreviation}\n    on:roll={(event) => $context.actor.rollAbility(id, { event: event.detail })}\n    hideFromTabOrder={$settingStore.useDefaultSheetAttributeTabbing ||\n      !$settingStore.useAccessibleKeyboardSupport}\n    attributes={{\n      'data-tidy-sheet-part': CONSTANTS.SHEET_PARTS.ABILITY_ROLLER,\n    }}\n  />\n  <BlockScore>\n    <TextInput\n      document={$context.actor}\n      field=\"system.abilities.{id}.value\"\n      value={ability.value}\n      placeholder=\"10\"\n      selectOnFocus={true}\n      allowDeltaChanges={true}\n      disabled={$context.lockSensitiveFields}\n      attributes={{\n        'data-tidy-sheet-part': CONSTANTS.SHEET_PARTS.ABILITY_SCORE,\n      }}\n    />\n  </BlockScore>\n  <div class=\"ability-modifiers\">\n    <button\n      type=\"button\"\n      class=\"ability-mod transparent-button\"\n      class:rollable={$context.editable}\n      title={localize('DND5E.AbilityModifier')}\n      on:click={(event) => $context.actor.rollAbilityTest(id, { event })}\n      tabindex={!$settingStore.useDefaultSheetAttributeTabbing &&\n      $settingStore.useAccessibleKeyboardSupport\n        ? 0\n        : -1}\n      disabled={!$context.editable}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ABILITY_TEST_ROLLER}\n    >\n      {formatAsModifier(ability.mod)}\n    </button>\n    <button\n      type=\"button\"\n      class=\"ability-save transparent-button\"\n      class:rollable={$context.editable}\n      title={localize('DND5E.ActionSave')}\n      on:click={(event) => $context.actor.rollAbilitySave(id, { event })}\n      tabindex={!$settingStore.useDefaultSheetAttributeTabbing &&\n      $settingStore.useAccessibleKeyboardSupport\n        ? 0\n        : -1}\n      disabled={!$context.editable}\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.ABILITY_SAVE_ROLLER}\n    >\n      {formatAsModifier(ability.save)}\n    </button>\n    {#if useSavingThrowProficiency}\n      {#if $context.unlocked}\n        <button\n          type=\"button\"\n          title={ability.hover}\n          class=\"proficiency-toggle inline-icon-button\"\n          on:click={() =>\n            $context.actor.update({\n              [`system.abilities.${id}.proficient`]:\n                1 - parseInt(ability.proficient),\n            })}\n          tabindex={!$settingStore.useDefaultSheetAttributeTabbing &&\n          $settingStore.useAccessibleKeyboardSupport\n            ? 0\n            : -1}\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n            .ABILITY_SAVE_PROFICIENCY_TOGGLE}\n          disabled={activeEffectApplied}\n          data-tooltip={activeEffectApplied\n            ? localize('DND5E.ActiveEffectOverrideWarning')\n            : null}\n        >\n          {@html ability.icon}\n        </button>\n      {:else}\n        <span\n          title={ability.hover}\n          class=\"proficiency-toggle-readonly\"\n          data-tooltip={activeEffectApplied\n            ? localize('DND5E.ActiveEffectOverrideWarning')\n            : null}>{@html ability.icon}</span\n        >\n      {/if}\n    {/if}\n    {#if useConfigurationOption && $context.editable && $context.unlocked}\n      <button\n        type=\"button\"\n        class=\"config-button inline-icon-button\"\n        title={localize('DND5E.AbilityConfigure')}\n        on:click={() =>\n          FoundryAdapter.renderActorAbilityConfig($context.actor, id)}\n        tabindex={!$settingStore.useDefaultSheetAttributeTabbing &&\n        $settingStore.useAccessibleKeyboardSupport\n          ? 0\n          : -1}\n        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS\n          .ABILITY_CONFIGURATION_CONTROL}\n      >\n        <i class=\"fas fa-cog\" />\n      </button>\n    {/if}\n  </div>\n  <span class=\"mod-label ability-mod-label\">{localize('TIDY5E.AbbrMod')}</span>\n  <span class=\"mod-label save-mod-label\"\n    >{localize('TIDY5E.AbbrSavingThrow')}</span\n  >\n</div>\n\n<style lang=\"scss\">\n  .wrapper {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    width: 3.125rem;\n    margin: 0 auto;\n\n    .ability-modifiers {\n      position: relative;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n      text-align: center;\n      height: auto;\n      margin: 0 auto;\n      padding: 0;\n      opacity: initial;\n      font-size: 0.625rem;\n      box-shadow: 0 0 0 0.0625rem var(--t5e-tertiary-color);\n      border-radius: 0.3125rem;\n\n      &:hover {\n        border-radius: 0;\n        box-shadow: 0 0 0 0.0625rem\n          var(--t5e-ability-modifiers-hover-label-background);\n      }\n\n      &:hover ~ .mod-label {\n        display: block;\n      }\n\n      &:hover .ability-mod,\n      &:hover .ability-save {\n        border-radius: 0;\n      }\n    }\n\n    .ability-mod {\n      background: var(--t5e-ability-accent-background);\n      color: var(--t5e-ability-mod-text-color);\n      border-radius: 0.3125rem 0 0 0.3125rem;\n    }\n\n    .ability-save {\n      border-radius: 0 0.3125rem 0.3125rem 0;\n    }\n\n    .ability-mod,\n    .ability-save {\n      flex: 1;\n      text-align: center;\n      font-size: 0.75rem;\n      opacity: 0.4;\n      transition: opacity 0.3s ease;\n    }\n\n    .ability-mod:hover,\n    .ability-save:hover {\n      background: var(--t5e-primary-accent-color);\n      color: var(--t5e-ability-mod-save-text-hover-color);\n    }\n\n    &:hover .ability-mod,\n    &:hover .ability-save {\n      opacity: 1;\n      text-shadow: none;\n    }\n\n    .mod-label {\n      position: absolute;\n      top: 2.9375rem; // This is far too precise; can we make this more relative to its target?\n      display: none;\n      background: var(--t5e-ability-modifiers-hover-label-background);\n      color: var(--t5e-ability-modifiers-label-text-color);\n      font-size: 0.625rem;\n      height: 1.0625rem; // This is far too precise; can we make this more relative to its target?\n      padding: 0.1875rem 0.25rem 0.125rem 0.25rem; // this padding is providing the positioning of the text. Can we do this in flexbox?\n      white-space: nowrap;\n      z-index: 1;\n\n      &.ability-mod-label {\n        right: 1.5625rem; // This is far too precise; can we make this more relative to its target?\n        transform: translateX(\n          -1.625rem\n        ); // This is far too precise; can we make this more relative to its target?\n        border-radius: 0.3125rem 0 0 0.3125rem;\n      }\n\n      &.save-mod-label {\n        left: 1.5625rem; // This is far too precise; can we make this more relative to its target?\n        transform: translateX(\n          1.625rem\n        ); // This is far too precise; can we make this more relative to its target?\n        border-radius: 0 0.3125rem 0.3125rem 0;\n      }\n    }\n\n    .proficiency-toggle,\n    .proficiency-toggle-readonly {\n      position: absolute;\n      font-size: 0.625rem;\n      left: calc(50% - 0.75rem);\n      bottom: -0.875rem;\n      line-height: 0.625rem;\n    }\n\n    .proficiency-toggle-readonly {\n      left: 0;\n      right: 0;\n    }\n\n    &:hover .proficiency-toggle {\n      opacity: 1;\n    }\n\n    .config-button {\n      position: absolute;\n      bottom: -0.9375rem;\n      right: calc(50% - 0.75rem);\n      font-size: 0.625rem;\n      color: var(--t5e-tertiary-color);\n\n      &:hover {\n        color: var(--t5e-primary-color);\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { formatAsModifier } from 'src/utils/formatting';\n  import BlockTitle from './RollableBlockTitle.svelte';\n  import BlockScore from './BlockScore.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  export let initiative: { total: number; bonus: number };\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"wrapper\">\n  <BlockTitle\n    title={localize('DND5E.Initiative')}\n    text={localize('TIDY5E.AbbrInitiative')}\n    on:roll={(event) =>\n      $context.actor.rollInitiativeDialog({ event: event.detail })}\n  />\n  <BlockScore>\n    <span>{formatAsModifier(initiative.total)}</span>\n  </BlockScore>\n  <label class=\"ini-bonus\" for=\"{$context.appId}-initiative-mod\">\n    <span>{localize('TIDY5E.AbbrMod')}</span>\n    <TextInput\n      document={$context.actor}\n      field=\"system.attributes.init.bonus\"\n      cssClass=\"ini-mod\"\n      placeholder=\"0\"\n      selectOnFocus={true}\n      allowDeltaChanges={true}\n      value={initiative.bonus}\n      disabled={!$context.editable || !$context.unlocked}\n      id=\"{$context.appId}-initiative-mod\"\n    />\n  </label>\n\n  {#if $context.editable && $context.unlocked}\n    <button\n      type=\"button\"\n      class=\"config-button icon-button\"\n      title={localize('DND5E.InitiativeConfig')}\n      on:click={() =>\n        FoundryAdapter.renderActorInitiativeConfig($context.actor)}\n      tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n    >\n      <i class=\"fas fa-cog\" />\n    </button>\n  {:else}\n    <span\n      class=\"config-button invisible\"\n      title={localize('DND5E.InitiativeConfig')}\n      role=\"presentation\"\n    >\n      <i class=\"fas fa-cog\" />\n    </span>\n  {/if}\n</div>\n\n<style lang=\"scss\">\n  .wrapper {\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n\n    :global(.block-score) {\n      margin-top: 0.0625rem;\n      margin-bottom: 0.1875rem;\n    }\n\n    .ini-bonus {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 0.75rem;\n      line-height: 0.875rem;\n\n      :global(.ini-mod) {\n        flex: 0 1 0.0625rem;\n        line-height: 0.875rem;\n        height: 0.875rem;\n        padding: 0.0625rem 0;\n      }\n    }\n\n    .config-button {\n      font-size: 0.625rem;\n      color: var(--t5e-tertiary-color);\n      display: flex;\n      justify-content: center;\n      align-items: flex-end;\n      min-height: 0.75rem;\n    }\n\n    .invisible {\n      visibility: hidden;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  /**\n   * Optional CSS class list string to apply to the AC Shield container element.\n   */\n  export let cssClass: string = '';\n</script>\n\n<div class=\"ac-display {cssClass}\">\n  <div class=\"ac-shield\">\n    <svg\n      version=\"1.1\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 90 100\"\n      xml:space=\"preserve\"\n    >\n      <path\n        d=\"M45,100C-2.6,79.3,0,12.6,0,12.6c0-2.2,1.8-4,4.4-4.6l39.1-7.9C44,0,44.5,0,45,0c0.5,0,1,0,1.4,0.1L85.5,8\n                  c2.6,0.5,4.4,2.4,4.4,4.6C90,12.6,92.6,79.3,45,100L45,100z\"\n      />\n    </svg>\n  </div>\n  <slot />\n</div>\n\n<style lang=\"scss\">\n  .ac-display {\n    position: relative;\n\n    .ac-shield {\n      width: 3.75rem;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 0 auto;\n      svg {\n        path {\n          fill: var(--t5e-light-color);\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import AcShieldBase from './AcShieldBase.svelte';\n  import { getContext, onMount } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  /**\n   * The Armor Class value.\n   */\n  export let ac: string | number = '0';\n\n  /**\n   * Optional CSS class list string to apply to the AC Shield container element.\n   */\n  export let cssClass: string = '';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  let acShieldButton: HTMLElement;\n\n  onMount(() => {\n    $context.actor.sheet._applyAttributionTooltips(acShieldButton);\n  });\n</script>\n\n<AcShieldBase {cssClass}>\n  <button\n    bind:this={acShieldButton}\n    type=\"button\"\n    on:click={() => FoundryAdapter.renderArmorConfig($context.actor)}\n    on:focus\n    class=\"config-button attribute-value transparent-button\"\n    data-attribution=\"attributes.ac\"\n    data-attribution-caption=\"DND5E.ArmorClass\"\n    data-tooltip-direction=\"DOWN\"\n    disabled={!$context.editable}\n    tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  >\n    {ac}\n  </button>\n</AcShieldBase>\n\n<style lang=\"scss\">\n  .attribute-value {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: 2.25rem;\n    font-weight: 700;\n  }\n</style>\n","<script lang=\"ts\">\n  import AttributeBlock from './AttributeBlock.svelte';\n  import InitiativeBlock from './InitiativeBlock.svelte';\n  import AcShield from './AcShield.svelte';\n  import VerticalLineSeparator from 'src/components/layout/VerticalLineSeparator.svelte';\n\n  export let ac: any;\n  export let init: any;\n  export let abilities: any[];\n</script>\n\n<section class=\"actor-stats\">\n  <AcShield ac={ac.value} />\n  <VerticalLineSeparator />\n  <div>\n    <InitiativeBlock initiative={init} />\n  </div>\n  {#each abilities as [id, ability]}\n    <VerticalLineSeparator />\n    <div>\n      <AttributeBlock\n        {id}\n        {ability}\n        useSavingThrowProficiency={true}\n        useConfigurationOption={true}\n      />\n    </div>\n  {/each}\n</section>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import SelectionListbox from '../../components/listbox/SelectionListbox.svelte';\n  import type { Writable } from 'svelte/store';\n  import type { TabSelectionContext } from './TabSelectionFormApplication';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n    import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Writable<TabSelectionContext>>(CONSTANTS.SVELTE_CONTEXT.CONTEXT);\n\n  const apply = getContext<() => Promise<void>>(CONSTANTS.SVELTE_CONTEXT.APPLY);\n  const validate = getContext<() => boolean>(CONSTANTS.SVELTE_CONTEXT.VALIDATE);\n  const useDefault = getContext<() => Promise<void>>(CONSTANTS.SVELTE_CONTEXT.USE_DEFAULT);\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section class=\"tab-selection-container full-height flex-column\">\n  <SelectionListbox\n    labelProp=\"label\"\n    valueProp=\"id\"\n    bind:leftItems={$context.available}\n    bind:rightItems={$context.selected}\n    listboxCssClass=\"scroll-container\"\n    class=\"flex-1\"\n  >\n    <h2 class=\"minimal\" slot=\"left-header\">\n      {localize('TIDY5E.TabSelection.AvailableHeader')}\n    </h2>\n    <h2 class=\"minimal\" slot=\"right-header\">\n      {localize('TIDY5E.TabSelection.SelectedHeader')}\n    </h2>\n  </SelectionListbox>\n  <p class=\"flex-row align-items-center no-gap\">\n    <span class=\"extra-info-icon-container\"\n      ><i class=\"fas fa-info-circle\"></i></span\n    >\n    <span>{localize('TIDY5E.TabSelection.Explanation')}</span>\n  </p>\n  <div class=\"flex-row small-gap\">\n    <button\n      type=\"button\"\n      class=\"use-default-btn\"\n      on:click={(ev) => useDefault()}\n    >\n      <i class=\"fas fa-rotate-right\" />\n      {localize('TIDY5E.UseDefault')}\n    </button>\n    <button\n      type=\"submit\"\n      class=\"save-changes-btn\"\n      on:click={(ev) => validate() || ev.preventDefault()}\n    >\n      <i class=\"fas fa-save\" />\n      {localize('TIDY5E.SaveChanges')}\n    </button>\n    <button\n      type=\"button\"\n      class=\"apply-changes-btn\"\n      on:click={() => validate() && apply()}\n    >\n      <i class=\"fas fa-check\" />\n      {localize('TIDY5E.ApplyChanges')}\n    </button>\n  </div>\n</section>\n\n<style lang=\"scss\">\n  .extra-info-icon-container {\n    width: 3.5rem;\n    text-align: center;\n    i {\n      font-size: 1.5rem;\n      color: var(--t5e-secondary-color);\n    }\n  }\n</style>\n","import type { SvelteComponent } from 'svelte';\nimport SvelteFormApplicationBase from '../SvelteFormApplicationBase';\nimport TabSelection from './TabSelection.svelte';\nimport type { Actor5e } from 'src/types/types';\nimport { get, writable } from 'svelte/store';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { error } from 'src/utils/logging';\nimport type { RegisteredTab } from 'src/runtime/types';\nimport { CONSTANTS } from 'src/constants';\nimport { SettingsProvider } from 'src/settings/settings';\nimport { NpcSheetRuntime } from 'src/runtime/NpcSheetRuntime';\nimport { CharacterSheetRuntime } from 'src/runtime/CharacterSheetRuntime';\nimport { VehicleSheetRuntime } from 'src/runtime/VehicleSheetRuntime';\nimport { TabManager } from 'src/runtime/tab/TabManager';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\n\nexport type TabSelectionItem = {\n  id: string;\n  label: string;\n};\n\nexport type TabSelectionContext = {\n  available: TabSelectionItem[];\n  selected: TabSelectionItem[];\n};\n\nexport default class TabSelectionFormApplication extends SvelteFormApplicationBase {\n  actor: Actor5e;\n  context = writable<TabSelectionContext>({ available: [], selected: [] });\n  registeredTabs: RegisteredTab<any>[];\n\n  constructor(actor: Actor5e, ...args: any[]) {\n    super(...args);\n    this.actor = actor;\n    this.registeredTabs = this.getRegisteredTabs(actor);\n  }\n\n  getRegisteredTabs(actor: Actor5e): RegisteredTab<any>[] {\n    if (actor.type === CONSTANTS.SHEET_TYPE_CHARACTER) {\n      return CharacterSheetRuntime.getAllRegisteredTabs();\n    } else if (actor.type === CONSTANTS.SHEET_TYPE_NPC) {\n      return NpcSheetRuntime.getAllRegisteredTabs();\n    } else if (actor.type === CONSTANTS.SHEET_TYPE_VEHICLE) {\n      return VehicleSheetRuntime.getAllRegisteredTabs();\n    }\n\n    error(\n      FoundryAdapter.localize(\n        'TIDY5E.TabSelection.UnsupportedDocumentErrorMessage',\n        { documentType: this.actor.type }\n      )\n    );\n    return [];\n  }\n\n  getDefaultTabIds(actor: Actor5e): string[] {\n    if (actor.type === CONSTANTS.SHEET_TYPE_CHARACTER) {\n      return SettingsProvider.settings.defaultCharacterSheetTabs.get();\n    } else if (actor.type === CONSTANTS.SHEET_TYPE_NPC) {\n      return SettingsProvider.settings.defaultNpcSheetTabs.get();\n    } else if (actor.type === CONSTANTS.SHEET_TYPE_VEHICLE) {\n      return SettingsProvider.settings.defaultVehicleSheetTabs.get();\n    }\n\n    error(\n      FoundryAdapter.localize(\n        'TIDY5E.TabSelection.UnsupportedDocumentErrorMessage',\n        { documentType: this.actor.type }\n      )\n    );\n    return [];\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    return new TabSelection({\n      target: node,\n      context: new Map<any, any>([\n        ['context', this.context],\n        ['appId', this.appId],\n        ['apply', this.apply.bind(this)],\n        ['useDefault', this.useDefault.bind(this)],\n        ['validate', this.validate.bind(this)],\n      ]),\n    });\n  }\n\n  static get defaultOptions() {\n    return {\n      ...super.defaultOptions,\n      height: 550,\n      width: 750,\n      classes: [...super.defaultOptions.classes, 'tab-selection'],\n      resizable: false,\n    };\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.TabSelection.Title', {\n      documentName: this.actor.name,\n    });\n  }\n\n  getData() {\n    const selectedTabIds =\n      TidyFlags.selectedTabs.get(this.actor) ??\n      this.getDefaultTabIds(this.actor);\n\n    let availableTabs: TabSelectionItem[] = this.registeredTabs\n      .filter((t) => !selectedTabIds.includes(t.id))\n      .map((t) => ({\n        id: t.id,\n        label: FoundryAdapter.localize(TabManager.getTabTitle(t)),\n      }));\n\n    let selectedTabs: TabSelectionItem[] = this.registeredTabs\n      .filter((t) => selectedTabIds.includes(t.id))\n      .map((t) => ({\n        id: t.id,\n        label: FoundryAdapter.localize(TabManager.getTabTitle(t)),\n      }))\n      .sort(\n        (a, b) => selectedTabIds.indexOf(a.id) - selectedTabIds.indexOf(b.id)\n      );\n\n    return {\n      available: availableTabs,\n      selected: selectedTabs,\n    } satisfies TabSelectionContext;\n  }\n\n  async useDefault() {\n    await TidyFlags.selectedTabs.unset(this.actor);\n    this.close();\n  }\n\n  validate() {\n    const context = get(this.context);\n    if (context.selected.length === 0) {\n      error(\n        FoundryAdapter.localize(\n          'TIDY5E.TabSelection.AtLeastOneRequiredErrorMessage'\n        ),\n        true\n      );\n      return false;\n    }\n\n    return true;\n  }\n\n  async save() {\n    const context = get(this.context);\n\n    await TidyFlags.selectedTabs.set(\n      this.actor,\n      context.selected.map((t) => t.id)\n    );\n  }\n\n  async _updateObject(): Promise<void> {\n    await this.save();\n  }\n\n  refreshContext() {\n    this.context.set(this.getData());\n  }\n\n  async apply() {\n    await this.save();\n  }\n}\n","import { UserSettingsFormApplication } from './settings/user-settings/UserSettingsFormApplication';\nimport { ThemeSettingsFormApplication } from './theme/ThemeSettingsFormApplication';\nimport { CONSTANTS } from 'src/constants';\n\nexport class ApplicationsManager {\n  private static _themeSettings: ThemeSettingsFormApplication;\n  private static _userSettings: UserSettingsFormApplication;\n\n  /**\n   * Opens the Theme Settings window as a singleton.\n   * @returns the form application for theme settings.\n   */\n  static openThemeSettings(): ThemeSettingsFormApplication {\n    ApplicationsManager._themeSettings ??= new ThemeSettingsFormApplication();\n    const rendered = ApplicationsManager._themeSettings.render(true);\n    setTimeout(() => ApplicationsManager._themeSettings.bringToTop(), 150);\n    return rendered;\n  }\n\n  /**\n   * Opens the Sheet Settings window as a singleton.\n   * @param initialTab the initial tab to show\n   * @returns the form application for sheet settings\n   */\n  static openUserSettings(initialTab?: string): UserSettingsFormApplication {\n    ApplicationsManager._userSettings ??= new UserSettingsFormApplication(\n      CONSTANTS.TAB_USER_SETTINGS_PLAYERS\n    );\n\n    if (initialTab) {\n      ApplicationsManager._userSettings.initialTabId = initialTab;\n    }\n\n    const rendered = ApplicationsManager._userSettings.render(true);\n    setTimeout(() => ApplicationsManager._userSettings.bringToTop(), 150);\n    return rendered;\n  }\n}\n","<script lang=\"ts\">\n  import ButtonMenu from 'src/components/button-menu/ButtonMenu.svelte';\n  import ButtonMenuCommand from 'src/components/button-menu/ButtonMenuCommand.svelte';\n  import ButtonMenuDivider from 'src/components/button-menu/ButtonMenuDivider.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import ThemeSelectorButtonMenuCommand from '../shared/ThemeSelectorButtonMenuCommand.svelte';\n  import TabSelectionFormApplication from 'src/applications/tab-selection/TabSelectionFormApplication';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { ApplicationsManager } from 'src/applications/ApplicationsManager';\n  import { CONSTANTS } from 'src/constants';\n  export let defaultSettingsTab: string | undefined = undefined;\n\n  const localize = FoundryAdapter.localize;\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<ButtonMenu\n  position=\"bottom\"\n  anchor=\"right\"\n  ariaLabel={localize('TIDY5E.SheetMenu.label')}\n  title={localize('TIDY5E.SheetMenu.label')}\n  iconClass=\"fas fa-ellipsis-vertical\"\n>\n  <ThemeSelectorButtonMenuCommand />\n  <ButtonMenuDivider />\n  <ButtonMenuCommand\n    on:click={() => ApplicationsManager.openUserSettings(defaultSettingsTab)}\n    iconClass=\"fas fa-cog\"\n  >\n    {localize('TIDY5E.UserSettings.Menu.label')}\n  </ButtonMenuCommand>\n  <ButtonMenuCommand\n    on:click={() => ApplicationsManager.openThemeSettings()}\n    iconClass=\"fas fa-palette\"\n  >\n    {localize('TIDY5E.ThemeSettings.SheetMenu.buttonLabel')}\n  </ButtonMenuCommand>\n  {#if $context.owner}\n    <ButtonMenuCommand\n      on:click={() =>\n        new TabSelectionFormApplication($context.actor).render(true)}\n      iconClass=\"fas fa-file-invoice\"\n      disabled={!$context.editable}\n    >\n      {localize('TIDY5E.TabSelection.MenuOptionText')}\n    </ButtonMenuCommand>\n  {/if}\n</ButtonMenu>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import { type ActorSheetContext } from 'src/types/types';\n  import { coalesce } from 'src/utils/formatting';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: text = coalesce($context.labels.type, localize('DND5E.CreatureType'));\n\n  $: configFn =\n    $context.actor.type === 'character'\n      ? FoundryAdapter.openCharacterActorTypeConfig\n      : FoundryAdapter.openActorTypeConfig;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if $context.editable && ($context.actor.type === 'npc' || $context.system.details?.race?.id)}\n  <button\n    type=\"button\"\n    class=\"configure-creature-type inline-transparent-button highlight-on-hover truncate\"\n    on:click={() => configFn($context.actor)}\n    title={localize('DND5E.CreatureType')}\n    tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  >\n    {text}\n  </button>\n{:else}\n  <span\n    class=\"creature-type-label truncate\"\n    title={localize('DND5E.CreatureType')}>{text}</span\n  >\n{/if}\n\n<style lang=\"scss\">\n  .creature-type-label,\n  .configure-creature-type {\n    flex: 1;\n    line-height: inherit;\n    height: inherit;\n  }\n</style>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import type { ActorOriginSummaryContext } from './ActorOriginSummaryConfigFormApplication';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Readable } from 'svelte/store';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<ActorOriginSummaryContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n  let appId = getContext<string>(CONSTANTS.SVELTE_CONTEXT.APP_ID);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section class=\"flex-column\">\n  {#if $context.isCharacter}\n    {#if $context.canEditRace}\n      <div class=\"form-field\">\n        <label for=\"race-edit-{appId}\">{localize('DND5E.Race')}</label>\n\n        <input\n          id=\"race-edit-{appId}\"\n          type=\"text\"\n          placeholder={localize('DND5E.Race')}\n          bind:value={$context.race}\n        />\n      </div>\n    {/if}\n    <div class=\"form-field\">\n      <label for=\"background-edit-{appId}\">{localize('DND5E.Background')}</label\n      >\n      {#if $context.canEditBackground}\n        <input\n          id=\"background-edit-{appId}\"\n          type=\"text\"\n          placeholder={localize('DND5E.Background')}\n          bind:value={$context.background}\n        />\n      {:else}\n        <span>{$context.background}</span>\n      {/if}\n    </div>\n    <div class=\"form-field\">\n      <label for=\"pc-alignment-edit-{appId}\"\n        >{localize('DND5E.Alignment')}</label\n      >\n      <input\n        id=\"alignment-edit-{appId}\"\n        type=\"text\"\n        placeholder={localize('DND5E.Alignment')}\n        bind:value={$context.alignment}\n      />\n    </div>\n  {:else if $context.isNpc}\n    <div class=\"environment form-field\">\n      <label for=\"environment-edit-{appId}\"\n        >{localize('TIDY5E.Environment')}</label\n      >\n      <input\n        id=\"environment-edit-{appId}\"\n        type=\"text\"\n        placeholder={localize('TIDY5E.Environment')}\n        bind:value={$context.environment}\n      />\n    </div>\n    <div class=\"form-field\">\n      <label for=\"alignment-edit-{appId}\">{localize('DND5E.Alignment')}</label>\n      <input\n        id=\"alignment-edit-{appId}\"\n        type=\"text\"\n        placeholder={localize('DND5E.Alignment')}\n        bind:value={$context.alignment}\n      />\n    </div>\n  {:else if $context.isVehicle}\n    <div class=\"form-field\">\n      <label for=\"dimensions-edit-{appId}\">{localize('DND5E.Dimensions')}</label\n      >\n      <textarea\n        id=\"dimensions-edit-{appId}\"\n        rows=\"4\"\n        cols=\"50\"\n        name=\"dimensions\"\n        placeholder={localize('DND5E.Dimensions')}\n        bind:value={$context.dimensions}\n      />\n    </div>\n  {/if}\n\n  <button type=\"submit\">\n    <i class=\"far fa-save\" />\n    {localize('Save')}\n  </button>\n</section>\n","import type { SvelteComponent } from 'svelte';\nimport ActorOriginSummaryConfig from './ActorOriginSummaryConfig.svelte';\nimport { get, writable, type Writable } from 'svelte/store';\nimport type { Actor5e } from 'src/types/types';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { CONSTANTS } from 'src/constants';\nimport { error } from 'src/utils/logging';\nimport SvelteFormApplicationBase from '../SvelteFormApplicationBase';\n\nexport type ActorOriginSummaryContext = {\n  isCharacter: boolean;\n  race: string;\n  canEditRace: boolean;\n  canEditBackground: boolean;\n  background: boolean;\n  alignment: string;\n  isNpc: boolean;\n  environment: string;\n  isVehicle: boolean;\n  dimensions: string;\n};\n\nexport default class ActorOriginSummaryConfigFormApplication extends SvelteFormApplicationBase {\n  context: Writable<ActorOriginSummaryContext | null> = writable(null);\n  actor: Actor5e;\n  actorHook: number | undefined;\n\n  constructor(actor: Actor5e, ...args: any[]) {\n    super(...args);\n    this.actor = actor;\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    this.context.set(this.getData());\n\n    return new ActorOriginSummaryConfig({\n      target: node,\n      context: new Map<any, any>([\n        ['appId', this.appId],\n        ['context', this.context],\n      ]),\n    });\n  }\n\n  activateListeners(html: any): void {\n    this.refreshContextOnActorChanges();\n    super.activateListeners(html);\n  }\n\n  refreshContextOnActorChanges() {\n    if (this.actorHook !== undefined) {\n      return;\n    }\n\n    this.actorHook = Hooks.on('updateActor', (actor: Actor5e) => {\n      if (actor.id === this.actor.id) {\n        this.refreshContext();\n      }\n    });\n  }\n\n  getData() {\n    return {\n      race:\n        this.actor.system.details.race?.name ?? this.actor.system.details.race,\n      background:\n        this.actor.system.details.background?.name ??\n        this.actor.system.details.background,\n      environment: this.actor.system.details.environment,\n      alignment: this.actor.system.details.alignment,\n      dimensions: this.actor.system.traits.dimensions,\n\n      isCharacter: this.actor.type === CONSTANTS.SHEET_TYPE_CHARACTER,\n      canEditBackground: !this.actor.system.details.background?.name,\n      canEditRace: !this.actor.system.details.race?.name,\n      isNpc: this.actor.type === CONSTANTS.SHEET_TYPE_NPC,\n      isVehicle: this.actor.type === CONSTANTS.SHEET_TYPE_VEHICLE,\n    } satisfies ActorOriginSummaryContext;\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      width: 380,\n      height: 'auto',\n      sheetConfig: false,\n      resizable: false,\n    });\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.OriginSummaryConfig', {\n      actorName: this.actor.name,\n    });\n  }\n\n  refreshContext() {\n    this.context.set(this.getData());\n  }\n\n  close(options?: unknown) {\n    Hooks.off('updateActor', this.actorHook);\n    this.actorHook = undefined;\n    super.close(options);\n  }\n\n  async save() {\n    const context = get(this.context);\n    if (!context) {\n      error('Unable to save data due to an error.', true);\n      console.error(\n        'Unable to save Actor Origin Summary Config because the context is unexpectedly null.',\n        this.actor,\n        context\n      );\n      return;\n    }\n\n    if (context.isCharacter) {\n      const update: Record<string, any> = {\n        'system.details.alignment': context.alignment,\n      };\n      if (context.canEditBackground) {\n        update['system.details.background'] = context.background;\n      }\n      if (context.canEditRace) {\n        update['system.details.race'] = context.race;\n      }\n      await this.actor.update(update);\n    } else if (context.isNpc) {\n      await this.actor.update({\n        'system.details.environment': context.environment,\n        'system.details.alignment': context.alignment,\n      });\n    } else if (context.isVehicle) {\n      await this.actor.update({\n        'system.traits.dimensions': context.dimensions,\n      });\n    }\n    this.close();\n  }\n\n  async _updateObject(): Promise<void> {\n    await this.save();\n  }\n}\n","<script lang=\"ts\">\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { ActorSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ActorSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<TextInput\n  document={$context.actor}\n  editable={$context.editable && !$context.lockSensitiveFields}\n  spellcheck={false}\n  placeholder={localize('DND5E.Name')}\n  value={$context.actor.name}\n  field=\"name\"\n/>\n","<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import { FoundryAdapter } from '../../foundry/foundry-adapter';\n  import type {\n    CharacterSheetContext,\n    Tab,\n    DropdownListOption,\n  } from 'src/types/types';\n  import CharacterProfile from './parts/CharacterProfile.svelte';\n  import InlineTextDropdownList from '../../components/inputs/InlineTextDropdownList.svelte';\n  import ActorWarnings from '../actor/ActorWarnings.svelte';\n  import SpecialSaves from '../actor/SpecialSaves.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import AllowEditLock from 'src/sheets/actor/AllowEditLock.svelte';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import type { Readable } from 'svelte/store';\n  import ContentEditableFormField from 'src/components/inputs/ContentEditableFormField.svelte';\n  import ActorMovement from '../actor/ActorMovement.svelte';\n  import ActorHeaderStats from '../actor/ActorHeaderStats.svelte';\n  import HorizontalLineSeparator from 'src/components/layout/HorizontalLineSeparator.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import ItemInfoCard from 'src/components/item-info-card/ItemInfoCard.svelte';\n  import SheetMenu from '../actor/SheetMenu.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import InlineCreatureType from '../shared/InlineCreatureType.svelte';\n  import ActorOriginSummaryConfigFormApplication from 'src/applications/actor-origin-summary/ActorOriginSummaryConfigFormApplication';\n  import ActorName from '../actor/ActorName.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n\n  let selectedTabId: string;\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n\n  $: playerName = TidyFlags.playerName.get($context.actor) ?? '';\n\n  $: classAndSubclassSummaries = Array.from(\n    FoundryAdapter.getClassAndSubclassSummaries($context.actor).values(),\n  );\n\n  $: characterSummaryEntries =\n    FoundryAdapter.getActorCharacterSummaryEntries($context);\n\n  $: abilities = Object.entries<any>($context.abilities);\n\n  $: sizes = <DropdownListOption[]>Object.entries(\n    $context.config.actorSizes,\n  ).map(([abbreviation, size]: [string, any]) => ({\n    value: abbreviation,\n    text: size.label,\n  }));\n\n  $: currentSize = <DropdownListOption>{\n    value: $context.system.traits.size,\n    text: $context.config.actorSizes[$context.system.traits.size]?.label,\n  };\n</script>\n\n<ItemInfoCard />\n\n{#if $context.viewableWarnings.length}\n  <ActorWarnings warnings={$context.viewableWarnings} />\n{/if}\n<header class=\"tidy5e-sheet-header flex-row\">\n  <div class=\"flex-0\">\n    <CharacterProfile />\n  </div>\n\n  <div class=\"flex-grow-1\">\n    <div\n      class=\"flex-row justify-content-space-between align-items-center small-gap\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n    >\n      <div\n        class=\"actor-name\"\n        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n      >\n        <ActorName />\n      </div>\n\n      <div class=\"flex-row extra-small-gap align-items-stretch\">\n        {#if !$context.disableExperience}\n          <!-- XP / XP To Next Level -->\n          <div class=\"xp-tracker\">\n            <div class=\"experience flex-row no-gap\">\n              <TextInput\n                document={$context.actor}\n                field=\"system.details.xp.value\"\n                cssClass=\"current-xp\"\n                value={$context.system.details.xp.value}\n                placeholder=\"0\"\n                selectOnFocus={true}\n                allowDeltaChanges={true}\n                maxlength={7}\n                disabled={!$context.editable || $context.lockExpChanges}\n              />\n              <span class=\"sep\">/</span>\n              {#if $context.editable && FoundryAdapter.userIsGm()}\n                <TextInput\n                  document={$context.actor}\n                  field=\"system.details.xp.max\"\n                  cssClass=\"max-xp max\"\n                  value={$context.system.details.xp.max}\n                  placeholder=\"0\"\n                  selectOnFocus={true}\n                  allowDeltaChanges={true}\n                  maxlength={7}\n                  disabled={!$context.editable}\n                />\n              {:else}\n                <span class=\"max\">{$context.system.details.xp.max}</span>\n              {/if}\n            </div>\n            <div class=\"xp-bar\">\n              <div class=\"xp-bar-total\">\n                <span\n                  class=\"xp-bar-current\"\n                  style=\"width: {$context.system.details.xp.pct}%\"\n                />\n              </div>\n            </div>\n          </div>\n        {/if}\n        <h2 class=\"level\">\n          {localize('DND5E.AbbreviationLevel')}\n          {$context.system.details.level}\n        </h2>\n        <SheetMenu defaultSettingsTab={CONSTANTS.TAB_USER_SETTINGS_PLAYERS} />\n      </div>\n    </div>\n\n    <section class=\"class-list\">\n      <!-- Player Name -->\n      {#if $settingStore.showPlayerName}\n        <ContentEditableFormField\n          element=\"span\"\n          document={$context.actor}\n          field={TidyFlags.playerName.prop}\n          value={playerName}\n          cssClass=\"player-name\"\n          placeholder={localize('TIDY5E.PlayerName')}\n          dataMaxLength={40}\n          editable={$context.editable && !$context.lockSensitiveFields}\n        />\n        <!-- <span>&#8226;</span> -->\n      {/if}\n\n      <!-- Class / Subclass -->\n      {#if $context.owner && $settingStore.showClassList}\n        <span class=\"flex-row extra-small-gap\">\n          {#each classAndSubclassSummaries as summary, i}\n            {#if i > 0}\n              <span class=\"flex-no-grow\">/</span>\n            {/if}\n            <span class=\"flex-no-grow\">\n              <span title=\"{summary.class} {summary.level ?? '0'}\"\n                >{summary.class}\n                {summary.level ?? '0'}\n              </span>\n              {#if summary.subclass}\n                <span title={summary.subclass} class=\"flex-no-grow\"\n                  >{summary.subclass}</span\n                >\n              {/if}\n            </span>\n          {/each}\n        </span>\n      {/if}\n    </section>\n\n    <!-- Origin Summary: Size , Race , Background , Alignment , Proficiency , Origin Summary Configuration Cog -->\n    <section class=\"origin-summary\">\n      <span class=\"origin-points\">\n        {#if $context.editable}\n          <InlineTextDropdownList\n            options={sizes}\n            selected={currentSize}\n            on:optionClicked={(event) =>\n              $context.actor.update({\n                'system.traits.size': event.detail.value,\n              })}\n            title={localize('DND5E.Size')}\n          />\n        {:else}\n          <span title={localize('DND5E.Size')}>{currentSize.text}</span>\n        {/if}\n        <span>&#8226;</span>\n        <InlineCreatureType />\n        {#each characterSummaryEntries as entry}\n          <span>&#8226;</span>\n          <span title={entry} class=\"truncate\">{entry}</span>\n        {/each}\n      </span>\n      <span class=\"flex-row align-items-center extra-small-gap\">\n        <b>\n          {localize('DND5E.Proficiency')}: {$context.labels.proficiency}\n        </b>\n        {#if $context.unlocked}\n          <button\n            type=\"button\"\n            class=\"inline-icon-button\"\n            title={localize('TIDY5E.OriginSummaryConfig')}\n            on:click={() =>\n              new ActorOriginSummaryConfigFormApplication(\n                $context.actor,\n              ).render(true)}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          >\n            <i class=\"fas fa-cog\" />\n          </button>\n        {/if}\n      </span>\n    </section>\n    <div\n      role=\"presentation\"\n      class=\"flex-row extra-small-gap justify-content-space-between\"\n    >\n      <ActorMovement />\n      {#if $context.hasSpecialSaves}\n        <SpecialSaves />\n      {/if}\n    </div>\n    <HorizontalLineSeparator borderColor=\"light\" />\n    <!-- AC  -->\n    <ActorHeaderStats\n      {abilities}\n      ac={$context.system.attributes.ac}\n      init={$context.system.attributes.init}\n    />\n  </div>\n</header>\n\n<Tabs tabs={$context.tabs} bind:selectedTabId>\n  <svelte:fragment slot=\"tab-end\">\n    {#if $context.editable}\n      <AllowEditLock\n        hint={$settingStore.permanentlyUnlockCharacterSheetForGm &&\n        FoundryAdapter.userIsGm()\n          ? localize(\n              'TIDY5E.Settings.PermanentlyUnlockCharacterSheetForGM.title',\n            )\n          : null}\n      />\n    {/if}\n  </svelte:fragment>\n</Tabs>\n\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n\n<style lang=\"scss\">\n  .tidy5e-sheet-header {\n    display: flex;\n    justify-content: center;\n    padding: 0.625rem 1rem 1rem 1rem;\n    background: var(--t5e-header-background);\n\n    :global(.current-xp) {\n      height: 1rem;\n      width: calc(10.5ch + 0.3rem);\n      text-align: right;\n      padding: 0 0.25rem;\n    }\n\n    :global(.max-xp) {\n      height: 1rem;\n      width: calc(10.5ch + 0.3rem);\n      text-align: left;\n      padding: 0 0.25rem;\n    }\n\n    .xp-tracker {\n      max-width: 7.75rem;\n    }\n\n    .xp-bar-total {\n      width: 100%;\n      height: 0.3125rem;\n      border: 0.0625rem solid var(--t5e-tertiary-color);\n      border-radius: 0.125rem;\n      background: var(--t5e-light-color);\n      position: relative;\n    }\n\n    .xp-bar-current {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 100%;\n      max-width: 100%;\n      background: var(--t5e-xp-bar-background);\n      transition: width 0.3s ease;\n    }\n\n    .level {\n      padding: 0.25rem 0.375rem;\n      border-radius: 0.1875rem;\n      background: var(--t5e-faint-color);\n      color: var(--t5e-secondary-color);\n      font-size: 1.25rem;\n      line-height: 1;\n      height: 1.5rem;\n      white-space: nowrap;\n    }\n\n    .class-list {\n      font-size: 0.75rem;\n      margin: 0;\n      padding: 0.1875rem 0 0 0;\n      color: var(--t5e-secondary-color);\n      margin-left: 0.25rem;\n      line-height: 1;\n      display: flex;\n      align-items: center;\n      gap: 0.25rem;\n      flex-wrap: wrap;\n\n      :global(.player-name) {\n        display: inline-block;\n        font-weight: 600;\n        margin-left: -0.25rem;\n        margin-right: 0.25rem;\n        min-width: 3.125rem;\n        padding: 0 0.25rem;\n        white-space: nowrap;\n        color: var(--t5e-primary-font-color);\n      }\n    }\n\n    .origin-summary {\n      margin-left: 0.25rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 0.25rem;\n      border-bottom: 0.0625rem solid var(--t5e-separator-color);\n      border-top: 0.0625rem solid var(--t5e-separator-color);\n      font-size: 0.75rem;\n      line-height: 1rem;\n      padding: 0.1875rem 0 0.125rem 0;\n      margin-top: 0.125rem;\n\n      .origin-points {\n        flex: 1;\n        display: grid;\n        grid-template-columns:\n          min-content /* Size */\n          min-content /* Bullet */\n          minmax(auto, min-content) /* Creature Type */\n          min-content /* Bullet */\n          minmax(auto, min-content) /* Species */\n          min-content /* Bullet */\n          minmax(auto, min-content) /* Background */\n          min-content /* Bullet */\n          minmax(auto, min-content) /* Alignment */;\n        gap: 0.25rem;\n        align-items: center;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  export let rounded: boolean;\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<header>\n  <div class=\"profile\">\n    <div class=\"portrait\" class:rounded>\n      <img src={$context.actor.img} alt={$context.actor.name} data-edit=\"img\" />\n    </div>\n  </div>\n  <h1>{$context.actor.name}</h1>\n</header>\n\n<style lang=\"scss\">\n  header {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    gap: 0.625rem;\n    padding: 0.625rem 1rem;\n    background: var(--t5e-header-background);\n\n    .profile {\n      width: 9.375rem;\n      height: 9.375rem;\n      flex: 0 0 auto;\n\n      .portrait {\n        width: 100%;\n        height: 100%;\n        border-radius: 0.3125rem;\n        overflow: hidden;\n        border: 0.0625rem solid var(--t5e-icon-outline-color);\n\n        &.rounded {\n          border-radius: 50%;\n        }\n\n        img {\n          background: var(--t5e-icon-background);\n        }\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import RerenderAfterFormSubmission from 'src/components/utility/RerenderAfterFormSubmission.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import SheetEditor from '../../components/editor/SheetEditor.svelte';\n  import LimitedHeader from '../actor/LimitedHeader.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"limited-character\">\n  <LimitedHeader rounded={$context.useRoundedPortraitStyle} />\n  <section class=\"tidy-sheet-body\">\n    <div class=\"note-entries\">\n      <RerenderAfterFormSubmission\n        andOnValueChange={$context.system.details.biography.value}\n      >\n        <article class=\"appearance-notes\" use:$context.activateEditors>\n          <div class=\"section-titles biopage\">\n            {localize('DND5E.Appearance')}\n          </div>\n          <SheetEditor\n            content={$context.system.details.appearance}\n            target=\"system.details.appearance\"\n            editable={$context.editable}\n          />\n        </article>\n        <article class=\"biography-notes\" use:$context.activateEditors>\n          <div class=\"section-titles\">\n            {localize('DND5E.Background')}/{localize('DND5E.Biography')}\n          </div>\n          <SheetEditor\n            content={$context.biographyHTML}\n            target=\"system.details.biography.value\"\n            editable={$context.editable}\n          />\n        </article>\n      </RerenderAfterFormSubmission>\n    </div>\n  </section>\n</div>\n\n<style lang=\"scss\">\n  .limited-character {\n    height: 100%;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .tidy-sheet-body {\n    flex: 1;\n    margin-right: 1rem;\n\n    .note-entries {\n      height: 100%;\n      display: flex;\n      flex-direction: row;\n      gap: 0.5rem;\n\n      > * {\n        flex: 1;\n        min-width: 0;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { CharacterSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import CharacterSheetFull from './CharacterSheetFull.svelte';\n  import CharacterSheetLimited from './CharacterSheetLimited.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<CharacterSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n{#if $context.showLimitedSheet}\n  <CharacterSheetLimited />\n{:else}\n  <CharacterSheetFull />\n{/if}\n","import {\n  actorUsesActionFeature,\n  isItemInActionList,\n} from 'src/features/actions/actions';\nimport { CONSTANTS } from 'src/constants';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { SettingsProvider } from 'src/settings/settings';\nimport type { Item5e } from 'src/types/item.types';\nimport { warn } from 'src/utils/logging';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport { TidyHooks } from 'src/foundry/TidyHooks';\n\nexport function initTidy5eContextMenu(\n  sheet: any,\n  html: any,\n  contextMenuSelector: string = '[data-context-menu]'\n) {\n  FoundryAdapter.createContextMenu(html, contextMenuSelector, [], {\n    onOpen: onItemContext.bind(sheet),\n  });\n}\n\n/**\n * Handle activation of a context menu for an embedded Item or ActiveEffect document.\n * Dynamically populate the array of context menu options.\n * @param {HTMLElement} element       The HTML element for which the context menu is activated\n * @protected\n */\nfunction onItemContext(element: HTMLElement) {\n  const contextMenuType = element.getAttribute('data-context-menu');\n  // TODO: rewrite context menu so that it's better integrated with the rest of Tidy 5e Sheets.\n  // @ts-ignore\n  const app: any = this as any;\n\n  // Active Effects\n  if (contextMenuType === CONSTANTS.CONTEXT_MENU_TYPE_EFFECTS) {\n    const effectId = element.getAttribute('data-effect-id') ?? '';\n    const parentId = element.getAttribute('data-parent-id') ?? '';\n\n    const effect = FoundryAdapter.getEffect({\n      document: app.document,\n      effectId: effectId,\n      parentId: parentId,\n    });\n\n    if (!effect) {\n      return;\n    }\n\n    // TODO: Leverage the API to aggregate any registered context menu options; pass in the context of the current item for reference.\n    ui.context.menuItems = getActiveEffectContextOptions(effect, app);\n    TidyHooks.dnd5eGetActiveEffectContextOptions(effect, ui.context.menuItems);\n  }\n  // Items\n  else if (contextMenuType === CONSTANTS.CONTEXT_MENU_TYPE_ITEMS) {\n    const uuid = element.getAttribute('data-context-menu-document-uuid');\n    const item = fromUuidSync(uuid);\n    if (!item) return;\n\n    // TODO: Leverage the API to aggregate any registered context menu options; pass in the context of the current item for reference.\n    ui.context.menuItems = getItemContextOptions(item);\n    TidyHooks.dnd5eGetItemContextOptions(item, ui.context.menuItems);\n  } else {\n    warn(\n      `Unable to show context menu. The menu type ${contextMenuType} is not supported. Put a [data-context-menu] attribute on the target entity and implement the handler where this warning appears.`\n    );\n  }\n}\n\nfunction getActiveEffectContextOptions(effect: any, app: any) {\n  const effectParent = effect.parent;\n\n  // Assumption: Either the effect belongs to the character or is transferred from an item.\n  const actor = effectParent.actor ?? effectParent;\n\n  if (\n    !effectParent?.isOwner ||\n    !SettingsProvider.settings.useContextMenu.get()\n  ) {\n    return [];\n  }\n\n  if (\n    actor.type === CONSTANTS.SHEET_TYPE_CHARACTER &&\n    !FoundryAdapter.allowCharacterEffectsManagement(actor)\n  ) {\n    return [];\n  }\n\n  const isConcentrationEffect = FoundryAdapter.isConcentrationEffect(\n    effect,\n    app\n  );\n\n  const isFav = FoundryAdapter.isEffectFavorited(effect, actor);\n  const favoriteIcon = 'fa-bookmark';\n\n  let tidy5eKgarContextOptions = [\n    {\n      name: 'DND5E.ContextMenuActionEdit',\n      icon: \"<i class='fas fas fa-pencil-alt fa-fw'></i>\",\n      callback: () => effect.sheet.render(true),\n    },\n    {\n      name: 'DND5E.ContextMenuActionDuplicate',\n      icon: \"<i class='fas fa-copy fa-fw'></i>\",\n      callback: () =>\n        effect.clone(\n          {\n            name: FoundryAdapter.localize('DOCUMENT.CopyOf', {\n              name: effect.name,\n            }),\n          },\n          { save: true }\n        ),\n      condition: () => canEditEffect(effect),\n    },\n    {\n      name: 'DND5E.ContextMenuActionDelete',\n      icon: `<i class=\"fas fa-trash fa-fw t5e-warning-color\"></i>`,\n      callback: () => effect.deleteDialog(),\n      condition: () => canEditEffect(effect) && !isConcentrationEffect,\n    },\n    {\n      name: effect.disabled\n        ? 'DND5E.ContextMenuActionEnable'\n        : 'DND5E.ContextMenuActionDisable',\n      icon: effect.disabled\n        ? \"<i class='fas fa-check fa-fw'></i>\"\n        : \"<i class='fas fa-times fa-fw'></i>\",\n      callback: () => effect.update({ disabled: !effect.disabled }),\n      condition: () => effect.isOwner && !isConcentrationEffect,\n      group: 'state',\n    },\n    {\n      name: 'DND5E.ConcentrationBreak',\n      icon: '<dnd5e-icon src=\"systems/dnd5e/icons/svg/break-concentration.svg\"></dnd5e-icon>',\n      condition: () => isConcentrationEffect,\n      callback: () => app.document.endConcentration(effect),\n      group: 'state',\n    },\n    {\n      name: isFav ? 'TIDY5E.RemoveFavorite' : 'TIDY5E.AddFavorite',\n      icon: isFav\n        ? `<i class='fas ${favoriteIcon} fa-fw' style='color: var(--t5e-warning-accent-color)'></i>`\n        : `<i class='fas ${favoriteIcon} fa-fw inactive'></i>`,\n      condition: () => 'favorites' in actor.system,\n      callback: () => {\n        if (!effect) {\n          warn(`tidy5e-context-menu | Effect Not Found.`);\n          return;\n        }\n        FoundryAdapter.toggleFavoriteEffect(effect);\n      },\n      group: 'state',\n    },\n  ];\n\n  return tidy5eKgarContextOptions;\n}\n\nfunction canEditEffect(effect: any) {\n  const actor = effect.actor ? effect.actor : effect.parent;\n  return FoundryAdapter.isActorSheetUnlocked(actor);\n}\n\n/**\n * Prepare an array of context menu options which are available for owned Item documents.\n * @param {Item5e} item                   The Item for which the context menu is activated\n * @returns {ContextMenuEntry[]}          An array of context menu options offered for the Item\n * @protected\n */\nfunction getItemContextOptions(item: Item5e) {\n  if (!item?.isOwner || !SettingsProvider.settings.useContextMenu.get()) {\n    return [];\n  }\n\n  const itemParent = item.actor ? item.actor : item.parent;\n  const itemParentIsActor =\n    itemParent?.documentName === CONSTANTS.DOCUMENT_NAME_ACTOR;\n  const isUnlocked =\n    !itemParentIsActor || FoundryAdapter.isActorSheetUnlocked(itemParent);\n  let options = [];\n\n  let toggleTitle = '';\n  let canToggle = false;\n  let isActive = false;\n  let canPrepare = false;\n\n  if (item.type === 'spell') {\n    const prep = item.system.preparation || {};\n    const isAlways = prep.mode === CONSTANTS.SPELL_PREPARATION_MODE_ALWAYS;\n    const isPrepared = !!prep.prepared;\n    isActive = isPrepared;\n    if (isAlways) toggleTitle = CONFIG.DND5E.spellPreparationModes.always.label;\n    else if (isPrepared)\n      toggleTitle = CONFIG.DND5E.spellPreparationModes.prepared.label;\n    else toggleTitle = FoundryAdapter.localize('DND5E.SpellUnprepared');\n\n    canPrepare = item.system.level >= 1;\n  } else {\n    isActive = !!item.system.equipped;\n    toggleTitle = FoundryAdapter.localize(\n      isActive ? 'DND5E.Equipped' : 'DND5E.Unequipped'\n    );\n    canToggle = 'equipped' in item.system;\n\n    canPrepare = item.system.level >= 1;\n  }\n\n  // Toggle Attunement State\n  if (!!item.system.attunement && !FoundryAdapter.concealDetails(item)) {\n    options.push({\n      name: item.system.attuned\n        ? 'TIDY5E.ContextMenuActionUnattune'\n        : 'TIDY5E.ContextMenuActionAttune',\n      icon: item.system.attuned\n        ? \"<i class='fas fa-sun fa-fw' style='color: var(--t5e-warning-accent-color);'></i>\"\n        : \"<i class='fas fa-sun fa-fw'></i>\",\n      callback: () =>\n        item.update({\n          'system.attuned': !item.system.attuned,\n        }),\n    });\n  }\n\n  // Toggle Charged State\n  if (item.system.recharge?.value) {\n    options.push({\n      name: item.system.recharge.charged\n        ? 'DND5E.ContextMenuActionExpendCharge'\n        : 'DND5E.ContextMenuActionCharge',\n      icon: '<i class=\"fa-solid fa-bolt\"></i>',\n      callback: () =>\n        item.update({\n          'system.recharge.charged': !item.system.recharge?.charged,\n        }),\n      condition: () => item.isOwner,\n      group: 'state',\n    });\n  }\n\n  // Toggle Equipped State\n  if ('equipped' in item.system) {\n    const isEquipped = item.system.equipped;\n    options.push({\n      name: isEquipped\n        ? 'TIDY5E.ContextMenuActionUnequip'\n        : 'TIDY5E.ContextMenuActionEquip',\n      icon: isEquipped\n        ? \"<i class='fas fa-user-alt fa-fw' style='color: var(--t5e-warning-accent-color);'></i> \"\n        : \"<i class='fas fa-user-alt fa-fw'></i> \",\n      callback: () => item.update({ 'system.equipped': !isEquipped }),\n    });\n  }\n\n  // Toggle Prepared State\n  if ('preparation' in item.system) {\n    if (FoundryAdapter.canPrepareSpell(item)) {\n      const isPrepared = item.system?.preparation?.prepared === true;\n      options.push({\n        name: isActive\n          ? 'TIDY5E.ContextMenuActionUnprepare'\n          : 'TIDY5E.ContextMenuActionPrepare',\n        icon: isActive\n          ? \"<i class='fas fa-book fa-fw'></i>\"\n          : \"<i class='fas fa-book fa-fw'></i>\",\n        callback: () =>\n          item.update({ 'system.preparation.prepared': !isPrepared }),\n      });\n    }\n  }\n\n  if (item.system.identified === false && FoundryAdapter.canIdentify(item)) {\n    options.push({\n      name: 'DND5E.Identify',\n      icon: \"<i class='fas fa-magnifying-glass fa-fw'></i>\",\n      callback: () => item.update({ 'system.identified': true }),\n    });\n  }\n\n  const isCharacter =\n    itemParentIsActor && itemParent.type === CONSTANTS.SHEET_TYPE_CHARACTER;\n  if (isCharacter) {\n    // Add favorites to context menu\n    let isFav = FoundryAdapter.isItemFavorited(item);\n\n    const favoriteIcon = 'fa-bookmark';\n\n    options.push({\n      name: isFav ? 'TIDY5E.RemoveFavorite' : 'TIDY5E.AddFavorite',\n      icon: isFav\n        ? `<i class='fas ${favoriteIcon} fa-fw' style='color: var(--t5e-warning-accent-color)'></i>`\n        : `<i class='fas ${favoriteIcon} fa-fw inactive'></i>`,\n      callback: () => {\n        if (!item) {\n          warn(`tidy5e-context-menu | Item Not Found`);\n          return;\n        }\n        FoundryAdapter.toggleFavoriteItem(item);\n      },\n    });\n  }\n\n  if (item.type === 'spell') {\n    options.push({\n      name: 'TIDY5E.ContextMenuActionEdit',\n      icon: \"<i class='fas fa-pencil-alt fa-fw'></i>\",\n      callback: () => item.sheet.render(true),\n    });\n    if (isUnlocked) {\n      options.push({\n        name: 'DND5E.ContextMenuActionDuplicate',\n        icon: \"<i class='fas fa-copy fa-fw'></i>\",\n        condition: () =>\n          !['race', 'background', 'class', 'subclass'].includes(item.type),\n        callback: () =>\n          item.clone(\n            {\n              name: FoundryAdapter.localize('DOCUMENT.CopyOf', {\n                name: item.name,\n              }),\n            },\n            { save: true }\n          ),\n      });\n      options.push({\n        name: 'TIDY5E.ContextMenuActionDelete',\n        icon: \"<i class='fas fa-trash fa-fw' style='color: var(--t5e-warning-accent-color);'></i>\",\n        callback: () => FoundryAdapter.onActorItemDelete(itemParent, item),\n      });\n    }\n  } else {\n    options.push({\n      name: 'DND5E.ContextMenuActionEdit',\n      icon: \"<i class='fas fa-pencil-alt fa-fw'></i>\",\n      callback: () => item.sheet.render(true),\n    });\n\n    if (isUnlocked) {\n      options.push({\n        name: 'DND5E.ContextMenuActionDuplicate',\n        icon: \"<i class='fas fa-copy fa-fw'></i>\",\n        condition: () =>\n          !['race', 'background', 'class', 'subclass'].includes(item.type),\n        callback: () =>\n          item.clone(\n            {\n              name: FoundryAdapter.localize('DOCUMENT.CopyOf', {\n                name: item.name,\n              }),\n            },\n            { save: true }\n          ),\n      });\n      options.push({\n        name: 'DND5E.ContextMenuActionDelete',\n        icon: \"<i class='fas fa-trash fa-fw' style='color: var(--t5e-warning-accent-color);'></i>\",\n        callback: () => {\n          return itemParent\n            ? FoundryAdapter.onActorItemDelete(itemParent, item)\n            : item.deleteDialog();\n        },\n      });\n    }\n  }\n\n  if (itemParentIsActor && actorUsesActionFeature(itemParent)) {\n    const active = isItemInActionList(item);\n    options.push({\n      name: active\n        ? 'TIDY5E.Actions.SetOverrideFalse'\n        : 'TIDY5E.Actions.SetOverrideTrue',\n      icon: active\n        ? '<i class=\"fas fa-fist-raised\" style=\"color: var(--t5e-warning-accent-color)\"></i>'\n        : '<i class=\"fas fa-fist-raised\"></i>',\n      callback: () => {\n        TidyFlags.actionFilterOverride.set(item, !isItemInActionList(item));\n      },\n    });\n\n    const overridden = TidyFlags.actionFilterOverride.get(item) !== undefined;\n    if (overridden) {\n      options.push({\n        name: 'TIDY5E.Actions.ResetActionDefault',\n        icon: '<i class=\"fas fa-fist-raised\" style=\"color: var(--t5e-warning-accent-color)\"></i>',\n        callback: () => {\n          TidyFlags.actionFilterOverride.unset(item);\n        },\n      });\n    }\n  }\n  return options;\n}\n","import { getThemes } from 'src/theme/theme-reference';\nimport { debug } from './logging';\n\nexport function applyTitleToWindow(title: string, element: HTMLElement) {\n  if (!element) {\n    return;\n  }\n\n  let windowTitle: HTMLElement | ChildNode | null =\n    element.querySelector('.window-title');\n\n  if (windowTitle?.hasChildNodes()) {\n    windowTitle = windowTitle.childNodes[0];\n  }\n\n  if (!windowTitle) {\n    return;\n  }\n\n  if (windowTitle.textContent !== title) {\n    windowTitle.textContent = title;\n  }\n}\n\nexport function applyThemeDataAttributeToWindow(\n  themeId: string,\n  element?: HTMLElement\n) {\n  if (!element) {\n    return;\n  }\n  const themes = getThemes();\n  const theme = themes[themeId];\n  if (theme) {\n    debug(`Applying theme type ${theme.type} to window`);\n    element.setAttribute('data-tidy-theme-type', theme.type);\n  }\n}\n\nexport function applySheetAttributesToWindow(\n  documentName: string,\n  type: string,\n  themeId: string,\n  element?: HTMLElement\n) {\n  element?.setAttribute('data-sheet-module', 'tidy5e-sheet');\n  element?.setAttribute('data-document-name', documentName);\n  element?.setAttribute('data-document-type', type);\n  applyThemeDataAttributeToWindow(themeId, element);\n}\n\nexport async function maintainCustomContentInputFocus(\n  app: any,\n  asyncRender: () => Promise<unknown>\n) {\n  let focus = app.element.find(':focus');\n  focus = focus.length ? focus[0] : null;\n\n  await asyncRender();\n\n  if (focus && focus.name) {\n    const input = app.form?.[focus.name];\n    if (input && input.focus instanceof Function) input.focus();\n  }\n}\n\nexport function blurUntabbableButtonsOnClick(element: any /* jQuery */) {\n  element\n    .off('click.tidy-keyboard-accessibility', '[tabindex=\"-1\"]')\n    .on('click.tidy-keyboard-accessibility', '[tabindex=\"-1\"]', (ev: any) => {\n      ev.currentTarget?.blur();\n    });\n}\n","export const delay = (ms: number): Promise<void> => {\n  return new Promise<void>((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, ms);\n  });\n};\n","import type { RenderScheme } from 'src/api/api.types';\nimport { CONSTANTS } from 'src/constants';\n\nexport function wrapCustomHtmlForRendering(\n  html: string,\n  renderScheme: RenderScheme,\n  id: string,\n  activateDefaultSheetListeners?: boolean\n) {\n  const renderingAttribute =\n    renderScheme === 'handlebars'\n      ? ` ${CONSTANTS.HTML_DYNAMIC_RENDERING_ATTRIBUTE}`\n      : '';\n  const coreListenersTag = activateDefaultSheetListeners\n    ? ` class=\"${CONSTANTS.CLASS_TIDY_USE_CORE_LISTENERS}\"`\n    : '';\n  const groupId = getCustomContentGroupIdAttributeAndValue(id);\n  return `<div style=\"display: contents;\"${renderingAttribute}${coreListenersTag} ${groupId}>${html}</div>`;\n}\n\nfunction getCustomContentGroupIdAttributeAndValue(id: string) {\n  return `data-tidy-custom-content-group-id=\"${id}\"`;\n}\n\nexport function getCustomContentGroupIdSelector(id: string) {\n  return `[${getCustomContentGroupIdAttributeAndValue(id)}]`;\n}\n","import { CONSTANTS } from 'src/constants';\nimport type { CustomContent, Tab } from 'src/types/types';\nimport { delay } from 'src/utils/asynchrony';\nimport {\n  getCustomContentGroupIdSelector,\n  wrapCustomHtmlForRendering,\n} from 'src/utils/content';\nimport { isNil } from 'src/utils/data';\nimport { debug, error, warn } from 'src/utils/logging';\n\ntype CustomContentRenderParams = {\n  app: any;\n  element: any; // jQuery\n  data: any;\n  tabs: Tab[];\n  isFullRender: boolean;\n  superActivateListeners: any;\n  customContent: CustomContent[];\n};\n\nexport class CustomContentRenderer {\n  static async render(params: CustomContentRenderParams) {\n    const {\n      app,\n      tabs,\n      element,\n      data,\n      isFullRender,\n      superActivateListeners,\n      customContent,\n    } = params;\n\n    if (!element?.get(0)) {\n      debug('Element not available when it normally should be', params);\n      return;\n    }\n\n    element\n      .get(0)\n      .querySelectorAll(CONSTANTS.HTML_DYNAMIC_RENDERING_ATTRIBUTE_SELECTOR)\n      .forEach((el: HTMLElement) => el.remove());\n\n    const sheetEl = element.get(0);\n    await CustomContentRenderer._renderTabs(\n      tabs,\n      sheetEl,\n      isFullRender,\n      app,\n      data,\n      params\n    );\n\n    for (let c of customContent) {\n      try {\n        CustomContentRenderer._renderContent(\n          sheetEl,\n          c,\n          app,\n          data,\n          isFullRender,\n          superActivateListeners\n        );\n      } catch (e) {\n        error('Unable to render custom content', false, e);\n        debug('Custom content render failure context', {\n          content: c,\n          app,\n          data,\n          isFullRender,\n        });\n      }\n    }\n  }\n\n  private static _renderTabs(\n    tabs: Tab[],\n    sheetEl: HTMLElement,\n    isFullRender: boolean,\n    app: any,\n    data: any,\n    args: CustomContentRenderParams\n  ): Promise<unknown> {\n    const promises = tabs.map(async (tab) => {\n      try {\n        let tabEl = sheetEl.querySelector<HTMLElement>(\n          `[data-tab-contents-for=\"${tab.id}\"]`\n        );\n\n        if (!tabEl) {\n          // This content was added during a non-forced render (e.g., tab selection changes); wait a tick and re-attempt to set its HTML\n          await delay(0);\n          tabEl = sheetEl.querySelector<HTMLElement>(\n            `[data-tab-contents-for=\"${tab.id}\"]`\n          );\n        }\n\n        if (!tabEl) {\n          debug('Unable to find custom tab content container for render');\n          return;\n        }\n\n        if (\n          tab.content.type === 'html' &&\n          (isFullRender || tab.content.renderScheme === 'handlebars')\n        ) {\n          tabEl.innerHTML = tab.content.html;\n        }\n\n        if (tab.onRender) {\n          tab.onRender({\n            app: app,\n            data: data,\n            element: sheetEl,\n            tabContentsElement: tabEl,\n            isFullRender: isFullRender,\n          });\n        }\n      } catch (e) {\n        error('Failed to render custom content due to an error', false, e);\n        debug('Custom content error debug details', {\n          error: e,\n          erroredTab: tab,\n          args: args,\n        });\n      }\n    });\n    return Promise.all(promises);\n  }\n\n  private static _renderContent(\n    sheetEl: any,\n    customContent: CustomContent,\n    app: any,\n    data: any,\n    isFullRender: boolean,\n    superActivateListeners: any\n  ) {\n    const groupId = foundry.utils.randomID();\n\n    let contentHtml = '';\n    try {\n      contentHtml =\n        typeof customContent.content.html === 'function'\n          ? customContent.content.html(data)\n          : customContent.content.html;\n    } catch (e) {\n      error('Failed to render custom HTML', false, { e, customContent });\n    }\n\n    const wrappedContent = wrapCustomHtmlForRendering(\n      contentHtml,\n      customContent.content.renderScheme,\n      groupId,\n      customContent.activateDefaultSheetListeners\n    );\n\n    if (customContent.onContentReady) {\n      customContent.onContentReady({\n        app: app,\n        data: data,\n        element: sheetEl,\n        isFullRender: isFullRender,\n        content: wrappedContent,\n      });\n    }\n\n    if (!isNil(customContent.position)) {\n      const targetElements = Array.from(\n        sheetEl.querySelectorAll(customContent.selector)\n      ) as HTMLElement[];\n\n      if (!targetElements.length) {\n        debug('No target elements were found for injecting custom content', {\n          content: customContent,\n        });\n      }\n\n      targetElements.forEach((el: HTMLElement) => {\n        el.insertAdjacentHTML(\n          customContent.position as InsertPosition,\n          wrappedContent\n        );\n      });\n\n      if (customContent.activateDefaultSheetListeners) {\n        const groupSelector = getCustomContentGroupIdSelector(groupId);\n        sheetEl\n          .querySelectorAll(groupSelector)\n          .forEach((el: HTMLElement) => superActivateListeners(el));\n      }\n    }\n\n    if (customContent.onRender) {\n      customContent.onRender({\n        app: app,\n        data: data,\n        element: sheetEl,\n        isFullRender: isFullRender,\n      });\n    }\n  }\n\n  static wireCompatibilityEventListeners(\n    html: any,\n    superActivateListeners: any,\n    sheet: any\n  ) {\n    html\n      .find('input[name], textarea[name], select[name]')\n      .off('change.compatiblity-event-listeners')\n      .on('change.compatiblity-event-listeners', function () {\n        //@ts-expect-error\n        if (!this.closest(CONSTANTS.CLASS_SELECTOR_TIDY_USE_CORE_LISTENERS)) {\n          sheet.submit();\n        }\n      });\n\n    html\n      .find(CONSTANTS.CLASS_SELECTOR_TIDY_USE_CORE_LISTENERS)\n      .each((_: number, el: HTMLElement) => {\n        superActivateListeners.call(sheet, $(el));\n      });\n  }\n}\n","import { debug, error } from './logging';\n\nexport type UserDocumentSessionStorageKeyParams = {\n  userId: string;\n  documentId: string;\n  feature: string;\n};\n\nexport class SessionStorageManager {\n  private static _createKey(keyParams: UserDocumentSessionStorageKeyParams) {\n    return `user-${keyParams.userId}|document-${keyParams.documentId}|${keyParams.feature}`;\n  }\n\n  static storeMap<Key, Value>(\n    keyParams: UserDocumentSessionStorageKeyParams,\n    map: Map<Key, Value>\n  ) {\n    try {\n      const serializedMap = JSON.stringify(Array.from(map.entries()));\n      sessionStorage.setItem(\n        SessionStorageManager._createKey(keyParams),\n        serializedMap\n      );\n    } catch (e) {\n      error(\n        'An error occurred while storing cached data in session storage',\n        false,\n        e\n      );\n      debug('Troubleshooting information', { keyParams, map });\n    }\n  }\n\n  static getMap<Key, Value>(\n    keyParams: UserDocumentSessionStorageKeyParams\n  ): Map<Key, Value> | undefined {\n    try {\n      const data = sessionStorage.getItem(\n        SessionStorageManager._createKey(keyParams)\n      );\n      return data ? new Map(JSON.parse(data)) : undefined;\n    } catch (e) {\n      error(\n        'An error occurred while fetching cached data in session storage',\n        false,\n        e\n      );\n      debug('Troubleshooting information', { keyParams });\n    }\n  }\n}\n","import { debug } from 'src/utils/logging';\nimport {\n  SessionStorageManager,\n  type UserDocumentSessionStorageKeyParams,\n} from 'src/utils/session-storage';\n\ntype ItemTableToggleCacheServiceConstructorParams = {\n  userId: string;\n  documentId: string;\n};\n\nexport type OnItemTableToggleFn =\n  ItemTableToggleCacheService['onItemTableToggle'];\n\nexport class ItemTableToggleCacheService {\n  private _keyParams: UserDocumentSessionStorageKeyParams;\n\n  itemTableToggles: Map<string, boolean>;\n\n  constructor(params: ItemTableToggleCacheServiceConstructorParams) {\n    this._keyParams = {\n      ...params,\n      feature: 'item-table-toggles',\n    };\n    this.itemTableToggles = this.itemTableToggles =\n      SessionStorageManager.getMap(this._keyParams) ??\n      new Map<string, boolean>();\n  }\n\n  onItemTableToggle(location: string, expanded: boolean): void {\n    debug('Toggled Item Table', { location, expanded });\n    this.itemTableToggles.set(location, expanded);\n    SessionStorageManager.storeMap(this._keyParams, this.itemTableToggles);\n  }\n}\n","/**\n * A utility for guaranteeing mutually exclusive execution of asynchronous code.\n * This is useful for cases when async code is being called\n * by synchronous code which doesn't account for the asynchrony.\n */\nexport class AsyncMutex {\n  private _mutex: Promise<void>;\n\n  constructor() {\n    this._mutex = Promise.resolve();\n  }\n\n  /**\n   * Perform an action with guaranteed mutual exclusion.\n   * @param action the action to take\n   * @returns a promise representing the entirety of the operation\n   */\n  lock(action: () => Promise<any>) {\n    let currentMutex = this._mutex;\n    // take a place in line\n    this._mutex = new Promise(async (resolve) => {\n      try {\n        // await release of the existing lock\n        await currentMutex;\n        // execute mutually exclusive action\n        await action();\n      } finally {\n        // release the lock, allowing others to pass through\n        resolve();\n      }\n    });\n    // allow this whole process to be awaited\n    return this._mutex;\n  }\n}\n","import { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\nimport type { SheetPreferences } from 'src/features/user-preferences/user-preferences.types';\nimport { writable, type Readable } from 'svelte/store';\n\nexport class SheetPreferencesRuntime {\n  private static _store = writable<SheetPreferences>();\n\n  static init() {\n    this._store.set(SheetPreferencesService.get());\n    Hooks.on('updateUser', (user: any) => {\n      if (game.user === user) {\n        this._store.set(SheetPreferencesService.get());\n      }\n    });\n  }\n\n  static getStore(): Readable<SheetPreferences> {\n    return this._store;\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type {\n  ActorSheetContext,\n  DamageModificationContextEntry,\n  DamageModificationData,\n} from 'src/types/types';\nimport { debug, error } from 'src/utils/logging';\n\n/**\n * Temporarily a utility class for common actor sheet functions.\n * Eventually planned to be a base class for Tidy 5e Sheet classes\n * after Tidy takes over all sheet logic.\n */\nexport class Tidy5eBaseActorSheet {\n  static applyCommonContext(context: ActorSheetContext) {\n    // Concentration\n    if (\n      [CONSTANTS.SHEET_TYPE_CHARACTER, CONSTANTS.SHEET_TYPE_NPC].includes(\n        context.actor.type\n      )\n    ) {\n      const attrConcentration = context.actor.system.attributes.concentration;\n      if (\n        context.actor.statuses.has(CONFIG.specialStatusEffects.CONCENTRATING) ||\n        (FoundryAdapter.isActorSheetUnlocked(context.actor) &&\n          attrConcentration)\n      ) {\n        (context.saves ??= {}).concentration = {\n          isConcentration: true,\n          label: game.i18n.localize('DND5E.Concentration'),\n          abbr: game.i18n.localize('DND5E.Concentration'),\n          mod: Math.abs(attrConcentration.save),\n          sign:\n            context.actor.system.attributes.concentration.save < 0 ? '-' : '+',\n        };\n      }\n    }\n\n    context.hasSpecialSaves = Object.keys(context.saves ?? {}).length > 0;\n\n    // Damage Modification\n    Tidy5eBaseActorSheet.applyDamageModifications(context);\n  }\n\n  static applyDamageModifications(context: ActorSheetContext) {\n    try {\n      // Damage modifications\n      const dm: DamageModificationData | undefined =\n        context.actor.system.traits?.dm;\n      if (dm) {\n        const rollData = context.actor.getRollData({ deterministic: true });\n        const mods = Object.entries(dm.amount)\n          .map(([key, value]) => {\n            const total = dnd5e.utils.simplifyBonus(value, rollData);\n            if (!total) return null;\n            const mod: DamageModificationContextEntry = {\n              label: `${\n                CONFIG.DND5E.damageTypes[key]?.label ?? key\n              } ${dnd5e.utils.formatNumber(total, { signDisplay: 'always' })}`,\n              consequence: total > 0 ? 'detriment' : 'benefit',\n            };\n            const icons: string[] = (mod.icons = []);\n            if (dm.bypasses.size && CONFIG.DND5E.damageTypes[key]?.isPhysical)\n              icons.push(...dm.bypasses);\n            return mod;\n          })\n          .filter((f) => f);\n\n        context.traits.traits.dm = mods;\n      }\n    } catch (e) {\n      error(\n        'An error occurred while preparing Damage Modification data',\n        false,\n        e\n      );\n      debug('Damage Modification error troubleshooting info', { context });\n    }\n  }\n}\n","import { CONSTANTS } from 'src/constants';\nimport type { Item5e } from 'src/types/item.types';\nimport type {\n  ActorInventoryTypes,\n  CharacterFeatureSection,\n  CharacterItemPartitions,\n  FavoriteSection,\n  GenericFavoriteSection,\n  InventorySection,\n  TypedEffectFavoriteSection,\n} from 'src/types/types';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\nexport class CharacterSheetSections {\n  static buildFeaturesSections(\n    races: any[],\n    backgrounds: any[],\n    classes: any[],\n    feats: any[],\n    options: Partial<CharacterFeatureSection>\n  ): Record<string, CharacterFeatureSection> {\n    const customFeats = feats.filter((f) => TidyFlags.section.get(f));\n    feats = feats.filter((f) => !TidyFlags.section.get(f));\n\n    const features: Record<string, CharacterFeatureSection> = {\n      race: {\n        label: CONFIG.Item.typeLabels.race,\n        items: races,\n        hasActions: false,\n        dataset: { type: CONSTANTS.ITEM_TYPE_RACE },\n        showRequirementsColumn: true,\n        canCreate: true,\n        key: CONSTANTS.CHARACTER_FEAT_SECTION_RACE,\n        show: true,\n        ...options,\n      },\n      background: {\n        label: CONFIG.Item.typeLabels.background,\n        items: backgrounds,\n        hasActions: false,\n        dataset: { type: CONSTANTS.ITEM_TYPE_BACKGROUND },\n        showRequirementsColumn: true,\n        canCreate: true,\n        key: CONSTANTS.CHARACTER_FEAT_SECTION_BACKGROUND,\n        show: true,\n        ...options,\n      },\n      classes: {\n        label: `${CONFIG.Item.typeLabels.class}Pl`,\n        items: classes,\n        hasActions: false,\n        dataset: { type: CONSTANTS.ITEM_TYPE_CLASS },\n        isClass: true,\n        showLevelColumn: true,\n        canCreate: true,\n        key: CONSTANTS.CHARACTER_FEAT_SECTION_CLASSES,\n        show: true,\n        ...options,\n      },\n      active: {\n        label: 'DND5E.FeatureActive',\n        items: feats.filter((feat) => feat.system.activation?.type),\n        hasActions: true,\n        dataset: {\n          type: CONSTANTS.ITEM_TYPE_FEAT,\n          'system.activation.type': CONSTANTS.ACTIVATION_COST_ACTION,\n        },\n        showRequirementsColumn: true,\n        showUsagesColumn: true,\n        showUsesColumn: true,\n        canCreate: true,\n        key: CONSTANTS.CHARACTER_FEAT_SECTION_ACTIVE,\n        show: true,\n        ...options,\n      },\n      passive: {\n        label: 'DND5E.FeaturePassive',\n        items: feats.filter((feat) => !feat.system.activation?.type),\n        hasActions: false,\n        dataset: { type: CONSTANTS.ITEM_TYPE_FEAT },\n        showRequirementsColumn: true,\n        canCreate: true,\n        key: CONSTANTS.CHARACTER_FEAT_SECTION_PASSIVE,\n        show: true,\n        ...options,\n      },\n    };\n\n    customFeats.forEach((f) =>\n      CharacterSheetSections.applyCharacterFeatureToSection(\n        features,\n        f,\n        options\n      )\n    );\n\n    return features;\n  }\n\n  static applyCharacterFeatureToSection(\n    features: Record<string, CharacterFeatureSection>,\n    feat: Item5e,\n    customSectionOptions: Partial<CharacterFeatureSection>\n  ) {\n    const customSectionName = TidyFlags.section.get(feat);\n\n    if (!customSectionName) {\n      return;\n    }\n\n    const customSection: CharacterFeatureSection = (features[\n      customSectionName\n    ] ??= {\n      label: customSectionName,\n      items: [],\n      hasActions: true,\n      dataset: {\n        [TidyFlags.section.prop]: customSectionName,\n      },\n      isClass: false,\n      canCreate: true,\n      showUsesColumn: true,\n      showUsagesColumn: true,\n      showRequirementsColumn: true,\n      key: customSectionName,\n      custom: {\n        section: customSectionName,\n        creationItemTypes: [CONSTANTS.ITEM_TYPE_FEAT],\n      },\n      show: true,\n      ...customSectionOptions,\n    });\n\n    customSection.items.push(feat);\n  }\n\n  static partitionItem(\n    item: Item5e,\n    partitions: CharacterItemPartitions,\n    inventory: ActorInventoryTypes\n  ) {\n    if (item.type === CONSTANTS.ITEM_TYPE_SPELL) {\n      partitions.spells.push(item);\n    } else if (item.type === CONSTANTS.ITEM_TYPE_FEAT) {\n      partitions.feats.push(item);\n    } else if (item.type === CONSTANTS.ITEM_TYPE_RACE) {\n      partitions.races.push(item);\n    } else if (item.type === CONSTANTS.ITEM_TYPE_BACKGROUND) {\n      partitions.backgrounds.push(item);\n    } else if (item.type === CONSTANTS.ITEM_TYPE_CLASS) {\n      partitions.classes.push(item);\n    } else if (item.type === CONSTANTS.ITEM_TYPE_SUBCLASS) {\n      partitions.subclasses.push(item);\n    } else if (Object.keys(inventory).includes(item.type)) {\n      partitions.items.push(item);\n    }\n  }\n\n  // TODO: Figure out how to handle effects with section names that collide with items\n  static mergeDuplicateFavoriteSections(sections: FavoriteSection[]) {\n    let sectionsMap: Record<\n      string,\n      Exclude<FavoriteSection, TypedEffectFavoriteSection>\n    > = {};\n    for (let section of sections) {\n      if (section.type === CONSTANTS.TAB_CHARACTER_EFFECTS) {\n        continue;\n      }\n\n      const mappedSection = sectionsMap[section.key];\n\n      if (!mappedSection) {\n        sectionsMap[section.key] = section;\n        continue;\n      }\n\n      const incomingItems =\n        CharacterSheetSections.getItemsFromFavoriteSection(section);\n\n      if (mappedSection.type !== CONSTANTS.CHARACTER_FAVORITE_SECTION_GENERIC) {\n        const mappedItems =\n          CharacterSheetSections.getItemsFromFavoriteSection(mappedSection);\n\n        sectionsMap[section.key] =\n          CharacterSheetSections.createGenericFavoriteSection(section.key, [\n            ...incomingItems,\n            ...mappedItems,\n          ]);\n\n        continue;\n      }\n\n      mappedSection.items.push(...incomingItems);\n    }\n\n    return Object.values(sectionsMap);\n  }\n\n  static getItemsFromFavoriteSection(\n    section: Exclude<FavoriteSection, TypedEffectFavoriteSection>\n  ) {\n    return section.type === CONSTANTS.TAB_CHARACTER_SPELLBOOK\n      ? section.spells\n      : section.items;\n  }\n\n  static createGenericFavoriteSection(\n    key: string,\n    items: Item5e[]\n  ): GenericFavoriteSection & { type: 'generic' } {\n    return {\n      canCreate: false,\n      dataset: [],\n      items: items,\n      key: key,\n      label: FoundryAdapter.localize(key),\n      custom: {\n        creationItemTypes: [],\n        section: key,\n      },\n      isExternal: false,\n      show: true,\n      type: 'generic',\n    };\n  }\n}\n","import { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { Item5e } from 'src/types/item.types';\nimport { isNil } from 'src/utils/data';\n\n/**\n * A function which returns the items that are visualized by the target sheet.\n */\ntype OwnedItemsFunction = (object: any) => Map<string, Item5e>;\n\n/**\n * A mixin which supports drag-and-drop behaviors specifically catered to\n * Tidy 5e sheets with item lists and custom sections.\n * @param itemsFn A function which returns the items that are visualized by the target sheet.\n * @param Base The base document to extend with this mixin.\n * @returns The base document with custom section logic mixed in.\n */\nexport function BaseSheetCustomSectionMixin<\n  T extends new (...args: any[]) => {\n    _onSortItem(\n      event: DragEvent,\n      itemData: Record<string, unknown>\n    ): Promise<any> | void;\n    object: any;\n  }\n>(itemsFn: OwnedItemsFunction, Base: T) {\n  return class extends Base {\n    async _onSortItem(event: DragEvent, itemData: Record<string, unknown>) {\n      const sourceSection = foundry.utils.getProperty(\n        itemData,\n        TidyFlags.section.prop\n      );\n\n      const targetSection = (event.target as HTMLElement | null)\n        ?.closest('[data-tidy-section-key][data-custom-section=\"true\"]')\n        ?.getAttribute('data-tidy-section-key');\n\n      const isMovedToNewSection =\n        !isNil(targetSection?.trim(), '') && sourceSection !== targetSection;\n\n      const isMovedToDefaultSection =\n        !isNil(sourceSection?.trim(), '') && isNil(targetSection?.trim(), '');\n\n      const initialSortResult = await super._onSortItem(event, itemData);\n\n      const item = itemsFn(this.object).get(itemData._id as string);\n\n      return isMovedToNewSection\n        ? TidyFlags.section.set(item, targetSection)\n        : isMovedToDefaultSection\n        ? TidyFlags.section.unset(item)\n        : initialSortResult;\n    }\n  };\n}\n","import type { Dnd5eActorCondition } from 'src/foundry/foundry-and-system';\nimport type { Actor5e } from 'src/types/types';\n\n// TODO: In AppV2, consider a mixin for common data preparation between Actors, like in dnd5e.\nexport class ConditionsAndEffects {\n  static async getConditionsAndEffects(\n    actor: Actor5e,\n    object: any,\n    effectSections: any[]\n  ): Promise<{\n    conditions: Dnd5eActorCondition[];\n    effects: any;\n  }> {\n    const conditionIds = new Set();\n    const conditions = Object.entries<any>(CONFIG.DND5E.conditionTypes).reduce<\n      Dnd5eActorCondition[]\n    >((arr, [k, c]) => {\n      if (c.pseudo) return arr; // Filter out pseudo-conditions.\n      const { label: name, icon, reference } = c;\n      const id = dnd5e.utils.staticID(`dnd5e${k}`);\n      conditionIds.add(id);\n      const existing = actor.effects.get(id);\n      const { disabled, img } = existing ?? {};\n      arr.push({\n        name,\n        reference,\n        id: k,\n        icon: img ?? icon,\n        disabled: existing ? disabled : true,\n      });\n      return arr;\n    }, []);\n\n    for (const category of Object.values(effectSections)) {\n      category.effects = await category.effects.reduce(\n        async (arr: any[], effect: any) => {\n          effect.updateDuration();\n          if (conditionIds.has(effect.id) && !effect.duration.remaining)\n            return arr;\n          const { id, name, img, disabled, duration } = effect;\n          let source = (await effect.getSource()) ?? actor;\n          // If the source is an ActiveEffect from another Actor, note the source as that Actor instead.\n          if (\n            source instanceof dnd5e.documents.ActiveEffect5e &&\n            source.target !== object\n          ) {\n            source = source.target;\n          }\n\n          arr = await arr;\n          arr.push({\n            id,\n            name,\n            img,\n            disabled,\n            duration,\n            source,\n            parentId: effect.target === effect.parent ? null : effect.parent.id,\n            durationParts: duration.remaining ? duration.label.split(', ') : [],\n            hasTooltip: source instanceof dnd5e.documents.Item5e,\n          });\n          return arr;\n        },\n        []\n      );\n    }\n\n    return {\n      conditions,\n      effects: effectSections,\n    };\n  }\n}\n","import { FoundryAdapter } from '../foundry/foundry-adapter';\nimport CharacterSheet from './character/CharacterSheet.svelte';\nimport { debug, error } from 'src/utils/logging';\nimport { SettingsProvider, settingStore } from 'src/settings/settings';\nimport { initTidy5eContextMenu } from 'src/context-menu/tidy5e-context-menu';\nimport { CONSTANTS } from 'src/constants';\nimport { writable } from 'svelte/store';\nimport {\n  type ItemCardStore,\n  type CharacterSheetContext,\n  type SheetStats,\n  type Actor5e,\n  type SheetTabCacheable,\n  type SheetExpandedItemsCacheable,\n  type SearchFilterCacheable,\n  type LocationToSearchTextMap,\n  type ExpandedItemIdToLocationsMap,\n  type ExpandedItemData,\n  type TidyResource,\n  type MessageBusMessage,\n  type MessageBus,\n  type Utilities,\n  type ActiveEffect5e,\n  type ActorInventoryTypes,\n  type CharacterItemPartitions,\n  type CharacterFeatureSection,\n  type CharacterItemContext,\n  type SpellbookSection,\n  type FavoriteSection,\n  type EffectFavoriteSection,\n} from 'src/types/types';\nimport {\n  applySheetAttributesToWindow,\n  applyThemeDataAttributeToWindow,\n  applyTitleToWindow,\n  blurUntabbableButtonsOnClick,\n  maintainCustomContentInputFocus,\n} from 'src/utils/applications';\nimport type { SvelteComponent } from 'svelte';\nimport { getPercentage } from 'src/utils/numbers';\nimport type { Item5e, ItemChatData } from 'src/types/item.types';\nimport { CharacterSheetRuntime } from 'src/runtime/CharacterSheetRuntime';\nimport {\n  actorUsesActionFeature,\n  getActorActionSections,\n} from 'src/features/actions/actions';\nimport { isNil } from 'src/utils/data';\nimport { CustomContentRenderer } from './CustomContentRenderer';\nimport { ActorPortraitRuntime } from 'src/runtime/ActorPortraitRuntime';\nimport { calculateSpellAttackAndDc } from 'src/utils/formula';\nimport { CustomActorTraitsRuntime } from 'src/runtime/actor-traits/CustomActorTraitsRuntime';\nimport { ItemTableToggleCacheService } from 'src/features/caching/ItemTableToggleCacheService';\nimport { ItemFilterService } from 'src/features/filtering/ItemFilterService';\nimport { StoreSubscriptionsService } from 'src/features/store/StoreSubscriptionsService';\nimport { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\nimport { AsyncMutex } from 'src/utils/mutex';\nimport { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\nimport { SheetPreferencesRuntime } from 'src/runtime/user-preferences/SheetPreferencesRuntime';\nimport { Tidy5eBaseActorSheet } from './Tidy5eBaseActorSheet';\nimport { CharacterSheetSections } from 'src/features/sections/CharacterSheetSections';\nimport { SheetSections } from 'src/features/sections/SheetSections';\nimport { DocumentTabSectionConfigApplication } from 'src/applications/section-config/DocumentTabSectionConfigApplication';\nimport { BaseSheetCustomSectionMixin } from './mixins/BaseSheetCustomSectionMixin';\nimport { Inventory } from 'src/features/sections/Inventory';\nimport type {\n  CharacterFavorite,\n  UnsortedCharacterFavorite,\n} from 'src/foundry/dnd5e.types';\nimport { TidyHooks } from 'src/foundry/TidyHooks';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport { Container } from 'src/features/containers/Container';\nimport { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\nimport { ConditionsAndEffects } from 'src/features/conditions-and-effects/ConditionsAndEffects';\n\nexport class Tidy5eCharacterSheet\n  extends BaseSheetCustomSectionMixin(\n    (object) => object.items,\n    dnd5e.applications.actor.ActorSheet5eCharacter\n  )\n  implements\n    SheetTabCacheable,\n    SheetExpandedItemsCacheable,\n    SearchFilterCacheable\n{\n  context = writable<CharacterSheetContext>();\n  stats = writable<SheetStats>({\n    lastSubmissionTime: null,\n  });\n  card = writable<ItemCardStore>();\n  currentTabId: string;\n  searchFilters: LocationToSearchTextMap = new Map<string, string>();\n  expandedItems: ExpandedItemIdToLocationsMap = new Map<string, Set<string>>();\n  expandedItemData: ExpandedItemData = new Map<string, ItemChatData>();\n  inlineContainerToggleService = new InlineContainerToggleService();\n  itemTableTogglesCache: ItemTableToggleCacheService;\n  itemFilterService: ItemFilterService;\n  subscriptionsService: StoreSubscriptionsService;\n  messageBus: MessageBus = writable<MessageBusMessage | undefined>();\n\n  /**\n   * The cached concentration information for the character.\n   * @type {{items: Set<Item5e>, effects: Set<ActiveEffect5e>}}\n   * @internal\n   */\n  _concentration: { items: Set<Item5e>; effects: Set<ActiveEffect5e> } = {\n    items: new Set(),\n    effects: new Set(),\n  };\n\n  constructor(...args: any[]) {\n    super(...args);\n\n    this.subscriptionsService = new StoreSubscriptionsService();\n\n    this.itemTableTogglesCache = new ItemTableToggleCacheService({\n      userId: game.user.id,\n      documentId: this.actor.id,\n    });\n\n    this.itemFilterService = new ItemFilterService({}, this.actor);\n\n    this.currentTabId =\n      SettingsProvider.settings.initialCharacterSheetTab.get();\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template.hbs');\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      classes: [\n        'tidy5e-sheet',\n        'sheet',\n        'actor',\n        CONSTANTS.SHEET_TYPE_CHARACTER,\n      ],\n      width: 740,\n      height: 810,\n      scrollY: ['[data-tidy-track-scroll-y]', '.scroll-container'],\n    });\n  }\n\n  component: SvelteComponent | undefined;\n  activateListeners(html: { get: (index: 0) => HTMLElement }) {\n    let first = true;\n    this.subscriptionsService.registerSubscriptions(\n      this.itemFilterService.filterData$.subscribe(() => {\n        if (first) return;\n        this.render();\n      }),\n      settingStore.subscribe((s) => {\n        if (first) return;\n        applyThemeDataAttributeToWindow(s.colorScheme, this.element.get(0));\n        this.render();\n      }),\n      this.messageBus.subscribe((m) => {\n        debug('Message bus message received', {\n          app: this,\n          actor: this.actor,\n          message: m,\n        });\n      }),\n      SheetPreferencesRuntime.getStore().subscribe(() => {\n        if (first) return;\n        this.render();\n      })\n    );\n    first = false;\n\n    const node = html.get(0);\n    this.card.set({ sheet: node, item: null, itemCardContentTemplate: null });\n\n    this.component = new CharacterSheet({\n      target: node,\n      context: new Map<any, any>([\n        [CONSTANTS.SVELTE_CONTEXT.APP_ID, this.appId],\n        [CONSTANTS.SVELTE_CONTEXT.CONTEXT, this.context],\n        [CONSTANTS.SVELTE_CONTEXT.MESSAGE_BUS, this.messageBus],\n        [CONSTANTS.SVELTE_CONTEXT.STATS, this.stats],\n        [CONSTANTS.SVELTE_CONTEXT.CARD, this.card],\n        [CONSTANTS.SVELTE_CONTEXT.CURRENT_TAB_ID, this.currentTabId],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_TAB_SELECTED,\n          this.onTabSelected.bind(this),\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.SEARCH_FILTERS, new Map(this.searchFilters)],\n        [\n          CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n          this.inlineContainerToggleService,\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.ITEM_FILTER_SERVICE, this.itemFilterService],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_FILTER,\n          this.itemFilterService.onFilter.bind(this.itemFilterService),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_FILTER_CLEAR_ALL,\n          this.itemFilterService.onFilterClearAll.bind(this.itemFilterService),\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.ON_SEARCH, this.onSearch.bind(this)],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TOGGLED,\n          this.onItemToggled.bind(this),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ITEM_TABLE_TOGGLES,\n          new Map(this.itemTableTogglesCache.itemTableToggles),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TABLE_TOGGLE,\n          this.itemTableTogglesCache.onItemTableToggle.bind(\n            this.itemTableTogglesCache\n          ),\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.LOCATION, ''],\n        [CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEMS, new Map(this.expandedItems)],\n        [\n          CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEM_DATA,\n          new Map(this.expandedItemData),\n        ],\n      ]),\n    });\n\n    initTidy5eContextMenu(this, html);\n  }\n\n  async getData(options = {}) {\n    this._concentration = this.actor.concentration;\n\n    const defaultDocumentContext = await super.getData(this.options);\n\n    Tidy5eBaseActorSheet.applyCommonContext(defaultDocumentContext);\n\n    const characterPreferences = SheetPreferencesService.getByType(\n      this.actor.type\n    );\n\n    const attributesSortMode =\n      characterPreferences.tabs?.[CONSTANTS.TAB_CHARACTER_ATTRIBUTES]?.sort ??\n      'm';\n    const inventorySortMode =\n      characterPreferences.tabs?.[CONSTANTS.TAB_CHARACTER_INVENTORY]?.sort ??\n      'm';\n    const spellbookSortMode =\n      characterPreferences.tabs?.[CONSTANTS.TAB_CHARACTER_SPELLBOOK]?.sort ??\n      'm';\n    const featureSortMode =\n      characterPreferences.tabs?.[CONSTANTS.TAB_CHARACTER_FEATURES]?.sort ??\n      'm';\n    const actionListSortMode =\n      characterPreferences.tabs?.[CONSTANTS.TAB_ACTOR_ACTIONS]?.sort ?? 'm';\n\n    const unlocked =\n      FoundryAdapter.isActorSheetUnlocked(this.actor) &&\n      defaultDocumentContext.editable;\n\n    const tidyResources: TidyResource[] = defaultDocumentContext.resources.map(\n      (r: any) => ({\n        name: r.name,\n        label: r.label,\n        labelName: `system.resources.${r.name}.label`,\n        placeholder: r.placeholder,\n        value: r.value,\n        valueName: `system.resources.${r.name}.value`,\n        max: r.max,\n        maxName: `system.resources.${r.name}.max`,\n        sr: r.sr,\n        srName: `system.resources.${r.name}.sr`,\n        lr: r.lr,\n        lrName: `system.resources.${r.name}.lr`,\n        cssClasses: [],\n        dataSet: {},\n      })\n    );\n\n    TidyHooks.tidy5eSheetsPrepareResources(tidyResources, this.actor);\n\n    let maxPreparedSpellsTotal = 0;\n    try {\n      const formula = TidyFlags.maxPreparedSpells.get(this.actor) ?? '';\n\n      if (formula?.trim() !== '') {\n        const roll = await Roll.create(\n          formula,\n          this.actor.getRollData()\n        ).evaluate();\n        maxPreparedSpellsTotal = roll.total;\n      }\n    } catch (e) {\n      error('Unable to calculate max prepared spells', false, e);\n    }\n\n    // TODO: Make a builder for this\n    // TODO: Extract to runtime?\n    let utilities: Utilities<CharacterSheetContext> = {\n      [CONSTANTS.TAB_CHARACTER_ATTRIBUTES]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n                'sort',\n                'm'\n              );\n            },\n            visible: attributesSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n                'sort',\n                'a'\n              );\n            },\n            visible: attributesSortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                // Provide a way to build the necessary config, perhaps within the application constructor. We've got all the info we need in order to perform the operation.\n                sections: context.favorites,\n                tabId: CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n                tabTitle: CharacterSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_CHARACTER_ATTRIBUTES\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n      [CONSTANTS.TAB_CHARACTER_INVENTORY]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_INVENTORY,\n                'sort',\n                'm'\n              );\n            },\n            visible: inventorySortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_INVENTORY,\n                'sort',\n                'a'\n              );\n            },\n            visible: inventorySortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Commands.HideContainerPanel'\n            ),\n            iconClass: `fas fa-boxes-stacked fa-fw`,\n            execute: () => {\n              TidyFlags.showContainerPanel.unset(this.actor);\n            },\n            visible: !!TidyFlags.showContainerPanel.get(this.actor),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Commands.ShowContainerPanel'\n            ),\n            iconClass: `fas fa-box fa-fw`,\n            execute: () => {\n              TidyFlags.showContainerPanel.set(this.actor, true);\n            },\n            visible: !TidyFlags.showContainerPanel.get(this.actor),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_INVENTORY,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_INVENTORY,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.ListLayout'),\n            iconClass: 'fas fa-th-list fa-fw toggle-list',\n            visible: !TidyFlags.inventoryGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.inventoryGrid.set(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.GridLayout'),\n            iconClass: 'fas fa-th-large fa-fw toggle-grid',\n            visible: !!TidyFlags.inventoryGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.inventoryGrid.unset(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.inventory,\n                tabId: CONSTANTS.TAB_CHARACTER_INVENTORY,\n                tabTitle: CharacterSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_CHARACTER_INVENTORY\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n      [CONSTANTS.TAB_CHARACTER_SPELLBOOK]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n                'sort',\n                'm'\n              );\n            },\n            visible: spellbookSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n                'sort',\n                'a'\n              );\n            },\n            visible: spellbookSortMode === 'm',\n          },\n          {\n            title: 'Spell Pips',\n            iconClass: 'fa-regular fa-circle-dot fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypePreference(\n                this.actor.type,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PREFERENCE,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_VALUE_MAX\n              );\n            },\n            visible:\n              (characterPreferences?.spellSlotTrackerMode ??\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS) ===\n              CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS,\n          },\n          {\n            title: 'Spell Value/Max',\n            iconClass: 'fa-regular fa-square fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypePreference(\n                this.actor.type,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PREFERENCE,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS\n              );\n            },\n            visible:\n              characterPreferences?.spellSlotTrackerMode ===\n              CONSTANTS.SPELL_SLOT_TRACKER_MODE_VALUE_MAX,\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.ListLayout'),\n            iconClass: 'fas fa-th-list fa-fw toggle-list',\n            visible: !TidyFlags.spellbookGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.spellbookGrid.set(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.GridLayout'),\n            iconClass: 'fas fa-th-large fa-fw toggle-grid',\n            visible: !!TidyFlags.spellbookGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.spellbookGrid.unset(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.spellbook,\n                tabId: CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n                tabTitle: CharacterSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_CHARACTER_SPELLBOOK\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n      [CONSTANTS.TAB_CHARACTER_FEATURES]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_FEATURES,\n                'sort',\n                'm'\n              );\n            },\n            visible: featureSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_CHARACTER_FEATURES,\n                'sort',\n                'a'\n              );\n            },\n            visible: featureSortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_FEATURES,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_CHARACTER_FEATURES,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.features,\n                tabId: CONSTANTS.TAB_CHARACTER_FEATURES,\n                tabTitle: CharacterSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_CHARACTER_FEATURES\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_ACTOR_ACTIONS,\n                'sort',\n                'm'\n              );\n            },\n            visible: actionListSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.SortMode.ActionListDefault'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_ACTOR_ACTIONS,\n                'sort',\n                'a'\n              );\n            },\n            visible: actionListSortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.actions,\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                tabTitle: CharacterSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_ACTOR_ACTIONS\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n    };\n\n    // Effects & Conditions\n    let { conditions, effects: enhancedEffectSections } =\n      await ConditionsAndEffects.getConditionsAndEffects(\n        this.actor,\n        this.object,\n        defaultDocumentContext.effects\n      );\n\n    const context: CharacterSheetContext = {\n      ...defaultDocumentContext,\n      activateEditors: (node, options) =>\n        FoundryAdapter.activateEditors(node, this, options?.bindSecrets),\n      actions: await getActorActionSections(this.actor),\n      actorClassesToImages: getActorClassesToImages(this.actor),\n      actorPortraitCommands:\n        ActorPortraitRuntime.getEnabledPortraitMenuCommands(this.actor),\n      allowEffectsManagement: FoundryAdapter.allowCharacterEffectsManagement(\n        this.actor\n      ),\n      allowMaxHpOverride:\n        SettingsProvider.settings.allowHpMaxOverride.get() &&\n        (!SettingsProvider.settings.lockHpMaxChanges.get() ||\n          FoundryAdapter.userIsGm()),\n      appearanceEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.appearance,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      appId: this.appId,\n      biographyEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.biography.value,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      bondEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.bond,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      conditions: conditions,\n      containerPanelItems: await Inventory.getContainerPanelItems(\n        defaultDocumentContext.items\n      ),\n      customActorTraits: CustomActorTraitsRuntime.getEnabledTraits(\n        defaultDocumentContext\n      ),\n      customContent: await CharacterSheetRuntime.getContent(\n        defaultDocumentContext\n      ),\n      editable: defaultDocumentContext.editable,\n      effects: enhancedEffectSections,\n      filterData: this.itemFilterService.getDocumentItemFilterData(),\n      filterPins: ItemFilterRuntime.defaultFilterPins[this.actor.type],\n      flawEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.flaw,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      healthPercentage: getPercentage(\n        this.actor?.system?.attributes?.hp?.value,\n        this.actor?.system?.attributes?.hp?.max\n      ),\n      idealEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.ideal,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      lockExpChanges: FoundryAdapter.shouldLockExpChanges(),\n      lockHpMaxChanges: FoundryAdapter.shouldLockHpMaxChanges(),\n      lockItemQuantity: FoundryAdapter.shouldLockItemQuantity(),\n      lockLevelSelector: FoundryAdapter.shouldLockLevelSelector(),\n      lockMoneyChanges: FoundryAdapter.shouldLockMoneyChanges(),\n      lockSensitiveFields:\n        (!unlocked && SettingsProvider.settings.useTotalSheetLock.get()) ||\n        !defaultDocumentContext.editable,\n      maxPreparedSpellsTotal,\n      notes1EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes1.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notes2EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes2.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notes3EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes3.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notes4EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes4.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notesEnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      originalContext: defaultDocumentContext,\n      owner: this.actor.isOwner,\n      showContainerPanel:\n        TidyFlags.showContainerPanel.get(this.actor) === true &&\n        Array.from(defaultDocumentContext.items).some(\n          (i: Item5e) => i.type === CONSTANTS.ITEM_TYPE_CONTAINER\n        ),\n      showLimitedSheet: FoundryAdapter.showLimitedSheet(this.actor),\n      spellCalculations: calculateSpellAttackAndDc(this.actor),\n      spellSlotTrackerMode:\n        characterPreferences.spellSlotTrackerMode ??\n        CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS,\n      tabs: [],\n      tidyResources: tidyResources,\n      traitEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.trait,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      unlocked: unlocked,\n      useActionsFeature: actorUsesActionFeature(this.actor),\n      useClassicControls:\n        SettingsProvider.settings.useClassicControlsForCharacter.get(),\n      useRoundedPortraitStyle: [\n        CONSTANTS.CIRCULAR_PORTRAIT_OPTION_ALL as string,\n        CONSTANTS.CIRCULAR_PORTRAIT_OPTION_CHARACTER as string,\n      ].includes(SettingsProvider.settings.useCircularPortraitStyle.get()),\n      utilities: utilities,\n      viewableWarnings:\n        defaultDocumentContext.warnings?.filter(\n          (w: any) => !isNil(w.message?.trim(), '')\n        ) ?? [],\n    };\n\n    for (const panelItem of context.containerPanelItems) {\n      const ctx = context.itemContext[panelItem.container.id];\n      ctx.containerContents = await Container.getContainerContents(\n        panelItem.container\n      );\n    }\n\n    let tabs = await CharacterSheetRuntime.getTabs(context);\n\n    const selectedTabs = TidyFlags.selectedTabs.get(context.actor);\n\n    if (selectedTabs?.length) {\n      tabs = tabs\n        .filter((t) => selectedTabs?.includes(t.id))\n        .sort(\n          (a, b) => selectedTabs.indexOf(a.id) - selectedTabs.indexOf(b.id)\n        );\n    } else {\n      const defaultTabs =\n        SettingsProvider.settings.defaultCharacterSheetTabs.get();\n      tabs = tabs\n        .filter((t) => defaultTabs?.includes(t.id))\n        .sort((a, b) => defaultTabs.indexOf(a.id) - defaultTabs.indexOf(b.id));\n    }\n\n    context.tabs = tabs;\n\n    TidyHooks.tidy5eSheetsPreConfigureSections(\n      this,\n      this.element.get(0),\n      context\n    );\n\n    // Apply Section Configs\n    // ------------------------------------------------------------\n\n    let effectsSection: EffectFavoriteSection = {\n      canCreate: false,\n      dataset: {},\n      effects: [],\n      key: 'tidy.effects',\n      label: 'DND5E.Effects',\n      show: true,\n    };\n    const favoriteEffects = (\n      this.actor.system.favorites as CharacterFavorite[]\n    ).filter((f) => f.type === 'effect');\n\n    // TODO: Do I need to remove active effects from favorites when they are no longer available on the sheet?\n    // Or does the system do this?\n    for (const favoriteEffect of favoriteEffects) {\n      const effect = fromUuidSync(favoriteEffect.id, { relative: this.actor });\n\n      if (!effect) {\n        continue;\n      }\n\n      const data = await effect.getFavoriteData();\n\n      if (data.suppressed) {\n        data.subtitle = game.i18n.localize('DND5E.Suppressed');\n      }\n\n      effectsSection.effects.push({\n        effectId: effect.id,\n        effect: effect,\n        id: favoriteEffect.id,\n        img: data.img,\n        sort: favoriteEffect.sort,\n        subtitle: data.subtitle,\n        suppressed: data.suppressed,\n        title: data.title,\n        toggle: { applicable: true, value: data.toggle },\n      });\n    }\n\n    // Favorites\n    context.favorites = CharacterSheetSections.mergeDuplicateFavoriteSections(\n      context.favorites\n    );\n\n    if (effectsSection.effects.length) {\n      (context.favorites as FavoriteSection[]).push({\n        ...effectsSection,\n        type: CONSTANTS.TAB_CHARACTER_EFFECTS,\n      });\n    }\n\n    debug('Character Sheet context data', context);\n\n    return context;\n  }\n\n  protected _prepareItems(context: CharacterSheetContext) {\n    // Categorize items as inventory, spellbook, features, and classes\n    const inventory: ActorInventoryTypes =\n      Inventory.getDefaultInventorySections();\n    const favoriteInventory: ActorInventoryTypes =\n      Inventory.getDefaultInventorySections({\n        canCreate: false,\n      });\n\n    const favoritesIdMap: Map<string, CharacterFavorite> =\n      this._getFavoritesIdMap();\n\n    // Partition items by category\n    let {\n      items,\n      spells,\n      feats,\n      races,\n      backgrounds,\n      classes,\n      subclasses,\n      favorites,\n    } = Array.from(this.actor.items).reduce(\n      (\n        obj: CharacterItemPartitions & { favorites: CharacterItemPartitions },\n        item: Item5e\n      ) => {\n        const { quantity } = item.system;\n\n        // Item details\n        const ctx = (context.itemContext[item.id] ??= {});\n        ctx.isStack = Number.isNumeric(quantity) && quantity !== 1;\n        ctx.attunement = FoundryAdapter.getAttunementContext(item);\n\n        // Item usage\n        ctx.hasUses = item.hasLimitedUses;\n        ctx.hasTarget = item.hasAreaTarget || item.hasIndividualTarget;\n\n        // Unidentified items\n        ctx.concealDetails =\n          !game.user.isGM && item.system.identified === false;\n\n        // Item grouping\n        const [originId] =\n          item.getFlag('dnd5e', 'advancementOrigin')?.split('.') ?? [];\n        const group = this.actor.items.get(originId);\n        switch (group?.type) {\n          case 'race':\n            ctx.group = 'race';\n            break;\n          case 'background':\n            ctx.group = 'background';\n            break;\n          case 'class':\n            ctx.group = group.identifier;\n            break;\n          case 'subclass':\n            ctx.group = group.class?.identifier ?? 'other';\n            break;\n          default:\n            ctx.group = 'other';\n        }\n\n        // Individual item preparation\n        this._prepareItem(item, ctx);\n\n        const isWithinContainer = this.actor.items.has(item.system.container);\n\n        // Classify items into types\n        if (!isWithinContainer) {\n          CharacterSheetSections.partitionItem(item, obj, inventory);\n        }\n\n        const favoritedItem = favoritesIdMap.get(\n          item.getRelativeUUID(this.actor)\n        );\n        if (favoritedItem?.type === 'item') {\n          ctx.favoriteId = favoritedItem.id;\n          CharacterSheetSections.partitionItem(\n            item,\n            obj.favorites,\n            favoriteInventory\n          );\n        }\n\n        return obj;\n      },\n      {\n        items: [] as Item5e[],\n        spells: [] as Item5e[],\n        feats: [] as Item5e[],\n        races: [] as Item5e[],\n        backgrounds: [] as Item5e[],\n        classes: [] as Item5e[],\n        subclasses: [] as Item5e[],\n        favorites: {\n          items: [] as Item5e[],\n          spells: [] as Item5e[],\n          feats: [] as Item5e[],\n          races: [] as Item5e[],\n          backgrounds: [] as Item5e[],\n          classes: [] as Item5e[],\n          subclasses: [] as Item5e[],\n        },\n      }\n    );\n\n    const inventoryTypes = Inventory.getDefaultInventoryTypes();\n    // Organize items\n    // Section the items by type\n    for (let item of items) {\n      const ctx = (context.itemContext[item.id] ??= {});\n      ctx.totalWeight = item.system.totalWeight?.toNearest(0.1);\n      Inventory.applyInventoryItemToSection(inventory, item, inventoryTypes, {\n        canCreate: true,\n      });\n    }\n\n    // Section favorite items by type\n    for (let item of favorites.items) {\n      const ctx = (context.itemContext[item.id] ??= {});\n      ctx.totalWeight = item.system.totalWeight?.toNearest(0.1);\n      Inventory.applyInventoryItemToSection(\n        favoriteInventory,\n        item,\n        inventoryTypes,\n        {\n          canCreate: false,\n        }\n      );\n    }\n\n    // Organize Spellbook and count the number of prepared spells (excluding always, at will, cantrips, etc...)\n    // Count prepared spells\n    const nPrepared = spells.filter((spell) => {\n      const prep = spell.system.preparation;\n      return (\n        spell.system.level > 0 && prep.mode === 'prepared' && prep.prepared\n      );\n    }).length;\n\n    // Section spells\n    // TODO: Take over `_prepareSpellbook` and\n    // - have custom sectioning built right into the process\n    // - set up `key` in the spellbook prep code, just like `prop`\n    const spellbook = SheetSections.prepareTidySpellbook(\n      context,\n      spells,\n      {\n        canCreate: true,\n      },\n      this\n    );\n\n    // Section Favorite Spells\n    const favoriteSpellbook = SheetSections.prepareTidySpellbook(\n      context,\n      favorites.spells,\n      {\n        canCreate: false,\n      },\n      this\n    );\n\n    // Process Special Feature Item Context\n    classes = SheetSections.prepareClassItems(\n      context,\n      classes,\n      subclasses,\n      this.actor\n    );\n\n    // Put unmatched subclasses into features so they don't disappear\n    for (const subclass of subclasses) {\n      feats.push(subclass);\n      const message = game.i18n.format('DND5E.SubclassMismatchWarn', {\n        name: subclass.name,\n        class: subclass.system.classIdentifier,\n      });\n      context.warnings.push({ message, type: 'warning' });\n    }\n\n    // Process Special Favorite Feature Item Context\n    favorites.classes = SheetSections.prepareClassItems(\n      context,\n      favorites.classes,\n      favorites.subclasses,\n      this.actor\n    );\n\n    for (const subclass of favorites.subclasses) {\n      favorites.feats.push(subclass);\n    }\n\n    // Section Features\n    const features: Record<string, CharacterFeatureSection> =\n      CharacterSheetSections.buildFeaturesSections(\n        races,\n        backgrounds,\n        classes,\n        feats,\n        {\n          canCreate: true,\n        }\n      );\n\n    // Section favorite features\n    const favoriteFeatures: Record<string, CharacterFeatureSection> =\n      CharacterSheetSections.buildFeaturesSections(\n        favorites.races,\n        favorites.backgrounds,\n        favorites.classes,\n        favorites.feats,\n        { canCreate: false }\n      );\n\n    // Apply sections to their section lists\n\n    context.inventory = Object.values(inventory);\n\n    context.spellbook = spellbook;\n\n    context.features = Object.values(features);\n\n    context.favorites = [\n      ...Object.values(favoriteInventory)\n        .filter((i) => i.items.length)\n        .map((i) => ({\n          ...i,\n          type: CONSTANTS.TAB_CHARACTER_INVENTORY,\n        })),\n      ...Object.values(favoriteFeatures)\n        .filter((i) => i.items.length)\n        .map((i) => ({\n          ...i,\n          type: CONSTANTS.TAB_CHARACTER_FEATURES,\n        })),\n      ...favoriteSpellbook\n        .filter((s: SpellbookSection) => s.spells.length)\n        .map((s: SpellbookSection) => ({\n          ...s,\n          type: CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n        })),\n    ];\n\n    context.preparedSpells = nPrepared;\n  }\n\n  private _getFavoritesIdMap(): Map<string, CharacterFavorite> {\n    return this.actor.system.favorites.reduce(\n      (map: Map<string, CharacterFavorite>, f: CharacterFavorite) => {\n        map.set(f.id, f);\n        return map;\n      },\n      new Map<string, CharacterFavorite>()\n    );\n  }\n\n  /**\n   * A helper method to establish the displayed preparation state for an item.\n   * @param {Item5e} item     Item being prepared for display.\n   * @param {object} context  Context data for display.\n   * @protected\n   */\n  protected _prepareItem(item: Item5e, context: CharacterItemContext) {\n    if (item.type === CONSTANTS.ITEM_TYPE_SPELL) {\n      const prep = item.system.preparation || {};\n      const isAlways = prep.mode === 'always';\n      const isPrepared = !!prep.prepared;\n      context.toggleClass = isPrepared ? 'active' : '';\n      if (isAlways) {\n        context.toggleClass = 'fixed';\n        context.toggleTitle = CONFIG.DND5E.spellPreparationModes.always.label;\n      } else if (isPrepared) {\n        context.toggleTitle = CONFIG.DND5E.spellPreparationModes.prepared.label;\n      } else {\n        context.toggleTitle = game.i18n.localize('DND5E.SpellUnprepared');\n      }\n\n      if (this._concentration.items.has(item)) {\n        context.concentration = true;\n      }\n    } else {\n      const isActive = !!item.system.equipped;\n      context.toggleClass = isActive ? 'active' : '';\n      context.toggleTitle = game.i18n.localize(\n        isActive ? 'DND5E.Equipped' : 'DND5E.Unequipped'\n      );\n      context.canToggle = 'equipped' in item.system;\n    }\n  }\n\n  private async setExpandedItemData() {\n    this.expandedItemData.clear();\n    for (const id of this.expandedItems.keys()) {\n      const item = this.actor.items.get(id);\n      if (item) {\n        this.expandedItemData.set(\n          id,\n          await item.getChatData({ secrets: this.actor.isOwner })\n        );\n      }\n    }\n  }\n\n  onToggleAbilityProficiency(event: Event) {\n    return this._onToggleAbilityProficiency(event);\n  }\n\n  onShortRest(event: Event) {\n    return this._onShortRest(event);\n  }\n\n  onLongRest(event: Event) {\n    return this._onLongRest(event);\n  }\n\n  async _onDropSingleItem(itemData: any) {\n    // Create a Consumable spell scroll on the Inventory tab\n    if (\n      itemData.type === CONSTANTS.ITEM_TYPE_SPELL &&\n      this.currentTabId === CONSTANTS.TAB_CHARACTER_INVENTORY\n    ) {\n      const options: Record<string, unknown> = {};\n\n      if (SettingsProvider.settings.includeFlagsInSpellScrollCreation.get()) {\n        options.flags = itemData.flags;\n      }\n\n      const scroll = await dnd5e.documents.Item5e.createScrollFromSpell(\n        itemData,\n        options\n      );\n\n      return scroll.toObject();\n    }\n\n    return super._onDropSingleItem(itemData);\n  }\n\n  close(options: unknown = {}) {\n    this._destroySvelteComponent();\n    this.subscriptionsService.unsubscribeAll();\n    return super.close(options);\n  }\n\n  submit(): void {\n    super.submit();\n  }\n\n  async _onSubmit(...args: any[]) {\n    await super._onSubmit(...args);\n    this.stats.update((stats) => {\n      stats.lastSubmissionTime = new Date();\n      return stats;\n    });\n  }\n\n  private _renderMutex = new AsyncMutex();\n  async _render(force?: boolean, options = {}) {\n    if (typeof options !== 'object') {\n      options = {};\n    }\n    await this._renderMutex.lock(async () => {\n      await this._renderSheet(force, options);\n    });\n  }\n\n  private async _renderSheet(force?: boolean, options = {}) {\n    await this.setExpandedItemData();\n    const data = await this.getData();\n    SheetSections.accountForExternalSections(\n      ['actions', 'favorites', 'inventory', 'spellbook', 'features'],\n      data\n    );\n    this.context.set(data);\n\n    if (force) {\n      const { width, height } =\n        SheetPreferencesService.getByType(this.actor.type) ?? {};\n      this.position = {\n        ...this.position,\n        width: width ?? this.position.width,\n        height: height ?? this.position.height,\n      };\n\n      this._saveScrollPositions(this.element);\n      this._destroySvelteComponent();\n      await super._render(force, options);\n      applySheetAttributesToWindow(\n        this.actor.documentName,\n        this.actor.type,\n        SettingsProvider.settings.colorScheme.get(),\n        this.element.get(0)\n      );\n      await this.renderCustomContent({ data, isFullRender: true });\n      TidyHooks.tidy5eSheetsRenderActorSheet(\n        this,\n        this.element.get(0),\n        data,\n        true\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n      blurUntabbableButtonsOnClick(this.element);\n      return;\n    }\n\n    await maintainCustomContentInputFocus(this, async () => {\n      applyTitleToWindow(this.title, this.element.get(0));\n      await this.renderCustomContent({ data, isFullRender: false });\n      TidyHooks.tidy5eSheetsRenderActorSheet(\n        this,\n        this.element.get(0),\n        data,\n        false\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n    });\n  }\n\n  private async renderCustomContent(args: {\n    data: CharacterSheetContext;\n    isFullRender: boolean;\n  }) {\n    await CustomContentRenderer.render({\n      app: this,\n      customContent: args.data.customContent,\n      data: args.data,\n      element: this.element,\n      isFullRender: args.isFullRender,\n      superActivateListeners: super.activateListeners,\n      tabs: args.data.tabs,\n    });\n  }\n\n  _getHeaderButtons() {\n    const buttons = super._getHeaderButtons();\n    return FoundryAdapter.removeConfigureSettingsButtonWhenLockedForNonGm(\n      buttons\n    );\n  }\n\n  _destroySvelteComponent() {\n    this.component?.$destroy();\n    this.component = undefined;\n  }\n\n  _saveScrollPositions(html: any) {\n    if (html.length && this.component) {\n      const save = super._saveScrollPositions(html);\n      debug('Saved scroll positions', this._scrollPositions);\n      return save;\n    }\n  }\n\n  _disableFields(...args: any[]) {\n    debug('Ignoring call to disable fields. Delegating to Tidy Sheets...');\n  }\n\n  _onResize(event: any) {\n    super._onResize(event);\n    const { width, height } = this.position;\n    SheetPreferencesService.setDocumentTypePreference(\n      this.actor.type,\n      'width',\n      width\n    );\n    SheetPreferencesService.setDocumentTypePreference(\n      this.actor.type,\n      'height',\n      height\n    );\n  }\n\n  async _onDrop(event: DragEvent & { target: HTMLElement }) {\n    if (!event.target.closest('[data-tidy-favorites]'))\n      return super._onDrop(event);\n    const dragData = event.dataTransfer?.getData('text/plain');\n    if (!dragData) return super._onDrop(event);\n    let data;\n    try {\n      data = JSON.parse(dragData);\n    } catch (e) {\n      console.error(e);\n      return;\n    }\n\n    let type = 'item' as const;\n    let id = (await fromUuid(data.uuid)).getRelativeUUID(this.actor);\n\n    return this._onDropFavorite(event, { type, id });\n  }\n\n  /* -------------------------------------------- */\n  /* Favorites\n  /* -------------------------------------------- */\n\n  /**\n   * Handle an owned item or effect being dropped in the favorites area.\n   * @param {PointerEvent} event         The triggering event.\n   * @param {ActorFavorites5e} favorite  The favorite that was dropped.\n   * @returns {Promise<Actor5e>|void}\n   * @protected\n   */\n  async _onDropFavorite(\n    event: DragEvent & { target: HTMLElement },\n    favorite: UnsortedCharacterFavorite\n  ) {\n    if (this.actor.system.hasFavorite(favorite.id))\n      return await this._onSortFavorites(event, favorite.id);\n    // If we don't own the item, handle onDrop and then turn around and add it as a favorite?\n    return await this.actor.system.addFavorite(favorite);\n  }\n\n  /**\n   * Handle re-ordering the favorites list.\n   * @param {DragEvent} event  The drop event.\n   * @param {string} srcId     The identifier of the dropped favorite.\n   * @returns {Promise<Actor5e>|void}\n   * @protected\n   */\n  async _onSortFavorites(\n    event: DragEvent & { target: HTMLElement },\n    srcId: string\n  ) {\n    const targetId = event.target\n      ?.closest('[data-favorite-id]')\n      ?.getAttribute('data-favorite-id');\n    if (!targetId) return;\n    let source;\n    let target;\n    if (srcId === targetId) return;\n    const siblings = this.actor.system.favorites.filter(\n      (f: CharacterFavorite) => {\n        if (f.id === targetId) target = f;\n        else if (f.id === srcId) source = f;\n        return f.id !== srcId;\n      }\n    );\n    const updates = SortingHelpers.performIntegerSort(source, {\n      target,\n      siblings,\n    });\n    const favorites = this.actor.system.favorites.reduce(\n      (map: Map<string, CharacterFavorite>, f: CharacterFavorite) =>\n        map.set(f.id, { ...f }),\n      new Map<string, CharacterFavorite>()\n    );\n    for (const { target, update } of updates) {\n      const favorite = favorites.get(target.id);\n      foundry.utils.mergeObject(favorite, update);\n    }\n    return await this.actor.update({\n      'system.favorites': Array.from(favorites.values()),\n    });\n  }\n\n  /* -------------------------------------------- */\n  /* SheetTabCacheable\n  /* -------------------------------------------- */\n\n  onTabSelected(tabId: string) {\n    this.currentTabId = tabId;\n  }\n\n  /* -------------------------------------------- */\n  /* SheetExpandedItemsCacheable\n  /* -------------------------------------------- */\n\n  onItemToggled(itemId: string, isVisible: boolean, location: string) {\n    const locationSet =\n      this.expandedItems.get(itemId) ??\n      this.expandedItems.set(itemId, new Set<string>()).get(itemId);\n\n    if (isVisible) {\n      locationSet?.add(location);\n    } else {\n      locationSet?.delete(location);\n    }\n\n    debug('Item Toggled', {\n      expandedItems: this.expandedItems,\n    });\n  }\n\n  /* -------------------------------------------- */\n  /* SearchFilterCacheable\n  /* -------------------------------------------- */\n\n  onSearch(location: string, text: string): void {\n    debug('Searched', {\n      location,\n      text,\n    });\n    this.searchFilters.set(location, text);\n  }\n}\n\nfunction getActorClassesToImages(actor: Actor5e): Record<string, string> {\n  let actorClassesToImages: Record<string, string> = {};\n  for (let item of actor.items) {\n    if (item.type == CONSTANTS.ITEM_TYPE_CLASS) {\n      let className = item.name.toLowerCase();\n      let classImg = item.img;\n      actorClassesToImages[className] = classImg;\n    }\n  }\n  return actorClassesToImages;\n}\n","<script lang=\"ts\">\n  import HpBar from 'src/components/bar/HpBar.svelte';\n  import ResourceWithBar from 'src/components/bar/ResourceWithBar.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"portrait-hp\" title={localize('DND5E.HitPoints')}>\n  <ResourceWithBar\n    document={$context.actor}\n    value={$context.system.attributes.hp.value}\n    valueField=\"system.attributes.hp.value\"\n    valueTitle={localize('DND5E.HitPointsCurrent')}\n    valueDisabled={!$context.editable}\n    max={$context.system.attributes.hp.max}\n    maxField=\"system.attributes.hp.max\"\n    maxTitle={localize('DND5E.HitPointsMax')}\n    maxDisabled={!$context.editable ||\n      $context.system.details.level ||\n      $context.lockHpMaxChanges ||\n      $context.lockSensitiveFields}\n    percentage={$context.healthPercentage}\n    Bar={$settingStore.useHpBarNpc ? HpBar : null}\n  />\n</div>\n\n<style lang=\"scss\">\n  .portrait-hp {\n    border-radius: 0.3125rem;\n    position: absolute;\n    width: 8.5rem;\n    left: 50%;\n    height: 1.25rem;\n    font-size: 1.125rem;\n    transform: translateX(-50%);\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-family: var(--t5e-title-font-family);\n\n    :global(.resource-value),\n    :global(.resource-max) {\n      font-weight: 700;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"rest-container\"\n  class:has-rounded-portrait={$context.useRoundedPortraitStyle}\n  title={localize('TIDY5E.RestHint')}\n>\n  <div class=\"resting\">\n    <span class=\"resting-icon\">\n      <i class=\"rest-icon fas fa-bed\" />\n    </span>\n    <button\n      type=\"button\"\n      class=\"rest short-rest inline-icon-button\"\n      title={localize('TIDY5E.ShortRest')}\n      on:click={(ev) => $context.shortRest(ev)}\n      disabled={!$context.editable}\n      tabindex={!$settingStore.useDefaultSheetHpTabbing &&\n      $settingStore.useAccessibleKeyboardSupport\n        ? 0\n        : -1}\n    >\n      <i class=\"fas fa-hourglass-half\" />\n    </button>\n    <button\n      type=\"button\"\n      class=\"rest long-rest inline-icon-button\"\n      title={localize('TIDY5E.LongRest')}\n      on:click={(ev) => $context.longRest(ev)}\n      disabled={!$context.editable}\n      tabindex={!$settingStore.useDefaultSheetHpTabbing &&\n      $settingStore.useAccessibleKeyboardSupport\n        ? 0\n        : -1}\n    >\n      <i class=\"fas fa-hourglass-end\" />\n    </button>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .rest-container {\n    display: block;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n  }\n\n  .resting {\n    width: 1.5rem;\n    height: 1.25rem;\n    border-radius: 0 0 0 0.3125rem;\n    overflow: hidden;\n    transition: width 0.3s ease;\n    background: var(--t5e-icon-background);\n    display: flex;\n    box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n    border: 0.0625rem solid var(--t5e-icon-outline-color);\n    color: var(--t5e-icon-font-color);\n\n    &:hover,\n    &:focus-within {\n      width: 5.875rem;\n    }\n\n    .rest {\n      flex: 0 0 1.875rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 1.875rem;\n      height: 1.125rem;\n      border-radius: 50%;\n      cursor: pointer;\n      border: none;\n      color: var(--t5e-tertiary-color);\n      padding: 0;\n      font-size: 0.75rem;\n      line-height: 1.125rem;\n      font-family: var(--t5e-body-font-family);\n      font-weight: 700;\n      transition:\n        color 0.3s ease,\n        transform 0.3s ease;\n\n      &:hover,\n      &:focus-within {\n        color: var(--t5e-primary-font-color);\n      }\n    }\n\n    .resting-icon {\n      flex: 0 0 1.5rem;\n      display: flex;\n\n      width: 1.5rem;\n      height: 1.125rem;\n      margin-right: 0.5rem;\n      justify-content: center;\n      align-items: center;\n      border-radius: 0;\n      font-size: 0.75rem;\n      color: var(--t5e-primary-font-color);\n    }\n  }\n\n  .rest-container.has-rounded-portrait {\n    left: 0.4375rem;\n    bottom: 0;\n\n    .resting {\n      border-radius: 0.3125rem 0 0 0.3125rem;\n      transition: all 0.3s ease;\n    }\n\n    .resting:not(:is(:hover, :focus-within)) {\n      background: transparent;\n      box-shadow: none;\n      border-color: transparent;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { debug } from 'src/utils/logging';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import { settingStore } from 'src/settings/settings';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  async function rollNpcHp(event: Event) {\n    event.preventDefault();\n\n    const formula = $context.actor.system.attributes.hp.formula;\n    if (!formula) return;\n    const roll_hp = await FoundryAdapter.roll(formula, undefined, {\n      async: true,\n    });\n    const hp = roll_hp.total;\n    FoundryAdapter.playDiceSound();\n    $context.actor.update({\n      'system.attributes.hp.value': hp,\n      'system.attributes.hp.max': hp,\n    });\n  }\n\n  function calcAverageHitDie(event: Event) {\n    event.preventDefault();\n\n    let formula = $context.actor.system.attributes.hp.formula;\n    debug(`tidy5e-npc | activateListeners | formula: ${formula}`);\n    const average = FoundryAdapter.calculateAverageFromFormula(formula);\n\n    $context.actor.update({\n      ['system.attributes.hp.value']: average,\n      ['system.attributes.hp.max']: average,\n    });\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"portrait-hp-formula health\" title={localize('DND5E.HPFormula')}>\n  <button\n    type=\"button\"\n    title=\"{localize('DND5E.HitDiceRoll')}/{localize(\n      'TIDY5E.HitDiceRollAverage',\n    )}\"\n    on:click={rollNpcHp}\n    on:contextmenu={calcAverageHitDie}\n    class=\"roll-hp-formula highlight-on-hover\"\n    tabindex={!$settingStore.useDefaultSheetHpTabbing &&\n    $settingStore.useAccessibleKeyboardSupport\n      ? 0\n      : -1}\n  >\n    <i class=\"fas fa-dice-six\" />\n  </button>\n</div>\n\n<style lang=\"scss\">\n  .health {\n    position: absolute;\n    right: 0.4375rem;\n    bottom: 0rem;\n\n    .roll-hp-formula {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 1.25rem;\n      width: 1.375rem;\n      border-radius: 0 0.3125rem 0.3125rem 0;\n      border: none;\n      padding: 0;\n      background: none;\n      transition: color 0.3s ease;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import DeathSaves from 'src/sheets/actor/DeathSaves.svelte';\n  import ExhaustionTracker from 'src/sheets/actor/ExhaustionTracker.svelte';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import NpcHitPoints from './NpcHitPoints.svelte';\n  import TempHp from 'src/sheets/actor/TempHp.svelte';\n  import NpcRest from './NpcRest.svelte';\n  import NpcHealthFormulaRoller from './NpcHealthFormulaRoller.svelte';\n  import ActorProfile from 'src/sheets/actor/ActorProfile.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import ExhaustionInput from 'src/sheets/actor/ExhaustionInput.svelte';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: incapacitated =\n    ($context.actor?.system?.attributes?.hp?.value ?? 0) <= 0 &&\n    $context.actor?.system?.attributes?.hp?.max !== 0;\n\n  async function onLevelSelected(event: CustomEvent<{ level: number }>) {\n    await $context.actor.update({\n      'system.attributes.exhaustion': event.detail.level,\n    });\n  }\n</script>\n\n<ActorProfile useHpOverlay={$settingStore.useHpOverlayNpc}>\n  {#if incapacitated && (!$settingStore.hideDeathSavesFromPlayers || FoundryAdapter.userIsGm())}\n    <DeathSaves\n      successes={$context.system.attributes.death.success}\n      failures={$context.system.attributes.death.failure}\n      successesField=\"system.attributes.death.success\"\n      failuresField=\"system.attributes.death.failure\"\n      on:rollDeathSave={(event) =>\n        $context.actor.rollDeathSave({ event: event.detail.mouseEvent })}\n      hasHpOverlay={$settingStore.useHpOverlayNpc}\n    />\n  {/if}\n  {#if $settingStore.useExhaustion && $settingStore.exhaustionConfig.type === 'specific'}\n    <ExhaustionTracker\n      level={$context.system.attributes.exhaustion}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-left'}\n      on:levelSelected={onLevelSelected}\n      exhaustionConfig={$settingStore.exhaustionConfig}\n      isActiveEffectApplied={ActiveEffectsHelper.isActiveEffectAppliedToField(\n        $context.actor,\n        'system.attributes.exhaustion',\n      )}\n    />\n  {:else if $settingStore.useExhaustion && $settingStore.exhaustionConfig.type === 'open'}\n    <ExhaustionInput\n      level={$context.system.attributes.exhaustion}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-left'}\n      on:levelSelected={onLevelSelected}\n      isActiveEffectApplied={ActiveEffectsHelper.isActiveEffectAppliedToField(\n        $context.actor,\n        'system.attributes.exhaustion',\n      )}\n    />\n  {/if}\n\n  <NpcHitPoints />\n  <NpcRest />\n  {#if !$context.system.details.level}\n    <NpcHealthFormulaRoller />\n  {/if}\n</ActorProfile>\n<TempHp />\n","<script lang=\"ts\">\n  export let delimiter: string = '<span>&#8226;</span>';\n  export let cssClass: string | null = null;\n\n  let dynamicStyles: string = '';\n\n  function contentWithGridStyles(node: HTMLElement) {\n    const childrenEntries = Array.from(node.children).entries();\n\n    for (let [index, el] of childrenEntries) {\n      var div = document.createElement('div');\n      div.innerHTML = delimiter;\n\n      if (index > 0 && div.firstChild) {\n        node.insertBefore(div.firstChild, el);\n      }\n    }\n\n    const nodesLength = node.children.length;\n    if (nodesLength) {\n      let columns: string[] = [];\n      for (let i = 0; i < nodesLength; i++) {\n        const target = node.children[i];\n        const isContentNode = i % 2 === 0;\n\n        if (isContentNode) {\n          target.classList.add('truncate');\n        }\n\n        const column = isContentNode\n          ? 'minmax(auto, min-content)'\n          : 'min-content';\n        columns.push(column);\n      }\n\n      dynamicStyles = 'grid-template-columns: ' + columns.join(' ');\n    }\n  }\n</script>\n\n<div\n  class=\"delimited-truncated-content {cssClass}\"\n  use:contentWithGridStyles\n  style={dynamicStyles}\n>\n  <slot />\n</div>\n\n<style lang=\"scss\">\n  .delimited-truncated-content {\n    display: grid;\n    gap: 0.25rem;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import { isNil } from 'src/utils/data';\n\n  export let document: any;\n  export let keyPath: string;\n  export let editable: boolean;\n\n  $: source = FoundryAdapter.getProperty<any>(document, keyPath);\n\n  $: text = !isNil(source?.label, '') ? source.label : 'Source';\n  $: usePlaceholder = isNil(source?.label, '');\n</script>\n\n{#if editable}\n  <button\n    type=\"button\"\n    class=\"configure-source inline-transparent-button highlight-on-hover truncate\"\n    class:placeholder={usePlaceholder}\n    on:click={() => FoundryAdapter.renderSourceConfig(document, keyPath)}\n    tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n  >\n    {text}\n  </button>\n{:else}\n  <span\n    class=\"source-label truncate\"\n    title={text}\n    class:placeholder={usePlaceholder}>{text}</span\n  >\n{/if}\n\n<style lang=\"scss\">\n  .source-label,\n  .configure-source {\n    flex: 1;\n    line-height: inherit;\n    height: inherit;\n\n    &.placeholder:not(:hover, :focus-visible) {\n      color: var(--t5e-tertiary-color);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import AllowEditLock from 'src/sheets/actor/AllowEditLock.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import type { NpcSheetContext, DropdownListOption } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import NpcProfile from './parts/NpcProfile.svelte';\n  import ContentEditableFormField from 'src/components/inputs/ContentEditableFormField.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import InlineTextDropdownList from '../../components/inputs/InlineTextDropdownList.svelte';\n  import { formatAsModifier } from 'src/utils/formatting';\n  import DelimitedTruncatedContent from 'src/components/layout/DelimitedTruncatedContent.svelte';\n  import HorizontalLineSeparator from 'src/components/layout/HorizontalLineSeparator.svelte';\n  import ActorMovement from '../actor/ActorMovement.svelte';\n  import ActorHeaderStats from '../actor/ActorHeaderStats.svelte';\n  import ItemInfoCard from 'src/components/item-info-card/ItemInfoCard.svelte';\n  import SheetMenu from '../actor/SheetMenu.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import ActorWarnings from '../actor/ActorWarnings.svelte';\n  import InlineSource from '../shared/InlineSource.svelte';\n  import InlineCreatureType from '../shared/InlineCreatureType.svelte';\n  import ActorOriginSummaryConfigFormApplication from 'src/applications/actor-origin-summary/ActorOriginSummaryConfigFormApplication';\n  import ActorName from '../actor/ActorName.svelte';\n  import SpecialSaves from '../actor/SpecialSaves.svelte';\n\n  let selectedTabId: string;\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: sizes = <DropdownListOption[]>Object.entries(\n    $context.config.actorSizes,\n  ).map(([abbreviation, size]: [string, any]) => ({\n    value: abbreviation,\n    text: size.label,\n  }));\n\n  $: currentSize = <DropdownListOption>{\n    value: $context.system.traits.size,\n    text: $context.config.actorSizes[$context.system.traits.size]?.label,\n  };\n\n  $: abilities = Object.entries<any>($context.abilities);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if $settingStore.itemCardsForNpcs}\n  <ItemInfoCard />\n{/if}\n\n<div class=\"token-link-wrapper {$context.tokenState}\">\n  {#if $context.viewableWarnings.length}\n    <ActorWarnings warnings={$context.viewableWarnings} />\n  {/if}\n  <header>\n    <div class=\"flex-0\">\n      <NpcProfile />\n    </div>\n    <div class=\"flex-grow-1\">\n      <div\n        class=\"actor-name-row flex-row justify-content-space-between align-items-center small-gap\"\n        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n      >\n        {#if $context.tokenState === 'linked'}\n          <i\n            class=\"link-state fas fa-link\"\n            title={localize('TIDY5E.TokenLinked')}\n          />\n        {:else if $context.tokenState === 'unlinked'}\n          <i\n            class=\"link-state fas fa-unlink\"\n            title={localize('TIDY5E.TokenUnlinked')}\n          />\n        {/if}\n\n        <div\n          class=\"actor-name\"\n          data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n        >\n          <ActorName />\n        </div>\n        <div class=\"level-information\">\n          <div class=\"xp\">\n            <span>{$context.system.details.xp.value} XP</span>\n          </div>\n          <div class=\"level\">\n            {localize('DND5E.AbbreviationCR')}\n            <ContentEditableFormField\n              element=\"span\"\n              editable={!$context.lockSensitiveFields}\n              document={$context.actor}\n              field=\"system.details.cr\"\n              placeholder=\"0\"\n              dataMaxLength={4}\n              value={$context.labels.cr}\n              saveAs=\"number\"\n              selectOnFocus={true}\n            />\n          </div>\n          <SheetMenu defaultSettingsTab={CONSTANTS.TAB_USER_SETTINGS_NPCS} />\n        </div>\n      </div>\n      <HorizontalLineSeparator borderColor=\"light\" />\n      <div class=\"origin-summary\">\n        <div class=\"flex-row extra-small-gap\">\n          {#if $context.editable}\n            <InlineTextDropdownList\n              options={sizes}\n              selected={currentSize}\n              on:optionClicked={(event) =>\n                $context.actor.update({\n                  'system.traits.size': event.detail.value,\n                })}\n              title={localize('DND5E.Size')}\n            />\n          {:else}\n            <span title={localize('DND5E.Size')}>{currentSize.text}</span>\n          {/if}\n          <span>&#8226;</span>\n          {#key $context.lockSensitiveFields}\n            <DelimitedTruncatedContent cssClass=\"flex-grow-1\">\n              <span class=\"flex-row extra-small-gap align-items-center\">\n                <InlineCreatureType />\n                <span\n                  class=\"environment\"\n                  title={localize('TIDY5E.EnvironmentTooltip', {\n                    environment: $context.system.details.environment,\n                  })}\n                >\n                  <i class=\"fas fa-tree\" />\n                </span>\n              </span>\n\n              <span\n                class=\"origin-summary-text\"\n                title={$context.system.details.alignment}\n                >{$context.system.details.alignment}</span\n              >\n\n              <InlineSource\n                document={$context.actor}\n                keyPath=\"system.details.source\"\n                editable={$context.unlocked}\n              />\n            </DelimitedTruncatedContent>\n          {/key}\n        </div>\n        <div class=\"flex-row align-items-center extra-small-gap\">\n          <b class=\"proficiency\">\n            {localize('DND5E.Proficiency')}: {formatAsModifier(\n              $context.system.attributes.prof,\n            )}\n          </b>\n          {#if $context.unlocked}\n            <button\n              type=\"button\"\n              class=\"origin-summary-tidy inline-icon-button\"\n              on:click={() =>\n                new ActorOriginSummaryConfigFormApplication(\n                  $context.actor,\n                ).render(true)}\n              title={localize('TIDY5E.OriginSummaryConfig')}\n              tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n            >\n              <i class=\"fas fa-cog\" />\n            </button>\n          {/if}\n        </div>\n      </div>\n      <HorizontalLineSeparator borderColor=\"light\" />\n      <div class=\"flex-row extra-small-gap justify-content-space-between\">\n        <ActorMovement class=\"flex-1\" />\n        {#if $context.hasSpecialSaves}\n          <SpecialSaves />\n        {/if}\n      </div>\n      <HorizontalLineSeparator borderColor=\"light\" />\n      <ActorHeaderStats\n        {abilities}\n        ac={$context.system.attributes.ac}\n        init={$context.system.attributes.init}\n      />\n    </div>\n  </header>\n  <Tabs tabs={$context.tabs} bind:selectedTabId>\n    <svelte:fragment slot=\"tab-end\">\n      {#if $context.editable}\n        <AllowEditLock\n          hint={$settingStore.permanentlyUnlockNpcSheetForGm &&\n          FoundryAdapter.userIsGm()\n            ? localize('TIDY5E.Settings.PermanentlyUnlockNPCSheetForGM.title')\n            : null}\n        />\n      {/if}\n    </svelte:fragment>\n  </Tabs>\n  <section class=\"tidy-sheet-body\">\n    <TabContents tabs={$context.tabs} {selectedTabId} />\n  </section>\n</div>\n\n<style lang=\"scss\">\n  .token-link-wrapper {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n\n    .link-state {\n      padding: 0.25rem 0.1875rem 0.1875rem 0.25rem;\n      margin-top: -0.0625rem;\n      border-radius: 0.3125rem;\n    }\n\n    &.linked {\n      box-shadow: 0 0 0.25rem 0.125rem var(--t5e-linked-accent-color) inset;\n\n      .link-state.fa-link {\n        background: var(--t5e-linked-light-color);\n      }\n    }\n\n    &.unlinked {\n      box-shadow: 0 0 0.25rem 0.125rem var(--t5e-unlinked-accent-color) inset;\n\n      .link-state.fa-unlink {\n        background: var(--t5e-unlinked-light-color);\n      }\n    }\n  }\n\n  header {\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    justify-content: center;\n    padding: 0.625rem 1rem 1rem 1rem;\n    background: var(--t5e-header-background);\n  }\n\n  .level-information {\n    display: flex;\n    flex-direction: row;\n    gap: 0.25rem;\n    align-items: stretch;\n    font-family: var(--t5e-title-font-family);\n    font-weight: 700;\n\n    .xp {\n      font-size: 1rem;\n      margin-right: 0.25rem;\n      color: var(--t5e-secondary-color);\n      white-space: nowrap;\n      align-self: center;\n    }\n    .level {\n      padding: 0.25rem 0.375rem;\n      border-radius: 0.1875rem;\n      background: var(--t5e-faint-color);\n      color: var(--t5e-secondary-color);\n      font-size: 1.25rem;\n      line-height: 1;\n      height: 1.5rem;\n      white-space: nowrap;\n\n      :global(span) {\n        display: inline-block;\n      }\n    }\n    :global(.level [contenteditable]) {\n      color: var(--t5e-secondary-color);\n    }\n  }\n\n  .origin-summary {\n    margin-left: 0.25rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 0.25rem;\n    font-size: 0.75rem;\n    line-height: 1;\n    padding: 0.1875rem 0 0.125rem 0;\n    line-height: 1rem;\n  }\n\n  .actor-name-row {\n    margin-bottom: 0.125rem;\n  }\n\n  .proficiency {\n    white-space: nowrap;\n  }\n</style>\n","<script lang=\"ts\">\n  import RerenderAfterFormSubmission from 'src/components/utility/RerenderAfterFormSubmission.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import SheetEditor from '../../components/editor/SheetEditor.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import LimitedHeader from '../actor/LimitedHeader.svelte';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"limited-npc\">\n  <LimitedHeader rounded={$context.useRoundedPortraitStyle} />\n  <section class=\"tidy-sheet-body\">\n    <div class=\"note-entries\">\n      <RerenderAfterFormSubmission\n        andOnValueChange={$context.system.details.biography.value}\n      >\n        <article class=\"appearance-notes\" use:$context.activateEditors>\n          <div class=\"section-titles biopage\">\n            {localize('DND5E.Appearance')}\n          </div>\n          <SheetEditor\n            content={TidyFlags.appearance.get($context.actor) ?? ''}\n            target={TidyFlags.appearance.prop}\n            editable={$context.editable}\n          />\n        </article>\n        <article class=\"biography-notes\" use:$context.activateEditors>\n          <div class=\"section-titles\">\n            {localize('DND5E.Background')}/{localize('DND5E.Biography')}\n          </div>\n          <SheetEditor\n            content={$context.biographyHTML}\n            target=\"system.details.biography.value\"\n            editable={$context.editable}\n          />\n        </article>\n      </RerenderAfterFormSubmission>\n    </div>\n  </section>\n</div>\n\n<style lang=\"scss\">\n  .limited-npc {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .tidy-sheet-body {\n    flex: 1;\n    margin-right: 1rem;\n\n    .note-entries {\n      height: 100%;\n      display: flex;\n      flex-direction: row;\n      gap: 0.5rem;\n\n      > * {\n        flex: 1;\n        min-width: 0;\n      }\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { NpcSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import NpcSheetFull from './NpcSheetFull.svelte';\n  import NpcSheetLimited from './NpcSheetLimited.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<NpcSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n{#if $context.showLimitedSheet}\n  <NpcSheetLimited />\n{:else}\n  <NpcSheetFull />\n{/if}\n","import { CONSTANTS } from 'src/constants';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { Item5e } from 'src/types/item.types';\nimport type { NpcAbilitySection } from 'src/types/types';\n\nexport class NpcSheetSections {\n  static get abilitiesItemTypes() {\n    return [\n      CONSTANTS.ITEM_TYPE_WEAPON,\n      CONSTANTS.ITEM_TYPE_EQUIPMENT,\n      CONSTANTS.ITEM_TYPE_TOOL,\n      CONSTANTS.ITEM_TYPE_CONTAINER,\n      CONSTANTS.ITEM_TYPE_LOOT,\n      CONSTANTS.ITEM_TYPE_FEAT,\n    ];\n  }\n\n  static applyAbilityToSection(\n    abilities: Record<string, NpcAbilitySection>,\n    feat: Item5e,\n    customSectionOptions: Partial<NpcAbilitySection>\n  ) {\n    const customSectionName = TidyFlags.section.get(feat);\n\n    if (!customSectionName) {\n      return;\n    }\n\n    const customSection: NpcAbilitySection = (abilities[customSectionName] ??= {\n      label: customSectionName,\n      items: [],\n      hasActions: true,\n      key: customSectionName,\n      dataset: {\n        [TidyFlags.section.prop]: customSectionName,\n      },\n      canCreate: true,\n      custom: {\n        section: customSectionName,\n        creationItemTypes: NpcSheetSections.abilitiesItemTypes,\n      },\n      show: true,\n      ...customSectionOptions,\n    });\n\n    customSection.items.push(feat);\n  }\n}\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type {\n  ItemCardStore,\n  NpcSheetContext,\n  SearchFilterCacheable,\n  LocationToSearchTextMap,\n  SheetExpandedItemsCacheable,\n  SheetStats,\n  SheetTabCacheable,\n  ExpandedItemIdToLocationsMap,\n  ExpandedItemData,\n  MessageBus,\n  MessageBusMessage,\n  Utilities,\n  ActiveEffect5e,\n  NpcAbilitySection,\n  ActorInventoryTypes,\n} from 'src/types/types';\nimport { writable } from 'svelte/store';\nimport NpcSheet from './npc/NpcSheet.svelte';\nimport { CONSTANTS } from 'src/constants';\nimport {\n  applySheetAttributesToWindow,\n  applyThemeDataAttributeToWindow,\n  applyTitleToWindow,\n  blurUntabbableButtonsOnClick,\n  maintainCustomContentInputFocus,\n} from 'src/utils/applications';\nimport { debug, error } from 'src/utils/logging';\nimport { SettingsProvider, settingStore } from 'src/settings/settings';\nimport { initTidy5eContextMenu } from 'src/context-menu/tidy5e-context-menu';\nimport { getPercentage } from 'src/utils/numbers';\nimport type { SvelteComponent } from 'svelte';\nimport type { Item5e, ItemChatData } from 'src/types/item.types';\nimport { NpcSheetRuntime } from 'src/runtime/NpcSheetRuntime';\nimport {\n  actorUsesActionFeature,\n  getActorActionSections,\n} from 'src/features/actions/actions';\nimport { isNil } from 'src/utils/data';\nimport { CustomContentRenderer } from './CustomContentRenderer';\nimport { ActorPortraitRuntime } from 'src/runtime/ActorPortraitRuntime';\nimport { calculateSpellAttackAndDc } from 'src/utils/formula';\nimport { CustomActorTraitsRuntime } from 'src/runtime/actor-traits/CustomActorTraitsRuntime';\nimport { ItemTableToggleCacheService } from 'src/features/caching/ItemTableToggleCacheService';\nimport { ItemFilterService } from 'src/features/filtering/ItemFilterService';\nimport { StoreSubscriptionsService } from 'src/features/store/StoreSubscriptionsService';\nimport { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\nimport { AsyncMutex } from 'src/utils/mutex';\nimport { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\nimport { SheetPreferencesRuntime } from 'src/runtime/user-preferences/SheetPreferencesRuntime';\nimport { Tidy5eBaseActorSheet } from './Tidy5eBaseActorSheet';\nimport { SheetSections } from 'src/features/sections/SheetSections';\nimport { NpcSheetSections } from 'src/features/sections/NpcSheetSections';\nimport { DocumentTabSectionConfigApplication } from 'src/applications/section-config/DocumentTabSectionConfigApplication';\nimport { BaseSheetCustomSectionMixin } from './mixins/BaseSheetCustomSectionMixin';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport { TidyHooks } from 'src/foundry/TidyHooks';\nimport { Inventory } from 'src/features/sections/Inventory';\nimport { Container } from 'src/features/containers/Container';\nimport { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\nimport { ConditionsAndEffects } from 'src/features/conditions-and-effects/ConditionsAndEffects';\n\nexport class Tidy5eNpcSheet\n  extends BaseSheetCustomSectionMixin(\n    (object) => object.items,\n    dnd5e.applications.actor.ActorSheet5eNPC\n  )\n  implements\n    SheetTabCacheable,\n    SheetExpandedItemsCacheable,\n    SearchFilterCacheable\n{\n  context = writable<NpcSheetContext>();\n  stats = writable<SheetStats>({\n    lastSubmissionTime: null,\n  });\n  card = writable<ItemCardStore>();\n  currentTabId: string;\n  searchFilters: LocationToSearchTextMap = new Map<string, string>();\n  expandedItems: ExpandedItemIdToLocationsMap = new Map<string, Set<string>>();\n  expandedItemData: ExpandedItemData = new Map<string, ItemChatData>();\n  inlineContainerToggleService = new InlineContainerToggleService();\n  itemTableTogglesCache: ItemTableToggleCacheService;\n  itemFilterService: ItemFilterService;\n  subscriptionsService: StoreSubscriptionsService;\n  messageBus: MessageBus = writable<MessageBusMessage | undefined>();\n\n  /**\n   * The cached concentration information for the character.\n   * @type {{items: Set<Item5e>, effects: Set<ActiveEffect5e>}}\n   * @internal\n   */\n  _concentration: { items: Set<Item5e>; effects: Set<ActiveEffect5e> } = {\n    items: new Set(),\n    effects: new Set(),\n  };\n\n  constructor(...args: any[]) {\n    super(...args);\n\n    this.subscriptionsService = new StoreSubscriptionsService();\n\n    this.itemTableTogglesCache = new ItemTableToggleCacheService({\n      userId: game.user.id,\n      documentId: this.actor.id,\n    });\n\n    this.itemFilterService = new ItemFilterService({}, this.actor);\n\n    this.currentTabId = SettingsProvider.settings.initialNpcSheetTab.get();\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template.hbs');\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      classes: ['tidy5e-sheet', 'sheet', 'actor', CONSTANTS.SHEET_TYPE_NPC],\n      width: 740,\n      height: 810,\n      scrollY: ['[data-tidy-track-scroll-y]', '.scroll-container'],\n    });\n  }\n\n  component: SvelteComponent | undefined;\n  activateListeners(html: { get: (index: 0) => HTMLElement }) {\n    let first = true;\n    this.subscriptionsService.registerSubscriptions(\n      this.itemFilterService.filterData$.subscribe(() => {\n        if (first) return;\n        this.render();\n      }),\n      settingStore.subscribe((s) => {\n        if (first) return;\n        applyThemeDataAttributeToWindow(s.colorScheme, this.element.get(0));\n        this.render();\n      }),\n      this.messageBus.subscribe((m) => {\n        debug('Message bus message received', {\n          app: this,\n          actor: this.actor,\n          message: m,\n        });\n      }),\n      SheetPreferencesRuntime.getStore().subscribe(() => {\n        if (first) return;\n        this.render();\n      })\n    );\n    first = false;\n\n    const node = html.get(0);\n    this.card.set({ sheet: node, item: null, itemCardContentTemplate: null });\n\n    this.component = new NpcSheet({\n      target: node,\n      context: new Map<any, any>([\n        [CONSTANTS.SVELTE_CONTEXT.APP_ID, this.appId],\n        [CONSTANTS.SVELTE_CONTEXT.CONTEXT, this.context],\n        [CONSTANTS.SVELTE_CONTEXT.MESSAGE_BUS, this.messageBus],\n        [CONSTANTS.SVELTE_CONTEXT.STATS, this.stats],\n        [CONSTANTS.SVELTE_CONTEXT.CARD, this.card],\n        [CONSTANTS.SVELTE_CONTEXT.CURRENT_TAB_ID, this.currentTabId],\n        [\n          CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n          this.inlineContainerToggleService,\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.ITEM_FILTER_SERVICE, this.itemFilterService],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_TAB_SELECTED,\n          this.onTabSelected.bind(this),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TOGGLED,\n          this.onItemToggled.bind(this),\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.SEARCH_FILTERS, new Map(this.searchFilters)],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_FILTER,\n          this.itemFilterService.onFilter.bind(this.itemFilterService),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_FILTER_CLEAR_ALL,\n          this.itemFilterService.onFilterClearAll.bind(this.itemFilterService),\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.ON_SEARCH, this.onSearch.bind(this)],\n        [CONSTANTS.SVELTE_CONTEXT.LOCATION, ''],\n        [CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEMS, new Map(this.expandedItems)],\n        [\n          CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEM_DATA,\n          new Map(this.expandedItemData),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ITEM_TABLE_TOGGLES,\n          new Map(this.itemTableTogglesCache.itemTableToggles),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TABLE_TOGGLE,\n          this.itemTableTogglesCache.onItemTableToggle.bind(\n            this.itemTableTogglesCache\n          ),\n        ],\n      ]),\n    });\n\n    initTidy5eContextMenu(this, html);\n  }\n\n  async getData(options = {}) {\n    this._concentration = this.actor.concentration;\n\n    const defaultDocumentContext = await super.getData(this.options);\n\n    Tidy5eBaseActorSheet.applyCommonContext(defaultDocumentContext);\n\n    const npcPreferences = SheetPreferencesService.getByType(this.actor.type);\n\n    const abilitiesSortMode =\n      npcPreferences.tabs?.[CONSTANTS.TAB_NPC_ABILITIES]?.sort ?? 'm';\n\n    const spellbookSortMode =\n      npcPreferences.tabs?.[CONSTANTS.TAB_NPC_SPELLBOOK]?.sort ?? 'm';\n\n    const actionListSortMode =\n      npcPreferences.tabs?.[CONSTANTS.TAB_ACTOR_ACTIONS]?.sort ?? 'm';\n\n    const inventorySortMode =\n      npcPreferences.tabs?.[CONSTANTS.TAB_NPC_INVENTORY]?.sort ?? 'm';\n\n    const unlocked =\n      FoundryAdapter.isActorSheetUnlocked(this.actor) &&\n      defaultDocumentContext.editable;\n\n    const lockSensitiveFields =\n      (!unlocked && SettingsProvider.settings.useTotalSheetLock.get()) ||\n      !defaultDocumentContext.editable;\n\n    let maxPreparedSpellsTotal = 0;\n    try {\n      const formula = TidyFlags.maxPreparedSpells.get(this.actor) ?? '';\n\n      if (formula?.trim() !== '') {\n        const roll = await Roll.create(\n          formula,\n          this.actor.getRollData()\n        ).evaluate();\n        maxPreparedSpellsTotal = roll.total;\n      }\n    } catch (e) {\n      error('Unable to calculate max prepared spells', false, e);\n    }\n\n    const showLegendaryToolbarFlagValue = TidyFlags.showLegendaryToolbar.get(\n      this.actor\n    );\n    const res = this.actor.system.resources;\n    const showLegendaryToolbar =\n      showLegendaryToolbarFlagValue === true ||\n      (showLegendaryToolbarFlagValue === undefined &&\n        ((res.legact?.max ?? 0) > 0 ||\n          (res.legres?.max ?? 0) > 0 ||\n          res.lair?.value === true ||\n          res.lair?.initiative !== null));\n\n    let utilities: Utilities<NpcSheetContext> = {\n      [CONSTANTS.TAB_NPC_ABILITIES]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Commands.ShowLegendaryToolbar'\n            ),\n            iconClass: 'ra ra-player',\n            execute: async () => {\n              await TidyFlags.showLegendaryToolbar.set(this.actor, true);\n            },\n            visible: !showLegendaryToolbar,\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Commands.HideLegendaryToolbar'\n            ),\n            iconClass: 'ra ra-monster-skull',\n            execute: async () => {\n              await TidyFlags.showLegendaryToolbar.set(this.actor, false);\n            },\n            visible: showLegendaryToolbar,\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_NPC_ABILITIES,\n                'sort',\n                'm'\n              );\n            },\n            visible: abilitiesSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_NPC_ABILITIES,\n                'sort',\n                'a'\n              );\n            },\n            visible: abilitiesSortMode === 'm',\n          },\n          {\n            title: 'Spell Pips',\n            iconClass: 'fa-regular fa-circle-dot fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypePreference(\n                this.actor.type,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PREFERENCE,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_VALUE_MAX\n              );\n            },\n            visible:\n              !SettingsProvider.settings.showSpellbookTabNpc.get() &&\n              (npcPreferences?.spellSlotTrackerMode ??\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS) ===\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS,\n          },\n          {\n            title: 'Spell Value/Max',\n            iconClass: 'fa-regular fa-square fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypePreference(\n                this.actor.type,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PREFERENCE,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS\n              );\n            },\n            visible:\n              !SettingsProvider.settings.showSpellbookTabNpc.get() &&\n              npcPreferences?.spellSlotTrackerMode ===\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_VALUE_MAX,\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_NPC_ABILITIES,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_NPC_ABILITIES,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.features,\n                tabId: CONSTANTS.TAB_NPC_ABILITIES,\n                tabTitle: NpcSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_NPC_ABILITIES\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n      [CONSTANTS.TAB_NPC_SPELLBOOK]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_NPC_SPELLBOOK,\n                'sort',\n                'm'\n              );\n            },\n            visible: spellbookSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_NPC_SPELLBOOK,\n                'sort',\n                'a'\n              );\n            },\n            visible: spellbookSortMode === 'm',\n          },\n          {\n            title: 'Spell Pips',\n            iconClass: 'fa-regular fa-circle-dot fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypePreference(\n                this.actor.type,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PREFERENCE,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_VALUE_MAX\n              );\n            },\n            visible:\n              (npcPreferences?.spellSlotTrackerMode ??\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS) ===\n              CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS,\n          },\n          {\n            title: 'Spell Value/Max',\n            iconClass: 'fa-regular fa-square fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypePreference(\n                this.actor.type,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PREFERENCE,\n                CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS\n              );\n            },\n            visible:\n              npcPreferences?.spellSlotTrackerMode ===\n              CONSTANTS.SPELL_SLOT_TRACKER_MODE_VALUE_MAX,\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_NPC_SPELLBOOK,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_NPC_SPELLBOOK,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.ListLayout'),\n            iconClass: 'fas fa-th-list fa-fw toggle-list',\n            visible: !TidyFlags.spellbookGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.spellbookGrid.set(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.GridLayout'),\n            iconClass: 'fas fa-th-large fa-fw toggle-grid',\n            visible: !!TidyFlags.spellbookGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.spellbookGrid.unset(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.spellbook,\n                tabId: CONSTANTS.TAB_NPC_SPELLBOOK,\n                tabTitle: NpcSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_NPC_SPELLBOOK\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_ACTOR_ACTIONS,\n                'sort',\n                'm'\n              );\n            },\n            visible: actionListSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.SortMode.ActionListDefault'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_ACTOR_ACTIONS,\n                'sort',\n                'a'\n              );\n            },\n            visible: actionListSortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.actions,\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                tabTitle: NpcSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_ACTOR_ACTIONS\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n      [CONSTANTS.TAB_NPC_INVENTORY]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_NPC_INVENTORY,\n                'sort',\n                'm'\n              );\n            },\n            visible: inventorySortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_NPC_INVENTORY,\n                'sort',\n                'a'\n              );\n            },\n            visible: inventorySortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Commands.HideContainerPanel'\n            ),\n            iconClass: `fas fa-boxes-stacked fa-fw`,\n            execute: () => {\n              TidyFlags.showContainerPanel.unset(this.actor);\n            },\n            visible: !!TidyFlags.showContainerPanel.get(this.actor),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Commands.ShowContainerPanel'\n            ),\n            iconClass: `fas fa-box fa-fw`,\n            execute: () => {\n              TidyFlags.showContainerPanel.set(this.actor, true);\n            },\n            visible: !TidyFlags.showContainerPanel.get(this.actor),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_NPC_INVENTORY,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_NPC_INVENTORY,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.ListLayout'),\n            iconClass: 'fas fa-th-list fa-fw toggle-list',\n            visible: !TidyFlags.inventoryGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.inventoryGrid.set(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.GridLayout'),\n            iconClass: 'fas fa-th-large fa-fw toggle-grid',\n            visible: !!TidyFlags.inventoryGrid.get(this.actor),\n            execute: () => {\n              TidyFlags.inventoryGrid.unset(this.actor);\n            },\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.inventory,\n                tabId: CONSTANTS.TAB_NPC_INVENTORY,\n                tabTitle: NpcSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_NPC_INVENTORY\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n    };\n\n    // Effects & Conditions\n    let { conditions, effects: enhancedEffectSections } =\n      await ConditionsAndEffects.getConditionsAndEffects(\n        this.actor,\n        this.object,\n        defaultDocumentContext.effects\n      );\n\n    const context: NpcSheetContext = {\n      ...defaultDocumentContext,\n      actions: await getActorActionSections(this.actor),\n      activateEditors: (node, options) =>\n        FoundryAdapter.activateEditors(node, this, options?.bindSecrets),\n      actorPortraitCommands:\n        ActorPortraitRuntime.getEnabledPortraitMenuCommands(this.actor),\n      allowEffectsManagement: true,\n      appearanceEnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.appearance.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      appId: this.appId,\n      biographyEnrichedHtml: await FoundryAdapter.enrichHtml(\n        FoundryAdapter.getProperty<string>(\n          this.actor,\n          `system.details.biography.value`\n        ) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      bondEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.bond,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      conditions: conditions,\n      containerPanelItems: await Inventory.getContainerPanelItems(\n        defaultDocumentContext.items\n      ),\n      customActorTraits: CustomActorTraitsRuntime.getEnabledTraits(\n        defaultDocumentContext\n      ),\n      customContent: await NpcSheetRuntime.getContent(defaultDocumentContext),\n      useClassicControls:\n        SettingsProvider.settings.useClassicControlsForNpc.get(),\n      effects: enhancedEffectSections,\n      editable: defaultDocumentContext.editable,\n      encumbrance: this.actor.system.attributes.encumbrance,\n      filterData: this.itemFilterService.getDocumentItemFilterData(),\n      filterPins: ItemFilterRuntime.defaultFilterPins[this.actor.type],\n      flawEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.flaw,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      hideEmptySpellbook:\n        lockSensitiveFields && defaultDocumentContext.spellbook.length === 0,\n      healthPercentage: getPercentage(\n        this.actor?.system?.attributes?.hp?.value,\n        this.actor?.system?.attributes?.hp?.max\n      ),\n      showSpellbookTab: SettingsProvider.settings.showSpellbookTabNpc.get(),\n      idealEnrichedHtml: await FoundryAdapter.enrichHtml(\n        this.actor.system.details.ideal,\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      showContainerPanel:\n        TidyFlags.showContainerPanel.get(this.actor) === true &&\n        Array.from(defaultDocumentContext.items).some(\n          (i: Item5e) => i.type === CONSTANTS.ITEM_TYPE_CONTAINER\n        ),\n      showLegendaryToolbar: showLegendaryToolbar,\n      lockSensitiveFields: lockSensitiveFields,\n      longRest: this._onLongRest.bind(this),\n      lockExpChanges: FoundryAdapter.shouldLockExpChanges(),\n      lockHpMaxChanges: FoundryAdapter.shouldLockHpMaxChanges(),\n      lockItemQuantity: FoundryAdapter.shouldLockItemQuantity(),\n      lockLevelSelector: FoundryAdapter.shouldLockLevelSelector(),\n      lockMoneyChanges: FoundryAdapter.shouldLockMoneyChanges(),\n      maxPreparedSpellsTotal,\n      notes1EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes1.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notes2EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes2.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notes3EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes3.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notes4EnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes4.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      notesEnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.notes.members.value.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      owner: this.actor.isOwner,\n      preparedSpells: FoundryAdapter.countPreparedSpells(\n        defaultDocumentContext.items\n      ),\n      shortRest: this._onShortRest.bind(this),\n      showLimitedSheet: FoundryAdapter.showLimitedSheet(this.actor),\n      spellCalculations: calculateSpellAttackAndDc(this.actor),\n      spellSlotTrackerMode:\n        npcPreferences.spellSlotTrackerMode ??\n        CONSTANTS.SPELL_SLOT_TRACKER_MODE_PIPS,\n      tabs: [],\n      tokenState: this.#getTokenState(),\n      traitEnrichedHtml: await FoundryAdapter.enrichHtml(\n        TidyFlags.trait.get(this.actor) ?? '',\n        {\n          secrets: this.actor.isOwner,\n          rollData: defaultDocumentContext.rollData,\n          async: true,\n          relativeTo: this.actor,\n        }\n      ),\n      unlocked: unlocked,\n      useActionsFeature: actorUsesActionFeature(this.actor),\n      useRoundedPortraitStyle: [\n        CONSTANTS.CIRCULAR_PORTRAIT_OPTION_ALL as string,\n        CONSTANTS.CIRCULAR_PORTRAIT_OPTION_NPCVEHICLE as string,\n      ].includes(SettingsProvider.settings.useCircularPortraitStyle.get()),\n      utilities: utilities,\n      viewableWarnings:\n        defaultDocumentContext.warnings?.filter(\n          (w: any) => !isNil(w.message?.trim(), '')\n        ) ?? [],\n    };\n\n    for (const panelItem of context.containerPanelItems) {\n      const ctx = context.itemContext[panelItem.container.id];\n      ctx.containerContents = await Container.getContainerContents(\n        panelItem.container\n      );\n    }\n\n    let tabs = await NpcSheetRuntime.getTabs(context);\n\n    const selectedTabs = TidyFlags.selectedTabs.get(context.actor);\n\n    if (selectedTabs?.length) {\n      tabs = tabs\n        .filter((t) => selectedTabs?.includes(t.id))\n        .sort(\n          (a, b) => selectedTabs.indexOf(a.id) - selectedTabs.indexOf(b.id)\n        );\n    } else {\n      const defaultTabs = SettingsProvider.settings.defaultNpcSheetTabs.get();\n      tabs = tabs\n        .filter((t) => defaultTabs?.includes(t.id))\n        .sort((a, b) => defaultTabs.indexOf(a.id) - defaultTabs.indexOf(b.id));\n    }\n\n    context.tabs = tabs;\n\n    TidyHooks.tidy5eSheetsPreConfigureSections(\n      this,\n      this.element.get(0),\n      context\n    );\n\n    debug('NPC Sheet context data', context);\n\n    return context;\n  }\n\n  protected _prepareItems(context: NpcSheetContext) {\n    // Categorize Items as Features and Spells\n    const features: Record<string, NpcAbilitySection> = {\n      [CONSTANTS.NPC_ABILITY_SECTION_WEAPONS]: {\n        label: game.i18n.localize('DND5E.AttackPl'),\n        items: [],\n        hasActions: true,\n        dataset: {\n          type: CONSTANTS.ITEM_TYPE_WEAPON,\n          'system.weaponType': 'natural',\n        },\n        canCreate: true,\n        key: 'weapons',\n        show: true,\n      },\n      [CONSTANTS.NPC_ABILITY_SECTION_ACTIONS]: {\n        label: game.i18n.localize('DND5E.ActionPl'),\n        items: [],\n        hasActions: true,\n        dataset: {\n          type: CONSTANTS.ITEM_TYPE_FEAT,\n          'system.activation.type': 'action',\n        },\n        canCreate: true,\n        key: 'actions',\n        show: true,\n      },\n      [CONSTANTS.NPC_ABILITY_SECTION_PASSIVE]: {\n        label: game.i18n.localize('DND5E.Features'),\n        items: [],\n        dataset: { type: CONSTANTS.ITEM_TYPE_FEAT },\n        canCreate: true,\n        key: 'passive',\n        show: true,\n      },\n      [CONSTANTS.NPC_ABILITY_SECTION_EQUIPMENT]: {\n        label: game.i18n.localize('DND5E.Inventory'),\n        items: [],\n        dataset: { type: CONSTANTS.ITEM_TYPE_LOOT },\n        canCreate: true,\n        key: 'equipment',\n        show: true,\n      },\n      [CONSTANTS.NPC_ABILITY_SECTION_CLASSES]: {\n        label: `${CONFIG.Item.typeLabels.class}Pl`,\n        items: [],\n        dataset: { type: CONSTANTS.ITEM_TYPE_CLASS },\n        canCreate: true,\n        key: 'classes',\n        show: true,\n        isClass: true,\n      },\n    };\n\n    // Start by classifying items into groups for rendering\n    let { spells, classes, subclasses, other } = context.items.reduce<{\n      spells: Item5e[];\n      classes: Item5e[];\n      subclasses: Item5e[];\n      other: Item5e[];\n    }>(\n      (features, item) => {\n        const { quantity, uses, target } = item.system;\n        const ctx = (context.itemContext[item.id] ??= {});\n        ctx.attunement = FoundryAdapter.getAttunementContext(item);\n        ctx.isStack = Number.isNumeric(quantity) && quantity !== 1;\n        ctx.hasUses = uses && uses.max > 0;\n        ctx.hasTarget = !!target && !['none', ''].includes(target.type);\n        ctx.canToggle = 'equipped' in item.system;\n\n        ctx.totalWeight = item.system.totalWeight?.toNearest(0.1);\n        if (item.type === CONSTANTS.ITEM_TYPE_SPELL) {\n          if (this._concentration.items.has(item)) {\n            ctx.concentration = true;\n          }\n          features.spells.push(item);\n        } else if (item.type === CONSTANTS.ITEM_TYPE_CLASS) {\n          features.classes.push(item);\n        } else if (item.type === CONSTANTS.ITEM_TYPE_SUBCLASS) {\n          features.subclasses.push(item);\n        } else {\n          features.other.push(item);\n        }\n        return features;\n      },\n      { spells: [], subclasses: [], classes: [], other: [] }\n    );\n\n    classes = SheetSections.prepareClassItems(\n      context,\n      classes,\n      subclasses,\n      this.actor\n    );\n\n    for (const subclass of subclasses) {\n      const message = game.i18n.format('DND5E.SubclassMismatchWarn', {\n        name: subclass.name,\n        class: subclass.system.classIdentifier,\n      });\n      context.warnings.push({ message, type: 'warning' });\n    }\n\n    other = [...other, ...subclasses];\n\n    features.classes.items = classes;\n\n    const inventoryTypesArray = Inventory.getDefaultInventoryTypes();\n    const inventoryTypes = new Set(inventoryTypesArray);\n    const inventory: ActorInventoryTypes =\n      Inventory.getDefaultInventorySections();\n\n    // Organize Features\n    for (let item of other) {\n      if (inventoryTypes.has(item.type)) {\n        Inventory.applyInventoryItemToSection(\n          inventory,\n          item,\n          inventoryTypesArray,\n          {\n            canCreate: true,\n          }\n        );\n      }\n      // Handle custom section, if present\n      if (TidyFlags.section.get(item)) {\n        NpcSheetSections.applyAbilityToSection(features, item, {\n          canCreate: true,\n        });\n      } else if (item.type === CONSTANTS.ITEM_TYPE_WEAPON)\n        features.weapons.items.push(item);\n      else if (\n        [\n          CONSTANTS.ITEM_TYPE_BACKGROUND,\n          CONSTANTS.ITEM_TYPE_CLASS,\n          CONSTANTS.ITEM_TYPE_FEAT,\n          CONSTANTS.ITEM_TYPE_RACE,\n          CONSTANTS.ITEM_TYPE_SUBCLASS,\n        ].includes(item.type)\n      ) {\n        if (item.system.activation?.type) {\n          features.actions.items.push(item);\n        } else {\n          // TODO: Partition classes/subclasses to their own area; this may have to happen in the original partition of the spells / other arrays.\n          features.passive.items.push(item);\n        }\n      } else features.equipment.items.push(item);\n    }\n\n    // Organize Spellbook\n    // Section spells\n    // TODO: Take over `_prepareSpellbook` and have custom sectioning built right in\n    const spellbook = SheetSections.prepareTidySpellbook(\n      context,\n      spells,\n      {\n        canCreate: true,\n      },\n      this\n    );\n\n    context.features = Object.values(features);\n    context.spellbook = spellbook;\n    context.inventory = Object.values(inventory);\n  }\n\n  private async setExpandedItemData() {\n    this.expandedItemData.clear();\n    for (const id of this.expandedItems.keys()) {\n      const item = this.actor.items.get(id);\n      if (item) {\n        this.expandedItemData.set(\n          id,\n          await item.getChatData({ secrets: this.actor.isOwner })\n        );\n      }\n    }\n  }\n\n  onToggleAbilityProficiency(event: Event) {\n    return this._onToggleAbilityProficiency(event);\n  }\n\n  #getTokenState(): 'linked' | 'unlinked' | null {\n    const { token } = this;\n\n    const showNpcActorLinkMarker =\n      SettingsProvider.settings.showNpcActorLinkMarker.get();\n\n    if (!token) {\n      return null;\n    }\n\n    if (token.actorLink && showNpcActorLinkMarker == 'both') {\n      return 'linked';\n    }\n\n    if (\n      !token.actorLink &&\n      (showNpcActorLinkMarker == 'unlinked' || showNpcActorLinkMarker == 'both')\n    ) {\n      return 'unlinked';\n    }\n\n    return null;\n  }\n\n  async _onDropSingleItem(itemData: any) {\n    // Create a Consumable spell scroll on the Inventory tab\n    if (\n      itemData.type === CONSTANTS.ITEM_TYPE_SPELL &&\n      this.currentTabId === CONSTANTS.TAB_NPC_INVENTORY\n    ) {\n      const options: Record<string, unknown> = {};\n\n      if (SettingsProvider.settings.includeFlagsInSpellScrollCreation.get()) {\n        options.flags = itemData.flags;\n      }\n\n      const scroll = await dnd5e.documents.Item5e.createScrollFromSpell(\n        itemData,\n        options\n      );\n\n      return scroll.toObject();\n    }\n\n    return super._onDropSingleItem(itemData);\n  }\n\n  private _renderMutex = new AsyncMutex();\n  async _render(force?: boolean, options = {}) {\n    if (typeof options !== 'object') {\n      options = {};\n    }\n    await this._renderMutex.lock(async () => {\n      await this._renderSheet(force, options);\n    });\n  }\n\n  private async _renderSheet(force?: boolean, options = {}) {\n    await this.setExpandedItemData();\n    const data = await this.getData();\n    SheetSections.accountForExternalSections(['features', 'spellbook'], data);\n    this.context.set(data);\n\n    if (force) {\n      const { width, height } =\n        SheetPreferencesService.getByType(this.actor.type) ?? {};\n      this.position = {\n        ...this.position,\n        width: width ?? this.position.width,\n        height: height ?? this.position.height,\n      };\n\n      this._saveScrollPositions(this.element);\n      this._destroySvelteComponent();\n      await super._render(force, options);\n      applySheetAttributesToWindow(\n        this.actor.documentName,\n        this.actor.type,\n        SettingsProvider.settings.colorScheme.get(),\n        this.element.get(0)\n      );\n      await this.renderCustomContent({ data, isFullRender: true });\n      TidyHooks.tidy5eSheetsRenderActorSheet(\n        this,\n        this.element.get(0),\n        data,\n        true\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n      blurUntabbableButtonsOnClick(this.element);\n      return;\n    }\n\n    await maintainCustomContentInputFocus(this, async () => {\n      applyTitleToWindow(this.title, this.element.get(0));\n      await this.renderCustomContent({ data, isFullRender: false });\n      TidyHooks.tidy5eSheetsRenderActorSheet(\n        this,\n        this.element.get(0),\n        data,\n        false\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n    });\n  }\n\n  private async renderCustomContent(args: {\n    data: NpcSheetContext;\n    isFullRender: boolean;\n  }) {\n    await CustomContentRenderer.render({\n      app: this,\n      customContent: args.data.customContent,\n      data: args.data,\n      element: this.element,\n      isFullRender: args.isFullRender,\n      superActivateListeners: super.activateListeners,\n      tabs: args.data.tabs,\n    });\n  }\n\n  _getHeaderButtons() {\n    const buttons = super._getHeaderButtons();\n\n    return FoundryAdapter.removeConfigureSettingsButtonWhenLockedForNonGm(\n      buttons\n    );\n  }\n\n  _destroySvelteComponent() {\n    this.component?.$destroy();\n    this.component = undefined;\n  }\n\n  _saveScrollPositions(html: any) {\n    if (html.length && this.component) {\n      const save = super._saveScrollPositions(html);\n      debug('Saved scroll positions', this._scrollPositions);\n      return save;\n    }\n  }\n\n  /**\n   * Take a short rest, calling the relevant function on the Actor instance.\n   * @param {Event} event             The triggering click event.\n   * @returns {Promise<RestResult>}  Result of the rest action.\n   */\n  async _onShortRest(event: Event) {\n    event.preventDefault();\n    await this._onSubmit(event);\n    return this.actor.shortRest({\n      chat: SettingsProvider.settings.showNpcRestInChat.get(),\n    });\n  }\n\n  /**\n   * Take a long rest, calling the relevant function on the Actor instance\n   * @param {Event} event   The triggering click event\n   * @private\n   */\n  async _onLongRest(event: Event) {\n    event.preventDefault();\n    await this._onSubmit(event);\n    return this.actor.longRest({\n      chat: SettingsProvider.settings.showNpcRestInChat.get(),\n    });\n  }\n\n  async _onSubmit(...args: any[]) {\n    await super._onSubmit(...args);\n    this.stats.update((stats) => {\n      stats.lastSubmissionTime = new Date();\n      return stats;\n    });\n  }\n\n  close(options: unknown = {}) {\n    this._destroySvelteComponent();\n    this.subscriptionsService.unsubscribeAll();\n    return super.close(options);\n  }\n\n  _disableFields(...args: any[]) {\n    debug('Ignoring call to disable fields. Delegating to Tidy Sheets...');\n  }\n\n  _onResize(event: any) {\n    super._onResize(event);\n    const { width, height } = this.position;\n    SheetPreferencesService.setDocumentTypePreference(\n      this.actor.type,\n      'width',\n      width\n    );\n    SheetPreferencesService.setDocumentTypePreference(\n      this.actor.type,\n      'height',\n      height\n    );\n  }\n\n  /* -------------------------------------------- */\n  /* SheetTabCacheable\n  /* -------------------------------------------- */\n\n  onTabSelected(tabId: string) {\n    this.currentTabId = tabId;\n  }\n\n  /* -------------------------------------------- */\n  /* SheetExpandedItemsCacheable\n  /* -------------------------------------------- */\n\n  onItemToggled(itemId: string, isVisible: boolean, location: string) {\n    const locationSet =\n      this.expandedItems.get(itemId) ??\n      this.expandedItems.set(itemId, new Set<string>()).get(itemId);\n\n    if (isVisible) {\n      locationSet?.add(location);\n    } else {\n      locationSet?.delete(location);\n    }\n\n    debug('Item Toggled', {\n      expandedItems: this.expandedItems,\n    });\n  }\n\n  /* -------------------------------------------- */\n  /* SearchFilterCacheable\n  /* -------------------------------------------- */\n\n  onSearch(location: string, text: string): void {\n    debug('Searched', {\n      location,\n      text,\n    });\n    this.searchFilters.set(location, text);\n  }\n}\n","<script lang=\"ts\">\n  import HpBar from 'src/components/bar/HpBar.svelte';\n  import ResourceWithBar from 'src/components/bar/ResourceWithBar.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { settingStore } from 'src/settings/settings';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"portrait-hp\" title={localize('DND5E.HitPoints')}>\n  <ResourceWithBar\n    document={$context.actor}\n    value={$context.system.attributes.hp.value}\n    valueField=\"system.attributes.hp.value\"\n    valueTitle={localize('DND5E.HitPointsCurrent')}\n    valueDisabled={!$context.editable}\n    max={$context.system.attributes.hp.max}\n    maxField=\"system.attributes.hp.max\"\n    maxTitle={localize('DND5E.HitPointsMax')}\n    maxDisabled={!$context.editable ||\n      $context.lockHpMaxChanges ||\n      $context.lockSensitiveFields}\n    percentage={$context.healthPercentage}\n    Bar={$settingStore.useHpBarVehicle ? HpBar : null}\n  />\n</div>\n\n<style lang=\"scss\">\n  .portrait-hp {\n    position: absolute;\n    width: 8.5rem;\n    left: 50%;\n    height: 1.25rem;\n    font-size: 1.125rem;\n    transform: translateX(-50%);\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-family: var(--t5e-title-font-family);\n\n    :global(.resource-value),\n    :global(.resource-max) {\n      font-weight: 700;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"profile-thresholds\">\n  <TextInput\n    document={$context.actor}\n    field=\"system.attributes.hp.dt\"\n    cssClass=\"damage-threshold\"\n    placeholder={localize('DND5E.Threshold')}\n    value={$context.system.attributes.hp.dt || null}\n    allowDeltaChanges={true}\n    maxlength={5}\n    title={localize('DND5E.DamageThreshold')}\n    disabled={!$context.editable || $context.lockSensitiveFields}\n  />\n  <TextInput\n    document={$context.actor}\n    field=\"system.attributes.hp.mt\"\n    cssClass=\"mishap-threshold\"\n    placeholder={localize('DND5E.VehicleMishap')}\n    value={$context.system.attributes.hp.mt || null}\n    allowDeltaChanges={true}\n    maxlength={5}\n    title={localize('DND5E.VehicleMishapThreshold')}\n    disabled={!$context.editable || $context.lockSensitiveFields}\n  />\n</div>\n\n<style lang=\"scss\">\n  .profile-thresholds {\n    display: flex;\n    justify-content: center;\n\n    :global(input) {\n      flex: 0 0 4.6875rem; // Or hard width\n      display: flex;\n      font-size: 0.75rem;\n      line-height: 0.75rem;\n      height: 0.875rem;\n      padding: 0.0625rem 0;\n    }\n\n    :global(input.damage-threshold),\n    :global(input.mishap-threshold) {\n      text-align: center;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import { TidyFlags } from 'src/api';\n  import Checkbox from 'src/components/inputs/Checkbox.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type {\n    PortraitCharmRadiusClass,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  export let motion: boolean;\n  export let cssClass: string = '';\n  export let radiusClass: PortraitCharmRadiusClass;\n  export let animate: boolean = true;\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div\n  class=\"motion {cssClass}\"\n  class:is-in-motion={motion}\n  title={localize(\n    motion ? 'TIDY5E.VehicleInMotion' : 'TIDY5E.VehicleMotionless',\n  )}\n>\n  <Checkbox\n    checkboxCssClass=\"motion-toggle\"\n    labelCssClass=\"{motion ? 'motion' : ''} {radiusClass}\"\n    document={$context.actor}\n    field={TidyFlags.motion.prop}\n    checked={motion}\n    disabled={!$context.editable}\n  >\n    <i class=\"motion-icon fas fa-sailboat\" class:animate />\n  </Checkbox>\n</div>\n\n<style lang=\"scss\">\n  .motion {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 2.125rem;\n    height: 2.125rem;\n\n    &.only-show-on-hover {\n      :global(label) {\n        visibility: hidden;\n      }\n\n      &:hover :global(label) {\n        visibility: visible;\n      }\n    }\n\n    :global(input.motion-toggle) {\n      display: none;\n    }\n\n    :global(label) {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.25rem;\n      color: var(--t5e-icon-font-color);\n      cursor: pointer;\n      box-shadow: 0 0 0.625rem var(--t5e-icon-shadow-color) inset;\n      border: 0.0625rem solid var(--t5e-icon-outline-color);\n      background: var(--t5e-icon-background);\n    }\n\n    :global(label i) {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n      text-align: center;\n      line-height: 2.125rem;\n    }\n\n    :global(label:hover) {\n      color: var(--t5e-vehicle-motion-hover-color);\n      text-shadow: 0 0 0.3125rem\n        var(--t5e-vehicle-motion-text-shadow-hover-color);\n    }\n  }\n\n  .is-in-motion {\n    :global(label) {\n      color: var(--t5e-activated-profile-toggle-color);\n      text-shadow: 0 0 0.625rem var(--t5e-vehicle-in-motion-text-shadow-color);\n      background: var(--t5e-vehicle-in-motion-background);\n    }\n\n    :global(label i.animate) {\n      color: var(--t5e-activated-profile-toggle-color);\n      animation: boat 5s linear infinite;\n    }\n  }\n\n  @keyframes boat {\n    0% {\n      transform: rotate(0);\n    }\n    25% {\n      transform: rotate(-3deg) translate(0.0625rem, 0);\n    }\n    50% {\n      transform: rotate(3deg) translate(0.0625rem, 0);\n    }\n    100% {\n      transform: rotate(0);\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import ActorProfile from 'src/sheets/actor/ActorProfile.svelte';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import VehicleHitPoints from './VehicleHitPoints.svelte';\n  import VehicleDamageAndMishapThresholds from './VehicleDamageAndMishapThresholds.svelte';\n  import ExhaustionTracker from 'src/sheets/actor/ExhaustionTracker.svelte';\n  import VehicleMovement from './VehicleMovement.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import ExhaustionInput from 'src/sheets/actor/ExhaustionInput.svelte';\n  import { ActiveEffectsHelper } from 'src/utils/active-effect';\n  import { TidyFlags } from 'src/foundry/TidyFlags';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  function onLevelSelected(event: CustomEvent<{ level: number }>) {\n    TidyFlags.setFlag($context.actor, 'exhaustion', event.detail.level);\n  }\n</script>\n\n<ActorProfile useHpOverlay={$settingStore.useHpOverlayVehicle}>\n  {#if $settingStore.useExhaustion && $settingStore.vehicleExhaustionConfig.type === 'specific'}\n    <ExhaustionTracker\n      level={TidyFlags.exhaustion.get($context.actor) ?? 0}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-left'}\n      on:levelSelected={onLevelSelected}\n      exhaustionConfig={$settingStore.vehicleExhaustionConfig}\n      isActiveEffectApplied={ActiveEffectsHelper.isActiveEffectAppliedToField(\n        $context.actor,\n        TidyFlags.exhaustion.prop,\n      )}\n    />\n  {:else if $settingStore.useExhaustion && $settingStore.vehicleExhaustionConfig.type === 'open'}\n    <ExhaustionInput\n      level={TidyFlags.exhaustion.get($context.actor) ?? 0}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-left'}\n      on:levelSelected={onLevelSelected}\n      isActiveEffectApplied={ActiveEffectsHelper.isActiveEffectAppliedToField(\n        $context.actor,\n        TidyFlags.exhaustion.prop,\n      )}\n    />\n  {/if}\n  {#if $settingStore.useVehicleMotion}\n    <VehicleMovement\n      motion={TidyFlags.motion.get($context.actor) === true}\n      radiusClass={$context.useRoundedPortraitStyle ? 'rounded' : 'top-right'}\n      animate={true}\n    />\n  {/if}\n  <VehicleHitPoints />\n</ActorProfile>\n<VehicleDamageAndMishapThresholds />\n","<script lang=\"ts\">\n  import AcShieldBase from './AcShieldBase.svelte';\n  import TextInput from 'src/components/inputs/TextInput.svelte';\n  import NumberInput from 'src/components/inputs/NumberInput.svelte';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  /**\n   * Optional CSS class list string to apply to the AC Shield container element.\n   */\n  export let cssClass: string = '';\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"vehicle-armor-class-wrapper\">\n  <AcShieldBase cssClass=\"{cssClass} vehicle-ac-shield\">\n    <NumberInput\n      document={$context.actor}\n      field=\"system.attributes.ac.flat\"\n      value={$context.actor.system.attributes.ac.flat}\n      step=\"1\"\n      min=\"0\"\n      placeholder=\"&mdash;\"\n      title={localize('DND5E.ArmorClass')}\n      cssClass=\"armor-class-flat\"\n      selectOnFocus={true}\n      disabled={!$context.editable || $context.lockSensitiveFields}\n    />\n    <TextInput\n      document={$context.actor}\n      field=\"system.attributes.ac.motionless\"\n      value={$context.system.attributes.ac.motionless}\n      placeholder=\"&mdash;\"\n      title={localize('DND5E.ArmorClassMotionless')}\n      cssClass=\"armor-class-motionless\"\n      selectOnFocus={true}\n      disabled={!$context.editable || $context.lockSensitiveFields}\n    />\n  </AcShieldBase>\n</div>\n\n<style lang=\"scss\">\n  .vehicle-armor-class-wrapper {\n    display: flex;\n\n    :global(.armor-class-flat) {\n      flex: 3;\n      font-family: var(--t5e-title-font-family);\n      position: absolute;\n      top: 40%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-size: 2.1875rem;\n      height: 2.5rem;\n      font-weight: 700;\n      margin: 0 auto;\n      width: 3.75rem;\n      text-align: center;\n    }\n\n    :global(.armor-class-motionless) {\n      position: absolute;\n      bottom: 0.375rem;\n      left: 0;\n      width: 100%;\n      font-size: 0.75rem;\n      line-height: 0.875rem;\n      height: 0.875rem;\n      padding: 0.0625rem 0;\n      text-align: center;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type {\n    DropdownListOption,\n    VehicleSheetContext,\n  } from 'src/types/types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import AllowEditLock from 'src/sheets/actor/AllowEditLock.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import VehicleProfile from './parts/VehicleProfile.svelte';\n  import ContentEditableFormField from 'src/components/inputs/ContentEditableFormField.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import HorizontalLineSeparator from 'src/components/layout/HorizontalLineSeparator.svelte';\n  import DelimitedTruncatedContent from 'src/components/layout/DelimitedTruncatedContent.svelte';\n  import InlineTextDropdownList from '../../components/inputs/InlineTextDropdownList.svelte';\n  import ActorMovement from '../actor/ActorMovement.svelte';\n  import AcShieldVehicle from '../actor/AcShieldVehicle.svelte';\n  import VerticalLineSeparator from 'src/components/layout/VerticalLineSeparator.svelte';\n  import AttributeBlock from '../actor/AttributeBlock.svelte';\n  import ItemInfoCard from 'src/components/item-info-card/ItemInfoCard.svelte';\n  import SheetMenu from '../actor/SheetMenu.svelte';\n  import { settingStore } from 'src/settings/settings';\n  import ActorWarnings from '../actor/ActorWarnings.svelte';\n  import InlineSource from '../shared/InlineSource.svelte';\n  import ActorOriginSummaryConfigFormApplication from 'src/applications/actor-origin-summary/ActorOriginSummaryConfigFormApplication';\n  import ActorName from '../actor/ActorName.svelte';\n\n  let selectedTabId: string;\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  $: sizes = <DropdownListOption[]>Object.entries(\n    $context.config.actorSizes,\n  ).map(([key, size]: [string, any]) => ({\n    value: key,\n    text: size.label,\n  }));\n\n  let currentSize: DropdownListOption;\n  $: currentSize = {\n    value: $context.system.traits.size,\n    text: $context.config.actorSizes[$context.system.traits.size]?.label,\n  };\n\n  $: vehicleTypes = <DropdownListOption[]>Object.entries(\n    $context.config.vehicleTypes,\n  ).map(([key, label]: [string, any]) => ({\n    value: key,\n    text: label,\n  }));\n\n  let currentVehicleType: DropdownListOption;\n  $: currentVehicleType = {\n    value: $context.system.vehicleType,\n    text: $context.config.vehicleTypes[$context.system.vehicleType],\n  };\n\n  $: abilities = Object.entries<any>($context.abilities);\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n{#if $settingStore.itemCardsForNpcs}\n  <ItemInfoCard />\n{/if}\n\n{#if $context.viewableWarnings.length}\n  <ActorWarnings warnings={$context.viewableWarnings} />\n{/if}\n<header>\n  <div class=\"flex-0\">\n    <VehicleProfile />\n  </div>\n  <div class=\"flex-grow-1\">\n    <div\n      class=\"actor-name-row flex-row justify-content-space-between align-items-center small-gap\"\n      data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_HEADER_ROW}\n    >\n      <div\n        class=\"actor-name\"\n        data-tidy-sheet-part={CONSTANTS.SHEET_PARTS.NAME_CONTAINER}\n      >\n        <ActorName />\n      </div>\n      <SheetMenu defaultSettingsTab={CONSTANTS.TAB_USER_SETTINGS_VEHICLES} />\n    </div>\n    <HorizontalLineSeparator borderColor=\"light\" />\n    <div class=\"origin-summary\">\n      <div class=\"flex-row extra-small-gap\">\n        {#if $context.editable}\n          <InlineTextDropdownList\n            options={sizes}\n            selected={currentSize}\n            on:optionClicked={(event) =>\n              $context.actor.update({\n                'system.traits.size': event.detail.value,\n              })}\n            title={localize('DND5E.Size')}\n          />\n        {:else}\n          <span title={localize('DND5E.Size')}>{currentSize.text}</span>\n        {/if}\n      </div>\n      <span>&#8226;</span>\n      <div class=\"flex-row extra-small-gap\">\n        {#if $context.editable}\n          <InlineTextDropdownList\n            options={vehicleTypes}\n            selected={currentVehicleType}\n            on:optionClicked={(event) =>\n              $context.actor.update({\n                'system.vehicleType': event.detail.value,\n              })}\n            title={localize('DND5E.VehicleType')}\n          />\n        {:else}\n          <span title={localize('DND5E.VehicleType')}\n            >{currentVehicleType.text}</span\n          >\n        {/if}\n      </div>\n      <span>&#8226;</span>\n      {#key $context.lockSensitiveFields}\n        <DelimitedTruncatedContent cssClass=\"flex-1\">\n          <ContentEditableFormField\n            element=\"span\"\n            document={$context.actor}\n            field=\"system.traits.dimensions\"\n            value={$context.system.traits.dimensions}\n            title={$context.system.traits.dimensions}\n            editable={$context.editable && !$context.lockSensitiveFields}\n            placeholder={localize('DND5E.Dimensions')}\n            selectOnFocus={true}\n          />\n          <InlineSource\n            document={$context.actor}\n            keyPath=\"system.details.source\"\n            editable={$context.unlocked}\n          />\n        </DelimitedTruncatedContent>\n      {/key}\n      <div class=\"flex-row align-items-center extra-small-gap\">\n        {#if $context.editable && !$context.lockSensitiveFields}\n          <button\n            type=\"button\"\n            on:click={() =>\n              new ActorOriginSummaryConfigFormApplication(\n                $context.actor,\n              ).render(true)}\n            class=\"origin-summary-tidy inline-icon-button\"\n            title={localize('TIDY5E.OriginSummaryConfig')}\n            tabindex={$settingStore.useAccessibleKeyboardSupport ? 0 : -1}\n          >\n            <i class=\"fas fa-cog\" />\n          </button>\n        {/if}\n      </div>\n    </div>\n    <HorizontalLineSeparator borderColor=\"light\" />\n    <ActorMovement />\n    <HorizontalLineSeparator borderColor=\"light\" />\n    <section class=\"actor-stats\">\n      <AcShieldVehicle />\n      {#each abilities as [id, ability]}\n        <VerticalLineSeparator />\n        <div>\n          <AttributeBlock\n            {id}\n            {ability}\n            useConfigurationOption={false}\n            useSavingThrowProficiency={false}\n          />\n        </div>\n      {/each}\n    </section>\n  </div>\n</header>\n<Tabs tabs={$context.tabs} bind:selectedTabId>\n  <svelte:fragment slot=\"tab-end\">\n    {#if $context.editable}\n      <AllowEditLock\n        hint={$settingStore.permanentlyUnlockVehicleSheetForGm &&\n        FoundryAdapter.userIsGm()\n          ? localize('TIDY5E.Settings.PermanentlyUnlockVehicleSheetForGM.title')\n          : null}\n      />\n    {/if}\n  </svelte:fragment>\n</Tabs>\n<section class=\"tidy-sheet-body\">\n  <TabContents tabs={$context.tabs} {selectedTabId} />\n</section>\n\n<style lang=\"scss\">\n  header {\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    justify-content: center;\n    padding: 0.625rem 1rem 1rem 1rem;\n    background: var(--t5e-header-background);\n\n    .actor-name-row {\n      margin-bottom: 0.125rem;\n    }\n\n    .origin-summary {\n      margin-left: 0.25rem;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 0.25rem;\n      font-size: 0.75rem;\n      line-height: 1rem;\n      padding: 0.1875rem 0 0.125rem 0;\n    }\n  }\n\n  .tidy-sheet-body {\n    :global(.item-table-cell:not(.primary) input) {\n      text-align: center;\n    }\n\n    :global(.item-table-cell input) {\n      height: 1.5rem;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import RerenderAfterFormSubmission from 'src/components/utility/RerenderAfterFormSubmission.svelte';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import SheetEditor from '../../components/editor/SheetEditor.svelte';\n  import LimitedHeader from '../actor/LimitedHeader.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"limited-vehicle\">\n  <LimitedHeader rounded={$context.useRoundedPortraitStyle} />\n  <section class=\"tidy-sheet-body\">\n    <div class=\"note-entries\">\n      <RerenderAfterFormSubmission\n        andOnValueChange={$context.system.details.biography.value}\n      >\n        <article class=\"biography-notes\" use:$context.activateEditors>\n          <div class=\"section-titles\">\n            {localize('DND5E.Description')}\n          </div>\n          <SheetEditor\n            content={$context.biographyHTML}\n            target=\"system.details.biography.value\"\n            editable={$context.editable}\n          />\n        </article>\n      </RerenderAfterFormSubmission>\n    </div>\n  </section>\n</div>\n\n<style lang=\"scss\">\n  .limited-vehicle {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n  }\n\n  .tidy-sheet-body {\n    flex: 1;\n    margin-right: 1rem;\n    display: flex;\n\n    .note-entries {\n      height: 100%;\n      display: flex;\n      flex-direction: row;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { VehicleSheetContext } from 'src/types/types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n  import VehicleSheetFull from './VehicleSheetFull.svelte';\n  import VehicleSheetLimited from './VehicleSheetLimited.svelte';\n  import { CONSTANTS } from 'src/constants';\n\n  let context = getContext<Readable<VehicleSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n{#if $context.showLimitedSheet}\n  <VehicleSheetLimited />\n{:else}\n  <VehicleSheetFull />\n{/if}\n","import { CONSTANTS } from \"src/constants\";\n\nexport function getInheritedClassByName(obj: any, className: string) {\n  let proto = obj.__proto__;\n  for (let i = 0; i < 42; i++) {\n    if (proto.constructor.name === className) {\n      return proto;\n    }\n    proto = proto.__proto__;\n  }\n  return false;\n}\n\nexport function getBaseActorSheet5e(obj: any) {\n  return getInheritedClassByName(obj, CONSTANTS.CLASS_ACTOR_SHEET_5E);\n}\n","import { CONSTANTS } from 'src/constants';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { SettingsProvider, settingStore } from 'src/settings/settings';\nimport type {\n  ItemCardStore,\n  SheetExpandedItemsCacheable,\n  SheetStats,\n  SheetTabCacheable,\n  ExpandedItemData,\n  ExpandedItemIdToLocationsMap,\n  VehicleSheetContext,\n  Utilities,\n  MessageBus,\n  MessageBusMessage,\n  SearchFilterCacheable,\n  VehicleCargoSection,\n  VehicleFeatureSection,\n  SimpleEditableColumn,\n  Actor5e,\n  VehicleEncumbrance,\n  VehicleItemContext,\n} from 'src/types/types';\nimport { writable } from 'svelte/store';\nimport VehicleSheet from './vehicle/VehicleSheet.svelte';\nimport { initTidy5eContextMenu } from 'src/context-menu/tidy5e-context-menu';\nimport {\n  applySheetAttributesToWindow,\n  applyThemeDataAttributeToWindow,\n  applyTitleToWindow,\n  blurUntabbableButtonsOnClick,\n  maintainCustomContentInputFocus,\n} from 'src/utils/applications';\nimport type { SvelteComponent } from 'svelte';\nimport { debug } from 'src/utils/logging';\nimport { getPercentage } from 'src/utils/numbers';\nimport type { Item5e, ItemChatData } from 'src/types/item.types';\nimport { VehicleSheetRuntime } from 'src/runtime/VehicleSheetRuntime';\nimport {\n  actorUsesActionFeature,\n  getActorActionSections,\n} from 'src/features/actions/actions';\nimport { isNil } from 'src/utils/data';\nimport { CustomContentRenderer } from './CustomContentRenderer';\nimport { getBaseActorSheet5e } from 'src/utils/class-inheritance';\nimport { ActorPortraitRuntime } from 'src/runtime/ActorPortraitRuntime';\nimport { CustomActorTraitsRuntime } from 'src/runtime/actor-traits/CustomActorTraitsRuntime';\nimport { ItemTableToggleCacheService } from 'src/features/caching/ItemTableToggleCacheService';\nimport { StoreSubscriptionsService } from 'src/features/store/StoreSubscriptionsService';\nimport { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\nimport { ItemFilterService } from 'src/features/filtering/ItemFilterService';\nimport { AsyncMutex } from 'src/utils/mutex';\nimport { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\nimport { SheetPreferencesRuntime } from 'src/runtime/user-preferences/SheetPreferencesRuntime';\nimport { Tidy5eBaseActorSheet } from './Tidy5eBaseActorSheet';\nimport { DocumentTabSectionConfigApplication } from 'src/applications/section-config/DocumentTabSectionConfigApplication';\nimport { SheetSections } from 'src/features/sections/SheetSections';\nimport { TidyFlags } from 'src/foundry/TidyFlags';\nimport { TidyHooks } from 'src/foundry/TidyHooks';\nimport { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\nimport { Container } from 'src/features/containers/Container';\n\nexport class Tidy5eVehicleSheet\n  extends dnd5e.applications.actor.ActorSheet5eVehicle\n  implements\n    SheetTabCacheable,\n    SheetExpandedItemsCacheable,\n    SearchFilterCacheable\n{\n  context = writable<VehicleSheetContext>();\n  stats = writable<SheetStats>({\n    lastSubmissionTime: null,\n  });\n  card = writable<ItemCardStore>();\n  currentTabId: string;\n  expandedItems: ExpandedItemIdToLocationsMap = new Map<string, Set<string>>();\n  expandedItemData: ExpandedItemData = new Map<string, ItemChatData>();\n  inlineContainerToggleService = new InlineContainerToggleService();\n  itemTableTogglesCache: ItemTableToggleCacheService;\n  subscriptionsService: StoreSubscriptionsService;\n  itemFilterService: ItemFilterService;\n  messageBus: MessageBus = writable<MessageBusMessage | undefined>();\n\n  constructor(...args: any[]) {\n    super(...args);\n\n    this.subscriptionsService = new StoreSubscriptionsService();\n\n    this.itemTableTogglesCache = new ItemTableToggleCacheService({\n      userId: game.user.id,\n      documentId: this.actor.id,\n    });\n\n    this.itemFilterService = new ItemFilterService({}, this.actor);\n\n    this.currentTabId = SettingsProvider.settings.initialVehicleSheetTab.get();\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template.hbs');\n  }\n\n  static get defaultOptions() {\n    const { width, height } =\n      SheetPreferencesService.getByType(CONSTANTS.SHEET_TYPE_VEHICLE) ?? {};\n\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      classes: ['tidy5e-sheet', 'sheet', 'actor', CONSTANTS.SHEET_TYPE_VEHICLE],\n      width: width ?? 740,\n      height: height ?? 810,\n      scrollY: ['[data-tidy-track-scroll-y]', '.scroll-container'],\n    });\n  }\n\n  component: SvelteComponent | undefined;\n  activateListeners(html: { get: (index: 0) => HTMLElement }) {\n    let first = true;\n    this.subscriptionsService.registerSubscriptions(\n      this.itemFilterService.filterData$.subscribe(() => {\n        if (first) return;\n        this.render();\n      }),\n      settingStore.subscribe((s) => {\n        if (first) return;\n        applyThemeDataAttributeToWindow(s.colorScheme, this.element.get(0));\n        this.render();\n      }),\n      this.messageBus.subscribe((m) => {\n        debug('Message bus message received', {\n          app: this,\n          actor: this.actor,\n          message: m,\n        });\n      }),\n      SheetPreferencesRuntime.getStore().subscribe(() => {\n        if (first) return;\n        this.render();\n      })\n    );\n    first = false;\n\n    const node = html.get(0);\n    this.card.set({ sheet: node, item: null, itemCardContentTemplate: null });\n\n    this.component = new VehicleSheet({\n      target: node,\n      context: new Map<any, any>([\n        [CONSTANTS.SVELTE_CONTEXT.APP_ID, this.appId],\n        [CONSTANTS.SVELTE_CONTEXT.CONTEXT, this.context],\n        [CONSTANTS.SVELTE_CONTEXT.MESSAGE_BUS, this.messageBus],\n        [CONSTANTS.SVELTE_CONTEXT.STATS, this.stats],\n        [CONSTANTS.SVELTE_CONTEXT.CARD, this.card],\n        [CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE, this.inlineContainerToggleService],\n        [CONSTANTS.SVELTE_CONTEXT.ITEM_FILTER_SERVICE, this.itemFilterService],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_FILTER,\n          this.itemFilterService.onFilter.bind(this.itemFilterService),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_FILTER_CLEAR_ALL,\n          this.itemFilterService.onFilterClearAll.bind(this.itemFilterService),\n        ],\n        [CONSTANTS.SVELTE_CONTEXT.CURRENT_TAB_ID, this.currentTabId],\n        [CONSTANTS.SVELTE_CONTEXT.ON_TAB_SELECTED, this.onTabSelected.bind(this)],\n        [CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TOGGLED, this.onItemToggled.bind(this)],\n        [CONSTANTS.SVELTE_CONTEXT.LOCATION, ''],\n        [CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEMS, new Map(this.expandedItems)],\n        [CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEM_DATA, new Map(this.expandedItemData)],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ITEM_TABLE_TOGGLES,\n          new Map(this.itemTableTogglesCache.itemTableToggles),\n        ],\n        [\n          CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TABLE_TOGGLE,\n          this.itemTableTogglesCache.onItemTableToggle.bind(\n            this.itemTableTogglesCache\n          ),\n        ],\n      ]),\n    });\n\n    initTidy5eContextMenu(this, html);\n  }\n\n  async getData(options = {}) {\n    const defaultDocumentContext = await super.getData(this.options);\n\n    Tidy5eBaseActorSheet.applyCommonContext(defaultDocumentContext);\n\n    const unlocked =\n      FoundryAdapter.isActorSheetUnlocked(this.actor) &&\n      defaultDocumentContext.editable;\n\n    const vehiclePreferences = SheetPreferencesService.getByType(\n      this.actor.type\n    );\n\n    const actionListSortMode =\n      vehiclePreferences.tabs?.[CONSTANTS.TAB_ACTOR_ACTIONS]?.sort ?? 'm';\n\n    const utilities: Utilities<VehicleSheetContext> = {\n      [CONSTANTS.TAB_ACTOR_ACTIONS]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_ACTOR_ACTIONS,\n                'sort',\n                'm'\n              );\n            },\n            visible: actionListSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.SortMode.ActionListDefault'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.actor.type,\n                CONSTANTS.TAB_ACTOR_ACTIONS,\n                'sort',\n                'a'\n              );\n            },\n            visible: actionListSortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.ExpandAll'),\n            iconClass: 'fas fa-angles-down',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                message: CONSTANTS.MESSAGE_BUS_EXPAND_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize('TIDY5E.Commands.CollapseAll'),\n            iconClass: 'fas fa-angles-up',\n            execute: () =>\n              // TODO: Use app.messageBus\n              this.messageBus.set({\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                message: CONSTANTS.MESSAGE_BUS_COLLAPSE_ALL,\n              }),\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.actor,\n                sections: context.actions,\n                tabId: CONSTANTS.TAB_ACTOR_ACTIONS,\n                tabTitle: VehicleSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_ACTOR_ACTIONS\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n    };\n\n    const context: VehicleSheetContext = {\n      ...defaultDocumentContext,\n      actions: await getActorActionSections(this.actor),\n      activateEditors: (node, options) =>\n        FoundryAdapter.activateEditors(node, this, options?.bindSecrets),\n      actorPortraitCommands:\n        ActorPortraitRuntime.getEnabledPortraitMenuCommands(this.actor),\n      allowEffectsManagement: true,\n      appId: this.appId,\n      customActorTraits: CustomActorTraitsRuntime.getEnabledTraits(\n        defaultDocumentContext\n      ),\n      customContent: await VehicleSheetRuntime.getContent(\n        defaultDocumentContext\n      ),\n      filterData: this.itemFilterService.getDocumentItemFilterData(),\n      filterPins: ItemFilterRuntime.defaultFilterPins[this.actor.type],\n      useClassicControls:\n        SettingsProvider.settings.useClassicControlsForVehicle.get(),\n      editable: defaultDocumentContext.editable,\n      healthPercentage: getPercentage(\n        this.actor?.system?.attributes?.hp?.value,\n        this.actor?.system?.attributes?.hp?.max\n      ),\n      lockExpChanges: FoundryAdapter.shouldLockExpChanges(),\n      lockHpMaxChanges: FoundryAdapter.shouldLockHpMaxChanges(),\n      lockItemQuantity: FoundryAdapter.shouldLockItemQuantity(),\n      lockLevelSelector: FoundryAdapter.shouldLockLevelSelector(),\n      lockMoneyChanges: FoundryAdapter.shouldLockMoneyChanges(),\n      lockSensitiveFields:\n        (!unlocked && SettingsProvider.settings.useTotalSheetLock.get()) ||\n        !defaultDocumentContext.editable,\n      owner: this.actor.isOwner,\n      showLimitedSheet: FoundryAdapter.showLimitedSheet(this.actor),\n      tabs: [],\n      unlocked: unlocked,\n      useActionsFeature: actorUsesActionFeature(this.actor),\n      useRoundedPortraitStyle: [\n        CONSTANTS.CIRCULAR_PORTRAIT_OPTION_ALL as string,\n        CONSTANTS.CIRCULAR_PORTRAIT_OPTION_NPCVEHICLE as string,\n      ].includes(SettingsProvider.settings.useCircularPortraitStyle.get()),\n      utilities: utilities,\n      viewableWarnings:\n        defaultDocumentContext.warnings?.filter(\n          (w: any) => !isNil(w.message?.trim(), '')\n        ) ?? [],\n    };\n\n    for (const item of context.items) {\n      const ctx = context.itemContext[item.id];\n      if (item.type === CONSTANTS.ITEM_TYPE_CONTAINER) {\n        ctx.containerContents = await Container.getContainerContents(item);\n      }\n    }\n\n    let tabs = await VehicleSheetRuntime.getTabs(context);\n\n    const selectedTabs = TidyFlags.selectedTabs.get(context.actor);\n\n    if (selectedTabs?.length) {\n      tabs = tabs\n        .filter((t) => selectedTabs?.includes(t.id))\n        .sort(\n          (a, b) => selectedTabs.indexOf(a.id) - selectedTabs.indexOf(b.id)\n        );\n    } else {\n      const defaultTabs =\n        SettingsProvider.settings.defaultVehicleSheetTabs.get();\n      tabs = tabs\n        .filter((t) => defaultTabs?.includes(t.id))\n        .sort((a, b) => defaultTabs.indexOf(a.id) - defaultTabs.indexOf(b.id));\n    }\n\n    context.tabs = tabs;\n\n    debug('Vehicle Sheet context data', context);\n\n    return context;\n  }\n\n  protected _prepareItems(context: VehicleSheetContext) {\n    // TODO: Replace with Tidy Column Selection implementation\n    const cargoColumns: SimpleEditableColumn[] = [\n      {\n        label: game.i18n.localize('DND5E.Quantity'),\n        css: 'item-qty',\n        property: 'quantity',\n        editable: 'Number',\n      },\n    ];\n\n    // TODO: Replace with Tidy Column Selection implementation\n    const equipmentColumns: SimpleEditableColumn[] = [\n      {\n        label: game.i18n.localize('DND5E.Quantity'),\n        css: 'item-qty',\n        property: 'system.quantity',\n        editable: 'Number',\n      },\n      {\n        label: game.i18n.localize('DND5E.AC'),\n        css: 'item-ac',\n        property: 'system.armor.value',\n      },\n      {\n        label: game.i18n.localize('DND5E.HP'),\n        css: 'item-hp',\n        property: 'system.hp.value',\n        maxProperty: 'system.hp.max',\n        editable: 'Number',\n      },\n      {\n        label: game.i18n.localize('DND5E.Threshold'),\n        css: 'item-threshold',\n        property: 'threshold',\n      },\n    ];\n\n    const features: Record<string, VehicleFeatureSection> = {\n      actions: {\n        label: game.i18n.localize('DND5E.ActionPl'),\n        items: [],\n        hasActions: true,\n        crewable: true,\n        key: 'actions',\n        dataset: { type: 'feat', 'system.activation.type': 'crew' },\n        columns: [\n          {\n            label: game.i18n.localize('DND5E.Cover'),\n            css: 'item-cover',\n            property: 'cover',\n          },\n        ],\n        show: true,\n      },\n      equipment: {\n        label: game.i18n.localize(CONFIG.Item.typeLabels.equipment),\n        items: [],\n        crewable: true,\n        dataset: { type: 'equipment', 'system.type.value': 'vehicle' },\n        columns: equipmentColumns,\n        key: 'equipment',\n        show: true,\n      },\n      passive: {\n        label: game.i18n.localize('DND5E.Features'),\n        items: [],\n        dataset: { type: 'feat' },\n        key: 'passive',\n        show: true,\n      },\n      reactions: {\n        label: game.i18n.localize('DND5E.ReactionPl'),\n        items: [],\n        dataset: { type: 'feat', 'system.activation.type': 'reaction' },\n        key: 'reactions',\n        show: true,\n      },\n      weapons: {\n        label: game.i18n.localize(`${CONFIG.Item.typeLabels.weapon}Pl`),\n        items: [],\n        crewable: true,\n        dataset: { type: 'weapon', 'system.weaponType': 'siege' },\n        columns: equipmentColumns,\n        key: 'weapons',\n        show: true,\n      },\n    };\n\n    context.items.forEach((item) => {\n      const { uses } = item.system;\n      const ctx = (context.itemContext[item.id] ??= {});\n      ctx.canToggle = false;\n      ctx.hasUses = uses && uses.max > 0;\n    });\n\n    const cargo: Record<string, VehicleCargoSection> = {\n      crew: {\n        label: game.i18n.localize('DND5E.VehicleCrew'),\n        items: context.actor.system.cargo.crew,\n        css: 'cargo-row crew',\n        editableName: true,\n        dataset: { type: 'crew' },\n        columns: cargoColumns,\n        key: 'crew',\n        show: true,\n      },\n      passengers: {\n        label: game.i18n.localize('DND5E.VehiclePassengers'),\n        items: context.actor.system.cargo.passengers,\n        css: 'cargo-row passengers',\n        editableName: true,\n        dataset: { type: 'passengers' },\n        columns: cargoColumns,\n        key: 'passengers',\n        show: true,\n      },\n      cargo: {\n        label: game.i18n.localize('DND5E.VehicleCargo'),\n        items: [],\n        dataset: { type: 'loot' },\n        columns: [\n          {\n            label: game.i18n.localize('DND5E.Quantity'),\n            css: 'item-qty',\n            property: 'system.quantity',\n            editable: 'Number',\n          },\n          {\n            label: game.i18n.localize('DND5E.Price'),\n            css: 'item-price',\n            property: 'system.price.value',\n            editable: 'Number',\n          },\n          {\n            label: game.i18n.localize('DND5E.Weight'),\n            css: 'item-weight',\n            property: 'system.weight.value',\n            editable: 'Number',\n          },\n        ],\n        key: 'cargo',\n        show: true,\n      },\n    };\n\n    const baseUnits =\n      CONFIG.DND5E.encumbrance.baseUnits[this.actor.type] ??\n      CONFIG.DND5E.encumbrance.baseUnits.default;\n    const units = game.settings.get('dnd5e', 'metricWeightUnits')\n      ? baseUnits.metric\n      : baseUnits.imperial;\n\n    // Classify items owned by the vehicle and compute total cargo weight\n    let totalWeight = 0;\n    for (const item of context.items) {\n      const ctx = (context.itemContext[item.id] ??= {});\n      this._prepareCrewedItem(item, ctx);\n\n      // Handle cargo explicitly\n      const isCargo = item.flags.dnd5e?.vehicleCargo === true;\n      if (isCargo) {\n        totalWeight += item.system.totalWeightin?.(units) ?? 0;\n        cargo.cargo.items.push(item);\n        continue;\n      }\n\n      // Handle non-cargo item types\n      switch (item.type) {\n        case 'weapon':\n          features.weapons.items.push(item);\n          break;\n        case 'equipment':\n          features.equipment.items.push(item);\n          break;\n        case 'feat':\n          const act = item.system.activation;\n          if (!act.type || act.type === 'none')\n            features.passive.items.push(item);\n          else if (act.type === 'reaction') features.reactions.items.push(item);\n          else features.actions.items.push(item);\n          break;\n        default:\n          totalWeight += item.system.totalWeightIn?.(units) ?? 0;\n          cargo.cargo.items.push(item);\n      }\n    }\n\n    // Update the rendering context data\n    context.features = Object.values(features);\n    context.cargo = Object.values(cargo);\n    context.encumbrance = this._computeEncumbrance(totalWeight, context);\n  }\n\n  /**\n   * Prepare items that are mounted to a vehicle and require one or more crew to operate.\n   * @param {object} item     Copy of the item data being prepared for display.\n   * @param {object} context  Display context for the item.\n   * @protected\n   */\n  _prepareCrewedItem(item: Item5e, context: VehicleItemContext) {\n    // Determine crewed status\n    const isCrewed = item.system.crewed;\n    context.toggleClass = isCrewed ? 'active' : '';\n    context.toggleTitle = game.i18n.localize(\n      `DND5E.${isCrewed ? 'Crewed' : 'Uncrewed'}`\n    );\n\n    // Handle crew actions\n    if (item.type === 'feat' && item.system.activation.type === 'crew') {\n      context.cover = game.i18n.localize(\n        `DND5E.${item.system.cover ? 'CoverTotal' : 'None'}`\n      );\n      if (item.system.cover === 0.5) context.cover = '½';\n      else if (item.system.cover === 0.75) context.cover = '¾';\n      else if (item.system.cover === null) context.cover = '—';\n    }\n\n    // Prepare vehicle weapons\n    if (item.type === 'equipment' || item.type === 'weapon') {\n      context.threshold = item.system.hp.dt ? item.system.hp.dt : '—';\n    }\n  }\n\n  /**\n   * Compute the total weight of the vehicle's cargo.\n   * @param {number} totalWeight    The cumulative item weight from inventory items\n   * @param {object} actorData      The data object for the Actor being rendered\n   * @returns {{max: number, value: number, pct: number}}\n   * @private\n   */\n  _computeEncumbrance(\n    totalWeight: number,\n    actorData: Actor5e\n  ): VehicleEncumbrance {\n    // Compute currency weight\n    const totalCoins = Object.values(\n      // TODO: Use dnd5e types ... one day ...\n      actorData.system.currency as Record<string, number>\n    ).reduce((acc: number, denom: number) => acc + denom, 0);\n\n    const currencyPerWeight = game.settings.get('dnd5e', 'metricWeightUnits')\n      ? CONFIG.DND5E.encumbrance.currencyPerWeight.metric\n      : CONFIG.DND5E.encumbrance.currencyPerWeight.imperial;\n    totalWeight += totalCoins / currencyPerWeight;\n\n    // Compute overall encumbrance\n    const max = actorData.system.attributes.capacity.cargo;\n    const pct = Math.clamp((totalWeight * 100) / max, 0, 100);\n    return { value: totalWeight.toNearest(0.1), max, pct };\n  }\n\n  private async setExpandedItemData() {\n    this.expandedItemData.clear();\n    for (const id of this.expandedItems.keys()) {\n      const item = this.actor.items.get(id);\n      if (item) {\n        this.expandedItemData.set(\n          id,\n          await item.getChatData({ secrets: this.actor.isOwner })\n        );\n      }\n    }\n  }\n\n  private _renderMutex = new AsyncMutex();\n  async _render(force?: boolean, options = {}) {\n    if (typeof options !== 'object') {\n      options = {};\n    }\n    await this._renderMutex.lock(async () => {\n      await this._renderSheet(force, options);\n    });\n  }\n\n  private async _renderSheet(force?: boolean, options = {}) {\n    await this.setExpandedItemData();\n    const data = await this.getData();\n    SheetSections.accountForExternalSections(['features'], data);\n    this.context.set(data);\n\n    if (force) {\n      const { width, height } =\n        SheetPreferencesService.getByType(CONSTANTS.SHEET_TYPE_VEHICLE) ?? {};\n      this.position = {\n        ...this.position,\n        width: width ?? this.position.width,\n        height: height ?? this.position.height,\n      };\n\n      this._saveScrollPositions(this.element);\n      this._destroySvelteComponent();\n      await super._render(force, options);\n      applySheetAttributesToWindow(\n        this.actor.documentName,\n        this.actor.type,\n        SettingsProvider.settings.colorScheme.get(),\n        this.element.get(0)\n      );\n      await this.renderCustomContent({ data, isFullRender: true });\n      TidyHooks.tidy5eSheetsRenderActorSheet(\n        this,\n        this.element.get(0),\n        data,\n        true\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n      blurUntabbableButtonsOnClick(this.element);\n      return;\n    }\n\n    await maintainCustomContentInputFocus(this, async () => {\n      applyTitleToWindow(this.title, this.element.get(0));\n      await this.renderCustomContent({ data, isFullRender: false });\n      TidyHooks.tidy5eSheetsRenderActorSheet(\n        this,\n        this.element.get(0),\n        data,\n        false\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n    });\n  }\n\n  private async renderCustomContent(args: {\n    data: VehicleSheetContext;\n    isFullRender: boolean;\n  }) {\n    await CustomContentRenderer.render({\n      app: this,\n      customContent: args.data.customContent,\n      data: args.data,\n      element: this.element,\n      isFullRender: args.isFullRender,\n      superActivateListeners: super.activateListeners,\n      tabs: args.data.tabs,\n    });\n  }\n\n  _getHeaderButtons() {\n    const buttons = super._getHeaderButtons();\n    return FoundryAdapter.removeConfigureSettingsButtonWhenLockedForNonGm(\n      buttons\n    );\n  }\n\n  _destroySvelteComponent() {\n    this.component?.$destroy();\n    this.component = undefined;\n  }\n\n  _saveScrollPositions(html: any) {\n    if (html.length && this.component) {\n      const save = super._saveScrollPositions(html);\n      debug('Saved scroll positions', this._scrollPositions);\n      return save;\n    }\n  }\n\n  async _onDropSingleItem(itemData: any) {\n    const cargoTypes = [\n      'weapon',\n      'equipment',\n      'consumable',\n      'tool',\n      'loot',\n      'container',\n    ];\n    const isCargo =\n      cargoTypes.includes(itemData.type) &&\n      this.currentTabId === CONSTANTS.TAB_VEHICLE_CARGO_AND_CREW;\n    foundry.utils.setProperty(itemData, 'flags.dnd5e.vehicleCargo', isCargo);\n\n    // Create a Consumable spell scroll on the Inventory tab\n    if (itemData.type === 'spell') {\n      const options: Record<string, unknown> = {};\n\n      if (SettingsProvider.settings.includeFlagsInSpellScrollCreation.get()) {\n        options.flags = itemData.flags;\n      }\n\n      const scroll = await dnd5e.documents.Item5e.createScrollFromSpell(\n        itemData,\n        options\n      );\n\n      return scroll.toObject();\n    }\n\n    if (itemData.type === 'consumable') {\n      return super._onDropSingleItem(itemData);\n    }\n\n    // Skip the default vehicle sheet handler, as we are handling all use cases.\n    const baseActor5eClass = getBaseActorSheet5e(this);\n    if (baseActor5eClass) {\n      return baseActor5eClass._onDropSingleItem.call(this, itemData);\n    }\n  }\n\n  close(options: unknown = {}) {\n    this._destroySvelteComponent();\n    this.subscriptionsService.unsubscribeAll();\n    return super.close(options);\n  }\n\n  async _onSubmit(...args: any[]) {\n    await super._onSubmit(...args);\n    this.stats.update((stats) => {\n      stats.lastSubmissionTime = new Date();\n      return stats;\n    });\n  }\n\n  _disableFields(...args: any[]) {\n    debug('Ignoring call to disable fields. Delegating to Tidy Sheets...');\n  }\n\n  _onResize(event: any) {\n    super._onResize(event);\n    const { width, height } = this.position;\n    SheetPreferencesService.setDocumentTypePreference(\n      CONSTANTS.SHEET_TYPE_VEHICLE,\n      'width',\n      width\n    );\n    SheetPreferencesService.setDocumentTypePreference(\n      CONSTANTS.SHEET_TYPE_VEHICLE,\n      'height',\n      height\n    );\n  }\n\n  /* -------------------------------------------- */\n  /* SheetTabCacheable\n  /* -------------------------------------------- */\n\n  onTabSelected(tabId: string) {\n    this.currentTabId = tabId;\n  }\n\n  /* -------------------------------------------- */\n  /* SheetExpandedItemsCacheable\n  /* -------------------------------------------- */\n\n  onItemToggled(itemId: string, isVisible: boolean, location: string) {\n    const locationSet =\n      this.expandedItems.get(itemId) ??\n      this.expandedItems.set(itemId, new Set<string>()).get(itemId);\n\n    if (isVisible) {\n      locationSet?.add(location);\n    } else {\n      locationSet?.delete(location);\n    }\n\n    debug('Item Toggled', {\n      expandedItems: this.expandedItems,\n    });\n  }\n\n  /* -------------------------------------------- */\n  /* SearchFilterCacheable\n  /* -------------------------------------------- */\n\n  onSearch(location: string, text: string): void {\n    debug('Searched', {\n      location,\n      text,\n    });\n    this.searchFilters.set(location, text);\n  }\n}\n","<script lang=\"ts\">\n  import { CONSTANTS } from 'src/constants';\n  import type { ItemSheetContext } from 'src/types/item.types';\n  import { getContext } from 'svelte';\n  import type { Readable } from 'svelte/store';\n\n  let context = getContext<Readable<ItemSheetContext>>(\n    CONSTANTS.SVELTE_CONTEXT.CONTEXT,\n  );\n</script>\n\n<h2>Item Type Not Found</h2>\n\n<p>\n  The item type <code>{$context.item.type}</code> does not have a sheet in Tidy\n  5e Sheets. Please request any item type sheets in an issue on the\n  <a\n    target=\"_blank\"\n    href=\"https://github.com/kgar/foundry-vtt-tidy-5e-sheets/issues\"\n    >Tidy 5e github repository</a\n  >.\n</p>\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type {\n  Item5e,\n  ItemDescription,\n  ItemSheetContext,\n} from 'src/types/item.types';\nimport { get, writable } from 'svelte/store';\nimport TypeNotFoundSheet from './item/TypeNotFoundSheet.svelte';\nimport type { SheetStats, SheetTabCacheable, Tab } from 'src/types/types';\nimport {\n  applySheetAttributesToWindow,\n  applyThemeDataAttributeToWindow,\n  applyTitleToWindow,\n  maintainCustomContentInputFocus,\n} from 'src/utils/applications';\nimport { debug, error } from 'src/utils/logging';\nimport type { SvelteComponent } from 'svelte';\nimport { getPercentage } from 'src/utils/numbers';\nimport { isNil } from 'src/utils/data';\nimport { ItemSheetRuntime } from 'src/runtime/item/ItemSheetRuntime';\nimport { TabManager } from 'src/runtime/tab/TabManager';\nimport { CustomContentRenderer } from './CustomContentRenderer';\nimport { SettingsProvider, settingStore } from 'src/settings/settings';\nimport { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\nimport { AsyncMutex } from 'src/utils/mutex';\nimport { TidyHooks } from 'src/foundry/TidyHooks';\nimport { StoreSubscriptionsService } from 'src/features/store/StoreSubscriptionsService';\nimport { CONSTANTS } from 'src/constants';\n\nexport class Tidy5eKgarItemSheet\n  extends dnd5e.applications.item.ItemSheet5e\n  implements SheetTabCacheable\n{\n  context = writable<ItemSheetContext>();\n  stats = writable<SheetStats>({\n    lastSubmissionTime: null,\n  });\n  currentTabId: string | undefined = undefined;\n  subscriptionsService: StoreSubscriptionsService;\n\n  constructor(item: Item5e, ...args: any[]) {\n    super(item, ...args);\n\n    this.subscriptionsService = new StoreSubscriptionsService();\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template-for-items.hbs');\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      classes: ['tidy5e-sheet', 'sheet', 'item'],\n    });\n  }\n\n  component: SvelteComponent | undefined;\n  activateListeners(html: any) {\n    let first = true;\n    this.subscriptionsService.registerSubscriptions(\n      settingStore.subscribe((s) => {\n        if (first) return;\n        applyThemeDataAttributeToWindow(s.colorScheme, this.element.get(0));\n        this.render();\n      })\n    );\n    first = false;\n\n    const node = html.get(0);\n\n    const context = new Map<any, any>([\n      [CONSTANTS.SVELTE_CONTEXT.APP_ID, this.appId],\n      [CONSTANTS.SVELTE_CONTEXT.CONTEXT, this.context],\n      [CONSTANTS.SVELTE_CONTEXT.STATS, this.stats],\n      [CONSTANTS.SVELTE_CONTEXT.CURRENT_TAB_ID, this.currentTabId],\n      [CONSTANTS.SVELTE_CONTEXT.ON_TAB_SELECTED, this.onTabSelected.bind(this)],\n    ]);\n\n    // TODO: Try find sheet from runtime\n    const sheetComponent = ItemSheetRuntime.sheets[this.item.type];\n\n    this.component = sheetComponent\n      ? new sheetComponent.Sheet({\n          target: node,\n          context: context,\n        })\n      : new TypeNotFoundSheet({\n          target: node,\n          context: context,\n        });\n\n    // Advancement context menu\n    const contextOptions = this._getAdvancementContextMenuOptions();\n\n    TidyHooks.dnd5eGetItemAdvancementContext(html, contextOptions);\n\n    if (contextOptions)\n      FoundryAdapter.createContextMenu(\n        html,\n        '.advancement-item',\n        contextOptions\n      );\n  }\n\n  async getData(options = {}) {\n    const defaultDocumentContext = await super.getData(this.options);\n\n    const itemDescriptions: ItemDescription[] = [];\n    itemDescriptions.push({\n      content: defaultDocumentContext.enriched.description,\n      field: 'system.description.value',\n      label: FoundryAdapter.localize('DND5E.Description'),\n    });\n    if (defaultDocumentContext.isIdentifiable && FoundryAdapter.userIsGm()) {\n      itemDescriptions.push({\n        content: defaultDocumentContext.enriched.unidentified,\n        field: 'system.unidentified.description',\n        label: FoundryAdapter.localize('DND5E.DescriptionUnidentified'),\n      });\n    }\n    itemDescriptions.push({\n      content: defaultDocumentContext.enriched.chat,\n      field: 'system.description.chat',\n      label: FoundryAdapter.localize('DND5E.DescriptionChat'),\n    });\n\n    const eligibleCustomTabs = ItemSheetRuntime.getCustomItemTabs(\n      defaultDocumentContext\n    );\n\n    const customTabs: Tab[] = await TabManager.prepareTabsForRender(\n      defaultDocumentContext,\n      eligibleCustomTabs\n    );\n\n    const tabs = ItemSheetRuntime.sheets[this.item.type]?.defaultTabs() ?? [];\n\n    tabs.push(...customTabs);\n\n    const context: ItemSheetContext = {\n      ...defaultDocumentContext,\n      appId: this.appId,\n      activateEditors: (node, options) =>\n        FoundryAdapter.activateEditors(node, this, options?.bindSecrets),\n      customContent: await ItemSheetRuntime.getContent(defaultDocumentContext),\n      customEquipmentTypeGroups:\n        ItemSheetRuntime.getCustomEquipmentTypeGroups(),\n      itemOverrides: new Set<string>(this._getItemOverrides()),\n      healthPercentage: getPercentage(\n        this.item?.system?.hp?.value,\n        this.item?.system?.hp?.max\n      ),\n      identifiedName: FoundryAdapter.getIdentifiedName(this.item),\n      itemDescriptions,\n      lockItemQuantity: FoundryAdapter.shouldLockItemQuantity(),\n      originalContext: defaultDocumentContext,\n      tabs: tabs,\n      toggleAdvancementLock: this.toggleAdvancementLock.bind(this),\n      viewableWarnings:\n        defaultDocumentContext.warnings?.filter(\n          (w: any) => !isNil(w.message?.trim(), '')\n        ) ?? [],\n    };\n\n    debug(`${this.item?.type ?? 'Unknown Item Type'} context data`, context);\n\n    // TODO: Add hook for preparing Tidy-specific context data\n\n    return context;\n  }\n\n  private _renderMutex = new AsyncMutex();\n  async _render(force?: boolean, options = {}) {\n    if (typeof options !== 'object') {\n      options = {};\n    }\n    await this._renderMutex.lock(async () => {\n      await this._renderSheet(force, options);\n    });\n  }\n\n  private async _renderSheet(force?: boolean, options = {}) {\n    const data = await this.getData();\n    this.context.set(data);\n\n    if (force) {\n      const width = SheetPreferencesService.getByType(this.item.type)?.width;\n\n      this.position = {\n        ...this.position,\n        width: width ?? this.position.width,\n      };\n\n      this.component?.$destroy();\n      await super._render(force, options);\n      applySheetAttributesToWindow(\n        this.item.documentName,\n        this.item.type,\n        SettingsProvider.settings.colorScheme.get(),\n        this.element.get(0)\n      );\n      await this.renderCustomContent({ data, isFullRender: true });\n      TidyHooks.tidy5eSheetsRenderItemSheet(\n        this,\n        this.element.get(0),\n        data,\n        true\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n      return;\n    }\n\n    await maintainCustomContentInputFocus(this, async () => {\n      applyTitleToWindow(this.title, this.element.get(0));\n      await this.renderCustomContent({ data, isFullRender: false });\n      TidyHooks.tidy5eSheetsRenderItemSheet(\n        this,\n        this.element.get(0),\n        data,\n        false\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n    });\n  }\n\n  private async renderCustomContent(args: {\n    data: ItemSheetContext;\n    isFullRender: boolean;\n  }) {\n    await CustomContentRenderer.render({\n      app: this,\n      customContent: args.data.customContent,\n      data: args.data,\n      element: this.element,\n      isFullRender: args.isFullRender,\n      superActivateListeners: super.activateListeners,\n      tabs: args.data.tabs,\n    });\n  }\n\n  async _onSubmit(...args: any[]) {\n    await super._onSubmit(...args);\n\n    // TODO: Figure out why multiple render calls is trashing the prose editor.\n    // This setTimeout() is making it so the item prose editors don't go nonresponsive.\n    // I think it may have something to do with Save -> Trigger Component Refresh (onSubmit) -> Render -> Trash Prose Editor HTML -> Render again\n    setTimeout(() => {\n      this.stats.update((stats) => {\n        stats.lastSubmissionTime = new Date();\n        return stats;\n      });\n    });\n  }\n\n  close(...args: any[]) {\n    try {\n      this._saveViewState();\n    } catch (e) {\n      debug(\n        `Unable to save view state for ${Tidy5eKgarItemSheet.name}. Ignoring.`\n      );\n    } finally {\n      this.component?.$destroy();\n      this.subscriptionsService.unsubscribeAll();\n      return super.close(...args);\n    }\n  }\n\n  async _onDropSingleItem(...args: any[]) {\n    return super._onDropSingleItem(...args);\n  }\n\n  async toggleAdvancementLock() {\n    this.advancementConfigurationMode = !this.advancementConfigurationMode;\n    this.context.set(await this.getData());\n  }\n\n  _getHeaderButtons() {\n    const buttons = super._getHeaderButtons();\n\n    return FoundryAdapter.removeConfigureSettingsButtonWhenLockedForNonGm(\n      buttons\n    );\n  }\n\n  _disableFields(...args: any[]) {\n    debug('Ignoring call to disable fields. Delegating to Tidy Sheets...');\n  }\n\n  _onResize(event: any) {\n    super._onResize(event);\n    const { width } = this.position;\n    SheetPreferencesService.setDocumentTypePreference(\n      this.item.type,\n      'width',\n      width\n    );\n  }\n\n  /* -------------------------------------------- */\n  /* SheetTabCacheable\n  /* -------------------------------------------- */\n\n  onTabSelected(tabId: string) {\n    this.currentTabId = tabId;\n    const tabs = get(this.context)?.tabs ?? [];\n    setTimeout(() => {\n      this._handleAutoHeightTabs(tabs);\n    });\n  }\n\n  private _handleAutoHeightTabs(tabs: Tab[]) {\n    const currentTabSettings = tabs.find((t) => t.id === this.currentTabId);\n    if (currentTabSettings?.autoHeight) {\n      this._saveScrollPositions(this.element);\n      this.setPosition({ height: 'auto' });\n    }\n  }\n}\n","import { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type {\n  ContainerSheetContext,\n  ItemChatData,\n  ItemDescription,\n} from 'src/types/item.types';\nimport type {\n  ExpandedItemData,\n  ExpandedItemIdToLocationsMap,\n  ItemCardStore,\n  LocationToSearchTextMap,\n  MessageBus,\n  MessageBusMessage,\n  SearchFilterCacheable,\n  SheetExpandedItemsCacheable,\n  SheetStats,\n  SheetTabCacheable,\n  Tab,\n  Utilities,\n} from 'src/types/types';\nimport { debug } from 'src/utils/logging';\nimport { get, writable } from 'svelte/store';\nimport { CustomContentRenderer } from './CustomContentRenderer';\nimport {\n  applySheetAttributesToWindow,\n  applyThemeDataAttributeToWindow,\n  applyTitleToWindow,\n  maintainCustomContentInputFocus,\n} from 'src/utils/applications';\nimport { SettingsProvider, settingStore } from 'src/settings/settings';\nimport { ItemSheetRuntime } from 'src/runtime/item/ItemSheetRuntime';\nimport { TabManager } from 'src/runtime/tab/TabManager';\nimport { isNil } from 'src/utils/data';\nimport type { SvelteComponent } from 'svelte';\nimport ContainerSheet from './item/ContainerSheet.svelte';\nimport { initTidy5eContextMenu } from 'src/context-menu/tidy5e-context-menu';\nimport { ItemFilterService } from 'src/features/filtering/ItemFilterService';\nimport { StoreSubscriptionsService } from 'src/features/store/StoreSubscriptionsService';\nimport { SheetPreferencesService } from 'src/features/user-preferences/SheetPreferencesService';\nimport { CONSTANTS } from 'src/constants';\nimport { AsyncMutex } from 'src/utils/mutex';\nimport { ItemFilterRuntime } from 'src/runtime/item/ItemFilterRuntime';\nimport { DocumentTabSectionConfigApplication } from 'src/applications/section-config/DocumentTabSectionConfigApplication';\nimport type { CharacterFavorite } from 'src/foundry/dnd5e.types';\nimport { TidyHooks } from 'src/foundry/TidyHooks';\nimport { InlineContainerToggleService } from 'src/features/containers/InlineContainerToggleService';\nimport { Container } from 'src/features/containers/Container';\nimport { BaseSheetCustomSectionMixin } from './mixins/BaseSheetCustomSectionMixin';\n\nexport class Tidy5eKgarContainerSheet\n  extends BaseSheetCustomSectionMixin(\n    (object) => object.system.contents,\n    dnd5e.applications.item.ContainerSheet\n  )\n  implements\n    SheetTabCacheable,\n    SheetExpandedItemsCacheable,\n    SearchFilterCacheable\n{\n  context = writable<ContainerSheetContext>();\n  stats = writable<SheetStats>({\n    lastSubmissionTime: null,\n  });\n  currentTabId: string | undefined = undefined;\n  searchFilters: LocationToSearchTextMap = new Map<string, string>();\n  expandedItems: ExpandedItemIdToLocationsMap = new Map<string, Set<string>>();\n  expandedItemData: ExpandedItemData = new Map<string, ItemChatData>();\n  inlineContainerToggleService = new InlineContainerToggleService();\n  card = writable<ItemCardStore>();\n  itemFilterService: ItemFilterService;\n  subscriptionsService: StoreSubscriptionsService;\n  messageBus: MessageBus = writable<MessageBusMessage | undefined>();\n\n  constructor(...args: any[]) {\n    super(...args);\n\n    this.subscriptionsService = new StoreSubscriptionsService();\n\n    this.itemFilterService = new ItemFilterService({}, this.item);\n  }\n\n  get template() {\n    return FoundryAdapter.getTemplate('empty-form-template-for-items.hbs');\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      classes: ['tidy5e-sheet', 'sheet', 'item', 'container'],\n    });\n  }\n\n  component: SvelteComponent | undefined;\n  activateListeners(html: any) {\n    let first = true;\n    this.subscriptionsService.registerSubscriptions(\n      this.itemFilterService.filterData$.subscribe(() => {\n        if (first) return;\n        this.render();\n      }),\n      settingStore.subscribe((s) => {\n        if (first) return;\n        applyThemeDataAttributeToWindow(s.colorScheme, this.element.get(0));\n        this.render();\n      }),\n      this.messageBus.subscribe((m) => {\n        debug('Message bus message received', {\n          app: this,\n          actor: this.actor,\n          message: m,\n        });\n      })\n    );\n    first = false;\n\n    const node = html.get(0);\n\n    this.card.set({ sheet: node, item: null, itemCardContentTemplate: null });\n\n    const context = new Map<any, any>([\n      [CONSTANTS.SVELTE_CONTEXT.APP_ID, this.appId],\n      [CONSTANTS.SVELTE_CONTEXT.CARD, this.card],\n      [CONSTANTS.SVELTE_CONTEXT.CONTEXT, this.context],\n      [CONSTANTS.SVELTE_CONTEXT.CURRENT_TAB_ID, this.currentTabId],\n      [CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEMS, new Map(this.expandedItems)],\n      [\n        CONSTANTS.SVELTE_CONTEXT.EXPANDED_ITEM_DATA,\n        new Map(this.expandedItemData),\n      ],\n      [CONSTANTS.SVELTE_CONTEXT.MESSAGE_BUS, this.messageBus],\n      [\n        CONSTANTS.SVELTE_CONTEXT.INLINE_CONTAINER_TOGGLE_SERVICE,\n        this.inlineContainerToggleService,\n      ],\n      [\n        CONSTANTS.SVELTE_CONTEXT.ON_FILTER,\n        this.itemFilterService.onFilter.bind(this.itemFilterService),\n      ],\n      [\n        CONSTANTS.SVELTE_CONTEXT.ON_FILTER_CLEAR_ALL,\n        this.itemFilterService.onFilterClearAll.bind(this.itemFilterService),\n      ],\n      [CONSTANTS.SVELTE_CONTEXT.ON_ITEM_TOGGLED, this.onItemToggled.bind(this)],\n      [CONSTANTS.SVELTE_CONTEXT.ON_SEARCH, this.onSearch.bind(this)],\n      [CONSTANTS.SVELTE_CONTEXT.ON_TAB_SELECTED, this.onTabSelected.bind(this)],\n      [CONSTANTS.SVELTE_CONTEXT.SEARCH_FILTERS, new Map(this.searchFilters)],\n      [CONSTANTS.SVELTE_CONTEXT.STATS, this.stats],\n    ]);\n\n    this.component = new ContainerSheet({\n      target: node,\n      context: context,\n    });\n\n    initTidy5eContextMenu(this, html);\n  }\n\n  async getData(options = {}) {\n    const defaultDocumentContext = await super.getData(this.options);\n\n    this.item.actor?.system?.favorites?.forEach((f: CharacterFavorite) => {\n      const item = fromUuidSync(f.id, { relative: this.item.actor });\n\n      if (!item) {\n        return;\n      }\n\n      const ctx = defaultDocumentContext.itemContext[item.id];\n\n      if (ctx) {\n        ctx.favoriteId = f.id;\n      }\n    });\n\n    const itemDescriptions: ItemDescription[] = [];\n\n    itemDescriptions.push({\n      content: defaultDocumentContext.enriched.description,\n      field: 'system.description.value',\n      label: FoundryAdapter.localize('DND5E.Description'),\n    });\n\n    if (defaultDocumentContext.isIdentifiable && FoundryAdapter.userIsGm()) {\n      itemDescriptions.push({\n        content: defaultDocumentContext.enriched.unidentified,\n        field: 'system.unidentified.description',\n        label: FoundryAdapter.localize('DND5E.DescriptionUnidentified'),\n      });\n    }\n\n    itemDescriptions.push({\n      content: defaultDocumentContext.enriched.chat,\n      field: 'system.description.chat',\n      label: FoundryAdapter.localize('DND5E.DescriptionChat'),\n    });\n\n    const eligibleCustomTabs = ItemSheetRuntime.getCustomItemTabs(\n      defaultDocumentContext\n    );\n\n    const customTabs: Tab[] = await TabManager.prepareTabsForRender(\n      defaultDocumentContext,\n      eligibleCustomTabs\n    );\n\n    const tabs = ItemSheetRuntime.sheets[this.item.type]?.defaultTabs() ?? [];\n\n    tabs.push(...customTabs);\n\n    const containerPreferences = SheetPreferencesService.getByType(\n      this.item.type\n    );\n\n    const contentsSortMode =\n      containerPreferences.tabs?.[CONSTANTS.TAB_CONTAINER_CONTENTS]?.sort ??\n      'm';\n\n    // Utilities\n    let utilities: Utilities<ContainerSheetContext> = {\n      [CONSTANTS.TAB_CONTAINER_CONTENTS]: {\n        utilityToolbarCommands: [\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeAlpha'),\n            iconClass: 'fa-solid fa-arrow-down-a-z fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.item.type,\n                CONSTANTS.TAB_CONTAINER_CONTENTS,\n                'sort',\n                'm'\n              );\n              this.render();\n            },\n            visible: contentsSortMode === 'a',\n          },\n          {\n            title: FoundryAdapter.localize('SIDEBAR.SortModeManual'),\n            iconClass: 'fa-solid fa-arrow-down-short-wide fa-fw',\n            execute: async () => {\n              await SheetPreferencesService.setDocumentTypeTabPreference(\n                this.item.type,\n                CONSTANTS.TAB_CONTAINER_CONTENTS,\n                'sort',\n                'a'\n              );\n              this.render();\n            },\n            visible: contentsSortMode === 'm',\n          },\n          {\n            title: FoundryAdapter.localize(\n              'TIDY5E.Utilities.ConfigureSections'\n            ),\n            iconClass: 'fas fa-cog',\n            execute: ({ context }) => {\n              new DocumentTabSectionConfigApplication({\n                document: context.item,\n                // Provide a way to build the necessary config, perhaps within the application constructor. We've got all the info we need in order to perform the operation.\n                sections: context.containerContents.contents,\n                tabId: CONSTANTS.TAB_CONTAINER_CONTENTS,\n                tabTitle: ItemSheetRuntime.getTabTitle(\n                  CONSTANTS.TAB_CONTAINER_CONTENTS\n                ),\n              }).render(true);\n            },\n          },\n        ],\n      },\n    };\n\n    // Context Data\n    const context: ContainerSheetContext = {\n      ...defaultDocumentContext,\n      appId: this.appId,\n      activateEditors: (node, options) =>\n        FoundryAdapter.activateEditors(node, this, options?.bindSecrets),\n      containerContents: await Container.getContainerContents(this.item),\n      customContent: await ItemSheetRuntime.getContent(defaultDocumentContext),\n      filterData: this.itemFilterService.getDocumentItemFilterData(),\n      filterPins: ItemFilterRuntime.defaultFilterPins[this.item.type],\n      identifiedName: FoundryAdapter.getIdentifiedName(this.item),\n      itemDescriptions,\n      itemOverrides: new Set<string>(this._getItemOverrides()),\n      lockItemQuantity: FoundryAdapter.shouldLockItemQuantity(),\n      originalContext: defaultDocumentContext,\n      tabs: tabs,\n      utilities: utilities,\n      viewableWarnings:\n        defaultDocumentContext.warnings?.filter(\n          (w: any) => !isNil(w.message?.trim(), '')\n        ) ?? [],\n    };\n\n    const contents = await this.item.system.contents;\n\n    for (const item of contents) {\n      if (item.type === CONSTANTS.ITEM_TYPE_CONTAINER) {\n        const ctx = context.itemContext[item.id];\n        ctx.containerContents = await Container.getContainerContents(item);\n      }\n    }\n\n    TidyHooks.tidy5eSheetsPreConfigureSections(\n      this,\n      this.element.get(0),\n      context\n    );\n\n    debug(`Container Sheet context data`, context);\n\n    return context;\n  }\n\n  private async setExpandedItemData() {\n    this.expandedItemData.clear();\n    const contents = await this.item.system.contents;\n\n    for (const id of this.expandedItems.keys()) {\n      const item = contents.get(id);\n      if (item) {\n        this.expandedItemData.set(\n          id,\n          await item.getChatData({ secrets: this.item.isOwner })\n        );\n      }\n    }\n  }\n\n  private _renderMutex = new AsyncMutex();\n  async _render(force?: boolean, options = {}) {\n    if (typeof options !== 'object') {\n      options = {};\n    }\n    await this._renderMutex.lock(async () => {\n      await this._renderSheet(force, options);\n    });\n  }\n\n  private async _renderSheet(force?: boolean, options = {}) {\n    await this.setExpandedItemData();\n    const data = await this.getData();\n    this.context.set(data);\n\n    if (force) {\n      this.component?.$destroy();\n      await super._render(force, options);\n      applySheetAttributesToWindow(\n        this.item.documentName,\n        this.item.type,\n        SettingsProvider.settings.colorScheme.get(),\n        this.element.get(0)\n      );\n      await this.renderCustomContent({ data, isFullRender: true });\n      TidyHooks.tidy5eSheetsRenderItemSheet(\n        this,\n        this.element.get(0),\n        data,\n        true\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n      return;\n    }\n\n    maintainCustomContentInputFocus(this, async () => {\n      applyTitleToWindow(this.title, this.element.get(0));\n      await this.renderCustomContent({ data, isFullRender: false });\n      TidyHooks.tidy5eSheetsRenderItemSheet(\n        this,\n        this.element.get(0),\n        data,\n        false\n      );\n      CustomContentRenderer.wireCompatibilityEventListeners(\n        this.element,\n        super.activateListeners,\n        this\n      );\n    });\n  }\n\n  private async renderCustomContent(args: {\n    data: ContainerSheetContext;\n    isFullRender: boolean;\n  }) {\n    await CustomContentRenderer.render({\n      app: this,\n      customContent: args.data.customContent,\n      data: args.data,\n      element: this.element,\n      isFullRender: args.isFullRender,\n      superActivateListeners: super.activateListeners,\n      tabs: args.data.tabs,\n    });\n  }\n\n  async _onSubmit(...args: any[]) {\n    await super._onSubmit(...args);\n\n    // TODO: Figure out why multiple render calls is trashing the prose editor.\n    // This setTimeout() is making it so the item prose editors don't go nonresponsive.\n    // I think it may have something to do with Save -> Trigger Component Refresh (onSubmit) -> Render -> Trash Prose Editor HTML -> Render again\n    setTimeout(() => {\n      this.stats.update((stats) => {\n        stats.lastSubmissionTime = new Date();\n        return stats;\n      });\n    });\n  }\n\n  close(...args: any[]) {\n    try {\n      this._saveViewState();\n    } catch (e) {\n      debug(\n        `Unable to save view state for ${Tidy5eKgarContainerSheet.name}. Ignoring.`\n      );\n    } finally {\n      this.component?.$destroy();\n      this.subscriptionsService.unsubscribeAll();\n      return super.close(...args);\n    }\n  }\n\n  async _onDropSingleItem(...args: any[]) {\n    return super._onDropSingleItem(...args);\n  }\n\n  _getHeaderButtons() {\n    const buttons = super._getHeaderButtons();\n\n    return FoundryAdapter.removeConfigureSettingsButtonWhenLockedForNonGm(\n      buttons\n    );\n  }\n\n  _disableFields(...args: any[]) {\n    debug('Ignoring call to disable fields. Delegating to Tidy Sheets...');\n  }\n\n  /* -------------------------------------------- */\n  /* SheetTabCacheable\n  /* -------------------------------------------- */\n\n  onTabSelected(tabId: string) {\n    this.currentTabId = tabId;\n    const tabs = get(this.context)?.tabs ?? [];\n    setTimeout(() => {\n      this._handleAutoHeightTabs(tabs);\n    });\n  }\n\n  private _handleAutoHeightTabs(tabs: Tab[]) {\n    const currentTabSettings = tabs.find((t) => t.id === this.currentTabId);\n    if (currentTabSettings?.autoHeight) {\n      this._saveScrollPositions(this.element);\n      this.setPosition({ height: 'auto' });\n    }\n  }\n\n  /* -------------------------------------------- */\n  /* SheetExpandedItemsCacheable\n  /* -------------------------------------------- */\n\n  onItemToggled(itemId: string, isVisible: boolean, location: string) {\n    const locationSet =\n      this.expandedItems.get(itemId) ??\n      this.expandedItems.set(itemId, new Set<string>()).get(itemId);\n\n    if (isVisible) {\n      locationSet?.add(location);\n    } else {\n      locationSet?.delete(location);\n    }\n\n    debug('Item Toggled', {\n      expandedItems: this.expandedItems,\n    });\n  }\n\n  /* -------------------------------------------- */\n  /* SearchFilterCacheable\n  /* -------------------------------------------- */\n\n  onSearch(location: string, text: string): void {\n    debug('Searched', {\n      location,\n      text,\n    });\n    this.searchFilters.set(location, text);\n  }\n}\n","import { HandlebarsTab } from './tab/HandlebarsTab';\nimport { HtmlTab } from './tab/HtmlTab';\nimport { ItemSheetRuntime } from 'src/runtime/item/ItemSheetRuntime';\nimport type { CustomTabBase } from './tab/CustomTabBase';\nimport { warn } from 'src/utils/logging';\nimport { CharacterSheetRuntime } from 'src/runtime/CharacterSheetRuntime';\nimport { NpcSheetRuntime } from 'src/runtime/NpcSheetRuntime';\nimport { VehicleSheetRuntime } from 'src/runtime/VehicleSheetRuntime';\nimport { TabManager } from 'src/runtime/tab/TabManager';\nimport type { TabId } from './tab/CustomTabBase';\nimport { Tidy5eCharacterSheet } from 'src/sheets/Tidy5eCharacterSheet';\nimport { Tidy5eNpcSheet } from 'src/sheets/Tidy5eNpcSheet';\nimport { Tidy5eVehicleSheet } from 'src/sheets/Tidy5eKgarVehicleSheet';\nimport { Tidy5eKgarItemSheet } from 'src/sheets/Tidy5eItemSheet';\nimport { SvelteTab } from './tab/SvelteTab';\nimport type {\n  SupportedTab,\n  ActorTabRegistrationOptions,\n  ContentRegistrationOptions,\n  SupportedContent,\n  ItemTabRegistrationOptions,\n} from './api.types';\nimport ApiConstants from './ApiConstants';\nimport { HtmlContent } from './content/HtmlContent';\nimport { HandlebarsContent } from './content/HandlebarsContent';\nimport { CONSTANTS } from 'src/constants';\nimport { CustomContentManager } from 'src/runtime/content/CustomContentManager';\nimport { ConfigApi } from './config/ConfigApi';\nimport { Tidy5eKgarContainerSheet } from 'src/sheets/Tidy5eContainerSheet';\n\n/**\n * The Tidy 5e Sheets API. The API becomes available after the hook `tidy5e-sheet.ready` is called.\n * When the hook fires, it provides an instance of the API.\n * @example Getting the API for extending Tidy 5e Sheets\n * ```js\n * Hooks.once('tidy5e-sheet.ready', (api) => {\n *   // Do something awesome!\n * });\n * ```\n *\n * @example Getting the API from the module\n * ```js\n * game.modules.get('tidy5e-sheet').api\n * ```\n *\n * @remarks\n * It is recommended to retrieve the API from the `tidy5e-sheet.ready` hook, since the hook guarantees that the API has been initialized.\n *\n * @category Main\n */\nexport class Tidy5eSheetsApi {\n  private static _instance: Tidy5eSheetsApi;\n\n  private constructor() {}\n\n  /**\n   * Gets an instance of the Tidy 5e Sheets API\n   * @returns instance of the Tidy 5e Sheets API\n   * @internal\n   */\n  static _getApi() {\n    Tidy5eSheetsApi._instance ??= new Tidy5eSheetsApi();\n    return this._instance;\n  }\n\n  /** {@inheritDoc ActionListApi} */\n  /** @deprecated api.actionList API has been moved to api.config.actionList */\n  get actionList() {\n    warn('api.actionList API has been moved to api.config.actionList');\n    return this.config.actionList;\n  }\n\n  /** {@inheritDoc ActorItemApi} */\n  /** @deprecated api.actorItem API has been moved to api.config.actorItem */\n  get actorItem() {\n    warn('api.actorItem API has been moved to api.config.actorItem');\n    return this.config.actorItem;\n  }\n\n  /** {@inheritDoc ActorPortraitApi} */\n  /** @deprecated api.actorPortrait API has been moved to api.config.actorPortrait */\n  get actorPortrait() {\n    warn('api.actorPortrait API has been moved to api.config.actorPortrait');\n    return this.config.actorPortrait;\n  }\n\n  /** {@inheritDoc ConfigApi} */\n  config = new ConfigApi();\n\n  /**\n   * Constants for a variety of uses.\n   *\n   * @remarks\n   * When APIs call for specific IDs or selectors related to Tidy 5e Sheets,\n   * using the related constant when available will insulate against breakage\n   * when Tidy has internal changes.\n   */\n  constants = ApiConstants;\n\n  /**\n   * Creates a selector which allows for locating a part of a given sheet.\n   * @param sheetPart a part of the sheet as found in `api.constants.SHEET_PARTS`\n   * @returns an HTML selector valid for use with JavaScript query selectors\n   */\n  getSheetPartSelector(sheetPart: string) {\n    return `[${CONSTANTS.SHEET_PART_ATTRIBUTE}=\"${sheetPart}\"]`;\n  }\n\n  /** {@inheritDoc ExhaustionApi} */\n  /** @deprecated api.exhaustion API has been moved to api.config.exhaustion */\n  get exhaustion() {\n    warn('api.exhaustion API has been moved to api.config.exhaustion');\n    return this.config.exhaustion;\n  }\n\n  /**\n   * Determines whether the provided sheet is a Tidy 5e Character sheet.\n   * @param app an actor sheet\n   * @returns boolean indicating if the sheet is a Tidy 5e Character sheet\n   */\n  isTidy5eCharacterSheet(app: any) {\n    return Tidy5eCharacterSheet.name === app?.constructor?.name;\n  }\n\n  /**\n   * Determines whether the provided sheet is a Tidy 5e Container sheet.\n   * @param app a container sheet\n   * @returns boolean indicating if the sheet is a Tidy 5e Container sheet\n   */\n  isTidy5eContainerSheet(app: any) {\n    return Tidy5eKgarContainerSheet.name === app?.constructor?.name;\n  }\n\n  /**\n   * Determines whether the provided sheet is a Tidy 5e Item sheet.\n   * @param app an item sheet\n   * @returns boolean indicating if the sheet is a Tidy 5e Item sheet\n   */\n  isTidy5eItemSheet(app: any) {\n    return Tidy5eKgarItemSheet.name === app?.constructor?.name;\n  }\n\n  /**\n   * Determines whether the provided sheet is a Tidy 5e NPC sheet.\n   * @param app an actor sheet\n   * @returns boolean indicating if the sheet is a Tidy 5e NPC sheet\n   */\n  isTidy5eNpcSheet(app: any) {\n    return Tidy5eNpcSheet.name === app?.constructor?.name;\n  }\n\n  /**\n   * Determines whether the provided sheet is any Tidy 5e sheet.\n   * @param app an actor sheet\n   * @returns boolean indicating if the sheet is any Tidy 5e sheet\n   */\n  isTidy5eSheet(app: any) {\n    return [\n      Tidy5eCharacterSheet.name,\n      Tidy5eNpcSheet.name,\n      Tidy5eVehicleSheet.name,\n      Tidy5eKgarItemSheet.name,\n      Tidy5eKgarContainerSheet.name,\n    ].includes(app?.constructor?.name);\n  }\n\n  /**\n   * Determines whether the provided sheet is a Tidy 5e Vehicle sheet.\n   * @param app an actor sheet\n   * @returns boolean indicating if the sheet is a Tidy 5e Vehicle sheet\n   */\n  isTidy5eVehicleSheet(app: any) {\n    return Tidy5eVehicleSheet.name === app.constructor.name;\n  }\n\n  /**{@inheritDoc ItemSummaryApi} */\n  /** @deprecated api.itemSummary API has been moved to api.config.actorPortrait */\n  get itemSummary() {\n    warn('api.itemSummary API has been moved to api.config.actorPortrait');\n    return this.config.itemSummary;\n  }\n\n  /**\n   * Various models can be used for API calls.\n   */\n  models = {\n    HandlebarsTab: HandlebarsTab,\n    HtmlTab: HtmlTab,\n    SvelteTab: SvelteTab,\n    HandlebarsContent: HandlebarsContent,\n    HtmlContent: HtmlContent,\n  };\n\n  /**\n   * Adds a tab to the available sheet tabs for all actor types that Tidy 5e supports.\n   * @param {SupportedTab} tab the information necessary to render a tab\n   * @param {object} [options] sheet registration options\n   * @param {string} [options.layout] an optional sheet layout or layouts (default: 'all')\n   * @param {string} [options.overrideExisting] if a tab with this ID already exists, override it\n   * @returns void\n   */\n  registerActorTab(tab: SupportedTab, options?: ActorTabRegistrationOptions) {\n    this.registerCharacterTab(tab, options);\n    this.registerNpcTab(tab, options);\n    this.registerVehicleTab(tab, options);\n  }\n\n  /**\n   * Adds a tab to the available Character sheet tabs.\n   * @param {SupportedTab} tab the information necessary to render a tab\n   * @param {object} [options] sheet registration options\n   * @param {string} [options.layout] an optional sheet layout or layouts (default: 'all')\n   * @param {string} [options.overrideExisting] if a tab with this ID already exists, override it\n   * @returns void\n   *\n   * @example Registering a handlebars-based character sheet tab\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.registerCharacterTab(\n   *     new api.models.HandlebarsTab({\n   *       title: 'My Tab',\n   *       path: '/modules/my-module-id/templates/my-handlebars-template.hbs',\n   *       tabId: 'my-module-id-registered-character-tab',\n   *       getData: async (data) => {\n   *         data['my-message'] = 'Hello, world! 🌊🏄‍♂️';\n   *         return new Promise((resolve) => {\n   *           resolve(data);\n   *         });\n   *       },\n   *       onRender(params) {\n   *         const myTab = $(params.tabContentsElement);\n   *         myTab.find('.my-control').click(_myHandler.bind(params.app));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   *\n   * @example Overriding an existing sheet tab\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.registerCharacterTab(\n   *     new api.models.HandlebarsTab({\n   *       title: 'The New Inventory Tab',\n   *       path: '/modules/my-module-id/templates/my-handlebars-template.hbs',\n   *       tabId: api.constants.TAB_ID_CHARACTER_INVENTORY,\n   *       getData: async (data) => {\n   *         data['my-message'] = 'Hello, world! 🌊🏄‍♂️';\n   *         return new Promise((resolve) => {\n   *           resolve(data);\n   *         });\n   *       },\n   *       onRender(params) {\n   *         const myTab = $(params.tabContentsElement);\n   *         myTab.find('.my-control').click(_myHandler.bind(params.app));\n   *       },\n   *     }),\n   *     {\n   *       overrideExisting: true,\n   *     }\n   *   );\n   * });\n   * ```\n   *\n   * @remarks\n   * A tab ID is always required (see {@link TabId}).\n   */\n  registerCharacterTab(\n    tab: SupportedTab,\n    options?: ActorTabRegistrationOptions\n  ): void {\n    if (!TabManager.validateTab(tab)) {\n      return;\n    }\n\n    const registeredTab = TabManager.mapCustomTabToRegisteredTab(\n      tab,\n      options?.layout\n    );\n\n    if (!registeredTab) {\n      warn('Unable to register tab. Tab type not supported');\n      return;\n    }\n\n    CharacterSheetRuntime.registerTab(registeredTab, options);\n  }\n\n  /**\n   * Adds custom content to all actor sheets at `position` relative to `selector`.\n   *\n   * @param content the information necessary to render custom content\n   * @param options custom content registration options\n   * @returns void\n   *\n   * @example registering an icon next to the actor sheet name\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.registerActorContent(\n   *     new api.models.HtmlContent({\n   *       html: `<a title=\"Example Button\" class=\"my-custom-icon\"><i class=\"fas fa-user\"></i></a>`,\n   *       injectParams: {\n   *         selector: api.getSheetPartSelector(\n   *           api.constants.SHEET_PARTS.NAME_CONTAINER\n   *         ),\n   *         position: \"beforebegin\",\n   *       },\n   *       onContentReady: (params) => {\n   *         console.log(\"content ready to render\", params);\n   *         console.log(\"my content\", params.content);\n   *       },\n   *       onRender: (params) => {\n   *         params.element\n   *           .querySelector(\".my-custom-icon\")\n   *           .addEventListener(\"click\", () => alert(\"Clicked custom actor icon\"));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   */\n  registerActorContent(\n    content: SupportedContent,\n    options?: ContentRegistrationOptions\n  ) {\n    const registeredContent = CustomContentManager.mapToRegisteredContent(\n      content,\n      options?.layout\n    );\n\n    if (!registeredContent) {\n      warn('Unable to register content. Content type not supported.');\n      return;\n    }\n\n    CharacterSheetRuntime.registerContent(registeredContent);\n    NpcSheetRuntime.registerContent(registeredContent);\n    VehicleSheetRuntime.registerContent(registeredContent);\n  }\n\n  /**\n   * Adds custom content to player character sheets at `position` relative to `selector`.\n   *\n   * @param content the information necessary to render custom content\n   * @param options custom content registration options\n   * @returns void\n   *\n   * @example registering an icon next to the character sheet name\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.registerCharacterContent(\n   *     new api.models.HtmlContent({\n   *       html: `<a title=\"Example Button\" class=\"my-custom-icon\"><i class=\"fas fa-user\"></i></a>`,\n   *       injectParams: {\n   *         selector: api.getSheetPartSelector(\n   *           api.constants.SHEET_PARTS.NAME_CONTAINER\n   *         ),\n   *         position: \"beforebegin\",\n   *       },\n   *       onContentReady: (params) => {\n   *         console.log(\"content ready to render\", params);\n   *         console.log(\"my content\", params.content);\n   *       },\n   *       onRender: (params) => {\n   *         params.element\n   *           .querySelector(\".my-custom-icon\")\n   *           .addEventListener(\"click\", () => alert(\"Clicked custom PC icon\"));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   */\n  registerCharacterContent(\n    content: SupportedContent,\n    options?: ContentRegistrationOptions\n  ) {\n    const registeredContent = CustomContentManager.mapToRegisteredContent(\n      content,\n      options?.layout\n    );\n\n    if (!registeredContent) {\n      warn('Unable to register content. Content type not supported.');\n      return;\n    }\n\n    CharacterSheetRuntime.registerContent(registeredContent);\n  }\n\n  /**\n   * Adds custom content to item sheets at `position` relative to `selector`.\n   *\n   * @param content the information necessary to render custom content\n   * @param options custom content registration options\n   * @returns void\n   *\n   * @example registering an icon next to the item sheet name\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.registerItemContent(\n   *     new api.models.HtmlContent({\n   *       html: `<a title=\"Example Button\" class=\"my-custom-icon\"><i class=\"fas fa-flask\"></i></a>`,\n   *       injectParams: {\n   *         selector: api.getSheetPartSelector(\n   *           api.constants.SHEET_PARTS.NAME_CONTAINER\n   *         ),\n   *         position: \"beforebegin\",\n   *       },\n   *       onContentReady: (params) => {\n   *         console.log(\"content ready to render\", params);\n   *         console.log(\"my content\", params.content);\n   *       },\n   *       onRender: (params) => {\n   *         params.element\n   *           .querySelector(\".my-custom-icon\")\n   *           .addEventListener(\"click\", () => alert(\"Clicked custom item icon\"));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   */\n  registerItemContent(\n    content: SupportedContent,\n    options?: ContentRegistrationOptions\n  ) {\n    const registeredContent = CustomContentManager.mapToRegisteredContent(\n      content,\n      options?.layout\n    );\n\n    if (!registeredContent) {\n      warn('Unable to register content. Content type not supported.');\n      return;\n    }\n\n    ItemSheetRuntime.registerContent(registeredContent);\n  }\n\n  /**\n   * Adds custom content to NPC sheets at `position` relative to `selector`.\n   *\n   * @param content the information necessary to render custom content\n   * @param options custom content registration options\n   * @returns void\n   *\n   * @example registering an icon next to the NPC sheet name\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.registerNpcContent(\n   *     new api.models.HtmlContent({\n   *       html: `<a title=\"Example Button\" class=\"my-custom-icon\"><i class=\"fas fa-user\"></i></a>`,\n   *       injectParams: {\n   *         selector: api.getSheetPartSelector(\n   *           api.constants.SHEET_PARTS.NAME_CONTAINER\n   *         ),\n   *         position: \"beforebegin\",\n   *       },\n   *       onContentReady: (params) => {\n   *         console.log(\"content ready to render\", params);\n   *         console.log(\"my content\", params.content);\n   *       },\n   *       onRender: (params) => {\n   *         params.element\n   *           .querySelector(\".my-custom-icon\")\n   *           .addEventListener(\"click\", () => alert(\"Clicked custom NPC icon\"));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   */\n  registerNpcContent(\n    content: SupportedContent,\n    options?: ContentRegistrationOptions\n  ) {\n    const registeredContent = CustomContentManager.mapToRegisteredContent(\n      content,\n      options?.layout\n    );\n\n    if (!registeredContent) {\n      warn('Unable to register content. Content type not supported.');\n      return;\n    }\n\n    NpcSheetRuntime.registerContent(registeredContent);\n  }\n\n  /**\n   * Adds custom content to vehicle sheets at `position` relative to `selector`.\n   *\n   * @param content the information necessary to render custom content\n   * @param options custom content registration options\n   * @returns void\n   *\n   * @example registering an icon next to the vehicle sheet name\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.registerVehicleContent(\n   *     new api.models.HtmlContent({\n   *       html: `<a title=\"Example Button\" class=\"my-custom-icon\"><i class=\"fas fa-user\"></i></a>`,\n   *       injectParams: {\n   *         selector: api.getSheetPartSelector(\n   *           api.constants.SHEET_PARTS.NAME_CONTAINER\n   *         ),\n   *         position: \"beforebegin\",\n   *       },\n   *       onContentReady: (params) => {\n   *         console.log(\"content ready to render\", params);\n   *         console.log(\"my content\", params.content);\n   *       },\n   *       onRender: (params) => {\n   *         params.element\n   *           .querySelector(\".my-custom-icon\")\n   *           .addEventListener(\"click\", () => alert(\"Clicked Vehicle custom icon\"));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   */\n  registerVehicleContent(\n    content: SupportedContent,\n    options?: ContentRegistrationOptions\n  ) {\n    const registeredContent = CustomContentManager.mapToRegisteredContent(\n      content,\n      options?.layout\n    );\n\n    if (!registeredContent) {\n      warn('Unable to register content. Content type not supported.');\n      return;\n    }\n\n    VehicleSheetRuntime.registerContent(registeredContent);\n  }\n\n  /**\n   * Adds a tab to all relevant item sheets.\n   * @see {@link CustomTabBase} for options related to all tabs.\n   * @param tab the custom tab settings to use when incorporating this tab.\n   * @example Register an item tab for spell items only, adding some custom data to the Item Sheet Context object before rendering my handlebars template\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.registerItemTab(\n   *     new api.models.HandlebarsTab({\n   *       title: 'My Item Tab',\n   *       tabId: 'my-module-id-my-item-tab',\n   *       path: '/modules/my-module-id/my-item-tab.hbs',\n   *       enabled: (data) => data.item.type === 'spell',\n   *       getData: (data) => {\n   *         data['my-extra-data'] = 'Hello, world! 👋';\n   *         return data;\n   *       },\n   *       onRender(params) {\n   *         const myTab = $(params.tabContentsElement);\n   *         myTab.find('.my-control').click(_myHandler.bind(params.app));\n   *       },\n   *     }));\n   * });\n   * ```\n   *\n   * @example Register an item tab with autoHeight, similar to how Details item tabs work.\n   * ```js\n   * Hooks.once(\"tidy5e-sheet.ready\", (api) => {\n   *   api.registerItemTab(\n   *     new api.models.HtmlTab({\n   *       title: \"My Item Tab\",\n   *       tabId: \"my-module-id-my-item-tab\",\n   *       html: \"<h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h1>LOREM! IPSUM! FIREBALLLLLL!!</h1><h2>🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥</h2>\",\n   *     }),\n   *     { autoHeight: true } // 👈 With Auto Height set to `true`, the item window will stretch as tall as it can to match the content height when this tab is viewed.\n   *   );\n   * });\n   * ```\n   *\n   * @remarks\n   * A tab ID is always required (see {@link TabId}).\n   */\n  registerItemTab(\n    tab: SupportedTab,\n    options?: ItemTabRegistrationOptions\n  ): void {\n    if (!TabManager.validateTab(tab)) {\n      return;\n    }\n\n    const registeredTab = TabManager.mapCustomTabToRegisteredTab(tab);\n\n    if (!registeredTab) {\n      warn('Unable to register tab. Tab type not supported');\n      return;\n    }\n\n    if (options?.autoHeight) {\n      registeredTab.autoHeight = options.autoHeight;\n    }\n\n    ItemSheetRuntime.registerTab(registeredTab);\n  }\n\n  /**\n   * Adds a tab to the available NPC sheet tabs.\n   * @param {SupportedTab} tab the information necessary to render a tab\n   * @param {object} [options] sheet registration options\n   * @param {string} [options.layout] an optional sheet layout or layouts (default: 'all')\n   * @param {string} [options.overrideExisting] if a tab with this ID already exists, override it\n   * @returns void\n   * @example Registering a handlebars-based NPC sheet tab\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.registerNpcTab(\n   *     new api.models.HandlebarsTab({\n   *       title: 'My Tab',\n   *       path: '/modules/my-module-id/templates/my-handlebars-template.hbs',\n   *       tabId: 'my-module-id-registered-npc-tab',\n   *       getData: async (data) => {\n   *         data['my-message'] = 'Hello, world! 🌊🏄‍♂️';\n   *         return new Promise((resolve) => {\n   *           resolve(data);\n   *         });\n   *       },\n   *       onRender(params) {\n   *         const myTab = $(params.tabContentsElement);\n   *         myTab.find('.my-control').click(_myHandler.bind(params.app));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   *\n   * @remarks\n   * A tab ID is always required (see {@link TabId}).\n   */\n  registerNpcTab(\n    tab: SupportedTab,\n    options?: ActorTabRegistrationOptions\n  ): void {\n    if (!TabManager.validateTab(tab)) {\n      return;\n    }\n    const registeredTab = TabManager.mapCustomTabToRegisteredTab(\n      tab,\n      options?.layout\n    );\n\n    if (!registeredTab) {\n      warn('Unable to register tab. Tab type not supported');\n      return;\n    }\n\n    NpcSheetRuntime.registerTab(registeredTab);\n  }\n\n  /**\n   * Adds a tab to the available Vehicle sheet tabs.\n   * @param {SupportedTab} tab the information necessary to render a tab\n   * @param {object} [options] sheet registration options\n   * @param {string} [options.layout] an optional sheet layout or layouts (default: 'all')\n   * @param {string} [options.overrideExisting] if a tab with this ID already exists, override it\n   * @returns void\n   * @example Registering a handlebars-based vehicle sheet tab\n   * ```js\n   * Hooks.once('tidy5e-sheet.ready', (api) => {\n   *   api.registerVehicleTab(\n   *     new api.models.HandlebarsTab({\n   *       title: 'My Tab',\n   *       path: '/modules/my-module-id/templates/my-handlebars-template.hbs',\n   *       tabId: 'my-module-id-registered-vehicle-tab',\n   *       getData: async (data) => {\n   *         data['my-message'] = 'Hello, world! 🌊🏄‍♂️';\n   *         return new Promise((resolve) => {\n   *           resolve(data);\n   *         });\n   *       },\n   *       onRender(params) {\n   *         const myTab = $(params.tabContentsElement);\n   *         myTab.find('.my-control').click(_myHandler.bind(params.app));\n   *       },\n   *     })\n   *   );\n   * });\n   * ```\n   *\n   * @remarks\n   * A tab ID is always required (see {@link TabId}).\n   */\n  registerVehicleTab(\n    tab: SupportedTab,\n    options?: ActorTabRegistrationOptions\n  ): void {\n    if (!TabManager.validateTab(tab)) {\n      return;\n    }\n    const registeredTab = TabManager.mapCustomTabToRegisteredTab(\n      tab,\n      options?.layout\n    );\n\n    if (!registeredTab) {\n      warn('Unable to register tab. Tab type not supported');\n      return;\n    }\n\n    VehicleSheetRuntime.registerTab(registeredTab);\n  }\n\n  /**\n   * Wraps the provided HTML so that Tidy will remove the content when handling document changes.\n   * @param html any HTML string that needs to be re-rendered in the style of Foundry Handlebars (usually, this is any time the target document or its embedded documents change).\n   * @returns the original HTML with a transparent element wrapped around which indicates to Tidy that this should be removed and re-rendered.\n   *\n   * @remarks\n   * The intended use of this function is to accompany the use of the `tidy5e-sheet.renderActorSheet` or `tidy5e-sheet.renderItemSheet` hook.\n   * Any content injected through those hooks needs to be wrapped in this way so that the old version\n   * of the HTML can be removed before adding it back in.\n   * Handlebars refreshes content in this way, but for Tidy purposes, the module needs to know when an arbitrary\n   * segment of HTML is meant to be removed. This function provides that information to Tidy for your HTML.\n   *\n   * @example Injecting dynamic HTML through Tidy actor sheet render hook\n   * ```js\n   * Hooks.on('tidy5e-sheet.renderActorSheet', (app, element, data) => {\n   *   const api = game.modules.get('tidy5e-sheet').api;\n   *   const actorEmoji = data.actor.system.currency.pp > 0 ? '💹' : '📉';\n   *   let iconHtml = api.useHandlebarsRendering(`<h1>${actorEmoji}</h1>`);\n   *   // 👆 This HTML looks like `<div style=\"display: contents;\" data-tidy-render-scheme=\"handlebars\"><h1>📉</h1></div>`\n   *   // if the actor doesn't have at least 1 platinum.\n   *   // Tidy will remove this each time the sheet would normally re-render, and it will add it back.\n   *   // When the actor have more than 0 platinum, stonks will rise.\n   *\n   *   let actorNameElement = element.querySelector(`[data-tidy-field=\"name\"]`);\n   *   actorNameElement?.insertAdjacentHTML('afterend', iconHtml);\n   * });\n   * ```\n   */\n  useHandlebarsRendering(html: string): string {\n    return `<div style=\"display: contents;\" ${CONSTANTS.HTML_DYNAMIC_RENDERING_ATTRIBUTE}>${html}</div>`;\n  }\n}\n","import { TidyFlags } from 'src/api';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type { Actor5e } from 'src/types/types';\nimport { error } from 'src/utils/logging';\n\nconst tidyFlagIdeal = 'ideal';\nconst tidyFlagBond = 'bond';\nconst tidyFlagFlaw = 'flaw';\n\ntype BondsIdealsFlawsToSystemMigrationParams = {\n  npc: Actor5e;\n  overwrite: boolean;\n  clearFlagData: boolean;\n};\n\nexport async function migrateBondsIdealsFlawsToSystem({\n  npc,\n  clearFlagData,\n  overwrite,\n}: BondsIdealsFlawsToSystemMigrationParams) {\n  if (!npc) {\n    return;\n  }\n\n  try {\n    let updates: Record<string, string> = {};\n\n    let systemBond = (npc.system.details.bond ?? '').trim();\n    if (systemBond === '' || overwrite) {\n      updates['system.details.bond'] =\n        TidyFlags.tryGetFlag(npc, tidyFlagBond) ?? '';\n    }\n\n    let systemIdeal = (npc.system.details.ideal ?? '').trim();\n    if (systemIdeal === '' || overwrite) {\n      updates['system.details.ideal'] =\n        TidyFlags.tryGetFlag(npc, tidyFlagIdeal) ?? '';\n    }\n\n    let systemFlaw = (npc.system.details.flaw ?? '').trim();\n    if (systemFlaw === '' || overwrite) {\n      updates['system.details.flaw'] =\n        TidyFlags.tryGetFlag(npc, tidyFlagFlaw) ?? '';\n    }\n\n    if (Object.keys(updates).length > 0) {\n      await npc.update(updates);\n    }\n\n    if (clearFlagData) {\n      await TidyFlags.unsetFlag(npc, tidyFlagIdeal);\n      await TidyFlags.unsetFlag(npc, tidyFlagBond);\n      await TidyFlags.unsetFlag(npc, tidyFlagFlaw);\n    }\n  } catch (e) {\n    error(\"An error occurred while migrating an NPC's bonds, ideals, and flaws\", false, {\n      error: e,\n      actor: npc,\n      clearFlagData,\n      overwrite,\n    });\n    error(\n      FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.migrationErrorMessage'\n      ),\n      true\n    );\n  }\n}\n","<script lang=\"ts\">\n  import type { Actor5e } from 'src/types/types';\n  import { MigrationSelectionApplication } from '../migration-selection/MigrationSelectionApplication';\n  import { CONSTANTS } from 'src/constants';\n  import { migrateBondsIdealsFlawsToSystem } from './bonds-ideals-flaws-to-system';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CompendiumToMigrate } from '../migration.types';\n  import { debug, error } from 'src/utils/logging';\n\n  let migrating = false;\n  let deleteFlags = false;\n  let overwrite = false;\n\n  const localize = FoundryAdapter.localize;\n\n  async function migrate() {\n    const actorsToMigrate = Array.from<Actor5e>(game.actors).filter(\n      (a) => a.isOwner && a.type === CONSTANTS.SHEET_TYPE_NPC,\n    );\n\n    new MigrationSelectionApplication<{ item: Actor5e }>({\n      onConfirm: async (selected) => {\n        migrating = true;\n\n        ui.notifications.info(\n          localize('TIDY5E.Settings.Migrations.migrationBeginningMessage'),\n        );\n\n        for (let choice of selected) {\n          await migrateBondsIdealsFlawsToSystem({\n            npc: choice,\n            clearFlagData: deleteFlags,\n            overwrite: overwrite,\n          });\n        }\n\n        ui.notifications.info(\n          localize('TIDY5E.Settings.Migrations.migrationCompleteMessage'),\n        );\n\n        resetOptions();\n\n        migrating = false;\n      },\n      columns: [\n        {\n          cellWidth: 'primary',\n          field: {\n            type: 'simple',\n            propPath: 'name',\n            onClick: (target: Actor5e) => target.sheet.render(true),\n          },\n          name: localize('TIDY5E.Settings.Migrations.Selection.ToMigrate'),\n        },\n      ],\n      documents: actorsToMigrate,\n      title: FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.BondsIdealsFlawsToSystem.selectionDialogTitle',\n      ),\n    }).render(true);\n  }\n\n  async function migrateCompendia() {\n    const compendiaForMigrating = Array.from(game.packs.values())\n      .filter((c: any) => !c.locked && c.documentName === 'Actor')\n      .map((c: any) => ({\n        label: c.metadata.label,\n        type: c.metadata.type,\n        id: c.metadata.id,\n        size: c.index.size,\n      }));\n\n    new MigrationSelectionApplication<CompendiumToMigrate>({\n      onConfirm: async (selected) => {\n        ui.notifications.info(\n          localize(`TIDY5E.Settings.Migrations.migrationBeginningMessage`),\n        );\n        for (const compendium of selected) {\n          debug(`Migrating compendium \"${compendium.label}\"...`);\n          try {\n            const actors = await game.packs.get(compendium.id).getDocuments();\n            for (const actor of actors) {\n              if (actor.type !== CONSTANTS.SHEET_TYPE_NPC) {\n                continue;\n              }\n\n              await migrateBondsIdealsFlawsToSystem({\n                npc: actor,\n                overwrite: overwrite,\n                clearFlagData: deleteFlags,\n              });\n            }\n            debug(`Compendium \"${compendium.label}\" migration successful.`);\n          } catch (e) {\n            error(\n              localize('TIDY5E.Settings.Migrations.migrationErrorMessage'),\n              true,\n            );\n            error(\n              `Error while migrating compendium \"${compendium.label}\"`,\n              false,\n              e,\n            );\n          }\n        }\n        ui.notifications.info(\n          localize(`TIDY5E.Settings.Migrations.migrationCompleteMessage`),\n        );\n      },\n      columns: [\n        {\n          cellWidth: 'primary',\n          field: {\n            type: 'simple',\n            propPath: 'label',\n            onClick: (target) => game.packs.get(target.id).render(true),\n          },\n          name: localize(\n            'TIDY5E.Settings.Migrations.MigrateCompendia.CompendiumLabel',\n          ),\n        },\n        {\n          cellWidth: '5rem',\n          field: {\n            type: 'contextual',\n            getText: (c) => localize(`DOCUMENT.${c.type}`),\n          },\n          name: localize('Type'),\n        },\n        {\n          cellWidth: '10rem',\n          field: {\n            type: 'simple',\n            propPath: 'size',\n          },\n          name: localize(\n            'TIDY5E.Settings.Migrations.MigrateCompendia.TotalEntriesLabel',\n          ),\n        },\n      ],\n      documents: compendiaForMigrating,\n      title: localize(\n        'TIDY5E.Settings.Migrations.MigrateCompendia.SelectionDialogTitle',\n      ),\n    }).render(true);\n  }\n\n  function resetOptions() {\n    deleteFlags = false;\n    overwrite = false;\n  }\n</script>\n\n<section>\n  <h2>\n    {localize(\n      'TIDY5E.Settings.Migrations.BondsIdealsFlawsToSystem.sectionTitle',\n    )}\n  </h2>\n  <h3>{localize('TIDY5E.Settings.Migrations.OptionsHeader')}</h3>\n  <div class=\"options grid-auto-columns\">\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionOverwrite.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={overwrite} disabled={migrating} />\n      {localize('TIDY5E.Settings.Migrations.OptionOverwrite.Text')}\n    </label>\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionDeleteFlags.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={deleteFlags} disabled={migrating} />\n\n      {localize('TIDY5E.Settings.Migrations.OptionDeleteFlags.Text')}\n    </label>\n  </div>\n\n  <footer class=\"flex-row extra-small-gap\">\n    <button\n      type=\"button\"\n      on:click={(ev) => migrateCompendia()}\n      disabled={migrating}\n      >{localize('TIDY5E.Settings.Migrations.MigrateCompendia.Title')}</button\n    >\n    <button type=\"button\" on:click={(ev) => migrate()} disabled={migrating}\n      >{localize('TIDY5E.Settings.Migrations.ButtonMigration.Text')}</button\n    >\n  </footer>\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .options {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  footer {\n    margin-top: auto;\n  }\n</style>\n","import { TidyFlags } from 'src/api';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport type { Item5e } from 'src/types/item.types';\nimport { error } from 'src/utils/logging';\n\nconst tidyFlagParentClass = 'parentClass';\n\ntype SpellClassToSourceClassMigrationParams = {\n  item: Item5e;\n  overwrite: boolean;\n  clearFlagData: boolean;\n};\n\nexport async function migrateSpellClassToSourceClass({\n  item,\n  clearFlagData,\n  overwrite,\n}: SpellClassToSourceClassMigrationParams) {\n  if (!item) {\n    return;\n  }\n\n  try {\n    let updates: Record<string, string> = {};\n\n    let sourceClass = (item.system.sourceClass ?? '').trim();\n    if (sourceClass === '' || overwrite) {\n      updates['system.sourceClass'] =\n        TidyFlags.tryGetFlag(item, tidyFlagParentClass) ?? '';\n    }\n\n    if (Object.keys(updates).length > 0) {\n      await item.update(updates);\n    }\n\n    if (clearFlagData) {\n      await TidyFlags.unsetFlag(item, tidyFlagParentClass);\n    }\n  } catch (e) {\n    error(\"An error occurred while migrating an item's parent class\", false, {\n      error: e,\n      item,\n      clearFlagData,\n      overwrite,\n    });\n    error(\n      FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.migrationErrorMessage'\n      ),\n      true\n    );\n  }\n}\n","<script lang=\"ts\">\n  import { MigrationSelectionApplication } from '../migration-selection/MigrationSelectionApplication';\n  import { CONSTANTS } from 'src/constants';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { CompendiumToMigrate } from '../migration.types';\n  import { debug, error } from 'src/utils/logging';\n  import { migrateSpellClassToSourceClass } from './spell-class-to-source-class';\n  import type { Item5e } from 'src/types/item.types';\n\n  let migrating = false;\n  let deleteFlags = false;\n  let overwrite = false;\n\n  const localize = FoundryAdapter.localize;\n\n  async function migrate() {\n    const actorItemsToMigrate = Array.from<any>(game.actors)\n      .filter((a) => a.isOwner)\n      .map((a) => ({ actor: a, unlinked: false }))\n      .flatMap((value) =>\n        Array.from<Item5e>(value.actor.items)\n          .filter((item) => item.type === CONSTANTS.ITEM_TYPE_SPELL)\n          .map((item) => ({\n            item,\n            unlinked: value.unlinked,\n          })),\n      );\n\n    const worldItemsToMigrate = Array.from<any>(game.items).map((item) => ({\n      item,\n      unlinked: true,\n    }));\n\n    const itemsToMigrate = [...actorItemsToMigrate, ...worldItemsToMigrate];\n\n    new MigrationSelectionApplication<{ item: Item5e; unlinked: boolean }>({\n      onConfirm: async (selected) => {\n        migrating = true;\n\n        ui.notifications.info(\n          localize('TIDY5E.Settings.Migrations.migrationBeginningMessage'),\n        );\n\n        for (let choice of selected) {\n          await migrateSpellClassToSourceClass({\n            item: choice.item,\n            clearFlagData: deleteFlags,\n            overwrite: overwrite,\n          });\n        }\n\n        ui.notifications.info(\n          localize('TIDY5E.Settings.Migrations.migrationCompleteMessage'),\n        );\n\n        resetOptions();\n\n        migrating = false;\n      },\n      columns: [\n        {\n          cellWidth: 'primary',\n          field: {\n            type: 'simple',\n            propPath: 'item.name',\n            onClick: (target) => target.item.sheet.render(true),\n          },\n          name: localize('TIDY5E.Settings.Migrations.Selection.ToMigrate'),\n        },\n        {\n          cellWidth: '10rem',\n          field: {\n            type: 'simple',\n            propPath: `item.parent.name`,\n            onClick: (target) => target.item.parent?.sheet?.render(true),\n          },\n          name: localize('TIDY5E.Settings.Migrations.Parent'),\n        },\n        {\n          cellWidth: '10rem',\n          name: '',\n          field: {\n            type: 'contextual',\n            getText: ({ unlinked }) =>\n              unlinked\n                ? FoundryAdapter.localize('TIDY5E.TokenUnlinked')\n                : FoundryAdapter.localize('DOCUMENT.Actor'),\n          },\n        },\n      ],\n      documents: itemsToMigrate,\n      title: FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.SpellClassToSourceClass.selectionDialogTitle',\n      ),\n    }).render(true);\n  }\n\n  async function migrateCompendia() {\n    const compendiaForMigrating = Array.from(game.packs.values())\n      .filter((c: any) => !c.locked && c.documentName === 'Item')\n      .map((c: any) => ({\n        label: c.metadata.label,\n        type: c.metadata.type,\n        id: c.metadata.id,\n        size: c.index.size,\n      }));\n\n    new MigrationSelectionApplication<CompendiumToMigrate>({\n      onConfirm: async (selected) => {\n        ui.notifications.info(\n          localize(`TIDY5E.Settings.Migrations.migrationBeginningMessage`),\n        );\n        for (const compendium of selected) {\n          debug(`Migrating compendium \"${compendium.label}\"...`);\n          try {\n            const items = await game.packs.get(compendium.id).getDocuments();\n            for (const item of items) {\n              if (item.type !== CONSTANTS.ITEM_TYPE_SPELL) {\n                continue;\n              }\n\n              await migrateSpellClassToSourceClass({\n                item: item,\n                overwrite: overwrite,\n                clearFlagData: deleteFlags,\n              });\n            }\n            debug(`Compendium \"${compendium.label}\" migration successful.`);\n          } catch (e) {\n            error(\n              localize('TIDY5E.Settings.Migrations.migrationErrorMessage'),\n              true,\n            );\n            error(\n              `Error while migrating compendium \"${compendium.label}\"`,\n              false,\n              e,\n            );\n          }\n        }\n        ui.notifications.info(\n          localize(`TIDY5E.Settings.Migrations.migrationCompleteMessage`),\n        );\n      },\n      columns: [\n        {\n          cellWidth: 'primary',\n          field: {\n            type: 'simple',\n            propPath: 'label',\n            onClick: (target) => game.packs.get(target.id).render(true),\n          },\n          name: localize(\n            'TIDY5E.Settings.Migrations.MigrateCompendia.CompendiumLabel',\n          ),\n        },\n        {\n          cellWidth: '5rem',\n          field: {\n            type: 'contextual',\n            getText: (c) => localize(`DOCUMENT.${c.type}`),\n          },\n          name: localize('Type'),\n        },\n        {\n          cellWidth: '10rem',\n          field: {\n            type: 'simple',\n            propPath: 'size',\n          },\n          name: localize(\n            'TIDY5E.Settings.Migrations.MigrateCompendia.TotalEntriesLabel',\n          ),\n        },\n      ],\n      documents: compendiaForMigrating,\n      title: localize(\n        'TIDY5E.Settings.Migrations.MigrateCompendia.SelectionDialogTitle',\n      ),\n    }).render(true);\n  }\n\n  function resetOptions() {\n    deleteFlags = false;\n    overwrite = false;\n  }\n</script>\n\n<section>\n  <h2>\n    {localize(\n      'TIDY5E.Settings.Migrations.SpellClassToSourceClass.sectionTitle',\n    )}\n  </h2>\n  <h3>{localize('TIDY5E.Settings.Migrations.OptionsHeader')}</h3>\n  <div class=\"options grid-auto-columns\">\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionOverwrite.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={overwrite} disabled={migrating} />\n      {localize('TIDY5E.Settings.Migrations.OptionOverwrite.Text')}\n    </label>\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionDeleteFlags.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={deleteFlags} disabled={migrating} />\n\n      {localize('TIDY5E.Settings.Migrations.OptionDeleteFlags.Text')}\n    </label>\n  </div>\n\n  <footer class=\"flex-row extra-small-gap\">\n    <button\n      type=\"button\"\n      on:click={(ev) => migrateCompendia()}\n      disabled={migrating}\n      >{localize('TIDY5E.Settings.Migrations.MigrateCompendia.Title')}</button\n    >\n    <button type=\"button\" on:click={(ev) => migrate()} disabled={migrating}\n      >{localize('TIDY5E.Settings.Migrations.ButtonMigration.Text')}</button\n    >\n  </footer>\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .options {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  footer {\n    margin-top: auto;\n  }\n</style>\n","import { TidyFlags } from 'src/foundry/TidyFlags';\nimport type { Actor5e } from 'src/types/types';\n\ntype NpcExhaustionToSystemMigrationParams = {\n  npc: Actor5e;\n  clearFlagData: boolean;\n};\n\nconst exhaustionFlag = 'exhaustion';\n\nexport async function migrateNpcExhaustionToSystem({\n  npc,\n  clearFlagData,\n}: NpcExhaustionToSystemMigrationParams) {\n  const tidyExhaustion = TidyFlags.tryGetFlag<number | undefined>(\n    npc,\n    exhaustionFlag\n  );\n\n  if (tidyExhaustion === null || tidyExhaustion === undefined) {\n    return;\n  }\n\n  await npc.update({\n    'system.attributes.exhaustion': tidyExhaustion,\n  });\n\n  if (clearFlagData) {\n    TidyFlags.unsetFlag(npc, exhaustionFlag);\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import type { Actor5e } from 'src/types/types';\n  import { debug, error } from 'src/utils/logging';\n\n  import { MigrationSelectionApplication } from '../migration-selection/MigrationSelectionApplication';\n  import { CONSTANTS } from 'src/constants';\n  import { migrateNpcExhaustionToSystem } from './npc-exhaustion-to-system';\n\n  let migrating = false;\n  let deleteFlags = false;\n\n  async function migrate() {\n    try {\n      const actorsToMigrate = Array.from<any>(game.actors)\n        .filter((a) => a.type === CONSTANTS.SHEET_TYPE_NPC && a.isOwner)\n        .map((a) => ({ actor: a, unlinked: false }));\n      const tokenActors = Array.from(canvas?.scene?.tokens ?? [])\n        .filter(\n          (t: any) =>\n            t.actor?.type === CONSTANTS.SHEET_TYPE_NPC &&\n            !t.actor.prototypeToken?.actorLink &&\n            t.actor.isOwner,\n        )\n        .map((t: any) => ({ actor: t.actor, unlinked: true }));\n      actorsToMigrate.push(...tokenActors);\n      new MigrationSelectionApplication<{ actor: Actor5e; unlinked: boolean }>(\n        {\n          onConfirm: async (selected) => {\n            migrating = true;\n            ui.notifications.info(\n              localize('TIDY5E.Settings.Migrations.migrationBeginningMessage'),\n            );\n            migrateActors(selected.map((s) => s.actor));\n          },\n          columns: [\n            {\n              cellWidth: 'primary',\n              field: {\n                type: 'simple',\n                propPath: 'actor.name',\n                onClick: (target) => target.actor.sheet.render(true),\n              },\n              name: localize('TIDY5E.Settings.Migrations.Selection.ToMigrate'),\n            },\n            {\n              cellWidth: '5rem',\n              field: {\n                type: 'simple',\n                propPath: `actor.flags.${CONSTANTS.MODULE_ID}.exhaustion`,\n              },\n              name: localize('DND5E.Exhaustion'),\n            },\n            {\n              cellWidth: '10rem',\n              name: '',\n              field: {\n                type: 'contextual',\n                getText: ({ unlinked }) =>\n                  unlinked\n                    ? FoundryAdapter.localize('TIDY5E.TokenUnlinked')\n                    : FoundryAdapter.localize('DOCUMENT.Actor'),\n              },\n            },\n          ],\n          documents: actorsToMigrate,\n          title: FoundryAdapter.localize(\n            'TIDY5E.Settings.Migrations.NpcExhaustion.selectionDialogTitle',\n          ),\n        },\n        () => {\n          migrating = false;\n        },\n      ).render(true);\n    } catch (e) {\n      error('An error occurred while preparing a bulk migration', false, e);\n    }\n  }\n\n  async function migrateActors(actors: Actor5e[]) {\n    try {\n      for (let actorToMigrate of actors) {\n        await migrateActor(actorToMigrate);\n      }\n    } finally {\n      migrating = false;\n      ui.notifications.info(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationCompleteMessage',\n        ),\n      );\n      resetOptions();\n    }\n  }\n\n  function resetOptions() {\n    deleteFlags = false;\n  }\n\n  async function migrateActor(actor: Actor5e) {\n    try {\n      debug(`Migrating actor ${actor?.name}...`);\n      migrateNpcExhaustionToSystem({\n        npc: actor,\n        clearFlagData: deleteFlags,\n      });\n      debug(`Actor ${actor?.name} migration successful!`);\n    } catch (e) {\n      error(\n        `An error occurred while migrating NPC exhaustion data for ${actor?.name}`,\n        false,\n        e,\n      );\n      ui.notifications.error(\n        FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrationErrorMessage',\n        ),\n        { permanent: true },\n      );\n    }\n  }\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<section>\n  <h2>\n    {localize('TIDY5E.Settings.Migrations.NpcExhaustion.sectionTitle')}\n  </h2>\n  <p>{localize('TIDY5E.Settings.Migrations.UnlinkedExplanation')}</p>\n  <h3>{localize('TIDY5E.Settings.Migrations.OptionsHeader')}</h3>\n  <div class=\"options grid-auto-columns\">\n    <label\n      class=\"green-checkbox\"\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.OptionDeleteFlags.Tooltip',\n      )}\n    >\n      <input type=\"checkbox\" bind:checked={deleteFlags} disabled={migrating} />\n\n      {localize('TIDY5E.Settings.Migrations.OptionDeleteFlags.Text')}\n    </label>\n  </div>\n\n  <button type=\"button\" on:click={(ev) => migrate()} disabled={migrating}\n    >{localize('TIDY5E.Settings.Migrations.ButtonMigration.Text')}</button\n  >\n</section>\n\n<style lang=\"scss\">\n  section {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .options {\n    margin-top: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n\n  button {\n    margin-top: auto;\n  }\n</style>\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import NpcDeathSavesMigration from './v3/NpcDeathSavesMigration.svelte';\n  import CharacterBiographyMigration from './v2/CharacterBiographyMigration.svelte';\n  import V1OnboardingMigration from './v1/V1OnboardingMigration.svelte';\n  import type { Tab } from 'src/types/types';\n  import Tabs from 'src/components/tabs/Tabs.svelte';\n  import TabContents from 'src/components/tabs/TabContents.svelte';\n  import { CONSTANTS } from 'src/constants';\n  import Notice from 'src/components/notice/Notice.svelte';\n  import CcssToTidyMigration from './v3/CcssToTidyMigration.svelte';\n  import FavoritesToSystemMigration from './v4/FavoritesToSystemMigration.svelte';\n  import BondsIdealsFlawsToSystemMigration from './v5/BondsIdealsFlawsToSystemMigration.svelte';\n  import SpellClassToSourceClassMigration from './v5/SpellClassToSourceClassMigration.svelte';\n  import NpcExhaustionToSystemMigration from './v5/NpcExhaustionToSystemMigration.svelte';\n\n  export let selectedTabId: string =\n    CONSTANTS.TAB_MIGRATIONS_SPELL_CLASS_TO_SOURCE_CLASS;\n\n  const localize = FoundryAdapter.localize;\n\n  const tabs: Tab[] = [\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_NPC_EXHAUSTION,\n      title: 'TIDY5E.Settings.Migrations.NpcExhaustion.sectionTitle',\n      content: {\n        component: NpcExhaustionToSystemMigration,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_SPELL_CLASS_TO_SOURCE_CLASS,\n      title: 'TIDY5E.Settings.Migrations.SpellClassToSourceClass.sectionTitle',\n      content: {\n        component: SpellClassToSourceClassMigration,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_BONDS_IDEALS_FLAWS_TO_SYSTEM,\n      title: 'TIDY5E.Settings.Migrations.BondsIdealsFlawsToSystem.sectionTitle',\n      content: {\n        component: BondsIdealsFlawsToSystemMigration,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_FAVORITES_TO_SYSTEM,\n      title: 'TIDY5E.Settings.Migrations.FavoritesToSystem.sectionTitle',\n      content: {\n        component: FavoritesToSystemMigration,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_CCSS_TO_TIDY,\n      title: 'TIDY5E.Settings.Migrations.CcssToTidy.sectionTitle',\n      content: {\n        component: CcssToTidyMigration,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_NPC_DEATH,\n      title: 'TIDY5E.Settings.Migrations.NpcDeathSaves.sectionTitle',\n      content: {\n        component: NpcDeathSavesMigration,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_CHARACTER_BIOGRAPHY,\n      title: 'TIDY5E.Settings.Migrations.CharacterBiography.sectionTitle',\n      content: {\n        component: CharacterBiographyMigration,\n        type: 'svelte',\n      },\n    },\n    {\n      id: CONSTANTS.TAB_MIGRATIONS_V1_ONBOARDING,\n      title: 'TIDY5E.Settings.Migrations.v1.sectionTitle',\n      content: {\n        component: V1OnboardingMigration,\n        type: 'svelte',\n      },\n    },\n  ];\n</script>\n\n<div class=\"bulk-migrations-container\">\n  <div role=\"presentation\" class=\"vertical-tab-container flex-column no-gap\">\n    <Tabs {tabs} bind:selectedTabId orientation=\"vertical\" />\n    <div role=\"presentation\" class=\"remaining-vertical-space\" />\n    <Notice>\n      {localize('TIDY5E.ReminderToBackUp')}\n    </Notice>\n  </div>\n\n  <TabContents {tabs} {selectedTabId} cssClass=\"tidy-sheet-body\" />\n</div>\n\n<style lang=\"scss\">\n  .bulk-migrations-container {\n    height: 100%;\n    display: grid;\n    grid-template-areas:\n      'nav    body'\n      'nav    body';\n    grid-template-rows: 1fr auto;\n    grid-template-columns: 12.5rem 1fr;\n    gap: 0.5rem;\n  }\n\n  .vertical-tab-container {\n    grid-area: nav;\n    margin-top: -0.5rem;\n    margin-left: -0.5rem;\n    margin-bottom: -0.5rem;\n  }\n\n  :global(.tidy-sheet-body) {\n    grid-area: body;\n    overflow-y: scroll;\n    padding-top: 0.5rem;\n    padding-right: 0.5rem;\n    margin-right: -0.25rem;\n    flex: 1;\n  }\n\n  .remaining-vertical-space {\n    margin-right: -0.0625rem;\n    border-right: 0.0625rem solid var(--t5e-tab-strip-border-color);\n    flex: 1;\n    background-color: var(--t5e-header-background);\n  }\n</style>\n","import type { SvelteComponent } from 'svelte';\nimport SvelteFormApplicationBase from 'src/applications/SvelteFormApplicationBase';\nimport BulkMigrations from './BulkMigrations.svelte';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\nexport type ConfirmMigrationFunction = (onYes: () => void) => void;\n\ninterface ConfirmsMigrations {\n  confirm: ConfirmMigrationFunction;\n}\n\nexport class BulkMigrationsApplication\n  extends SvelteFormApplicationBase\n  implements ConfirmsMigrations\n{\n  _selectedTabId?: string;\n\n  constructor(selectedTabId?: string) {\n    super();\n\n    this._selectedTabId = selectedTabId;\n  }\n\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      title: FoundryAdapter.localize('TIDY5E.Settings.Migrations.dialogTitle'),\n      width: 650,\n      height: 500,\n      id: 'tidy-5e-sheets-bulk-migrations',\n      popOut: true,\n    });\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    return new BulkMigrations({\n      target: node,\n      context: new Map<any, any>([['confirm', this.confirm]]),\n      props: {\n        selectedTabId: this._selectedTabId,\n      },\n    });\n  }\n\n  confirm(onYes: () => void) {\n    const dlg = new Dialog({\n      title: FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.migrateConfirmTitle'\n      ),\n      content: `\n        <p>${FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrateConfirmMessage1'\n        )}</p>\n        <p><em>${FoundryAdapter.localize(\n          'TIDY5E.Settings.Migrations.migrateConfirmMessage2',\n          { boldStart: '<strong>', boldEnd: '</strong>' }\n        )}</em></p>\n      `,\n      buttons: {\n        yes: {\n          icon: '<i class=\"fas fa-right-left\"></i>',\n          label: FoundryAdapter.localize(\n            'TIDY5E.Settings.Migrations.migrateConfirmButtonYes'\n          ),\n          callback: () => {\n            onYes();\n          },\n        },\n        cancel: {\n          icon: '<i class=\"fas fa-times\"></i>',\n          label: FoundryAdapter.localize(\n            'TIDY5E.Settings.Migrations.migrateConfirmButtonNo'\n          ),\n        },\n      },\n      default: 'yes',\n      close: () => {},\n    });\n    dlg.render(true);\n  }\n}\n","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\n  const localize = FoundryAdapter.localize;\n</script>\n\n<div class=\"tidy-info-banner\">\n  <a href=\"https://foundryvtt.com/packages/tidy5e-sheet/\" target=\"_blank\">\n    <img\n      class=\"logo\"\n      src=\"../modules/tidy5e-sheet/images/tidy-5e-logo.svg\"\n      alt={localize('TIDY5E.Settings.About.logoAltText')}\n    />\n  </a>\n  <p class=\"banner-text\">\n    {@html localize('TIDY5E.Settings.About.MaintainerParagraph', {\n      urlStart: '<a href=\"https://github.com/kgar\" target=\"_blank\">',\n      urlEnd: '</a>',\n    })}\n  </p>\n</div>\n<p>\n  {@html localize('TIDY5E.Settings.About.GithubParagraph', {\n    urlStart:\n      '<a href=\"https://github.com/kgar/foundry-vtt-tidy-5e-sheets/issues\" target=\"_blank\">',\n    urlEnd: '</a>',\n  })}\n</p>\n\n<h3>{localize('TIDY5E.Settings.About.FinancialSupportHeader')}</h3>\n<p>\n  {@html localize('TIDY5E.Settings.About.DiscordParagraph', {\n    urlStart: '<a href=\"https://discord.gg/kdqbcWJrYU\" target=\"_blank\">',\n    urlEnd: '</a>',\n  })}\n</p>\n<p>\n  {@html localize('TIDY5E.Settings.About.LocalizationParagraph', {\n    urlStart:\n      '<a href=\"https://hosted.weblate.org/projects/foundry-vtt-tidy-5e-sheets/\" target=\"_blank\">',\n    urlEnd: '</a>',\n  })}\n</p>\n<p>\n  {localize('TIDY5E.Settings.About.FinancialSupportParagraph')}\n</p>\n<ul>\n  <li>\n    {@html localize('TIDY5E.Settings.About.BuyMeACoffeeLink', {\n      urlStart: '<a href=\"https://www.buymeacoffee.com/kgar\" target=\"_blank\">',\n      urlEnd: '</a>',\n    })}\n  </li>\n  <li>\n    {@html localize('TIDY5E.Settings.About.KoFiLink', {\n      urlStart: '<a href=\"https://ko-fi.com/iamkgar\" target=\"_blank\">',\n      urlEnd: '</a>',\n    })}\n  </li>\n  <li>\n    {@html localize('TIDY5E.Settings.About.PatreonLink', {\n      urlStart: '<a href=\"https://www.patreon.com/iamkgar\" target=\"_blank\">',\n      urlEnd: '</a>',\n    })}\n  </li>\n</ul>\n\n<style lang=\"scss\">\n  .tidy-info-banner {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--t5e-header-background);\n    margin-top: -0.5rem;\n    margin-left: -0.5rem;\n    margin-right: -0.5rem;\n    margin-bottom: 1rem;\n    min-height: 10rem;\n    padding-left: 2rem;\n    padding-right: 2rem;\n  }\n\n  .logo {\n    max-width: 7.5rem;\n    animation: TheShining 16s infinite;\n  }\n\n  @keyframes TheShining {\n    0% {\n      filter: drop-shadow(0 0 0.625rem var(--t5e-primary-accent-color));\n    }\n    50% {\n      filter: drop-shadow(0 0 5rem var(--t5e-primary-accent-color))\n        hue-rotate(90deg);\n    }\n    100% {\n      filter: drop-shadow(0 0 0.625rem var(--t5e-primary-accent-color))\n        hue-rotate(360deg);\n    }\n  }\n</style>\n","import SvelteFormApplicationBase from 'src/applications/SvelteFormApplicationBase';\nimport type { SvelteComponent } from 'svelte';\nimport Info from './About.svelte';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\n\nexport class AboutApplication extends SvelteFormApplicationBase {\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      width: 450,\n      height: 'auto',\n      sheetConfig: false,\n      id: 'tidy-5e-sheets-about-window',\n      popOut: true,\n    });\n  }\n\n  get title() {\n    return FoundryAdapter.localize('TIDY5E.Settings.About.dialogTitle');\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    return new Info({\n      target: node,\n    });\n  }\n}\n","<script lang=\"ts\">\n  import { type SheetPreferenceOption } from './ApplyTidySheetPreferencesApplication';\n  import { ApplyTidySheetPreferencesApplication } from './ApplyTidySheetPreferencesApplication';\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import TidyTable from 'src/components/table/TidyTable.svelte';\n  import TidyTableHeaderRow from 'src/components/table/TidyTableHeaderRow.svelte';\n  import TidyTableHeaderCell from 'src/components/table/TidyTableHeaderCell.svelte';\n  import TidyTableRow from 'src/components/table/TidyTableRow.svelte';\n  import TidyTableCell from 'src/components/table/TidyTableCell.svelte';\n\n  export let options: SheetPreferenceOption[];\n  export let onConfirm: ApplyTidySheetPreferencesApplication['_onConfirm'];\n\n  const localize = FoundryAdapter.localize;\n\n  const gridTemplateColumns = `\n    /* Select */ 2.5rem \n    /* Label */ 1fr`;\n\n  $: totalSelected = options.filter((t) => t.selected).length;\n  $: allSelected = totalSelected >= options.length;\n\n  function toggleAll() {\n    const targetState = !allSelected;\n    options.forEach((o) => (o.selected = targetState));\n  }\n\n  function getRandomId() {\n    return foundry.utils.randomID();\n  }\n</script>\n\n<div class=\"sheet-preferences-container\">\n  <div class=\"p\">\n    {localize('TIDY5E.Settings.SheetPreferences.explanation')}\n  </div>\n  <div class=\"scroll-container\">\n    <TidyTable\n      key=\"default-sheet-preferences\"\n      toggleable={false}\n      --grid-template-columns={gridTemplateColumns}\n    >\n      <svelte:fragment slot=\"header\">\n        <TidyTableHeaderRow>\n          <TidyTableHeaderCell>\n            <input\n              type=\"checkbox\"\n              bind:checked={allSelected}\n              on:click={() => toggleAll()}\n              title={localize(\n                'TIDY5E.Settings.Migrations.Selection.SelectAllNoneTooltip',\n              )}\n            />\n          </TidyTableHeaderCell>\n          <TidyTableHeaderCell primary={true}\n            >{localize('Sheet')}</TidyTableHeaderCell\n          >\n        </TidyTableHeaderRow>\n      </svelte:fragment>\n      <svelte:fragment slot=\"body\">\n        {#each options as option}\n          {@const checkboxId = getRandomId()}\n          <TidyTableRow>\n            <TidyTableCell\n              ><input\n                type=\"checkbox\"\n                id={checkboxId}\n                bind:checked={option.selected}\n              /></TidyTableCell\n            >\n            <TidyTableCell primary={true}\n              ><label for={checkboxId}>{option.label}</label></TidyTableCell\n            >\n          </TidyTableRow>\n        {/each}\n      </svelte:fragment>\n    </TidyTable>\n  </div>\n  <footer>\n    <p>\n      {localize('TIDY5E.Settings.Migrations.Selection.TotalSelectedLabel', {\n        total: totalSelected,\n      })}\n    </p>\n    <button type=\"button\" on:click={() => onConfirm(options)}\n      >{localize('TIDY5E.ButtonConfirm.Text')}</button\n    >\n  </footer>\n</div>\n\n<style lang=\"scss\">\n  .sheet-preferences-container {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n\n    > .scroll-container {\n      flex: 1;\n    }\n  }\n\n  footer {\n    margin-left: -0.5rem;\n    margin-right: -0.5rem;\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n    border-top: 0.0625rem solid var(--t5e-faint-color);\n  }\n\n  input[type='checkbox'] {\n    flex-basis: 0.75rem;\n    width: auto;\n    height: auto;\n    margin: 0;\n    padding: 0;\n    line-height: 0.75rem;\n  }\n\n  label {\n    flex: 1;\n    padding: 0.25rem 0;\n  }\n</style>\n","import type { SvelteComponent } from 'svelte';\nimport SvelteFormApplicationBase from '../SvelteFormApplicationBase';\nimport ApplyTidySheetPreferences from './ApplyTidySheetPreferences.svelte';\nimport { Tidy5eCharacterSheet } from 'src/sheets/Tidy5eCharacterSheet';\nimport { Tidy5eNpcSheet } from 'src/sheets/Tidy5eNpcSheet';\nimport { Tidy5eVehicleSheet } from 'src/sheets/Tidy5eKgarVehicleSheet';\nimport { Tidy5eKgarItemSheet } from 'src/sheets/Tidy5eItemSheet';\nimport { Tidy5eKgarContainerSheet } from 'src/sheets/Tidy5eContainerSheet';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport { debug, error } from 'src/utils/logging';\n\nexport type SheetPreferenceOption = {\n  label: string;\n  documentName: string;\n  subType: string;\n  sheetClassIdentifier: string;\n  selected: boolean;\n};\n\n// Regrettably manual, but hopefully a temporary arrangement\nconst supportedSheetClasses: string[] = [\n  Tidy5eCharacterSheet.name,\n  Tidy5eNpcSheet.name,\n  Tidy5eVehicleSheet.name,\n  Tidy5eKgarItemSheet.name,\n  Tidy5eKgarContainerSheet.name,\n];\n\nexport class ApplyTidySheetPreferencesApplication extends SvelteFormApplicationBase {\n  static get defaultOptions() {\n    return FoundryAdapter.mergeObject(super.defaultOptions, {\n      width: 650,\n      height: 500,\n      id: 'tidy-5e-sheet-preferences',\n      popOut: true,\n      title: FoundryAdapter.localize('TIDY5E.Settings.SheetPreferences.name'),\n    });\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    return new ApplyTidySheetPreferences({\n      target: node,\n      props: {\n        options: this.getTidySheetPreferenceOptions(),\n        onConfirm: this._onConfirm.bind(this),\n      },\n    });\n  }\n\n  getTidySheetPreferenceOptions(): SheetPreferenceOption[] {\n    const sheetClassOptions = [];\n\n    const setting = game.settings.get('core', 'sheetClasses');\n\n    for (const { documentName, hasTypeData } of Object.values<any>(\n      foundry.documents\n    )) {\n      // documentName -> e.g., \"Actor\", \"Item\", ...\n      if (!hasTypeData) {\n        continue;\n      }\n\n      // e.g., \"character\", \"npc\", \"vehicle\" for \"Actor\"\n      const subTypes = game.documentTypes[documentName].filter(\n        (t: string) => t !== CONST.BASE_DOCUMENT_TYPE\n      );\n\n      if (!subTypes.length) {\n        continue;\n      }\n\n      for (let subType of subTypes) {\n        const { defaultClasses } =\n          DocumentSheetConfig.getSheetClassesForSubType(documentName, subType);\n\n        const tidySheetClass = Object.keys(defaultClasses).find((c: string) =>\n          supportedSheetClasses.includes(c.split('.').at(-1) ?? 'Not Found')\n        );\n\n        if (!tidySheetClass) {\n          continue;\n        }\n\n        const typeLabel = FoundryAdapter.localize(\n          CONFIG[documentName].typeLabels?.[subType]\n        );\n\n        const isDefault =\n          tidySheetClass === foundry.utils.getProperty(setting, `${documentName}.${subType}`);\n\n        sheetClassOptions.push({\n          label: typeLabel,\n          documentName,\n          subType,\n          sheetClassIdentifier: tidySheetClass,\n          selected: isDefault,\n        });\n      }\n    }\n\n    return sheetClassOptions;\n  }\n\n  private async _onConfirm(options: SheetPreferenceOption[]): Promise<void> {\n    try {\n      // We intend to adjust the existing settings.\n      let sheetSettings = this.getSheetClassesSetting();\n\n      // Evaluate each option.\n      options.forEach((o) => {\n        const compositeSettingKey = `${o.documentName}.${o.subType}`;\n\n        // When selected, simply assign the Tidy class to the appropriate subtype of the appropriate document name\n        if (o.selected) {\n          debug(\n            `Tidy Sheet ${o.sheetClassIdentifier} selected; ensuring it is set in settings.`\n          );\n          sheetSettings = foundry.utils.mergeObject(sheetSettings, {\n            [compositeSettingKey]: o.sheetClassIdentifier,\n          });\n          return;\n        }\n\n        debug(\n          `Tidy Sheet ${o.sheetClassIdentifier} unselected; checking setting.`\n        );\n        // When not selected, we want to remove any Tidy\n        const currentSetting = foundry.utils.getProperty(\n          sheetSettings,\n          compositeSettingKey\n        );\n        if (currentSetting !== o.sheetClassIdentifier) {\n          debug(\n            `Tidy Sheet ${o.sheetClassIdentifier} not currently configured and is unselected; ignoring.`\n          );\n          // The option was unselected, and the setting does not reference Tidy. Do not change it.\n          return;\n        }\n\n        debug(\n          `Tidy Sheet ${o.sheetClassIdentifier} currently configured and is unselected; removing setting.`\n        );\n        // The option was unselected, but the setting currently points to Tidy. Clear out this setting.\n        delete sheetSettings[o.documentName][o.subType];\n\n        // Prune settings where the document name no longer has any subtype properties.\n        if (Object.keys(sheetSettings[o.documentName]).length === 0) {\n          debug(\n            `${o.documentName} is now empty. Pruning property from settings.`\n          );\n          delete sheetSettings[o.documentName];\n        }\n      });\n\n      await game.settings.set('core', 'sheetClasses', sheetSettings);\n\n      debug('New sheetClasses settings', { sheetClasses: sheetSettings });\n\n      this.close();\n\n      Dialog.confirm({\n        title: FoundryAdapter.localize('SETTINGS.ReloadPromptTitle'),\n        content: FoundryAdapter.localize('SETTINGS.ReloadPromptBody'),\n        yes: () => foundry.utils.debouncedReload(),\n        no: () => {},\n        defaultYes: true,\n      });\n    } catch (e) {\n      error(FoundryAdapter.localize('TIDY5E.GenericErrorNotification'), true, {\n        error: e,\n      });\n    }\n  }\n\n  private getSheetClassesSetting() {\n    return game.settings.get('core', 'sheetClasses');\n  }\n}\n","import { CONSTANTS } from '../constants';\nimport { FoundryAdapter } from '../foundry/foundry-adapter';\nimport { ResetSettingsDialog } from './ResetSettingsDialog';\nimport type { GetFunctionReturnType } from 'src/types/types';\nimport { applyTheme, getThemeOrDefault } from 'src/theme/theme';\nimport { defaultLightTheme } from 'src/theme/default-light-theme';\nimport { getCoreThemes, themeVariables } from 'src/theme/theme-reference';\nimport { UserSettingsFormApplication } from 'src/applications/settings/user-settings/UserSettingsFormApplication';\nimport { writable, type Writable } from 'svelte/store';\nimport { WorldSettingsFormApplication } from 'src/applications/settings/world-settings/WorldSettingsFormApplication';\nimport { ThemeSettingsFormApplication } from 'src/applications/theme/ThemeSettingsFormApplication';\nimport {\n  getStandardExhaustionConfig,\n  getStandardVehicleExhaustionConfig,\n} from 'src/features/exhaustion/exhaustion';\nimport type { ExhaustionConfig } from '../features/exhaustion/exhaustion.types';\nimport { NpcSheetRuntime } from 'src/runtime/NpcSheetRuntime';\nimport { CharacterSheetRuntime } from 'src/runtime/CharacterSheetRuntime';\nimport { VehicleSheetRuntime } from 'src/runtime/VehicleSheetRuntime';\nimport { TabManager } from 'src/runtime/tab/TabManager';\nimport { BulkMigrationsApplication } from 'src/migrations/BulkMigrationsApplication';\nimport { AboutApplication } from 'src/applications/settings/about/AboutApplication';\nimport { ApplyTidySheetPreferencesApplication } from 'src/applications/sheet-preferences/ApplyTidySheetPreferencesApplication';\nimport { defaultDarkTheme } from 'src/theme/default-dark-theme';\n\nexport type Tidy5eSettings = {\n  [settingKey: string]: Tidy5eSetting;\n};\n\nexport type Tidy5eSettingKey = keyof (typeof SettingsProvider)['settings'];\n\n/**\n * A simple object-to-value mapping of all settings at a given point in time.\n */\nexport type CurrentSettings = {\n  [K in Tidy5eSettingKey]: GetFunctionReturnType<\n    (typeof SettingsProvider.settings)[K]\n  >;\n};\n\nexport function getCurrentSettings(): CurrentSettings {\n  const keys = Object.keys(\n    SettingsProvider.settings\n  ) as (keyof (typeof SettingsProvider)['settings'])[];\n\n  return keys.reduce<Record<string, any>>((obj, key) => {\n    obj[key] = SettingsProvider.settings[key].get();\n    return obj;\n  }, {}) as CurrentSettings;\n}\n\nexport type Tidy5eSetting = {\n  options: {\n    /**\n     * The human-readable name\n     */\n    name: string;\n    /**\n     * An additional human readable hint\n     */\n    hint?: string;\n    /**\n     * The scope the Setting is stored in, either World or Client\n     */\n    scope: 'world' | 'client';\n    /**\n     * Indicates if this Setting should render in the Config application\n     */\n    config: boolean;\n    /**\n     * The JS Type that the Setting is storing\n     */\n    type: any;\n    /**\n     * For string Types, defines the allowable values\n     */\n    choices?: any;\n    /**\n     * For numeric Types, defines the allowable range\n     */\n    range?: {\n      min: number;\n      max: number;\n      step: number;\n    };\n    /**\n     * The default value\n     */\n    default?: any;\n    /**\n     * Executes when the value of this Setting changes\n     * @param data the new value\n     */\n    onChange?: (data: any) => void;\n  };\n  get: () => any;\n  /**\n   * Denotes which CSS Variable is represented by the target setting. Used for color picking.\n   */\n  representsCssVariable?: keyof typeof themeVariables;\n};\n\n/**\n * The current Tidy 5e settings.\n */\nexport let settingStore: Writable<CurrentSettings>;\n\nexport function createSettings() {\n  // TODO: Remove this when Foundry V12 or later is the minimum version.\n  const isV12OrNewer = FoundryAdapter.isFoundryV12OrHigher();\n\n  return {\n    menus: {\n      worldSettings: {\n        options: {\n          name: `TIDY5E.WorldSettings.Menu.name`,\n          label: 'TIDY5E.WorldSettings.Menu.label',\n          hint: `TIDY5E.WorldSettings.Menu.hint`,\n          icon: 'fa-solid fa-globe',\n          type: WorldSettingsFormApplication,\n          restricted: true,\n        },\n      },\n      userMenu: {\n        options: {\n          name: `TIDY5E.UserSettings.Menu.name`,\n          label: 'TIDY5E.UserSettings.Menu.label',\n          hint: `TIDY5E.UserSettings.Menu.hint`,\n          icon: 'fa-solid fa-user-gear',\n          type: UserSettingsFormApplication,\n          restricted: false,\n        },\n      },\n      theme: {\n        options: {\n          name: `TIDY5E.ThemeSettings.SheetMenu.name`,\n          label: 'TIDY5E.ThemeSettings.SheetMenu.buttonLabel',\n          hint: `TIDY5E.ThemeSettings.SheetMenu.hint`,\n          icon: 'fa-solid fa-palette',\n          type: ThemeSettingsFormApplication,\n          restricted: false,\n        },\n      },\n      resetAllSettings: {\n        options: {\n          name: `TIDY5E.Settings.Reset.name`,\n          hint: `TIDY5E.Settings.Reset.hint`,\n          icon: 'fa-solid fa-database',\n          type: ResetSettingsDialog,\n          restricted: true,\n        },\n      },\n      migrations: {\n        options: {\n          name: `TIDY5E.Settings.Migrations.name`,\n          label: 'TIDY5E.Settings.Migrations.buttonLabel',\n          hint: `TIDY5E.Settings.Migrations.hint`,\n          icon: 'fa-solid fa-right-left',\n          type: BulkMigrationsApplication,\n          restricted: true,\n        },\n      },\n      applyTidySheetPreferences: {\n        options: {\n          name: `TIDY5E.Settings.SheetPreferences.name`,\n          label: 'TIDY5E.Settings.SheetPreferences.buttonLabel',\n          hint: `TIDY5E.Settings.SheetPreferences.hint`,\n          icon: 'fa-solid fa-file-pen',\n          type: ApplyTidySheetPreferencesApplication,\n          restricted: true,\n        },\n      },\n      about: {\n        options: {\n          name: `TIDY5E.Settings.About.name`,\n          label: 'TIDY5E.Settings.About.buttonLabel',\n          hint: `TIDY5E.Settings.About.hint`,\n          icon: 'fa-solid fa-question',\n          type: AboutApplication,\n          restricted: false,\n        },\n      },\n    },\n    settings: {\n      migrationsConfirmationTally: {\n        options: {\n          name: 'Migrations Confirmation Tally',\n          hint: 'Developer Only: This field tells the developer when was the last time the GM indicated \"Do Not Show Again\" for a migration notification. This is so Tidy does not notify of migrations until a new migration has become available. A migration tick counter increments each release where a migration has become available.',\n          scope: 'world',\n          config: false,\n          type: Number,\n          default: 0,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<number>(\n            'migrationsConfirmationTally'\n          );\n        },\n      },\n      defaultTheme: {\n        options: {\n          name: 'TIDY5E.Settings.DefaultTheme.name',\n          hint: 'TIDY5E.Settings.DefaultTheme.hint',\n          scope: 'world',\n          config: true,\n          type: isV12OrNewer\n            ? new foundry.data.fields.StringField({\n                required: true,\n                blank: false,\n                initial: CONSTANTS.THEME_ID_DEFAULT_LIGHT,\n                choices: () => getCoreThemes(false),\n              })\n            : String,\n          choices: isV12OrNewer ? undefined : () => getCoreThemes(false),\n          default: isV12OrNewer ? undefined : CONSTANTS.THEME_ID_DEFAULT_LIGHT,\n\n          onChange: (data: string) => {\n            const theme = getThemeOrDefault(data);\n\n            const colorScheme = SettingsProvider.settings.colorScheme.get();\n\n            if (theme && colorScheme === CONSTANTS.THEME_ID_DEFAULT) {\n              applyTheme(theme);\n            }\n          },\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('defaultTheme');\n        },\n      },\n      // Color Theme\n      colorScheme: {\n        options: {\n          name: 'TIDY5E.Settings.SheetTheme.name',\n          hint: 'TIDY5E.Settings.SheetTheme.hint',\n          scope: 'client',\n          config: true,\n          type: isV12OrNewer\n            ? new foundry.data.fields.StringField({\n                required: true,\n                blank: false,\n                initial: CONSTANTS.THEME_ID_DEFAULT,\n                choices: () => getCoreThemes(true),\n              })\n            : String,\n          choices: isV12OrNewer ? undefined : () => getCoreThemes(true),\n          default: isV12OrNewer ? undefined : CONSTANTS.THEME_ID_DEFAULT,\n          onChange: (\n            data: string,\n            colorPickerEnabledOverride: boolean | null = null\n          ) => {\n            const theme = getThemeOrDefault(data);\n            applyTheme(theme, colorPickerEnabledOverride);\n          },\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorScheme');\n        },\n      },\n\n      // Context Menu\n      useContextMenu: {\n        options: {\n          name: 'TIDY5E.Settings.UseContextMenu.name',\n          hint: 'TIDY5E.Settings.UseContextMenu.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useContextMenu');\n        },\n      },\n\n      // Player Character Settings\n\n      initialCharacterSheetTab: {\n        options: {\n          name: 'TIDY5E.Settings.InitialSheetTab.name',\n          hint: 'TIDY5E.Settings.InitialSheetTab.hint',\n          scope: 'world',\n          config: false,\n          type: String,\n          choices: () =>\n            TabManager.getTabsAsConfigOptions(\n              CharacterSheetRuntime.getAllRegisteredTabs()\n            ),\n          default: CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'initialCharacterSheetTab'\n          );\n        },\n      },\n\n      defaultCharacterSheetTabs: {\n        options: {\n          name: 'TIDY5E.Settings.DefaultSheetTabs.name',\n          hint: 'TIDY5E.Settings.DefaultSheetTabs.hint',\n          scope: 'world',\n          config: false,\n          type: Array,\n          default: [\n            CONSTANTS.TAB_CHARACTER_ATTRIBUTES,\n            CONSTANTS.TAB_CHARACTER_INVENTORY,\n            CONSTANTS.TAB_CHARACTER_SPELLBOOK,\n            CONSTANTS.TAB_CHARACTER_FEATURES,\n            CONSTANTS.TAB_CHARACTER_EFFECTS,\n            CONSTANTS.TAB_CHARACTER_BIOGRAPHY,\n            CONSTANTS.TAB_CHARACTER_JOURNAL,\n          ],\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string[]>(\n            'defaultCharacterSheetTabs'\n          );\n        },\n      },\n\n      useClassicControlsForCharacter: {\n        options: {\n          name: 'TIDY5E.Settings.UseClassicControls.name',\n          hint: 'TIDY5E.Settings.UseClassicControls.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useClassicControlsForCharacter'\n          );\n        },\n      },\n\n      showIconsNextToTheItemName: {\n        options: {\n          name: 'TIDY5E.Settings.ShowIconsNextToTheItemName.name',\n          hint: 'TIDY5E.Settings.ShowIconsNextToTheItemName.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'showIconsNextToTheItemName'\n          );\n        },\n      },\n\n      // Item Info Cards\n      itemCardsForAllItems: {\n        options: {\n          name: 'TIDY5E.Settings.ItemCardsForAllItems.name',\n          hint: 'TIDY5E.Settings.ItemCardsForAllItems.hint',\n          scope: 'client',\n          config: true,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('itemCardsForAllItems');\n        },\n      },\n\n      itemCardsForNpcs: {\n        options: {\n          name: 'TIDY5E.Settings.ItemCardsForNPCs.name',\n          hint: 'TIDY5E.Settings.ItemCardsForNPCs.hint',\n          scope: 'world',\n          config: true,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('itemCardsForNpcs');\n        },\n      },\n\n      itemCardsAreFloating: {\n        options: {\n          name: 'TIDY5E.Settings.ItemCardsAreFloating.name',\n          hint: 'TIDY5E.Settings.ItemCardsAreFloating.hint',\n          scope: 'client',\n          config: true,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('itemCardsAreFloating');\n        },\n      },\n\n      itemCardsDelay: {\n        options: {\n          name: 'TIDY5E.Settings.ItemCardsDelay.name',\n          hint: 'TIDY5E.Settings.ItemCardsDelay.hint',\n          scope: 'client',\n          config: true,\n          default: 300,\n          type: Number,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<number>('itemCardsDelay');\n        },\n      },\n\n      useAccessibleKeyboardSupport: {\n        options: {\n          name: 'TIDY5E.Settings.UseAccessibleKeyboardSupport.name',\n          hint: 'TIDY5E.Settings.UseAccessibleKeyboardSupport.hint',\n          scope: 'world',\n          config: true,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useAccessibleKeyboardSupport'\n          );\n        },\n      },\n\n      useDefaultSheetAttributeTabbing: {\n        options: {\n          name: 'TIDY5E.Settings.UseDefaultSheetAttributeTabbing.name',\n          hint: 'TIDY5E.Settings.UseDefaultSheetAttributeTabbing.hint',\n          scope: 'client',\n          config: true,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useDefaultSheetAttributeTabbing'\n          );\n        },\n      },\n\n      useDefaultSheetHpTabbing: {\n        options: {\n          name: 'TIDY5E.Settings.UseDefaultSheetHpTabbing.name',\n          hint: 'TIDY5E.Settings.UseDefaultSheetHpTabbing.hint',\n          scope: 'client',\n          config: true,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useDefaultSheetHpTabbing'\n          );\n        },\n      },\n\n      itemCardsFixKey: {\n        options: {\n          name: 'TIDY5E.Settings.ItemCardsFixKey.name',\n          hint: 'TIDY5E.Settings.ItemCardsFixKey.hint',\n          scope: 'world',\n          config: false,\n          default: 'x',\n          type: String,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('itemCardsFixKey');\n        },\n      },\n\n      //Show trait labels\n      showTraitLabels: {\n        options: {\n          name: 'TIDY5E.Settings.ShowTraitLabels.name',\n          hint: 'TIDY5E.Settings.ShowTraitLabels.hint',\n          scope: 'world',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('showTraitLabels');\n        },\n      },\n\n      showClassList: {\n        options: {\n          name: 'TIDY5E.Settings.ShowClassList.name',\n          hint: 'TIDY5E.Settings.ShowClassList.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('showClassList');\n        },\n      },\n\n      animateInspiration: {\n        options: {\n          name: 'TIDY5E.Settings.InspirationAnimation.name',\n          hint: 'TIDY5E.Settings.InspirationAnimation.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('animateInspiration');\n        },\n      },\n\n      hideIfZero: {\n        options: {\n          name: 'TIDY5E.Settings.HideIfZero.name',\n          hint: 'TIDY5E.Settings.HideIfZero.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('hideIfZero');\n        },\n      },\n\n      showInspirationOnHover: {\n        options: {\n          name: 'TIDY5E.Settings.ShowInspirationOnHover.name',\n          hint: 'TIDY5E.Settings.ShowInspirationOnHover.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'showInspirationOnHover'\n          );\n        },\n      },\n\n      showExhaustionOnHover: {\n        options: {\n          name: 'TIDY5E.Settings.ShowExhaustionOnHover.name',\n          hint: 'TIDY5E.Settings.ShowExhaustionOnHover.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'showExhaustionOnHover'\n          );\n        },\n      },\n\n      useHpBar: {\n        options: {\n          name: 'TIDY5E.Settings.UseHpBar.name',\n          hint: 'TIDY5E.Settings.UseHpBar.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useHpBar');\n        },\n      },\n\n      useHpOverlay: {\n        options: {\n          name: 'TIDY5E.Settings.UseHpOverlay.name',\n          hint: 'TIDY5E.Settings.UseHpOverlay.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useHpOverlay');\n        },\n      },\n\n      toggleEmptyCharacterSkills: {\n        options: {\n          name: 'TIDY5E.Settings.ToggleEmptyCharacterSkills.name',\n          hint: 'TIDY5E.Settings.ToggleEmptyCharacterSkills.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'toggleEmptyCharacterSkills'\n          );\n        },\n      },\n\n      toggleEmptyCharacterTraits: {\n        options: {\n          name: 'TIDY5E.Settings.ToggleEmptyCharacterTraits.name',\n          hint: 'TIDY5E.Settings.ToggleEmptyCharacterTraits.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'toggleEmptyCharacterTraits'\n          );\n        },\n      },\n\n      moveTraitsBelowCharacterResources: {\n        options: {\n          name: 'TIDY5E.Settings.MoveTraitsBelowResources.name',\n          hint: 'TIDY5E.Settings.MoveTraitsBelowResources.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'moveTraitsBelowCharacterResources'\n          );\n        },\n      },\n\n      showEquippedAmmoOnly: {\n        options: {\n          name: 'TIDY5E.Settings.ShowEquippedAmmoOnly.name',\n          hint: 'TIDY5E.Settings.ShowEquippedAmmoOnly.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('showEquippedAmmoOnly');\n        },\n      },\n\n      initialNpcSheetTab: {\n        options: {\n          name: 'TIDY5E.Settings.InitialSheetTab.name',\n          hint: 'TIDY5E.Settings.InitialSheetTab.hint',\n          scope: 'world',\n          config: false,\n          type: String,\n          choices: () =>\n            TabManager.getTabsAsConfigOptions(\n              NpcSheetRuntime.getAllRegisteredTabs()\n            ),\n          default: CONSTANTS.TAB_NPC_ABILITIES,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('initialNpcSheetTab');\n        },\n      },\n\n      defaultNpcSheetTabs: {\n        options: {\n          name: 'TIDY5E.Settings.DefaultSheetTabs.name',\n          hint: 'TIDY5E.Settings.DefaultSheetTabs.hint',\n          scope: 'world',\n          config: false,\n          type: Array,\n          default: [\n            CONSTANTS.TAB_NPC_ABILITIES,\n            CONSTANTS.TAB_NPC_SPELLBOOK,\n            CONSTANTS.TAB_NPC_EFFECTS,\n            CONSTANTS.TAB_NPC_BIOGRAPHY,\n            CONSTANTS.TAB_NPC_JOURNAL,\n          ],\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string[]>('defaultNpcSheetTabs');\n        },\n      },\n\n      useClassicControlsForNpc: {\n        options: {\n          name: 'TIDY5E.Settings.UseClassicControls.name',\n          hint: 'TIDY5E.Settings.UseClassicControls.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useClassicControlsForNpc'\n          );\n        },\n      },\n\n      moveTraitsBelowNpcResources: {\n        options: {\n          name: 'TIDY5E.Settings.MoveTraitsBelowResources.name',\n          hint: 'TIDY5E.Settings.MoveTraitsBelowResources.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'moveTraitsBelowNpcResources'\n          );\n        },\n      },\n\n      useHpBarNpc: {\n        options: {\n          name: 'TIDY5E.Settings.UseHpBar.name',\n          hint: 'TIDY5E.Settings.UseHpBar.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useHpBarNpc');\n        },\n      },\n\n      useHpOverlayNpc: {\n        options: {\n          name: 'TIDY5E.Settings.UseHpOverlay.name',\n          hint: 'TIDY5E.Settings.UseHpOverlay.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useHpOverlayNpc');\n        },\n      },\n\n      alwaysShowNpcTraits: {\n        options: {\n          name: 'TIDY5E.Settings.AlwaysShowTraits.name',\n          hint: 'TIDY5E.Settings.AlwaysShowTraits.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('alwaysShowNpcTraits');\n        },\n      },\n\n      alwaysShowNpcSkills: {\n        options: {\n          name: 'TIDY5E.Settings.AlwaysShowSkills.name',\n          hint: 'TIDY5E.Settings.AlwaysShowSkills.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('alwaysShowNpcSkills');\n        },\n      },\n\n      showSpellbookTabNpc: {\n        options: {\n          name: 'TIDY5E.Settings.ShowNPCSpellbookTab.name',\n          hint: 'TIDY5E.Settings.ShowNPCSpellbookTab.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('showSpellbookTabNpc');\n        },\n      },\n\n      initialVehicleSheetTab: {\n        options: {\n          name: 'TIDY5E.Settings.InitialSheetTab.name',\n          hint: 'TIDY5E.Settings.InitialSheetTab.hint',\n          scope: 'world',\n          config: false,\n          type: String,\n          choices: () =>\n            TabManager.getTabsAsConfigOptions(\n              VehicleSheetRuntime.getAllRegisteredTabs()\n            ),\n          default: CONSTANTS.TAB_VEHICLE_ATTRIBUTES,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'initialVehicleSheetTab'\n          );\n        },\n      },\n\n      defaultVehicleSheetTabs: {\n        options: {\n          name: 'TIDY5E.Settings.DefaultSheetTabs.name',\n          hint: 'TIDY5E.Settings.DefaultSheetTabs.hint',\n          scope: 'world',\n          config: false,\n          type: Array,\n          default: [\n            CONSTANTS.TAB_VEHICLE_ATTRIBUTES,\n            CONSTANTS.TAB_VEHICLE_CARGO_AND_CREW,\n            CONSTANTS.TAB_VEHICLE_EFFECTS,\n            CONSTANTS.TAB_VEHICLE_DESCRIPTION,\n          ],\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string[]>(\n            'defaultVehicleSheetTabs'\n          );\n        },\n      },\n\n      useClassicControlsForVehicle: {\n        options: {\n          name: 'TIDY5E.Settings.UseClassicControls.name',\n          hint: 'TIDY5E.Settings.UseClassicControls.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useClassicControlsForVehicle'\n          );\n        },\n      },\n\n      useHpBarVehicle: {\n        options: {\n          name: 'TIDY5E.Settings.UseHpBar.name',\n          hint: 'TIDY5E.Settings.UseHpBar.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useHpBarVehicle');\n        },\n      },\n\n      useHpOverlayVehicle: {\n        options: {\n          name: 'TIDY5E.Settings.UseHpOverlay.name',\n          hint: 'TIDY5E.Settings.UseHpOverlay.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useHpOverlayVehicle');\n        },\n      },\n\n      showPlayerName: {\n        options: {\n          name: 'TIDY5E.Settings.ShowPlayerName.name',\n          hint: 'TIDY5E.Settings.ShowPlayerName.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('showPlayerName');\n        },\n      },\n\n      // Expanded Sheet\n      showExpandedLimitedView: {\n        options: {\n          name: 'TIDY5E.Settings.ShowExpandedLimitedView.name',\n          hint: 'TIDY5E.Settings.ShowExpandedLimitedView.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'showExpandedLimitedView'\n          );\n        },\n      },\n\n      useCircularPortraitStyle: {\n        options: {\n          name: 'TIDY5E.Settings.UseCircularPortraitStyle.name',\n          hint: 'TIDY5E.Settings.UseCircularPortraitStyle.hint',\n          scope: 'world',\n          config: false,\n          type: String,\n          choices: {\n            [CONSTANTS.CIRCULAR_PORTRAIT_OPTION_NONE]:\n              'TIDY5E.Settings.UseCircularPortraitStyle.none',\n            [CONSTANTS.CIRCULAR_PORTRAIT_OPTION_CHARACTER]:\n              'TIDY5E.Settings.UseCircularPortraitStyle.pc',\n            [CONSTANTS.CIRCULAR_PORTRAIT_OPTION_NPCVEHICLE]:\n              'TIDY5E.Settings.UseCircularPortraitStyle.npc',\n            [CONSTANTS.CIRCULAR_PORTRAIT_OPTION_ALL]:\n              'TIDY5E.Settings.UseCircularPortraitStyle.all',\n          },\n          default: CONSTANTS.CIRCULAR_PORTRAIT_OPTION_ALL,\n        },\n        get(): string {\n          return FoundryAdapter.getTidySetting<string>(\n            'useCircularPortraitStyle'\n          );\n        },\n      },\n\n      useTotalSheetLock: {\n        options: {\n          name: 'TIDY5E.Settings.UseTotalSheetLock.name',\n          hint: 'TIDY5E.Settings.UseTotalSheetLock.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useTotalSheetLock');\n        },\n      },\n\n      permanentlyUnlockCharacterSheetForGm: {\n        options: {\n          name: 'TIDY5E.Settings.PermanentlyUnlockCharacterSheetForGM.name',\n          hint: 'TIDY5E.Settings.PermanentlyUnlockCharacterSheetForGM.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'permanentlyUnlockCharacterSheetForGm'\n          );\n        },\n      },\n\n      limitEffectsManagementToGm: {\n        options: {\n          name: 'TIDY5E.Settings.LimitEffectsManagementToGM.name',\n          hint: 'TIDY5E.Settings.LimitEffectsManagementToGM.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'limitEffectsManagementToGm'\n          );\n        },\n      },\n\n      hideDeathSavesFromPlayers: {\n        options: {\n          name: 'TIDY5E.Settings.HideDeathSavesFromPlayers.name',\n          hint: 'TIDY5E.Settings.HideDeathSavesFromPlayers.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'hideDeathSavesFromPlayers'\n          );\n        },\n      },\n\n      useCharacterEncumbranceBar: {\n        options: {\n          name: 'TIDY5E.Settings.UseCharacterEncumbranceBar.name',\n          hint: 'TIDY5E.Settings.UseCharacterEncumbranceBar.hint',\n          scope: 'world',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useCharacterEncumbranceBar'\n          );\n        },\n      },\n\n      useNpcEncumbranceBar: {\n        options: {\n          name: 'TIDY5E.Settings.UseNPCEncumbranceBar.name',\n          hint: 'TIDY5E.Settings.UseNPCEncumbranceBar.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useNpcEncumbranceBar');\n        },\n      },\n\n      useVehicleEncumbranceBar: {\n        options: {\n          name: 'TIDY5E.Settings.UseVehicleEncumbranceBar.name',\n          hint: 'TIDY5E.Settings.UseVehicleEncumbranceBar.hint',\n          scope: 'world',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useVehicleEncumbranceBar'\n          );\n        },\n      },\n\n      useExhaustion: {\n        options: {\n          name: 'TIDY5E.Settings.UseExhaustion.name',\n          hint: 'TIDY5E.Settings.UseExhaustion.hint',\n          scope: 'world',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useExhaustion');\n        },\n      },\n\n      useCharacterInspiration: {\n        options: {\n          name: 'TIDY5E.Settings.UseInspiration.name',\n          hint: 'TIDY5E.Settings.UseInspiration.hint',\n          scope: 'world',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useCharacterInspiration'\n          );\n        },\n      },\n\n      useVehicleMotion: {\n        options: {\n          name: 'TIDY5E.Settings.UseVehicleMotion.name',\n          hint: 'TIDY5E.Settings.UseVehicleMotion.hint',\n          scope: 'world',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('useVehicleMotion');\n        },\n      },\n\n      showNpcRestInChat: {\n        options: {\n          name: 'TIDY5E.Settings.ShowNPCRestInChat.name',\n          hint: 'TIDY5E.Settings.ShowNPCRestInChat.hint',\n          scope: 'world',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('showNpcRestInChat');\n        },\n      },\n\n      showNpcActorLinkMarker: {\n        options: {\n          name: 'TIDY5E.Settings.ShowNPCActorLinkMarker.name',\n          hint: 'TIDY5E.Settings.ShowNPCActorLinkMarker.hint',\n          scope: 'world',\n          config: false,\n          type: String,\n          choices: {\n            default: 'TIDY5E.Settings.ShowNPCActorLinkMarker.default',\n            unlinked: 'TIDY5E.Settings.ShowNPCActorLinkMarker.unlinked',\n            both: 'TIDY5E.Settings.ShowNPCActorLinkMarker.both',\n          },\n          default: 'default',\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<'default' | 'unlinked' | 'both'>(\n            'showNpcActorLinkMarker'\n          );\n        },\n      },\n\n      showActiveEffectsMarker: {\n        options: {\n          name: 'TIDY5E.Settings.ShowActiveEffectsMarker.name',\n          hint: 'TIDY5E.Settings.ShowActiveEffectsMarker.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'showActiveEffectsMarker'\n          );\n        },\n      },\n\n      permanentlyUnlockNpcSheetForGm: {\n        options: {\n          name: 'TIDY5E.Settings.PermanentlyUnlockNPCSheetForGM.name',\n          hint: 'TIDY5E.Settings.PermanentlyUnlockNPCSheetForGM.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'permanentlyUnlockNpcSheetForGm'\n          );\n        },\n      },\n\n      permanentlyUnlockVehicleSheetForGm: {\n        options: {\n          name: 'TIDY5E.Settings.PermanentlyUnlockVehicleSheetForGM.name',\n          hint: 'TIDY5E.Settings.PermanentlyUnlockVehicleSheetForGM.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'permanentlyUnlockVehicleSheetForGm'\n          );\n        },\n      },\n\n      lockMoneyChanges: {\n        options: {\n          name: 'TIDY5E.Settings.LockMoneyChanges.name',\n          hint: 'TIDY5E.Settings.LockMoneyChanges.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('lockMoneyChanges');\n        },\n      },\n\n      lockExpChanges: {\n        options: {\n          name: 'TIDY5E.Settings.LockExpChanges.name',\n          hint: 'TIDY5E.Settings.LockExpChanges.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('lockExpChanges');\n        },\n      },\n\n      lockHpMaxChanges: {\n        options: {\n          name: 'TIDY5E.Settings.LockHpMaxChanges.name',\n          hint: 'TIDY5E.Settings.LockHpMaxChanges.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('lockHpMaxChanges');\n        },\n      },\n\n      lockLevelSelector: {\n        options: {\n          name: 'TIDY5E.Settings.LockLevelSelector.name',\n          hint: 'TIDY5E.Settings.LockLevelSelector.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('lockLevelSelector');\n        },\n      },\n\n      lockConfigureSheet: {\n        options: {\n          name: 'TIDY5E.Settings.LockConfigureSheet.name',\n          hint: 'TIDY5E.Settings.LockConfigureSheet.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('lockConfigureSheet');\n        },\n      },\n\n      lockItemQuantity: {\n        options: {\n          name: 'TIDY5E.Settings.LockItemQuantity.name',\n          hint: 'TIDY5E.Settings.LockItemQuantity.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('lockItemQuantity');\n        },\n      },\n\n      allowCantripsToBePrepared: {\n        options: {\n          name: 'TIDY5E.Settings.AllowCantripsToBePrepared.name',\n          hint: 'TIDY5E.Settings.AllowCantripsToBePrepared.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'allowCantripsToBePrepared'\n          );\n        },\n      },\n\n      useMulticlassSpellbookFilter: {\n        options: {\n          name: 'TIDY5E.Settings.UseMulticlassSpellbookFilter.name',\n          hint: 'TIDY5E.Settings.UseMulticlassSpellbookFilter.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useMulticlassSpellbookFilter'\n          );\n        },\n      },\n\n      useSpellClassFilterIcons: {\n        options: {\n          name: 'TIDY5E.Settings.UseSpellClassIcons.name',\n          hint: 'TIDY5E.Settings.UseSpellClassIcons.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useSpellClassFilterIcons'\n          );\n        },\n      },\n\n      allowHpMaxOverride: {\n        options: {\n          name: 'TIDY5E.Settings.AllowHpMaxOverride.name',\n          hint: 'TIDY5E.Settings.AllowHpMaxOverride.hint',\n          scope: 'world',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('allowHpMaxOverride');\n        },\n      },\n\n      actionListLimitActionsToCantrips: {\n        options: {\n          name: 'TIDY5E.Settings.ActionListLimitActionsToCantrips.name',\n          hint: 'TIDY5E.Settings.ActionListLimitActionsToCantrips.hint',\n          scope: 'client',\n          config: false,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'actionListLimitActionsToCantrips'\n          );\n        },\n      },\n\n      actionListIncludeMinuteLongSpellsAsActions: {\n        options: {\n          name: 'TIDY5E.Settings.ActionListIncludeMinuteLongSpellsAsActions.name',\n          hint: 'TIDY5E.Settings.ActionListIncludeMinuteLongSpellsAsActions.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'actionListIncludeMinuteLongSpellsAsActions'\n          );\n        },\n      },\n\n      actionListIncludeSpellsWithActiveEffects: {\n        options: {\n          name: 'TIDY5E.Settings.ActionListIncludeSpellsWithActiveEffects.name',\n          hint: 'TIDY5E.Settings.ActionListIncludeSpellsWithActiveEffects.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'actionListIncludeSpellsWithActiveEffects'\n          );\n        },\n      },\n\n      actionListIncludeConsumables: {\n        options: {\n          name: 'TIDY5E.Settings.ActionListIncludeConsumables.name',\n          hint: 'TIDY5E.Settings.ActionListIncludeConsumables.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'actionListIncludeConsumables'\n          );\n        },\n      },\n\n      actionListScaleCantripDamage: {\n        options: {\n          name: 'TIDY5E.Settings.ActionListScaleCantripDamage.name',\n          hint: 'TIDY5E.Settings.ActionListScaleCantripDamage.hint',\n          scope: 'client',\n          config: false,\n          default: true,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'actionListScaleCantripDamage'\n          );\n        },\n      },\n\n      exhaustionConfig: {\n        options: {\n          name: 'TIDY5E.WorldSettings.Exhaustion.name',\n          hint: 'TIDY5E.WorldSettings.Exhaustion.hint',\n          scope: 'world',\n          config: false,\n          default: getStandardExhaustionConfig(),\n          type: Object,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<ExhaustionConfig>(\n            'exhaustionConfig'\n          );\n        },\n      },\n\n      vehicleExhaustionConfig: {\n        options: {\n          name: 'TIDY5E.WorldSettings.VehicleExhaustion.name',\n          hint: 'TIDY5E.WorldSettings.VehicleExhaustion.hint',\n          scope: 'world',\n          config: false,\n          default: getStandardVehicleExhaustionConfig(),\n          type: Object,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<ExhaustionConfig>(\n            'vehicleExhaustionConfig'\n          );\n        },\n      },\n\n      itemIdentificationPermission: {\n        options: {\n          name: 'TIDY5E.WorldSettings.ItemIdentificationPermission.name',\n          hint: 'TIDY5E.WorldSettings.ItemIdentificationPermission.hint',\n          scope: 'world',\n          type: String,\n          default: CONSTANTS.SHEET_SETTINGS_OPTION_GM_AND_OWNERS,\n          config: false,\n          choices: {\n            [CONSTANTS.SHEET_SETTINGS_OPTION_GM_AND_OWNERS]:\n              'TIDY5E.WorldSettings.ItemIdentificationPermission.options.GmAndOwners',\n            [CONSTANTS.SHEET_SETTINGS_OPTION_GM_ONLY]:\n              'TIDY5E.WorldSettings.ItemIdentificationPermission.options.GmOnly',\n          },\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'itemIdentificationPermission'\n          );\n        },\n      },\n\n      includeFlagsInSpellScrollCreation: {\n        options: {\n          name: 'TIDY5E.WorldSettings.IncludeFlagsInSpellScrollCreation.name',\n          hint: 'TIDY5E.WorldSettings.IncludeFlagsInSpellScrollCreation.hint',\n          scope: 'world',\n          type: Boolean,\n          default: false,\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'includeFlagsInSpellScrollCreation'\n          );\n        },\n      },\n\n      colorPickerEnabled: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerEnabled.name',\n          hint: 'TIDY5E.Settings.ColorPickerEnabled.hint',\n          scope: 'client',\n          type: Boolean,\n          default: false,\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('colorPickerEnabled');\n        },\n      },\n\n      colorPickerPrimaryAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerPrimaryAccent.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-primary-accent-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerPrimaryAccent'\n          );\n        },\n        representsCssVariable: '--t5e-primary-accent-color',\n      },\n      colorPickerHpBar: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerHpBar.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-hp-bar-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerHpBar');\n        },\n        representsCssVariable: '--t5e-hp-bar-color',\n      },\n      colorPickerEquipped: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerEquipped.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-equipped-background'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerEquipped');\n        },\n        representsCssVariable: '--t5e-equipped-background',\n      },\n      colorPickerEquippedOutline: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerEquippedOutline.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables[\n              '--t5e-equipped-item-grid-tile-outline-color'\n            ],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerEquippedOutline'\n          );\n        },\n        representsCssVariable: '--t5e-equipped-item-grid-tile-outline-color',\n      },\n      colorPickerEquippedAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerEquippedAccent.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables[\n              '--t5e-equipped-item-grid-tile-accent-color'\n            ],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerEquippedAccent'\n          );\n        },\n        representsCssVariable: '--t5e-equipped-item-grid-tile-accent-color',\n      },\n\n      colorPickerPrepared: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerPrepared.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-prepared-background'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerPrepared');\n        },\n        representsCssVariable: '--t5e-prepared-background',\n      },\n      colorPickerPreparedOutline: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerPreparedOutline.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables[\n              '--t5e-prepared-item-grid-tile-outline-color'\n            ],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerPreparedOutline'\n          );\n        },\n        representsCssVariable: '--t5e-prepared-item-grid-tile-outline-color',\n      },\n      colorPickerPreparedAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerPreparedAccent.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables[\n              '--t5e-prepared-item-grid-tile-accent-color'\n            ],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerPreparedAccent'\n          );\n        },\n        representsCssVariable: '--t5e-prepared-item-grid-tile-accent-color',\n      },\n\n      colorPickerPact: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerPact.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-pact-background'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerPact');\n        },\n        representsCssVariable: '--t5e-pact-background',\n      },\n      colorPickerPactOutline: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerPactOutline.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-pact-outline-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerPactOutline'\n          );\n        },\n        representsCssVariable: '--t5e-pact-outline-color',\n      },\n      colorPickerPactAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerPactAccent.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-pact-accent-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerPactAccent');\n        },\n        representsCssVariable: '--t5e-pact-accent-color',\n      },\n\n      colorPickerAtWill: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerAtWill.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-atwill-background'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerAtWill');\n        },\n        representsCssVariable: '--t5e-atwill-background',\n      },\n      colorPickerAtWillOutline: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerAtWillOutline.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-atwill-outline-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerAtWillOutline'\n          );\n        },\n        representsCssVariable: '--t5e-atwill-outline-color',\n      },\n      colorPickerAtWillAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerAtWillAccent.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-atwill-accent-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerAtWillAccent'\n          );\n        },\n        representsCssVariable: '--t5e-atwill-accent-color',\n      },\n\n      colorPickerRitualOnly: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerRitualOnly.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-ritual-only-background'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerRitualOnly');\n        },\n        representsCssVariable: '--t5e-ritual-only-background',\n      },\n      colorPickerRitualOnlyOutline: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerRitualOnlyOutline.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables['--t5e-ritual-only-outline-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerRitualOnlyOutline'\n          );\n        },\n        representsCssVariable: '--t5e-ritual-only-outline-color',\n      },\n      colorPickerRitualOnlyAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerRitualOnlyAccent.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables['--t5e-ritual-only-accent-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerRitualOnlyAccent'\n          );\n        },\n        representsCssVariable: '--t5e-ritual-only-accent-color',\n      },\n\n      colorPickerInnate: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerInnate.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-innate-background'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>('colorPickerInnate');\n        },\n        representsCssVariable: '--t5e-innate-background',\n      },\n      colorPickerInnateOutline: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerInnateOutline.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-innate-outline'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerInnateOutline'\n          );\n        },\n        representsCssVariable: '--t5e-innate-outline',\n      },\n      colorPickerInnateAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerInnateAccent.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-innate-accent'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerInnateAccent'\n          );\n        },\n        representsCssVariable: '--t5e-innate-accent',\n      },\n\n      colorPickerAlwaysPrepared: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerAlwaysPrepared.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables['--t5e-alwaysprepared-background'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerAlwaysPrepared'\n          );\n        },\n        representsCssVariable: '--t5e-alwaysprepared-background',\n      },\n      colorPickerAlwaysPreparedOutline: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerAlwaysPreparedOutline.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables['--t5e-alwaysprepared-outline-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerAlwaysPreparedOutline'\n          );\n        },\n        representsCssVariable: '--t5e-alwaysprepared-outline-color',\n      },\n      colorPickerAlwaysPreparedAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerAlwaysPreparedAccent.name',\n          scope: 'client',\n          type: String,\n          default:\n            defaultLightTheme.variables['--t5e-alwaysprepared-accent-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerAlwaysPreparedAccent'\n          );\n        },\n        representsCssVariable: '--t5e-alwaysprepared-accent-color',\n      },\n      colorPickerScrollbarThumb: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerScrollbarThumb.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-scrollbar-thumb-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerScrollbarThumb'\n          );\n        },\n        representsCssVariable: '--t5e-scrollbar-thumb-color',\n      },\n      colorPickerScrollbarTrack: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerScrollbarTrack.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-scrollbar-track-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerScrollbarTrack'\n          );\n        },\n        representsCssVariable: '--t5e-scrollbar-track-color',\n      },\n      colorPickerMagicAccent: {\n        options: {\n          name: 'TIDY5E.Settings.ColorPickerMagicAccent.name',\n          scope: 'client',\n          type: String,\n          default: defaultLightTheme.variables['--t5e-magic-accent-color'],\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<string>(\n            'colorPickerMagicAccent'\n          );\n        },\n        representsCssVariable: '--t5e-magic-accent-color',\n      },\n\n      // Icons\n      useTidySpellSchoolIcons: {\n        options: {\n          name: 'TIDY5E.Settings.UseTidySpellSchoolIcons.name',\n          hint: 'TIDY5E.Settings.UseTidySpellSchoolIcons.hint',\n          scope: 'world',\n          type: Boolean,\n          default: true,\n          config: false,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>(\n            'useTidySpellSchoolIcons'\n          );\n        },\n      },\n\n      debug: {\n        options: {\n          name: `TIDY5E.Settings.Debug.name`,\n          hint: `TIDY5E.Settings.Debug.hint`,\n          scope: 'client',\n          config: true,\n          default: false,\n          type: Boolean,\n        },\n        get() {\n          return FoundryAdapter.getTidySetting<boolean>('debug');\n        },\n      },\n    } satisfies Tidy5eSettings,\n  } as const;\n}\n\nexport let SettingsProvider: ReturnType<typeof createSettings>;\n\nexport function initSettings() {\n  SettingsProvider = createSettings();\n\n  for (let menu of Object.entries(SettingsProvider.menus)) {\n    FoundryAdapter.registerTidyMenu(menu[0], menu[1].options);\n  }\n\n  const debouncedSettingStoreRefresh = FoundryAdapter.debounce(() => {\n    settingStore.set(getCurrentSettings());\n  }, 100);\n\n  for (let setting of Object.entries(SettingsProvider.settings)) {\n    const options = {\n      ...setting[1].options,\n      onChange: (...args: any[]) => {\n        debouncedSettingStoreRefresh();\n\n        (setting[1].options as any).onChange?.(...args);\n      },\n    };\n    FoundryAdapter.registerTidySetting(setting[0], options);\n  }\n\n  // Apply current color scheme\n  SettingsProvider.settings.colorScheme.options.onChange(\n    SettingsProvider.settings.colorScheme.get()\n  );\n\n  settingStore = writable(getCurrentSettings());\n\n  Hooks.on('closeSettingsConfig', () => {\n    settingStore.set(getCurrentSettings());\n  });\n}\n","import type {\n  ActionItem,\n  ActiveEffect5e,\n  ActiveEffectContext,\n  AttunementContext,\n  CharacterSheetContext,\n  ClassSummary,\n  DropdownListOption,\n  NpcSheetContext,\n} from 'src/types/types';\nimport { CONSTANTS } from '../constants';\nimport type { Actor5e } from 'src/types/types';\nimport type { Item5e } from 'src/types/item.types';\nimport { SettingsProvider } from 'src/settings/settings';\nimport { debug, error, warn } from 'src/utils/logging';\nimport FloatingContextMenu from 'src/context-menu/FloatingContextMenu';\nimport { TidyFlags } from './TidyFlags';\nimport { TidyHooks } from './TidyHooks';\n\nexport const FoundryAdapter = {\n  isFoundryV12OrHigher() {\n    return foundry.utils.isNewerVersion(game.version, 12);\n  },\n  deepClone(obj: any) {\n    return foundry.utils.deepClone(obj);\n  },\n  userIsGm() {\n    return game.user.isGM;\n  },\n  getTidySetting<T = string>(settingName: string): T {\n    return game.settings.get(CONSTANTS.MODULE_ID, settingName) as T;\n  },\n  async setTidySetting(key: string, value: unknown): Promise<void> {\n    await game.settings.set(CONSTANTS.MODULE_ID, key, value);\n  },\n  registerTidySetting(key: string, data: any): void {\n    game.settings.register(CONSTANTS.MODULE_ID, key, data);\n  },\n  registerTidyMenu(key: string, data: any): void {\n    game.settings.registerMenu(CONSTANTS.MODULE_ID, key, data);\n  },\n  getGameSetting<T = string>(namespace: string, settingName: string): T {\n    return game.settings.get(namespace, settingName) as T;\n  },\n  async setGameSetting(\n    namespace: string,\n    key: string,\n    value: unknown\n  ): Promise<void> {\n    await game.settings.set(namespace, key, value);\n  },\n  onActor5eSheetRender(func: (...args: any[]) => void) {\n    Hooks.on('renderActorSheet', (...args: any[]) => {\n      func(args);\n    });\n  },\n  onGetActiveEffectContextOptions(func: (...args: any[]) => void) {\n    Hooks.on('dnd5e.getActiveEffectContextOptions', func);\n  },\n  getTemplate(templateName: string) {\n    return `modules/${CONSTANTS.MODULE_ID}/templates/${templateName}`;\n  },\n  localize(value: string, options?: Record<string, unknown>) {\n    if (options) {\n      return game.i18n.format(value, options);\n    }\n\n    return game.i18n.localize(value);\n  },\n  // TODO: Extract a dedicated ActiveEffectManager or the like\n  addEffect(effectType: string, owner: any) {\n    const isActor = owner instanceof Actor;\n\n    const effectData = {\n      label: isActor ? game.i18n.localize('DND5E.EffectNew') : owner.name,\n      icon: isActor ? 'icons/svg/aura.svg' : owner.img,\n      origin: owner.uuid,\n      'duration.rounds': effectType === 'temporary' ? 1 : undefined,\n      disabled: effectType === 'inactive',\n    };\n\n    if (\n      !TidyHooks.tidy5eSheetsPreCreateActiveEffect(\n        owner,\n        effectData,\n        game.user.id\n      )\n    ) {\n      return;\n    }\n\n    return owner.createEmbeddedDocuments('ActiveEffect', [effectData]);\n  },\n  canPrepareSpell(item: Item5e) {\n    return (\n      item.system.preparation?.mode !==\n        CONSTANTS.SPELL_PREPARATION_MODE_ATWILL &&\n      item.system.preparation?.mode !==\n        CONSTANTS.SPELL_PREPARATION_MODE_INNATE &&\n      item.system.preparation?.mode !==\n        CONSTANTS.SPELL_PREPARATION_MODE_ALWAYS &&\n      item.system.preparation?.mode !== CONSTANTS.SPELL_PREPARATION_MODE_PACT &&\n      (item.system.level !== 0 ||\n        SettingsProvider.settings.allowCantripsToBePrepared.get())\n    );\n  },\n  /**\n   *\n   * @param content           - the editor content to include\n   * @param targetDataField   - the data field to update when this editor is saved\n   * @param editable          - whether the editor should allow editing\n   * @returns\n   */\n  createEditorHtml(\n    content: string,\n    targetDataField: string,\n    editable: boolean\n  ) {\n    return HandlebarsHelpers.editor(content, {\n      hash: {\n        target: targetDataField,\n        button: true,\n        engine: 'prosemirror',\n        collaborate: false,\n        editable,\n      },\n    });\n  },\n  createOpenEditorHtml(\n    content: string,\n    targetDataField: string,\n    textEditorOptions?: Record<string, any>\n  ) {\n    return HandlebarsHelpers.editor(content, {\n      hash: {\n        target: targetDataField,\n        button: false,\n        engine: 'prosemirror',\n        collaborate: false,\n        editable: true,\n        ...textEditorOptions,\n      },\n    });\n  },\n  mergeObject<T>(original: T, ...args: any[]) {\n    return foundry.utils.mergeObject(original, ...args) as T;\n  },\n  expandObject(data: any) {\n    return foundry.utils.expandObject(data);\n  },\n  isEmpty(obj: any) {\n    return foundry.utils.isEmpty(obj);\n  },\n  getClassIdentifier(item: Item5e): string {\n    return item.system.identifier || item.name.slugify({ strict: true });\n  },\n  getClassAndSubclassSummaries(actor: Actor5e): Map<string, ClassSummary> {\n    return actor.items.reduce(\n      (map: Map<string, ClassSummary>, item: Item5e) => {\n        if (item.type === 'class') {\n          const identifier = FoundryAdapter.getClassIdentifier(item);\n          const data: ClassSummary = map.get(identifier) ?? {};\n          data.class = item.name;\n          data.level = item.system.levels?.toString();\n          map.set(identifier, data);\n        }\n\n        if (\n          item.type === 'subclass' &&\n          item.system.classIdentifier !== undefined\n        ) {\n          const data: ClassSummary = map.get(item.system.classIdentifier) ?? {};\n          data.subclass = item.name;\n          if (item.system.classIdentifier !== undefined) {\n            map.set(item.system.classIdentifier, data);\n          }\n        }\n\n        return map;\n      },\n      new Map<string, ClassSummary>()\n    );\n  },\n  getActorCharacterSummaryEntries(actorContext: any): string[] {\n    const entries: string[] = [];\n\n    if (actorContext.system.details.race?.name) {\n      entries.push(actorContext.system.details.race.name);\n    } else if (actorContext.system.details.race) {\n      entries.push(actorContext.system.details.race);\n    }\n\n    if (actorContext.system.details.background?.name) {\n      entries.push(actorContext.system.details.background.name);\n    } else if (actorContext.system.details.background) {\n      entries.push(actorContext.system.details.background);\n    }\n\n    if (actorContext.system.details.alignment) {\n      entries.push(actorContext.system.details.alignment);\n    }\n\n    return entries;\n  },\n  getCurrentLang() {\n    return game.i18n.lang;\n  },\n  editOnMiddleClick(\n    event: MouseEvent,\n    entityWithSheet: {\n      sheet: { render: (force: boolean) => void; isEditable: boolean };\n    }\n  ) {\n    if (event.button !== CONSTANTS.MOUSE_BUTTON_AUXILIARY) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (!entityWithSheet.sheet.isEditable) {\n      return;\n    }\n\n    entityWithSheet.sheet.render(true);\n  },\n  createItem({ type, ...data }: Record<string, any>, actor: Actor5e) {\n    // Check to make sure the newly created class doesn't take player over level cap\n    if (\n      type === 'class' &&\n      actor.system.details.level + 1 > CONFIG.DND5E.maxLevel\n    ) {\n      const err = game.i18n.format('DND5E.MaxCharacterLevelExceededWarn', {\n        max: CONFIG.DND5E.maxLevel,\n      });\n      ui.notifications.error(err);\n      return null;\n    }\n\n    const itemData = foundry.utils.mergeObject(\n      {\n        name: FoundryAdapter.localize('DND5E.ItemNew', {\n          type: FoundryAdapter.localize(CONFIG.Item.typeLabels[type]),\n        }),\n        type,\n      },\n      foundry.utils.expandObject({ ...data })\n    );\n\n    if (!TidyHooks.tidy5eSheetsPreCreateItem(actor, itemData, game.user.id)) {\n      return;\n    }\n\n    return actor.createEmbeddedDocuments('Item', [itemData]);\n  },\n  async onLevelChange(\n    event: Event & { currentTarget: EventTarget & HTMLSelectElement },\n    item: any,\n    actor: Actor5e\n  ) {\n    event.preventDefault();\n    const target = event.currentTarget;\n    if (!target?.value === undefined) {\n      return;\n    }\n\n    const delta = Number(event.currentTarget.value);\n    const classId = item.id;\n    if (!delta || !classId) {\n      return;\n    }\n\n    const classItem = actor.items.get(classId);\n\n    if (!game.settings.get('dnd5e', 'disableAdvancements')) {\n      const manager =\n        dnd5e.applications.advancement.AdvancementManager.forLevelChange(\n          actor,\n          classId,\n          delta\n        );\n      if (manager.steps.length) {\n        if (delta > 0) return manager.render(true);\n        try {\n          const shouldRemoveAdvancements =\n            await dnd5e.applications.advancement.AdvancementConfirmationDialog.forLevelDown(\n              classItem\n            );\n          if (shouldRemoveAdvancements) return manager.render(true);\n        } catch (err) {\n          return;\n        }\n      }\n    }\n\n    return classItem.update({\n      'system.levels': classItem.system.levels + delta,\n    });\n  },\n  getSpellAbbreviationMap() {\n    const map = new Map<string, string>();\n    Object.values(CONFIG.DND5E.spellComponents).forEach((x: any) =>\n      map.set(x.abbr, x.label)\n    );\n    Object.values(CONFIG.DND5E.spellTags).forEach((x: any) =>\n      map.set(x.abbr, x.label)\n    );\n    return map;\n  },\n  getProperty<T = unknown>(obj: any, path: string): T | undefined {\n    return foundry.utils.getProperty(obj, path);\n  },\n  getInventoryRowClasses(item: Item5e, ctx?: any, extras?: string[]): string {\n    const itemClasses: string[] = [];\n\n    if (item?.system?.properties?.has('mgc')) {\n      itemClasses.push('magic-item');\n    }\n\n    if (ctx?.attunement?.cls && !FoundryAdapter.concealDetails(item)) {\n      itemClasses.push(ctx.attunement.cls);\n    }\n\n    if (item?.system?.equipped) {\n      itemClasses.push('equipped');\n    }\n\n    if (extras?.length) {\n      itemClasses.push(...extras);\n    }\n\n    return itemClasses.join(' ');\n  },\n  getSpellRowClasses(spell: any): string {\n    const classes: string[] = [];\n\n    if (\n      spell.system.preparation.mode ===\n        CONSTANTS.SPELL_PREPARATION_MODE_PREPARED &&\n      (spell.system.level > 0 ||\n        SettingsProvider.settings.allowCantripsToBePrepared.get())\n    ) {\n      classes.push('preparable');\n    }\n\n    if (spell.system.preparation.prepared) {\n      classes.push('prepared');\n    }\n\n    if (\n      spell.system.preparation.mode === CONSTANTS.SPELL_PREPARATION_MODE_ALWAYS\n    ) {\n      classes.push('always-prepared');\n    }\n\n    if (\n      spell.system.preparation.mode === CONSTANTS.SPELL_PREPARATION_MODE_PACT\n    ) {\n      classes.push('pact');\n    }\n\n    if (\n      spell.system.preparation.mode === CONSTANTS.SPELL_PREPARATION_MODE_ATWILL\n    ) {\n      classes.push('at-will');\n    }\n\n    if (\n      spell.system.preparation.mode === CONSTANTS.SPELL_PREPARATION_MODE_RITUAL\n    ) {\n      classes.push('ritual-only');\n    }\n\n    if (\n      spell.system.preparation.mode === CONSTANTS.SPELL_PREPARATION_MODE_INNATE\n    ) {\n      classes.push('innate');\n    }\n\n    return classes.join(' ');\n  },\n  getSpellAttackModAndTooltip(\n    context: CharacterSheetContext | NpcSheetContext\n  ) {\n    let actor = context.actor;\n    let formula = Roll.replaceFormulaData(\n      actor.system.bonuses.rsak.attack,\n      actor.getRollData(),\n      { missing: 0, warn: false }\n    );\n\n    let prof = actor.system.attributes.prof ?? 0;\n    let spellAbility = context.system.attributes.spellcasting;\n    let abilityMod =\n      (spellAbility != '' ? actor.system.abilities[spellAbility].mod : 0) ?? 0;\n    let spellAttackMod = prof + abilityMod;\n    let spellAttackText =\n      spellAttackMod > 0 ? '+' + spellAttackMod : spellAttackMod;\n\n    let spellAttackTextTooltip = `${prof} (prof.)+${abilityMod} (${spellAbility})`;\n\n    return {\n      mod: spellAttackText /* TODO: apply static bonuses; mention rolled bonuses without rolling them */,\n      bonus: formula,\n      modTooltip: spellAttackTextTooltip,\n    };\n  },\n  cycleProficiency(\n    actor: Actor5e,\n    key: string,\n    currentValue: number | undefined,\n    systemFieldName: string,\n    reverse: boolean = false\n  ): Promise<any | undefined> {\n    // TODO: Check for active effects and prevent if applicable.\n\n    if (currentValue === null || currentValue === undefined) {\n      return Promise.resolve(undefined);\n    }\n\n    const levels = [0, 1, 0.5, 2];\n    const idx = levels.indexOf(currentValue);\n    const next = idx + (reverse ? 3 : 1);\n    return actor.update({\n      [`system.${systemFieldName}.${key}.value`]: levels[next % levels.length],\n    });\n  },\n  getSpellImageUrl(\n    context: CharacterSheetContext | NpcSheetContext,\n    spell: any\n  ): string | undefined {\n    if (!SettingsProvider.settings.useSpellClassFilterIcons.get()) {\n      return spell.img;\n    }\n\n    const sourceClass = spell.system.sourceClass;\n\n    const classImage =\n      sourceClass && 'actorClassesToImages' in context\n        ? context.actorClassesToImages[sourceClass]\n        : undefined;\n\n    return classImage ?? spell.img;\n  },\n  searchItems(searchCriteria: string, items: Item5e[]): Set<string> {\n    return new Set(\n      items\n        .filter((item) => FoundryAdapter.searchItem(item, searchCriteria))\n        .map((item) => item.id)\n    );\n  },\n  searchItem(item: any, searchCriteria: string): boolean {\n    return (\n      searchCriteria.trim() === '' ||\n      (item.system.identified === false &&\n        item.system.unidentified?.name\n          ?.toLowerCase()\n          .includes(searchCriteria.toLowerCase())) ||\n      (item.system.identified !== false &&\n        item.name.toLowerCase().includes(searchCriteria.toLowerCase()))\n    );\n  },\n  searchEffects(\n    searchCriteria: string,\n    effects: ActiveEffect5e[]\n  ): Set<string> {\n    return new Set(\n      effects\n        .filter(\n          (effect: any) =>\n            searchCriteria.trim() === '' ||\n            effect.name.toLowerCase().includes(searchCriteria.toLowerCase())\n        )\n        .map((effect) => effect.id)\n    );\n  },\n  getFilteredActionItems(searchCriteria: string, items: ActionItem[]) {\n    return items.filter(\n      (x: ActionItem) =>\n        searchCriteria.trim() === '' ||\n        x.item?.name?.toLowerCase().includes(searchCriteria.toLowerCase())\n    );\n  },\n  getAllClassesDropdownOptions(\n    spellClassFilterAdditionalClassesText: string = ''\n  ) {\n    const allClasses: DropdownListOption[] = Object.entries(\n      CONSTANTS.DND5E_CLASSES\n    ).map((x) => ({\n      value: x[0],\n      text: x[1],\n    }));\n\n    if (spellClassFilterAdditionalClassesText?.trim() !== '') {\n      const additionalClasses = spellClassFilterAdditionalClassesText\n        .split(',')\n        .reduce((arr: DropdownListOption[], x: string) => {\n          const pieces = x.split('|');\n          if (pieces.length !== 2) {\n            return arr;\n          }\n          arr.push({\n            value: pieces[0],\n            text: pieces[1],\n          });\n          return arr;\n        }, []);\n\n      allClasses.push(...additionalClasses);\n    }\n\n    allClasses.sort((a, b) => a.text.localeCompare(b.text));\n\n    return allClasses;\n  },\n  parseAdditionalClassesDropDownItems(\n    spellClassFilterAdditionalClassesText: string\n  ) {\n    return spellClassFilterAdditionalClassesText\n      .split(',')\n      .reduce((arr: DropdownListOption[], x: string) => {\n        const pieces = x.split('|');\n        if (pieces.length !== 2) {\n          return arr;\n        }\n        arr.push({\n          value: pieces[0],\n          text: pieces[1],\n        });\n        return arr;\n      }, []);\n  },\n  removeConfigureSettingsButtonWhenLockedForNonGm(buttons: any[]) {\n    if (FoundryAdapter.shouldLockConfigureSheet()) {\n      const configureSheetButtonIndex = buttons.findIndex((b) =>\n        b.class.includes('configure-sheet')\n      );\n      if (configureSheetButtonIndex >= 0) {\n        buttons.splice(configureSheetButtonIndex, 1);\n      }\n    }\n\n    return buttons;\n  },\n  getNewCargo() {\n    return { name: '', quantity: 1 };\n  },\n  getWeightUnit() {\n    return FoundryAdapter.localize(\n      `DND5E.Abbreviation${\n        game.settings.get('dnd5e', 'metricWeightUnits') ? 'Kg' : 'Lbs'\n      }`\n    );\n  },\n  isActiveEffectContextFavorited(context: ActiveEffectContext, actor: Actor5e) {\n    if (!actor) {\n      return false;\n    }\n\n    const effect = FoundryAdapter.getEffect({\n      document: actor,\n      effectId: context.id,\n      parentId: context.parentId,\n    });\n\n    return FoundryAdapter.isEffectFavorited(effect, actor);\n  },\n  getEffectActor(effect: ActiveEffect5e) {\n    return (\n      // Item-Owned\n      effect.parent?.actor ??\n      // Actor-Owned\n      effect.parent\n    );\n  },\n  isEffectFavorited(effect: ActiveEffect5e, actor: Actor5e) {\n    if (\n      actor?.documentName === CONSTANTS.DOCUMENT_NAME_ACTOR &&\n      'favorites' in actor.system\n    ) {\n      const relativeUuid = effect.getRelativeUUID(actor);\n      return actor.system.favorites.some((f: any) => f.id === relativeUuid);\n    }\n  },\n  async toggleFavoriteEffect(effect: ActiveEffect5e) {\n    const actor = FoundryAdapter.getEffectActor(effect);\n\n    if (!actor || !actor.system?.addFavorite) {\n      return;\n    }\n\n    const favorited = FoundryAdapter.isEffectFavorited(effect, actor);\n    if (favorited) {\n      await actor.system.removeFavorite(effect.getRelativeUUID(actor));\n    } else {\n      await actor.system.addFavorite({\n        type: 'effect',\n        id: effect.getRelativeUUID(actor),\n      });\n    }\n  },\n  isItemFavorited(document: any) {\n    const actor = document.actor;\n\n    if (actor && 'favorites' in actor.system) {\n      const relativeUuid = document.getRelativeUUID(actor);\n      return actor.system.hasFavorite(relativeUuid);\n    }\n\n    return false;\n  },\n  async toggleFavoriteItem(document: any) {\n    const actor = document.actor;\n\n    if (!actor || !actor.system?.addFavorite) {\n      return;\n    }\n\n    const favorited = FoundryAdapter.isItemFavorited(document);\n    if (favorited) {\n      await actor.system.removeFavorite(document.getRelativeUUID(actor));\n    } else {\n      await actor.system.addFavorite({\n        type: 'item',\n        id: document.getRelativeUUID(actor),\n      });\n    }\n  },\n  isActorSheetUnlocked(actor: any): boolean {\n    return (\n      (actor.isOwner && TidyFlags.allowEdit.get(actor)) ||\n      (FoundryAdapter.userIsGm() &&\n        SettingsProvider.settings.permanentlyUnlockCharacterSheetForGm.get() &&\n        actor.type === CONSTANTS.SHEET_TYPE_CHARACTER) ||\n      (FoundryAdapter.userIsGm() &&\n        SettingsProvider.settings.permanentlyUnlockNpcSheetForGm.get() &&\n        actor.type === CONSTANTS.SHEET_TYPE_NPC) ||\n      (FoundryAdapter.userIsGm() &&\n        SettingsProvider.settings.permanentlyUnlockVehicleSheetForGm.get() &&\n        actor.type === CONSTANTS.SHEET_TYPE_VEHICLE)\n    );\n  },\n  allowCharacterEffectsManagement(actor: any) {\n    return (\n      (SettingsProvider.settings.limitEffectsManagementToGm.get() &&\n        FoundryAdapter.userIsGm()) ||\n      (!SettingsProvider.settings.limitEffectsManagementToGm.get() &&\n        actor.isOwner)\n    );\n  },\n  shouldLockMoneyChanges() {\n    return (\n      !FoundryAdapter.userIsGm() &&\n      SettingsProvider.settings.lockMoneyChanges.get()\n    );\n  },\n  shouldLockExpChanges() {\n    return (\n      !FoundryAdapter.userIsGm() &&\n      SettingsProvider.settings.lockExpChanges.get()\n    );\n  },\n  shouldLockHpMaxChanges() {\n    return (\n      !FoundryAdapter.userIsGm() &&\n      SettingsProvider.settings.lockHpMaxChanges.get()\n    );\n  },\n  shouldLockLevelSelector() {\n    return (\n      !FoundryAdapter.userIsGm() &&\n      SettingsProvider.settings.lockLevelSelector.get()\n    );\n  },\n  shouldLockConfigureSheet() {\n    return (\n      !FoundryAdapter.userIsGm() &&\n      SettingsProvider.settings.lockConfigureSheet.get()\n    );\n  },\n  shouldLockItemQuantity() {\n    return (\n      !FoundryAdapter.userIsGm() &&\n      SettingsProvider.settings.lockItemQuantity.get()\n    );\n  },\n  showLimitedSheet(actor: any): boolean {\n    const showLimitedSheet = !FoundryAdapter.userIsGm() && actor.limited;\n    if (actor.type === CONSTANTS.SHEET_TYPE_CHARACTER) {\n      return (\n        showLimitedSheet &&\n        !SettingsProvider.settings.showExpandedLimitedView.get()\n      );\n    }\n    return showLimitedSheet;\n  },\n  flattenObject(obj: Object) {\n    return foundry.utils.flattenObject(obj || {});\n  },\n  getGameItem(id: string): any | undefined {\n    return game.items.get(id);\n  },\n  getGameActor(id: string): any | undefined {\n    return game.actors.get(id);\n  },\n  getModule(moduleId: string): any | undefined {\n    return game.modules.get(moduleId);\n  },\n  debounce(callback: Function, delay: number): Function {\n    return foundry.utils.debounce(callback, delay);\n  },\n  roll(\n    formula: string,\n    rollData?: unknown,\n    rollFnOptions: any = {}\n  ): Promise<any> {\n    return new Roll(formula, rollData).roll(rollFnOptions);\n  },\n  async rollNpcHitDie(\n    actor: Actor5e,\n    flavor: string,\n    denomination: string,\n    options: any = {}\n  ): Promise<any | null> {\n    const rollConfig = FoundryAdapter.mergeObject(\n      {\n        formula: `max(0, 1${denomination} + @abilities.con.mod)`,\n        data: actor.getRollData(),\n        chatMessage: true,\n        messageData: {\n          speaker: ChatMessage.getSpeaker({ actor }),\n          flavor,\n          title: `${flavor}: ${actor.name}`,\n          rollMode: FoundryAdapter.getGameSetting('core', 'rollMode'),\n          'flags.dnd5e.roll': { type: 'hitDie' },\n        },\n      },\n      options\n    );\n\n    /**\n     * A hook event that fires before a hit die is rolled for an Actor.\n     * @function dnd5e.preRollHitDie\n     * @memberof hookEvents\n     * @param {Actor5e} actor               Actor for which the hit die is to be rolled.\n     * @param {object} config               Configuration data for the pending roll.\n     * @param {string} config.formula       Formula that will be rolled.\n     * @param {object} config.data          Data used when evaluating the roll.\n     * @param {boolean} config.chatMessage  Should a chat message be created for this roll?\n     * @param {object} config.messageData   Data used to create the chat message.\n     * @param {string} denomination         Size of hit die to be rolled.\n     * @returns {boolean}                   Explicitly return `false` to prevent hit die from being rolled.\n     */\n    if (\n      TidyHooks.dnd5ePreRollHitDie(actor, rollConfig, denomination) === false\n    ) {\n      return;\n    }\n\n    const roll = await FoundryAdapter.roll(\n      rollConfig.formula,\n      rollConfig.data,\n      {\n        async: true,\n      }\n    );\n    if (rollConfig.chatMessage) roll.toMessage(rollConfig.messageData);\n\n    const hp = actor.system.attributes.hp;\n    const dhp = Math.min(hp.max + (hp.tempmax ?? 0) - hp.value, roll.total);\n    const updates = {\n      actor: { 'system.attributes.hp.value': hp.value + dhp },\n      //   class: {\"system.hitDiceUsed\": cls.system.hitDiceUsed + 1}\n    };\n\n    if (TidyHooks.dnd5eRollHitDie(actor, roll, updates) === false) return roll;\n\n    // Re-evaluate dhp in the event that it was changed in the previous hook\n    const updateOptions = {\n      dhp:\n        (updates.actor?.['system.attributes.hp.value'] ?? hp.value) - hp.value,\n    };\n\n    // Perform updates\n    if (!FoundryAdapter.isEmpty(updates.actor)) {\n      await actor.update(updates.actor, updateOptions);\n    }\n    return roll;\n  },\n  openActorTypeConfig(actor: Actor5e) {\n    return new dnd5e.applications.actor.ActorTypeConfig(actor).render(true);\n  },\n  openCharacterActorTypeConfig(actor: Actor5e) {\n    if (actor.system.details.race?.id) {\n      return new dnd5e.applications.actor.ActorTypeConfig(\n        actor.system.details.race,\n        { keyPath: 'system.type' }\n      ).render(true);\n    }\n\n    warn(\n      'Unable to open actor type config for player character because they do not have a race.'\n    );\n  },\n  playDiceSound() {\n    return AudioHelper.play({ src: CONFIG.sounds.dice });\n  },\n  calculateAverageFromFormula(formula: string) {\n    let r = new Roll(formula);\n    let term = r.terms;\n    debug(`tidy5e-npc | activateListeners | term: ${term}`);\n    let averageString: string | any[] = '';\n    for (let i = 0; i < term.length; i++) {\n      let type = term[i].constructor.name;\n      switch (type) {\n        case 'Die': {\n          averageString += Math.floor(\n            (term[i].faces * term[i].number + term[i].number) / 2\n          );\n          break;\n        }\n        case 'OperatorTerm': {\n          averageString += term[i].operator;\n          break;\n        }\n        case 'NumericTerm': {\n          averageString += term[i].number;\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n    debug(`tidy5e-npc | activateListeners | averageString: ${averageString}`);\n    let average = 0;\n    averageString =\n      averageString.replace(/\\s/g, '').match(/[+\\-]?([0-9\\.\\s]+)/g) ?? [];\n    while (averageString.length) {\n      average += parseFloat(averageString.shift());\n    }\n    debug(`tidy5e-npc | activateListeners | average: ${average}`);\n    return average;\n  },\n  enrichHtml(value: string, options?: any): Promise<string> {\n    return TextEditor.enrichHTML(value, options);\n  },\n  createContextMenu(...args: any[]): any {\n    return new FloatingContextMenu(...args);\n  },\n  createAdvancementSelectionDialog(item: any) {\n    return game.dnd5e.applications.advancement.AdvancementSelection.createDialog(\n      item\n    );\n  },\n  deleteAdvancement(advancementItemId: string, item: Item5e) {\n    if (item.isEmbedded && !game.settings.get('dnd5e', 'disableAdvancements')) {\n      let manager =\n        dnd5e.applications.advancement.AdvancementManager.forDeletedAdvancement(\n          item.actor,\n          item.id,\n          advancementItemId\n        );\n      if (manager.steps.length) return manager.render(true);\n    }\n    return item.deleteAdvancement(advancementItemId);\n  },\n  modifyAdvancementChoices(advancementLevel: string, item: Item5e) {\n    let manager =\n      dnd5e.applications.advancement.AdvancementManager.forModifyChoices(\n        item.actor,\n        item.id,\n        Number(advancementLevel)\n      );\n\n    if (manager.steps.length) {\n      manager.render(true);\n    }\n  },\n  editAdvancement(advancementItemId: string, item: Item5e) {\n    const advancement = item.advancement.byId[advancementItemId];\n\n    return new advancement.constructor.metadata.apps.config(advancement).render(\n      true\n    );\n  },\n  async renderSheetFromUuid(uuid: string) {\n    (await fromUuid(uuid))?.sheet?.render(true);\n  },\n  renderImagePopout(...args: any[]) {\n    return new ImagePopout(...args).render(true);\n  },\n  browseFilePicker(...args: any[]) {\n    return new FilePicker(...args).browse();\n  },\n  renderArmorConfig(actor: any) {\n    return new dnd5e.applications.actor.ActorArmorConfig(actor).render(true);\n  },\n  renderActorInitiativeConfig(actor: any) {\n    return new dnd5e.applications.actor.ActorInitiativeConfig(actor).render(\n      true\n    );\n  },\n  renderActorAbilityConfig(actor: any, abbreviation: any) {\n    return new dnd5e.applications.actor.ActorAbilityConfig(\n      actor,\n      null,\n      abbreviation\n    ).render(true);\n  },\n  renderActorMovementConfig(actor: any) {\n    return new dnd5e.applications.actor.ActorMovementConfig(actor).render(true);\n  },\n  renderActorHitPointsDialog(actor: any) {\n    return new dnd5e.applications.actor.ActorHitPointsConfig(actor).render(\n      true\n    );\n  },\n  renderActorHitDiceConfig(actor: any) {\n    return new dnd5e.applications.actor.ActorHitDiceConfig(actor).render(true);\n  },\n  dialogConfirm(...args: any[]) {\n    return Dialog.confirm(...args);\n  },\n  renderActorSheetFlags(actor: any) {\n    return new dnd5e.applications.actor.ActorSheetFlags(actor).render(true);\n  },\n  renderToolSelector(actor: any) {\n    return new dnd5e.applications.actor.ToolSelector(actor, 'tool').render(\n      true\n    );\n  },\n  renderActorSensesConfig(actor: any) {\n    return new dnd5e.applications.actor.ActorSensesConfig(actor).render(true);\n  },\n  renderTraitsSelector(actor: any, trait: string) {\n    return new dnd5e.applications.actor.TraitSelector(actor, trait).render(\n      true\n    );\n  },\n  renderProficiencyConfig(actor: any, property: string, key: string) {\n    return new dnd5e.applications.actor.ProficiencyConfig(actor, {\n      property,\n      key,\n    }).render(true);\n  },\n  renderItemTypeConfig(item: any) {\n    return new dnd5e.applications.actor.ActorTypeConfig(item, {\n      keyPath: 'system.type',\n    }).render(true);\n  },\n  renderItemMovementConfig(item: any) {\n    return new dnd5e.applications.actor.ActorMovementConfig(item, {\n      keyPath: 'system.movement',\n    }).render(true);\n  },\n  renderItemSensesConfig(item: any) {\n    return new dnd5e.applications.actor.ActorSensesConfig(item, {\n      keyPath: 'system.senses',\n    }).render(true);\n  },\n  renderSourceConfig(document: any, keyPath: string) {\n    return new dnd5e.applications.SourceConfig(document, {\n      keyPath,\n    }).render(true);\n  },\n  async onActorItemDelete(actor: Actor5e, item: Item5e) {\n    // If item has advancement, handle it separately\n    if (!game.settings.get('dnd5e', 'disableAdvancements')) {\n      const manager =\n        dnd5e.applications.advancement.AdvancementManager.forDeletedItem(\n          actor,\n          item.id\n        );\n\n      if (manager.steps.length) {\n        try {\n          const shouldRemoveAdvancements =\n            await dnd5e.applications.advancement.AdvancementConfirmationDialog.forDelete(\n              item\n            );\n\n          if (shouldRemoveAdvancements) {\n            return manager.render(true);\n          }\n\n          return item.delete({ shouldRemoveAdvancements });\n        } catch (err) {\n          // This dialog throws an exception when you click cancel. We'll ignore it.\n          return;\n        }\n      }\n    }\n\n    return item.deleteDialog();\n  },\n  getActivationTypeLabel(activationType: string) {\n    return activationType === 'other'\n      ? FoundryAdapter.localize('DND5E.ActionOther')\n      : game.dnd5e.config.abilityActivationTypes[activationType];\n  },\n  lookupDamageType(type: string) {\n    return game.dnd5e.config.damageTypes[type]?.label;\n  },\n  lookupHealingType(type: string) {\n    return game.dnd5e.config.healingTypes[type];\n  },\n  lookupAbility(abbr: string) {\n    return game.dnd5e.config.abilities[abbr];\n  },\n  actorTryUseItem(item: Item5e, config: any = {}, options: any = {}) {\n    const suppressItemUse =\n      TidyHooks.tidy5eSheetsActorPreUseItem(item, config, options) === false;\n\n    if (suppressItemUse) {\n      return;\n    }\n\n    item.use(config, options);\n  },\n  onActorItemButtonContextMenu(item: Item5e, options: { event: Event }) {\n    // Allow another module to react to a context menu action on the item use button.\n    TidyHooks.tidy5eSheetsActorItemUseContextMenu(item, options);\n  },\n  /**\n   * Fires appropriate hooks related to tab selection and reports whether tab selection was cancelled.\n   * @param app the associated sheets\n   * @param newTabId the new tab ID to select\n   * @returns `true` to indicate proceeding with tab change; `false` to halt tab change\n   */\n  onTabSelecting(app: any & { currentTabId: string }, newTabId: string) {\n    const canProceed = TidyHooks.tidy5eSheetsPreSelectTab(\n      app,\n      app.element.get(0),\n      {\n        currentTab: app.currentTabId,\n        newTab: newTabId,\n      }\n    );\n\n    if (!canProceed) {\n      return false;\n    }\n\n    setTimeout(() => {\n      TidyHooks.tidy5eSheetsSelectTab(app, app.element.get(0), newTabId);\n    });\n\n    return true;\n  },\n  getAbilitiesAsDropdownOptions(abilities: any): DropdownListOption[] {\n    try {\n      return Object.entries<any>(abilities).map(([key, { label }]) => ({\n        value: key,\n        text: label,\n      }));\n    } catch (e) {\n      error(\n        'An error occurred while mapping abilities as dropdown items',\n        false,\n        e\n      );\n      debug('Dropdown mapping error troubleshooting info', { abilities });\n      return [];\n    }\n  },\n  countPreparedSpells(items: Item5e[]) {\n    return items.filter(\n      (item: Item5e) =>\n        item.type === CONSTANTS.ITEM_TYPE_SPELL &&\n        item.system.level > 0 &&\n        item.system.preparation.mode ===\n          CONSTANTS.SPELL_PREPARATION_MODE_PREPARED &&\n        item.system.preparation.prepared\n    ).length;\n  },\n  concealDetails(item: Item5e | null | undefined) {\n    return !game.user.isGM && item?.system?.identified === false;\n  },\n  getIdentifiedName(item: Item5e): string {\n    if (!FoundryAdapter.userIsGm() || item?.system?.identified !== false) {\n      return item.name;\n    }\n\n    try {\n      return FoundryAdapter.localize('TIDY5E.GMOnly.Message', {\n        message: item.toJSON().name,\n      });\n    } catch (e) {\n      error(\n        'An error occurred while getting the identified name of this item for the GM',\n        false,\n        e\n      );\n      return '';\n    }\n  },\n  async toggleCondition(document: Actor5e, condition: any) {\n    const existing = document.effects.get(\n      dnd5e.utils.staticID(`dnd5e${condition.id}`)\n    );\n\n    if (existing) {\n      return existing.delete();\n    }\n\n    const effect = await ActiveEffect.implementation.fromStatusEffect(\n      condition.id\n    );\n\n    return ActiveEffect.implementation.create(effect, {\n      parent: document,\n      keepId: true,\n    });\n  },\n  getEffect({\n    document,\n    effectId,\n    parentId,\n  }: {\n    document: any;\n    effectId: string;\n    parentId?: string;\n  }) {\n    let effect = document.effects?.get(effectId);\n    if (effect) {\n      return effect;\n    }\n    const parentDocument = document.items.get(parentId);\n    effect = parentDocument?.effects?.get(effectId);\n    return (\n      effect ??\n      FoundryAdapter.tryGetLegacyTransferredEffect(parentDocument, effectId)\n    );\n  },\n  /** Last-ditch effort to find an effect by ID in a given document. */\n  tryGetLegacyTransferredEffect(document: any, effectId: string) {\n    return document\n      ?.allApplicableEffects?.()\n      .find((e: ActiveEffect5e) => e.id === effectId);\n  },\n  canUseItem(item: Item5e) {\n    return !(!item.actor || !item.actor.isOwner || item.actor.pack);\n  },\n  useClassicControls(document: any) {\n    return (\n      (document.type === CONSTANTS.SHEET_TYPE_CHARACTER &&\n        SettingsProvider.settings.useClassicControlsForCharacter.get()) ||\n      (document.type === CONSTANTS.SHEET_TYPE_NPC &&\n        SettingsProvider.settings.useClassicControlsForNpc.get()) ||\n      (document.type === CONSTANTS.SHEET_TYPE_VEHICLE &&\n        SettingsProvider.settings.useClassicControlsForVehicle.get()) ||\n      // Temporary stopgap: When we don't recognize a supported document for Classic Controls options, fall back to the character user setting\n      SettingsProvider.settings.useClassicControlsForCharacter.get()\n    );\n  },\n  attunementContextApplicable: {\n    icon: 'fa-sun',\n    cls: 'not-attuned',\n    title: 'ERROR: This should be replaced with valid attunement type text',\n  },\n  attunementContextAttune: {\n    icon: 'fa-sun',\n    cls: 'attuned',\n    title: 'DND5E.AttunementAttuned',\n  },\n  getAttunementContext(item: Item5e): AttunementContext | undefined {\n    return !!item.system.attunement && !item.system.attuned\n      ? {\n          ...FoundryAdapter.attunementContextApplicable,\n          title: CONFIG.DND5E.attunementTypes[item.system.attunement],\n        }\n      : !!item.system.attunement && item.system.attuned\n      ? FoundryAdapter.attunementContextAttune\n      : undefined;\n  },\n  async identifyAllItemsForContainer(container: any, items: Item5e[]) {\n    const updates = items.map((i) => ({\n      _id: i.id,\n      'system.identified': true,\n    }));\n    await Item.updateDocuments(updates, {\n      parent: container.actor,\n      pack: container.pack,\n    });\n  },\n  async markAllItemsAsUnidentifiedForContainer(\n    container: any,\n    items: Item5e[]\n  ) {\n    const updates = items.map((i) => ({\n      _id: i.id,\n      'system.identified': false,\n    }));\n    await Item.updateDocuments(updates, {\n      parent: container.actor,\n      pack: container.pack,\n    });\n  },\n  canIdentify(item: Item5e) {\n    return (\n      FoundryAdapter.userIsGm() ||\n      (SettingsProvider.settings.itemIdentificationPermission.get() ===\n        CONSTANTS.SHEET_SETTINGS_OPTION_GM_AND_OWNERS &&\n        item.isOwner)\n    );\n  },\n  getJqueryWrappedElement(el: HTMLElement) {\n    return $(el);\n  },\n  onAmmoChange(item: Item5e, ammoId: string) {\n    const ammo = item.actor?.items.find((i: any) => i.id === ammoId);\n\n    item.update({\n      system: {\n        consume: {\n          amount: !ammo\n            ? null\n            : !!item.system.consume?.amount\n            ? item.system.consume.amount\n            : 1,\n          target: !ammo ? '' : ammo.id,\n          type: !ammo ? '' : ammo.system.type.value,\n        },\n      },\n    });\n  },\n  openSpellSlotsConfig(actor: Actor5e) {\n    new dnd5e.applications.actor.ActorSpellSlotsConfig(actor).render(true);\n  },\n  openSummonConfig(item: Item5e) {\n    new dnd5e.applications.item.SummoningConfig(item).render(true);\n  },\n  openDamageModificationConfig(actor: Actor5e) {\n    new dnd5e.applications.actor.DamageModificationConfig(actor).render(true);\n  },\n  openActorConcentrationConfig(actor: Actor5e) {\n    new dnd5e.applications.actor.ActorConcentrationConfig(actor).render(true);\n  },\n  openStartingEquipmentConfig(item: Item5e) {\n    new dnd5e.applications.item.StartingEquipmentConfig(item).render(true);\n  },\n  isConcentrationEffect(effect: ActiveEffect5e, app: any) {\n    return (\n      app.document instanceof dnd5e.documents.Actor5e &&\n      app._concentration?.effects.has(effect)\n    );\n  },\n  activateEditors(node: HTMLElement, sheet: any, bindSecrets: boolean = true) {\n    try {\n      const nodes = node.matches(\n        CONSTANTS.TEXT_EDITOR_ACTIVATION_ELEMENT_SELECTOR\n      )\n        ? [node]\n        : Array.from(\n            node.querySelectorAll<HTMLElement>(\n              CONSTANTS.TEXT_EDITOR_ACTIVATION_ELEMENT_SELECTOR\n            )\n          );\n\n      for (let editorDiv of nodes) {\n        sheet._activateEditor(editorDiv);\n      }\n      if (bindSecrets) {\n        sheet._secrets.forEach((s: any) => s.bind(node));\n      }\n    } catch (e) {\n      error('An error occurred while activating text editors', false, e);\n      debug('Text editor error trobuleshooting info', { node, sheet });\n    }\n  },\n  async openEnchantmentConfig(item: Item5e) {\n    return new dnd5e.applications.item.EnchantmentConfig(item).render(true);\n  },\n  async renderFromUuid(uuid: string, force: boolean = true) {\n    const doc = await fromUuid(uuid);\n    return doc?.sheet?.render(force);\n  },\n  async removeEnchantment(enchantmentUuid: string, app: any) {\n    const enchantment = fromUuidSync(enchantmentUuid);\n    if (!enchantment) return;\n    await enchantment.delete();\n    await app.render();\n  },\n};\n","import { ItemFilterRuntime } from \"./item/ItemFilterRuntime\";\nimport { SheetPreferencesRuntime } from \"./user-preferences/SheetPreferencesRuntime\";\n\nexport function initRuntime() {\n    ItemFilterRuntime.init();\n    SheetPreferencesRuntime.init();\n}","<script lang=\"ts\">\n  import { FoundryAdapter } from 'src/foundry/foundry-adapter';\n  import { getContext } from 'svelte';\n  import type MigrationNotificationFormApplication from './MigrationNotificationFormApplication';\n  import { SettingsProvider } from 'src/settings/settings';\n  import { BulkMigrationsApplication } from '../BulkMigrationsApplication';\n  import { CONSTANTS } from 'src/constants';\n\n  const localize = FoundryAdapter.localize;\n\n  const confirm =\n    getContext<MigrationNotificationFormApplication['confirm']>('confirm');\n\n  const migrationsConfirmedTally =\n    SettingsProvider.settings.migrationsConfirmationTally.get();\n\n  const migrations = [\n    {\n      label: localize('TIDY5E.Settings.Migrations.NpcExhaustion.sectionTitle'),\n      migrationTallyVersion: 6,\n      onClick: () =>\n        new BulkMigrationsApplication(\n          CONSTANTS.TAB_MIGRATIONS_NPC_EXHAUSTION,\n        ).render(true),\n    },\n    {\n      label: localize(\n        'TIDY5E.Settings.Migrations.SpellClassToSourceClass.sectionTitle',\n      ),\n      migrationTallyVersion: 5,\n      onClick: () =>\n        new BulkMigrationsApplication(\n          CONSTANTS.TAB_MIGRATIONS_SPELL_CLASS_TO_SOURCE_CLASS,\n        ).render(true),\n    },\n    {\n      label: localize(\n        'TIDY5E.Settings.Migrations.BondsIdealsFlawsToSystem.sectionTitle',\n      ),\n      migrationTallyVersion: 5,\n      onClick: () =>\n        new BulkMigrationsApplication(\n          CONSTANTS.TAB_MIGRATIONS_BONDS_IDEALS_FLAWS_TO_SYSTEM,\n        ).render(true),\n    },\n    {\n      label: localize(\n        'TIDY5E.Settings.Migrations.FavoritesToSystem.sectionTitle',\n      ),\n      migrationTallyVersion: 4,\n      onClick: () =>\n        new BulkMigrationsApplication(\n          CONSTANTS.TAB_MIGRATIONS_FAVORITES_TO_SYSTEM,\n        ).render(true),\n    },\n    {\n      label: localize('TIDY5E.Settings.Migrations.CcssToTidy.sectionTitle'),\n      migrationTallyVersion: 3,\n      onClick: () =>\n        new BulkMigrationsApplication(\n          CONSTANTS.TAB_MIGRATIONS_CCSS_TO_TIDY,\n        ).render(true),\n    },\n    {\n      label: localize('TIDY5E.Settings.Migrations.NpcDeathSaves.sectionTitle'),\n      migrationTallyVersion: 2,\n      onClick: () =>\n        new BulkMigrationsApplication(\n          CONSTANTS.TAB_MIGRATIONS_NPC_DEATH,\n        ).render(true),\n    },\n    {\n      label: localize(\n        'TIDY5E.Settings.Migrations.CharacterBiography.sectionTitle',\n      ),\n      migrationTallyVersion: 1,\n      onClick: () =>\n        new BulkMigrationsApplication(\n          CONSTANTS.TAB_MIGRATIONS_CHARACTER_BIOGRAPHY,\n        ).render(true),\n    },\n  ];\n</script>\n\n<div class=\"flex-column\">\n  <p>\n    {@html localize('TIDY5E.Settings.Migrations.Notification.Explanation', {\n      boldStart: '<b>',\n      boldEnd: '</b>',\n    })}\n    <i\n      data-tooltip={localize(\n        'TIDY5E.Settings.Migrations.Notification.Explanation2',\n      )}\n      class=\"fas fa-question-circle\"\n    ></i>\n  </p>\n  <ul>\n    {#each migrations as migration}\n      {@const isNew =\n        migrationsConfirmedTally < migration.migrationTallyVersion}\n      <li class:new={isNew} class=\"flex-row small-gap\">\n        {#if isNew}\n          <i class=\"new-icon fas fa-star\" />\n        {/if}\n        <button\n          type=\"button\"\n          class=\"inline-transparent-button highlight-on-hover\"\n          on:click={() => migration.onClick()}\n        >\n          <span>{migration.label}</span>\n        </button>\n        {#if isNew}\n          <hr />\n        {/if}\n      </li>\n    {/each}\n  </ul>\n\n  <div class=\"button-bar flex-row no-gap\">\n    <button type=\"button\" on:click={() => confirm()}\n      >{localize(\n        'TIDY5E.Settings.Migrations.Notification.Button.DoNotShowAgain',\n      )}</button\n    >\n  </div>\n</div>\n\n<style lang=\"scss\">\n  ul {\n    list-style: none;\n    margin: 0;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  .new-icon {\n    color: var(--t5e-primary-accent-color);\n  }\n\n  hr {\n    background: linear-gradient(\n      to right,\n      var(--t5e-primary-accent-color),\n      transparent\n    );\n    height: 0.125rem;\n    border: none;\n    flex: 1;\n    align-self: center;\n  }\n\n  .button-bar {\n    margin-top: 1rem;\n  }\n</style>\n","/**\n * A tally that represents the number of migrations that have been added to Tidy.\n * This field is used by the developer to control whether a migration notification appears for the GM.\n * When the GM indicates \"Do Not Show Again,\" the migration tally is saved to world config,\n * to prevent the dialog from showing until the next round of migrations.\n * The number of times this tally advances is not as important as the fact that it advances at least once for any release that contains at least one new migration.\n */\n\nexport const MigrationTally = 6 as const;\n","import type { SvelteComponent } from 'svelte';\nimport SvelteFormApplicationBase from 'src/applications/SvelteFormApplicationBase';\nimport { FoundryAdapter } from 'src/foundry/foundry-adapter';\nimport MigrationNotification from './MigrationNotification.svelte';\nimport { MigrationTally } from 'src/migrations/MigrationTally';\n\nexport default class MigrationNotificationFormApplication extends SvelteFormApplicationBase {\n  static get defaultOptions() {\n    return {\n      ...super.defaultOptions,\n      height: 'auto',\n      width: 400,\n      classes: [...super.defaultOptions.classes, 'migration-notifications'],\n      resizable: true,\n    };\n  }\n\n  get title() {\n    return FoundryAdapter.localize(\n      'TIDY5E.Settings.Migrations.Notification.Title'\n    );\n  }\n\n  createComponent(node: HTMLElement): SvelteComponent<any, any, any> {\n    return new MigrationNotification({\n      target: node,\n      context: new Map<string, any>([['confirm', this.confirm.bind(this)]]),\n    });\n  }\n\n  confirm() {\n    FoundryAdapter.setTidySetting(\n      'migrationsConfirmationTally',\n      MigrationTally\n    );\n\n    this.close();\n\n    ui.notifications.info(\n      FoundryAdapter.localize(\n        'TIDY5E.Settings.Migrations.Notification.DoNotShowAgain.ConfirmMessage'\n      ),\n      { permanent: true }\n    );\n  }\n}\n","import type { ModuleIntegrationBase } from '../ModuleIntegrationBase';\nimport type { ContextMenuPositionInfo } from 'src/context-menu/context-menu.types';\n\ndeclare var PopoutModule: any;\n\nexport class PopoutModuleIntegration implements ModuleIntegrationBase {\n  get moduleId(): string {\n    return 'popout';\n  }\n  init(): void {\n    this.setCorrectContextMenuPosition();\n  }\n\n  private setCorrectContextMenuPosition() {\n    Hooks.on(\n      'tidy5e-sheet.prepareFloatingContextMenuPosition',\n      (info: ContextMenuPositionInfo) => {\n        const appNode = info.target.closest('[data-appId]');\n        const appIdAttribute = appNode?.getAttribute('data-appId');\n        const appId = parseInt(appIdAttribute ?? '');\n\n        const isPoppedOut = PopoutModule.singleton.poppedOut.has(appId);\n\n        if (!isPoppedOut) {\n          return;\n        }\n\n        const poppedOutBody =\n          PopoutModule.singleton.poppedOut.get(appId).window.document.body;\n\n        // Make the popped out Window Proxy the insert target for the context menu.\n        info.insertTarget = poppedOutBody;\n\n        poppedOutBody.addEventListener(\n          'click',\n          () => {\n            ui.context?.close();\n            // Remove the \"context\" class from any Tidy content, since some things may be decorated by that class.\n            poppedOutBody\n              .querySelectorAll('[data-context-menu]')\n              .forEach((el: HTMLElement) => el.classList.remove('context'));\n          },\n          { once: true }\n        );\n      }\n    );\n  }\n}\n","import type { Tidy5eSheetsApi } from 'src/api/Tidy5eSheetsApi';\nimport type { ModuleIntegrationBase } from '../ModuleIntegrationBase';\n\nexport class CustomCharacterSheetsModuleIntegration\n  implements ModuleIntegrationBase\n{\n  get moduleId(): string {\n    return 'custom-character-sheet-sections';\n  }\n  init(api: Tidy5eSheetsApi): void {\n    Hooks.on(\n      'custom-character-sheet-sections.preCustomSectionGetData',\n      (data: any) => {\n        return !api.isTidy5eSheet(data.actor.sheet);\n      }\n    );\n  }\n}\n","import { PopoutModuleIntegration } from './modules/PopoutModuleIntegration';\nimport type { ModuleIntegrationBase } from './ModuleIntegrationBase';\nimport { error } from 'src/utils/logging';\nimport { CustomCharacterSheetsModuleIntegration } from './modules/CustomCharacterSheetsModuleIntegration';\nimport type { Tidy5eSheetsApi } from 'src/api/Tidy5eSheetsApi';\n\nconst moduleIntegrations: ModuleIntegrationBase[] = [\n  new PopoutModuleIntegration(),\n  new CustomCharacterSheetsModuleIntegration(),\n  // Add other module integrations here\n];\n\nexport function setupModuleIntegrations(api: Tidy5eSheetsApi) {\n  moduleIntegrations.forEach((m) => {\n    try {\n      if (game.modules.get(m.moduleId)?.active) {\n        m.init(api);\n      }\n    } catch (e) {\n      error(`Module integration failed for ${m.moduleId}`, false, e);\n    }\n  });\n}\n","import { FoundryAdapter } from './foundry/foundry-adapter';\nimport { Tidy5eCharacterSheet } from './sheets/Tidy5eCharacterSheet';\nimport './scss/core.scss';\nimport { SettingsProvider, initSettings } from './settings/settings';\nimport { Tidy5eKgarItemSheet } from './sheets/Tidy5eItemSheet';\nimport { Tidy5eNpcSheet } from './sheets/Tidy5eNpcSheet';\nimport { Tidy5eVehicleSheet } from './sheets/Tidy5eKgarVehicleSheet';\nimport { CONSTANTS } from './constants';\nimport { Tidy5eSheetsApi } from './api/Tidy5eSheetsApi';\nimport '../public/rpg-awesome/style/rpg-awesome.min.css';\nimport { initRuntime } from './runtime/runtime-init';\nimport MigrationNotificationFormApplication from 'src/migrations/notification/MigrationNotificationFormApplication';\nimport { MigrationTally } from 'src/migrations/MigrationTally';\nimport { Tidy5eKgarContainerSheet } from './sheets/Tidy5eContainerSheet';\nimport { setupModuleIntegrations } from './integration/integration';\nimport { TidyHooks } from './foundry/TidyHooks';\n\nHooks.once('init', () => {\n  DocumentSheetConfig.registerSheet(\n    Actor,\n    CONSTANTS.DND5E_SYSTEM_ID,\n    Tidy5eCharacterSheet,\n    {\n      types: [CONSTANTS.SHEET_TYPE_CHARACTER],\n      label: 'TIDY5E.Tidy5eSheet',\n    }\n  );\n\n  DocumentSheetConfig.registerSheet(\n    Actor,\n    CONSTANTS.DND5E_SYSTEM_ID,\n    Tidy5eNpcSheet,\n    {\n      types: [CONSTANTS.SHEET_TYPE_NPC],\n      label: 'TIDY5E.Tidy5eNPC',\n    }\n  );\n\n  DocumentSheetConfig.registerSheet(\n    Actor,\n    CONSTANTS.DND5E_SYSTEM_ID,\n    Tidy5eVehicleSheet,\n    {\n      types: [CONSTANTS.SHEET_TYPE_VEHICLE],\n      label: 'TIDY5E.Tidy5eVehicle',\n    }\n  );\n\n  DocumentSheetConfig.registerSheet(\n    Item,\n    CONSTANTS.DND5E_SYSTEM_ID,\n    Tidy5eKgarItemSheet,\n    {\n      types: [\n        CONSTANTS.ITEM_TYPE_BACKGROUND,\n        CONSTANTS.ITEM_TYPE_CLASS,\n        CONSTANTS.ITEM_TYPE_CONSUMABLE,\n        CONSTANTS.ITEM_TYPE_EQUIPMENT,\n        CONSTANTS.ITEM_TYPE_FEAT,\n        CONSTANTS.ITEM_TYPE_LOOT,\n        CONSTANTS.ITEM_TYPE_RACE,\n        CONSTANTS.ITEM_TYPE_SPELL,\n        CONSTANTS.ITEM_TYPE_SUBCLASS,\n        CONSTANTS.ITEM_TYPE_TOOL,\n        CONSTANTS.ITEM_TYPE_WEAPON,\n      ],\n      label: 'TIDY5E.Tidy5eItemSheet',\n    }\n  );\n\n  DocumentSheetConfig.registerSheet(\n    Item,\n    CONSTANTS.DND5E_SYSTEM_ID,\n    Tidy5eKgarContainerSheet,\n    {\n      types: [CONSTANTS.SHEET_TYPE_CONTAINER],\n      label: 'TIDY5E.Tidy5eContainerSheet',\n    }\n  );\n\n  initSettings();\n  initRuntime();\n});\n\nHooks.once('ready', async () => {\n  const tidy5eModule = FoundryAdapter.getModule(CONSTANTS.MODULE_ID);\n  const api = Tidy5eSheetsApi._getApi();\n  tidy5eModule.api = api;\n\n  TidyHooks.tidy5eSheetsReady(api);\n\n  setupModuleIntegrations(api);\n\n  if (\n    FoundryAdapter.userIsGm() &&\n    SettingsProvider.settings.migrationsConfirmationTally.get() < MigrationTally\n  ) {\n    new MigrationNotificationFormApplication().render(true);\n  }\n});\n"],"names":["notify","r","t","n","e","u","a","o","i","s","h","$","Colord","c","noop","x","b","now","element","text","hash","delay","p","linear","detach","init","d","create_each_block","get_context","insert","update","instance","create_fragment","subscribe","run","ctx","create_if_block","active","f","y","crossfade","create_if_block_1","create_if_block_2","create_dynamic_element","dispatch","m","document","create_if_block_5","create_if_block_4","create_if_block_3","create_if_block_14","create_if_block_13","create_if_block_12","create_if_block_11","create_if_block_10","create_if_block_9","create_if_block_8","create_if_block_7","create_if_block_6","get_if_ctx","card","handleDragStart","func","clamp","item","focus_handler","mappings","children","classicControlsIconWidth","isEmpty","section","context","get","AssignSpellsToSourceClasses","create_if_block_22","create_if_block_21","create_if_block_20","create_if_block_19","create_if_block_18","create_if_block_17","create_if_block_16","create_if_block_15","func_1","actor","Bar","value","v","colord","event","TextInput","colorToConfigure","self","options","w","target","features","Info","moduleId"],"mappings":"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","x_google_ignoreList":[6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,23,39,40,41,232,233,234,235,236,237,238,239,240,241]}