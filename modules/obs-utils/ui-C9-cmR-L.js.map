{"version":3,"file":"ui-C9-cmR-L.js","sources":["../node_modules/svelte/src/runtime/internal/spread.js","../src/svelte/components/OBSSetting.svelte","../src/svelte/components/OBSTab.svelte","../node_modules/@typhonjs-fvtt/runtime/_dist/util/object/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/util/browser/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/cssVariables.js","../node_modules/@typhonjs-fvtt/runtime/_dist/util/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/util/store/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/action/dom/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/math/interpolate/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/transition/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/application/AppShellContextInternal.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/util/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/helper/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/store/writable-derived/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/math/gl-matrix/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/util/animate/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/math/util/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/store/position/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/application/TJSHeaderButton.svelte","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/application/TJSApplicationHeader.svelte","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/application/TJSFocusWrap.svelte","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/application/ResizableHandle.svelte","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/application/ApplicationShell.svelte","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/component/core/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/store/reducer/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/store/fvtt/document/index.js","../src/svelte/components/SceneSelect.svelte","../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../node_modules/@floating-ui/core/dist/floating-ui.core.mjs","../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../node_modules/svelte-floating-ui/index.js","../node_modules/svelte-select/filter.js","../node_modules/svelte-select/get-items.js","../node_modules/svelte-select/ChevronIcon.svelte","../node_modules/svelte-select/ClearIcon.svelte","../node_modules/svelte-select/LoadingIcon.svelte","../node_modules/svelte-select/Select.svelte","../src/svelte/OBSRemote.svelte","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/internal/state-app/ApplicationState.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/internal/state-svelte/GetSvelteData.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/store/web-storage/index.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/internal/state-reactive/SvelteReactive.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/internal/util/applicationShellContract.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/internal/util/isApplicationShell.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/internal/util/loadSvelteConfig.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/internal/TJSAppIndex.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/SvelteApplication.js","../node_modules/@typhonjs-fvtt/runtime/_dist/svelte/application/index.js","../src/applications/obsremote.js","../src/svelte/OBSWebsocket.svelte","../src/applications/obswebsocket.js","../node_modules/@sveltejs/svelte-virtual-list/VirtualList.svelte","../src/svelte/OverlayActorSelectUI.svelte","../src/applications/overlayactorselect.js","../src/svelte/StyleEditorUi.svelte","../src/applications/styleditor.js","../src/svelte/components/editors/FallbackEditor.svelte","../src/svelte/components/editors/SingleLineOverlayEditor.svelte","../node_modules/sortablejs/modular/sortable.esm.js","../node_modules/@jhubbardsf/svelte-sortablejs/SortableList.svelte","../src/svelte/components/OverlayEditorTab.svelte","../src/svelte/OverlayEditorUI.svelte","../src/applications/overlayeditor.js","../src/svelte/DirectorApp.svelte","../src/applications/director.js","../src/applications/settingsShell.js","../src/svelte/components/editors/AVEditor.svelte","../src/svelte/components/editors/PlayerRollOverlayEditor.svelte","../src/applications/rolloverlay.js","../src/svelte/components/CollapsibleSection.svelte","../src/svelte/NotificationCenterUI.svelte","../src/applications/notificationCenter.js","../src/svelte/components/editors/MultiAVIconEditor.svelte","../src/svelte/components/editors/MultiAVEditor.svelte","../src/svelte/components/editors/BooleanEditor.svelte","../src/utils/ui.js"],"sourcesContent":["/** @returns {{}} */\nexport function get_spread_update(levels, updates) {\n\tconst update = {};\n\tconst to_null_out = {};\n\tconst accounted_for = { $$scope: 1 };\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\treturn update;\n}\n\nexport function get_spread_object(spread_props) {\n\treturn typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n","<script>\n  import { OBSAction } from \"../../utils/settings\";\n  import { fade } from \"svelte/transition\";\n\n  export let removeFn;\n  export let event;\n  export let useWebSocket;\n\n  let idDisabled = true;\n  let sceneDisabled = false;\n\n  let actionTypes = Object.values(OBSAction);\n\n  if (!useWebSocket) {\n    actionTypes = actionTypes.filter((type) => type === OBSAction.SwitchScene);\n  }\n\n  function changeEvent() {\n    idDisabled = event.targetAction === OBSAction.SwitchScene;\n  }\n\n  changeEvent();\n</script>\n\n<li transition:fade>\n  <div class=\"setting\">\n    <select\n      bind:value=\"{event.targetAction}\"\n      name=\"types\"\n      on:change=\"{changeEvent}\"\n    >\n      {#each actionTypes as action}\n        <option value=\"{action}\">{action}</option>\n      {/each}\n    </select>\n    <input\n      bind:value=\"{event.sceneName}\"\n      disabled=\"{sceneDisabled}\"\n      name=\"sceneNames\"\n      placeholder=\"OBS Scene Name\"\n    />\n    <input\n      bind:value=\"{event.targetName}\"\n      disabled=\"{idDisabled}\"\n      name=\"itemIDs\"\n      placeholder=\"OBS Source Name\"\n    />\n    <button on:click=\"{removeFn}\" type=\"button\">\n      <i class=\"fas fa-trash\"></i>\n    </button>\n  </div>\n</li>\n\n<style>\n  .setting {\n    height: 35px;\n    display: flex;\n    justify-content: center;\n    align-content: space-around;\n    flex-flow: row nowrap;\n    align-items: stretch;\n  }\n\n  .setting button {\n    width: 35px;\n    margin: auto;\n  }\n\n  .setting select {\n    height: auto;\n  }\n\n  li {\n    padding-top: 1px;\n    padding-bottom: 1px;\n  }\n</style>\n","<script>\n  import { OBSEvent } from \"../../utils/settings\";\n  import ObsSetting from \"./OBSSetting.svelte\";\n\n  export let eventArray;\n  export let useWebSocket;\n\n  function handleRemove(index) {\n    eventArray = [\n      ...eventArray.slice(0, index),\n      ...eventArray.slice(index + 1, eventArray.length),\n    ];\n  }\n\n  export const handleAdd = () => {\n    eventArray = eventArray.concat(new OBSEvent());\n  };\n</script>\n\n<div class=\"scroll\">\n  <ul>\n    {#each eventArray as event, index (eventArray.indexOf(event))}\n      <ObsSetting\n        event=\"{event}\"\n        removeFn=\"{() => handleRemove(index)}\"\n        useWebSocket=\"{useWebSocket}\"\n      />\n    {/each}\n  </ul>\n</div>\n\n<style>\n  .scroll {\n    overflow: auto;\n    float: left;\n    max-height: 535px;\n    height: 535px;\n    width: auto;\n    padding-left: 3px;\n  }\n\n  ul {\n    list-style-type: none;\n    padding: 0;\n  }\n</style>\n","function set(obj, key, val) {\n\tif (typeof val.value === 'object') val.value = klona(val.value);\n\tif (!val.enumerable || val.get || val.set || !val.configurable || !val.writable || key === '__proto__') {\n\t\tObject.defineProperty(obj, key, val);\n\t} else obj[key] = val.value;\n}\n\nfunction klona(x) {\n\tif (typeof x !== 'object') return x;\n\n\tvar i=0, k, list, tmp, str=Object.prototype.toString.call(x);\n\n\tif (str === '[object Object]') {\n\t\ttmp = Object.create(x.__proto__ || null);\n\t} else if (str === '[object Array]') {\n\t\ttmp = Array(x.length);\n\t} else if (str === '[object Set]') {\n\t\ttmp = new Set;\n\t\tx.forEach(function (val) {\n\t\t\ttmp.add(klona(val));\n\t\t});\n\t} else if (str === '[object Map]') {\n\t\ttmp = new Map;\n\t\tx.forEach(function (val, key) {\n\t\t\ttmp.set(klona(key), klona(val));\n\t\t});\n\t} else if (str === '[object Date]') {\n\t\ttmp = new Date(+x);\n\t} else if (str === '[object RegExp]') {\n\t\ttmp = new RegExp(x.source, x.flags);\n\t} else if (str === '[object DataView]') {\n\t\ttmp = new x.constructor( klona(x.buffer) );\n\t} else if (str === '[object ArrayBuffer]') {\n\t\ttmp = x.slice(0);\n\t} else if (str.slice(-6) === 'Array]') {\n\t\t// ArrayBuffer.isView(x)\n\t\t// ~> `new` bcuz `Buffer.slice` => ref\n\t\ttmp = new x.constructor(x);\n\t}\n\n\tif (tmp) {\n\t\tfor (list=Object.getOwnPropertySymbols(x); i < list.length; i++) {\n\t\t\tset(tmp, list[i], Object.getOwnPropertyDescriptor(x, list[i]));\n\t\t}\n\n\t\tfor (i=0, list=Object.getOwnPropertyNames(x); i < list.length; i++) {\n\t\t\tif (Object.hasOwnProperty.call(tmp, k=list[i]) && tmp[k] === x[k]) continue;\n\t\t\tset(tmp, k, Object.getOwnPropertyDescriptor(x, k));\n\t\t}\n\t}\n\n\treturn tmp || x;\n}\n\n/**\n * Provides common object manipulation utilities including depth traversal, obtaining accessors, safely setting values /\n * equality tests, and validation.\n */\nconst s_TAG_OBJECT = '[object Object]';\nconst s_TAG_MAP = '[object Map]';\nconst s_TAG_SET = '[object Set]';\nconst s_TAG_STRING = '[object String]';\n/**\n * Freezes all entries traversed that are objects including entries in arrays.\n *\n * @param {object | []}   data - An object or array.\n *\n * @param {Set<string>}   [skipFreezeKeys] - A Set of strings indicating keys of objects to not freeze.\n *\n * @returns {object | []} The frozen object.\n */\nfunction deepFreeze(data, skipFreezeKeys) {\n    /* c8 ignore next 1 */\n    if (typeof data !== 'object') {\n        throw new TypeError(`'data' is not an 'object'.`);\n    }\n    /* c8 ignore next 4 */\n    if (skipFreezeKeys !== void 0 && !(skipFreezeKeys instanceof Set)) {\n        throw new TypeError(`'skipFreezeKeys' is not an 'Set'.`);\n    }\n    return _deepFreeze(data, skipFreezeKeys);\n}\n/**\n * Recursively deep merges all source objects into the target object in place. Like `Object.assign` if you provide `{}`\n * as the target a copy is produced. If the target and source property are object literals they are merged.\n * Deleting keys is supported by specifying a property starting with `-=`.\n *\n * @param {object}      target - Target object.\n *\n * @param {...object}   sourceObj - One or more source objects.\n *\n * @returns {object}    Target object.\n */\nfunction deepMerge(target = {}, ...sourceObj) {\n    if (Object.prototype.toString.call(target) !== s_TAG_OBJECT) {\n        throw new TypeError(`deepMerge error: 'target' is not an 'object'.`);\n    }\n    for (let cntr = 0; cntr < sourceObj.length; cntr++) {\n        if (Object.prototype.toString.call(sourceObj[cntr]) !== s_TAG_OBJECT) {\n            throw new TypeError(`deepMerge error: 'sourceObj[${cntr}]' is not an 'object'.`);\n        }\n    }\n    return _deepMerge(target, ...sourceObj);\n}\n/**\n * Performs a naive depth traversal of an object / array. The data structure _must not_ have circular references.\n * The result of the callback function is used to modify in place the given data.\n *\n * @param {object | []}   data - An object or array.\n *\n * @param {(any) => any}  func - A callback function to process leaf values in children arrays or object members.\n *\n * @param {boolean}       modify - If true then the result of the callback function is used to modify in place\n *                                  the given data.\n *\n * @returns {*} The data object.\n */\nfunction depthTraverse(data, func, modify = false) {\n    /* c8 ignore next 1 */\n    if (typeof data !== 'object') {\n        throw new TypeError(`'data' is not an 'object'.`);\n    }\n    /* c8 ignore next 1 */\n    if (typeof func !== 'function') {\n        throw new TypeError(`'func' is not a 'function'.`);\n    }\n    return _depthTraverse(data, func, modify);\n}\n/**\n * Returns a list of accessor keys by traversing the given object.\n *\n * @param {object}   data - An object to traverse for accessor keys.\n *\n * @returns {string[]} Accessor list.\n */\nfunction getAccessorList(data) {\n    if (typeof data !== 'object') {\n        throw new TypeError(`getAccessorList error: 'data' is not an 'object'.`);\n    }\n    return _getAccessorList(data);\n}\n/**\n * Provides a method to determine if the passed in Svelte component has a getter & setter accessor.\n *\n * @param {object}   object - An object.\n *\n * @param {string}   accessor - Accessor to test.\n *\n * @returns {boolean} Whether the component has the getter and setter for accessor.\n */\nfunction hasAccessor(object, accessor) {\n    if (typeof object !== 'object' || object === null || object === void 0) {\n        return false;\n    }\n    // Check for instance accessor.\n    const iDescriptor = Object.getOwnPropertyDescriptor(object, accessor);\n    if (iDescriptor !== void 0 && iDescriptor.get !== void 0 && iDescriptor.set !== void 0) {\n        return true;\n    }\n    // Walk parent prototype chain. Check for descriptor at each prototype level.\n    for (let o = Object.getPrototypeOf(object); o; o = Object.getPrototypeOf(o)) {\n        const descriptor = Object.getOwnPropertyDescriptor(o, accessor);\n        if (descriptor !== void 0 && descriptor.get !== void 0 && descriptor.set !== void 0) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Provides a method to determine if the passed in Svelte component has a getter accessor.\n *\n * @param {object}   object - An object.\n *\n * @param {string}   accessor - Accessor to test.\n *\n * @returns {boolean} Whether the component has the getter for accessor.\n */\nfunction hasGetter(object, accessor) {\n    if (typeof object !== 'object' || object === null || object === void 0) {\n        return false;\n    }\n    // Check for instance accessor.\n    const iDescriptor = Object.getOwnPropertyDescriptor(object, accessor);\n    if (iDescriptor !== void 0 && iDescriptor.get !== void 0) {\n        return true;\n    }\n    // Walk parent prototype chain. Check for descriptor at each prototype level.\n    for (let o = Object.getPrototypeOf(object); o; o = Object.getPrototypeOf(o)) {\n        const descriptor = Object.getOwnPropertyDescriptor(o, accessor);\n        if (descriptor !== void 0 && descriptor.get !== void 0) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Returns whether the target is or has the given prototype walking up the prototype chain.\n *\n * @param {unknown}  target - Any target to test.\n *\n * @param {new (...args: any[]) => any} Prototype - Prototype function / class constructor to find.\n *\n * @returns {boolean} Target matches prototype.\n */\nfunction hasPrototype(target, Prototype) {\n    /* c8 ignore next */\n    if (typeof target !== 'function') {\n        return false;\n    }\n    if (target === Prototype) {\n        return true;\n    }\n    // Walk parent prototype chain. Check for descriptor at each prototype level.\n    for (let proto = Object.getPrototypeOf(target); proto; proto = Object.getPrototypeOf(proto)) {\n        if (proto === Prototype) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Provides a method to determine if the passed in Svelte component has a setter accessor.\n *\n * @param {object}   object - An object.\n *\n * @param {string}   accessor - Accessor to test.\n *\n * @returns {boolean} Whether the component has the setter for accessor.\n */\nfunction hasSetter(object, accessor) {\n    if (typeof object !== 'object' || object === null || object === void 0) {\n        return false;\n    }\n    // Check for instance accessor.\n    const iDescriptor = Object.getOwnPropertyDescriptor(object, accessor);\n    if (iDescriptor !== void 0 && iDescriptor.set !== void 0) {\n        return true;\n    }\n    // Walk parent prototype chain. Check for descriptor at each prototype level.\n    for (let o = Object.getPrototypeOf(object); o; o = Object.getPrototypeOf(o)) {\n        const descriptor = Object.getOwnPropertyDescriptor(o, accessor);\n        if (descriptor !== void 0 && descriptor.set !== void 0) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Tests for whether an object is async iterable.\n *\n * @param {unknown} value - Any value.\n *\n * @returns {boolean} Whether value is async iterable.\n */\nfunction isAsyncIterable(value) {\n    if (typeof value !== 'object' || value === null || value === void 0) {\n        return false;\n    }\n    return Symbol.asyncIterator in value;\n}\n/**\n * Tests for whether an object is iterable.\n *\n * @param {unknown} value - Any value.\n *\n * @returns {boolean} Whether object is iterable.\n */\nfunction isIterable(value) {\n    if (value === null || value === void 0 || typeof value !== 'object') {\n        return false;\n    }\n    return Symbol.iterator in value;\n}\n/**\n * Tests for whether object is not null and a typeof object.\n *\n * @param {unknown} value - Any value.\n *\n * @returns {boolean} Is it an object.\n */\nfunction isObject(value) {\n    return value !== null && typeof value === 'object' && !Array.isArray(value);\n}\n/**\n * Tests for whether the given value is a plain object.\n *\n * An object is plain if it is created by either: `{}`, `new Object()` or `Object.create(null)`.\n *\n * @param {unknown} value - Any value\n *\n * @returns {boolean} Is it a plain object.\n */\nfunction isPlainObject(value) {\n    if (Object.prototype.toString.call(value) !== s_TAG_OBJECT) {\n        return false;\n    }\n    const prototype = Object.getPrototypeOf(value);\n    return prototype === null || prototype === Object.prototype;\n}\n/**\n * Safely returns keys on an object or an empty array if not an object.\n *\n * @param {object} object - An object.\n *\n * @returns {string[]}  Object keys or empty array.\n */\nfunction objectKeys(object) {\n    return isObject(object) ? Object.keys(object) : [];\n}\n/**\n * Safely returns an objects size. Note for String objects unicode is not taken into consideration.\n *\n * @param {any} object - Any value, but size returned for object / Map / Set / arrays / strings.\n *\n * @returns {number} Size of object.\n */\nfunction objectSize(object) {\n    if (object === void 0 || object === null || typeof object !== 'object') {\n        return 0;\n    }\n    const tag = Object.prototype.toString.call(object);\n    if (tag === s_TAG_MAP || tag === s_TAG_SET) {\n        return object.size;\n    }\n    if (tag === s_TAG_STRING) {\n        return object.length;\n    }\n    return Object.keys(object).length;\n}\n/**\n * Provides a way to safely access an objects data / entries given an accessor string which describes the\n * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\n * to walk.\n *\n * @param {object}   data - An object to access entry data.\n *\n * @param {string}   accessor - A string describing the entries to access with keys separated by `.`.\n *\n * @param {any}      [defaultValue] - (Optional) A default value to return if an entry for accessor is not found.\n *\n * @returns {object} The data object.\n */\nfunction safeAccess(data, accessor, defaultValue) {\n    if (typeof data !== 'object') {\n        return defaultValue;\n    }\n    if (typeof accessor !== 'string') {\n        return defaultValue;\n    }\n    const access = accessor.split('.');\n    // Walk through the given object by the accessor indexes.\n    for (let cntr = 0; cntr < access.length; cntr++) {\n        // If the next level of object access is undefined or null then return the empty string.\n        if (typeof data[access[cntr]] === 'undefined' || data[access[cntr]] === null) {\n            return defaultValue;\n        }\n        data = data[access[cntr]];\n    }\n    return data;\n}\n/**\n * Provides a way to safely batch set an objects data / entries given an array of accessor strings which describe the\n * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\n * to walk. If value is an object the accessor will be used to access a target value from `value` which is\n * subsequently set to `data` by the given operation. If `value` is not an object it will be used as the target\n * value to set across all accessors.\n *\n * @param {object}   data - An object to access entry data.\n *\n * @param {string[]} accessors - A string describing the entries to access.\n *\n * @param {any}      value - A new value to set if an entry for accessor is found.\n *\n * @param {SafeSetOperation}   [operation='set'] - Operation to perform including: 'add', 'div', 'mult', 'set',\n *        'set-undefined', 'sub'.\n *\n * @param {any}      [defaultAccessValue=0] - A new value to set if an entry for accessor is found.\n *\n * @param {boolean}  [createMissing=true] - If true missing accessor entries will be created as objects automatically.\n */\nfunction safeBatchSet(data, accessors, value, operation = 'set', defaultAccessValue = 0, createMissing = true) {\n    if (typeof data !== 'object') {\n        throw new TypeError(`safeBatchSet Error: 'data' is not an 'object'.`);\n    }\n    if (!Array.isArray(accessors)) {\n        throw new TypeError(`safeBatchSet Error: 'accessors' is not an 'array'.`);\n    }\n    if (typeof value === 'object') {\n        accessors.forEach((accessor) => {\n            const targetValue = safeAccess(value, accessor, defaultAccessValue);\n            safeSet(data, accessor, targetValue, operation, createMissing);\n        });\n    }\n    else {\n        accessors.forEach((accessor) => {\n            safeSet(data, accessor, value, operation, createMissing);\n        });\n    }\n}\n/**\n * Compares a source object and values of entries against a target object. If the entries in the source object match\n * the target object then `true` is returned otherwise `false`. If either object is undefined or null then false\n * is returned.\n *\n * @param {object}   source - Source object.\n *\n * @param {object}   target - Target object.\n *\n * @returns {boolean} True if equal.\n */\nfunction safeEqual(source, target) {\n    if (typeof source === 'undefined' || source === null || typeof target === 'undefined' || target === null) {\n        return false;\n    }\n    const sourceAccessors = getAccessorList(source);\n    for (let cntr = 0; cntr < sourceAccessors.length; cntr++) {\n        const accessor = sourceAccessors[cntr];\n        const sourceObjectValue = safeAccess(source, accessor);\n        const targetObjectValue = safeAccess(target, accessor);\n        if (sourceObjectValue !== targetObjectValue) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Provides a way to safely set an objects data / entries given an accessor string which describes the\n * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\n * to walk.\n *\n * @param {object}   data - An object to access entry data.\n *\n * @param {string}   accessor - A string describing the entries to access.\n *\n * @param {any}      value - A new value to set if an entry for accessor is found.\n *\n * @param {SafeSetOperation}   [operation='set'] - Operation to perform including: 'add', 'div', 'mult', 'set',\n *        'set-undefined', 'sub'.\n *\n * @param {boolean}  [createMissing=true] - If true missing accessor entries will be created as objects\n *        automatically.\n *\n * @returns {boolean} True if successful.\n */\nfunction safeSet(data, accessor, value, operation = 'set', createMissing = true) {\n    if (typeof data !== 'object') {\n        throw new TypeError(`safeSet Error: 'data' is not an 'object'.`);\n    }\n    if (typeof accessor !== 'string') {\n        throw new TypeError(`safeSet Error: 'accessor' is not a 'string'.`);\n    }\n    const access = accessor.split('.');\n    // Walk through the given object by the accessor indexes.\n    for (let cntr = 0; cntr < access.length; cntr++) {\n        // If data is an array perform validation that the accessor is a positive integer otherwise quit.\n        if (Array.isArray(data)) {\n            const number = (+access[cntr]);\n            if (!Number.isInteger(number) || number < 0) {\n                return false;\n            }\n        }\n        if (cntr === access.length - 1) {\n            switch (operation) {\n                case 'add':\n                    data[access[cntr]] += value;\n                    break;\n                case 'div':\n                    data[access[cntr]] /= value;\n                    break;\n                case 'mult':\n                    data[access[cntr]] *= value;\n                    break;\n                case 'set':\n                    data[access[cntr]] = value;\n                    break;\n                case 'set-undefined':\n                    if (typeof data[access[cntr]] === 'undefined') {\n                        data[access[cntr]] = value;\n                    }\n                    break;\n                case 'sub':\n                    data[access[cntr]] -= value;\n                    break;\n            }\n        }\n        else {\n            // If createMissing is true and the next level of object access is undefined then create a new object entry.\n            if (createMissing && typeof data[access[cntr]] === 'undefined') {\n                data[access[cntr]] = {};\n            }\n            // Abort if the next level is null or not an object and containing a value.\n            if (data[access[cntr]] === null || typeof data[access[cntr]] !== 'object') {\n                return false;\n            }\n            data = data[access[cntr]];\n        }\n    }\n    return true;\n}\n/**\n * Performs bulk setting of values to the given data object.\n *\n * @param {object}            data - The data object to set data.\n *\n * @param {Record<string, any>}  accessorValues - Object of accessor keys to values to set.\n *\n * @param {SafeSetOperation}  [operation='set'] - Operation to perform including: 'add', 'div', 'mult', 'set', 'sub';\n *        default (`set`).\n *\n * @param {boolean}           [createMissing=true] - If true missing accessor entries will be created as objects\n *        automatically.\n */\nfunction safeSetAll(data, accessorValues, operation = 'set', createMissing = true) {\n    if (typeof data !== 'object') {\n        throw new TypeError(`'data' is not an 'object'.`);\n    }\n    if (typeof accessorValues !== 'object') {\n        throw new TypeError(`'accessorValues' is not an 'object'.`);\n    }\n    for (const accessor of Object.keys(accessorValues)) {\n        if (!Object.prototype.hasOwnProperty.call(accessorValues, accessor)) {\n            continue;\n        }\n        safeSet(data, accessor, accessorValues[accessor], operation, createMissing);\n    }\n}\n/**\n * Performs bulk validation of data given an object, `validationData`, which describes all entries to test.\n *\n * @param {object}                           data - The data object to test.\n *\n * @param {Record<string, ValidationEntry>}  validationData - Key is the accessor / value is a validation entry.\n *\n * @param {string}                           [dataName='data'] - Optional name of data.\n *\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\n */\nfunction validate(data, validationData = {}, dataName = 'data') {\n    if (typeof data !== 'object') {\n        throw new TypeError(`'${dataName}' is not an 'object'.`);\n    }\n    if (typeof validationData !== 'object') {\n        throw new TypeError(`'validationData' is not an 'object'.`);\n    }\n    let result;\n    for (const key of Object.keys(validationData)) {\n        if (!Object.prototype.hasOwnProperty.call(validationData, key)) {\n            continue;\n        }\n        const entry = validationData[key];\n        switch (entry.test) {\n            case 'array':\n                result = validateArray(data, key, entry, dataName);\n                break;\n            case 'entry':\n                result = validateEntry(data, key, entry, dataName);\n                break;\n            case 'entry|array':\n                result = validateEntryOrArray(data, key, entry, dataName);\n                break;\n        }\n    }\n    return result;\n}\n/**\n * Validates all array entries against potential type and expected tests.\n *\n * @param {object}            data - The data object to test.\n *\n * @param {string}            accessor - A string describing the entries to access.\n *\n * @param {ValidationEntry}   entry - Validation entry object\n *\n * @param {string}            [dataName='data'] - Optional name of data.\n *\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\n */\nfunction validateArray(data, accessor, entry, dataName = 'data') {\n    const valEntry = Object.assign({ required: true, error: true }, entry);\n    const dataArray = safeAccess(data, accessor);\n    // A non-required entry is missing so return without validation.\n    if (!valEntry?.required && typeof dataArray === 'undefined') {\n        return true;\n    }\n    if (!Array.isArray(dataArray)) {\n        if (valEntry.error) {\n            throw _validateError(TypeError, `'${dataName}.${accessor}' is not an 'array'.`);\n        }\n        else {\n            return false;\n        }\n    }\n    if (typeof valEntry.type === 'string') {\n        for (let cntr = 0; cntr < dataArray.length; cntr++) {\n            if (!(typeof dataArray[cntr] === valEntry.type)) {\n                if (valEntry.error) {\n                    const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\n                        dataArray[cntr];\n                    throw _validateError(TypeError, `'${dataName}.${accessor}[${cntr}]': '${dataEntryString}' is not a '${valEntry.type}'.`);\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n    }\n    // If expected is a function then test all array entries against the test function. If expected is a Set then\n    // test all array entries for inclusion in the set. Otherwise, if expected is a string then test that all array\n    // entries as a `typeof` test against expected.\n    if (Array.isArray(valEntry.expected)) {\n        for (let cntr = 0; cntr < dataArray.length; cntr++) {\n            if (!valEntry.expected.includes(dataArray[cntr])) {\n                if (valEntry.error) {\n                    const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\n                        dataArray[cntr];\n                    throw _validateError(Error, `'${dataName}.${accessor}[${cntr}]': '${dataEntryString}' is not an expected value: ${JSON.stringify(valEntry.expected)}.`);\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n    }\n    else if (valEntry.expected instanceof Set) {\n        for (let cntr = 0; cntr < dataArray.length; cntr++) {\n            if (!valEntry.expected.has(dataArray[cntr])) {\n                if (valEntry.error) {\n                    const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\n                        dataArray[cntr];\n                    throw _validateError(Error, `'${dataName}.${accessor}[${cntr}]': '${dataEntryString}' is not an expected value: ${JSON.stringify(valEntry.expected)}.`);\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n    }\n    else if (typeof valEntry.expected === 'function') {\n        for (let cntr = 0; cntr < dataArray.length; cntr++) {\n            try {\n                const result = valEntry.expected(dataArray[cntr]);\n                if (typeof result === 'undefined' || !result) {\n                    throw new Error(valEntry.message);\n                }\n            }\n            catch (err) {\n                if (valEntry.error) {\n                    const dataEntryString = typeof dataArray[cntr] === 'object' ? JSON.stringify(dataArray[cntr]) :\n                        dataArray[cntr];\n                    throw _validateError(Error, `'${dataName}.${accessor}[${cntr}]': '${dataEntryString}' failed validation: ${err.message}.`);\n                }\n                else {\n                    return false;\n                }\n            }\n        }\n    }\n    return true;\n}\n/**\n * Validates data entry with a typeof check and potentially tests against the values in any given expected set.\n *\n * @param {object}            data - The object data to validate.\n *\n * @param {string}            accessor - A string describing the entries to access.\n *\n * @param {ValidationEntry}   entry - Validation entry.\n *\n * @param {string}            [dataName='data'] - Optional name of data.\n *\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\n */\nfunction validateEntry(data, accessor, entry, dataName = 'data') {\n    const valEntry = Object.assign({ required: true, error: true }, entry);\n    const dataEntry = safeAccess(data, accessor);\n    // A non-required entry is missing so return without validation.\n    if (!valEntry.required && typeof dataEntry === 'undefined') {\n        return true;\n    }\n    if (valEntry.type && typeof dataEntry !== valEntry.type) {\n        if (valEntry.error) {\n            throw _validateError(TypeError, `'${dataName}.${accessor}' is not a '${valEntry.type}'.`);\n        }\n        else {\n            return false;\n        }\n    }\n    if ((valEntry.expected instanceof Set && !valEntry.expected.has(dataEntry)) ||\n        (Array.isArray(valEntry.expected) && !valEntry.expected.includes(dataEntry))) {\n        if (valEntry.error) {\n            const dataEntryString = typeof dataEntry === 'object' ? JSON.stringify(dataEntry) : dataEntry;\n            throw _validateError(Error, `'${dataName}.${accessor}': '${dataEntryString}' is not an expected value: ${JSON.stringify(valEntry.expected)}.`);\n        }\n        else {\n            return false;\n        }\n    }\n    else if (typeof valEntry.expected === 'function') {\n        try {\n            const result = valEntry.expected(dataEntry);\n            if (typeof result === 'undefined' || !result) {\n                throw new Error(valEntry.message);\n            }\n        }\n        catch (err) {\n            if (valEntry.error) {\n                const dataEntryString = typeof dataEntry === 'object' ? JSON.stringify(dataEntry) : dataEntry;\n                throw _validateError(Error, `'${dataName}.${accessor}': '${dataEntryString}' failed to validate: ${err.message}.`);\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n/**\n * Dispatches validation of data entry to string or array validation depending on data entry type.\n *\n * @param {object}            data - The data object to test.\n *\n * @param {string}            accessor - A string describing the entries to access.\n *\n * @param {ValidationEntry}   [entry] - A validation entry.\n *\n * @param {string}            [dataName='data'] - Optional name of data.\n *\n * @returns {boolean} True if validation passes otherwise an exception is thrown.\n */\nfunction validateEntryOrArray(data, accessor, entry, dataName = 'data') {\n    const dataEntry = safeAccess(data, accessor);\n    let result;\n    if (Array.isArray(dataEntry)) {\n        result = validateArray(data, accessor, entry, dataName);\n    }\n    else {\n        result = validateEntry(data, accessor, entry, dataName);\n    }\n    return result;\n}\n// Module private ---------------------------------------------------------------------------------------------------\n/**\n * Private implementation of depth traversal.\n *\n * @param {any}         data - An object or array or any leaf.\n *\n * @param {Set<string>} [skipFreezeKeys] - An array of strings indicating keys of objects to not freeze.\n *\n * @returns {*} The frozen object.\n * @ignore\n * @private\n */\nfunction _deepFreeze(data, skipFreezeKeys) {\n    if (Array.isArray(data)) {\n        for (let cntr = 0; cntr < data.length; cntr++) {\n            _deepFreeze(data[cntr], skipFreezeKeys);\n        }\n    }\n    else if (isObject(data)) {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key) && !skipFreezeKeys?.has?.(key)) {\n                _deepFreeze(data[key], skipFreezeKeys);\n            }\n        }\n    }\n    return Object.freeze(data);\n}\n/**\n * Internal implementation for `deepMerge`.\n *\n * @param {object}      target - Target object.\n *\n * @param {...object}   sourceObj - One or more source objects.\n *\n * @returns {object}    Target object.\n */\nfunction _deepMerge(target = {}, ...sourceObj) {\n    // Iterate and merge all source objects into target.\n    for (let cntr = 0; cntr < sourceObj.length; cntr++) {\n        const obj = sourceObj[cntr];\n        for (const prop in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n                // Handle the special property starting with '-=' to delete keys.\n                if (prop.startsWith('-=')) {\n                    delete target[prop.slice(2)];\n                    continue;\n                }\n                // If target already has prop and both target[prop] and obj[prop] are object literals then merge them\n                // otherwise assign obj[prop] to target[prop].\n                target[prop] = Object.prototype.hasOwnProperty.call(target, prop) && target[prop]?.constructor === Object &&\n                    obj[prop]?.constructor === Object ? _deepMerge({}, target[prop], obj[prop]) : obj[prop];\n            }\n        }\n    }\n    return target;\n}\n/**\n * Private implementation of depth traversal.\n *\n * @param {any}      data - An object, array, or any leaf value\n *\n * @param {Function} func - A callback function to process leaf values in children arrays or object members.\n *\n * @param {boolean}  modify - If true then the result of the callback function is used to modify in place the\n *        given data.\n *\n * @returns {*} The data object.\n * @ignore\n * @private\n */\nfunction _depthTraverse(data, func, modify = false) {\n    if (modify) {\n        if (Array.isArray(data)) {\n            for (let cntr = 0; cntr < data.length; cntr++) {\n                data[cntr] = _depthTraverse(data[cntr], func, modify);\n            }\n        }\n        else if (isObject(data)) {\n            for (const key in data) {\n                if (Object.prototype.hasOwnProperty.call(data, key)) {\n                    data[key] = _depthTraverse(data[key], func, modify);\n                }\n            }\n        }\n        else {\n            data = func(data);\n        }\n    }\n    else {\n        if (Array.isArray(data)) {\n            for (let cntr = 0; cntr < data.length; cntr++) {\n                _depthTraverse(data[cntr], func, modify);\n            }\n        }\n        else if (typeof data === 'object') {\n            for (const key in data) {\n                if (Object.prototype.hasOwnProperty.call(data, key)) {\n                    _depthTraverse(data[key], func, modify);\n                }\n            }\n        }\n        else {\n            func(data);\n        }\n    }\n    return data;\n}\n/**\n * Private implementation of `getAccessorList`.\n *\n * @param {object}   data - An object to traverse.\n *\n * @returns {string[]} Accessor list.\n * @ignore\n * @private\n */\nfunction _getAccessorList(data) {\n    const accessors = [];\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            if (typeof data[key] === 'object') {\n                const childKeys = _getAccessorList(data[key]);\n                childKeys.forEach((childKey) => {\n                    accessors.push(Array.isArray(childKey) ? `${key}.${childKey.join('.')}` : `${key}.${childKey}`);\n                });\n            }\n            else {\n                accessors.push(key);\n            }\n        }\n    }\n    return accessors;\n}\n/**\n * Creates a new error of type `clazz` adding the field `_objectValidateError` set to true.\n *\n * @param {Error}    clazz - Error class to instantiate.\n *\n * @param {string}   message - An error message.\n *\n * @returns {*} Error of the clazz.\n * @ignore\n * @private\n */\nfunction _validateError(clazz, message = void 0) {\n    const error = new clazz(message);\n    error._objectValidateError = true;\n    return error;\n}\n\nexport { deepFreeze, deepMerge, depthTraverse, getAccessorList, hasAccessor, hasGetter, hasPrototype, hasSetter, isAsyncIterable, isIterable, isObject, isPlainObject, klona, objectKeys, objectSize, safeAccess, safeBatchSet, safeEqual, safeSet, safeSetAll, validate, validateArray, validateEntry, validateEntryOrArray };\n//# sourceMappingURL=index.js.map\n","import { isObject, isIterable } from '@typhonjs-fvtt/runtime/util/object';\n\nfunction isSpace(character) {\n    return character == \" \" || character == \"\\n\" || character == \"\\r\" || character == \"\\t\";\n}\nfunction isQuote(character) {\n    return character == '\"' || character == \"'\";\n}\nconst TAG_START = \"<\";\nconst TAG_END = \">\";\nconst ENCODED_TAG_START = \"&lt;\";\nconst ENCODED_TAG_END = \"&gt;\";\nclass InPlaintextState {\n    constructor(options) {\n        this.options = options;\n    }\n    consume(character, transition) {\n        if (character == TAG_START) {\n            transition(new InTagNameState(this.options));\n            return \"\";\n        }\n        else if (character == TAG_END && this.options.encodePlaintextTagDelimiters) {\n            return ENCODED_TAG_END;\n        }\n        return character;\n    }\n}\nclass InTagNameState {\n    constructor(options) {\n        this.options = options;\n        this.nameBuffer = \"\";\n        this.isClosingTag = false;\n    }\n    consume(character, transition) {\n        if (this.nameBuffer.length == 0) {\n            if (isSpace(character)) {\n                transition(new InPlaintextState(this.options));\n                return ((this.options.encodePlaintextTagDelimiters ? ENCODED_TAG_START : \"<\") +\n                    character);\n            }\n            if (character == \"/\") {\n                this.isClosingTag = true;\n                return \"\";\n            }\n        }\n        if (isSpace(character)) {\n            if (this.isNameBufferAnAllowedTag()) {\n                transition(new InTagState(0 /* TagMode.Allowed */, this.options));\n                return TAG_START + (this.isClosingTag ? \"/\" : \"\") + this.nameBuffer + character;\n            }\n            else {\n                transition(new InTagState(1 /* TagMode.Disallowed */, this.options));\n                return this.options.tagReplacementText;\n            }\n        }\n        if (character == TAG_START) {\n            this.nameBuffer += ENCODED_TAG_START;\n            return \"\";\n        }\n        if (character == TAG_END) {\n            transition(new InPlaintextState(this.options));\n            if (this.isNameBufferAnAllowedTag()) {\n                return TAG_START + (this.isClosingTag ? \"/\" : \"\") + this.nameBuffer + character;\n            }\n            else {\n                return this.options.tagReplacementText;\n            }\n        }\n        if (character == \"-\" && this.nameBuffer == \"!-\") {\n            transition(new InCommentState(this.options));\n            return \"\";\n        }\n        this.nameBuffer += character;\n        return \"\";\n    }\n    isNameBufferAnAllowedTag() {\n        const tagName = this.nameBuffer.toLowerCase();\n        if (this.options.allowedTags) {\n            return this.options.allowedTags.has(tagName);\n        }\n        else if (this.options.disallowedTags) {\n            return !this.options.disallowedTags.has(tagName);\n        }\n        else {\n            return false;\n        }\n    }\n}\nclass InTagState {\n    constructor(mode, options) {\n        this.mode = mode;\n        this.options = options;\n    }\n    consume(character, transition) {\n        if (character == TAG_END) {\n            transition(new InPlaintextState(this.options));\n        }\n        else if (isQuote(character)) {\n            transition(new InQuotedStringInTagState(this.mode, character, this.options));\n        }\n        if (this.mode == 1 /* TagMode.Disallowed */) {\n            return \"\";\n        }\n        if (character == TAG_START) {\n            return ENCODED_TAG_START;\n        }\n        else {\n            return character;\n        }\n    }\n}\nclass InQuotedStringInTagState {\n    constructor(mode, quoteCharacter, options) {\n        this.mode = mode;\n        this.quoteCharacter = quoteCharacter;\n        this.options = options;\n    }\n    consume(character, transition) {\n        if (character == this.quoteCharacter) {\n            transition(new InTagState(this.mode, this.options));\n        }\n        if (this.mode == 1 /* TagMode.Disallowed */) {\n            return \"\";\n        }\n        if (character == TAG_START) {\n            return ENCODED_TAG_START;\n        }\n        else if (character == TAG_END) {\n            return ENCODED_TAG_END;\n        }\n        else {\n            return character;\n        }\n    }\n}\nclass InCommentState {\n    constructor(options) {\n        this.options = options;\n        this.consecutiveHyphens = 0;\n    }\n    consume(character, transition) {\n        if (character == \">\" && this.consecutiveHyphens >= 2) {\n            transition(new InPlaintextState(this.options));\n        }\n        else if (character == \"-\") {\n            this.consecutiveHyphens++;\n        }\n        else {\n            this.consecutiveHyphens = 0;\n        }\n        return \"\";\n    }\n}\n\nconst DefaultStateMachineOptions = {\n    tagReplacementText: \"\",\n    encodePlaintextTagDelimiters: true,\n};\nclass StateMachine {\n    constructor(partialOptions = {}) {\n        this.state = new InPlaintextState(Object.assign(Object.assign({}, DefaultStateMachineOptions), partialOptions));\n        this.transitionFunction = ((next) => {\n            this.state = next;\n        }).bind(this);\n    }\n    consume(text) {\n        let outputBuffer = \"\";\n        for (const character of text) {\n            outputBuffer += this.state.consume(character, this.transitionFunction);\n        }\n        return outputBuffer;\n    }\n}\nfunction striptags(text, options = {}) {\n    return new StateMachine(options).consume(text);\n}\n\n/**\n * Provides several helpful utility methods for accessibility and keyboard navigation.\n */\nclass A11yHelper\n{\n   /**\n    * Apply focus to the HTMLElement targets in a given A11yFocusSource data object. An iterable list `options.focusEl`\n    * can contain HTMLElements or selector strings. If multiple focus targets are provided in a list then the first\n    * valid target found will be focused. If focus target is a string then a lookup via `document.querySelector` is\n    * performed. In this case you should provide a unique selector for the desired focus target.\n    *\n    * Note: The body of this method is postponed to the next clock tick to allow any changes in the DOM to occur that\n    * might alter focus targets before applying.\n    *\n    * @param {A11yFocusSource|{ focusSource: A11yFocusSource }}   options - The focus options instance to apply.\n    */\n   static applyFocusSource(options)\n   {\n      if (!isObject(options)) { return; }\n\n      // Handle the case of receiving an object with embedded `focusSource`.\n      const focusOpts = isObject(options?.focusSource) ? options.focusSource : options;\n\n      setTimeout(() =>\n      {\n         const debug = typeof focusOpts.debug === 'boolean' ? focusOpts.debug : false;\n\n         if (isIterable(focusOpts.focusEl))\n         {\n            if (debug)\n            {\n               console.debug(`A11yHelper.applyFocusSource debug - Attempting to apply focus target: `, focusOpts.focusEl);\n            }\n\n            for (const target of focusOpts.focusEl)\n            {\n               if (target instanceof HTMLElement && target.isConnected)\n               {\n                  target.focus();\n                  if (debug)\n                  {\n                     console.debug(`A11yHelper.applyFocusSource debug - Applied focus to target: `, target);\n                  }\n                  break;\n               }\n               else if (typeof target === 'string')\n               {\n                  const element = document.querySelector(target);\n                  if (element instanceof HTMLElement && element.isConnected)\n                  {\n                     element.focus();\n                     if (debug)\n                     {\n                        console.debug(`A11yHelper.applyFocusSource debug - Applied focus to target: `, element);\n                     }\n                     break;\n                  }\n                  else if (debug)\n                  {\n                     console.debug(`A11yHelper.applyFocusSource debug - Could not query selector: `, target);\n                  }\n               }\n            }\n         }\n         else if (debug)\n         {\n            console.debug(`A11yHelper.applyFocusSource debug - No focus targets defined.`);\n         }\n      }, 0);\n   }\n\n   /**\n    * Returns first focusable element within a specified element.\n    *\n    * @param {HTMLElement|Document} [element=document] - Optional element to start query.\n    *\n    * @param {object} [options] - Optional parameters.\n    *\n    * @param {Iterable<string>} [options.ignoreClasses] - Iterable list of classes to ignore elements.\n    *\n    * @param {Set<HTMLElement>} [options.ignoreElements] - Set of elements to ignore.\n    *\n    * @returns {HTMLElement} First focusable child element\n    */\n   static getFirstFocusableElement(element = document, options)\n   {\n      const focusableElements = this.getFocusableElements(element, options);\n\n      return focusableElements.length > 0 ? focusableElements[0] : void 0;\n   }\n\n   /**\n    * Returns all focusable elements within a specified element.\n    *\n    * @param {HTMLElement|Document} [element=document] Optional element to start query.\n    *\n    * @param {object}            [options] - Optional parameters.\n    *\n    * @param {boolean}           [options.anchorHref=true] - When true anchors must have an HREF.\n    *\n    * @param {Iterable<string>}  [options.ignoreClasses] - Iterable list of classes to ignore elements.\n    *\n    * @param {Set<HTMLElement>}  [options.ignoreElements] - Set of elements to ignore.\n    *\n    * @param {string}            [options.selectors] - Custom list of focusable selectors for `querySelectorAll`.\n    *\n    * @returns {Array<HTMLElement>} Child keyboard focusable\n    */\n   static getFocusableElements(element = document, { anchorHref = true, ignoreClasses, ignoreElements, selectors } = {})\n   {\n      if (!(element instanceof HTMLElement) && !(element instanceof Document))\n      {\n         throw new TypeError(`'element' is not a HTMLElement or Document instance.`);\n      }\n\n      if (typeof anchorHref !== 'boolean')\n      {\n         throw new TypeError(`'anchorHref' is not a boolean.`);\n      }\n\n      if (ignoreClasses !== void 0 && !isIterable(ignoreClasses))\n      {\n         throw new TypeError(`'ignoreClasses' is not an iterable list.`);\n      }\n\n      if (ignoreElements !== void 0 && !(ignoreElements instanceof Set))\n      {\n         throw new TypeError(`'ignoreElements' is not a Set.`);\n      }\n\n      if (selectors !== void 0 && typeof selectors !== 'string')\n      {\n         throw new TypeError(`'selectors' is not a string.`);\n      }\n\n      const selectorQuery = selectors ?? this.#getFocusableSelectors(anchorHref);\n\n      const allElements = [...element.querySelectorAll(selectorQuery)];\n\n      if (ignoreElements && ignoreClasses)\n      {\n         return allElements.filter((el) =>\n         {\n            let hasIgnoreClass = false;\n            for (const ignoreClass of ignoreClasses)\n            {\n               if (el.classList.contains(ignoreClass))\n               {\n                  hasIgnoreClass = true;\n                  break;\n               }\n            }\n\n            return !hasIgnoreClass && !ignoreElements.has(el) && el.style.display !== 'none' &&\n             el.style.visibility !== 'hidden' && !el.hasAttribute('disabled') && !el.hasAttribute('inert') &&\n              el.getAttribute('aria-hidden') !== 'true';\n         });\n      }\n      else if (ignoreClasses)\n      {\n         return allElements.filter((el) =>\n         {\n            let hasIgnoreClass = false;\n            for (const ignoreClass of ignoreClasses)\n            {\n               if (el.classList.contains(ignoreClass))\n               {\n                  hasIgnoreClass = true;\n                  break;\n               }\n            }\n\n            return !hasIgnoreClass && el.style.display !== 'none' && el.style.visibility !== 'hidden' &&\n             !el.hasAttribute('disabled') && !el.hasAttribute('inert') && el.getAttribute('aria-hidden') !== 'true';\n         });\n      }\n      else if (ignoreElements)\n      {\n         return allElements.filter((el) =>\n         {\n            return !ignoreElements.has(el) && el.style.display !== 'none' && el.style.visibility !== 'hidden' &&\n             !el.hasAttribute('disabled') && !el.hasAttribute('inert') && el.getAttribute('aria-hidden') !== 'true';\n         });\n      }\n      else\n      {\n         return allElements.filter((el) =>\n         {\n            return el.style.display !== 'none' && el.style.visibility !== 'hidden' && !el.hasAttribute('disabled') &&\n             !el.hasAttribute('inert') && el.getAttribute('aria-hidden') !== 'true';\n         });\n      }\n   }\n\n   /**\n    * Returns the default focusable selectors query.\n    *\n    * @param {boolean}  [anchorHref=true] - When true anchors must have an HREF.\n    *\n    * @returns {string} Focusable selectors for `querySelectorAll`.\n    */\n   static #getFocusableSelectors(anchorHref = true)\n   {\n      return `button, [contenteditable=\"\"], [contenteditable=\"true\"], details summary:not([tabindex=\"-1\"]), embed, a${\n       anchorHref ? '[href]' : ''}, iframe, object, input:not([type=hidden]), select, textarea, ` +\n        `[tabindex]:not([tabindex=\"-1\"])`;\n   }\n\n   /**\n    * Gets a A11yFocusSource object from the given DOM event allowing for optional X / Y screen space overrides.\n    * Browsers (Firefox / Chrome) forwards a mouse event for the context menu keyboard button. Provides detection of\n    * when the context menu event is from the keyboard. Firefox as of (1/23) does not provide the correct screen space\n    * coordinates, so for keyboard context menu presses coordinates are generated from the centroid point of the\n    * element.\n    *\n    * A default fallback element or selector string may be provided to provide the focus target. If the event comes from\n    * the keyboard however the source focused element is inserted as the target with the fallback value appended to the\n    * list of focus targets. When A11yFocusSource is applied by {@link A11yHelper.applyFocusSource} the target focus\n    * list is iterated through until a connected target is found and focus applied.\n    *\n    * @param {object} options - Options\n    *\n    * @param {KeyboardEvent|MouseEvent}   [options.event] - The source DOM event.\n    *\n    * @param {boolean} [options.debug] - When true {@link A11yHelper.applyFocusSource} logs focus target data.\n    *\n    * @param {HTMLElement|string} [options.focusEl] - A specific HTMLElement or selector string as the focus target.\n    *\n    * @param {number}   [options.x] - Used when an event isn't provided; integer of event source in screen space.\n    *\n    * @param {number}   [options.y] - Used when an event isn't provided; integer of event source in screen space.\n    *\n    * @returns {A11yFocusSource} A A11yFocusSource object.\n    *\n    * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1426671\n    * @see https://bugzilla.mozilla.org/show_bug.cgi?id=314314\n    *\n    * TODO: Evaluate / test against touch input devices.\n    */\n   static getFocusSource({ event, x, y, focusEl, debug = false })\n   {\n      if (focusEl !== void 0 && !(focusEl instanceof HTMLElement) && typeof focusEl !== 'string')\n      {\n         throw new TypeError(\n          `A11yHelper.getFocusSource error: 'focusEl' is not a HTMLElement or string.`);\n      }\n\n      if (debug !== void 0 && typeof debug !== 'boolean')\n      {\n         throw new TypeError(`A11yHelper.getFocusSource error: 'debug' is not a boolean.`);\n      }\n\n      // Handle the case when no event is provided and x, y, or focusEl is explicitly defined.\n      if (event === void 0)\n      {\n         if (typeof x !== 'number')\n         {\n            throw new TypeError(`A11yHelper.getFocusSource error: 'event' not defined and 'x' is not a number.`);\n         }\n\n         if (typeof y !== 'number')\n         {\n            throw new TypeError(`A11yHelper.getFocusSource error: 'event' not defined and 'y' is not a number.`);\n         }\n\n         return {\n            debug,\n            focusEl: focusEl !== void 0 ? [focusEl] : void 0,\n            x,\n            y,\n         };\n      }\n\n      if (!(event instanceof KeyboardEvent) && !(event instanceof MouseEvent))\n      {\n         throw new TypeError(`A11yHelper.getFocusSource error: 'event' is not a KeyboardEvent or MouseEvent.`);\n      }\n\n      if (x !== void 0 && !Number.isInteger(x))\n      {\n         throw new TypeError(`A11yHelper.getFocusSource error: 'x' is not a number.`);\n      }\n\n      if (y !== void 0 && !Number.isInteger(y))\n      {\n         throw new TypeError(`A11yHelper.getFocusSource error: 'y' is not a number.`);\n      }\n\n      /** @type {HTMLElement} */\n      const targetEl = event.target;\n\n      if (!(targetEl instanceof HTMLElement))\n      {\n         throw new TypeError(`A11yHelper.getFocusSource error: 'event.target' is not an HTMLElement.`);\n      }\n\n      const result = { debug };\n\n      if (event instanceof MouseEvent)\n      {\n         // Firefox currently (1/23) does not correctly determine the location of a keyboard originated\n         // context menu location, so calculate position from middle of the event target.\n         // Firefox fires a mouse event for the context menu key.\n         if (event?.button !== 2 && event.type === 'contextmenu')\n         {\n            const rect = targetEl.getBoundingClientRect();\n            result.x = x ?? rect.left + (rect.width / 2);\n            result.y = y ?? rect.top + (rect.height / 2);\n            result.focusEl = focusEl !== void 0 ? [targetEl, focusEl] : [targetEl];\n            result.source = 'keyboard';\n         }\n         else\n         {\n            result.x = x ?? event.pageX;\n            result.y = y ?? event.pageY;\n            result.focusEl = focusEl !== void 0 ? [focusEl] : void 0;\n         }\n      }\n      else\n      {\n         const rect = targetEl.getBoundingClientRect();\n         result.x = x ?? rect.left + (rect.width / 2);\n         result.y = y ?? rect.top + (rect.height / 2);\n         result.focusEl = focusEl !== void 0 ? [targetEl, focusEl] : [targetEl];\n         result.source = 'keyboard';\n      }\n\n      return result;\n   }\n\n   /**\n    * Returns first focusable element within a specified element.\n    *\n    * @param {HTMLElement|Document} [element=document] - Optional element to start query.\n    *\n    * @param {object} [options] - Optional parameters.\n    *\n    * @param {Iterable<string>} [options.ignoreClasses] - Iterable list of classes to ignore elements.\n    *\n    * @param {Set<HTMLElement>} [options.ignoreElements] - Set of elements to ignore.\n    *\n    * @returns {HTMLElement} First focusable child element\n    */\n   static getLastFocusableElement(element = document, options)\n   {\n      const focusableElements = this.getFocusableElements(element, options);\n\n      return focusableElements.length > 0 ? focusableElements[focusableElements.length - 1] : void 0;\n   }\n\n   /**\n    * Tests if the given element is focusable.\n    *\n    * @param {HTMLElement} [el] - Element to test.\n    *\n    * @param {object} [options] - Optional parameters.\n    *\n    * @param {boolean} [options.anchorHref=true] - When true anchors must have an HREF.\n    *\n    * @param {Iterable<string>} [options.ignoreClasses] - Iterable list of classes to ignore elements.\n    *\n    * @returns {boolean} Element is focusable.\n    */\n   static isFocusable(el, { anchorHref = true, ignoreClasses } = {})\n   {\n      if (el === void 0 || el === null || !(el instanceof HTMLElement) || el?.hidden || !el?.isConnected)\n      {\n         return false;\n      }\n\n      if (typeof anchorHref !== 'boolean')\n      {\n         throw new TypeError(`'anchorHref' is not a boolean.`);\n      }\n\n      if (ignoreClasses !== void 0 && !isIterable(ignoreClasses))\n      {\n         throw new TypeError(`'ignoreClasses' is not an iterable list.`);\n      }\n\n      const contenteditableAttr = el.getAttribute('contenteditable');\n      const contenteditableFocusable = typeof contenteditableAttr === 'string' &&\n       (contenteditableAttr === '' || contenteditableAttr === 'true');\n\n      const tabindexAttr = el.getAttribute('tabindex');\n      const tabindexFocusable = typeof tabindexAttr === 'string' && tabindexAttr !== '-1';\n\n      const isAnchor = el instanceof HTMLAnchorElement;\n\n      if (contenteditableFocusable || tabindexFocusable || isAnchor || el instanceof HTMLButtonElement ||\n       el instanceof HTMLDetailsElement || el instanceof HTMLEmbedElement || el instanceof HTMLIFrameElement ||\n        el instanceof HTMLInputElement || el instanceof HTMLObjectElement || el instanceof HTMLSelectElement ||\n         el instanceof HTMLTextAreaElement)\n      {\n         if (isAnchor && anchorHref && typeof el.getAttribute('href') !== 'string')\n         {\n            return false;\n         }\n\n         return el.style.display !== 'none' && el.style.visibility !== 'hidden' && !el.hasAttribute('disabled') &&\n          !el.hasAttribute('inert') && el.getAttribute('aria-hidden') !== 'true';\n      }\n\n      return false;\n   }\n\n   /**\n    * Convenience method to check if the given data is a valid focus source.\n    *\n    * @param {HTMLElement|string}   data - Either an HTMLElement or selector string.\n    *\n    * @returns {boolean} Is valid focus source.\n    */\n   static isFocusSource(data)\n   {\n      return data instanceof HTMLElement || typeof data === 'string';\n   }\n}\n\n/**\n * @typedef {object} A11yFocusSource Provides essential data to return focus to an HTMLElement after a series of UI\n * actions like working with context menus and modal dialogs.\n *\n * @property {boolean} [debug] When true logs to console the actions taken in {@link A11yHelper.applyFocusSource}.\n *\n * @property {Iterable<HTMLElement|string>} [focusEl] List of targets to attempt to focus.\n *\n * @property {string} [source] The source of the event: 'keyboard' for instance.\n *\n * @property {number} [x] Potential X coordinate of initial event.\n *\n * @property {number} [y] Potential Y coordinate of initial event.\n */\n\n/**\n * Provides utility methods for checking browser capabilities.\n *\n * @see https://kilianvalkhof.com/2021/web/detecting-media-query-support-in-css-and-javascript/\n * TODO: perhaps add support for various standard media query checks for level 4 & 5.\n */\nclass BrowserSupports\n{\n   /**\n    * Check for container query support.\n    *\n    * @returns {boolean} True if container queries supported.\n    */\n   static get containerQueries()\n   {\n      return 'container' in document.documentElement.style;\n   }\n}\n\n/**\n * Provides access to the Clipboard API for reading / writing text strings. This requires a secure context.\n *\n * Note: `writeText` will attempt to use the older `execCommand` if available when `navigator.clipboard` is not\n * available.\n */\nclass ClipboardAccess\n{\n   /**\n    * Uses `navigator.clipboard` if available to read text from the clipboard.\n    *\n    * Note: Always returns `undefined` when `navigator.clipboard` is not available or the clipboard contains the\n    * empty string.\n    *\n    * @returns {Promise<string|undefined>} The current clipboard text or undefined.\n    */\n   static async readText()\n   {\n      let result;\n\n      if (globalThis?.navigator?.clipboard)\n      {\n         try\n         {\n            result = await globalThis.navigator.clipboard.readText();\n         }\n         catch (err) { /**/ }\n      }\n\n      return result === '' ? void 0 : result;\n   }\n\n   /**\n    * Uses `navigator.clipboard` if available then falls back to `document.execCommand('copy')` if available to copy\n    * the given text to the clipboard.\n    *\n    * @param {string}   text - Text to copy to the browser clipboard.\n    *\n    * @returns {Promise<boolean>} Copy successful.\n    */\n   static async writeText(text)\n   {\n      if (typeof text !== 'string')\n      {\n         throw new TypeError(`ClipboardAccess.writeText error: 'text' is not a string.`);\n      }\n\n      let success = false;\n\n      if (globalThis?.navigator?.clipboard)\n      {\n         try\n         {\n            await globalThis.navigator.clipboard.writeText(text);\n            success = true;\n         }\n         catch (err) { /**/ }\n      }\n      else if (globalThis?.document?.execCommand instanceof Function)\n      {\n         const textArea = globalThis.document.createElement('textarea');\n\n         // Place in the top-left corner of screen regardless of scroll position.\n         textArea.style.position = 'fixed';\n         textArea.style.top = '0';\n         textArea.style.left = '0';\n\n         // Ensure it has a small width and height. Setting to 1px / 1em\n         // doesn't work as this gives a negative w/h on some browsers.\n         textArea.style.width = '2em';\n         textArea.style.height = '2em';\n\n         // We don't need padding, reducing the size if it does flash render.\n         textArea.style.padding = '0';\n\n         // Clean up any borders.\n         textArea.style.border = 'none';\n         textArea.style.outline = 'none';\n         textArea.style.boxShadow = 'none';\n\n         // Avoid flash of the white box if rendered for any reason.\n         textArea.style.background = 'transparent';\n\n         textArea.value = text;\n\n         globalThis.document.body.appendChild(textArea);\n         textArea.focus();\n         textArea.select();\n\n         try\n         {\n            success = document.execCommand('copy');\n         }\n         catch (err) { /**/ }\n\n         document.body.removeChild(textArea);\n      }\n\n      return success;\n   }\n}\n\n/**\n * Recursive function that finds the closest parent stacking context.\n * See also https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context\n *\n * Original author: Kerry Liu / https://github.com/gwwar\n *\n * @see https://github.com/gwwar/z-context/blob/master/content-script.js\n * @see https://github.com/gwwar/z-context/blob/master/LICENSE\n *\n * @param {Element} node -\n *\n * @returns {StackingContext} The closest parent stacking context\n */\nfunction getStackingContext(node)\n{\n   // the root element (HTML).\n   if (!node || node.nodeName === 'HTML')\n   {\n      return { node: document.documentElement, reason: 'root' };\n   }\n\n   // handle shadow root elements.\n   if (node.nodeName === '#document-fragment')\n   {\n      return getStackingContext(node.host);\n   }\n\n   const computedStyle = globalThis.getComputedStyle(node);\n\n   // position: fixed or sticky.\n   if (computedStyle.position === 'fixed' || computedStyle.position === 'sticky')\n   {\n      return { node, reason: `position: ${computedStyle.position}` };\n   }\n\n   // positioned (absolutely or relatively) with a z-index value other than \"auto\".\n   if (computedStyle.zIndex !== 'auto' && computedStyle.position !== 'static')\n   {\n      return { node, reason: `position: ${computedStyle.position}; z-index: ${computedStyle.zIndex}` };\n   }\n\n   // elements with an opacity value less than 1.\n   if (computedStyle.opacity !== '1')\n   {\n      return { node, reason: `opacity: ${computedStyle.opacity}` };\n   }\n\n   // elements with a transform value other than \"none\".\n   if (computedStyle.transform !== 'none')\n   {\n      return { node, reason: `transform: ${computedStyle.transform}` };\n   }\n\n   // elements with a mix-blend-mode value other than \"normal\".\n   if (computedStyle.mixBlendMode !== 'normal')\n   {\n      return { node, reason: `mixBlendMode: ${computedStyle.mixBlendMode}` };\n   }\n\n   // elements with a filter value other than \"none\".\n   if (computedStyle.filter !== 'none')\n   {\n      return { node, reason: `filter: ${computedStyle.filter}` };\n   }\n\n   // elements with a perspective value other than \"none\".\n   if (computedStyle.perspective !== 'none')\n   {\n      return { node, reason: `perspective: ${computedStyle.perspective}` };\n   }\n\n   // elements with a clip-path value other than \"none\".\n   if (computedStyle.clipPath !== 'none')\n   {\n      return { node, reason: `clip-path: ${computedStyle.clipPath} ` };\n   }\n\n   // elements with a mask value other than \"none\".\n   const mask = computedStyle.mask || computedStyle.webkitMask;\n   if (mask !== 'none' && mask !== undefined)\n   {\n      return { node, reason: `mask:  ${mask}` };\n   }\n\n   // elements with a mask-image value other than \"none\".\n   const maskImage = computedStyle.maskImage || computedStyle.webkitMaskImage;\n   if (maskImage !== 'none' && maskImage !== undefined)\n   {\n      return { node, reason: `mask-image: ${maskImage}` };\n   }\n\n   // elements with a mask-border value other than \"none\".\n   const maskBorder = computedStyle.maskBorder || computedStyle.webkitMaskBorder;\n   if (maskBorder !== 'none' && maskBorder !== undefined)\n   {\n      return { node, reason: `mask-border: ${maskBorder}` };\n   }\n\n   // elements with isolation set to \"isolate\".\n   if (computedStyle.isolation === 'isolate')\n   {\n      return { node, reason: `isolation: ${computedStyle.isolation}` };\n   }\n\n   // transform or opacity in will-change even if you don't specify values for these attributes directly.\n   if (computedStyle.willChange === 'transform' || computedStyle.willChange === 'opacity')\n   {\n      return { node, reason: `willChange: ${computedStyle.willChange}` };\n   }\n\n   // elements with -webkit-overflow-scrolling set to \"touch\".\n   if (computedStyle.webkitOverflowScrolling === 'touch')\n   {\n      return { node, reason: '-webkit-overflow-scrolling: touch' };\n   }\n\n   // an item with a z-index value other than \"auto\".\n   if (computedStyle.zIndex !== 'auto')\n   {\n      const parentStyle = globalThis.getComputedStyle(node.parentNode);\n      // with a flex|inline-flex parent.\n      if (parentStyle.display === 'flex' || parentStyle.display === 'inline-flex')\n      {\n         return { node, reason: `flex-item; z-index: ${computedStyle.zIndex}` };\n         // with a grid parent.\n      }\n      else if (parentStyle.grid !== 'none / none / none / row / auto / auto')\n      {\n         return { node, reason: `child of grid container; z-index: ${computedStyle.zIndex}` };\n      }\n   }\n\n   // contain with a value of layout, or paint, or a composite value that includes either of them\n   const contain = computedStyle.contain;\n   if (['layout', 'paint', 'strict', 'content'].indexOf(contain) > -1 ||\n    contain.indexOf('paint') > -1 ||\n    contain.indexOf('layout') > -1\n   )\n   {\n      return { node, reason: `contain: ${contain}` };\n   }\n\n   return getStackingContext(node.parentNode);\n}\n\n/**\n * @typedef {object} StackingContext\n *\n * @property {Element} node - A DOM Element.\n *\n * @property {string}  reason - Reason for why a stacking context was created.\n */\n\n/**\n * Provides resources for parsing style strings.\n */\nclass StyleParse\n{\n   static #regexPixels = /(\\d+)\\s*px/;\n\n   /**\n    * Parses a pixel string / computed styles. Ex. `100px` returns `100`.\n    *\n    * @param {string}   value - Value to parse.\n    *\n    * @returns {number|undefined} The integer component of a pixel string.\n    */\n   static pixels(value)\n   {\n      if (typeof value !== 'string') { return void 0; }\n\n      const isPixels = this.#regexPixels.test(value);\n      const number = parseInt(value);\n\n      return isPixels && Number.isFinite(number) ? number : void 0;\n   }\n}\n\n/**\n * Provides a managed dynamic style sheet / element useful in configuring global CSS variables. When creating an\n * instance of TJSStyleManager you must provide a \"document key\" / string for the style element added. The style element\n * can be accessed via `document[docKey]`.\n *\n * Instances of TJSStyleManager can also be versioned by supplying a positive integer greater than or equal to `1` via\n * the 'version' option. This version number is assigned to the associated style element. When a TJSStyleManager\n * instance is created and there is an existing instance with a version that is lower than the current instance all CSS\n * rules are removed letting the higher version to take precedence. This isn't a perfect system and requires thoughtful\n * construction of CSS variables exposed, but allows multiple independently compiled TRL packages to load the latest\n * CSS variables. It is recommended to always set `overwrite` option of {@link TJSStyleManager.setProperty} and\n * {@link TJSStyleManager.setProperties} to `false` when loading initial values.\n */\nclass TJSStyleManager\n{\n   /** @type {CSSStyleRule} */\n   #cssRule;\n\n   /** @type {string} */\n   #docKey;\n\n   /** @type {string} */\n   #selector;\n\n   /** @type {HTMLStyleElement} */\n   #styleElement;\n\n   /** @type {number} */\n   #version;\n\n   /**\n    *\n    * @param {object}   opts - Options.\n    *\n    * @param {string}   opts.docKey - Required key providing a link to a specific style sheet element.\n    *\n    * @param {string}   [opts.selector=:root] - Selector element.\n    *\n    * @param {Document} [opts.document] - Target document to load styles into.\n    *\n    * @param {number}   [opts.version] - An integer representing the version / level of styles being managed.\n    */\n   constructor({ docKey, selector = ':root', document = globalThis.document, version } = {})\n   {\n      if (typeof docKey !== 'string') { throw new TypeError(`StyleManager error: 'docKey' is not a string.`); }\n\n      // TODO: Verify 'document' type from Popout FVTT module. For some reason the popout document trips this\n      //  unintentionally.\n      // if (!(document instanceof Document))\n      // {\n      //    throw new TypeError(`TJSStyleManager error: 'document' is not an instance of Document.`);\n      // }\n\n      if (typeof selector !== 'string') { throw new TypeError(`StyleManager error: 'selector' is not a string.`); }\n\n      if (version !== void 0 && !Number.isSafeInteger(version) && version < 1)\n      {\n         throw new TypeError(`StyleManager error: 'version' is defined and is not a positive integer >= 1.`);\n      }\n\n      this.#selector = selector;\n      this.#docKey = docKey;\n      this.#version = version;\n\n      if (document[this.#docKey] === void 0)\n      {\n         this.#styleElement = document.createElement('style');\n\n         document.head.append(this.#styleElement);\n\n         // Set initial style manager version if any supplied.\n         this.#styleElement._STYLE_MANAGER_VERSION = version;\n\n         this.#styleElement.sheet.insertRule(`${selector} {}`, 0);\n\n         this.#cssRule = this.#styleElement.sheet.cssRules[0];\n\n         document[docKey] = this.#styleElement;\n      }\n      else\n      {\n         this.#styleElement = document[docKey];\n         this.#cssRule = this.#styleElement.sheet.cssRules[0];\n\n         if (version)\n         {\n            const existingVersion = this.#styleElement._STYLE_MANAGER_VERSION ?? 0;\n\n            // Remove all existing CSS rules / text if version is greater than existing version.\n            if (version > existingVersion)\n            {\n               this.#cssRule.style.cssText = '';\n            }\n         }\n      }\n   }\n\n   /**\n    * @returns {string} Provides an accessor to get the `cssText` for the style sheet.\n    */\n   get cssText()\n   {\n      return this.#cssRule.style.cssText;\n   }\n\n   /**\n    * @returns {number} Returns the version of this instance.\n    */\n   get version()\n   {\n      return this.#version;\n   }\n\n   /**\n    * Provides a copy constructor to duplicate an existing TJSStyleManager instance into a new document.\n    *\n    * Note: This is used to support the `PopOut` module.\n    *\n    * @param {Document} [document] Target browser document to clone into.\n    *\n    * @returns {TJSStyleManager} New style manager instance.\n    */\n   clone(document = globalThis.document)\n   {\n      const newStyleManager = new TJSStyleManager({\n         selector: this.#selector,\n         docKey: this.#docKey,\n         document,\n         version: this.#version\n      });\n\n      newStyleManager.#cssRule.style.cssText = this.#cssRule.style.cssText;\n\n      return newStyleManager;\n   }\n\n   get()\n   {\n      const cssText = this.#cssRule.style.cssText;\n\n      const result = {};\n\n      if (cssText !== '')\n      {\n         for (const entry of cssText.split(';'))\n         {\n            if (entry !== '')\n            {\n               const values = entry.split(':');\n               result[values[0].trim()] = values[1];\n            }\n         }\n      }\n\n      return result;\n   }\n\n   /**\n    * Gets a particular CSS variable.\n    *\n    * @param {string}   key - CSS variable property key.\n    *\n    * @returns {string} Returns CSS variable value.\n    */\n   getProperty(key)\n   {\n      if (typeof key !== 'string') { throw new TypeError(`StyleManager error: 'key' is not a string.`); }\n\n      return this.#cssRule.style.getPropertyValue(key);\n   }\n\n   /**\n    * Set rules by property / value; useful for CSS variables.\n    *\n    * @param {{ [key: string]: string }}  rules - An object with property / value string pairs to load.\n    *\n    * @param {boolean}                 [overwrite=true] - When true overwrites any existing values.\n    */\n   setProperties(rules, overwrite = true)\n   {\n      if (!isObject(rules)) { throw new TypeError(`StyleManager error: 'rules' is not an object.`); }\n\n      if (typeof overwrite !== 'boolean') { throw new TypeError(`StyleManager error: 'overwrite' is not a boolean.`); }\n\n      if (overwrite)\n      {\n         for (const [key, value] of Object.entries(rules))\n         {\n            this.#cssRule.style.setProperty(key, value);\n         }\n      }\n      else\n      {\n         // Only set property keys for entries that don't have an existing rule set.\n         for (const [key, value] of Object.entries(rules))\n         {\n            if (this.#cssRule.style.getPropertyValue(key) === '')\n            {\n               this.#cssRule.style.setProperty(key, value);\n            }\n         }\n      }\n   }\n\n   /**\n    * Sets a particular property.\n    *\n    * @param {string}   key - CSS variable property key.\n    *\n    * @param {string}   value - CSS variable value.\n    *\n    * @param {boolean}  [overwrite=true] - Overwrite any existing value.\n    */\n   setProperty(key, value, overwrite = true)\n   {\n      if (typeof key !== 'string') { throw new TypeError(`StyleManager error: 'key' is not a string.`); }\n\n      if (typeof value !== 'string') { throw new TypeError(`StyleManager error: 'value' is not a string.`); }\n\n      if (typeof overwrite !== 'boolean') { throw new TypeError(`StyleManager error: 'overwrite' is not a boolean.`); }\n\n      if (overwrite)\n      {\n         this.#cssRule.style.setProperty(key, value);\n      }\n      else\n      {\n         if (this.#cssRule.style.getPropertyValue(key) === '')\n         {\n            this.#cssRule.style.setProperty(key, value);\n         }\n      }\n   }\n\n   /**\n    * Removes the property keys specified. If `keys` is an iterable list then all property keys in the list are removed.\n    *\n    * @param {Iterable<string>} keys - The property keys to remove.\n    */\n   removeProperties(keys)\n   {\n      if (!isIterable(keys)) { throw new TypeError(`StyleManager error: 'keys' is not an iterable list.`); }\n\n      for (const key of keys)\n      {\n         if (typeof key === 'string') { this.#cssRule.style.removeProperty(key); }\n      }\n   }\n\n   /**\n    * Removes a particular CSS variable.\n    *\n    * @param {string}   key - CSS variable property key.\n    *\n    * @returns {string} CSS variable value when removed.\n    */\n   removeProperty(key)\n   {\n      if (typeof key !== 'string') { throw new TypeError(`StyleManager error: 'key' is not a string.`); }\n\n      return this.#cssRule.style.removeProperty(key);\n   }\n}\n\nexport { A11yHelper, BrowserSupports, ClipboardAccess, StyleParse, TJSStyleManager, getStackingContext, striptags };\n//# sourceMappingURL=index.js.map\n","import { TJSStyleManager } from '@typhonjs-fvtt/runtime/util/browser';\n\nexport const cssVariables = new TJSStyleManager({ docKey: '#__trl-root-styles', version: 1 });\n","class Hashing\n{\n   static #regexUuidv = /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i;\n\n   /**\n    * Provides a solid string hashing algorithm.\n    *\n    * Sourced from: https://stackoverflow.com/a/52171480\n    *\n    * @param {string}   str - String to hash.\n    *\n    * @param {number}   seed - A seed value altering the hash.\n    *\n    * @returns {number} Hash code.\n    */\n   static hashCode(str, seed = 0)\n   {\n      if (typeof str !== 'string') { return 0; }\n\n      let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;\n\n      for (let ch, i = 0; i < str.length; i++)\n      {\n         ch = str.charCodeAt(i);\n         h1 = Math.imul(h1 ^ ch, 2654435761);\n         h2 = Math.imul(h2 ^ ch, 1597334677);\n      }\n\n      h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n      h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n\n      return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n   }\n\n   /**\n    * Validates that the given string is formatted as a UUIDv4 string.\n    *\n    * @param {string}   uuid - UUID string to test.\n    *\n    * @returns {boolean} Is UUIDv4 string.\n    */\n   static isUuidv4(uuid)\n   {\n      return this.#regexUuidv.test(uuid);\n   }\n\n   /**\n    * Generates a UUID v4 compliant ID. Please use a complete UUID generation package for guaranteed compliance.\n    *\n    * This code is an evolution of the following Gist.\n    * https://gist.github.com/jed/982883\n    *\n    * There is a public domain / free copy license attached to it that is not a standard OSS license...\n    * https://gist.github.com/jed/982883#file-license-txt\n    *\n    * @returns {string} UUIDv4\n    */\n   static uuidv4()\n   {\n      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n       (c ^ (globalThis.crypto ?? globalThis.msCrypto).getRandomValues(\n        new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n   }\n}\n\n/**\n * Provides utility functions for strings.\n */\nclass Strings\n{\n   /**\n    * Escape a given input string prefacing special characters with backslashes for use in a regular expression.\n    *\n    * @param {string}   string - An un-escaped input string.\n    *\n    * @returns {string} The escaped string suitable for use in a regular expression.\n    */\n   static escape(string)\n   {\n      return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n   }\n\n   /**\n    * Normalizes a string.\n    *\n    * @param {string}   string - A string to normalize for comparisons.\n    *\n    * @returns {string} Cleaned string.\n    *\n    * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\n    */\n   static normalize(string)\n   {\n      return string.trim().normalize('NFD').replace(/[\\x00-\\x1F]/gm, ''); // eslint-disable-line no-control-regex\n   }\n}\n\n/**\n * Provides timing related higher-order functions.\n */\nclass Timing\n{\n   /**\n    * Wraps a callback in a debounced timeout.\n    *\n    * Delay execution of the callback function until the function has not been called for the given delay in milliseconds.\n    *\n    * @param {Function} callback - A function to execute once the debounced threshold has been passed.\n    *\n    * @param {number}   delay - An amount of time in milliseconds to delay.\n    *\n    * @returns {Function} A wrapped function that can be called to debounce execution.\n    */\n   static debounce(callback, delay)\n   {\n      let timeoutId;\n\n      return function(...args)\n      {\n         globalThis.clearTimeout(timeoutId);\n         timeoutId = globalThis.setTimeout(() => { callback.apply(this, args); }, delay);\n      };\n   }\n\n   /**\n    * @param {object}   opts - Optional parameters.\n    *\n    * @param {Function} opts.single - Single click callback.\n    *\n    * @param {Function} opts.double - Double click callback.\n    *\n    * @param {number}   [opts.delay=400] - Double click delay.\n    *\n    * @returns {(event: Event) => void} The gated double-click handler.\n    */\n   static doubleClick({ single, double, delay = 400 })\n   {\n      let clicks = 0;\n      let timeoutId;\n\n      return (event) =>\n      {\n         clicks++;\n\n         if (clicks === 1)\n         {\n            timeoutId = globalThis.setTimeout(() =>\n            {\n               if (typeof single === 'function') { single(event); }\n               clicks = 0;\n            }, delay);\n         }\n         else\n         {\n            globalThis.clearTimeout(timeoutId);\n            if (typeof double === 'function') { double(event); }\n            clicks = 0;\n         }\n      };\n   }\n}\n\nexport { Hashing, Strings, Timing };\n//# sourceMappingURL=index.js.map\n","/**\n * Provides a basic test for a given variable to test if it has the shape of a readable store by having a `subscribe`\n * function.\n *\n * Note: functions are also objects, so test that the variable might be a function w/ a `subscribe` function.\n *\n * @param {*}  store - variable to test that might be a store.\n *\n * @returns {boolean} Whether the variable tested has the shape of a store.\n */\nfunction isReadableStore(store)\n{\n   if (store === null || store === void 0) { return false; }\n\n   switch (typeof store)\n   {\n      case 'function':\n      case 'object':\n         return typeof store.subscribe === 'function';\n   }\n\n   return false;\n}\n\n/**\n * Provides a basic test for a given variable to test if it has the shape of a writable store by having a `subscribe`\n * function and an `update` function.\n *\n * Note: functions are also objects, so test that the variable might be a function w/ a `subscribe` function.\n *\n * @param {*}  store - variable to test that might be a store.\n *\n * @returns {boolean} Whether the variable tested has the shape of a store.\n */\nfunction isUpdatableStore(store)\n{\n   if (store === null || store === void 0) { return false; }\n\n   switch (typeof store)\n   {\n      case 'function':\n      case 'object':\n         return typeof store.subscribe === 'function' && typeof store.update === 'function';\n   }\n\n   return false;\n}\n\n/**\n * Provides a basic test for a given variable to test if it has the shape of a writable store by having a `subscribe`\n * `set`, and `update` functions.\n *\n * Note: functions are also objects, so test that the variable might be a function w/ `subscribe` & `set` functions.\n *\n * @param {*}  store - variable to test that might be a store.\n *\n * @returns {boolean} Whether the variable tested has the shape of a store.\n */\nfunction isWritableStore(store)\n{\n   if (store === null || store === void 0) { return false; }\n\n   switch (typeof store)\n   {\n      case 'function':\n      case 'object':\n         return typeof store.subscribe === 'function' && typeof store.set === 'function';\n   }\n\n   return false;\n}\n\n/**\n * Wraps a writable stores set method invoking a callback after the store is set. This allows hard coupled parent /\n * child relationships between stores to update directly without having to subscribe to the child store. This is a\n * particular powerful pattern when the `setCallback` is a debounced function that syncs a parent store and / or\n * serializes data.\n *\n * Note: Do consider carefully if this is an optimum solution; this is a quick implementation helper, but a better\n * solution is properly managing store relationships through subscription.\n *\n * @template T\n *\n * @param {import('svelte/store').Writable<T>} store - A store to wrap.\n *\n * @param {(store?: import('svelte/store').Writable<T>, value?: T) => void} setCallback - A callback to invoke after\n *        store set.\n *\n * @returns {import('svelte/store').Writable<T>} Wrapped store.\n */\nfunction storeCallback(store, setCallback)\n{\n   if (!isWritableStore(store)) { throw new TypeError(`'store' is not a writable store.`); }\n   if (typeof setCallback !== 'function') { throw new TypeError(`'setCallback' is not a function.`); }\n\n   /** @type {import('svelte/store').Writable<T>} */\n   return {\n      set: (value) =>\n      {\n         store.set(value);\n         setCallback(store, value);\n      },\n\n      subscribe: store.subscribe,\n\n      update: typeof store.update === 'function' ? store.update : void 0\n   };\n}\n\n/**\n * Subscribes to the given store with the update function provided and ignores the first automatic\n * update. All future updates are dispatched to the update function.\n *\n * @param {import('svelte/store').Readable | import('svelte/store').Writable} store -\n *  Store to subscribe to...\n *\n * @param {import('svelte/store').Updater} update - function to receive future updates.\n *\n * @returns {import('svelte/store').Unsubscriber} Store unsubscribe function.\n */\nfunction subscribeIgnoreFirst(store, update)\n{\n   let firedFirst = false;\n\n   return store.subscribe((value) =>\n   {\n      if (!firedFirst)\n      {\n         firedFirst = true;\n      }\n      else\n      {\n         update(value);\n      }\n   });\n}\n\n/**\n * Subscribes to the given store with two update functions provided. The first function is invoked on the initial\n * subscription. All future updates are dispatched to the update function.\n *\n * @param {import('svelte/store').Readable | import('svelte/store').Writable} store -\n *  Store to subscribe to...\n *\n * @param {import('svelte/store').Updater} first - Function to receive first update.\n *\n * @param {import('svelte/store').Updater} update - Function to receive future updates.\n *\n * @returns {import('svelte/store').Unsubscriber} Store unsubscribe function.\n */\nfunction subscribeFirstRest(store, first, update)\n{\n   let firedFirst = false;\n\n   return store.subscribe((value) =>\n   {\n      if (!firedFirst)\n      {\n         firedFirst = true;\n         first(value);\n      }\n      else\n      {\n         update(value);\n      }\n   });\n}\n\nexport { isReadableStore, isUpdatableStore, isWritableStore, storeCallback, subscribeFirstRest, subscribeIgnoreFirst };\n//# sourceMappingURL=index.js.map\n","import { Timing } from '@typhonjs-fvtt/runtime/util';\nimport { isUpdatableStore, isWritableStore } from '@typhonjs-fvtt/runtime/util/store';\nimport { StyleParse } from '@typhonjs-fvtt/runtime/util/browser';\nimport { isObject } from '@typhonjs-fvtt/runtime/util/object';\n\n/**\n * Provides an action to always blur the element when any pointer up event occurs on the element.\n *\n * @param {HTMLElement}   node - The node to handle always blur on pointer up.\n *\n * @returns {import('svelte/action').ActionReturn} Lifecycle functions.\n */\nfunction alwaysBlur(node)\n{\n   /**\n    * Blurs node if active element.\n    */\n   function blurNode()\n   {\n      setTimeout(() => { if (document.activeElement === node) { node.blur(); } }, 0);\n   }\n\n   node.addEventListener('pointerup', blurNode);\n\n   return {\n      destroy: () => node.removeEventListener('pointerup', blurNode)\n   };\n}\n\n/**\n * Provides an action to monitor the given HTMLElement node with `ResizeObserver` posting width / height changes\n * to the target in various ways depending on the shape of the target. The target can be one of the following and the\n * precedence order is listed from top to bottom:\n *\n * - has a `resizeObserved` function as attribute; offset then content width / height are passed as parameters.\n * - has a `setContentBounds` function as attribute; content width / height are passed as parameters.\n * - has a `setDimension` function as attribute; offset width / height are passed as parameters.\n * - target is an object; offset and content width / height attributes directly set on target.\n * - target is a function; the function invoked with offset then content width / height parameters.\n * - has a writable store `resizeObserved` as an attribute; updated with offset & content width / height.\n * - has an object 'stores' that has a writable store `resizeObserved` as an attribute; updated with offset &\n *   content width / height.\n *\n * Note: Svelte currently uses an archaic IFrame based workaround to monitor offset / client width & height changes.\n * A more up to date way to do this is with ResizeObserver. To track when Svelte receives ResizeObserver support\n * monitor this issue: {@link https://github.com/sveltejs/svelte/issues/4233}\n *\n * Can-I-Use: {@link https://caniuse.com/resizeobserver}\n *\n * @param {HTMLElement}          node - The node associated with the action.\n *\n * @param {ResizeObserverTarget} target - An object or function to update with observed width & height changes.\n *\n * @returns {import('svelte/action').ActionReturn<ResizeObserverTarget>} The action lifecycle methods.\n * @see {@link https://github.com/sveltejs/svelte/issues/4233}\n */\nfunction resizeObserver(node, target)\n{\n   ResizeObserverManager.add(node, target);\n\n   return {\n      /**\n       * @param {ResizeObserverTarget} newTarget - An object or function to update with observed width & height changes.\n       */\n      update: (newTarget) =>\n      {\n         ResizeObserverManager.remove(node, target);\n         target = newTarget;\n         ResizeObserverManager.add(node, target);\n      },\n\n      destroy: () =>\n      {\n         ResizeObserverManager.remove(node, target);\n      }\n   };\n}\n\n/**\n * Provides a function that when invoked with an element updates the cached styles for each subscriber of the element.\n *\n * The style attributes cached to calculate offset height / width include border & padding dimensions. You only need\n * to update the cache if you change border or padding attributes of the element.\n *\n * @param {HTMLElement} el - An HTML element.\n */\nresizeObserver.updateCache = function(el)\n{\n   if (!(el instanceof HTMLElement)) { throw new TypeError(`resizeObserverUpdate error: 'el' is not an HTMLElement.`); }\n\n   const subscribers = s_MAP.get(el);\n\n   if (Array.isArray(subscribers))\n   {\n      const computed = globalThis.getComputedStyle(el);\n\n      // Cache styles first from any inline styles then computed styles defaulting to 0 otherwise.\n      // Used to create the offset width & height values from the context box ResizeObserver provides.\n      const borderBottom = StyleParse.pixels(el.style.borderBottom) ?? StyleParse.pixels(computed.borderBottom) ?? 0;\n      const borderLeft = StyleParse.pixels(el.style.borderLeft) ?? StyleParse.pixels(computed.borderLeft) ?? 0;\n      const borderRight = StyleParse.pixels(el.style.borderRight) ?? StyleParse.pixels(computed.borderRight) ?? 0;\n      const borderTop = StyleParse.pixels(el.style.borderTop) ?? StyleParse.pixels(computed.borderTop) ?? 0;\n      const paddingBottom = StyleParse.pixels(el.style.paddingBottom) ?? StyleParse.pixels(computed.paddingBottom) ?? 0;\n      const paddingLeft = StyleParse.pixels(el.style.paddingLeft) ?? StyleParse.pixels(computed.paddingLeft) ?? 0;\n      const paddingRight = StyleParse.pixels(el.style.paddingRight) ?? StyleParse.pixels(computed.paddingRight) ?? 0;\n      const paddingTop = StyleParse.pixels(el.style.paddingTop) ?? StyleParse.pixels(computed.paddingTop) ?? 0;\n\n      const additionalWidth = borderLeft + borderRight + paddingLeft + paddingRight;\n      const additionalHeight = borderTop + borderBottom + paddingTop + paddingBottom;\n\n      for (const subscriber of subscribers)\n      {\n         subscriber.styles.additionalWidth = additionalWidth;\n         subscriber.styles.additionalHeight = additionalHeight;\n         s_UPDATE_SUBSCRIBER(subscriber, subscriber.contentWidth, subscriber.contentHeight);\n      }\n   }\n};\n\n// Below is the static ResizeObserverManager ------------------------------------------------------------------------\n\nconst s_MAP = new Map();\n\n/**\n * Provides a static / single instance of ResizeObserver that can notify listeners in different ways.\n *\n * The action, {@link resizeObserver}, utilizes ResizeObserverManager for automatic registration and removal\n * via Svelte.\n */\nclass ResizeObserverManager\n{\n   /**\n    * Add an HTMLElement and ResizeObserverTarget instance for monitoring. Create cached style attributes for the\n    * given element include border & padding dimensions for offset width / height calculations.\n    *\n    * @param {HTMLElement}    el - The element to observe.\n    *\n    * @param {ResizeObserverTarget} target - A target that contains one of several mechanisms for updating resize data.\n    */\n   static add(el, target)\n   {\n      const updateType = s_GET_UPDATE_TYPE(target);\n\n      if (updateType === 0)\n      {\n         throw new Error(`'target' does not match supported ResizeObserverManager update mechanisms.`);\n      }\n\n      const computed = globalThis.getComputedStyle(el);\n\n      // Cache styles first from any inline styles then computed styles defaulting to 0 otherwise.\n      // Used to create the offset width & height values from the context box ResizeObserver provides.\n      const borderBottom = StyleParse.pixels(el.style.borderBottom) ?? StyleParse.pixels(computed.borderBottom) ?? 0;\n      const borderLeft = StyleParse.pixels(el.style.borderLeft) ?? StyleParse.pixels(computed.borderLeft) ?? 0;\n      const borderRight = StyleParse.pixels(el.style.borderRight) ?? StyleParse.pixels(computed.borderRight) ?? 0;\n      const borderTop = StyleParse.pixels(el.style.borderTop) ?? StyleParse.pixels(computed.borderTop) ?? 0;\n      const paddingBottom = StyleParse.pixels(el.style.paddingBottom) ?? StyleParse.pixels(computed.paddingBottom) ?? 0;\n      const paddingLeft = StyleParse.pixels(el.style.paddingLeft) ?? StyleParse.pixels(computed.paddingLeft) ?? 0;\n      const paddingRight = StyleParse.pixels(el.style.paddingRight) ?? StyleParse.pixels(computed.paddingRight) ?? 0;\n      const paddingTop = StyleParse.pixels(el.style.paddingTop) ?? StyleParse.pixels(computed.paddingTop) ?? 0;\n\n      const data = {\n         updateType,\n         target,\n\n         // Stores most recent contentRect.width and contentRect.height values from ResizeObserver.\n         contentWidth: 0,\n         contentHeight: 0,\n\n         // Convenience data for total border & padding for offset width & height calculations.\n         styles: {\n            additionalWidth: borderLeft + borderRight + paddingLeft + paddingRight,\n            additionalHeight: borderTop + borderBottom + paddingTop + paddingBottom\n         }\n      };\n\n      if (s_MAP.has(el))\n      {\n         const subscribers = s_MAP.get(el);\n         subscribers.push(data);\n      }\n      else\n      {\n         s_MAP.set(el, [data]);\n      }\n\n      s_RESIZE_OBSERVER.observe(el);\n   }\n\n   /**\n    * Removes all targets from monitoring when just an element is provided otherwise removes a specific target\n    * from the monitoring map. If no more targets remain then the element is removed from monitoring.\n    *\n    * @param {HTMLElement}          el - Element to remove from monitoring.\n    *\n    * @param {ResizeObserverTarget} [target] - A specific target to remove from monitoring.\n    */\n   static remove(el, target = void 0)\n   {\n      const subscribers = s_MAP.get(el);\n      if (Array.isArray(subscribers))\n      {\n         const index = subscribers.findIndex((entry) => entry.target === target);\n         if (index >= 0)\n         {\n            // Update target subscriber with undefined values.\n            s_UPDATE_SUBSCRIBER(subscribers[index], void 0, void 0);\n\n            subscribers.splice(index, 1);\n         }\n\n         // Remove element monitoring if last target removed.\n         if (subscribers.length === 0)\n         {\n            s_MAP.delete(el);\n            s_RESIZE_OBSERVER.unobserve(el);\n         }\n      }\n   }\n}\n\n/**\n * Defines the various shape / update type of the given target.\n *\n * @type {Record<string, number>}\n */\nconst s_UPDATE_TYPES = {\n   none: 0,\n   attribute: 1,\n   function: 2,\n   resizeObserved: 3,\n   setContentBounds: 4,\n   setDimension: 5,\n   storeObject: 6,\n   storesObject: 7\n};\n\nconst s_RESIZE_OBSERVER = new ResizeObserver((entries) =>\n{\n   for (const entry of entries)\n   {\n      const subscribers = s_MAP.get(entry?.target);\n\n      if (Array.isArray(subscribers))\n      {\n         const contentWidth = entry.contentRect.width;\n         const contentHeight = entry.contentRect.height;\n\n         for (const subscriber of subscribers)\n         {\n            s_UPDATE_SUBSCRIBER(subscriber, contentWidth, contentHeight);\n         }\n      }\n   }\n});\n\n/**\n * Determines the shape of the target instance regarding valid update mechanisms to set width & height changes.\n *\n * @param {*}  target - The target instance.\n *\n * @returns {number} Update type value.\n */\nfunction s_GET_UPDATE_TYPE(target)\n{\n   if (target?.resizeObserved instanceof Function) { return s_UPDATE_TYPES.resizeObserved; }\n   if (target?.setDimension instanceof Function) { return s_UPDATE_TYPES.setDimension; }\n   if (target?.setContentBounds instanceof Function) { return s_UPDATE_TYPES.setContentBounds; }\n\n   const targetType = typeof target;\n\n   // Does the target have resizeObserved writable store?\n   if (targetType !== null && (targetType === 'object' || targetType === 'function'))\n   {\n      if (isUpdatableStore(target.resizeObserved))\n      {\n         return s_UPDATE_TYPES.storeObject;\n      }\n\n      // Now check for a child stores object which is a common TRL pattern for exposing stores.\n      const stores = target?.stores;\n      if (isObject(stores) || typeof stores === 'function')\n      {\n         if (isUpdatableStore(stores.resizeObserved))\n         {\n            return s_UPDATE_TYPES.storesObject;\n         }\n      }\n   }\n\n   if (targetType !== null && targetType === 'object') { return s_UPDATE_TYPES.attribute; }\n\n   if (targetType === 'function') { return s_UPDATE_TYPES.function; }\n\n   return s_UPDATE_TYPES.none;\n}\n\n/**\n * Updates a subscriber target with given content width & height values. Offset width & height is calculated from\n * the content values + cached styles.\n *\n * @param {object}            subscriber - Internal data about subscriber.\n *\n * @param {number|undefined}  contentWidth - ResizeObserver contentRect.width value or undefined.\n *\n * @param {number|undefined}  contentHeight - ResizeObserver contentRect.height value or undefined.\n */\nfunction s_UPDATE_SUBSCRIBER(subscriber, contentWidth, contentHeight)\n{\n   const styles = subscriber.styles;\n\n   subscriber.contentWidth = contentWidth;\n   subscriber.contentHeight = contentHeight;\n\n   const offsetWidth = Number.isFinite(contentWidth) ? contentWidth + styles.additionalWidth : void 0;\n   const offsetHeight = Number.isFinite(contentHeight) ? contentHeight + styles.additionalHeight : void 0;\n\n   const target = subscriber.target;\n\n   switch (subscriber.updateType)\n   {\n      case s_UPDATE_TYPES.attribute:\n         target.contentWidth = contentWidth;\n         target.contentHeight = contentHeight;\n         target.offsetWidth = offsetWidth;\n         target.offsetHeight = offsetHeight;\n         break;\n\n      case s_UPDATE_TYPES.function:\n         target?.(offsetWidth, offsetHeight, contentWidth, contentHeight);\n         break;\n\n      case s_UPDATE_TYPES.resizeObserved:\n         target.resizeObserved?.(offsetWidth, offsetHeight, contentWidth, contentHeight);\n         break;\n\n      case s_UPDATE_TYPES.setContentBounds:\n         target.setContentBounds?.(contentWidth, contentHeight);\n         break;\n\n      case s_UPDATE_TYPES.setDimension:\n         target.setDimension?.(offsetWidth, offsetHeight);\n         break;\n\n      case s_UPDATE_TYPES.storeObject:\n         target.resizeObserved.update((object) =>\n         {\n            object.contentHeight = contentHeight;\n            object.contentWidth = contentWidth;\n            object.offsetHeight = offsetHeight;\n            object.offsetWidth = offsetWidth;\n\n            return object;\n         });\n         break;\n\n      case s_UPDATE_TYPES.storesObject:\n         target.stores.resizeObserved.update((object) =>\n         {\n            object.contentHeight = contentHeight;\n            object.contentWidth = contentWidth;\n            object.offsetHeight = offsetHeight;\n            object.offsetWidth = offsetWidth;\n\n            return object;\n         });\n         break;\n   }\n}\n\n/**\n * @typedef {(\n *    offsetWidth: number,\n *    offsetHeight: number,\n *    contentWidth: number,\n *    contentHeight: number\n * ) => void } ResizeObserverFunction A function that receives offset / content height & width.\n */\n\n/**\n * @typedef {ResizeObserverObject | ResizeObserverObjectExtended | ResizeObserverFunction} ResizeObserverTarget The\n *          receiving target for observed resize data.\n */\n\n/**\n * @typedef {object} ResizeObserverObject A direct object to update observed resize updates.\n *\n * @property {number} [contentHeight] Direct attribute to store contentHeight.\n *\n * @property {number} [contentWidth] Direct attribute to store contentWidth.\n *\n * @property {number} [offsetHeight] Direct attribute to store offsetHeight.\n *\n * @property {number} [offsetWidth] Direct attribute to store offsetWidth.\n */\n\n/**\n * @typedef {object} ResizeObserverObjectExtended Provides extended attributes supported for observed resize updates.\n *\n * @property {import('svelte/store').Writable<ResizeObserverObject> | ResizeObserverFunction} [resizedObserver] Either\n *           a function or a writable store.\n *\n * @property {(contentWidth: number, contentHeight: number) => void} [setContentBounds] - A function that is invoked\n *           with content width & height changes.\n *\n * @property {(offsetWidth: number, offsetHeight: number) => void} [setDimension] - A function that is invoked with\n *           offset width & height changes.\n *\n * @property {{resizedObserver: import('svelte/store').Writable<ResizeObserverObject>}} [stores] - An object with a\n *           `stores` attribute and subsequent `resizedObserver` writable store.\n */\n\n/**\n * Provides an action to save `scrollTop` of an element with a vertical scrollbar. This action should be used on the\n * scrollable element and must include a writable store that holds the active store for the current `scrollTop` value.\n * You may switch the stores externally and this action will set the `scrollTop` based on the newly set store. This is\n * useful for instance providing a select box that controls the scrollable container.\n *\n * @param {HTMLElement} element - The target scrollable HTML element.\n *\n * @param {import('svelte/store').Writable<number>}   store - A writable store that stores the element scrollTop.\n *\n * @returns {import('svelte/action').ActionReturn<import('svelte/store').Writable<number>>} Lifecycle functions.\n */\nfunction applyScrolltop(element, store)\n{\n   if (!isWritableStore(store))\n   {\n      throw new TypeError(`applyScrolltop error: 'store' must be a writable Svelte store.`);\n   }\n\n   /**\n    * Updates element `scrollTop`.\n    *\n    * @param {number}   value -\n    */\n   function storeUpdate(value)\n   {\n      if (!Number.isFinite(value)) { return; }\n\n      // For some reason for scrollTop to take on first update from a new element setTimeout is necessary.\n      setTimeout(() => element.scrollTop = value, 0);\n   }\n\n   let unsubscribe = store.subscribe(storeUpdate);\n\n   const resizeControl = resizeObserver(element, Timing.debounce(() =>\n   {\n      if (element.isConnected) { store.set(element.scrollTop); }\n   }, 500));\n\n   /**\n    * Save target `scrollTop` to the current set store.\n    *\n    * @param {Event} event -\n    */\n   function onScroll(event)\n   {\n      store.set(event.target.scrollTop);\n   }\n\n   const debounceFn = Timing.debounce((e) => onScroll(e), 500);\n\n   element.addEventListener('scroll', debounceFn);\n\n   return {\n      /**\n       * @param {import('svelte/store').Writable<number>} newStore - A writable store that stores the element scrollTop.\n       */\n      update: (newStore) =>\n      {\n         unsubscribe();\n         store = newStore;\n\n         if (!isWritableStore(store))\n         {\n            throw new TypeError(`applyScrolltop.update error: 'store' must be a writable Svelte store.`);\n         }\n\n         unsubscribe = store.subscribe(storeUpdate);\n      },\n\n      destroy: () =>\n      {\n         element.removeEventListener('scroll', debounceFn);\n         unsubscribe();\n         resizeControl.destroy();\n      }\n   };\n}\n\n/**\n * Provides an action to apply style properties provided as an object.\n *\n * @param {HTMLElement} node - Target element\n *\n * @param {Record<string, string>}  properties - Key / value object of properties to set.\n *\n * @returns {import('svelte/action').ActionReturn<Record<string, string>>} Lifecycle functions.\n */\nfunction applyStyles(node, properties)\n{\n   /** Sets properties on node. */\n   function setProperties()\n   {\n      if (!isObject(properties)) { return; }\n\n      for (const prop of Object.keys(properties))\n      {\n         node.style.setProperty(`${prop}`, properties[prop]);\n      }\n   }\n\n   setProperties();\n\n   return {\n      /**\n       * @param {Record<string, string>}  newProperties - Key / value object of properties to set.\n       */\n      update: (newProperties) =>\n      {\n         properties = newProperties;\n         setProperties();\n      }\n   };\n}\n\n/**\n * Provides an action to blur the element when any pointer down event occurs outside the element. This can be useful\n * for input elements including select to blur / unfocus the element when any pointer down occurs outside the element.\n *\n * @param {HTMLElement}   node - The node to handle automatic blur on focus loss.\n *\n * @returns {import('svelte/action').ActionReturn} Lifecycle functions.\n */\nfunction autoBlur(node)\n{\n   /**\n    * Removes listener on blur.\n    */\n   function onBlur() { document.body.removeEventListener('pointerdown', onPointerDown); }\n\n   /**\n    * Adds listener on focus.\n    */\n   function onFocus() { document.body.addEventListener('pointerdown', onPointerDown); }\n\n   /**\n    * Blur the node if a pointer down event happens outside the node.\n    *\n    * @param {PointerEvent} event -\n    */\n   function onPointerDown(event)\n   {\n      if (event.target === node || node.contains(event.target)) { return; }\n\n      if (document.activeElement === node) { node.blur(); }\n   }\n\n   node.addEventListener('blur', onBlur);\n   node.addEventListener('focus', onFocus);\n\n   return {\n      destroy: () =>\n      {\n         document.body.removeEventListener('pointerdown', onPointerDown);\n         node.removeEventListener('blur', onBlur);\n         node.removeEventListener('focus', onFocus);\n      }\n   };\n}\n\n/**\n * Provides an action to monitor focus state of a given element and set an associated store with current focus state.\n *\n * This action is usable with any writable store.\n *\n * @param {HTMLElement} node - Target element.\n *\n * @param {import('svelte/store').Writable<boolean>}  storeFocused - Update store for focus changes.\n *\n * @returns {import('svelte/action').ActionReturn<import('svelte/store').Writable<boolean>>} Lifecycle functions.\n */\nfunction isFocused(node, storeFocused)\n{\n   let localFocused = false;\n\n   /**\n    * Updates `storeFocused` w/ current focused state.\n    *\n    * @param {boolean}  current - current focused state.\n    */\n   function setFocused(current)\n   {\n      localFocused = current;\n\n      if (isWritableStore(storeFocused)) { storeFocused.set(localFocused); }\n   }\n\n   /**\n    * Focus event listener.\n    */\n   function onFocus()\n   {\n      setFocused(true);\n   }\n\n   /**\n    * Blur event listener.\n    */\n   function onBlur()\n   {\n      setFocused(false);\n   }\n\n   /**\n    * Activate listeners.\n    */\n   function activateListeners()\n   {\n      node.addEventListener('focus', onFocus);\n      node.addEventListener('blur', onBlur);\n   }\n\n   /**\n    * Remove listeners.\n    */\n   function removeListeners()\n   {\n      node.removeEventListener('focus', onFocus);\n      node.removeEventListener('blur', onBlur);\n   }\n\n   activateListeners();\n\n   return {\n      /**\n       * @param {import('svelte/store').Writable<boolean>}  newStoreFocused - Update store for focus changes.\n       */\n      update: (newStoreFocused) =>\n      {\n         storeFocused = newStoreFocused;\n         setFocused(localFocused);\n      },\n\n      destroy: () => removeListeners()\n   };\n}\n\nexport { alwaysBlur, applyScrolltop, applyStyles, autoBlur, isFocused, resizeObserver };\n//# sourceMappingURL=index.js.map\n","/**\n * Performs linear interpolation between a start & end value by given amount between 0 - 1 inclusive.\n *\n * @param {number}   start - Start value.\n *\n * @param {number}   end - End value.\n *\n * @param {number}   amount - Current amount between 0 - 1 inclusive.\n *\n * @returns {number} Linear interpolated value between start & end.\n */\nfunction lerp(start, end, amount)\n{\n   return (1 - amount) * start + amount * end;\n}\n\nexport { lerp };\n//# sourceMappingURL=index.js.map\n","import { linear } from 'svelte/easing';\nimport { lerp } from '@typhonjs-fvtt/runtime/math/interpolate';\nimport { fade, slide } from 'svelte/transition';\n\n/**\n * Provides a rotate transition. For options `easing` is applied to the rotate transition. The default easing is\n * linear.\n *\n * Note: that when reversing the transition that time goes from `1 - 0`, so if specific options are applied for\n * rotating out transition then `end` and `initial` are swapped.\n *\n * @param {HTMLElement} node - The transition node.\n *\n * @param {object}      [options] - Optional parameters.\n *\n * @param {number}      [options.delay] - Delay in ms before start of transition.\n *\n * @param {number}      [options.duration] - Total transition length in ms.\n *\n * @param {import('svelte/transition').EasingFunction}   [options.easing=linear] - The easing function to apply to the\n *        rotate transition.\n *\n * @param {number}      [options.end=0] - End rotation in degrees.\n *\n * @param {number}      [options.initial=0] - Initial rotation in degrees.\n *\n * @returns {import('svelte/transition').TransitionConfig} Transition config.\n */\nfunction rotate(node, options)\n{\n   const easingRotate = options.easing ?? linear;\n\n   const initialDeg = options.initial ?? 0;\n   const endDeg = options.end ?? 0;\n\n   return {\n      delay: options.delay ?? 0,\n      duration: options.duration ?? 500,\n      easing: linear,\n      css: (t) =>\n      {\n         const rotateT = easingRotate(t);\n         return `transform: rotate(${lerp(initialDeg, endDeg, rotateT)}deg)`;\n      }\n   };\n}\n\n/**\n * Combines rotate & fade transitions into a single transition. For options `easing` this is applied to both transitions,\n * however if provided `easingRotate` and / or `easingFade` will take precedence. The default easing is linear.\n *\n * Note: that when reversing the transition that time goes from `1 - 0`, so if specific options are applied for\n * rotating out transition then `end` and `initial` are swapped.\n *\n * @param {HTMLElement} node - The transition node.\n *\n * @param {object}      [options] - Optional parameters.\n *\n * @param {number}      [options.delay] - Delay in ms before start of transition.\n *\n * @param {number}      [options.duration] - Total transition length in ms.\n *\n * @param {import('svelte/transition').EasingFunction}   [options.easing=linear] - The easing function to apply to both\n *        slide & fade transitions.\n *\n * @param {import('svelte/transition').EasingFunction}   [options.easingFade=linear] - The easing function to apply to\n *        the fade transition.\n *\n * @param {import('svelte/transition').EasingFunction}   [options.easingRotate=linear] - The easing function to apply\n *        to the rotate transition.\n *\n * @param {number}      [options.end=0] - End rotation in degrees.\n *\n * @param {number}      [options.initial=0] - Initial rotation in degrees.\n *\n * @returns {import('svelte/transition').TransitionConfig} Transition config.\n */\nfunction rotateFade(node, options)\n{\n   const easingFade = options.easingFade || options.easing || linear;\n   const easingRotate = options.easingRotate || options.easing || linear;\n\n   const fadeTransition = fade(node);\n\n   const initialDeg = options.initial ?? 0;\n   const endDeg = options.end ?? 0;\n\n   return {\n      delay: options.delay ?? 0,\n      duration: options.duration ?? 500,\n      easing: linear,\n      css: (t) =>\n      {\n         const fadeT = easingFade(t);\n         const rotateT = easingRotate(t);\n\n         return `transform: rotate(${lerp(initialDeg, endDeg, rotateT)}deg); ${fadeTransition.css(fadeT, 1 - fadeT)}`;\n      }\n   };\n}\n\n/**\n * Combines slide & fade transitions into a single transition. For options `easing` this is applied to both transitions,\n * however if provided `easingSlide` and / or `easingFade` will take precedence. The default easing is linear.\n *\n * @param {HTMLElement} node - The transition node.\n *\n * @param {object}      [options] - Optional parameters.\n *\n * @param {number}      [options.delay] - Delay in ms before start of transition.\n *\n * @param {number}      [options.duration] - Total transition length in ms.\n *\n * @param {import('svelte/transition').EasingFunction}   [options.easing=linear] - The easing function to apply to both\n *        slide & fade transitions.\n *\n * @param {import('svelte/transition').EasingFunction}   [options.easingFade=linear] - The easing function to apply to\n *        the fade transition.\n *\n * @param {import('svelte/transition').EasingFunction}   [options.easingSlide=linear] - The easing function to apply to\n *        the slide transition.\n *\n * @returns {import('svelte/transition').TransitionConfig} Transition config.\n */\nfunction slideFade(node, options)\n{\n   const fadeEasing = options.easingFade || options.easing || linear;\n   const slideEasing = options.easingSlide || options.easing || linear;\n\n   const fadeTransition = fade(node);\n   const slideTransition = slide(node);\n\n   return {\n      delay: options.delay || 0,\n      duration: options.duration || 500,\n      easing: linear,\n      css: (t) =>\n      {\n         const fadeT = fadeEasing(t);\n         const slideT = slideEasing(t);\n         return `${slideTransition.css(slideT, 1 - slideT)}; ${fadeTransition.css(fadeT, 1 - fadeT)}`;\n      }\n   };\n}\n\n/**\n * Converts a Svelte transition to an animation. Both transitions & animations use the same CSS / styles solution and\n * resulting data so wrap the transition function with the signature of an animation.\n *\n * @param {(node: Element, ...rest: any[]) => import('svelte/transition').TransitionConfig} fn -\n *        A Svelte transition function.\n *\n * @returns {(\n *    node: Element,\n *    data: { from: DOMRect, to: DOMRect },\n *    ...rest: any\n * ) => import('svelte/animation').AnimationConfig} - Transition function converted to an animation.\n */\nfunction toAnimation(fn)\n{\n   return (node, animations, ...rest) => fn(node, ...rest);\n}\n\n/**\n * Provides static data useful for handling custom props / options to components that allow dynamic configuration of\n * transitions. This is used in all application shells and components that have configurable transitions.\n *\n * @ignore\n */\nclass TJSDefaultTransition\n{\n   static #options = {};\n\n   static #default = () => void 0;\n\n   /**\n    * @returns {() => undefined} Default empty transition.\n    */\n   static get default() { return this.#default; }\n\n   /**\n    * @returns {{}} Default empty options.\n    */\n   static get options() { return this.#options; }\n}\n\nexport { TJSDefaultTransition, rotate, rotateFade, slideFade, toAnimation };\n//# sourceMappingURL=index.js.map\n","import { writable } from 'svelte/store';\n\n/**\n * Provides the internal context to all application shells.\n */\nexport class AppShellContextInternal\n{\n   /** @type {InternalAppStores} */\n   #stores;\n\n   constructor()\n   {\n      this.#stores = {\n         elementContent: writable(void 0),\n         elementRoot: writable(void 0)\n      };\n\n      Object.freeze(this.#stores);\n      Object.seal(this);\n   }\n\n   /**\n    * @returns {InternalAppStores} The internal context stores for elementContent / elementRoot\n    */\n   get stores()\n   {\n      return this.#stores;\n   }\n}\n\n/**\n * @typedef {object} InternalAppStores\n *\n * @property {import('svelte/store').Writable<HTMLElement>} elementContent The window content element.\n *\n * @property {import('svelte/store').Writable<HTMLElement>} elementRoot The window root element.\n */\n","import { isObject } from '@typhonjs-fvtt/runtime/util/object';\nimport { group_outros, transition_out, check_outros } from 'svelte/internal';\n\n/**\n * Provides basic duck typing to determine if the provided object is a HMR ProxyComponent instance or class.\n *\n * @param {*}  comp - Data to check as a HMR proxy component.\n *\n * @returns {boolean} Whether basic duck typing succeeds.\n */\nfunction isHMRProxy(comp)\n{\n   const instanceName = comp?.constructor?.name;\n   if (typeof instanceName === 'string' && (instanceName.startsWith('Proxy<') || instanceName === 'ProxyComponent'))\n   {\n      return true;\n   }\n\n   const prototypeName = comp?.prototype?.constructor?.name;\n   return typeof prototypeName === 'string' && (prototypeName.startsWith('Proxy<') ||\n    prototypeName === 'ProxyComponent');\n}\n\n/**\n * Provides basic duck typing to determine if the provided function is a constructor function for a Svelte component.\n *\n * @param {*}  comp - Data to check as a Svelte component.\n *\n * @returns {boolean} Whether basic duck typing succeeds.\n */\nfunction isSvelteComponent(comp)\n{\n   if (comp === null || comp === void 0 || typeof comp !== 'function') { return false; }\n\n   // When using Vite in a developer build the SvelteComponent is wrapped in a ProxyComponent class.\n   // This class doesn't define methods on the prototype, so we must check if the constructor name\n   // starts with `Proxy<` as it provides the wrapped component as `Proxy<_wrapped component name_>`.\n   const prototypeName = comp?.prototype?.constructor?.name;\n   if (typeof prototypeName === 'string' && (prototypeName.startsWith('Proxy<') || prototypeName === 'ProxyComponent'))\n   {\n      return true;\n   }\n\n   return typeof window !== 'undefined' ?\n    typeof comp.prototype.$destroy === 'function' && typeof comp.prototype.$on === 'function' : // client-side\n     typeof comp.render === 'function'; // server-side\n}\n\n/**\n * Validates `config` argument whether it is a valid {@link TJSSvelteConfig}.\n *\n * @param {*}  config - The potential config object to validate.\n *\n * @param {boolean}  [raiseException=false] - If validation fails raise an exception.\n *\n * @returns {boolean} Is the config a valid TJSSvelteConfig.\n *\n * @throws {TypeError}  Any validation error when `raiseException` is enabled.\n */\nfunction isTJSSvelteConfig(config, raiseException = false)\n{\n   if (!isObject(config))\n   {\n      if (raiseException) { throw new TypeError(`isTJSSvelteConfig error: 'config' is not an object.`); }\n      return false;\n   }\n\n   if (!isSvelteComponent(config.class))\n   {\n      if (raiseException)\n      {\n         throw new TypeError(`isTJSSvelteConfig error: 'config.class' is not a Svelte component constructor.`);\n      }\n      return false;\n   }\n\n   return true;\n}\n\n/* eslint-disable */  // jsdoc/valid-types doesn't like the Google closure constructor function. TODO: verify in future eslint-plugin-jsdoc version\n/**\n * @typedef {object} TJSSvelteConfig Defines the TRL / client side configuration object to load a Svelte component.\n *\n * @property {({\n *    new(options: import('svelte').ComponentConstructorOptions):\n *     import('svelte').SvelteComponent | import('svelte').SvelteComponentTyped\n * })} class The Svelte component class / constructor function.\n *\n * @property {HTMLElement | ShadowRoot}   [target=document.body] A {@link HTMLElement} or {@link ShadowRoot} to\n * render to. By default, `document.body` is used as the target if not otherwise defined.\n *\n * @property {HTMLElement} [anchor] A child of `target` to render the component immediately before.\n *\n * @property {() => Record<string, *> | Record<string, *>} [props] Props to pass to the component.\n *\n * @property {() => (Record<string, *> | Map<string, *>) | Map<string, *> | Record<string, *>} [context] The root-level\n * context to pass to the component.\n *\n * @property {boolean}  [hydrate] See description in main Svelte docs\n * {@link https://svelte.dev/docs/client-side-component-api#creating-a-component | Creating a component.}\n *\n * @property {boolean} [intro] If true, will play transitions on initial render, rather than waiting for subsequent\n * state changes.\n*/\n/* eslint-enable */\n\n/**\n * Runs outro transition then destroys Svelte component.\n *\n * Workaround for https://github.com/sveltejs/svelte/issues/4056\n *\n * @param {*}  instance - A Svelte component.\n */\nasync function outroAndDestroy(instance)\n{\n   return new Promise((resolve) =>\n   {\n      if (instance.$$.fragment && instance.$$.fragment.o)\n      {\n         group_outros();\n         transition_out(instance.$$.fragment, 0, 0, () =>\n         {\n            instance.$destroy();\n            resolve();\n         });\n         check_outros();\n      }\n      else\n      {\n         instance.$destroy();\n         resolve();\n      }\n   });\n}\n\n/**\n * Parses a TyphonJS Svelte config object ensuring that classes specified are Svelte components and props are set\n * correctly.\n *\n * @param {object}   config - Svelte config object.\n *\n * @param {*}        [thisArg] - `This` reference to set for invoking any props function.\n *\n * @returns {object} The processed Svelte config object.\n */\nfunction parseTJSSvelteConfig(config, thisArg = void 0)\n{\n   if (!isObject(config))\n   {\n      throw new TypeError(`parseSvelteConfig - 'config' is not an object:\\n${JSON.stringify(config)}.`);\n   }\n\n   if (!isSvelteComponent(config.class))\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'class' is not a Svelte component constructor for config:\\n${JSON.stringify(config)}.`);\n   }\n\n   if (config.hydrate !== void 0 && typeof config.hydrate !== 'boolean')\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'hydrate' is not a boolean for config:\\n${JSON.stringify(config)}.`);\n   }\n\n   if (config.intro !== void 0 && typeof config.intro !== 'boolean')\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'intro' is not a boolean for config:\\n${JSON.stringify(config)}.`);\n   }\n\n   if (config.target !== void 0 && typeof config.target !== 'string' && !(config.target instanceof HTMLElement) &&\n    !(config.target instanceof ShadowRoot) && !(config.target instanceof DocumentFragment))\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'target' is not a string, HTMLElement, ShadowRoot, or DocumentFragment for config:\\n${\n        JSON.stringify(config)}.`);\n   }\n\n   if (config.anchor !== void 0 && typeof config.anchor !== 'string' && !(config.anchor instanceof HTMLElement) &&\n    !(config.anchor instanceof ShadowRoot) && !(config.anchor instanceof DocumentFragment))\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'anchor' is not a string, HTMLElement, ShadowRoot, or DocumentFragment for config:\\n${\n        JSON.stringify(config)}.`);\n   }\n\n   if (config.context !== void 0 && typeof config.context !== 'function' && !(config.context instanceof Map) &&\n    !isObject(config.context))\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'context' is not a Map, function or object for config:\\n${JSON.stringify(config)}.`);\n   }\n\n   // Validate extra TyphonJS options --------------------------------------------------------------------------------\n\n   // `selectorTarget` optionally stores a target element found in main element.\n   if (config.selectorTarget !== void 0 && typeof config.selectorTarget !== 'string')\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'selectorTarget' is not a string for config:\\n${JSON.stringify(config)}.`);\n   }\n\n   // `options` stores `injectApp`, `injectEventbus`, and `selectorElement`.\n   if (config.options !== void 0 && !isObject(config.options))\n   {\n      throw new TypeError(\n       `parseSvelteConfig - 'options' is not an object for config:\\n${JSON.stringify(config)}.`);\n   }\n\n   // Validate TyphonJS standard options.\n   if (config.options !== void 0)\n   {\n      if (config.options.injectApp !== void 0 && typeof config.options.injectApp !== 'boolean')\n      {\n         throw new TypeError(\n          `parseSvelteConfig - 'options.injectApp' is not a boolean for config:\\n${JSON.stringify(config)}.`);\n      }\n\n      if (config.options.injectEventbus !== void 0 && typeof config.options.injectEventbus !== 'boolean')\n      {\n         throw new TypeError(\n          `parseSvelteConfig - 'options.injectEventbus' is not a boolean for config:\\n${JSON.stringify(config)}.`);\n      }\n\n      // `selectorElement` optionally stores a main element selector to be found in a HTMLElement target.\n      if (config.options.selectorElement !== void 0 && typeof config.options.selectorElement !== 'string')\n      {\n         throw new TypeError(\n          `parseSvelteConfig - 'selectorElement' is not a string for config:\\n${JSON.stringify(config)}.`);\n      }\n   }\n\n   const svelteConfig = { ...config };\n\n   // Delete extra Svelte options.\n   delete svelteConfig.options;\n\n   let externalContext = {};\n\n   // If a context callback function is provided then invoke it with `this` being the Foundry app.\n   // If an object is returned it adds the entries to external context.\n   if (typeof svelteConfig.context === 'function')\n   {\n      const contextFunc = svelteConfig.context;\n      delete svelteConfig.context;\n\n      const result = contextFunc.call(thisArg);\n      if (isObject(result))\n      {\n         externalContext = { ...result };\n      }\n      else\n      {\n         throw new Error(`parseSvelteConfig - 'context' is a function that did not return an object for config:\\n${\n          JSON.stringify(config)}`);\n      }\n   }\n   else if (svelteConfig.context instanceof Map)\n   {\n      externalContext = Object.fromEntries(svelteConfig.context);\n      delete svelteConfig.context;\n   }\n   else if (isObject(svelteConfig.context))\n   {\n      externalContext = svelteConfig.context;\n      delete svelteConfig.context;\n   }\n\n   // If a props is a function then invoke it with `this` being the Foundry app.\n   // If an object is returned set it as the props.\n   svelteConfig.props = s_PROCESS_PROPS(svelteConfig.props, thisArg, config);\n\n   // Process children components attaching to external context.\n   if (Array.isArray(svelteConfig.children))\n   {\n      const children = [];\n\n      for (let cntr = 0; cntr < svelteConfig.children.length; cntr++)\n      {\n         const child = svelteConfig.children[cntr];\n\n         if (!isSvelteComponent(child.class))\n         {\n            throw new Error(`parseSvelteConfig - 'class' is not a Svelte component for child[${cntr}] for config:\\n${\n             JSON.stringify(config)}`);\n         }\n\n         child.props = s_PROCESS_PROPS(child.props, thisArg, config);\n\n         children.push(child);\n      }\n\n      if (children.length > 0)\n      {\n         externalContext.children = children;\n      }\n\n      delete svelteConfig.children;\n   }\n   else if (isObject(svelteConfig.children))\n   {\n      if (!isSvelteComponent(svelteConfig.children.class))\n      {\n         throw new Error(`parseSvelteConfig - 'class' is not a Svelte component for children object for config:\\n${\n          JSON.stringify(config)}`);\n      }\n\n      svelteConfig.children.props = s_PROCESS_PROPS(svelteConfig.children.props, thisArg, config);\n\n      externalContext.children = [svelteConfig.children];\n      delete svelteConfig.children;\n   }\n\n   if (!(svelteConfig.context instanceof Map))\n   {\n      svelteConfig.context = new Map();\n   }\n\n   svelteConfig.context.set('#external', externalContext);\n\n   return svelteConfig;\n}\n\n/**\n * Processes Svelte props. Potentially props can be a function to invoke with `thisArg`.\n *\n * @param {object|Function}   props - Svelte props.\n *\n * @param {*}                 thisArg - `This` reference to set for invoking any props function.\n *\n * @param {object}            config - Svelte config\n *\n * @returns {object|void}     Svelte props.\n */\nfunction s_PROCESS_PROPS(props, thisArg, config)\n{\n   // If a props is a function then invoke it with `this` being the Foundry app.\n   // If an object is returned set it as the props.\n   if (typeof props === 'function')\n   {\n      const result = props.call(thisArg);\n      if (isObject(result))\n      {\n         return result;\n      }\n      else\n      {\n         throw new Error(`parseSvelteConfig - 'props' is a function that did not return an object for config:\\n${\n          JSON.stringify(config)}`);\n      }\n   }\n   else if (isObject(props))\n   {\n      return props;\n   }\n   else if (props !== void 0)\n   {\n      throw new Error(\n       `parseSvelteConfig - 'props' is not a function or an object for config:\\n${JSON.stringify(config)}`);\n   }\n\n   return {};\n}\n\nexport { isHMRProxy, isSvelteComponent, isTJSSvelteConfig, outroAndDestroy, parseTJSSvelteConfig };\n//# sourceMappingURL=index.js.map\n","import { isObject } from '@typhonjs-fvtt/runtime/util/object';\n\n/**\n * A helper to create a set of radio checkbox input elements in a named set.\n * The provided keys are the possible radio values while the provided values are human readable labels.\n *\n * @param {string} name         The radio checkbox field name\n *\n * @param {object} choices      A mapping of radio checkbox values to human readable labels\n *\n * @param {object} options      Options which customize the radio boxes creation\n *\n * @param {string} options.checked    Which key is currently checked?\n *\n * @param {boolean} options.localize  Pass each label through string localization?\n *\n * @returns {string} HTML for radio boxes.\n *\n * @example <caption>The provided input data</caption>\n * let groupName = \"importantChoice\";\n * let choices = {a: \"Choice A\", b: \"Choice B\"};\n * let chosen = \"a\";\n *\n * @example <caption>The template HTML structure</caption>\n * <div class=\"form-group\">\n *   <label>Radio Group Label</label>\n *   <div class=\"form-fields\">\n *     {@html radioBoxes(groupName, choices, { checked: chosen, localize: true})}\n *   </div>\n * </div>\n */\nfunction radioBoxes(name, choices, options)\n{\n   const checked = options['checked'] || null;\n\n   const localize = options['localize'] || false;\n\n   let html = '';\n\n   for (let [key, label] of Object.entries(choices)) // eslint-disable-line prefer-const\n   {\n      if (localize) { label = globalThis.game.i18n.localize(label); }\n      const isChecked = checked === key;\n      html += `<label class=\"checkbox\"><input type=\"radio\" name=\"${name}\" value=\"${key}\" ${isChecked ? \"checked\" : \"\"}> ${label}</label>`;\n   }\n\n   return new globalThis.Handlebars.SafeString(html);\n}\n\n/**\n * Converts the `selectOptions` Handlebars helper to be Svelte compatible. This is useful when initially converting\n * over an app to Svelte and for essential usage to several dialogs that mirror the core Foundry experience. For\n * an example of usage see {@link TJSDocumentOwnership}.\n *\n * A helper to create a set of <option> elements in a <select> block based on a provided dictionary.\n * The provided keys are the option values while the provided values are human-readable labels.\n * This helper supports both single-select and multi-select input fields.\n *\n * @param {object} choices                     A mapping of radio checkbox values to human-readable labels\n *\n * @param {object} options                     Helper options\n *\n * @param {string|string[]} [options.selected] Which key or array of keys that are currently selected?\n *\n * @param {boolean} [options.localize=false]   Pass each label through string localization?\n *\n * @param {string} [options.blank]             Add a blank option as the first option with this label\n *\n * @param {string} [options.nameAttr]          Look up a property in the choice object values to use as the option value\n *\n * @param {string} [options.labelAttr]         Look up a property in the choice object values to use as the option label\n *\n * @param {boolean} [options.inverted=false]   Use the choice object value as the option value, and the key as the label\n *                                             instead of vice-versa\n *\n * @param {boolean} [options.sort=false]       When true sort by label name.\n *\n * @returns {string} The <options> HTML element(s).\n *\n * @example <caption>The provided input data</caption>\n * let choices = {a: 'Choice A', b: 'Choice B'};\n * let value = 'a';\n *\n * @example <caption>The template HTML structure</caption>\n * <select name=\"importantChoice\">\n *   {@html selectOptions(choices { selected: value, localize: true })}\n * </select>\n *\n * @example <caption>The resulting HTML</caption>\n * <select name=\"importantChoice\">\n *   <option value=\"a\" selected>Choice A</option>\n *   <option value=\"b\">Choice B</option>\n * </select>\n *\n * @example <caption>Using inverted</caption>\n * let choices = {'Choice A': 'a', 'Choice B': 'b'};\n * let value = 'a';\n *\n * @example <caption>The template HTML structure</caption>\n * <select name=\"importantChoice\">\n *   {@html selectOptions(choices, { selected: value, inverted: true })}\n * </select>\n *\n * @example <caption>Using nameAttr and labelAttr with objects</caption>\n * let choices = {foo: {key: 'a', label: 'Choice A'}, bar: {key: 'b', label: 'Choice B'}};\n * let value = 'b';\n *\n * @example <caption>The template HTML structure</caption>\n * <select name=\"importantChoice\">\n *   {@html selectOptions(choices, { selected: value, nameAttr: 'key', labelAttr: 'label' })}\n * </select>\n *\n * @example <caption>Using nameAttr and labelAttr with arrays</caption>\n * let choices = [{key: 'a', label: 'Choice A'}, {key: 'b', label: 'Choice B'}];\n * let value = 'b';\n *\n * @example <caption>The template HTML structure</caption>\n * <select name=\"importantChoice\">\n *   {@html selectOptions(choices, { selected: value, nameAttr: 'key', labelAttr: 'label' })}\n * </select>\n */\nfunction selectOptions(choices, options)\n{\n   const { localize = false, blank = null, sort = false, nameAttr, labelAttr, inverted } = options;\n   let { selected = null } = options;\n\n   selected = selected instanceof Array ? selected.map(String) : [String(selected)];\n\n   // Prepare the choices as an array of objects\n   const selectChoices = [];\n\n   if (choices instanceof Array)\n   {\n      for (const choice of choices)\n      {\n         const name = String(choice[nameAttr]);\n         let label = choice[labelAttr];\n         if (localize) { label = globalThis.game.i18n.localize(label); }\n         selectChoices.push({ name, label });\n      }\n   }\n   else\n   {\n      for (const choice of Object.entries(choices))\n      {\n         const [key, value] = inverted ? choice.reverse() : choice;\n         const name = String(nameAttr ? value[nameAttr] : key);\n         let label = labelAttr ? value[labelAttr] : value;\n         if (localize) { label = globalThis.game.i18n.localize(label); }\n         selectChoices.push({ name, label });\n      }\n   }\n\n   // Sort the array of options\n   if (sort) { selectChoices.sort((a, b) => a.label.localeCompare(b.label)); }\n\n   // Prepend a blank option\n   if (blank !== null)\n   {\n      const label = localize ? globalThis.game.i18n.localize(blank) : blank;\n      selectChoices.unshift({ name: '', label });\n   }\n\n   // Create the HTML\n   let html = '';\n   for (const option of selectChoices)\n   {\n      const label = globalThis.Handlebars.escapeExpression(option.label);\n      const isSelected = selected.includes(option.name);\n      html += `<option value=\"${option.name}\" ${isSelected ? \"selected\" : \"\"}>${label}</option>`;\n   }\n\n   return new globalThis.Handlebars.SafeString(html);\n}\n\n/**\n * Localize a string including variable formatting for input arguments. Provide a string ID which defines the localized\n * template. Variables can be included in the template enclosed in braces and will be substituted using those named\n * keys.\n *\n * @param {string}   stringId - The string ID to translate.\n *\n * @param {object}   [data] - Provided input data.\n *\n * @returns {string} The translated and formatted string\n */\nfunction localize(stringId, data)\n{\n   const result = !isObject(data) ? globalThis.game.i18n.localize(stringId) :\n    globalThis.game.i18n.format(stringId, data);\n\n   return result !== void 0 ? result : '';\n}\n\nexport { localize, radioBoxes, selectOptions };\n//# sourceMappingURL=index.js.map\n","import { derived, get } from 'svelte/store';\n\n/**\n * @external Store\n * @see [Svelte stores](https://svelte.dev/docs#component-format-script-4-prefix-stores-with-$-to-access-their-values-store-contract)\n */\n\n/**\n * Create a store similar to [Svelte's `derived`](https://svelte.dev/docs#run-time-svelte-store-writable),\n * but which has its own `set` and `update` methods and can send values back to the origin stores.\n * [Read more...](https://github.com/PixievoltNo1/svelte-writable-derived#default-export-writablederived)\n * \n * @param {Store|Store[]} origins One or more stores to derive from. Same as\n * [`derived`](https://svelte.dev/docs#run-time-svelte-store-writable)'s 1st parameter.\n * @param {!Function} derive The callback to determine the derived value. Same as\n * [`derived`](https://svelte.dev/docs#run-time-svelte-store-writable)'s 2nd parameter.\n * @param {!Function} reflect Called when the derived store gets a new value via its `set` or\n * `update` methods, and determines new values for the origin stores.\n * [Read more...](https://github.com/PixievoltNo1/svelte-writable-derived#new-parameter-reflect)\n * @param [initial] The new store's initial value. Same as\n * [`derived`](https://svelte.dev/docs#run-time-svelte-store-writable)'s 3rd parameter.\n * \n * @returns {Store} A writable store.\n */\nfunction writableDerived(origins, derive, reflect, initial) {\n\tvar childDerivedSetter, originValues, blockNextDerive = false;\n\tvar reflectOldValues = reflect.length >= 2;\n\tvar wrappedDerive = (got, set, update) => {\n\t\tchildDerivedSetter = set;\n\t\tif (reflectOldValues) {\n\t\t\toriginValues = got;\n\t\t}\n\t\tif (!blockNextDerive) {\n\t\t\tlet returned = derive(got, set, update);\n\t\t\tif (derive.length < 2) {\n\t\t\t\tset(returned);\n\t\t\t} else {\n\t\t\t\treturn returned;\n\t\t\t}\n\t\t}\n\t\tblockNextDerive = false;\n\t};\n\tvar childDerived = derived(origins, wrappedDerive, initial);\n\t\n\tvar singleOrigin = !Array.isArray(origins);\n\tfunction doReflect(reflecting) {\n\t\tvar setWith = reflect(reflecting, originValues);\n\t\tif (singleOrigin) {\n\t\t\tblockNextDerive = true;\n\t\t\torigins.set(setWith);\n\t\t} else {\n\t\t\tsetWith.forEach( (value, i) => {\n\t\t\t\tblockNextDerive = true;\n\t\t\t\torigins[i].set(value);\n\t\t\t} );\n\t\t}\n\t\tblockNextDerive = false;\n\t}\n\t\n\tvar tryingSet = false;\n\tfunction update(fn) {\n\t\tvar isUpdated, mutatedBySubscriptions, oldValue, newValue;\n\t\tif (tryingSet) {\n\t\t\tnewValue = fn( get(childDerived) );\n\t\t\tchildDerivedSetter(newValue);\n\t\t\treturn;\n\t\t}\n\t\tvar unsubscribe = childDerived.subscribe( (value) => {\n\t\t\tif (!tryingSet) {\n\t\t\t\toldValue = value;\n\t\t\t} else if (!isUpdated) {\n\t\t\t\tisUpdated = true;\n\t\t\t} else {\n\t\t\t\tmutatedBySubscriptions = true;\n\t\t\t}\n\t\t} );\n\t\tnewValue = fn(oldValue);\n\t\ttryingSet = true;\n\t\tchildDerivedSetter(newValue);\n\t\tunsubscribe();\n\t\ttryingSet = false;\n\t\tif (mutatedBySubscriptions) {\n\t\t\tnewValue = get(childDerived);\n\t\t}\n\t\tif (isUpdated) {\n\t\t\tdoReflect(newValue);\n\t\t}\n\t}\n\treturn {\n\t\tsubscribe: childDerived.subscribe,\n\t\tset(value) { update( () => value ); },\n\t\tupdate,\n\t};\n}\n\n/**\n * Create a store for a property value in an object contained in another store.\n * [Read more...](https://github.com/PixievoltNo1/svelte-writable-derived#named-export-propertystore)\n * \n * @param {Store} origin The store containing the object to get/set from.\n * @param {string|number|symbol|Array<string|number|symbol>} propName The property to get/set, or a path of\n * properties in nested objects.\n *\n * @returns {Store} A writable store.\n */\nfunction propertyStore(origin, propName) {\n\tif (!Array.isArray(propName)) {\n\t\treturn writableDerived(\n\t\t\torigin,\n\t\t\t(object) => object[propName],\n\t\t\t(reflecting, object) => {\n\t\t\t\tobject[propName] = reflecting;\n\t\t\t\treturn object;\n\t\t\t},\n\t\t);\n\t} else {\n\t\tlet props = propName.concat();\n\t\treturn writableDerived(\n\t\t\torigin,\n\t\t\t(value) => {\n\t\t\t\tfor (let i = 0; i < props.length; ++i) {\n\t\t\t\t\tvalue = value[ props[i] ];\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\t(reflecting, object) => {\n\t\t\t\tlet target = object;\n\t\t\t\tfor (let i = 0; i < props.length - 1; ++i) {\n\t\t\t\t\ttarget = target[ props[i] ];\n\t\t\t\t}\n\t\t\t\ttarget[ props[props.length - 1] ] = reflecting;\n\t\t\t\treturn object;\n\t\t\t},\n\t\t);\n\t}\n}\n\nexport { propertyStore, writableDerived };\n//# sourceMappingURL=index.js.map\n","const EPSILON = 0.000001;\n\nconst IDENTITY_2X2 = new Float32Array([\n    1, 0,\n    0, 1\n]);\n/**\n * A 2x2 Matrix\n */\nclass Mat2 extends Float32Array {\n    /**\n     * The number of bytes in a {@link Mat2}.\n     */\n    static BYTE_LENGTH = 4 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Mat2}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 4:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 4);\n                break;\n            case 1:\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([\n                        v, v,\n                        v, v\n                    ]);\n                }\n                else {\n                    super(v, 0, 4);\n                }\n                break;\n            default:\n                super(IDENTITY_2X2);\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    /**\n     * A string representation of `this`\n     * Equivalent to `Mat2.str(this);`\n     */\n    get str() {\n        return Mat2.str(this);\n    }\n    //===================\n    // Instance methods\n    //===================\n    /**\n     * Copy the values from another {@link Mat2} into `this`.\n     *\n     * @param a the source vector\n     * @returns `this`\n     */\n    copy(a) {\n        this.set(a);\n        return this;\n    }\n    /**\n     * Set `this` to the identity matrix\n     * Equivalent to Mat2.identity(this)\n     *\n     * @returns `this`\n     */\n    identity() {\n        this.set(IDENTITY_2X2);\n        return this;\n    }\n    /**\n     * Multiplies this {@link Mat2} against another one\n     * Equivalent to `Mat2.multiply(this, this, b);`\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `this`\n     */\n    multiply(b) {\n        return Mat2.multiply(this, this, b);\n    }\n    /**\n     * Alias for {@link Mat2.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Transpose this {@link Mat2}\n     * Equivalent to `Mat2.transpose(this, this);`\n     *\n     * @returns `this`\n     */\n    transpose() {\n        return Mat2.transpose(this, this);\n    }\n    /**\n     * Inverts this {@link Mat2}\n     * Equivalent to `Mat4.invert(this, this);`\n     *\n     * @returns `this`\n     */\n    invert() {\n        return Mat2.invert(this, this);\n    }\n    /**\n     * Scales this {@link Mat2} by the dimensions in the given vec3 not using vectorization\n     * Equivalent to `Mat2.scale(this, this, v);`\n     *\n     * @param v - The {@link Vec2} to scale the matrix by\n     * @returns `this`\n     */\n    scale(v) {\n        return Mat2.scale(this, this, v);\n    }\n    /**\n     * Rotates this {@link Mat2} by the given angle around the given axis\n     * Equivalent to `Mat2.rotate(this, this, rad);`\n     *\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    rotate(rad) {\n        return Mat2.rotate(this, this, rad);\n    }\n    //================\n    // Static methods\n    //================\n    /**\n     * Creates a new, identity {@link Mat2}\n     * @category Static\n     *\n     * @returns A new {@link Mat2}\n     */\n    static create() {\n        return new Mat2();\n    }\n    /**\n     * Creates a new {@link Mat2} initialized with values from an existing matrix\n     * @category Static\n     *\n     * @param a - Matrix to clone\n     * @returns A new {@link Mat2}\n     */\n    static clone(a) {\n        return new Mat2(a);\n    }\n    /**\n     * Copy the values from one {@link Mat2} to another\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - Matrix to copy\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    /**\n     * Create a new {@link Mat2} with the given values\n     * @category Static\n     *\n     * @param values - Matrix components\n     * @returns A new {@link Mat2}\n     */\n    static fromValues(...values) {\n        return new Mat2(...values);\n    }\n    /**\n     * Set the components of a {@link Mat2} to the given values\n     * @category Static\n     *\n     * @param out - The receiving matrix\n     * @param values - Matrix components\n     * @returns `out`\n     */\n    static set(out, ...values) {\n        out[0] = values[0];\n        out[1] = values[1];\n        out[2] = values[2];\n        out[3] = values[3];\n        return out;\n    }\n    /**\n     * Set a {@link Mat2} to the identity matrix\n     * @category Static\n     *\n     * @param out - The receiving matrix\n     * @returns `out`\n     */\n    static identity(out) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n        return out;\n    }\n    /**\n     * Transpose the values of a {@link Mat2}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static transpose(out, a) {\n        // If we are transposing ourselves we can skip a few steps but have to cache\n        // some values\n        if (out === a) {\n            let a1 = a[1];\n            out[1] = a[2];\n            out[2] = a1;\n        }\n        else {\n            out[0] = a[0];\n            out[1] = a[2];\n            out[2] = a[1];\n            out[3] = a[3];\n        }\n        return out;\n    }\n    /**\n     * Inverts a {@link Mat2}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static invert(out, a) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        // Calculate the determinant\n        let det = a0 * a3 - a2 * a1;\n        if (!det) {\n            return null;\n        }\n        det = 1.0 / det;\n        out[0] = a3 * det;\n        out[1] = -a1 * det;\n        out[2] = -a2 * det;\n        out[3] = a0 * det;\n        return out;\n    }\n    /**\n     * Calculates the adjugate of a {@link Mat2}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static adjoint(out, a) {\n        // Caching this value is necessary if out == a\n        const a0 = a[0];\n        out[0] = a[3];\n        out[1] = -a[1];\n        out[2] = -a[2];\n        out[3] = a0;\n        return out;\n    }\n    /**\n     * Calculates the determinant of a {@link Mat2}\n     * @category Static\n     *\n     * @param a - the source matrix\n     * @returns determinant of a\n     */\n    static determinant(a) {\n        return a[0] * a[3] - a[2] * a[1];\n    }\n    /**\n     * Adds two {@link Mat2}'s\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        return out;\n    }\n    /**\n     * Subtracts matrix b from matrix a\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static subtract(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        out[3] = a[3] - b[3];\n        return out;\n    }\n    /**\n     * Alias for {@link Mat2.subtract}\n     * @category Static\n     */\n    static sub(out, a, b) { return out; }\n    /**\n     * Multiplies two {@link Mat2}s\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        out[0] = a0 * b0 + a2 * b1;\n        out[1] = a1 * b0 + a3 * b1;\n        out[2] = a0 * b2 + a2 * b3;\n        out[3] = a1 * b2 + a3 * b3;\n        return out;\n    }\n    /**\n     * Alias for {@link Mat2.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return out; }\n    /**\n     * Rotates a {@link Mat2} by the given angle\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to rotate\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static rotate(out, a, rad) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        out[0] = a0 * c + a2 * s;\n        out[1] = a1 * c + a3 * s;\n        out[2] = a0 * -s + a2 * c;\n        out[3] = a1 * -s + a3 * c;\n        return out;\n    }\n    /**\n     * Scales the {@link Mat2} by the dimensions in the given {@link Vec2}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param v - the {@link Vec2} to scale the matrix by\n     * @returns `out`\n     **/\n    static scale(out, a, v) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const v0 = v[0];\n        const v1 = v[1];\n        out[0] = a0 * v0;\n        out[1] = a1 * v0;\n        out[2] = a2 * v1;\n        out[3] = a3 * v1;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat2} from a given angle around a given axis\n     * This is equivalent to (but much faster than):\n     *\n     *     mat2.identity(dest);\n     *     mat2.rotate(dest, dest, rad);\n     * @category Static\n     *\n     * @param out - {@link Mat2} receiving operation result\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static fromRotation(out, rad) {\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        out[0] = c;\n        out[1] = s;\n        out[2] = -s;\n        out[3] = c;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat2} from a vector scaling\n     * This is equivalent to (but much faster than):\n     *\n     *     mat2.identity(dest);\n     *     mat2.scale(dest, dest, vec);\n     * @category Static\n     *\n     * @param out - {@link Mat2} receiving operation result\n     * @param v - Scaling vector\n     * @returns `out`\n     */\n    static fromScaling(out, v) {\n        out[0] = v[0];\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = v[1];\n        return out;\n    }\n    /**\n     * Returns Frobenius norm of a {@link Mat2}\n     * @category Static\n     *\n     * @param a - the matrix to calculate Frobenius norm of\n     * @returns Frobenius norm\n     */\n    static frob(a) {\n        return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2] + a[3] * a[3]);\n    }\n    /**\n     * Multiply each element of a {@link Mat2} by a scalar.\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param b - amount to scale the matrix's elements by\n     * @returns `out`\n     */\n    static multiplyScalar(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        out[2] = a[2] * b;\n        out[3] = a[3] * b;\n        return out;\n    }\n    /**\n     * Adds two {@link Mat2}'s after multiplying each element of the second operand by a scalar value.\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param scale - the amount to scale b's elements by before adding\n     * @returns `out`\n     */\n    static multiplyScalarAndAdd(out, a, b, scale) {\n        out[0] = a[0] + b[0] * scale;\n        out[1] = a[1] + b[1] * scale;\n        out[2] = a[2] + b[2] * scale;\n        out[3] = a[3] + b[3] * scale;\n        return out;\n    }\n    /**\n     * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n     * @category Static\n     *\n     * @param L - the lower triangular matrix\n     * @param D - the diagonal matrix\n     * @param U - the upper triangular matrix\n     * @param a - the input matrix to factorize\n     */\n    static LDU(L, D, U, a) {\n        L[2] = a[2] / a[0];\n        U[0] = a[0];\n        U[1] = a[1];\n        U[3] = a[3] - L[2] * U[1];\n        return [L, D, U];\n    }\n    /**\n     * Returns whether or not two {@link Mat2}s have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static exactEquals(a, b) {\n        return (a[0] === b[0] &&\n            a[1] === b[1] &&\n            a[2] === b[2] &&\n            a[3] === b[3]);\n    }\n    /**\n     * Returns whether or not two {@link Mat2}s have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)));\n    }\n    /**\n     * Returns a string representation of a {@link Mat2}\n     * @category Static\n     *\n     * @param a - matrix to represent as a string\n     * @returns string representation of the matrix\n     */\n    static str(a) {\n        return `Mat2(${a.join(', ')})`;\n    }\n}\n// Instance method alias assignments\nMat2.prototype.mul = Mat2.prototype.multiply;\n// Static method alias assignments\nMat2.mul = Mat2.multiply;\nMat2.sub = Mat2.subtract;\n\nconst IDENTITY_2X3 = new Float32Array([\n    1, 0,\n    0, 1,\n    0, 0,\n]);\n/**\n * A 2x3 Matrix\n */\nclass Mat2d extends Float32Array {\n    /**\n     * The number of bytes in a {@link Mat2d}.\n     */\n    static BYTE_LENGTH = 6 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Mat2}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 6:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 6);\n                break;\n            case 1:\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([\n                        v, v,\n                        v, v,\n                        v, v\n                    ]);\n                }\n                else {\n                    super(v, 0, 6);\n                }\n                break;\n            default:\n                super(IDENTITY_2X3);\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    /**\n     * A string representation of `this`\n     * Equivalent to `Mat2d.str(this);`\n     */\n    get str() {\n        return Mat2d.str(this);\n    }\n    //===================\n    // Instances methods\n    //===================\n    /**\n     * Copy the values from another {@link Mat2d} into `this`.\n     *\n     * @param a the source vector\n     * @returns `this`\n     */\n    copy(a) {\n        this.set(a);\n        return this;\n    }\n    /**\n     * Set `this` to the identity matrix\n     * Equivalent to Mat2d.identity(this)\n     *\n     * @returns `this`\n     */\n    identity() {\n        this.set(IDENTITY_2X3);\n        return this;\n    }\n    /**\n     * Multiplies this {@link Mat2d} against another one\n     * Equivalent to `Mat2d.multiply(this, this, b);`\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `this`\n     */\n    multiply(b) {\n        return Mat2d.multiply(this, this, b);\n    }\n    /**\n     * Alias for {@link Mat2d.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Translate this {@link Mat2d} by the given vector\n     * Equivalent to `Mat2d.translate(this, this, v);`\n     *\n     * @param v - The {@link Vec2} to translate by\n     * @returns `this`\n     */\n    translate(v) {\n        return Mat2d.translate(this, this, v);\n    }\n    /**\n     * Rotates this {@link Mat2d} by the given angle around the given axis\n     * Equivalent to `Mat2d.rotate(this, this, rad);`\n     *\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    rotate(rad) {\n        return Mat2d.rotate(this, this, rad);\n    }\n    /**\n     * Scales this {@link Mat2d} by the dimensions in the given vec3 not using vectorization\n     * Equivalent to `Mat2d.scale(this, this, v);`\n     *\n     * @param v - The {@link Vec2} to scale the matrix by\n     * @returns `this`\n     */\n    scale(v) {\n        return Mat2d.scale(this, this, v);\n    }\n    //================\n    // Static methods\n    //================\n    /**\n     * Creates a new, identity {@link Mat2d}\n     * @category Static\n     *\n     * @returns A new {@link Mat2d}\n     */\n    static create() {\n        return new Mat2d();\n    }\n    /**\n     * Creates a new {@link Mat2d} initialized with values from an existing matrix\n     * @category Static\n     *\n     * @param a - Matrix to clone\n     * @returns A new {@link Mat2d}\n     */\n    static clone(a) {\n        return new Mat2d(a);\n    }\n    /**\n     * Copy the values from one {@link Mat2d} to another\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - Matrix to copy\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[4] = a[4];\n        out[5] = a[5];\n        return out;\n    }\n    /**\n     * Create a new {@link Mat2d} with the given values\n     * @category Static\n     *\n     * @param values - Matrix components\n     * @returns A new {@link Mat2d}\n     */\n    static fromValues(...values) {\n        return new Mat2d(...values);\n    }\n    /**\n     * Set the components of a {@link Mat2d} to the given values\n     * @category Static\n     *\n     * @param out - The receiving matrix\n     * @param values - Matrix components\n     * @returns `out`\n     */\n    static set(out, ...values) {\n        out[0] = values[0];\n        out[1] = values[1];\n        out[2] = values[2];\n        out[3] = values[3];\n        out[4] = values[4];\n        out[5] = values[5];\n        return out;\n    }\n    /**\n     * Set a {@link Mat2d} to the identity matrix\n     * @category Static\n     *\n     * @param out - The receiving matrix\n     * @returns `out`\n     */\n    static identity(out) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n        out[4] = 0;\n        out[5] = 0;\n        return out;\n    }\n    /**\n     * Inverts a {@link Mat2d}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static invert(out, a) {\n        const aa = a[0];\n        const ab = a[1];\n        const ac = a[2];\n        const ad = a[3];\n        const atx = a[4];\n        const aty = a[5];\n        let det = aa * ad - ab * ac;\n        if (!det) {\n            return null;\n        }\n        det = 1.0 / det;\n        out[0] = ad * det;\n        out[1] = -ab * det;\n        out[2] = -ac * det;\n        out[3] = aa * det;\n        out[4] = (ac * aty - ad * atx) * det;\n        out[5] = (ab * atx - aa * aty) * det;\n        return out;\n    }\n    /**\n     * Calculates the determinant of a {@link Mat2d}\n     * @category Static\n     *\n     * @param a - the source matrix\n     * @returns determinant of a\n     */\n    static determinant(a) {\n        return a[0] * a[3] - a[1] * a[2];\n    }\n    /**\n     * Adds two {@link Mat2d}'s\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        out[4] = a[4] + b[4];\n        out[5] = a[5] + b[5];\n        return out;\n    }\n    /**\n     * Subtracts matrix b from matrix a\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static subtract(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        out[3] = a[3] - b[3];\n        out[4] = a[4] - b[4];\n        out[5] = a[5] - b[5];\n        return out;\n    }\n    /**\n     * Alias for {@link Mat2d.subtract}\n     * @category Static\n     */\n    static sub(out, a, b) { return out; }\n    /**\n     * Multiplies two {@link Mat2d}s\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        const b4 = b[4];\n        const b5 = b[5];\n        out[0] = a0 * b0 + a2 * b1;\n        out[1] = a1 * b0 + a3 * b1;\n        out[2] = a0 * b2 + a2 * b3;\n        out[3] = a1 * b2 + a3 * b3;\n        out[4] = a0 * b4 + a2 * b5 + a4;\n        out[5] = a1 * b4 + a3 * b5 + a5;\n        return out;\n    }\n    /**\n     * Alias for {@link Mat2d.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return out; }\n    /**\n     * Translate a {@link Mat2d} by the given vector\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to translate\n     * @param v - vector to translate by\n     * @returns `out`\n     */\n    static translate(out, a, v) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const v0 = v[0];\n        const v1 = v[1];\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a0 * v0 + a2 * v1 + a4;\n        out[5] = a1 * v0 + a3 * v1 + a5;\n        return out;\n    }\n    /**\n     * Rotates a {@link Mat2d} by the given angle\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to rotate\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static rotate(out, a, rad) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        out[0] = a0 * c + a2 * s;\n        out[1] = a1 * c + a3 * s;\n        out[2] = a0 * -s + a2 * c;\n        out[3] = a1 * -s + a3 * c;\n        out[4] = a4;\n        out[5] = a5;\n        return out;\n    }\n    /**\n     * Scales the {@link Mat2d} by the dimensions in the given {@link Vec2}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param v - the {@link Vec2} to scale the matrix by\n     * @returns `out`\n     **/\n    static scale(out, a, v) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const v0 = v[0];\n        const v1 = v[1];\n        out[0] = a0 * v0;\n        out[1] = a1 * v0;\n        out[2] = a2 * v1;\n        out[3] = a3 * v1;\n        out[4] = a4;\n        out[5] = a5;\n        return out;\n    }\n    // TODO: Got to fromRotation\n    /**\n     * Creates a {@link Mat2d} from a vector translation\n     * This is equivalent to (but much faster than):\n     *\n     *     Mat2d.identity(dest);\n     *     Mat2d.translate(dest, dest, vec);\n     * @category Static\n     *\n     * @param out - {@link Mat2d} receiving operation result\n     * @param v - Translation vector\n     * @returns `out`\n     */\n    static fromTranslation(out, v) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n        out[4] = v[0];\n        out[5] = v[1];\n        return out;\n    }\n    /**\n     * Creates a {@link Mat2d} from a given angle around a given axis\n     * This is equivalent to (but much faster than):\n     *\n     *     Mat2d.identity(dest);\n     *     Mat2d.rotate(dest, dest, rad);\n     * @category Static\n     *\n     * @param out - {@link Mat2d} receiving operation result\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static fromRotation(out, rad) {\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        out[0] = c;\n        out[1] = s;\n        out[2] = -s;\n        out[3] = c;\n        out[4] = 0;\n        out[5] = 0;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat2d} from a vector scaling\n     * This is equivalent to (but much faster than):\n     *\n     *     Mat2d.identity(dest);\n     *     Mat2d.scale(dest, dest, vec);\n     * @category Static\n     *\n     * @param out - {@link Mat2d} receiving operation result\n     * @param v - Scaling vector\n     * @returns `out`\n     */\n    static fromScaling(out, v) {\n        out[0] = v[0];\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = v[1];\n        out[4] = 0;\n        out[5] = 0;\n        return out;\n    }\n    /**\n     * Returns Frobenius norm of a {@link Mat2d}\n     * @category Static\n     *\n     * @param a - the matrix to calculate Frobenius norm of\n     * @returns Frobenius norm\n     */\n    static frob(a) {\n        return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2] + a[3] * a[3] + a[4] * a[4] + a[5] * a[5] + 1);\n    }\n    /**\n     * Multiply each element of a {@link Mat2d} by a scalar.\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param b - amount to scale the matrix's elements by\n     * @returns `out`\n     */\n    static multiplyScalar(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        out[2] = a[2] * b;\n        out[3] = a[3] * b;\n        out[4] = a[4] * b;\n        out[5] = a[5] * b;\n        return out;\n    }\n    /**\n     * Adds two {@link Mat2d}'s after multiplying each element of the second operand by a scalar value.\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param scale - the amount to scale b's elements by before adding\n     * @returns `out`\n     */\n    static multiplyScalarAndAdd(out, a, b, scale) {\n        out[0] = a[0] + b[0] * scale;\n        out[1] = a[1] + b[1] * scale;\n        out[2] = a[2] + b[2] * scale;\n        out[3] = a[3] + b[3] * scale;\n        out[4] = a[4] + b[4] * scale;\n        out[5] = a[5] + b[5] * scale;\n        return out;\n    }\n    /**\n     * Returns whether or not two {@link Mat2d}s have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static exactEquals(a, b) {\n        return (a[0] === b[0] &&\n            a[1] === b[1] &&\n            a[2] === b[2] &&\n            a[3] === b[3] &&\n            a[4] === b[4] &&\n            a[5] === b[5]);\n    }\n    /**\n     * Returns whether or not two {@link Mat2d}s have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        const b4 = b[4];\n        const b5 = b[5];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) &&\n            Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) &&\n            Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)));\n    }\n    /**\n     * Returns a string representation of a {@link Mat2d}\n     * @category Static\n     *\n     * @param a - matrix to represent as a string\n     * @returns string representation of the matrix\n     */\n    static str(a) {\n        return `Mat2d(${a.join(', ')})`;\n    }\n}\n// Static method alias assignments\nMat2d.mul = Mat2d.multiply;\nMat2d.sub = Mat2d.subtract;\n\nconst IDENTITY_3X3 = new Float32Array([\n    1, 0, 0,\n    0, 1, 0,\n    0, 0, 1,\n]);\n/**\n * A 3x3 Matrix\n */\nclass Mat3 extends Float32Array {\n    /**\n     * The number of bytes in a {@link Mat3}.\n     */\n    static BYTE_LENGTH = 9 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Mat3}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 9:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 9);\n                break;\n            case 1:\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([\n                        v, v, v,\n                        v, v, v,\n                        v, v, v\n                    ]);\n                }\n                else {\n                    super(v, 0, 9);\n                }\n                break;\n            default:\n                super(IDENTITY_3X3);\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    /**\n     * A string representation of `this`\n     * Equivalent to `Mat3.str(this);`\n     */\n    get str() {\n        return Mat3.str(this);\n    }\n    //===================\n    // Instance methods\n    //===================\n    /**\n     * Copy the values from another {@link Mat3} into `this`.\n     *\n     * @param a the source vector\n     * @returns `this`\n     */\n    copy(a) {\n        this.set(a);\n        return this;\n    }\n    /**\n     * Set `this` to the identity matrix\n     * Equivalent to Mat3.identity(this)\n     *\n     * @returns `this`\n     */\n    identity() {\n        this.set(IDENTITY_3X3);\n        return this;\n    }\n    /**\n     * Multiplies this {@link Mat3} against another one\n     * Equivalent to `Mat3.multiply(this, this, b);`\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `this`\n     */\n    multiply(b) {\n        return Mat3.multiply(this, this, b);\n    }\n    /**\n     * Alias for {@link Mat3.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Transpose this {@link Mat3}\n     * Equivalent to `Mat3.transpose(this, this);`\n     *\n     * @returns `this`\n     */\n    transpose() {\n        return Mat3.transpose(this, this);\n    }\n    /**\n     * Inverts this {@link Mat3}\n     * Equivalent to `Mat4.invert(this, this);`\n     *\n     * @returns `this`\n     */\n    invert() {\n        return Mat3.invert(this, this);\n    }\n    /**\n     * Translate this {@link Mat3} by the given vector\n     * Equivalent to `Mat3.translate(this, this, v);`\n     *\n     * @param v - The {@link Vec2} to translate by\n     * @returns `this`\n     */\n    translate(v) {\n        return Mat3.translate(this, this, v);\n    }\n    /**\n     * Rotates this {@link Mat3} by the given angle around the given axis\n     * Equivalent to `Mat3.rotate(this, this, rad);`\n     *\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    rotate(rad) {\n        return Mat3.rotate(this, this, rad);\n    }\n    /**\n     * Scales this {@link Mat3} by the dimensions in the given vec3 not using vectorization\n     * Equivalent to `Mat3.scale(this, this, v);`\n     *\n     * @param v - The {@link Vec2} to scale the matrix by\n     * @returns `this`\n     */\n    scale(v) {\n        return Mat3.scale(this, this, v);\n    }\n    //================\n    // Static methods\n    //================\n    /**\n     * Creates a new, identity {@link Mat3}\n     * @category Static\n     *\n     * @returns A new {@link Mat3}\n     */\n    static create() {\n        return new Mat3();\n    }\n    /**\n     * Creates a new {@link Mat3} initialized with values from an existing matrix\n     * @category Static\n     *\n     * @param a - Matrix to clone\n     * @returns A new {@link Mat3}\n     */\n    static clone(a) {\n        return new Mat3(a);\n    }\n    /**\n     * Copy the values from one {@link Mat3} to another\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - Matrix to copy\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[8] = a[8];\n        return out;\n    }\n    /**\n     * Create a new {@link Mat3} with the given values\n     * @category Static\n     *\n     * @param values - Matrix components\n     * @returns A new {@link Mat3}\n     */\n    static fromValues(...values) {\n        return new Mat3(...values);\n    }\n    /**\n     * Set the components of a {@link Mat3} to the given values\n     * @category Static\n     *\n     * @param out - The receiving matrix\n     * @param values - Matrix components\n     * @returns `out`\n     */\n    static set(out, ...values) {\n        out[0] = values[0];\n        out[1] = values[1];\n        out[2] = values[2];\n        out[3] = values[3];\n        out[4] = values[4];\n        out[5] = values[5];\n        out[6] = values[6];\n        out[7] = values[7];\n        out[8] = values[8];\n        return out;\n    }\n    /**\n     * Set a {@link Mat3} to the identity matrix\n     * @category Static\n     *\n     * @param out - The receiving matrix\n     * @returns `out`\n     */\n    static identity(out) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 1;\n        out[5] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 1;\n        return out;\n    }\n    /**\n     * Transpose the values of a {@link Mat3}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static transpose(out, a) {\n        // If we are transposing ourselves we can skip a few steps but have to cache some values\n        if (out === a) {\n            const a01 = a[1], a02 = a[2], a12 = a[5];\n            out[1] = a[3];\n            out[2] = a[6];\n            out[3] = a01;\n            out[5] = a[7];\n            out[6] = a02;\n            out[7] = a12;\n        }\n        else {\n            out[0] = a[0];\n            out[1] = a[3];\n            out[2] = a[6];\n            out[3] = a[1];\n            out[4] = a[4];\n            out[5] = a[7];\n            out[6] = a[2];\n            out[7] = a[5];\n            out[8] = a[8];\n        }\n        return out;\n    }\n    /**\n     * Inverts a {@link Mat3}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static invert(out, a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2];\n        const a10 = a[3], a11 = a[4], a12 = a[5];\n        const a20 = a[6], a21 = a[7], a22 = a[8];\n        const b01 = a22 * a11 - a12 * a21;\n        const b11 = -a22 * a10 + a12 * a20;\n        const b21 = a21 * a10 - a11 * a20;\n        // Calculate the determinant\n        let det = a00 * b01 + a01 * b11 + a02 * b21;\n        if (!det) {\n            return null;\n        }\n        det = 1.0 / det;\n        out[0] = b01 * det;\n        out[1] = (-a22 * a01 + a02 * a21) * det;\n        out[2] = (a12 * a01 - a02 * a11) * det;\n        out[3] = b11 * det;\n        out[4] = (a22 * a00 - a02 * a20) * det;\n        out[5] = (-a12 * a00 + a02 * a10) * det;\n        out[6] = b21 * det;\n        out[7] = (-a21 * a00 + a01 * a20) * det;\n        out[8] = (a11 * a00 - a01 * a10) * det;\n        return out;\n    }\n    /**\n     * Calculates the adjugate of a {@link Mat3}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static adjoint(out, a) {\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a10 = a[3];\n        const a11 = a[4];\n        const a12 = a[5];\n        const a20 = a[6];\n        const a21 = a[7];\n        const a22 = a[8];\n        out[0] = a11 * a22 - a12 * a21;\n        out[1] = a02 * a21 - a01 * a22;\n        out[2] = a01 * a12 - a02 * a11;\n        out[3] = a12 * a20 - a10 * a22;\n        out[4] = a00 * a22 - a02 * a20;\n        out[5] = a02 * a10 - a00 * a12;\n        out[6] = a10 * a21 - a11 * a20;\n        out[7] = a01 * a20 - a00 * a21;\n        out[8] = a00 * a11 - a01 * a10;\n        return out;\n    }\n    /**\n     * Calculates the determinant of a {@link Mat3}\n     * @category Static\n     *\n     * @param a - the source matrix\n     * @returns determinant of a\n     */\n    static determinant(a) {\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a10 = a[3];\n        const a11 = a[4];\n        const a12 = a[5];\n        const a20 = a[6];\n        const a21 = a[7];\n        const a22 = a[8];\n        return (a00 * (a22 * a11 - a12 * a21) +\n            a01 * (-a22 * a10 + a12 * a20) +\n            a02 * (a21 * a10 - a11 * a20));\n    }\n    /**\n     * Adds two {@link Mat3}'s\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        out[4] = a[4] + b[4];\n        out[5] = a[5] + b[5];\n        out[6] = a[6] + b[6];\n        out[7] = a[7] + b[7];\n        out[8] = a[8] + b[8];\n        return out;\n    }\n    /**\n     * Subtracts matrix b from matrix a\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static subtract(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        out[3] = a[3] - b[3];\n        out[4] = a[4] - b[4];\n        out[5] = a[5] - b[5];\n        out[6] = a[6] - b[6];\n        out[7] = a[7] - b[7];\n        out[8] = a[8] - b[8];\n        return out;\n    }\n    /**\n     * Alias for {@link Mat3.subtract}\n     * @category Static\n     */\n    static sub(out, a, b) { return out; }\n    /**\n     * Multiplies two {@link Mat3}s\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a10 = a[3];\n        const a11 = a[4];\n        const a12 = a[5];\n        const a20 = a[6];\n        const a21 = a[7];\n        const a22 = a[8];\n        let b0 = b[0];\n        let b1 = b[1];\n        let b2 = b[2];\n        out[0] = b0 * a00 + b1 * a10 + b2 * a20;\n        out[1] = b0 * a01 + b1 * a11 + b2 * a21;\n        out[2] = b0 * a02 + b1 * a12 + b2 * a22;\n        b0 = b[3];\n        b1 = b[4];\n        b2 = b[5];\n        out[3] = b0 * a00 + b1 * a10 + b2 * a20;\n        out[4] = b0 * a01 + b1 * a11 + b2 * a21;\n        out[5] = b0 * a02 + b1 * a12 + b2 * a22;\n        b0 = b[6];\n        b1 = b[7];\n        b2 = b[8];\n        out[6] = b0 * a00 + b1 * a10 + b2 * a20;\n        out[7] = b0 * a01 + b1 * a11 + b2 * a21;\n        out[8] = b0 * a02 + b1 * a12 + b2 * a22;\n        return out;\n    }\n    /**\n     * Alias for {@link Mat3.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return out; }\n    /**\n     * Translate a {@link Mat3} by the given vector\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to translate\n     * @param v - vector to translate by\n     * @returns `out`\n     */\n    static translate(out, a, v) {\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a10 = a[3];\n        const a11 = a[4];\n        const a12 = a[5];\n        const a20 = a[6];\n        const a21 = a[7];\n        const a22 = a[8];\n        const x = v[0];\n        const y = v[1];\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a10;\n        out[4] = a11;\n        out[5] = a12;\n        out[6] = x * a00 + y * a10 + a20;\n        out[7] = x * a01 + y * a11 + a21;\n        out[8] = x * a02 + y * a12 + a22;\n        return out;\n    }\n    /**\n     * Rotates a {@link Mat3} by the given angle\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to rotate\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static rotate(out, a, rad) {\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a10 = a[3];\n        const a11 = a[4];\n        const a12 = a[5];\n        const a20 = a[6];\n        const a21 = a[7];\n        const a22 = a[8];\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        out[0] = c * a00 + s * a10;\n        out[1] = c * a01 + s * a11;\n        out[2] = c * a02 + s * a12;\n        out[3] = c * a10 - s * a00;\n        out[4] = c * a11 - s * a01;\n        out[5] = c * a12 - s * a02;\n        out[6] = a20;\n        out[7] = a21;\n        out[8] = a22;\n        return out;\n    }\n    /**\n     * Scales the {@link Mat3} by the dimensions in the given {@link Vec2}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param v - the {@link Vec2} to scale the matrix by\n     * @returns `out`\n     **/\n    static scale(out, a, v) {\n        const x = v[0];\n        const y = v[1];\n        out[0] = x * a[0];\n        out[1] = x * a[1];\n        out[2] = x * a[2];\n        out[3] = y * a[3];\n        out[4] = y * a[4];\n        out[5] = y * a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[8] = a[8];\n        return out;\n    }\n    /**\n     * Creates a {@link Mat3} from a vector translation\n     * This is equivalent to (but much faster than):\n     *\n     *     mat3.identity(dest);\n     *     mat3.translate(dest, dest, vec);\n     * @category Static\n     *\n     * @param out - {@link Mat3} receiving operation result\n     * @param v - Translation vector\n     * @returns `out`\n     */\n    static fromTranslation(out, v) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 1;\n        out[5] = 0;\n        out[6] = v[0];\n        out[7] = v[1];\n        out[8] = 1;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat3} from a given angle around a given axis\n     * This is equivalent to (but much faster than):\n     *\n     *     mat3.identity(dest);\n     *     mat3.rotate(dest, dest, rad);\n     * @category Static\n     *\n     * @param out - {@link Mat3} receiving operation result\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static fromRotation(out, rad) {\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        out[0] = c;\n        out[1] = s;\n        out[2] = 0;\n        out[3] = -s;\n        out[4] = c;\n        out[5] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 1;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat3} from a vector scaling\n     * This is equivalent to (but much faster than):\n     *\n     *     mat3.identity(dest);\n     *     mat3.scale(dest, dest, vec);\n     * @category Static\n     *\n     * @param out - {@link Mat3} receiving operation result\n     * @param v - Scaling vector\n     * @returns `out`\n     */\n    static fromScaling(out, v) {\n        out[0] = v[0];\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = v[1];\n        out[5] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 1;\n        return out;\n    }\n    /**\n     * Copies the upper-left 3x3 values of a {@link Mat2d} into the given\n     * {@link Mat3}.\n     * @category Static\n     *\n     * @param out - the receiving 3x3 matrix\n     * @param a - the source 2x3 matrix\n     * @returns `out`\n     */\n    static fromMat2d(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = 0;\n        out[3] = a[2];\n        out[4] = a[3];\n        out[5] = 0;\n        out[6] = a[4];\n        out[7] = a[5];\n        out[8] = 1;\n        return out;\n    }\n    /**\n     * Calculates a {@link Mat3} from the given quaternion\n     *\n     * @param out - {@link Mat3} receiving operation result\n     * @param q - {@link Quat} to create matrix from\n     * @returns `out`\n     */\n    static fromQuat(out, q) {\n        const x = q[0];\n        const y = q[1];\n        const z = q[2];\n        const w = q[3];\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const yx = y * x2;\n        const yy = y * y2;\n        const zx = z * x2;\n        const zy = z * y2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n        out[0] = 1 - yy - zz;\n        out[3] = yx - wz;\n        out[6] = zx + wy;\n        out[1] = yx + wz;\n        out[4] = 1 - xx - zz;\n        out[7] = zy - wx;\n        out[2] = zx - wy;\n        out[5] = zy + wx;\n        out[8] = 1 - xx - yy;\n        return out;\n    }\n    /**\n     * Copies the upper-left 3x3 values of a {@link Mat4} into the given\n     * {@link Mat3}.\n     * @category Static\n     *\n     * @param out - the receiving 3x3 matrix\n     * @param a - the source 4x4 matrix\n     * @returns `out`\n     */\n    static fromMat4(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[4];\n        out[4] = a[5];\n        out[5] = a[6];\n        out[6] = a[8];\n        out[7] = a[9];\n        out[8] = a[10];\n        return out;\n    }\n    /**\n     * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n     * @category Static\n     *\n     * @param {mat3} out mat3 receiving operation result\n     * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n     * @returns `out`\n     */\n    static normalFromMat4(out, a) {\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a03 = a[3];\n        const a10 = a[4];\n        const a11 = a[5];\n        const a12 = a[6];\n        const a13 = a[7];\n        const a20 = a[8];\n        const a21 = a[9];\n        const a22 = a[10];\n        const a23 = a[11];\n        const a30 = a[12];\n        const a31 = a[13];\n        const a32 = a[14];\n        const a33 = a[15];\n        const b00 = a00 * a11 - a01 * a10;\n        const b01 = a00 * a12 - a02 * a10;\n        const b02 = a00 * a13 - a03 * a10;\n        const b03 = a01 * a12 - a02 * a11;\n        const b04 = a01 * a13 - a03 * a11;\n        const b05 = a02 * a13 - a03 * a12;\n        const b06 = a20 * a31 - a21 * a30;\n        const b07 = a20 * a32 - a22 * a30;\n        const b08 = a20 * a33 - a23 * a30;\n        const b09 = a21 * a32 - a22 * a31;\n        const b10 = a21 * a33 - a23 * a31;\n        const b11 = a22 * a33 - a23 * a32;\n        // Calculate the determinant\n        let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n        if (!det) {\n            return null;\n        }\n        det = 1.0 / det;\n        out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n        out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n        out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n        out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n        out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n        out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n        out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n        out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n        out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n        return out;\n    }\n    /**\n     * Generates a 2D projection matrix with the given bounds\n     * @category Static\n     *\n     * @param out mat3 frustum matrix will be written into\n     * @param width Width of your gl context\n     * @param height Height of gl context\n     * @returns `out`\n     */\n    static projection(out, width, height) {\n        out[0] = 2 / width;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = -2 / height;\n        out[5] = 0;\n        out[6] = -1;\n        out[7] = 1;\n        out[8] = 1;\n        return out;\n    }\n    /**\n     * Returns Frobenius norm of a {@link Mat3}\n     * @category Static\n     *\n     * @param a - the matrix to calculate Frobenius norm of\n     * @returns Frobenius norm\n     */\n    static frob(a) {\n        return Math.sqrt(a[0] * a[0] +\n            a[1] * a[1] +\n            a[2] * a[2] +\n            a[3] * a[3] +\n            a[4] * a[4] +\n            a[5] * a[5] +\n            a[6] * a[6] +\n            a[7] * a[7] +\n            a[8] * a[8]);\n    }\n    /**\n     * Multiply each element of a {@link Mat3} by a scalar.\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param b - amount to scale the matrix's elements by\n     * @returns `out`\n     */\n    static multiplyScalar(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        out[2] = a[2] * b;\n        out[3] = a[3] * b;\n        out[4] = a[4] * b;\n        out[5] = a[5] * b;\n        out[6] = a[6] * b;\n        out[7] = a[7] * b;\n        out[8] = a[8] * b;\n        return out;\n    }\n    /**\n     * Adds two {@link Mat3}'s after multiplying each element of the second operand by a scalar value.\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param scale - the amount to scale b's elements by before adding\n     * @returns `out`\n     */\n    static multiplyScalarAndAdd(out, a, b, scale) {\n        out[0] = a[0] + b[0] * scale;\n        out[1] = a[1] + b[1] * scale;\n        out[2] = a[2] + b[2] * scale;\n        out[3] = a[3] + b[3] * scale;\n        out[4] = a[4] + b[4] * scale;\n        out[5] = a[5] + b[5] * scale;\n        out[6] = a[6] + b[6] * scale;\n        out[7] = a[7] + b[7] * scale;\n        out[8] = a[8] + b[8] * scale;\n        return out;\n    }\n    /**\n     * Returns whether or not two {@link Mat3}s have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static exactEquals(a, b) {\n        return (a[0] === b[0] &&\n            a[1] === b[1] &&\n            a[2] === b[2] &&\n            a[3] === b[3] &&\n            a[4] === b[4] &&\n            a[5] === b[5] &&\n            a[6] === b[6] &&\n            a[7] === b[7] &&\n            a[8] === b[8]);\n    }\n    /**\n     * Returns whether or not two {@link Mat3}s have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const a6 = a[6];\n        const a7 = a[7];\n        const a8 = a[8];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        const b4 = b[4];\n        const b5 = b[5];\n        const b6 = b[6];\n        const b7 = b[7];\n        const b8 = b[8];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) &&\n            Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) &&\n            Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) &&\n            Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) &&\n            Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) &&\n            Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)));\n    }\n    /**\n     * Returns a string representation of a {@link Mat3}\n     * @category Static\n     *\n     * @param a - matrix to represent as a string\n     * @returns string representation of the matrix\n     */\n    static str(a) {\n        return `Mat3(${a.join(', ')})`;\n    }\n}\n// Instance method alias assignments\nMat3.prototype.mul = Mat3.prototype.multiply;\n// Static method alias assignments\nMat3.mul = Mat3.multiply;\nMat3.sub = Mat3.subtract;\n\nconst IDENTITY_4X4 = new Float32Array([\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n]);\n/**\n * A 4x4 Matrix\n */\nclass Mat4 extends Float32Array {\n    /**\n     * The number of bytes in a {@link Mat4}.\n     */\n    static BYTE_LENGTH = 16 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Mat4}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 16:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 16);\n                break;\n            case 1:\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([\n                        v, v, v, v,\n                        v, v, v, v,\n                        v, v, v, v,\n                        v, v, v, v\n                    ]);\n                }\n                else {\n                    super(v, 0, 16);\n                }\n                break;\n            default:\n                super(IDENTITY_4X4);\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    /**\n     * A string representation of `this`\n     * Equivalent to `Mat4.str(this);`\n     */\n    get str() {\n        return Mat4.str(this);\n    }\n    //===================\n    // Instance methods\n    //===================\n    /**\n     * Copy the values from another {@link Mat4} into `this`.\n     *\n     * @param a the source vector\n     * @returns `this`\n     */\n    copy(a) {\n        this.set(a);\n        return this;\n    }\n    /**\n     * Set `this` to the identity matrix\n     * Equivalent to Mat4.identity(this)\n     *\n     * @returns `this`\n     */\n    identity() {\n        this.set(IDENTITY_4X4);\n        return this;\n    }\n    /**\n     * Multiplies this {@link Mat4} against another one\n     * Equivalent to `Mat4.multiply(this, this, b);`\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `this`\n     */\n    multiply(b) {\n        return Mat4.multiply(this, this, b);\n    }\n    /**\n     * Alias for {@link Mat4.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Transpose this {@link Mat4}\n     * Equivalent to `Mat4.transpose(this, this);`\n     *\n     * @returns `this`\n     */\n    transpose() {\n        return Mat4.transpose(this, this);\n    }\n    /**\n     * Inverts this {@link Mat4}\n     * Equivalent to `Mat4.invert(this, this);`\n     *\n     * @returns `this`\n     */\n    invert() {\n        return Mat4.invert(this, this);\n    }\n    /**\n     * Translate this {@link Mat4} by the given vector\n     * Equivalent to `Mat4.translate(this, this, v);`\n     *\n     * @param v - The {@link Vec3} to translate by\n     * @returns `this`\n     */\n    translate(v) {\n        return Mat4.translate(this, this, v);\n    }\n    /**\n     * Rotates this {@link Mat4} by the given angle around the given axis\n     * Equivalent to `Mat4.rotate(this, this, rad, axis);`\n     *\n     * @param rad - the angle to rotate the matrix by\n     * @param axis - the axis to rotate around\n     * @returns `out`\n     */\n    rotate(rad, axis) {\n        return Mat4.rotate(this, this, rad, axis);\n    }\n    /**\n     * Scales this {@link Mat4} by the dimensions in the given vec3 not using vectorization\n     * Equivalent to `Mat4.scale(this, this, v);`\n     *\n     * @param v - The {@link Vec3} to scale the matrix by\n     * @returns `this`\n     */\n    scale(v) {\n        return Mat4.scale(this, this, v);\n    }\n    /**\n     * Rotates this {@link Mat4} by the given angle around the X axis\n     * Equivalent to `Mat4.rotateX(this, this, rad);`\n     *\n     * @param rad - the angle to rotate the matrix by\n     * @returns `this`\n     */\n    rotateX(rad) {\n        return Mat4.rotateX(this, this, rad);\n    }\n    /**\n     * Rotates this {@link Mat4} by the given angle around the Y axis\n     * Equivalent to `Mat4.rotateY(this, this, rad);`\n     *\n     * @param rad - the angle to rotate the matrix by\n     * @returns `this`\n     */\n    rotateY(rad) {\n        return Mat4.rotateY(this, this, rad);\n    }\n    /**\n     * Rotates this {@link Mat4} by the given angle around the Z axis\n     * Equivalent to `Mat4.rotateZ(this, this, rad);`\n     *\n     * @param rad - the angle to rotate the matrix by\n     * @returns `this`\n     */\n    rotateZ(rad) {\n        return Mat4.rotateZ(this, this, rad);\n    }\n    /**\n     * Generates a perspective projection matrix with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n     * which matches WebGL/OpenGL's clip volume.\n     * Passing null/undefined/no value for far will generate infinite projection matrix.\n     * Equivalent to `Mat4.perspectiveNO(this, fovy, aspect, near, far);`\n     *\n     * @param fovy - Vertical field of view in radians\n     * @param aspect - Aspect ratio. typically viewport width/height\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum, can be null or Infinity\n     * @returns `this`\n     */\n    perspectiveNO(fovy, aspect, near, far) {\n        return Mat4.perspectiveNO(this, fovy, aspect, near, far);\n    }\n    /**\n     * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n     * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n     * Passing null/undefined/no value for far will generate infinite projection matrix.\n     * Equivalent to `Mat4.perspectiveZO(this, fovy, aspect, near, far);`\n     *\n     * @param fovy - Vertical field of view in radians\n     * @param aspect - Aspect ratio. typically viewport width/height\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum, can be null or Infinity\n     * @returns `this`\n     */\n    perspectiveZO(fovy, aspect, near, far) {\n        return Mat4.perspectiveZO(this, fovy, aspect, near, far);\n    }\n    /**\n     * Generates a orthogonal projection matrix with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n     * which matches WebGL/OpenGL's clip volume.\n     * Equivalent to `Mat4.orthoNO(this, left, right, bottom, top, near, far);`\n     *\n     * @param left - Left bound of the frustum\n     * @param right - Right bound of the frustum\n     * @param bottom - Bottom bound of the frustum\n     * @param top - Top bound of the frustum\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum\n     * @returns `this`\n     */\n    orthoNO(left, right, bottom, top, near, far) {\n        return Mat4.orthoNO(this, left, right, bottom, top, near, far);\n    }\n    /**\n     * Generates a orthogonal projection matrix with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n     * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n     * Equivalent to `Mat4.orthoZO(this, left, right, bottom, top, near, far);`\n     *\n     * @param left - Left bound of the frustum\n     * @param right - Right bound of the frustum\n     * @param bottom - Bottom bound of the frustum\n     * @param top - Top bound of the frustum\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum\n     * @returns `this`\n     */\n    orthoZO(left, right, bottom, top, near, far) {\n        return Mat4.orthoZO(this, left, right, bottom, top, near, far);\n    }\n    //================\n    // Static methods\n    //================\n    /**\n     * Creates a new, identity {@link Mat4}\n     * @category Static\n     *\n     * @returns A new {@link Mat4}\n     */\n    static create() {\n        return new Mat4();\n    }\n    /**\n     * Creates a new {@link Mat4} initialized with values from an existing matrix\n     * @category Static\n     *\n     * @param a - Matrix to clone\n     * @returns A new {@link Mat4}\n     */\n    static clone(a) {\n        return new Mat4(a);\n    }\n    /**\n     * Copy the values from one {@link Mat4} to another\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - Matrix to copy\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[8] = a[8];\n        out[9] = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n        return out;\n    }\n    /**\n     * Create a new mat4 with the given values\n     * @category Static\n     *\n     * @param values - Matrix components\n     * @returns A new {@link Mat4}\n     */\n    static fromValues(...values) {\n        return new Mat4(...values);\n    }\n    /**\n     * Set the components of a mat4 to the given values\n     * @category Static\n     *\n     * @param out - The receiving matrix\n     * @param values - Matrix components\n     * @returns `out`\n     */\n    static set(out, ...values) {\n        out[0] = values[0];\n        out[1] = values[1];\n        out[2] = values[2];\n        out[3] = values[3];\n        out[4] = values[4];\n        out[5] = values[5];\n        out[6] = values[6];\n        out[7] = values[7];\n        out[8] = values[8];\n        out[9] = values[9];\n        out[10] = values[10];\n        out[11] = values[11];\n        out[12] = values[12];\n        out[13] = values[13];\n        out[14] = values[14];\n        out[15] = values[15];\n        return out;\n    }\n    /**\n     * Set a {@link Mat4} to the identity matrix\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @returns `out`\n     */\n    static identity(out) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = 1;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = 1;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Transpose the values of a {@link Mat4}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static transpose(out, a) {\n        // If we are transposing ourselves we can skip a few steps but have to cache some values\n        if (out === a) {\n            const a01 = a[1], a02 = a[2], a03 = a[3];\n            const a12 = a[6], a13 = a[7];\n            const a23 = a[11];\n            out[1] = a[4];\n            out[2] = a[8];\n            out[3] = a[12];\n            out[4] = a01;\n            out[6] = a[9];\n            out[7] = a[13];\n            out[8] = a02;\n            out[9] = a12;\n            out[11] = a[14];\n            out[12] = a03;\n            out[13] = a13;\n            out[14] = a23;\n        }\n        else {\n            out[0] = a[0];\n            out[1] = a[4];\n            out[2] = a[8];\n            out[3] = a[12];\n            out[4] = a[1];\n            out[5] = a[5];\n            out[6] = a[9];\n            out[7] = a[13];\n            out[8] = a[2];\n            out[9] = a[6];\n            out[10] = a[10];\n            out[11] = a[14];\n            out[12] = a[3];\n            out[13] = a[7];\n            out[14] = a[11];\n            out[15] = a[15];\n        }\n        return out;\n    }\n    /**\n     * Inverts a {@link Mat4}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static invert(out, a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n        const a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n        const a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n        const a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n        const b00 = a00 * a11 - a01 * a10;\n        const b01 = a00 * a12 - a02 * a10;\n        const b02 = a00 * a13 - a03 * a10;\n        const b03 = a01 * a12 - a02 * a11;\n        const b04 = a01 * a13 - a03 * a11;\n        const b05 = a02 * a13 - a03 * a12;\n        const b06 = a20 * a31 - a21 * a30;\n        const b07 = a20 * a32 - a22 * a30;\n        const b08 = a20 * a33 - a23 * a30;\n        const b09 = a21 * a32 - a22 * a31;\n        const b10 = a21 * a33 - a23 * a31;\n        const b11 = a22 * a33 - a23 * a32;\n        // Calculate the determinant\n        let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n        if (!det) {\n            return null;\n        }\n        det = 1.0 / det;\n        out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n        out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n        out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n        out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n        out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n        out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n        out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n        out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n        out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n        out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n        out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n        out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n        out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n        out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n        out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n        out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n        return out;\n    }\n    /**\n     * Calculates the adjugate of a {@link Mat4}\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the source matrix\n     * @returns `out`\n     */\n    static adjoint(out, a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n        const a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n        const a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n        const a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n        const b00 = a00 * a11 - a01 * a10;\n        const b01 = a00 * a12 - a02 * a10;\n        const b02 = a00 * a13 - a03 * a10;\n        const b03 = a01 * a12 - a02 * a11;\n        const b04 = a01 * a13 - a03 * a11;\n        const b05 = a02 * a13 - a03 * a12;\n        const b06 = a20 * a31 - a21 * a30;\n        const b07 = a20 * a32 - a22 * a30;\n        const b08 = a20 * a33 - a23 * a30;\n        const b09 = a21 * a32 - a22 * a31;\n        const b10 = a21 * a33 - a23 * a31;\n        const b11 = a22 * a33 - a23 * a32;\n        out[0] = a11 * b11 - a12 * b10 + a13 * b09;\n        out[1] = a02 * b10 - a01 * b11 - a03 * b09;\n        out[2] = a31 * b05 - a32 * b04 + a33 * b03;\n        out[3] = a22 * b04 - a21 * b05 - a23 * b03;\n        out[4] = a12 * b08 - a10 * b11 - a13 * b07;\n        out[5] = a00 * b11 - a02 * b08 + a03 * b07;\n        out[6] = a32 * b02 - a30 * b05 - a33 * b01;\n        out[7] = a20 * b05 - a22 * b02 + a23 * b01;\n        out[8] = a10 * b10 - a11 * b08 + a13 * b06;\n        out[9] = a01 * b08 - a00 * b10 - a03 * b06;\n        out[10] = a30 * b04 - a31 * b02 + a33 * b00;\n        out[11] = a21 * b02 - a20 * b04 - a23 * b00;\n        out[12] = a11 * b07 - a10 * b09 - a12 * b06;\n        out[13] = a00 * b09 - a01 * b07 + a02 * b06;\n        out[14] = a31 * b01 - a30 * b03 - a32 * b00;\n        out[15] = a20 * b03 - a21 * b01 + a22 * b00;\n        return out;\n    }\n    /**\n     * Calculates the determinant of a {@link Mat4}\n     * @category Static\n     *\n     * @param a - the source matrix\n     * @returns determinant of a\n     */\n    static determinant(a) {\n        const a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n        const a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n        const a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n        const a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n        const b0 = a00 * a11 - a01 * a10;\n        const b1 = a00 * a12 - a02 * a10;\n        const b2 = a01 * a12 - a02 * a11;\n        const b3 = a20 * a31 - a21 * a30;\n        const b4 = a20 * a32 - a22 * a30;\n        const b5 = a21 * a32 - a22 * a31;\n        const b6 = a00 * b5 - a01 * b4 + a02 * b3;\n        const b7 = a10 * b5 - a11 * b4 + a12 * b3;\n        const b8 = a20 * b2 - a21 * b1 + a22 * b0;\n        const b9 = a30 * b2 - a31 * b1 + a32 * b0;\n        // Calculate the determinant\n        return a13 * b6 - a03 * b7 + a33 * b8 - a23 * b9;\n    }\n    /**\n     * Multiplies two {@link Mat4}s\n     * @category Static\n     *\n     * @param out - The receiving Matrix\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a03 = a[3];\n        const a10 = a[4];\n        const a11 = a[5];\n        const a12 = a[6];\n        const a13 = a[7];\n        const a20 = a[8];\n        const a21 = a[9];\n        const a22 = a[10];\n        const a23 = a[11];\n        const a30 = a[12];\n        const a31 = a[13];\n        const a32 = a[14];\n        const a33 = a[15];\n        // Cache only the current line of the second matrix\n        let b0 = b[0];\n        let b1 = b[1];\n        let b2 = b[2];\n        let b3 = b[3];\n        out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[4];\n        b1 = b[5];\n        b2 = b[6];\n        b3 = b[7];\n        out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[8];\n        b1 = b[9];\n        b2 = b[10];\n        b3 = b[11];\n        out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        b0 = b[12];\n        b1 = b[13];\n        b2 = b[14];\n        b3 = b[15];\n        out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n        out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n        out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n        out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n        return out;\n    }\n    /**\n     * Alias for {@link Mat4.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return out; }\n    /**\n     * Translate a {@link Mat4} by the given vector\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to translate\n     * @param v - vector to translate by\n     * @returns `out`\n     */\n    static translate(out, a, v) {\n        const x = v[0];\n        const y = v[1];\n        const z = v[2];\n        if (a === out) {\n            out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n            out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n            out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n            out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n        }\n        else {\n            const a00 = a[0];\n            const a01 = a[1];\n            const a02 = a[2];\n            const a03 = a[3];\n            const a10 = a[4];\n            const a11 = a[5];\n            const a12 = a[6];\n            const a13 = a[7];\n            const a20 = a[8];\n            const a21 = a[9];\n            const a22 = a[10];\n            const a23 = a[11];\n            out[0] = a00;\n            out[1] = a01;\n            out[2] = a02;\n            out[3] = a03;\n            out[4] = a10;\n            out[5] = a11;\n            out[6] = a12;\n            out[7] = a13;\n            out[8] = a20;\n            out[9] = a21;\n            out[10] = a22;\n            out[11] = a23;\n            out[12] = a00 * x + a10 * y + a20 * z + a[12];\n            out[13] = a01 * x + a11 * y + a21 * z + a[13];\n            out[14] = a02 * x + a12 * y + a22 * z + a[14];\n            out[15] = a03 * x + a13 * y + a23 * z + a[15];\n        }\n        return out;\n    }\n    /**\n     * Scales the {@link Mat4} by the dimensions in the given {@link Vec3} not using vectorization\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param v - the {@link Vec3} to scale the matrix by\n     * @returns `out`\n     **/\n    static scale(out, a, v) {\n        const x = v[0];\n        const y = v[1];\n        const z = v[2];\n        out[0] = a[0] * x;\n        out[1] = a[1] * x;\n        out[2] = a[2] * x;\n        out[3] = a[3] * x;\n        out[4] = a[4] * y;\n        out[5] = a[5] * y;\n        out[6] = a[6] * y;\n        out[7] = a[7] * y;\n        out[8] = a[8] * z;\n        out[9] = a[9] * z;\n        out[10] = a[10] * z;\n        out[11] = a[11] * z;\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n        return out;\n    }\n    /**\n     * Rotates a {@link Mat4} by the given angle around the given axis\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to rotate\n     * @param rad - the angle to rotate the matrix by\n     * @param axis - the axis to rotate around\n     * @returns `out`\n     */\n    static rotate(out, a, rad, axis) {\n        let x = axis[0];\n        let y = axis[1];\n        let z = axis[2];\n        let len = Math.sqrt(x * x + y * y + z * z);\n        if (len < EPSILON) {\n            return null;\n        }\n        len = 1 / len;\n        x *= len;\n        y *= len;\n        z *= len;\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        const t = 1 - c;\n        const a00 = a[0];\n        const a01 = a[1];\n        const a02 = a[2];\n        const a03 = a[3];\n        const a10 = a[4];\n        const a11 = a[5];\n        const a12 = a[6];\n        const a13 = a[7];\n        const a20 = a[8];\n        const a21 = a[9];\n        const a22 = a[10];\n        const a23 = a[11];\n        // Construct the elements of the rotation matrix\n        const b00 = x * x * t + c;\n        const b01 = y * x * t + z * s;\n        const b02 = z * x * t - y * s;\n        const b10 = x * y * t - z * s;\n        const b11 = y * y * t + c;\n        const b12 = z * y * t + x * s;\n        const b20 = x * z * t + y * s;\n        const b21 = y * z * t - x * s;\n        const b22 = z * z * t + c;\n        // Perform rotation-specific matrix multiplication\n        out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n        out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n        out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n        out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n        out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n        out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n        out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n        out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n        out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n        out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n        out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n        out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n        if (a !== out) {\n            // If the source and destination differ, copy the unchanged last row\n            out[12] = a[12];\n            out[13] = a[13];\n            out[14] = a[14];\n            out[15] = a[15];\n        }\n        return out;\n    }\n    /**\n     * Rotates a matrix by the given angle around the X axis\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to rotate\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static rotateX(out, a, rad) {\n        let s = Math.sin(rad);\n        let c = Math.cos(rad);\n        let a10 = a[4];\n        let a11 = a[5];\n        let a12 = a[6];\n        let a13 = a[7];\n        let a20 = a[8];\n        let a21 = a[9];\n        let a22 = a[10];\n        let a23 = a[11];\n        if (a !== out) {\n            // If the source and destination differ, copy the unchanged rows\n            out[0] = a[0];\n            out[1] = a[1];\n            out[2] = a[2];\n            out[3] = a[3];\n            out[12] = a[12];\n            out[13] = a[13];\n            out[14] = a[14];\n            out[15] = a[15];\n        }\n        // Perform axis-specific matrix multiplication\n        out[4] = a10 * c + a20 * s;\n        out[5] = a11 * c + a21 * s;\n        out[6] = a12 * c + a22 * s;\n        out[7] = a13 * c + a23 * s;\n        out[8] = a20 * c - a10 * s;\n        out[9] = a21 * c - a11 * s;\n        out[10] = a22 * c - a12 * s;\n        out[11] = a23 * c - a13 * s;\n        return out;\n    }\n    /**\n     * Rotates a matrix by the given angle around the Y axis\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to rotate\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static rotateY(out, a, rad) {\n        let s = Math.sin(rad);\n        let c = Math.cos(rad);\n        let a00 = a[0];\n        let a01 = a[1];\n        let a02 = a[2];\n        let a03 = a[3];\n        let a20 = a[8];\n        let a21 = a[9];\n        let a22 = a[10];\n        let a23 = a[11];\n        if (a !== out) {\n            // If the source and destination differ, copy the unchanged rows\n            out[4] = a[4];\n            out[5] = a[5];\n            out[6] = a[6];\n            out[7] = a[7];\n            out[12] = a[12];\n            out[13] = a[13];\n            out[14] = a[14];\n            out[15] = a[15];\n        }\n        // Perform axis-specific matrix multiplication\n        out[0] = a00 * c - a20 * s;\n        out[1] = a01 * c - a21 * s;\n        out[2] = a02 * c - a22 * s;\n        out[3] = a03 * c - a23 * s;\n        out[8] = a00 * s + a20 * c;\n        out[9] = a01 * s + a21 * c;\n        out[10] = a02 * s + a22 * c;\n        out[11] = a03 * s + a23 * c;\n        return out;\n    }\n    /**\n     * Rotates a matrix by the given angle around the Z axis\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to rotate\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static rotateZ(out, a, rad) {\n        let s = Math.sin(rad);\n        let c = Math.cos(rad);\n        let a00 = a[0];\n        let a01 = a[1];\n        let a02 = a[2];\n        let a03 = a[3];\n        let a10 = a[4];\n        let a11 = a[5];\n        let a12 = a[6];\n        let a13 = a[7];\n        if (a !== out) {\n            // If the source and destination differ, copy the unchanged last row\n            out[8] = a[8];\n            out[9] = a[9];\n            out[10] = a[10];\n            out[11] = a[11];\n            out[12] = a[12];\n            out[13] = a[13];\n            out[14] = a[14];\n            out[15] = a[15];\n        }\n        // Perform axis-specific matrix multiplication\n        out[0] = a00 * c + a10 * s;\n        out[1] = a01 * c + a11 * s;\n        out[2] = a02 * c + a12 * s;\n        out[3] = a03 * c + a13 * s;\n        out[4] = a10 * c - a00 * s;\n        out[5] = a11 * c - a01 * s;\n        out[6] = a12 * c - a02 * s;\n        out[7] = a13 * c - a03 * s;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat4} from a vector translation\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.translate(dest, dest, vec);\n     * @category Static\n     *\n     * @param out - {@link Mat4} receiving operation result\n     * @param v - Translation vector\n     * @returns `out`\n     */\n    static fromTranslation(out, v) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = 1;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = 1;\n        out[11] = 0;\n        out[12] = v[0];\n        out[13] = v[1];\n        out[14] = v[2];\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat4} from a vector scaling\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.scale(dest, dest, vec);\n     * @category Static\n     *\n     * @param out - {@link Mat4} receiving operation result\n     * @param v - Scaling vector\n     * @returns `out`\n     */\n    static fromScaling(out, v) {\n        out[0] = v[0];\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = v[1];\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = v[2];\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Creates a {@link Mat4} from a given angle around a given axis\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.rotate(dest, dest, rad, axis);\n     * @category Static\n     *\n     * @param out - {@link Mat4} receiving operation result\n     * @param rad - the angle to rotate the matrix by\n     * @param axis - the axis to rotate around\n     * @returns `out`\n     */\n    static fromRotation(out, rad, axis) {\n        let x = axis[0];\n        let y = axis[1];\n        let z = axis[2];\n        let len = Math.sqrt(x * x + y * y + z * z);\n        if (len < EPSILON) {\n            return null;\n        }\n        len = 1 / len;\n        x *= len;\n        y *= len;\n        z *= len;\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        const t = 1 - c;\n        // Perform rotation-specific matrix multiplication\n        out[0] = x * x * t + c;\n        out[1] = y * x * t + z * s;\n        out[2] = z * x * t - y * s;\n        out[3] = 0;\n        out[4] = x * y * t - z * s;\n        out[5] = y * y * t + c;\n        out[6] = z * y * t + x * s;\n        out[7] = 0;\n        out[8] = x * z * t + y * s;\n        out[9] = y * z * t - x * s;\n        out[10] = z * z * t + c;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Creates a matrix from the given angle around the X axis\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.rotateX(dest, dest, rad);\n     * @category Static\n     *\n     * @param out - mat4 receiving operation result\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static fromXRotation(out, rad) {\n        let s = Math.sin(rad);\n        let c = Math.cos(rad);\n        // Perform axis-specific matrix multiplication\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = c;\n        out[6] = s;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = -s;\n        out[10] = c;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Creates a matrix from the given angle around the Y axis\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.rotateY(dest, dest, rad);\n     * @category Static\n     *\n     * @param out - mat4 receiving operation result\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static fromYRotation(out, rad) {\n        let s = Math.sin(rad);\n        let c = Math.cos(rad);\n        // Perform axis-specific matrix multiplication\n        out[0] = c;\n        out[1] = 0;\n        out[2] = -s;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = 1;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = s;\n        out[9] = 0;\n        out[10] = c;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Creates a matrix from the given angle around the Z axis\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.rotateZ(dest, dest, rad);\n     * @category Static\n     *\n     * @param out - mat4 receiving operation result\n     * @param rad - the angle to rotate the matrix by\n     * @returns `out`\n     */\n    static fromZRotation(out, rad) {\n        const s = Math.sin(rad);\n        const c = Math.cos(rad);\n        // Perform axis-specific matrix multiplication\n        out[0] = c;\n        out[1] = s;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = -s;\n        out[5] = c;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = 1;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Creates a matrix from a quaternion rotation and vector translation\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.translate(dest, vec);\n     *     let quatMat = mat4.create();\n     *     quat4.toMat4(quat, quatMat);\n     *     mat4.multiply(dest, quatMat);\n     * @category Static\n     *\n     * @param out - mat4 receiving operation result\n     * @param q - Rotation quaternion\n     * @param v - Translation vector\n     * @returns `out`\n     */\n    static fromRotationTranslation(out, q, v) {\n        // Quaternion math\n        const x = q[0];\n        const y = q[1];\n        const z = q[2];\n        const w = q[3];\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const xy = x * y2;\n        const xz = x * z2;\n        const yy = y * y2;\n        const yz = y * z2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n        out[0] = 1 - (yy + zz);\n        out[1] = xy + wz;\n        out[2] = xz - wy;\n        out[3] = 0;\n        out[4] = xy - wz;\n        out[5] = 1 - (xx + zz);\n        out[6] = yz + wx;\n        out[7] = 0;\n        out[8] = xz + wy;\n        out[9] = yz - wx;\n        out[10] = 1 - (xx + yy);\n        out[11] = 0;\n        out[12] = v[0];\n        out[13] = v[1];\n        out[14] = v[2];\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Sets a {@link Mat4} from a {@link Quat2}.\n     * @category Static\n     *\n     * @param out - Matrix\n     * @param a - Dual Quaternion\n     * @returns `out`\n     */\n    static fromQuat2(out, a) {\n        let translation = [0, 0, 0];\n        const bx = -a[0];\n        const by = -a[1];\n        const bz = -a[2];\n        const bw = a[3];\n        const ax = a[4];\n        const ay = a[5];\n        const az = a[6];\n        const aw = a[7];\n        let magnitude = bx * bx + by * by + bz * bz + bw * bw;\n        //Only scale if it makes sense\n        if (magnitude > 0) {\n            translation[0] = ((ax * bw + aw * bx + ay * bz - az * by) * 2) / magnitude;\n            translation[1] = ((ay * bw + aw * by + az * bx - ax * bz) * 2) / magnitude;\n            translation[2] = ((az * bw + aw * bz + ax * by - ay * bx) * 2) / magnitude;\n        }\n        else {\n            translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n            translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n            translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n        }\n        Mat4.fromRotationTranslation(out, a, translation);\n        return out;\n    }\n    /**\n     * Returns the translation vector component of a transformation\n     * matrix. If a matrix is built with fromRotationTranslation,\n     * the returned vector will be the same as the translation vector\n     * originally supplied.\n     * @category Static\n     *\n     * @param  {vec3} out Vector to receive translation component\n     * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n     * @return {vec3} out\n     */\n    static getTranslation(out, mat) {\n        out[0] = mat[12];\n        out[1] = mat[13];\n        out[2] = mat[14];\n        return out;\n    }\n    /**\n     * Returns the scaling factor component of a transformation\n     * matrix. If a matrix is built with fromRotationTranslationScale\n     * with a normalized Quaternion paramter, the returned vector will be\n     * the same as the scaling vector\n     * originally supplied.\n     * @category Static\n     *\n     * @param  {vec3} out Vector to receive scaling factor component\n     * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n     * @return {vec3} out\n     */\n    static getScaling(out, mat) {\n        const m11 = mat[0];\n        const m12 = mat[1];\n        const m13 = mat[2];\n        const m21 = mat[4];\n        const m22 = mat[5];\n        const m23 = mat[6];\n        const m31 = mat[8];\n        const m32 = mat[9];\n        const m33 = mat[10];\n        out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n        out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n        out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n        return out;\n    }\n    /**\n     * Returns a quaternion representing the rotational component\n     * of a transformation matrix. If a matrix is built with\n     * fromRotationTranslation, the returned quaternion will be the\n     * same as the quaternion originally supplied.\n     * @category Static\n     *\n     * @param out - Quaternion to receive the rotation component\n     * @param mat - Matrix to be decomposed (input)\n     * @return `out`\n     */\n    static getRotation(out, mat) {\n        Mat4.getScaling(tmpVec3$1, mat);\n        const is1 = 1 / tmpVec3$1[0];\n        const is2 = 1 / tmpVec3$1[1];\n        const is3 = 1 / tmpVec3$1[2];\n        const sm11 = mat[0] * is1;\n        const sm12 = mat[1] * is2;\n        const sm13 = mat[2] * is3;\n        const sm21 = mat[4] * is1;\n        const sm22 = mat[5] * is2;\n        const sm23 = mat[6] * is3;\n        const sm31 = mat[8] * is1;\n        const sm32 = mat[9] * is2;\n        const sm33 = mat[10] * is3;\n        const trace = sm11 + sm22 + sm33;\n        let S = 0;\n        if (trace > 0) {\n            S = Math.sqrt(trace + 1.0) * 2;\n            out[3] = 0.25 * S;\n            out[0] = (sm23 - sm32) / S;\n            out[1] = (sm31 - sm13) / S;\n            out[2] = (sm12 - sm21) / S;\n        }\n        else if (sm11 > sm22 && sm11 > sm33) {\n            S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n            out[3] = (sm23 - sm32) / S;\n            out[0] = 0.25 * S;\n            out[1] = (sm12 + sm21) / S;\n            out[2] = (sm31 + sm13) / S;\n        }\n        else if (sm22 > sm33) {\n            S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n            out[3] = (sm31 - sm13) / S;\n            out[0] = (sm12 + sm21) / S;\n            out[1] = 0.25 * S;\n            out[2] = (sm23 + sm32) / S;\n        }\n        else {\n            S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n            out[3] = (sm12 - sm21) / S;\n            out[0] = (sm31 + sm13) / S;\n            out[1] = (sm23 + sm32) / S;\n            out[2] = 0.25 * S;\n        }\n        return out;\n    }\n    /**\n     * Decomposes a transformation matrix into its rotation, translation\n     * and scale components. Returns only the rotation component\n     * @category Static\n     *\n     * @param out_r - Quaternion to receive the rotation component\n     * @param out_t - Vector to receive the translation vector\n     * @param out_s - Vector to receive the scaling factor\n     * @param mat - Matrix to be decomposed (input)\n     * @returns `out_r`\n     */\n    static decompose(out_r, out_t, out_s, mat) {\n        out_t[0] = mat[12];\n        out_t[1] = mat[13];\n        out_t[2] = mat[14];\n        const m11 = mat[0];\n        const m12 = mat[1];\n        const m13 = mat[2];\n        const m21 = mat[4];\n        const m22 = mat[5];\n        const m23 = mat[6];\n        const m31 = mat[8];\n        const m32 = mat[9];\n        const m33 = mat[10];\n        out_s[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n        out_s[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n        out_s[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n        const is1 = 1 / out_s[0];\n        const is2 = 1 / out_s[1];\n        const is3 = 1 / out_s[2];\n        const sm11 = m11 * is1;\n        const sm12 = m12 * is2;\n        const sm13 = m13 * is3;\n        const sm21 = m21 * is1;\n        const sm22 = m22 * is2;\n        const sm23 = m23 * is3;\n        const sm31 = m31 * is1;\n        const sm32 = m32 * is2;\n        const sm33 = m33 * is3;\n        const trace = sm11 + sm22 + sm33;\n        let S = 0;\n        if (trace > 0) {\n            S = Math.sqrt(trace + 1.0) * 2;\n            out_r[3] = 0.25 * S;\n            out_r[0] = (sm23 - sm32) / S;\n            out_r[1] = (sm31 - sm13) / S;\n            out_r[2] = (sm12 - sm21) / S;\n        }\n        else if (sm11 > sm22 && sm11 > sm33) {\n            S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n            out_r[3] = (sm23 - sm32) / S;\n            out_r[0] = 0.25 * S;\n            out_r[1] = (sm12 + sm21) / S;\n            out_r[2] = (sm31 + sm13) / S;\n        }\n        else if (sm22 > sm33) {\n            S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n            out_r[3] = (sm31 - sm13) / S;\n            out_r[0] = (sm12 + sm21) / S;\n            out_r[1] = 0.25 * S;\n            out_r[2] = (sm23 + sm32) / S;\n        }\n        else {\n            S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n            out_r[3] = (sm12 - sm21) / S;\n            out_r[0] = (sm31 + sm13) / S;\n            out_r[1] = (sm23 + sm32) / S;\n            out_r[2] = 0.25 * S;\n        }\n        return out_r;\n    }\n    /**\n     * Creates a matrix from a quaternion rotation, vector translation and vector scale\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.translate(dest, vec);\n     *     let quatMat = mat4.create();\n     *     quat4.toMat4(quat, quatMat);\n     *     mat4.multiply(dest, quatMat);\n     *     mat4.scale(dest, scale);\n     * @category Static\n     *\n     * @param out - mat4 receiving operation result\n     * @param q - Rotation quaternion\n     * @param v - Translation vector\n     * @param s - Scaling vector\n     * @returns `out`\n     */\n    static fromRotationTranslationScale(out, q, v, s) {\n        // Quaternion math\n        const x = q[0];\n        const y = q[1];\n        const z = q[2];\n        const w = q[3];\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const xy = x * y2;\n        const xz = x * z2;\n        const yy = y * y2;\n        const yz = y * z2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n        const sx = s[0];\n        const sy = s[1];\n        const sz = s[2];\n        out[0] = (1 - (yy + zz)) * sx;\n        out[1] = (xy + wz) * sx;\n        out[2] = (xz - wy) * sx;\n        out[3] = 0;\n        out[4] = (xy - wz) * sy;\n        out[5] = (1 - (xx + zz)) * sy;\n        out[6] = (yz + wx) * sy;\n        out[7] = 0;\n        out[8] = (xz + wy) * sz;\n        out[9] = (yz - wx) * sz;\n        out[10] = (1 - (xx + yy)) * sz;\n        out[11] = 0;\n        out[12] = v[0];\n        out[13] = v[1];\n        out[14] = v[2];\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n     * This is equivalent to (but much faster than):\n     *\n     *     mat4.identity(dest);\n     *     mat4.translate(dest, vec);\n     *     mat4.translate(dest, origin);\n     *     let quatMat = mat4.create();\n     *     quat4.toMat4(quat, quatMat);\n     *     mat4.multiply(dest, quatMat);\n     *     mat4.scale(dest, scale)\n     *     mat4.translate(dest, negativeOrigin);\n     * @category Static\n     *\n     * @param out - mat4 receiving operation result\n     * @param q - Rotation quaternion\n     * @param v - Translation vector\n     * @param s - Scaling vector\n     * @param o - The origin vector around which to scale and rotate\n     * @returns `out`\n     */\n    static fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n        // Quaternion math\n        const x = q[0];\n        const y = q[1];\n        const z = q[2];\n        const w = q[3];\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const xy = x * y2;\n        const xz = x * z2;\n        const yy = y * y2;\n        const yz = y * z2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n        const sx = s[0];\n        const sy = s[1];\n        const sz = s[2];\n        const ox = o[0];\n        const oy = o[1];\n        const oz = o[2];\n        const out0 = (1 - (yy + zz)) * sx;\n        const out1 = (xy + wz) * sx;\n        const out2 = (xz - wy) * sx;\n        const out4 = (xy - wz) * sy;\n        const out5 = (1 - (xx + zz)) * sy;\n        const out6 = (yz + wx) * sy;\n        const out8 = (xz + wy) * sz;\n        const out9 = (yz - wx) * sz;\n        const out10 = (1 - (xx + yy)) * sz;\n        out[0] = out0;\n        out[1] = out1;\n        out[2] = out2;\n        out[3] = 0;\n        out[4] = out4;\n        out[5] = out5;\n        out[6] = out6;\n        out[7] = 0;\n        out[8] = out8;\n        out[9] = out9;\n        out[10] = out10;\n        out[11] = 0;\n        out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n        out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n        out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Calculates a 4x4 matrix from the given quaternion\n     * @category Static\n     *\n     * @param out - mat4 receiving operation result\n     * @param q - Quaternion to create matrix from\n     * @returns `out`\n     */\n    static fromQuat(out, q) {\n        const x = q[0];\n        const y = q[1];\n        const z = q[2];\n        const w = q[3];\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const yx = y * x2;\n        const yy = y * y2;\n        const zx = z * x2;\n        const zy = z * y2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n        out[0] = 1 - yy - zz;\n        out[1] = yx + wz;\n        out[2] = zx - wy;\n        out[3] = 0;\n        out[4] = yx - wz;\n        out[5] = 1 - xx - zz;\n        out[6] = zy + wx;\n        out[7] = 0;\n        out[8] = zx + wy;\n        out[9] = zy - wx;\n        out[10] = 1 - xx - yy;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Generates a frustum matrix with the given bounds\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param left - Left bound of the frustum\n     * @param right - Right bound of the frustum\n     * @param bottom - Bottom bound of the frustum\n     * @param top - Top bound of the frustum\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum\n     * @returns `out`\n     */\n    static frustum(out, left, right, bottom, top, near, far) {\n        const rl = 1 / (right - left);\n        const tb = 1 / (top - bottom);\n        const nf = 1 / (near - far);\n        out[0] = near * 2 * rl;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = near * 2 * tb;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = (right + left) * rl;\n        out[9] = (top + bottom) * tb;\n        out[10] = (far + near) * nf;\n        out[11] = -1;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = far * near * 2 * nf;\n        out[15] = 0;\n        return out;\n    }\n    /**\n     * Generates a perspective projection matrix with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n     * which matches WebGL/OpenGL's clip volume.\n     * Passing null/undefined/no value for far will generate infinite projection matrix.\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param fovy - Vertical field of view in radians\n     * @param aspect - Aspect ratio. typically viewport width/height\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum, can be null or Infinity\n     * @returns `out`\n     */\n    static perspectiveNO(out, fovy, aspect, near, far) {\n        const f = 1.0 / Math.tan(fovy / 2);\n        out[0] = f / aspect;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = f;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[11] = -1;\n        out[12] = 0;\n        out[13] = 0;\n        out[15] = 0;\n        if (far != null && far !== Infinity) {\n            const nf = 1 / (near - far);\n            out[10] = (far + near) * nf;\n            out[14] = 2 * far * near * nf;\n        }\n        else {\n            out[10] = -1;\n            out[14] = -2 * near;\n        }\n        return out;\n    }\n    /**\n     * Alias for {@link Mat4.perspectiveNO}\n     * @category Static\n     * @deprecated Use {@link Mat4.perspectiveNO} or {@link Mat4.perspectiveZO} explicitly\n     */\n    static perspective(out, fovy, aspect, near, far) { return out; }\n    /**\n     * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n     * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n     * Passing null/undefined/no value for far will generate infinite projection matrix.\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param fovy - Vertical field of view in radians\n     * @param aspect - Aspect ratio. typically viewport width/height\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum, can be null or Infinity\n     * @returns `out`\n     */\n    static perspectiveZO(out, fovy, aspect, near, far) {\n        const f = 1.0 / Math.tan(fovy / 2);\n        out[0] = f / aspect;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = f;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[11] = -1;\n        out[12] = 0;\n        out[13] = 0;\n        out[15] = 0;\n        if (far != null && far !== Infinity) {\n            const nf = 1 / (near - far);\n            out[10] = far * nf;\n            out[14] = far * near * nf;\n        }\n        else {\n            out[10] = -1;\n            out[14] = -near;\n        }\n        return out;\n    }\n    /**\n     * Generates a perspective projection matrix with the given field of view.\n     * This is primarily useful for generating projection matrices to be used\n     * with the still experiemental WebVR API.\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param fov - Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum\n     * @returns `out`\n     * @deprecated\n     */\n    static perspectiveFromFieldOfView(out, fov, near, far) {\n        const upTan = Math.tan((fov.upDegrees * Math.PI) / 180.0);\n        const downTan = Math.tan((fov.downDegrees * Math.PI) / 180.0);\n        const leftTan = Math.tan((fov.leftDegrees * Math.PI) / 180.0);\n        const rightTan = Math.tan((fov.rightDegrees * Math.PI) / 180.0);\n        const xScale = 2.0 / (leftTan + rightTan);\n        const yScale = 2.0 / (upTan + downTan);\n        out[0] = xScale;\n        out[1] = 0.0;\n        out[2] = 0.0;\n        out[3] = 0.0;\n        out[4] = 0.0;\n        out[5] = yScale;\n        out[6] = 0.0;\n        out[7] = 0.0;\n        out[8] = -((leftTan - rightTan) * xScale * 0.5);\n        out[9] = (upTan - downTan) * yScale * 0.5;\n        out[10] = far / (near - far);\n        out[11] = -1.0;\n        out[12] = 0.0;\n        out[13] = 0.0;\n        out[14] = (far * near) / (near - far);\n        out[15] = 0.0;\n        return out;\n    }\n    /**\n     * Generates a orthogonal projection matrix with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n     * which matches WebGL/OpenGL's clip volume.\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param left - Left bound of the frustum\n     * @param right - Right bound of the frustum\n     * @param bottom - Bottom bound of the frustum\n     * @param top - Top bound of the frustum\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum\n     * @returns `out`\n     */\n    static orthoNO(out, left, right, bottom, top, near, far) {\n        const lr = 1 / (left - right);\n        const bt = 1 / (bottom - top);\n        const nf = 1 / (near - far);\n        out[0] = -2 * lr;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = -2 * bt;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = 2 * nf;\n        out[11] = 0;\n        out[12] = (left + right) * lr;\n        out[13] = (top + bottom) * bt;\n        out[14] = (far + near) * nf;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Alias for {@link Mat4.orthoNO}\n     * @category Static\n     * @deprecated Use {@link Mat4.orthoNO} or {@link Mat4.orthoZO} explicitly\n     */\n    static ortho(out, left, right, bottom, top, near, far) { return out; }\n    /**\n     * Generates a orthogonal projection matrix with the given bounds.\n     * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n     * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param left - Left bound of the frustum\n     * @param right - Right bound of the frustum\n     * @param bottom - Bottom bound of the frustum\n     * @param top - Top bound of the frustum\n     * @param near - Near bound of the frustum\n     * @param far - Far bound of the frustum\n     * @returns `out`\n     */\n    static orthoZO(out, left, right, bottom, top, near, far) {\n        const lr = 1 / (left - right);\n        const bt = 1 / (bottom - top);\n        const nf = 1 / (near - far);\n        out[0] = -2 * lr;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[5] = -2 * bt;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[10] = nf;\n        out[11] = 0;\n        out[12] = (left + right) * lr;\n        out[13] = (top + bottom) * bt;\n        out[14] = near * nf;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Generates a look-at matrix with the given eye position, focal point, and up axis.\n     * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param eye - Position of the viewer\n     * @param center - Point the viewer is looking at\n     * @param up - vec3 pointing up\n     * @returns `out`\n     */\n    static lookAt(out, eye, center, up) {\n        const eyex = eye[0];\n        const eyey = eye[1];\n        const eyez = eye[2];\n        const upx = up[0];\n        const upy = up[1];\n        const upz = up[2];\n        const centerx = center[0];\n        const centery = center[1];\n        const centerz = center[2];\n        if (Math.abs(eyex - centerx) < EPSILON &&\n            Math.abs(eyey - centery) < EPSILON &&\n            Math.abs(eyez - centerz) < EPSILON) {\n            return Mat4.identity(out);\n        }\n        let z0 = eyex - centerx;\n        let z1 = eyey - centery;\n        let z2 = eyez - centerz;\n        let len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n        let x0 = upy * z2 - upz * z1;\n        let x1 = upz * z0 - upx * z2;\n        let x2 = upx * z1 - upy * z0;\n        len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n        if (!len) {\n            x0 = 0;\n            x1 = 0;\n            x2 = 0;\n        }\n        else {\n            len = 1 / len;\n            x0 *= len;\n            x1 *= len;\n            x2 *= len;\n        }\n        let y0 = z1 * x2 - z2 * x1;\n        let y1 = z2 * x0 - z0 * x2;\n        let y2 = z0 * x1 - z1 * x0;\n        len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n        if (!len) {\n            y0 = 0;\n            y1 = 0;\n            y2 = 0;\n        }\n        else {\n            len = 1 / len;\n            y0 *= len;\n            y1 *= len;\n            y2 *= len;\n        }\n        out[0] = x0;\n        out[1] = y0;\n        out[2] = z0;\n        out[3] = 0;\n        out[4] = x1;\n        out[5] = y1;\n        out[6] = z1;\n        out[7] = 0;\n        out[8] = x2;\n        out[9] = y2;\n        out[10] = z2;\n        out[11] = 0;\n        out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n        out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n        out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Generates a matrix that makes something look at something else.\n     * @category Static\n     *\n     * @param out - mat4 frustum matrix will be written into\n     * @param eye - Position of the viewer\n     * @param target - Point the viewer is looking at\n     * @param up - vec3 pointing up\n     * @returns `out`\n     */\n    static targetTo(out, eye, target, up) {\n        const eyex = eye[0];\n        const eyey = eye[1];\n        const eyez = eye[2];\n        const upx = up[0];\n        const upy = up[1];\n        const upz = up[2];\n        let z0 = eyex - target[0];\n        let z1 = eyey - target[1];\n        let z2 = eyez - target[2];\n        let len = z0 * z0 + z1 * z1 + z2 * z2;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n            z0 *= len;\n            z1 *= len;\n            z2 *= len;\n        }\n        let x0 = upy * z2 - upz * z1;\n        let x1 = upz * z0 - upx * z2;\n        let x2 = upx * z1 - upy * z0;\n        len = x0 * x0 + x1 * x1 + x2 * x2;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n            x0 *= len;\n            x1 *= len;\n            x2 *= len;\n        }\n        out[0] = x0;\n        out[1] = x1;\n        out[2] = x2;\n        out[3] = 0;\n        out[4] = z1 * x2 - z2 * x1;\n        out[5] = z2 * x0 - z0 * x2;\n        out[6] = z0 * x1 - z1 * x0;\n        out[7] = 0;\n        out[8] = z0;\n        out[9] = z1;\n        out[10] = z2;\n        out[11] = 0;\n        out[12] = eyex;\n        out[13] = eyey;\n        out[14] = eyez;\n        out[15] = 1;\n        return out;\n    }\n    /**\n     * Returns Frobenius norm of a {@link Mat4}\n     * @category Static\n     *\n     * @param a - the matrix to calculate Frobenius norm of\n     * @returns Frobenius norm\n     */\n    static frob(a) {\n        return Math.sqrt(a[0] * a[0] +\n            a[1] * a[1] +\n            a[2] * a[2] +\n            a[3] * a[3] +\n            a[4] * a[4] +\n            a[5] * a[5] +\n            a[6] * a[6] +\n            a[7] * a[7] +\n            a[8] * a[8] +\n            a[9] * a[9] +\n            a[10] * a[10] +\n            a[11] * a[11] +\n            a[12] * a[12] +\n            a[13] * a[13] +\n            a[14] * a[14] +\n            a[15] * a[15]);\n    }\n    /**\n     * Adds two {@link Mat4}'s\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        out[4] = a[4] + b[4];\n        out[5] = a[5] + b[5];\n        out[6] = a[6] + b[6];\n        out[7] = a[7] + b[7];\n        out[8] = a[8] + b[8];\n        out[9] = a[9] + b[9];\n        out[10] = a[10] + b[10];\n        out[11] = a[11] + b[11];\n        out[12] = a[12] + b[12];\n        out[13] = a[13] + b[13];\n        out[14] = a[14] + b[14];\n        out[15] = a[15] + b[15];\n        return out;\n    }\n    /**\n     * Subtracts matrix b from matrix a\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static subtract(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        out[3] = a[3] - b[3];\n        out[4] = a[4] - b[4];\n        out[5] = a[5] - b[5];\n        out[6] = a[6] - b[6];\n        out[7] = a[7] - b[7];\n        out[8] = a[8] - b[8];\n        out[9] = a[9] - b[9];\n        out[10] = a[10] - b[10];\n        out[11] = a[11] - b[11];\n        out[12] = a[12] - b[12];\n        out[13] = a[13] - b[13];\n        out[14] = a[14] - b[14];\n        out[15] = a[15] - b[15];\n        return out;\n    }\n    /**\n     * Alias for {@link Mat4.subtract}\n     * @category Static\n     */\n    static sub(out, a, b) { return out; }\n    /**\n     * Multiply each element of the matrix by a scalar.\n     * @category Static\n     *\n     * @param out - the receiving matrix\n     * @param a - the matrix to scale\n     * @param b - amount to scale the matrix's elements by\n     * @returns `out`\n     */\n    static multiplyScalar(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        out[2] = a[2] * b;\n        out[3] = a[3] * b;\n        out[4] = a[4] * b;\n        out[5] = a[5] * b;\n        out[6] = a[6] * b;\n        out[7] = a[7] * b;\n        out[8] = a[8] * b;\n        out[9] = a[9] * b;\n        out[10] = a[10] * b;\n        out[11] = a[11] * b;\n        out[12] = a[12] * b;\n        out[13] = a[13] * b;\n        out[14] = a[14] * b;\n        out[15] = a[15] * b;\n        return out;\n    }\n    /**\n     * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param scale - the amount to scale b's elements by before adding\n     * @returns `out`\n     */\n    static multiplyScalarAndAdd(out, a, b, scale) {\n        out[0] = a[0] + b[0] * scale;\n        out[1] = a[1] + b[1] * scale;\n        out[2] = a[2] + b[2] * scale;\n        out[3] = a[3] + b[3] * scale;\n        out[4] = a[4] + b[4] * scale;\n        out[5] = a[5] + b[5] * scale;\n        out[6] = a[6] + b[6] * scale;\n        out[7] = a[7] + b[7] * scale;\n        out[8] = a[8] + b[8] * scale;\n        out[9] = a[9] + b[9] * scale;\n        out[10] = a[10] + b[10] * scale;\n        out[11] = a[11] + b[11] * scale;\n        out[12] = a[12] + b[12] * scale;\n        out[13] = a[13] + b[13] * scale;\n        out[14] = a[14] + b[14] * scale;\n        out[15] = a[15] + b[15] * scale;\n        return out;\n    }\n    /**\n     * Returns whether or not two {@link Mat4}s have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static exactEquals(a, b) {\n        return (a[0] === b[0] &&\n            a[1] === b[1] &&\n            a[2] === b[2] &&\n            a[3] === b[3] &&\n            a[4] === b[4] &&\n            a[5] === b[5] &&\n            a[6] === b[6] &&\n            a[7] === b[7] &&\n            a[8] === b[8] &&\n            a[9] === b[9] &&\n            a[10] === b[10] &&\n            a[11] === b[11] &&\n            a[12] === b[12] &&\n            a[13] === b[13] &&\n            a[14] === b[14] &&\n            a[15] === b[15]);\n    }\n    /**\n     * Returns whether or not two {@link Mat4}s have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first matrix.\n     * @param b - The second matrix.\n     * @returns True if the matrices are equal, false otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const a6 = a[6];\n        const a7 = a[7];\n        const a8 = a[8];\n        const a9 = a[9];\n        const a10 = a[10];\n        const a11 = a[11];\n        const a12 = a[12];\n        const a13 = a[13];\n        const a14 = a[14];\n        const a15 = a[15];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        const b4 = b[4];\n        const b5 = b[5];\n        const b6 = b[6];\n        const b7 = b[7];\n        const b8 = b[8];\n        const b9 = b[9];\n        const b10 = b[10];\n        const b11 = b[11];\n        const b12 = b[12];\n        const b13 = b[13];\n        const b14 = b[14];\n        const b15 = b[15];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) &&\n            Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) &&\n            Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) &&\n            Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) &&\n            Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) &&\n            Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) &&\n            Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) &&\n            Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) &&\n            Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) &&\n            Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) &&\n            Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) &&\n            Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) &&\n            Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15)));\n    }\n    /**\n     * Returns a string representation of a {@link Mat4}\n     * @category Static\n     *\n     * @param a - matrix to represent as a string\n     * @returns string representation of the matrix\n     */\n    static str(a) {\n        return `Mat4(${a.join(', ')})`;\n    }\n}\n// Temporary variables to prevent repeated allocations in the algorithms above.\nconst tmpVec3$1 = [0, 0, 0];\n// Instance method alias assignments\nMat4.prototype.mul = Mat4.prototype.multiply;\n// Static method alias assignments\nMat4.sub = Mat4.subtract;\nMat4.mul = Mat4.multiply;\nMat4.perspective = Mat4.perspectiveNO;\nMat4.ortho = Mat4.orthoNO;\n\n/**\n * 3 Dimensional Vector\n */\nclass Vec3 extends Float32Array {\n    /**\n    * The number of bytes in a {@link Vec3}.\n    */\n    static BYTE_LENGTH = 3 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n    * Create a {@link Vec3}.\n    */\n    constructor(...values) {\n        switch (values.length) {\n            case 3:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 3);\n                break;\n            case 1: {\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([v, v, v]);\n                }\n                else {\n                    super(v, 0, 3);\n                }\n                break;\n            }\n            default:\n                super(3);\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    // Getters and setters to make component access read better.\n    // These are likely to be a little bit slower than direct array access.\n    /**\n     * The x component of the vector. Equivalent to `this[0];`\n     * @category Vector components\n     */\n    get x() { return this[0]; }\n    set x(value) { this[0] = value; }\n    /**\n     * The y component of the vector. Equivalent to `this[1];`\n     * @category Vector components\n     */\n    get y() { return this[1]; }\n    set y(value) { this[1] = value; }\n    /**\n     * The z component of the vector. Equivalent to `this[2];`\n     * @category Vector components\n     */\n    get z() { return this[2]; }\n    set z(value) { this[2] = value; }\n    // Alternate set of getters and setters in case this is being used to define\n    // a color.\n    /**\n     * The r component of the vector. Equivalent to `this[0];`\n     * @category Color components\n     */\n    get r() { return this[0]; }\n    set r(value) { this[0] = value; }\n    /**\n     * The g component of the vector. Equivalent to `this[1];`\n     * @category Color components\n     */\n    get g() { return this[1]; }\n    set g(value) { this[1] = value; }\n    /**\n     * The b component of the vector. Equivalent to `this[2];`\n     * @category Color components\n     */\n    get b() { return this[2]; }\n    set b(value) { this[2] = value; }\n    /**\n     * The magnitude (length) of this.\n     * Equivalent to `Vec3.magnitude(this);`\n     *\n     * Magnitude is used because the `length` attribute is already defined by\n     * `Float32Array` to mean the number of elements in the array.\n     */\n    get magnitude() {\n        const x = this[0];\n        const y = this[1];\n        const z = this[2];\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    /**\n     * Alias for {@link Vec3.magnitude}\n     */\n    get mag() { return this.magnitude; }\n    /**\n     * The squared magnitude (length) of `this`.\n     * Equivalent to `Vec3.squaredMagnitude(this);`\n     */\n    get squaredMagnitude() {\n        const x = this[0];\n        const y = this[1];\n        const z = this[2];\n        return x * x + y * y + z * z;\n    }\n    /**\n     * Alias for {@link Vec3.squaredMagnitude}\n     */\n    get sqrMag() { return this.squaredMagnitude; }\n    /**\n     * A string representation of `this`\n     * Equivalent to `Vec3.str(this);`\n     */\n    get str() {\n        return Vec3.str(this);\n    }\n    //===================\n    // Instances methods\n    //===================\n    /**\n     * Copy the values from another {@link Vec3} into `this`.\n     *\n     * @param a the source vector\n     * @returns `this`\n     */\n    copy(a) {\n        this.set(a);\n        return this;\n    }\n    /**\n     * Adds a {@link Vec3} to `this`.\n     * Equivalent to `Vec3.add(this, this, b);`\n     *\n     * @param b - The vector to add to `this`\n     * @returns `this`\n     */\n    add(b) {\n        this[0] += b[0];\n        this[1] += b[1];\n        this[2] += b[2];\n        return this;\n    }\n    /**\n     * Subtracts a {@link Vec3} from `this`.\n     * Equivalent to `Vec3.subtract(this, this, b);`\n     *\n     * @param b - The vector to subtract from `this`\n     * @returns `this`\n     */\n    subtract(b) {\n        this[0] -= b[0];\n        this[1] -= b[1];\n        this[2] -= b[2];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec3.subtract}\n     */\n    sub(b) { return this; }\n    /**\n     * Multiplies `this` by a {@link Vec3}.\n     * Equivalent to `Vec3.multiply(this, this, b);`\n     *\n     * @param b - The vector to multiply `this` by\n     * @returns `this`\n     */\n    multiply(b) {\n        this[0] *= b[0];\n        this[1] *= b[1];\n        this[2] *= b[2];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec3.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Divides `this` by a {@link Vec3}.\n     * Equivalent to `Vec3.divide(this, this, b);`\n     *\n     * @param b - The vector to divide `this` by\n     * @returns `this`\n     */\n    divide(b) {\n        this[0] /= b[0];\n        this[1] /= b[1];\n        this[2] /= b[2];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec3.divide}\n     */\n    div(b) { return this; }\n    /**\n     * Scales `this` by a scalar number.\n     * Equivalent to `Vec3.scale(this, this, b);`\n     *\n     * @param b - Amount to scale `this` by\n     * @returns `this`\n     */\n    scale(b) {\n        this[0] *= b;\n        this[1] *= b;\n        this[2] *= b;\n        return this;\n    }\n    /**\n     * Calculates `this` scaled by a scalar value then adds the result to `this`.\n     * Equivalent to `Vec3.scaleAndAdd(this, this, b, scale);`\n     *\n     * @param b - The vector to add to `this`\n     * @param scale - The amount to scale `b` by before adding\n     * @returns `this`\n     */\n    scaleAndAdd(b, scale) {\n        this[0] += b[0] * scale;\n        this[1] += b[1] * scale;\n        this[2] += b[2] * scale;\n        return this;\n    }\n    /**\n     * Calculates the euclidian distance between another {@link Vec3} and `this`.\n     * Equivalent to `Vec3.distance(this, b);`\n     *\n     * @param b - The vector to calculate the distance to\n     * @returns Distance between `this` and `b`\n     */\n    distance(b) {\n        return Vec3.distance(this, b);\n    }\n    /**\n     * Alias for {@link Vec3.distance}\n     */\n    dist(b) { return 0; }\n    /**\n     * Calculates the squared euclidian distance between another {@link Vec3} and `this`.\n     * Equivalent to `Vec3.squaredDistance(this, b);`\n     *\n     * @param b The vector to calculate the squared distance to\n     * @returns Squared distance between `this` and `b`\n     */\n    squaredDistance(b) {\n        return Vec3.squaredDistance(this, b);\n    }\n    /**\n     * Alias for {@link Vec3.squaredDistance}\n     */\n    sqrDist(b) { return 0; }\n    /**\n     * Negates the components of `this`.\n     * Equivalent to `Vec3.negate(this, this);`\n     *\n     * @returns `this`\n     */\n    negate() {\n        this[0] *= -1;\n        this[1] *= -1;\n        this[2] *= -1;\n        return this;\n    }\n    /**\n     * Inverts the components of `this`.\n     * Equivalent to `Vec3.inverse(this, this);`\n     *\n     * @returns `this`\n     */\n    invert() {\n        this[0] = 1.0 / this[0];\n        this[1] = 1.0 / this[1];\n        this[2] = 1.0 / this[2];\n        return this;\n    }\n    /**\n     * Calculates the dot product of this and another {@link Vec3}.\n     * Equivalent to `Vec3.dot(this, b);`\n     *\n     * @param b - The second operand\n     * @returns Dot product of `this` and `b`\n     */\n    dot(b) {\n        return this[0] * b[0] + this[1] * b[1] + this[2] * b[2];\n    }\n    /**\n     * Normalize `this`.\n     * Equivalent to `Vec3.normalize(this, this);`\n     *\n     * @returns `this`\n     */\n    normalize() {\n        return Vec3.normalize(this, this);\n    }\n    //================\n    // Static methods\n    //================\n    /**\n     * Creates a new, empty vec3\n     * @category Static\n     *\n     * @returns a new 3D vector\n     */\n    static create() {\n        return new Vec3();\n    }\n    /**\n     * Creates a new vec3 initialized with values from an existing vector\n     * @category Static\n     *\n     * @param a - vector to clone\n     * @returns a new 3D vector\n     */\n    static clone(a) {\n        return new Vec3(a);\n    }\n    /**\n     * Calculates the magnitude (length) of a {@link Vec3}\n     * @category Static\n     *\n     * @param a - Vector to calculate magnitude of\n     * @returns Magnitude of a\n     */\n    static magnitude(a) {\n        let x = a[0];\n        let y = a[1];\n        let z = a[2];\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    /**\n     * Alias for {@link Vec3.magnitude}\n     * @category Static\n     */\n    static mag(a) { return 0; }\n    /**\n     * Alias for {@link Vec3.magnitude}\n     * @category Static\n     * @deprecated Use {@link Vec3.magnitude} to avoid conflicts with builtin `length` methods/attribs\n     *\n     * @param a - vector to calculate length of\n     * @returns length of a\n     */\n    // @ts-ignore: Length conflicts with Function.length\n    static length(a) { return 0; }\n    /**\n     * Alias for {@link Vec3.magnitude}\n     * @category Static\n     * @deprecated Use {@link Vec3.mag}\n     */\n    static len(a) { return 0; }\n    /**\n     * Creates a new vec3 initialized with the given values\n     * @category Static\n     *\n     * @param x - X component\n     * @param y - Y component\n     * @param z - Z component\n     * @returns a new 3D vector\n     */\n    static fromValues(x, y, z) {\n        return new Vec3(x, y, z);\n    }\n    /**\n     * Copy the values from one vec3 to another\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the source vector\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        return out;\n    }\n    /**\n     * Set the components of a vec3 to the given values\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param x - X component\n     * @param y - Y component\n     * @param z - Z component\n     * @returns `out`\n     */\n    static set(out, x, y, z) {\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        return out;\n    }\n    /**\n     * Adds two {@link Vec3}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        return out;\n    }\n    /**\n     * Subtracts vector b from vector a\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static subtract(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec3.subtract}\n     * @category Static\n     */\n    static sub(out, a, b) { return [0, 0, 0]; }\n    ;\n    /**\n     * Multiplies two vec3's\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        out[0] = a[0] * b[0];\n        out[1] = a[1] * b[1];\n        out[2] = a[2] * b[2];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec3.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return [0, 0, 0]; }\n    /**\n     * Divides two vec3's\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static divide(out, a, b) {\n        out[0] = a[0] / b[0];\n        out[1] = a[1] / b[1];\n        out[2] = a[2] / b[2];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec3.divide}\n     * @category Static\n     */\n    static div(out, a, b) { return [0, 0, 0]; }\n    ;\n    /**\n     * Math.ceil the components of a vec3\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to ceil\n     * @returns `out`\n     */\n    static ceil(out, a) {\n        out[0] = Math.ceil(a[0]);\n        out[1] = Math.ceil(a[1]);\n        out[2] = Math.ceil(a[2]);\n        return out;\n    }\n    /**\n     * Math.floor the components of a vec3\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to floor\n     * @returns `out`\n     */\n    static floor(out, a) {\n        out[0] = Math.floor(a[0]);\n        out[1] = Math.floor(a[1]);\n        out[2] = Math.floor(a[2]);\n        return out;\n    }\n    /**\n     * Returns the minimum of two vec3's\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static min(out, a, b) {\n        out[0] = Math.min(a[0], b[0]);\n        out[1] = Math.min(a[1], b[1]);\n        out[2] = Math.min(a[2], b[2]);\n        return out;\n    }\n    /**\n     * Returns the maximum of two vec3's\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static max(out, a, b) {\n        out[0] = Math.max(a[0], b[0]);\n        out[1] = Math.max(a[1], b[1]);\n        out[2] = Math.max(a[2], b[2]);\n        return out;\n    }\n    /**\n     * symmetric round the components of a vec3\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to round\n     * @returns `out`\n     */\n    /*static round(out: Vec3Like, a: Readonly<Vec3Like>): Vec3Like {\n      out[0] = glMatrix.round(a[0]);\n      out[1] = glMatrix.round(a[1]);\n      out[2] = glMatrix.round(a[2]);\n      return out;\n    }*/\n    /**\n     * Scales a vec3 by a scalar number\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to scale\n     * @param scale - amount to scale the vector by\n     * @returns `out`\n     */\n    static scale(out, a, scale) {\n        out[0] = a[0] * scale;\n        out[1] = a[1] * scale;\n        out[2] = a[2] * scale;\n        return out;\n    }\n    /**\n     * Adds two vec3's after scaling the second operand by a scalar value\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param scale - the amount to scale b by before adding\n     * @returns `out`\n     */\n    static scaleAndAdd(out, a, b, scale) {\n        out[0] = a[0] + b[0] * scale;\n        out[1] = a[1] + b[1] * scale;\n        out[2] = a[2] + b[2] * scale;\n        return out;\n    }\n    /**\n     * Calculates the euclidian distance between two vec3's\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns distance between a and b\n     */\n    static distance(a, b) {\n        const x = b[0] - a[0];\n        const y = b[1] - a[1];\n        const z = b[2] - a[2];\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n    /**\n     * Alias for {@link Vec3.distance}\n     */\n    static dist(a, b) { return 0; }\n    /**\n     * Calculates the squared euclidian distance between two vec3's\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns squared distance between a and b\n     */\n    static squaredDistance(a, b) {\n        const x = b[0] - a[0];\n        const y = b[1] - a[1];\n        const z = b[2] - a[2];\n        return x * x + y * y + z * z;\n    }\n    /**\n     * Alias for {@link Vec3.squaredDistance}\n     */\n    static sqrDist(a, b) { return 0; }\n    /**\n     * Calculates the squared length of a vec3\n     * @category Static\n     *\n     * @param a - vector to calculate squared length of\n     * @returns squared length of a\n     */\n    static squaredLength(a) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        return x * x + y * y + z * z;\n    }\n    /**\n     * Alias for {@link Vec3.squaredLength}\n     */\n    static sqrLen(a, b) { return 0; }\n    /**\n     * Negates the components of a vec3\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to negate\n     * @returns `out`\n     */\n    static negate(out, a) {\n        out[0] = -a[0];\n        out[1] = -a[1];\n        out[2] = -a[2];\n        return out;\n    }\n    /**\n     * Returns the inverse of the components of a vec3\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to invert\n     * @returns `out`\n     */\n    static inverse(out, a) {\n        out[0] = 1.0 / a[0];\n        out[1] = 1.0 / a[1];\n        out[2] = 1.0 / a[2];\n        return out;\n    }\n    /**\n     * Normalize a vec3\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to normalize\n     * @returns `out`\n     */\n    static normalize(out, a) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        let len = x * x + y * y + z * z;\n        if (len > 0) {\n            //TODO: evaluate use of glm_invsqrt here?\n            len = 1 / Math.sqrt(len);\n        }\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n        return out;\n    }\n    /**\n     * Calculates the dot product of two vec3's\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns dot product of a and b\n     */\n    static dot(a, b) {\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n    }\n    /**\n     * Computes the cross product of two vec3's\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static cross(out, a, b) {\n        const ax = a[0], ay = a[1], az = a[2];\n        const bx = b[0], by = b[1], bz = b[2];\n        out[0] = ay * bz - az * by;\n        out[1] = az * bx - ax * bz;\n        out[2] = ax * by - ay * bx;\n        return out;\n    }\n    /**\n     * Performs a linear interpolation between two vec3's\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static lerp(out, a, b, t) {\n        const ax = a[0];\n        const ay = a[1];\n        const az = a[2];\n        out[0] = ax + t * (b[0] - ax);\n        out[1] = ay + t * (b[1] - ay);\n        out[2] = az + t * (b[2] - az);\n        return out;\n    }\n    /**\n     * Performs a spherical linear interpolation between two vec3's\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static slerp(out, a, b, t) {\n        const angle = Math.acos(Math.min(Math.max(Vec3.dot(a, b), -1), 1));\n        const sinTotal = Math.sin(angle);\n        const ratioA = Math.sin((1 - t) * angle) / sinTotal;\n        const ratioB = Math.sin(t * angle) / sinTotal;\n        out[0] = ratioA * a[0] + ratioB * b[0];\n        out[1] = ratioA * a[1] + ratioB * b[1];\n        out[2] = ratioA * a[2] + ratioB * b[2];\n        return out;\n    }\n    /**\n     * Performs a hermite interpolation with two control points\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param c - the third operand\n     * @param d - the fourth operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static hermite(out, a, b, c, d, t) {\n        const factorTimes2 = t * t;\n        const factor1 = factorTimes2 * (2 * t - 3) + 1;\n        const factor2 = factorTimes2 * (t - 2) + t;\n        const factor3 = factorTimes2 * (t - 1);\n        const factor4 = factorTimes2 * (3 - 2 * t);\n        out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n        out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n        out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n        return out;\n    }\n    /**\n     * Performs a bezier interpolation with two control points\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param c - the third operand\n     * @param d - the fourth operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static bezier(out, a, b, c, d, t) {\n        const inverseFactor = 1 - t;\n        const inverseFactorTimesTwo = inverseFactor * inverseFactor;\n        const factorTimes2 = t * t;\n        const factor1 = inverseFactorTimesTwo * inverseFactor;\n        const factor2 = 3 * t * inverseFactorTimesTwo;\n        const factor3 = 3 * factorTimes2 * inverseFactor;\n        const factor4 = factorTimes2 * t;\n        out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n        out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n        out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n        return out;\n    }\n    /**\n     * Generates a random vector with the given scale\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n     * @returns `out`\n     */\n    /*static random(out: Vec3Like, scale) {\n      scale = scale === undefined ? 1.0 : scale;\n  \n      let r = glMatrix.RANDOM() * 2.0 * Math.PI;\n      let z = glMatrix.RANDOM() * 2.0 - 1.0;\n      let zScale = Math.sqrt(1.0 - z * z) * scale;\n  \n      out[0] = Math.cos(r) * zScale;\n      out[1] = Math.sin(r) * zScale;\n      out[2] = z * scale;\n      return out;\n    }*/\n    /**\n     * Transforms the vec3 with a mat4.\n     * 4th vector component is implicitly '1'\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to transform\n     * @param m - matrix to transform with\n     * @returns `out`\n     */\n    static transformMat4(out, a, m) {\n        const x = a[0], y = a[1], z = a[2];\n        const w = (m[3] * x + m[7] * y + m[11] * z + m[15]) || 1.0;\n        out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n        out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n        out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n        return out;\n    }\n    /**\n     * Transforms the vec3 with a mat3.\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to transform\n     * @param m - the 3x3 matrix to transform with\n     * @returns `out`\n     */\n    static transformMat3(out, a, m) {\n        let x = a[0], y = a[1], z = a[2];\n        out[0] = x * m[0] + y * m[3] + z * m[6];\n        out[1] = x * m[1] + y * m[4] + z * m[7];\n        out[2] = x * m[2] + y * m[5] + z * m[8];\n        return out;\n    }\n    /**\n     * Transforms the vec3 with a quat\n     * Can also be used for dual quaternions. (Multiply it with the real part)\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to transform\n     * @param q - quaternion to transform with\n     * @returns `out`\n     */\n    static transformQuat(out, a, q) {\n        // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n        const qx = q[0];\n        const qy = q[1];\n        const qz = q[2];\n        const w2 = q[3] * 2;\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        // var qvec = [qx, qy, qz];\n        // var uv = vec3.cross([], qvec, a);\n        const uvx = (qy * z - qz * y);\n        const uvy = (qz * x - qx * z);\n        const uvz = (qx * y - qy * x);\n        // var uuv = vec3.cross([], qvec, uv);\n        // vec3.scale(uuv, uuv, 2);\n        const uuvx = (qy * uvz - qz * uvy) * 2;\n        const uuvy = (qz * uvx - qx * uvz) * 2;\n        const uuvz = (qx * uvy - qy * uvx) * 2;\n        // vec3.scale(uv, uv, 2 * w);\n        // return vec3.add(out, a, vec3.add(out, uv, uuv));\n        out[0] = x + (uvx * w2) + uuvx;\n        out[1] = y + (uvy * w2) + uuvy;\n        out[2] = z + (uvz * w2) + uuvz;\n        return out;\n    }\n    /**\n     * Rotate a 3D vector around the x-axis\n     * @param out - The receiving vec3\n     * @param a - The vec3 point to rotate\n     * @param b - The origin of the rotation\n     * @param rad - The angle of rotation in radians\n     * @returns `out`\n     */\n    static rotateX(out, a, b, rad) {\n        const by = b[1];\n        const bz = b[2];\n        //Translate point to the origin\n        const py = a[1] - by;\n        const pz = a[2] - bz;\n        //perform rotation\n        //translate to correct position\n        out[0] = a[0];\n        out[1] = (py * Math.cos(rad) - pz * Math.sin(rad)) + by;\n        out[2] = (py * Math.sin(rad) + pz * Math.cos(rad)) + bz;\n        return out;\n    }\n    /**\n     * Rotate a 3D vector around the y-axis\n     * @param out - The receiving vec3\n     * @param a - The vec3 point to rotate\n     * @param b - The origin of the rotation\n     * @param rad - The angle of rotation in radians\n     * @returns `out`\n     */\n    static rotateY(out, a, b, rad) {\n        const bx = b[0];\n        const bz = b[2];\n        //Translate point to the origin\n        const px = a[0] - bx;\n        const pz = a[2] - bz;\n        //perform rotation\n        //translate to correct position\n        out[0] = (pz * Math.sin(rad) + px * Math.cos(rad)) + bx;\n        out[1] = a[1];\n        out[2] = (pz * Math.cos(rad) - px * Math.sin(rad)) + bz;\n        return out;\n    }\n    /**\n     * Rotate a 3D vector around the z-axis\n     * @param out - The receiving vec3\n     * @param a - The vec3 point to rotate\n     * @param b - The origin of the rotation\n     * @param rad - The angle of rotation in radians\n     * @returns `out`\n     */\n    static rotateZ(out, a, b, rad) {\n        const bx = b[0];\n        const by = b[1];\n        //Translate point to the origin\n        const px = a[0] - bx;\n        const py = a[1] - by;\n        //perform rotation\n        //translate to correct position\n        out[0] = (px * Math.cos(rad) - py * Math.sin(rad)) + bx;\n        out[1] = (px * Math.sin(rad) + py * Math.cos(rad)) + by;\n        out[2] = b[2];\n        return out;\n    }\n    /**\n     * Get the angle between two 3D vectors\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns The angle in radians\n     */\n    static angle(a, b) {\n        const ax = a[0];\n        const ay = a[1];\n        const az = a[2];\n        const bx = b[0];\n        const by = b[1];\n        const bz = b[2];\n        const mag = Math.sqrt((ax * ax + ay * ay + az * az) * (bx * bx + by * by + bz * bz));\n        const cosine = mag && Vec3.dot(a, b) / mag;\n        return Math.acos(Math.min(Math.max(cosine, -1), 1));\n    }\n    /**\n     * Set the components of a vec3 to zero\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @returns `out`\n     */\n    static zero(out) {\n        out[0] = 0.0;\n        out[1] = 0.0;\n        out[2] = 0.0;\n        return out;\n    }\n    /**\n     * Returns a string representation of a vector\n     * @category Static\n     *\n     * @param a - vector to represent as a string\n     * @returns string representation of the vector\n     */\n    static str(a) {\n        return `Vec3(${a.join(', ')})`;\n    }\n    /**\n     * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first vector.\n     * @param b - The second vector.\n     * @returns True if the vectors are equal, false otherwise.\n     */\n    static exactEquals(a, b) {\n        return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n    }\n    /**\n     * Returns whether or not the vectors have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first vector.\n     * @param b - The second vector.\n     * @returns True if the vectors are equal, false otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)));\n    }\n}\n// Instance method alias assignments\nVec3.prototype.sub = Vec3.prototype.subtract;\nVec3.prototype.mul = Vec3.prototype.multiply;\nVec3.prototype.div = Vec3.prototype.divide;\nVec3.prototype.dist = Vec3.prototype.distance;\nVec3.prototype.sqrDist = Vec3.prototype.squaredDistance;\n// Static method alias assignments\nVec3.sub = Vec3.subtract;\nVec3.mul = Vec3.multiply;\nVec3.div = Vec3.divide;\nVec3.dist = Vec3.distance;\nVec3.sqrDist = Vec3.squaredDistance;\nVec3.sqrLen = Vec3.squaredLength;\nVec3.mag = Vec3.magnitude;\nVec3.length = Vec3.magnitude;\nVec3.len = Vec3.magnitude;\n\n/**\n * 4 Dimensional Vector\n */\nclass Vec4 extends Float32Array {\n    /**\n     * The number of bytes in a {@link Vec4}.\n     */\n    static BYTE_LENGTH = 4 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Vec4}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 4:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 4);\n                break;\n            case 1: {\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([v, v, v, v]);\n                }\n                else {\n                    super(v, 0, 4);\n                }\n                break;\n            }\n            default:\n                super(4);\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    // Getters and setters to make component access read better.\n    // These are likely to be a little bit slower than direct array access.\n    /**\n     * The x component of the vector. Equivalent to `this[0];`\n     * @category Vector components\n     */\n    get x() { return this[0]; }\n    set x(value) { this[0] = value; }\n    /**\n     * The y component of the vector. Equivalent to `this[1];`\n     * @category Vector components\n     */\n    get y() { return this[1]; }\n    set y(value) { this[1] = value; }\n    /**\n     * The z component of the vector. Equivalent to `this[2];`\n     * @category Vector components\n     */\n    get z() { return this[2]; }\n    set z(value) { this[2] = value; }\n    /**\n     * The w component of the vector. Equivalent to `this[3];`\n     * @category Vector components\n     */\n    get w() { return this[3]; }\n    set w(value) { this[3] = value; }\n    // Alternate set of getters and setters in case this is being used to define\n    // a color.\n    /**\n     * The r component of the vector. Equivalent to `this[0];`\n     * @category Color components\n     */\n    get r() { return this[0]; }\n    set r(value) { this[0] = value; }\n    /**\n     * The g component of the vector. Equivalent to `this[1];`\n     * @category Color components\n     */\n    get g() { return this[1]; }\n    set g(value) { this[1] = value; }\n    /**\n     * The b component of the vector. Equivalent to `this[2];`\n     * @category Color components\n     */\n    get b() { return this[2]; }\n    set b(value) { this[2] = value; }\n    /**\n     * The a component of the vector. Equivalent to `this[3];`\n     * @category Color components\n     */\n    get a() { return this[3]; }\n    set a(value) { this[3] = value; }\n    /**\n     * The magnitude (length) of this.\n     * Equivalent to `Vec4.magnitude(this);`\n     *\n     * Magnitude is used because the `length` attribute is already defined by\n     * `Float32Array` to mean the number of elements in the array.\n     */\n    get magnitude() {\n        const x = this[0];\n        const y = this[1];\n        const z = this[2];\n        const w = this[3];\n        return Math.sqrt(x * x + y * y + z * z + w * w);\n    }\n    /**\n     * Alias for {@link Vec4.magnitude}\n     */\n    get mag() { return this.magnitude; }\n    /**\n     * A string representation of `this`\n     * Equivalent to `Vec4.str(this);`\n     */\n    get str() {\n        return Vec4.str(this);\n    }\n    //===================\n    // Instances methods\n    //===================\n    /**\n     * Copy the values from another {@link Vec4} into `this`.\n     *\n     * @param a the source vector\n     * @returns `this`\n     */\n    copy(a) {\n        super.set(a);\n        return this;\n    }\n    /**\n     * Adds a {@link Vec4} to `this`.\n     * Equivalent to `Vec4.add(this, this, b);`\n     *\n     * @param b - The vector to add to `this`\n     * @returns `this`\n     */\n    add(b) {\n        this[0] += b[0];\n        this[1] += b[1];\n        this[2] += b[2];\n        this[3] += b[3];\n        return this;\n    }\n    /**\n     * Subtracts a {@link Vec4} from `this`.\n     * Equivalent to `Vec4.subtract(this, this, b);`\n     *\n     * @param b - The vector to subtract from `this`\n     * @returns `this`\n     */\n    subtract(b) {\n        this[0] -= b[0];\n        this[1] -= b[1];\n        this[2] -= b[2];\n        this[3] -= b[3];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec4.subtract}\n     */\n    sub(b) { return this; }\n    /**\n     * Multiplies `this` by a {@link Vec4}.\n     * Equivalent to `Vec4.multiply(this, this, b);`\n     *\n     * @param b - The vector to multiply `this` by\n     * @returns `this`\n     */\n    multiply(b) {\n        this[0] *= b[0];\n        this[1] *= b[1];\n        this[2] *= b[2];\n        this[3] *= b[3];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec4.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Divides `this` by a {@link Vec4}.\n     * Equivalent to `Vec4.divide(this, this, b);`\n     *\n     * @param b - The vector to divide `this` by\n     * @returns `this`\n     */\n    divide(b) {\n        this[0] /= b[0];\n        this[1] /= b[1];\n        this[2] /= b[2];\n        this[3] /= b[3];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec4.divide}\n     */\n    div(b) { return this; }\n    /**\n     * Scales `this` by a scalar number.\n     * Equivalent to `Vec4.scale(this, this, b);`\n     *\n     * @param b - Amount to scale `this` by\n     * @returns `this`\n     */\n    scale(b) {\n        this[0] *= b;\n        this[1] *= b;\n        this[2] *= b;\n        this[3] *= b;\n        return this;\n    }\n    /**\n     * Calculates `this` scaled by a scalar value then adds the result to `this`.\n     * Equivalent to `Vec4.scaleAndAdd(this, this, b, scale);`\n     *\n     * @param b - The vector to add to `this`\n     * @param scale - The amount to scale `b` by before adding\n     * @returns `this`\n     */\n    scaleAndAdd(b, scale) {\n        this[0] += b[0] * scale;\n        this[1] += b[1] * scale;\n        this[2] += b[2] * scale;\n        this[3] += b[3] * scale;\n        return this;\n    }\n    /**\n     * Calculates the euclidian distance between another {@link Vec4} and `this`.\n     * Equivalent to `Vec4.distance(this, b);`\n     *\n     * @param b - The vector to calculate the distance to\n     * @returns Distance between `this` and `b`\n     */\n    distance(b) {\n        return Vec4.distance(this, b);\n    }\n    /**\n     * Alias for {@link Vec4.distance}\n     */\n    dist(b) { return 0; }\n    /**\n     * Calculates the squared euclidian distance between another {@link Vec4} and `this`.\n     * Equivalent to `Vec4.squaredDistance(this, b);`\n     *\n     * @param b The vector to calculate the squared distance to\n     * @returns Squared distance between `this` and `b`\n     */\n    squaredDistance(b) {\n        return Vec4.squaredDistance(this, b);\n    }\n    /**\n     * Alias for {@link Vec4.squaredDistance}\n     */\n    sqrDist(b) { return 0; }\n    /**\n     * Negates the components of `this`.\n     * Equivalent to `Vec4.negate(this, this);`\n     *\n     * @returns `this`\n     */\n    negate() {\n        this[0] *= -1;\n        this[1] *= -1;\n        this[2] *= -1;\n        this[3] *= -1;\n        return this;\n    }\n    /**\n     * Inverts the components of `this`.\n     * Equivalent to `Vec4.inverse(this, this);`\n     *\n     * @returns `this`\n     */\n    invert() {\n        this[0] = 1.0 / this[0];\n        this[1] = 1.0 / this[1];\n        this[2] = 1.0 / this[2];\n        this[3] = 1.0 / this[3];\n        return this;\n    }\n    /**\n     * Calculates the dot product of this and another {@link Vec4}.\n     * Equivalent to `Vec4.dot(this, b);`\n     *\n     * @param b - The second operand\n     * @returns Dot product of `this` and `b`\n     */\n    dot(b) {\n        return this[0] * b[0] + this[1] * b[1] + this[2] * b[2] + this[3] * b[3];\n    }\n    /**\n     * Normalize `this`.\n     * Equivalent to `Vec4.normalize(this, this);`\n     *\n     * @returns `this`\n     */\n    normalize() {\n        return Vec4.normalize(this, this);\n    }\n    //===================\n    // Static methods\n    //===================\n    /**\n     * Creates a new, empty {@link Vec4}\n     * @category Static\n     *\n     * @returns a new 4D vector\n     */\n    static create() {\n        return new Vec4();\n    }\n    /**\n     * Creates a new {@link Vec4} initialized with values from an existing vector\n     * @category Static\n     *\n     * @param a - vector to clone\n     * @returns a new 4D vector\n     */\n    static clone(a) {\n        return new Vec4(a);\n    }\n    /**\n     * Creates a new {@link Vec4} initialized with the given values\n     * @category Static\n     *\n     * @param x - X component\n     * @param y - Y component\n     * @param z - Z component\n     * @param w - W component\n     * @returns a new 4D vector\n     */\n    static fromValues(x, y, z, w) {\n        return new Vec4(x, y, z, w);\n    }\n    /**\n     * Copy the values from one {@link Vec4} to another\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the source vector\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    /**\n     * Set the components of a {@link Vec4} to the given values\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param x - X component\n     * @param y - Y component\n     * @param z - Z component\n     * @param w - W component\n     * @returns `out`\n     */\n    static set(out, x, y, z, w) {\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = w;\n        return out;\n    }\n    /**\n     * Adds two {@link Vec4}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        return out;\n    }\n    /**\n     * Subtracts vector b from vector a\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static subtract(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        out[2] = a[2] - b[2];\n        out[3] = a[3] - b[3];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec4.subtract}\n     * @category Static\n     */\n    static sub(out, a, b) { return out; }\n    /**\n     * Multiplies two {@link Vec4}'s\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        out[0] = a[0] * b[0];\n        out[1] = a[1] * b[1];\n        out[2] = a[2] * b[2];\n        out[3] = a[3] * b[3];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec4.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return out; }\n    /**\n     * Divides two {@link Vec4}'s\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static divide(out, a, b) {\n        out[0] = a[0] / b[0];\n        out[1] = a[1] / b[1];\n        out[2] = a[2] / b[2];\n        out[3] = a[3] / b[3];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec4.divide}\n     * @category Static\n     */\n    static div(out, a, b) { return out; }\n    /**\n     * Math.ceil the components of a {@link Vec4}\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to ceil\n     * @returns `out`\n     */\n    static ceil(out, a) {\n        out[0] = Math.ceil(a[0]);\n        out[1] = Math.ceil(a[1]);\n        out[2] = Math.ceil(a[2]);\n        out[3] = Math.ceil(a[3]);\n        return out;\n    }\n    /**\n     * Math.floor the components of a {@link Vec4}\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to floor\n     * @returns `out`\n     */\n    static floor(out, a) {\n        out[0] = Math.floor(a[0]);\n        out[1] = Math.floor(a[1]);\n        out[2] = Math.floor(a[2]);\n        out[3] = Math.floor(a[3]);\n        return out;\n    }\n    /**\n     * Returns the minimum of two {@link Vec4}'s\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static min(out, a, b) {\n        out[0] = Math.min(a[0], b[0]);\n        out[1] = Math.min(a[1], b[1]);\n        out[2] = Math.min(a[2], b[2]);\n        out[3] = Math.min(a[3], b[3]);\n        return out;\n    }\n    /**\n     * Returns the maximum of two {@link Vec4}'s\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static max(out, a, b) {\n        out[0] = Math.max(a[0], b[0]);\n        out[1] = Math.max(a[1], b[1]);\n        out[2] = Math.max(a[2], b[2]);\n        out[3] = Math.max(a[3], b[3]);\n        return out;\n    }\n    /**\n     * Math.round the components of a {@link Vec4}\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to round\n     * @returns `out`\n     */\n    static round(out, a) {\n        out[0] = Math.round(a[0]);\n        out[1] = Math.round(a[1]);\n        out[2] = Math.round(a[2]);\n        out[3] = Math.round(a[3]);\n        return out;\n    }\n    /**\n     * Scales a {@link Vec4} by a scalar number\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to scale\n     * @param scale - amount to scale the vector by\n     * @returns `out`\n     */\n    static scale(out, a, scale) {\n        out[0] = a[0] * scale;\n        out[1] = a[1] * scale;\n        out[2] = a[2] * scale;\n        out[3] = a[3] * scale;\n        return out;\n    }\n    /**\n     * Adds two {@link Vec4}'s after scaling the second operand by a scalar value\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param scale - the amount to scale b by before adding\n     * @returns `out`\n     */\n    static scaleAndAdd(out, a, b, scale) {\n        out[0] = a[0] + b[0] * scale;\n        out[1] = a[1] + b[1] * scale;\n        out[2] = a[2] + b[2] * scale;\n        out[3] = a[3] + b[3] * scale;\n        return out;\n    }\n    /**\n     * Calculates the euclidian distance between two {@link Vec4}'s\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns distance between a and b\n     */\n    static distance(a, b) {\n        const x = b[0] - a[0];\n        const y = b[1] - a[1];\n        const z = b[2] - a[2];\n        const w = b[3] - a[3];\n        return Math.hypot(x, y, z, w);\n    }\n    /**\n     * Alias for {@link Vec4.distance}\n     * @category Static\n     */\n    static dist(a, b) { return 0; }\n    /**\n     * Calculates the squared euclidian distance between two {@link Vec4}'s\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns squared distance between a and b\n     */\n    static squaredDistance(a, b) {\n        const x = b[0] - a[0];\n        const y = b[1] - a[1];\n        const z = b[2] - a[2];\n        const w = b[3] - a[3];\n        return x * x + y * y + z * z + w * w;\n    }\n    /**\n     * Alias for {@link Vec4.squaredDistance}\n     * @category Static\n     */\n    static sqrDist(a, b) { return 0; }\n    /**\n     * Calculates the magnitude (length) of a {@link Vec4}\n     * @category Static\n     *\n     * @param a - vector to calculate length of\n     * @returns length of `a`\n     */\n    static magnitude(a) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        const w = a[3];\n        return Math.sqrt(x * x + y * y + z * z + w * w);\n    }\n    /**\n     * Alias for {@link Vec4.magnitude}\n     * @category Static\n     */\n    static mag(a) { return 0; }\n    /**\n     * Alias for {@link Vec4.magnitude}\n     * @category Static\n     * @deprecated Use {@link Vec4.magnitude} to avoid conflicts with builtin `length` methods/attribs\n     */\n    // @ts-ignore: Length conflicts with Function.length\n    static length(a) { return 0; }\n    /**\n     * Alias for {@link Vec4.magnitude}\n     * @category Static\n     * @deprecated Use {@link Vec4.mag}\n     */\n    static len(a) { return 0; }\n    /**\n     * Calculates the squared length of a {@link Vec4}\n     * @category Static\n     *\n     * @param a - vector to calculate squared length of\n     * @returns squared length of a\n     */\n    static squaredLength(a) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        const w = a[3];\n        return x * x + y * y + z * z + w * w;\n    }\n    /**\n     * Alias for {@link Vec4.squaredLength}\n     * @category Static\n     */\n    static sqrLen(a) { return 0; }\n    /**\n     * Negates the components of a {@link Vec4}\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to negate\n     * @returns `out`\n     */\n    static negate(out, a) {\n        out[0] = -a[0];\n        out[1] = -a[1];\n        out[2] = -a[2];\n        out[3] = -a[3];\n        return out;\n    }\n    /**\n     * Returns the inverse of the components of a {@link Vec4}\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to invert\n     * @returns `out`\n     */\n    static inverse(out, a) {\n        out[0] = 1.0 / a[0];\n        out[1] = 1.0 / a[1];\n        out[2] = 1.0 / a[2];\n        out[3] = 1.0 / a[3];\n        return out;\n    }\n    /**\n     * Normalize a {@link Vec4}\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - vector to normalize\n     * @returns `out`\n     */\n    static normalize(out, a) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        const w = a[3];\n        let len = x * x + y * y + z * z + w * w;\n        if (len > 0) {\n            len = 1 / Math.sqrt(len);\n        }\n        out[0] = x * len;\n        out[1] = y * len;\n        out[2] = z * len;\n        out[3] = w * len;\n        return out;\n    }\n    /**\n     * Calculates the dot product of two {@link Vec4}'s\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns dot product of a and b\n     */\n    static dot(a, b) {\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n    }\n    /**\n     * Returns the cross-product of three vectors in a 4-dimensional space\n     * @category Static\n     *\n     * @param out the receiving vector\n     * @param u - the first vector\n     * @param v - the second vector\n     * @param w - the third vector\n     * @returns result\n     */\n    static cross(out, u, v, w) {\n        const a = v[0] * w[1] - v[1] * w[0];\n        const b = v[0] * w[2] - v[2] * w[0];\n        const c = v[0] * w[3] - v[3] * w[0];\n        const d = v[1] * w[2] - v[2] * w[1];\n        const e = v[1] * w[3] - v[3] * w[1];\n        const f = v[2] * w[3] - v[3] * w[2];\n        const g = u[0];\n        const h = u[1];\n        const i = u[2];\n        const j = u[3];\n        out[0] = h * f - i * e + j * d;\n        out[1] = -(g * f) + i * c - j * b;\n        out[2] = g * e - h * c + j * a;\n        out[3] = -(g * d) + h * b - i * a;\n        return out;\n    }\n    /**\n     * Performs a linear interpolation between two {@link Vec4}'s\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static lerp(out, a, b, t) {\n        const ax = a[0];\n        const ay = a[1];\n        const az = a[2];\n        const aw = a[3];\n        out[0] = ax + t * (b[0] - ax);\n        out[1] = ay + t * (b[1] - ay);\n        out[2] = az + t * (b[2] - az);\n        out[3] = aw + t * (b[3] - aw);\n        return out;\n    }\n    /**\n     * Generates a random vector with the given scale\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param [scale] - Length of the resulting vector. If ommitted, a unit vector will be returned\n     * @returns `out`\n     */\n    /*static random(out: Vec4Like, scale): Vec4Like {\n      scale = scale || 1.0;\n  \n      // Marsaglia, George. Choosing a Point from the Surface of a\n      // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n      // http://projecteuclid.org/euclid.aoms/1177692644;\n      var v1, v2, v3, v4;\n      var s1, s2;\n      do {\n        v1 = glMatrix.RANDOM() * 2 - 1;\n        v2 = glMatrix.RANDOM() * 2 - 1;\n        s1 = v1 * v1 + v2 * v2;\n      } while (s1 >= 1);\n      do {\n        v3 = glMatrix.RANDOM() * 2 - 1;\n        v4 = glMatrix.RANDOM() * 2 - 1;\n        s2 = v3 * v3 + v4 * v4;\n      } while (s2 >= 1);\n  \n      var d = Math.sqrt((1 - s1) / s2);\n      out[0] = scale * v1;\n      out[1] = scale * v2;\n      out[2] = scale * v3 * d;\n      out[3] = scale * v4 * d;\n      return out;\n    }*/\n    /**\n     * Transforms the {@link Vec4} with a {@link Mat4}.\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to transform\n     * @param m - matrix to transform with\n     * @returns `out`\n     */\n    static transformMat4(out, a, m) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        const w = a[3];\n        out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n        out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n        out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n        out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n        return out;\n    }\n    /**\n     * Transforms the {@link Vec4} with a {@link Quat}\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to transform\n     * @param q - quaternion to transform with\n     * @returns `out`\n     */\n    static transformQuat(out, a, q) {\n        const x = a[0];\n        const y = a[1];\n        const z = a[2];\n        const qx = q[0];\n        const qy = q[1];\n        const qz = q[2];\n        const qw = q[3];\n        // calculate quat * vec\n        const ix = qw * x + qy * z - qz * y;\n        const iy = qw * y + qz * x - qx * z;\n        const iz = qw * z + qx * y - qy * x;\n        const iw = -qx * x - qy * y - qz * z;\n        // calculate result * inverse quat\n        out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n        out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n        out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n        out[3] = a[3];\n        return out;\n    }\n    /**\n     * Set the components of a {@link Vec4} to zero\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @returns `out`\n     */\n    static zero(out) {\n        out[0] = 0.0;\n        out[1] = 0.0;\n        out[2] = 0.0;\n        out[3] = 0.0;\n        return out;\n    }\n    /**\n     * Returns a string representation of a {@link Vec4}\n     * @category Static\n     *\n     * @param a - vector to represent as a string\n     * @returns string representation of the vector\n     */\n    static str(a) {\n        return `Vec4(${a.join(', ')})`;\n    }\n    /**\n     * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first vector.\n     * @param b - The second vector.\n     * @returns True if the vectors are equal, false otherwise.\n     */\n    static exactEquals(a, b) {\n        return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n    }\n    /**\n     * Returns whether or not the vectors have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first vector.\n     * @param b - The second vector.\n     * @returns True if the vectors are equal, false otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n    }\n}\n// Instance method alias assignments\nVec4.prototype.sub = Vec4.prototype.subtract;\nVec4.prototype.mul = Vec4.prototype.multiply;\nVec4.prototype.div = Vec4.prototype.divide;\nVec4.prototype.dist = Vec4.prototype.distance;\nVec4.prototype.sqrDist = Vec4.prototype.squaredDistance;\n// Static method alias assignments\nVec4.sub = Vec4.subtract;\nVec4.mul = Vec4.multiply;\nVec4.div = Vec4.divide;\nVec4.dist = Vec4.distance;\nVec4.sqrDist = Vec4.squaredDistance;\nVec4.sqrLen = Vec4.squaredLength;\nVec4.mag = Vec4.magnitude;\nVec4.length = Vec4.magnitude;\nVec4.len = Vec4.magnitude;\n\n/**\n * Quaternion\n */\nclass Quat extends Float32Array {\n    /**\n     * The number of bytes in a {@link Quat}.\n     */\n    static BYTE_LENGTH = 4 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Quat}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 4:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 4);\n                break;\n            case 1: {\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([v, v, v, v]);\n                }\n                else {\n                    super(v, 0, 4);\n                }\n                break;\n            }\n            default:\n                super(4);\n                this[3] = 1;\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    // Getters and setters to make component access read better.\n    // These are likely to be a little bit slower than direct array access.\n    /**\n     * The x component of the quaternion. Equivalent to `this[0];`\n     * @category Quaternion components\n     */\n    get x() { return this[0]; }\n    set x(value) { this[0] = value; }\n    /**\n     * The y component of the quaternion. Equivalent to `this[1];`\n     * @category Quaternion components\n     */\n    get y() { return this[1]; }\n    set y(value) { this[1] = value; }\n    /**\n     * The z component of the quaternion. Equivalent to `this[2];`\n     * @category Quaternion components\n     */\n    get z() { return this[2]; }\n    set z(value) { this[2] = value; }\n    /**\n     * The w component of the quaternion. Equivalent to `this[3];`\n     * @category Quaternion components\n     */\n    get w() { return this[3]; }\n    set w(value) { this[3] = value; }\n    /**\n     * The magnitude (length) of this.\n     * Equivalent to `Quat.magnitude(this);`\n     *\n     * Magnitude is used because the `length` attribute is already defined by\n     * `Float32Array` to mean the number of elements in the array.\n     */\n    get magnitude() {\n        const x = this[0];\n        const y = this[1];\n        const z = this[2];\n        const w = this[3];\n        return Math.sqrt(x * x + y * y + z * z + w * w);\n    }\n    /**\n     * Alias for {@link Quat.magnitude}\n     */\n    get mag() { return this.magnitude; }\n    /**\n     * A string representation of `this`\n     * Equivalent to `Quat.str(this);`\n     */\n    get str() {\n        return Quat.str(this);\n    }\n    //===================\n    // Instances methods\n    //===================\n    /**\n     * Copy the values from another {@link Quat} into `this`.\n     *\n     * @param a the source quaternion\n     * @returns `this`\n     */\n    copy(a) {\n        super.set(a);\n        return this;\n    }\n    /**\n     * Set `this` to the identity quaternion\n     * Equivalent to Quat.identity(this)\n     *\n     * @returns `this`\n     */\n    identity() {\n        this[0] = 0;\n        this[1] = 0;\n        this[2] = 0;\n        this[3] = 1;\n        return this;\n    }\n    /**\n     * Multiplies `this` by a {@link Quat}.\n     * Equivalent to `Quat.multiply(this, this, b);`\n     *\n     * @param b - The vector to multiply `this` by\n     * @returns `this`\n     */\n    multiply(b) {\n        return Quat.multiply(this, this, b);\n    }\n    /**\n     * Alias for {@link Quat.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Rotates `this` by the given angle about the X axis\n     * Equivalent to `Quat.rotateX(this, this, rad);`\n     *\n     * @param rad - angle (in radians) to rotate\n     * @returns `this`\n     */\n    rotateX(rad) {\n        return Quat.rotateX(this, this, rad);\n    }\n    /**\n     * Rotates `this` by the given angle about the Y axis\n     * Equivalent to `Quat.rotateY(this, this, rad);`\n     *\n     * @param rad - angle (in radians) to rotate\n     * @returns `this`\n     */\n    rotateY(rad) {\n        return Quat.rotateY(this, this, rad);\n    }\n    /**\n     * Rotates `this` by the given angle about the Z axis\n     * Equivalent to `Quat.rotateZ(this, this, rad);`\n     *\n     * @param rad - angle (in radians) to rotate\n     * @returns `this`\n     */\n    rotateZ(rad) {\n        return Quat.rotateZ(this, this, rad);\n    }\n    /**\n     * Inverts `this`\n     * Equivalent to `Quat.invert(this, this);`\n     *\n     * @returns `this`\n     */\n    invert() {\n        return Quat.invert(this, this);\n    }\n    /**\n     * Scales `this` by a scalar number\n     * Equivalent to `Quat.scale(this, this, scale);`\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to scale\n     * @param scale - amount to scale the vector by\n     * @returns `this`\n     */\n    scale(scale) {\n        this[0] *= scale;\n        this[1] *= scale;\n        this[2] *= scale;\n        this[3] *= scale;\n        return this;\n    }\n    /**\n     * Calculates the dot product of `this` and another {@link Quat}\n     * Equivalent to `Quat.dot(this, b);`\n     *\n     * @param b - the second operand\n     * @returns dot product of `this` and b\n     */\n    dot(b) {\n        return Quat.dot(this, b);\n    }\n    //===================\n    // Static methods\n    //===================\n    /**\n     * Creates a new identity quat\n     * @category Static\n     *\n     * @returns a new quaternion\n     */\n    static create() {\n        return new Quat();\n    }\n    /**\n     * Set a quat to the identity quaternion\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @returns `out`\n     */\n    static identity(out) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n        return out;\n    }\n    /**\n     * Sets a quat from the given angle and rotation axis,\n     * then returns it.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param axis - the axis around which to rotate\n     * @param rad - the angle in radians\n     * @returns `out`\n     **/\n    static setAxisAngle(out, axis, rad) {\n        rad = rad * 0.5;\n        const s = Math.sin(rad);\n        out[0] = s * axis[0];\n        out[1] = s * axis[1];\n        out[2] = s * axis[2];\n        out[3] = Math.cos(rad);\n        return out;\n    }\n    /**\n     * Gets the rotation axis and angle for a given\n     *  quaternion. If a quaternion is created with\n     *  setAxisAngle, this method will return the same\n     *  values as providied in the original parameter list\n     *  OR functionally equivalent values.\n     * Example: The quaternion formed by axis [0, 0, 1] and\n     *  angle -90 is the same as the quaternion formed by\n     *  [0, 0, 1] and 270. This method favors the latter.\n     * @category Static\n     *\n     * @param out_axis - Vector receiving the axis of rotation\n     * @param q - Quaternion to be decomposed\n     * @return Angle, in radians, of the rotation\n     */\n    static getAxisAngle(out_axis, q) {\n        const rad = Math.acos(q[3]) * 2.0;\n        const s = Math.sin(rad / 2.0);\n        if (s > EPSILON) {\n            out_axis[0] = q[0] / s;\n            out_axis[1] = q[1] / s;\n            out_axis[2] = q[2] / s;\n        }\n        else {\n            // If s is zero, return any axis (no rotation - axis does not matter)\n            out_axis[0] = 1;\n            out_axis[1] = 0;\n            out_axis[2] = 0;\n        }\n        return rad;\n    }\n    /**\n     * Gets the angular distance between two unit quaternions\n     * @category Static\n     *\n     * @param  {ReadonlyQuat} a     Origin unit quaternion\n     * @param  {ReadonlyQuat} b     Destination unit quaternion\n     * @return {Number}     Angle, in radians, between the two quaternions\n     */\n    static getAngle(a, b) {\n        const dotproduct = Quat.dot(a, b);\n        return Math.acos(2 * dotproduct * dotproduct - 1);\n    }\n    /**\n     * Multiplies two quat's\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        const ax = a[0];\n        const ay = a[1];\n        const az = a[2];\n        const aw = a[3];\n        const bx = b[0];\n        const by = b[1];\n        const bz = b[2];\n        const bw = b[3];\n        out[0] = ax * bw + aw * bx + ay * bz - az * by;\n        out[1] = ay * bw + aw * by + az * bx - ax * bz;\n        out[2] = az * bw + aw * bz + ax * by - ay * bx;\n        out[3] = aw * bw - ax * bx - ay * by - az * bz;\n        return out;\n    }\n    /**\n     * Rotates a quaternion by the given angle about the X axis\n     * @category Static\n     *\n     * @param out - quat receiving operation result\n     * @param a - quat to rotate\n     * @param rad - angle (in radians) to rotate\n     * @returns `out`\n     */\n    static rotateX(out, a, rad) {\n        rad *= 0.5;\n        const ax = a[0];\n        const ay = a[1];\n        const az = a[2];\n        const aw = a[3];\n        const bx = Math.sin(rad);\n        const bw = Math.cos(rad);\n        out[0] = ax * bw + aw * bx;\n        out[1] = ay * bw + az * bx;\n        out[2] = az * bw - ay * bx;\n        out[3] = aw * bw - ax * bx;\n        return out;\n    }\n    /**\n     * Rotates a quaternion by the given angle about the Y axis\n     * @category Static\n     *\n     * @param out - quat receiving operation result\n     * @param a - quat to rotate\n     * @param rad - angle (in radians) to rotate\n     * @returns `out`\n     */\n    static rotateY(out, a, rad) {\n        rad *= 0.5;\n        const ax = a[0];\n        const ay = a[1];\n        const az = a[2];\n        const aw = a[3];\n        const by = Math.sin(rad);\n        const bw = Math.cos(rad);\n        out[0] = ax * bw - az * by;\n        out[1] = ay * bw + aw * by;\n        out[2] = az * bw + ax * by;\n        out[3] = aw * bw - ay * by;\n        return out;\n    }\n    /**\n     * Rotates a quaternion by the given angle about the Z axis\n     * @category Static\n     *\n     * @param out - quat receiving operation result\n     * @param a - quat to rotate\n     * @param rad - angle (in radians) to rotate\n     * @returns `out`\n     */\n    static rotateZ(out, a, rad) {\n        rad *= 0.5;\n        const ax = a[0];\n        const ay = a[1];\n        const az = a[2];\n        const aw = a[3];\n        const bz = Math.sin(rad);\n        const bw = Math.cos(rad);\n        out[0] = ax * bw + ay * bz;\n        out[1] = ay * bw - ax * bz;\n        out[2] = az * bw + aw * bz;\n        out[3] = aw * bw - az * bz;\n        return out;\n    }\n    /**\n     * Calculates the W component of a quat from the X, Y, and Z components.\n     * Assumes that quaternion is 1 unit in length.\n     * Any existing W component will be ignored.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - quat to calculate W component of\n     * @returns `out`\n     */\n    static calculateW(out, a) {\n        const x = a[0], y = a[1], z = a[2];\n        out[0] = x;\n        out[1] = y;\n        out[2] = z;\n        out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n        return out;\n    }\n    /**\n     * Calculate the exponential of a unit quaternion.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - quat to calculate the exponential of\n     * @returns `out`\n     */\n    static exp(out, a) {\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        const r = Math.sqrt(x * x + y * y + z * z);\n        const et = Math.exp(w);\n        const s = r > 0 ? (et * Math.sin(r)) / r : 0;\n        out[0] = x * s;\n        out[1] = y * s;\n        out[2] = z * s;\n        out[3] = et * Math.cos(r);\n        return out;\n    }\n    /**\n     * Calculate the natural logarithm of a unit quaternion.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - quat to calculate the exponential of\n     * @returns `out`\n     */\n    static ln(out, a) {\n        const x = a[0], y = a[1], z = a[2], w = a[3];\n        const r = Math.sqrt(x * x + y * y + z * z);\n        const t = r > 0 ? Math.atan2(r, w) / r : 0;\n        out[0] = x * t;\n        out[1] = y * t;\n        out[2] = z * t;\n        out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n        return out;\n    }\n    /**\n     * Calculate the scalar power of a unit quaternion.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - quat to calculate the exponential of\n     * @param b - amount to scale the quaternion by\n     * @returns `out`\n     */\n    static pow(out, a, b) {\n        Quat.ln(out, a);\n        Quat.scale(out, out, b);\n        Quat.exp(out, out);\n        return out;\n    }\n    /**\n     * Performs a spherical linear interpolation between two quat\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static slerp(out, a, b, t) {\n        // benchmarks:\n        //    http://jsperf.com/quaternion-slerp-implementations\n        const ax = a[0], ay = a[1], az = a[2], aw = a[3];\n        let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n        let scale0;\n        let scale1;\n        // calc cosine\n        let cosom = ax * bx + ay * by + az * bz + aw * bw;\n        // adjust signs (if necessary)\n        if (cosom < 0.0) {\n            cosom = -cosom;\n            bx = -bx;\n            by = -by;\n            bz = -bz;\n            bw = -bw;\n        }\n        // calculate coefficients\n        if (1.0 - cosom > EPSILON) {\n            // standard case (slerp)\n            const omega = Math.acos(cosom);\n            const sinom = Math.sin(omega);\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\n            scale1 = Math.sin(t * omega) / sinom;\n        }\n        else {\n            // \"from\" and \"to\" quaternions are very close\n            //  ... so we can do a linear interpolation\n            scale0 = 1.0 - t;\n            scale1 = t;\n        }\n        // calculate final values\n        out[0] = scale0 * ax + scale1 * bx;\n        out[1] = scale0 * ay + scale1 * by;\n        out[2] = scale0 * az + scale1 * bz;\n        out[3] = scale0 * aw + scale1 * bw;\n        return out;\n    }\n    /**\n     * Generates a random unit quaternion\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @returns `out`\n     */\n    /*static random(out: QuatLike): QuatLike {\n      // Implementation of http://planning.cs.uiuc.edu/node198.html\n      // TODO: Calling random 3 times is probably not the fastest solution\n      let u1 = glMatrix.RANDOM();\n      let u2 = glMatrix.RANDOM();\n      let u3 = glMatrix.RANDOM();\n  \n      let sqrt1MinusU1 = Math.sqrt(1 - u1);\n      let sqrtU1 = Math.sqrt(u1);\n  \n      out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n      out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n      out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n      out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n      return out;\n    }*/\n    /**\n     * Calculates the inverse of a quat\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - quat to calculate inverse of\n     * @returns `out`\n     */\n    static invert(out, a) {\n        const a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n        const dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n        const invDot = dot ? 1.0 / dot : 0;\n        // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n        out[0] = -a0 * invDot;\n        out[1] = -a1 * invDot;\n        out[2] = -a2 * invDot;\n        out[3] = a3 * invDot;\n        return out;\n    }\n    /**\n     * Calculates the conjugate of a quat\n     * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - quat to calculate conjugate of\n     * @returns `out`\n     */\n    static conjugate(out, a) {\n        out[0] = -a[0];\n        out[1] = -a[1];\n        out[2] = -a[2];\n        out[3] = a[3];\n        return out;\n    }\n    /**\n     * Creates a quaternion from the given 3x3 rotation matrix.\n     *\n     * NOTE: The resultant quaternion is not normalized, so you should be sure\n     * to renormalize the quaternion yourself where necessary.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param m - rotation matrix\n     * @returns `out`\n     */\n    static fromMat3(out, m) {\n        // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n        // article \"Quaternion Calculus and Fast Animation\".\n        const fTrace = m[0] + m[4] + m[8];\n        let fRoot;\n        if (fTrace > 0.0) {\n            // |w| > 1/2, may as well choose w > 1/2\n            fRoot = Math.sqrt(fTrace + 1.0); // 2w\n            out[3] = 0.5 * fRoot;\n            fRoot = 0.5 / fRoot; // 1/(4w)\n            out[0] = (m[5] - m[7]) * fRoot;\n            out[1] = (m[6] - m[2]) * fRoot;\n            out[2] = (m[1] - m[3]) * fRoot;\n        }\n        else {\n            // |w| <= 1/2\n            let i = 0;\n            if (m[4] > m[0])\n                i = 1;\n            if (m[8] > m[i * 3 + i])\n                i = 2;\n            let j = (i + 1) % 3;\n            let k = (i + 2) % 3;\n            fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n            out[i] = 0.5 * fRoot;\n            fRoot = 0.5 / fRoot;\n            out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n            out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n            out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n        }\n        return out;\n    }\n    /**\n     * Creates a quaternion from the given euler angle x, y, z.\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param x - Angle to rotate around X axis in degrees.\n     * @param y - Angle to rotate around Y axis in degrees.\n     * @param z - Angle to rotate around Z axis in degrees.\n     * @returns `out`\n     */\n    static fromEuler(out, x, y, z) {\n        let halfToRad = (0.5 * Math.PI) / 180.0;\n        x *= halfToRad;\n        y *= halfToRad;\n        z *= halfToRad;\n        let sx = Math.sin(x);\n        let cx = Math.cos(x);\n        let sy = Math.sin(y);\n        let cy = Math.cos(y);\n        let sz = Math.sin(z);\n        let cz = Math.cos(z);\n        out[0] = sx * cy * cz - cx * sy * sz;\n        out[1] = cx * sy * cz + sx * cy * sz;\n        out[2] = cx * cy * sz - sx * sy * cz;\n        out[3] = cx * cy * cz + sx * sy * sz;\n        return out;\n    }\n    /**\n     * Returns a string representation of a quatenion\n     * @category Static\n     *\n     * @param a - vector to represent as a string\n     * @returns string representation of the vector\n     */\n    static str(a) {\n        return `Quat(${a.join(', ')})`;\n    }\n    /**\n     * Creates a new quat initialized with values from an existing quaternion\n     * @category Static\n     *\n     * @param a - quaternion to clone\n     * @returns a new quaternion\n     */\n    static clone(a) {\n        return new Quat(a);\n    }\n    /**\n     * Creates a new quat initialized with the given values\n     * @category Static\n     *\n     * @param x - X component\n     * @param y - Y component\n     * @param z - Z component\n     * @param w - W component\n     * @returns a new quaternion\n     */\n    static fromValues(x, y, z, w) {\n        return new Quat(x, y, z, w);\n    }\n    /**\n     * Copy the values from one quat to another\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - the source quaternion\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    /**\n     * Set the components of a {@link Quat} to the given values\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param x - X component\n     * @param y - Y component\n     * @param z - Z component\n     * @param w - W component\n     * @returns `out`\n     */\n    static set(out, x, y, z, w) { return out; }\n    /**\n     * Adds two {@link Quat}'s\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static add(out, a, b) { return out; }\n    /**\n     * Alias for {@link Quat.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return out; }\n    /**\n     * Scales a quat by a scalar number\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - the vector to scale\n     * @param b - amount to scale the vector by\n     * @returns `out`\n     */\n    static scale(out, a, scale) {\n        out[0] = a[0] * scale;\n        out[1] = a[1] * scale;\n        out[2] = a[2] * scale;\n        out[3] = a[3] * scale;\n        return out;\n    }\n    /**\n     * Calculates the dot product of two quat's\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns dot product of a and b\n     */\n    static dot(a, b) {\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n    }\n    /**\n     * Performs a linear interpolation between two quat's\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static lerp(out, a, b, t) { return out; }\n    /**\n     * Calculates the magnitude (length) of a {@link Quat}\n     * @category Static\n     *\n     * @param a - quaternion to calculate length of\n     * @returns length of `a`\n     */\n    static magnitude(a) { return 0; }\n    /**\n     * Alias for {@link Quat.magnitude}\n     * @category Static\n     */\n    static mag(a) { return 0; }\n    /**\n     * Alias for {@link Quat.magnitude}\n     * @category Static\n     * @deprecated Use {@link Quat.magnitude} to avoid conflicts with builtin `length` methods/attribs\n     */\n    // @ts-ignore: Length conflicts with Function.length\n    static length(a) { return 0; }\n    /**\n     * Alias for {@link Quat.magnitude}\n     * @category Static\n     * @deprecated Use {@link Quat.mag}\n     */\n    static len(a) { return 0; }\n    /**\n     * Calculates the squared length of a {@link Quat}\n     * @category Static\n     *\n     * @param a - quaternion to calculate squared length of\n     * @returns squared length of a\n     */\n    static squaredLength(a) { return 0; }\n    /**\n     * Alias for {@link Quat.squaredLength}\n     * @category Static\n     */\n    static sqrLen(a) { return 0; }\n    /**\n     * Normalize a {@link Quat}\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - quaternion to normalize\n     * @returns `out`\n     */\n    static normalize(out, a) { return out; }\n    /**\n     * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first quaternion.\n     * @param b - The second quaternion.\n     * @returns True if the vectors are equal, false otherwise.\n     */\n    static exactEquals(a, b) { return false; }\n    /**\n     * Returns whether or not the quaternions have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first vector.\n     * @param b - The second vector.\n     * @returns True if the vectors are equal, false otherwise.\n     */\n    static equals(a, b) { return false; }\n    /**\n     * Sets a quaternion to represent the shortest rotation from one\n     * vector to another.\n     *\n     * Both vectors are assumed to be unit length.\n     * @category Static\n     *\n     * @param out - the receiving quaternion.\n     * @param a - the initial vector\n     * @param b - the destination vector\n     * @returns `out`\n     */\n    static rotationTo(out, a, b) {\n        let dot = Vec3.dot(a, b);\n        if (dot < -0.999999) {\n            Vec3.cross(tmpVec3, xUnitVec3, a);\n            if (Vec3.len(tmpVec3) < 0.000001)\n                Vec3.cross(tmpVec3, yUnitVec3, a);\n            Vec3.normalize(tmpVec3, tmpVec3);\n            Quat.setAxisAngle(out, tmpVec3, Math.PI);\n            return out;\n        }\n        else if (dot > 0.999999) {\n            out[0] = 0;\n            out[1] = 0;\n            out[2] = 0;\n            out[3] = 1;\n            return out;\n        }\n        else {\n            Vec3.cross(tmpVec3, a, b);\n            out[0] = tmpVec3[0];\n            out[1] = tmpVec3[1];\n            out[2] = tmpVec3[2];\n            out[3] = 1 + dot;\n            return Quat.normalize(out, out);\n        }\n    }\n    /**\n     * Performs a spherical linear interpolation with two control points\n     * @category Static\n     *\n     * @param out - the receiving quaternion\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param c - the third operand\n     * @param d - the fourth operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static sqlerp(out, a, b, c, d, t) {\n        Quat.slerp(temp1, a, d, t);\n        Quat.slerp(temp2, b, c, t);\n        Quat.slerp(out, temp1, temp2, 2 * t * (1 - t));\n        return out;\n    }\n    /**\n     * Sets the specified quaternion with values corresponding to the given\n     * axes. Each axis is a vec3 and is expected to be unit length and\n     * perpendicular to all other specified axes.\n     * @category Static\n     *\n     * @param out - The receiving quaternion\n     * @param view - the vector representing the viewing direction\n     * @param right - the vector representing the local \"right\" direction\n     * @param up - the vector representing the local \"up\" direction\n     * @returns `out`\n     */\n    static setAxes(out, view, right, up) {\n        tempMat3[0] = right[0];\n        tempMat3[3] = right[1];\n        tempMat3[6] = right[2];\n        tempMat3[1] = up[0];\n        tempMat3[4] = up[1];\n        tempMat3[7] = up[2];\n        tempMat3[2] = -view[0];\n        tempMat3[5] = -view[1];\n        tempMat3[8] = -view[2];\n        return Quat.normalize(out, Quat.fromMat3(out, tempMat3));\n    }\n}\n// Temporary variables to prevent repeated allocations in the algorithms above.\nconst temp1 = [0, 0, 0, 0];\nconst temp2 = [0, 0, 0, 0];\nconst tempMat3 = [0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst tmpVec3 = [0, 0, 0];\nconst xUnitVec3 = [1, 0, 0];\nconst yUnitVec3 = [0, 1, 0];\n// Methods which re-use the Vec4 implementation\nQuat.set = Vec4.set;\nQuat.add = Vec4.add;\nQuat.lerp = Vec4.lerp;\nQuat.normalize = Vec4.normalize;\nQuat.squaredLength = Vec4.squaredLength;\nQuat.sqrLen = Vec4.squaredLength;\nQuat.exactEquals = Vec4.exactEquals;\nQuat.equals = Vec4.equals;\nQuat.magnitude = Vec4.magnitude;\n// Instance method alias assignments\nQuat.prototype.mul = Quat.prototype.multiply;\n// Static method alias assignments\nQuat.mul = Quat.multiply;\nQuat.mag = Quat.magnitude;\nQuat.length = Quat.magnitude;\nQuat.len = Quat.magnitude;\n\n/**\n * Dual Quaternion\n */\nclass Quat2 extends Float32Array {\n    /**\n     * The number of bytes in a {@link Quat}.\n     */\n    static BYTE_LENGTH = 8 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Quat2}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 8:\n                super(values);\n                break;\n            case 2:\n                super(values[0], values[1], 8);\n                break;\n            case 1: {\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([v, v, v, v, v, v, v, v]);\n                }\n                else {\n                    super(v, 0, 8);\n                }\n                break;\n            }\n            default:\n                super(8);\n                this[3] = 1;\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    /**\n     * A string representation of `this`\n     * Equivalent to `Quat2.str(this);`\n     */\n    get str() {\n        return Quat2.str(this);\n    }\n    //===================\n    // Instances methods\n    //===================\n    /**\n     * Copy the values from another {@link Quat2} into `this`.\n     *\n     * @param a the source dual quaternion\n     * @returns `this`\n     */\n    copy(a) {\n        super.set(a);\n        return this;\n    }\n    //===================\n    // Static methods\n    //===================\n    /**\n     * Creates a new identity {@link Quat2}\n     * @category Static\n     *\n     * @returns a new dual quaternion [real -> rotation, dual -> translation]\n     */\n    static create() {\n        return new Quat2();\n    }\n    /**\n     * Creates a {@link Quat2} quat initialized with values from an existing quaternion\n     * @category Static\n     *\n     * @param a - dual quaternion to clone\n     * @returns a new dual quaternion\n     */\n    static clone(a) {\n        return new Quat2(a);\n    }\n    /**\n     * Creates a new {@link Quat2}  initialized with the given values\n     * @category Static\n     *\n     * @param x1 - 1st X component\n     * @param y1 - 1st Y component\n     * @param z1 - 1st Z component\n     * @param w1 - 1st W component\n     * @param x2 - 2nd X component\n     * @param y2 - 2nd Y component\n     * @param z2 - 2nd Z component\n     * @param w2 - 2nd W component\n     * @returns a new dual quaternion\n     */\n    static fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n        return new Quat2(x1, y1, z1, w1, x2, y2, z2, w2);\n    }\n    /**\n     * Creates a new {@link Quat2} from the given values (quat and translation)\n     * @category Static\n     *\n     * @param x1 - X component (rotation)\n     * @param y1 - Y component (rotation)\n     * @param z1 - Z component (rotation)\n     * @param w1 - W component (rotation)\n     * @param x2 - X component (translation)\n     * @param y2 - Y component (translation)\n     * @param z2 - Z component (translation)\n     * @returns a new dual quaternion\n     */\n    static fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n        const ax = x2 * 0.5;\n        const ay = y2 * 0.5;\n        const az = z2 * 0.5;\n        return new Quat2(x1, y1, z1, w1, ax * w1 + ay * z1 - az * y1, ay * w1 + az * x1 - ax * z1, az * w1 + ax * y1 - ay * x1, -ax * x1 - ay * y1 - az * z1);\n    }\n    /**\n     * Sets a {@link Quat2} from a quaternion and a translation\n     * @category Static\n     *\n     * @param out - dual quaternion receiving operation result\n     * @param q - a normalized quaternion\n     * @param t - translation vector\n     * @returns `out`\n     */\n    static fromRotationTranslation(out, q, t) {\n        const ax = t[0] * 0.5;\n        const ay = t[1] * 0.5;\n        const az = t[2] * 0.5;\n        const bx = q[0];\n        const by = q[1];\n        const bz = q[2];\n        const bw = q[3];\n        out[0] = bx;\n        out[1] = by;\n        out[2] = bz;\n        out[3] = bw;\n        out[4] = ax * bw + ay * bz - az * by;\n        out[5] = ay * bw + az * bx - ax * bz;\n        out[6] = az * bw + ax * by - ay * bx;\n        out[7] = -ax * bx - ay * by - az * bz;\n        return out;\n    }\n    /**\n     * Sets a {@link Quat2} from a translation\n     * @category Static\n     *\n     * @param out - dual quaternion receiving operation result\n     * @param t - translation vector\n     * @returns `out`\n     */\n    static fromTranslation(out, t) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n        out[4] = t[0] * 0.5;\n        out[5] = t[1] * 0.5;\n        out[6] = t[2] * 0.5;\n        out[7] = 0;\n        return out;\n    }\n    /**\n     * Sets a {@link Quat2} from a quaternion\n     * @category Static\n     *\n     * @param out - dual quaternion receiving operation result\n     * @param q - a normalized quaternion\n     * @returns `out`\n     */\n    static fromRotation(out, q) {\n        out[0] = q[0];\n        out[1] = q[1];\n        out[2] = q[2];\n        out[3] = q[3];\n        out[4] = 0;\n        out[5] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        return out;\n    }\n    /**\n     * Sets a {@link Quat2} from a quaternion\n     * @category Static\n     *\n     * @param out - dual quaternion receiving operation result\n     * @param a - the matrix\n     * @returns `out`\n     */\n    static fromMat4(out, a) {\n        Mat4.getRotation(tempQuat, a);\n        Mat4.getTranslation(tempVec3, a);\n        return Quat2.fromRotationTranslation(out, tempQuat, tempVec3);\n    }\n    /**\n     * Copy the values from one {@link Quat2} to another\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the source dual quaternion\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        return out;\n    }\n    /**\n     * Set a {@link Quat2} to the identity dual quaternion\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @returns `out`\n     */\n    static identity(out) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n        out[4] = 0;\n        out[5] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        return out;\n    }\n    /**\n     * Set the components of a {@link Quat2} to the given values\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param x1 - 1st X component\n     * @param y1 - 1st Y component\n     * @param z1 - 1st Z component\n     * @param w1 - 1st W component\n     * @param x2 - 2nd X component\n     * @param y2 - 2nd Y component\n     * @param z2 - 2nd Z component\n     * @param w2 - 2nd W component\n     * @returns `out`\n     */\n    static set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n        out[0] = x1;\n        out[1] = y1;\n        out[2] = z1;\n        out[3] = w1;\n        out[4] = x2;\n        out[5] = y2;\n        out[6] = z2;\n        out[7] = w2;\n        return out;\n    }\n    /**\n     * Gets the real part of a dual quat\n     * @category Static\n     *\n     * @param out - real part\n     * @param a - Dual Quaternion\n     * @return `out`\n     */\n    static getReal(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    ;\n    /**\n     * Gets the dual part of a dual quat\n     * @category Static\n     *\n     * @param out - dual part\n     * @param a - Dual Quaternion\n     * @return `out`\n     */\n    static getDual(out, a) {\n        out[0] = a[4];\n        out[1] = a[5];\n        out[2] = a[6];\n        out[3] = a[7];\n        return out;\n    }\n    /**\n     * Set the real component of a {@link Quat2} to the given quaternion\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - a quaternion representing the real part\n     * @return `out`\n     */\n    static setReal(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        return out;\n    }\n    ;\n    /**\n     * Set the dual component of a {@link Quat2} to the given quaternion\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - a quaternion representing the dual part\n     * @return `out`\n     */\n    static setDual(out, a) {\n        out[4] = a[0];\n        out[5] = a[1];\n        out[6] = a[2];\n        out[7] = a[3];\n        return out;\n    }\n    /**\n     * Gets the translation of a normalized {@link Quat2}\n     * @category Static\n     *\n     * @param out - the receiving translation vector\n     * @param a - Dual Quaternion to be decomposed\n     * @return `out`\n     */\n    static getTranslation(out, a) {\n        const ax = a[4];\n        const ay = a[5];\n        const az = a[6];\n        const aw = a[7];\n        const bx = -a[0];\n        const by = -a[1];\n        const bz = -a[2];\n        const bw = a[3];\n        out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n        out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n        out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n        return out;\n    }\n    /**\n     * Translates a {@link Quat2} by the given vector\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the dual quaternion to translate\n     * @param v - vector to translate by\n     * @returns `out`\n     */\n    static translate(out, a, v) {\n        const ax1 = a[0];\n        const ay1 = a[1];\n        const az1 = a[2];\n        const aw1 = a[3];\n        const bx1 = v[0] * 0.5;\n        const by1 = v[1] * 0.5;\n        const bz1 = v[2] * 0.5;\n        const ax2 = a[4];\n        const ay2 = a[5];\n        const az2 = a[6];\n        const aw2 = a[7];\n        out[0] = ax1;\n        out[1] = ay1;\n        out[2] = az1;\n        out[3] = aw1;\n        out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n        out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n        out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n        out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n        return out;\n    }\n    /**\n     * Rotates a {@link Quat2} around the X axis\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the dual quaternion to rotate\n     * @param rad - angle (in radians) to rotate\n     * @returns `out`\n     */\n    static rotateX(out, a, rad) {\n        let bx = -a[0];\n        let by = -a[1];\n        let bz = -a[2];\n        let bw = a[3];\n        const ax = a[4];\n        const ay = a[5];\n        const az = a[6];\n        const aw = a[7];\n        const ax1 = ax * bw + aw * bx + ay * bz - az * by;\n        const ay1 = ay * bw + aw * by + az * bx - ax * bz;\n        const az1 = az * bw + aw * bz + ax * by - ay * bx;\n        const aw1 = aw * bw - ax * bx - ay * by - az * bz;\n        Quat.rotateX(out, a, rad);\n        bx = out[0];\n        by = out[1];\n        bz = out[2];\n        bw = out[3];\n        out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n        out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n        out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n        out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n        return out;\n    }\n    /**\n     * Rotates a {@link Quat2} around the Y axis\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the dual quaternion to rotate\n     * @param rad - angle (in radians) to rotate\n     * @returns `out`\n     */\n    static rotateY(out, a, rad) {\n        let bx = -a[0];\n        let by = -a[1];\n        let bz = -a[2];\n        let bw = a[3];\n        const ax = a[4];\n        const ay = a[5];\n        const az = a[6];\n        const aw = a[7];\n        const ax1 = ax * bw + aw * bx + ay * bz - az * by;\n        const ay1 = ay * bw + aw * by + az * bx - ax * bz;\n        const az1 = az * bw + aw * bz + ax * by - ay * bx;\n        const aw1 = aw * bw - ax * bx - ay * by - az * bz;\n        Quat.rotateY(out, a, rad);\n        bx = out[0];\n        by = out[1];\n        bz = out[2];\n        bw = out[3];\n        out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n        out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n        out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n        out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n        return out;\n    }\n    /**\n     * Rotates a {@link Quat2} around the Z axis\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the dual quaternion to rotate\n     * @param rad - angle (in radians) to rotate\n     * @returns `out`\n     */\n    static rotateZ(out, a, rad) {\n        let bx = -a[0];\n        let by = -a[1];\n        let bz = -a[2];\n        let bw = a[3];\n        const ax = a[4];\n        const ay = a[5];\n        const az = a[6];\n        const aw = a[7];\n        const ax1 = ax * bw + aw * bx + ay * bz - az * by;\n        const ay1 = ay * bw + aw * by + az * bx - ax * bz;\n        const az1 = az * bw + aw * bz + ax * by - ay * bx;\n        const aw1 = aw * bw - ax * bx - ay * by - az * bz;\n        Quat.rotateZ(out, a, rad);\n        bx = out[0];\n        by = out[1];\n        bz = out[2];\n        bw = out[3];\n        out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n        out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n        out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n        out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n        return out;\n    }\n    /**\n     * Rotates a {@link Quat2} by a given quaternion (a * q)\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the dual quaternion to rotate\n     * @param q - quaternion to rotate by\n     * @returns `out`\n     */\n    static rotateByQuatAppend(out, a, q) {\n        const qx = q[0];\n        const qy = q[1];\n        const qz = q[2];\n        const qw = q[3];\n        let ax = a[0];\n        let ay = a[1];\n        let az = a[2];\n        let aw = a[3];\n        out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n        out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n        out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n        out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n        ax = a[4];\n        ay = a[5];\n        az = a[6];\n        aw = a[7];\n        out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n        out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n        out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n        out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n        return out;\n    }\n    /**\n     * Rotates a {@link Quat2} by a given quaternion (q * a)\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param q - quaternion to rotate by\n     * @param a - the dual quaternion to rotate\n     * @returns `out`\n     */\n    static rotateByQuatPrepend(out, q, a) {\n        const qx = q[0];\n        const qy = q[1];\n        const qz = q[2];\n        const qw = q[3];\n        let bx = a[0];\n        let by = a[1];\n        let bz = a[2];\n        let bw = a[3];\n        out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n        out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n        out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n        out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n        bx = a[4];\n        by = a[5];\n        bz = a[6];\n        bw = a[7];\n        out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n        out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n        out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n        out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n        return out;\n    }\n    /**\n     * Rotates a {@link Quat2} around a given axis. Does the normalization automatically\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the dual quaternion to rotate\n     * @param axis - the axis to rotate around\n     * @param rad - how far the rotation should be\n     * @returns `out`\n     */\n    static rotateAroundAxis(out, a, axis, rad) {\n        //Special case for rad = 0\n        if (Math.abs(rad) < EPSILON) {\n            return Quat2.copy(out, a);\n        }\n        const axisLength = Math.sqrt(axis[0] * axis[0] + axis[1] * axis[1] + axis[2] * axis[2]);\n        rad = rad * 0.5;\n        const s = Math.sin(rad);\n        const bx = (s * axis[0]) / axisLength;\n        const by = (s * axis[1]) / axisLength;\n        const bz = (s * axis[2]) / axisLength;\n        const bw = Math.cos(rad);\n        const ax1 = a[0];\n        const ay1 = a[1];\n        const az1 = a[2];\n        const aw1 = a[3];\n        out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n        out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n        out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n        out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n        const ax = a[4];\n        const ay = a[5];\n        const az = a[6];\n        const aw = a[7];\n        out[4] = ax * bw + aw * bx + ay * bz - az * by;\n        out[5] = ay * bw + aw * by + az * bx - ax * bz;\n        out[6] = az * bw + aw * bz + ax * by - ay * bx;\n        out[7] = aw * bw - ax * bx - ay * by - az * bz;\n        return out;\n    }\n    /**\n     * Adds two {@link Quat2}s\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        out[2] = a[2] + b[2];\n        out[3] = a[3] + b[3];\n        out[4] = a[4] + b[4];\n        out[5] = a[5] + b[5];\n        out[6] = a[6] + b[6];\n        out[7] = a[7] + b[7];\n        return out;\n    }\n    /**\n     * Multiplies two {@link Quat2}s\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns {quat2} out\n     */\n    static multiply(out, a, b) {\n        const ax0 = a[0];\n        const ay0 = a[1];\n        const az0 = a[2];\n        const aw0 = a[3];\n        const bx1 = b[4];\n        const by1 = b[5];\n        const bz1 = b[6];\n        const bw1 = b[7];\n        const ax1 = a[4];\n        const ay1 = a[5];\n        const az1 = a[6];\n        const aw1 = a[7];\n        const bx0 = b[0];\n        const by0 = b[1];\n        const bz0 = b[2];\n        const bw0 = b[3];\n        out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n        out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n        out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n        out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n        out[4] =\n            ax0 * bw1 +\n                aw0 * bx1 +\n                ay0 * bz1 -\n                az0 * by1 +\n                ax1 * bw0 +\n                aw1 * bx0 +\n                ay1 * bz0 -\n                az1 * by0;\n        out[5] =\n            ay0 * bw1 +\n                aw0 * by1 +\n                az0 * bx1 -\n                ax0 * bz1 +\n                ay1 * bw0 +\n                aw1 * by0 +\n                az1 * bx0 -\n                ax1 * bz0;\n        out[6] =\n            az0 * bw1 +\n                aw0 * bz1 +\n                ax0 * by1 -\n                ay0 * bx1 +\n                az1 * bw0 +\n                aw1 * bz0 +\n                ax1 * by0 -\n                ay1 * bx0;\n        out[7] =\n            aw0 * bw1 -\n                ax0 * bx1 -\n                ay0 * by1 -\n                az0 * bz1 +\n                aw1 * bw0 -\n                ax1 * bx0 -\n                ay1 * by0 -\n                az1 * bz0;\n        return out;\n    }\n    /**\n     * Alias for {@link Quat2.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return out; }\n    /**\n     * Scales a {@link Quat2} by a scalar value\n     * @category Static\n     *\n     * @param out - the receiving dual quaterion\n     * @param a - the dual quaternion to scale\n     * @param b - scalar value to scale the dual quaterion by\n     * @returns `out`\n     */\n    static scale(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        out[2] = a[2] * b;\n        out[3] = a[3] * b;\n        out[4] = a[4] * b;\n        out[5] = a[5] * b;\n        out[6] = a[6] * b;\n        out[7] = a[7] * b;\n        return out;\n    }\n    /**\n     * Calculates the dot product of two {@link Quat2}s (The dot product of the real parts)\n     * @category Static\n     *\n     * @param a - the first operand\n     * @param b - the second operand\n     * @returns dot product of a and b\n     */\n    static dot(a, b) { return 0; }\n    /**\n     * Performs a linear interpolation between two {@link Quat2}s\n     * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when `t = 0.5`)\n     * @category Static\n     *\n     * @param out - the receiving dual quat\n     * @param a - the first operand\n     * @param b - the second operand\n     * @param t - interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static lerp(out, a, b, t) {\n        const mt = 1 - t;\n        if (Quat2.dot(a, b) < 0)\n            t = -t;\n        out[0] = a[0] * mt + b[0] * t;\n        out[1] = a[1] * mt + b[1] * t;\n        out[2] = a[2] * mt + b[2] * t;\n        out[3] = a[3] * mt + b[3] * t;\n        out[4] = a[4] * mt + b[4] * t;\n        out[5] = a[5] * mt + b[5] * t;\n        out[6] = a[6] * mt + b[6] * t;\n        out[7] = a[7] * mt + b[7] * t;\n        return out;\n    }\n    /**\n     * Calculates the inverse of a {@link Quat2}. If they are normalized, conjugate is cheaper\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - dual quat to calculate inverse of\n     * @returns `out`\n     */\n    static invert(out, a) {\n        const sqlen = Quat2.squaredLength(a);\n        out[0] = -a[0] / sqlen;\n        out[1] = -a[1] / sqlen;\n        out[2] = -a[2] / sqlen;\n        out[3] = a[3] / sqlen;\n        out[4] = -a[4] / sqlen;\n        out[5] = -a[5] / sqlen;\n        out[6] = -a[6] / sqlen;\n        out[7] = a[7] / sqlen;\n        return out;\n    }\n    /**\n     * Calculates the conjugate of a {@link Quat2}\n     * If the dual quaternion is normalized, this function is faster than {@link Quat2.invert} and produces the same result.\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - dual quaternion to calculate conjugate of\n     * @returns `out`\n     */\n    static conjugate(out, a) {\n        out[0] = -a[0];\n        out[1] = -a[1];\n        out[2] = -a[2];\n        out[3] = a[3];\n        out[4] = -a[4];\n        out[5] = -a[5];\n        out[6] = -a[6];\n        out[7] = a[7];\n        return out;\n    }\n    /**\n     * Calculates the magnitude (length) of a {@link Quat2}\n     * @category Static\n     *\n     * @param a - dual quaternion to calculate length of\n     * @returns length of `a`\n     */\n    static magnitude(a) { return 0; }\n    /**\n     * Alias for {@link Quat2.magnitude}\n     * @category Static\n     */\n    static mag(a) { return 0; }\n    /**\n     * Alias for {@link Quat2.magnitude}\n     * @category Static\n     * @deprecated Use {@link Quat2.magnitude} to avoid conflicts with builtin `length` methods/attribs\n     */\n    // @ts-ignore: Length conflicts with Function.length\n    static length(a) { return 0; }\n    /**\n     * Alias for {@link Quat2.magnitude}\n     * @category Static\n     * @deprecated Use {@link Quat2.mag}\n     */\n    static len(a) { return 0; }\n    /**\n     * Calculates the squared length of a {@link Quat2}\n     * @category Static\n     *\n     * @param a - dual quaternion to calculate squared length of\n     * @returns squared length of a\n     */\n    static squaredLength(a) { return 0; }\n    /**\n     * Alias for {@link Quat2.squaredLength}\n     * @category Static\n     */\n    static sqrLen(a) { return 0; }\n    /**\n     * Normalize a {@link Quat2}\n     * @category Static\n     *\n     * @param out - the receiving dual quaternion\n     * @param a - dual quaternion to normalize\n     * @returns `out`\n     */\n    static normalize(out, a) {\n        let magnitude = Quat2.squaredLength(a);\n        if (magnitude > 0) {\n            magnitude = Math.sqrt(magnitude);\n            const a0 = a[0] / magnitude;\n            const a1 = a[1] / magnitude;\n            const a2 = a[2] / magnitude;\n            const a3 = a[3] / magnitude;\n            const b0 = a[4];\n            const b1 = a[5];\n            const b2 = a[6];\n            const b3 = a[7];\n            const a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n            out[0] = a0;\n            out[1] = a1;\n            out[2] = a2;\n            out[3] = a3;\n            out[4] = (b0 - a0 * a_dot_b) / magnitude;\n            out[5] = (b1 - a1 * a_dot_b) / magnitude;\n            out[6] = (b2 - a2 * a_dot_b) / magnitude;\n            out[7] = (b3 - a3 * a_dot_b) / magnitude;\n        }\n        return out;\n    }\n    /**\n     * Returns a string representation of a {@link Quat2}\n     * @category Static\n     *\n     * @param a - dual quaternion to represent as a string\n     * @returns string representation of the vector\n     */\n    static str(a) {\n        return `Quat2(${a.join(', ')})`;\n    }\n    /**\n     * Returns whether or not the {@link Quat2}s have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first dual quaternion.\n     * @param b - The second dual quaternion.\n     * @returns True if the dual quaternions are equal, false otherwise.\n     */\n    static exactEquals(a, b) {\n        return (a[0] === b[0] &&\n            a[1] === b[1] &&\n            a[2] === b[2] &&\n            a[3] === b[3] &&\n            a[4] === b[4] &&\n            a[5] === b[5] &&\n            a[6] === b[6] &&\n            a[7] === b[7]);\n    }\n    /**\n     * Returns whether or not the {@link Quat2}s have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first dual quaternion.\n     * @param b - The second dual quaternion.\n     * @returns True if the dual quaternions are equal, false otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const a2 = a[2];\n        const a3 = a[3];\n        const a4 = a[4];\n        const a5 = a[5];\n        const a6 = a[6];\n        const a7 = a[7];\n        const b0 = b[0];\n        const b1 = b[1];\n        const b2 = b[2];\n        const b3 = b[3];\n        const b4 = b[4];\n        const b5 = b[5];\n        const b6 = b[6];\n        const b7 = b[7];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n            Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n            Math.abs(a3 - b3) <= EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n            Math.abs(a4 - b4) <= EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n            Math.abs(a5 - b5) <= EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n            Math.abs(a6 - b6) <= EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n            Math.abs(a7 - b7) <= EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)));\n    }\n}\n// Temporary variables to prevent repeated allocations in the algorithms above.\nconst tempQuat = [0, 0, 0, 0];\nconst tempVec3 = [0, 0, 0];\n// Methods which re-use the Quat implementation\n// @ts-ignore\nQuat2.dot = Quat.dot;\n// @ts-ignore\nQuat2.squaredLength = Quat.squaredLength;\n// @ts-ignore\nQuat2.sqrLen = Quat.squaredLength;\n// @ts-ignore\nQuat2.mag = Quat.magnitude;\n// @ts-ignore\nQuat2.length = Quat.magnitude;\n// @ts-ignore\nQuat2.len = Quat.magnitude;\n// Static method alias assignments\nQuat2.mul = Quat2.multiply;\n\n/**\n * 2 Dimensional Vector\n */\nclass Vec2 extends Float32Array {\n    /**\n     * The number of bytes in a {@link Vec2}.\n     */\n    static BYTE_LENGTH = 2 * Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Create a {@link Vec2}.\n     */\n    constructor(...values) {\n        switch (values.length) {\n            case 2: {\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([v, values[1]]);\n                }\n                else {\n                    super(v, values[1], 2);\n                }\n                break;\n            }\n            case 1: {\n                const v = values[0];\n                if (typeof v === 'number') {\n                    super([v, v]);\n                }\n                else {\n                    super(v, 0, 2);\n                }\n                break;\n            }\n            default:\n                super(2);\n                break;\n        }\n    }\n    //============\n    // Attributes\n    //============\n    // Getters and setters to make component access read better.\n    // These are likely to be a little bit slower than direct array access.\n    /**\n     * The x component of the vector. Equivalent to `this[0];`\n     * @category Vector components\n     */\n    get x() { return this[0]; }\n    set x(value) { this[0] = value; }\n    /**\n     * The y component of the vector. Equivalent to `this[1];`\n     * @category Vector components\n     */\n    get y() { return this[1]; }\n    set y(value) { this[1] = value; }\n    // Alternate set of getters and setters in case this is being used to define\n    // a color.\n    /**\n     * The r component of the vector. Equivalent to `this[0];`\n     * @category Color components\n     */\n    get r() { return this[0]; }\n    set r(value) { this[0] = value; }\n    /**\n     * The g component of the vector. Equivalent to `this[1];`\n     * @category Color components\n     */\n    get g() { return this[1]; }\n    set g(value) { this[1] = value; }\n    /**\n     * The magnitude (length) of this.\n     * Equivalent to `Vec2.magnitude(this);`\n     *\n     * Magnitude is used because the `length` attribute is already defined by\n     * `Float32Array` to mean the number of elements in the array.\n     */\n    get magnitude() {\n        return Math.hypot(this[0], this[1]);\n    }\n    /**\n     * Alias for {@link Vec2.magnitude}\n     */\n    get mag() { return this.magnitude; }\n    /**\n     * The squared magnitude (length) of `this`.\n     * Equivalent to `Vec2.squaredMagnitude(this);`\n     */\n    get squaredMagnitude() {\n        const x = this[0];\n        const y = this[1];\n        return x * x + y * y;\n    }\n    /**\n     * Alias for {@link Vec2.squaredMagnitude}\n     */\n    get sqrMag() { return this.squaredMagnitude; }\n    /**\n     * A string representation of `this`\n     * Equivalent to `Vec2.str(this);`\n     */\n    get str() {\n        return Vec2.str(this);\n    }\n    //===================\n    // Instances methods\n    //===================\n    /**\n     * Copy the values from another {@link Vec2} into `this`.\n     *\n     * @param a the source vector\n     * @returns `this`\n     */\n    copy(a) {\n        this.set(a);\n        return this;\n    }\n    // Instead of zero(), use a.fill(0) for instances;\n    /**\n     * Adds a {@link Vec2} to `this`.\n     * Equivalent to `Vec2.add(this, this, b);`\n     *\n     * @param b - The vector to add to `this`\n     * @returns `this`\n     */\n    add(b) {\n        this[0] += b[0];\n        this[1] += b[1];\n        return this;\n    }\n    /**\n     * Subtracts a {@link Vec2} from `this`.\n     * Equivalent to `Vec2.subtract(this, this, b);`\n     *\n     * @param b - The vector to subtract from `this`\n     * @returns `this`\n     */\n    subtract(b) {\n        this[0] -= b[0];\n        this[1] -= b[1];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec2.subtract}\n     */\n    sub(b) { return this; }\n    /**\n     * Multiplies `this` by a {@link Vec2}.\n     * Equivalent to `Vec2.multiply(this, this, b);`\n     *\n     * @param b - The vector to multiply `this` by\n     * @returns `this`\n     */\n    multiply(b) {\n        this[0] *= b[0];\n        this[1] *= b[1];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec2.multiply}\n     */\n    mul(b) { return this; }\n    /**\n     * Divides `this` by a {@link Vec2}.\n     * Equivalent to `Vec2.divide(this, this, b);`\n     *\n     * @param b - The vector to divide `this` by\n     * @returns {Vec2} `this`\n     */\n    divide(b) {\n        this[0] /= b[0];\n        this[1] /= b[1];\n        return this;\n    }\n    /**\n     * Alias for {@link Vec2.divide}\n     */\n    div(b) { return this; }\n    /**\n     * Scales `this` by a scalar number.\n     * Equivalent to `Vec2.scale(this, this, b);`\n     *\n     * @param b - Amount to scale `this` by\n     * @returns `this`\n     */\n    scale(b) {\n        this[0] *= b;\n        this[1] *= b;\n        return this;\n    }\n    /**\n     * Calculates `this` scaled by a scalar value then adds the result to `this`.\n     * Equivalent to `Vec2.scaleAndAdd(this, this, b, scale);`\n     *\n     * @param b - The vector to add to `this`\n     * @param scale - The amount to scale `b` by before adding\n     * @returns `this`\n     */\n    scaleAndAdd(b, scale) {\n        this[0] += b[0] * scale;\n        this[1] += b[1] * scale;\n        return this;\n    }\n    /**\n     * Calculates the euclidian distance between another {@link Vec2} and `this`.\n     * Equivalent to `Vec2.distance(this, b);`\n     *\n     * @param b - The vector to calculate the distance to\n     * @returns Distance between `this` and `b`\n     */\n    distance(b) {\n        return Vec2.distance(this, b);\n    }\n    /**\n     * Alias for {@link Vec2.distance}\n     */\n    dist(b) { return 0; }\n    /**\n     * Calculates the squared euclidian distance between another {@link Vec2} and `this`.\n     * Equivalent to `Vec2.squaredDistance(this, b);`\n     *\n     * @param b The vector to calculate the squared distance to\n     * @returns Squared distance between `this` and `b`\n     */\n    squaredDistance(b) {\n        return Vec2.squaredDistance(this, b);\n    }\n    /**\n     * Alias for {@link Vec2.squaredDistance}\n     */\n    sqrDist(b) { return 0; }\n    /**\n     * Negates the components of `this`.\n     * Equivalent to `Vec2.negate(this, this);`\n     *\n     * @returns `this`\n     */\n    negate() {\n        this[0] *= -1;\n        this[1] *= -1;\n        return this;\n    }\n    /**\n     * Inverts the components of `this`.\n     * Equivalent to `Vec2.inverse(this, this);`\n     *\n     * @returns `this`\n     */\n    invert() {\n        this[0] = 1.0 / this[0];\n        this[1] = 1.0 / this[1];\n        return this;\n    }\n    /**\n     * Calculates the dot product of this and another {@link Vec2}.\n     * Equivalent to `Vec2.dot(this, b);`\n     *\n     * @param b - The second operand\n     * @returns Dot product of `this` and `b`\n     */\n    dot(b) {\n        return this[0] * b[0] + this[1] * b[1];\n    }\n    /**\n     * Normalize `this`.\n     * Equivalent to `Vec2.normalize(this, this);`\n     *\n     * @returns `this`\n     */\n    normalize() {\n        return Vec2.normalize(this, this);\n    }\n    //================\n    // Static methods\n    //================\n    /**\n     * Creates a new, empty {@link Vec2}\n     * @category Static\n     *\n     * @returns A new 2D vector\n     */\n    static create() {\n        return new Vec2();\n    }\n    /**\n     * Creates a new {@link Vec2} initialized with values from an existing vector\n     * @category Static\n     *\n     * @param a - Vector to clone\n     * @returns A new 2D vector\n     */\n    static clone(a) {\n        return new Vec2(a);\n    }\n    /**\n     * Creates a new {@link Vec2} initialized with the given values\n     * @category Static\n     *\n     * @param x - X component\n     * @param y - Y component\n     * @returns A new 2D vector\n     */\n    static fromValues(x, y) {\n        return new Vec2(x, y);\n    }\n    /**\n     * Copy the values from one {@link Vec2} to another\n     * @category Static\n     *\n     * @param out - the receiving vector\n     * @param a - The source vector\n     * @returns `out`\n     */\n    static copy(out, a) {\n        out[0] = a[0];\n        out[1] = a[1];\n        return out;\n    }\n    /**\n     * Set the components of a {@link Vec2} to the given values\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param x - X component\n     * @param y - Y component\n     * @returns `out`\n     */\n    static set(out, x, y) {\n        out[0] = x;\n        out[1] = y;\n        return out;\n    }\n    /**\n     * Adds two {@link Vec2}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static add(out, a, b) {\n        out[0] = a[0] + b[0];\n        out[1] = a[1] + b[1];\n        return out;\n    }\n    /**\n     * Subtracts vector b from vector a\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static subtract(out, a, b) {\n        out[0] = a[0] - b[0];\n        out[1] = a[1] - b[1];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec2.subtract}\n     * @category Static\n     */\n    static sub(out, a, b) { return [0, 0]; }\n    /**\n     * Multiplies two {@link Vec2}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static multiply(out, a, b) {\n        out[0] = a[0] * b[0];\n        out[1] = a[1] * b[1];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec2.multiply}\n     * @category Static\n     */\n    static mul(out, a, b) { return [0, 0]; }\n    /**\n     * Divides two {@link Vec2}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static divide(out, a, b) {\n        out[0] = a[0] / b[0];\n        out[1] = a[1] / b[1];\n        return out;\n    }\n    /**\n     * Alias for {@link Vec2.divide}\n     * @category Static\n     */\n    static div(out, a, b) { return [0, 0]; }\n    /**\n     * Math.ceil the components of a {@link Vec2}\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - Vector to ceil\n     * @returns `out`\n     */\n    static ceil(out, a) {\n        out[0] = Math.ceil(a[0]);\n        out[1] = Math.ceil(a[1]);\n        return out;\n    }\n    /**\n     * Math.floor the components of a {@link Vec2}\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - Vector to floor\n     * @returns `out`\n     */\n    static floor(out, a) {\n        out[0] = Math.floor(a[0]);\n        out[1] = Math.floor(a[1]);\n        return out;\n    }\n    /**\n     * Returns the minimum of two {@link Vec2}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static min(out, a, b) {\n        out[0] = Math.min(a[0], b[0]);\n        out[1] = Math.min(a[1], b[1]);\n        return out;\n    }\n    /**\n     * Returns the maximum of two {@link Vec2}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static max(out, a, b) {\n        out[0] = Math.max(a[0], b[0]);\n        out[1] = Math.max(a[1], b[1]);\n        return out;\n    }\n    /**\n     * Math.round the components of a {@link Vec2}\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - Vector to round\n     * @returns `out`\n     */\n    static round(out, a) {\n        out[0] = Math.round(a[0]);\n        out[1] = Math.round(a[1]);\n        return out;\n    }\n    /**\n     * Scales a {@link Vec2} by a scalar number\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The vector to scale\n     * @param b - Amount to scale the vector by\n     * @returns `out`\n     */\n    static scale(out, a, b) {\n        out[0] = a[0] * b;\n        out[1] = a[1] * b;\n        return out;\n    }\n    /**\n     * Adds two Vec2's after scaling the second operand by a scalar value\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @param scale - The amount to scale b by before adding\n     * @returns `out`\n     */\n    static scaleAndAdd(out, a, b, scale) {\n        out[0] = a[0] + b[0] * scale;\n        out[1] = a[1] + b[1] * scale;\n        return out;\n    }\n    /**\n     * Calculates the euclidian distance between two {@link Vec2}s\n     * @category Static\n     *\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns distance between `a` and `b`\n     */\n    static distance(a, b) {\n        return Math.hypot(b[0] - a[0], b[1] - a[1]);\n    }\n    /**\n     * Alias for {@link Vec2.distance}\n     * @category Static\n     */\n    static dist(a, b) { return 0; }\n    /**\n     * Calculates the squared euclidian distance between two {@link Vec2}s\n     * @category Static\n     *\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns Squared distance between `a` and `b`\n     */\n    static squaredDistance(a, b) {\n        const x = b[0] - a[0];\n        const y = b[1] - a[1];\n        return x * x + y * y;\n    }\n    /**\n     * Alias for {@link Vec2.distance}\n     * @category Static\n     */\n    static sqrDist(a, b) { return 0; }\n    /**\n     * Calculates the magnitude (length) of a {@link Vec2}\n     * @category Static\n     *\n     * @param a - Vector to calculate magnitude of\n     * @returns Magnitude of a\n     */\n    static magnitude(a) {\n        let x = a[0];\n        let y = a[1];\n        return Math.sqrt(x * x + y * y);\n    }\n    /**\n     * Alias for {@link Vec2.magnitude}\n     * @category Static\n     */\n    static mag(a) { return 0; }\n    /**\n     * Alias for {@link Vec2.magnitude}\n     * @category Static\n     * @deprecated Use {@link Vec2.magnitude} to avoid conflicts with builtin `length` methods/attribs\n     *\n     * @param a - vector to calculate length of\n     * @returns length of a\n     */\n    // @ts-ignore: Length conflicts with Function.length\n    static length(a) { return 0; }\n    /**\n     * Alias for {@link Vec2.magnitude}\n     * @category Static\n     * @deprecated Use {@link Vec2.mag}\n     */\n    static len(a) { return 0; }\n    /**\n     * Calculates the squared length of a {@link Vec2}\n     * @category Static\n     *\n     * @param a - Vector to calculate squared length of\n     * @returns Squared length of a\n     */\n    static squaredLength(a) {\n        const x = a[0];\n        const y = a[1];\n        return x * x + y * y;\n    }\n    /**\n     * Alias for {@link Vec2.squaredLength}\n     */\n    static sqrLen(a, b) { return 0; }\n    /**\n     * Negates the components of a {@link Vec2}\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - Vector to negate\n     * @returns `out`\n     */\n    static negate(out, a) {\n        out[0] = -a[0];\n        out[1] = -a[1];\n        return out;\n    }\n    /**\n     * Returns the inverse of the components of a {@link Vec2}\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - Vector to invert\n     * @returns `out`\n     */\n    static inverse(out, a) {\n        out[0] = 1.0 / a[0];\n        out[1] = 1.0 / a[1];\n        return out;\n    }\n    /**\n     * Normalize a {@link Vec2}\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - Vector to normalize\n     * @returns `out`\n     */\n    static normalize(out, a) {\n        const x = a[0];\n        const y = a[1];\n        let len = x * x + y * y;\n        if (len > 0) {\n            //TODO: evaluate use of glm_invsqrt here?\n            len = 1 / Math.sqrt(len);\n        }\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        return out;\n    }\n    /**\n     * Calculates the dot product of two {@link Vec2}s\n     * @category Static\n     *\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns Dot product of `a` and `b`\n     */\n    static dot(a, b) {\n        return a[0] * b[0] + a[1] * b[1];\n    }\n    /**\n     * Computes the cross product of two {@link Vec2}s\n     * Note that the cross product must by definition produce a 3D vector.\n     * For this reason there is also not instance equivalent for this function.\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns `out`\n     */\n    static cross(out, a, b) {\n        const z = a[0] * b[1] - a[1] * b[0];\n        out[0] = out[1] = 0;\n        out[2] = z;\n        return out;\n    }\n    /**\n     * Performs a linear interpolation between two {@link Vec2}s\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @param a - The first operand\n     * @param b - The second operand\n     * @param t - Interpolation amount, in the range [0-1], between the two inputs\n     * @returns `out`\n     */\n    static lerp(out, a, b, t) {\n        const ax = a[0];\n        const ay = a[1];\n        out[0] = ax + t * (b[0] - ax);\n        out[1] = ay + t * (b[1] - ay);\n        return out;\n    }\n    /**\n     * Transforms the {@link Vec2} with a {@link Mat2}\n     *\n     * @param out - The receiving vector\n     * @param a - The vector to transform\n     * @param m - Matrix to transform with\n     * @returns `out`\n     */\n    static transformMat2(out, a, m) {\n        const x = a[0];\n        const y = a[1];\n        out[0] = m[0] * x + m[2] * y;\n        out[1] = m[1] * x + m[3] * y;\n        return out;\n    }\n    /**\n     * Transforms the {@link Vec2} with a {@link Mat2d}\n     *\n     * @param out - The receiving vector\n     * @param a - The vector to transform\n     * @param m - Matrix to transform with\n     * @returns `out`\n     */\n    static transformMat2d(out, a, m) {\n        const x = a[0];\n        const y = a[1];\n        out[0] = m[0] * x + m[2] * y + m[4];\n        out[1] = m[1] * x + m[3] * y + m[5];\n        return out;\n    }\n    /**\n     * Transforms the {@link Vec2} with a {@link Mat3}\n     * 3rd vector component is implicitly '1'\n     *\n     * @param out - The receiving vector\n     * @param a - The vector to transform\n     * @param m - Matrix to transform with\n     * @returns `out`\n     */\n    static transformMat3(out, a, m) {\n        const x = a[0];\n        const y = a[1];\n        out[0] = m[0] * x + m[3] * y + m[6];\n        out[1] = m[1] * x + m[4] * y + m[7];\n        return out;\n    }\n    /**\n     * Transforms the {@link Vec2} with a {@link Mat4}\n     * 3rd vector component is implicitly '0'\n     * 4th vector component is implicitly '1'\n     *\n     * @param out - The receiving vector\n     * @param a - The vector to transform\n     * @param m - Matrix to transform with\n     * @returns `out`\n     */\n    static transformMat4(out, a, m) {\n        const x = a[0];\n        const y = a[1];\n        out[0] = m[0] * x + m[4] * y + m[12];\n        out[1] = m[1] * x + m[5] * y + m[13];\n        return out;\n    }\n    /**\n     * Rotate a 2D vector\n     * @category Static\n     *\n     * @param out - The receiving {@link Vec2}\n     * @param a - The {@link Vec2} point to rotate\n     * @param b - The origin of the rotation\n     * @param rad - The angle of rotation in radians\n     * @returns `out`\n     */\n    static rotate(out, a, b, rad) {\n        //Translate point to the origin\n        const p0 = a[0] - b[0];\n        const p1 = a[1] - b[1];\n        const sinC = Math.sin(rad);\n        const cosC = Math.cos(rad);\n        //perform rotation and translate to correct position\n        out[0] = p0 * cosC - p1 * sinC + b[0];\n        out[1] = p0 * sinC + p1 * cosC + b[1];\n        return out;\n    }\n    /**\n     * Get the angle between two 2D vectors\n     * @category Static\n     *\n     * @param a - The first operand\n     * @param b - The second operand\n     * @returns The angle in radians\n     */\n    static angle(a, b) {\n        const x1 = a[0];\n        const y1 = a[1];\n        const x2 = b[0];\n        const y2 = b[1];\n        // mag is the product of the magnitudes of a and b\n        const mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2);\n        // mag &&.. short circuits if mag == 0\n        const cosine = mag && (x1 * x2 + y1 * y2) / mag;\n        // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n        return Math.acos(Math.min(Math.max(cosine, -1), 1));\n    }\n    /**\n     * Set the components of a {@link Vec2} to zero\n     * @category Static\n     *\n     * @param out - The receiving vector\n     * @returns `out`\n     */\n    static zero(out) {\n        out[0] = 0.0;\n        out[1] = 0.0;\n        return out;\n    }\n    /**\n     * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n     * @category Static\n     *\n     * @param a - The first vector.\n     * @param b - The second vector.\n     * @returns `true` if the vectors components are ===, `false` otherwise.\n     */\n    static exactEquals(a, b) {\n        return a[0] === b[0] && a[1] === b[1];\n    }\n    /**\n     * Returns whether or not the vectors have approximately the same elements in the same position.\n     * @category Static\n     *\n     * @param a - The first vector.\n     * @param b - The second vector.\n     * @returns `true` if the vectors are approximately equal, `false` otherwise.\n     */\n    static equals(a, b) {\n        const a0 = a[0];\n        const a1 = a[1];\n        const b0 = b[0];\n        const b1 = b[1];\n        return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)));\n    }\n    /**\n     * Returns a string representation of a vector\n     * @category Static\n     *\n     * @param a - Vector to represent as a string\n     * @returns String representation of the vector\n     */\n    static str(a) {\n        return `Vec2(${a.join(', ')})`;\n    }\n}\n// Instance method alias assignments\nVec2.prototype.sub = Vec2.prototype.subtract;\nVec2.prototype.mul = Vec2.prototype.multiply;\nVec2.prototype.div = Vec2.prototype.divide;\nVec2.prototype.dist = Vec2.prototype.distance;\nVec2.prototype.sqrDist = Vec2.prototype.squaredDistance;\n// Static method alias assignments\nVec2.sub = Vec2.subtract;\nVec2.mul = Vec2.multiply;\nVec2.div = Vec2.divide;\nVec2.dist = Vec2.distance;\nVec2.sqrDist = Vec2.squaredDistance;\nVec2.sqrLen = Vec2.squaredLength;\nVec2.mag = Vec2.magnitude;\nVec2.length = Vec2.magnitude;\nVec2.len = Vec2.magnitude;\n\n// The contents of the following section are autogenerated by scripts/gen-swizzle.js and should\n// not be modified by hand.\n// [Swizzle Autogen]\nconst VEC2_SWIZZLES = ['xx', 'xy', 'yx', 'yy', 'xxx', 'xxy', 'xyx', 'xyy', 'yxx', 'yxy', 'yyx', 'yyy', 'xxxx', 'xxxy', 'xxyx', 'xxyy', 'xyxx', 'xyxy', 'xyyx', 'xyyy', 'yxxx', 'yxxy', 'yxyx', 'yxyy', 'yyxx', 'yyxy', 'yyyx', 'yyyy', 'rr', 'rg', 'gr', 'gg', 'rrr', 'rrg', 'rgr', 'rgg', 'grr', 'grg', 'ggr', 'ggg', 'rrrr', 'rrrg', 'rrgr', 'rrgg', 'rgrr', 'rgrg', 'rggr', 'rggg', 'grrr', 'grrg', 'grgr', 'grgg', 'ggrr', 'ggrg', 'gggr', 'gggg'];\nconst VEC3_SWIZZLES = ['xz', 'yz', 'zx', 'zy', 'zz', 'xxz', 'xyz', 'xzx', 'xzy', 'xzz', 'yxz', 'yyz', 'yzx', 'yzy', 'yzz', 'zxx', 'zxy', 'zxz', 'zyx', 'zyy', 'zyz', 'zzx', 'zzy', 'zzz', 'xxxz', 'xxyz', 'xxzx', 'xxzy', 'xxzz', 'xyxz', 'xyyz', 'xyzx', 'xyzy', 'xyzz', 'xzxx', 'xzxy', 'xzxz', 'xzyx', 'xzyy', 'xzyz', 'xzzx', 'xzzy', 'xzzz', 'yxxz', 'yxyz', 'yxzx', 'yxzy', 'yxzz', 'yyxz', 'yyyz', 'yyzx', 'yyzy', 'yyzz', 'yzxx', 'yzxy', 'yzxz', 'yzyx', 'yzyy', 'yzyz', 'yzzx', 'yzzy', 'yzzz', 'zxxx', 'zxxy', 'zxxz', 'zxyx', 'zxyy', 'zxyz', 'zxzx', 'zxzy', 'zxzz', 'zyxx', 'zyxy', 'zyxz', 'zyyx', 'zyyy', 'zyyz', 'zyzx', 'zyzy', 'zyzz', 'zzxx', 'zzxy', 'zzxz', 'zzyx', 'zzyy', 'zzyz', 'zzzx', 'zzzy', 'zzzz', 'rb', 'gb', 'br', 'bg', 'bb', 'rrb', 'rgb', 'rbr', 'rbg', 'rbb', 'grb', 'ggb', 'gbr', 'gbg', 'gbb', 'brr', 'brg', 'brb', 'bgr', 'bgg', 'bgb', 'bbr', 'bbg', 'bbb', 'rrrb', 'rrgb', 'rrbr', 'rrbg', 'rrbb', 'rgrb', 'rggb', 'rgbr', 'rgbg', 'rgbb', 'rbrr', 'rbrg', 'rbrb', 'rbgr', 'rbgg', 'rbgb', 'rbbr', 'rbbg', 'rbbb', 'grrb', 'grgb', 'grbr', 'grbg', 'grbb', 'ggrb', 'gggb', 'ggbr', 'ggbg', 'ggbb', 'gbrr', 'gbrg', 'gbrb', 'gbgr', 'gbgg', 'gbgb', 'gbbr', 'gbbg', 'gbbb', 'brrr', 'brrg', 'brrb', 'brgr', 'brgg', 'brgb', 'brbr', 'brbg', 'brbb', 'bgrr', 'bgrg', 'bgrb', 'bggr', 'bggg', 'bggb', 'bgbr', 'bgbg', 'bgbb', 'bbrr', 'bbrg', 'bbrb', 'bbgr', 'bbgg', 'bbgb', 'bbbr', 'bbbg', 'bbbb'];\nconst VEC4_SWIZZLES = ['xw', 'yw', 'zw', 'wx', 'wy', 'wz', 'ww', 'xxw', 'xyw', 'xzw', 'xwx', 'xwy', 'xwz', 'xww', 'yxw', 'yyw', 'yzw', 'ywx', 'ywy', 'ywz', 'yww', 'zxw', 'zyw', 'zzw', 'zwx', 'zwy', 'zwz', 'zww', 'wxx', 'wxy', 'wxz', 'wxw', 'wyx', 'wyy', 'wyz', 'wyw', 'wzx', 'wzy', 'wzz', 'wzw', 'wwx', 'wwy', 'wwz', 'www', 'xxxw', 'xxyw', 'xxzw', 'xxwx', 'xxwy', 'xxwz', 'xxww', 'xyxw', 'xyyw', 'xyzw', 'xywx', 'xywy', 'xywz', 'xyww', 'xzxw', 'xzyw', 'xzzw', 'xzwx', 'xzwy', 'xzwz', 'xzww', 'xwxx', 'xwxy', 'xwxz', 'xwxw', 'xwyx', 'xwyy', 'xwyz', 'xwyw', 'xwzx', 'xwzy', 'xwzz', 'xwzw', 'xwwx', 'xwwy', 'xwwz', 'xwww', 'yxxw', 'yxyw', 'yxzw', 'yxwx', 'yxwy', 'yxwz', 'yxww', 'yyxw', 'yyyw', 'yyzw', 'yywx', 'yywy', 'yywz', 'yyww', 'yzxw', 'yzyw', 'yzzw', 'yzwx', 'yzwy', 'yzwz', 'yzww', 'ywxx', 'ywxy', 'ywxz', 'ywxw', 'ywyx', 'ywyy', 'ywyz', 'ywyw', 'ywzx', 'ywzy', 'ywzz', 'ywzw', 'ywwx', 'ywwy', 'ywwz', 'ywww', 'zxxw', 'zxyw', 'zxzw', 'zxwx', 'zxwy', 'zxwz', 'zxww', 'zyxw', 'zyyw', 'zyzw', 'zywx', 'zywy', 'zywz', 'zyww', 'zzxw', 'zzyw', 'zzzw', 'zzwx', 'zzwy', 'zzwz', 'zzww', 'zwxx', 'zwxy', 'zwxz', 'zwxw', 'zwyx', 'zwyy', 'zwyz', 'zwyw', 'zwzx', 'zwzy', 'zwzz', 'zwzw', 'zwwx', 'zwwy', 'zwwz', 'zwww', 'wxxx', 'wxxy', 'wxxz', 'wxxw', 'wxyx', 'wxyy', 'wxyz', 'wxyw', 'wxzx', 'wxzy', 'wxzz', 'wxzw', 'wxwx', 'wxwy', 'wxwz', 'wxww', 'wyxx', 'wyxy', 'wyxz', 'wyxw', 'wyyx', 'wyyy', 'wyyz', 'wyyw', 'wyzx', 'wyzy', 'wyzz', 'wyzw', 'wywx', 'wywy', 'wywz', 'wyww', 'wzxx', 'wzxy', 'wzxz', 'wzxw', 'wzyx', 'wzyy', 'wzyz', 'wzyw', 'wzzx', 'wzzy', 'wzzz', 'wzzw', 'wzwx', 'wzwy', 'wzwz', 'wzww', 'wwxx', 'wwxy', 'wwxz', 'wwxw', 'wwyx', 'wwyy', 'wwyz', 'wwyw', 'wwzx', 'wwzy', 'wwzz', 'wwzw', 'wwwx', 'wwwy', 'wwwz', 'wwww', 'ra', 'ga', 'ba', 'ar', 'ag', 'ab', 'aa', 'rra', 'rga', 'rba', 'rar', 'rag', 'rab', 'raa', 'gra', 'gga', 'gba', 'gar', 'gag', 'gab', 'gaa', 'bra', 'bga', 'bba', 'bar', 'bag', 'bab', 'baa', 'arr', 'arg', 'arb', 'ara', 'agr', 'agg', 'agb', 'aga', 'abr', 'abg', 'abb', 'aba', 'aar', 'aag', 'aab', 'aaa', 'rrra', 'rrga', 'rrba', 'rrar', 'rrag', 'rrab', 'rraa', 'rgra', 'rgga', 'rgba', 'rgar', 'rgag', 'rgab', 'rgaa', 'rbra', 'rbga', 'rbba', 'rbar', 'rbag', 'rbab', 'rbaa', 'rarr', 'rarg', 'rarb', 'rara', 'ragr', 'ragg', 'ragb', 'raga', 'rabr', 'rabg', 'rabb', 'raba', 'raar', 'raag', 'raab', 'raaa', 'grra', 'grga', 'grba', 'grar', 'grag', 'grab', 'graa', 'ggra', 'ggga', 'ggba', 'ggar', 'ggag', 'ggab', 'ggaa', 'gbra', 'gbga', 'gbba', 'gbar', 'gbag', 'gbab', 'gbaa', 'garr', 'garg', 'garb', 'gara', 'gagr', 'gagg', 'gagb', 'gaga', 'gabr', 'gabg', 'gabb', 'gaba', 'gaar', 'gaag', 'gaab', 'gaaa', 'brra', 'brga', 'brba', 'brar', 'brag', 'brab', 'braa', 'bgra', 'bgga', 'bgba', 'bgar', 'bgag', 'bgab', 'bgaa', 'bbra', 'bbga', 'bbba', 'bbar', 'bbag', 'bbab', 'bbaa', 'barr', 'barg', 'barb', 'bara', 'bagr', 'bagg', 'bagb', 'baga', 'babr', 'babg', 'babb', 'baba', 'baar', 'baag', 'baab', 'baaa', 'arrr', 'arrg', 'arrb', 'arra', 'argr', 'argg', 'argb', 'arga', 'arbr', 'arbg', 'arbb', 'arba', 'arar', 'arag', 'arab', 'araa', 'agrr', 'agrg', 'agrb', 'agra', 'aggr', 'aggg', 'aggb', 'agga', 'agbr', 'agbg', 'agbb', 'agba', 'agar', 'agag', 'agab', 'agaa', 'abrr', 'abrg', 'abrb', 'abra', 'abgr', 'abgg', 'abgb', 'abga', 'abbr', 'abbg', 'abbb', 'abba', 'abar', 'abag', 'abab', 'abaa', 'aarr', 'aarg', 'aarb', 'aara', 'aagr', 'aagg', 'aagb', 'aaga', 'aabr', 'aabg', 'aabb', 'aaba', 'aaar', 'aaag', 'aaab', 'aaaa'];\n// [/Swizzle Autogen]\nconst SWIZZLE_INDEX = {\n    x: 0, r: 0,\n    y: 1, g: 1,\n    z: 2, b: 2,\n    w: 3, a: 3,\n};\nfunction getSwizzleImpl(swizzle) {\n    switch (swizzle.length) {\n        case 2:\n            return function () { return new Vec2(this[SWIZZLE_INDEX[swizzle[0]]], this[SWIZZLE_INDEX[swizzle[1]]]); };\n        case 3:\n            return function () { return new Vec3(this[SWIZZLE_INDEX[swizzle[0]]], this[SWIZZLE_INDEX[swizzle[1]]], this[SWIZZLE_INDEX[swizzle[2]]]); };\n        case 4:\n            return function () { return new Vec4(this[SWIZZLE_INDEX[swizzle[0]]], this[SWIZZLE_INDEX[swizzle[1]]], this[SWIZZLE_INDEX[swizzle[2]]], this[SWIZZLE_INDEX[swizzle[3]]]); };\n    }\n}\nlet swizzlesEnabled = false;\n/**\n * Enables Swizzle operations on {@link Vec2}, {@link Vec3}, and {@link Vec4} types.\n *\n * Swizzle operations are performed by using the `.` operator in conjunction with any combination\n * of between two to four component names, either from the set `xyzw` or `rgbw` (though not intermixed).\n * They return a new vector with the same number of components as specified in the swizzle attribute.\n *\n * @example\n * ```js\n * import { Vec3, EnableSwizzles } from 'gl-matrix';\n *\n * EnableSwizzles();\n *\n * let v = new Vec3(0, 1, 2);\n *\n * v.yx // returns new Vec2(1, 0);\n * v.xzy // returns new Vec3(0, 2, 1);\n * v.zyxz // returns new Vec4(2, 1, 0, 2);\n *\n * v.rgb // returns new Vec3(0, 1, 2);\n * v.rbg // returns new Vec3(0, 2, 1);\n * v.gg // returns new Vec2(1, 1);\n * ```\n */\nfunction EnableSwizzles() {\n    if (swizzlesEnabled) {\n        return;\n    }\n    for (const swizzle of VEC2_SWIZZLES) {\n        const impl = getSwizzleImpl(swizzle);\n        Object.defineProperty(Vec2.prototype, swizzle, {\n            get: impl\n        });\n        Object.defineProperty(Vec3.prototype, swizzle, {\n            get: impl\n        });\n        Object.defineProperty(Vec4.prototype, swizzle, {\n            get: impl\n        });\n    }\n    for (const swizzle of VEC3_SWIZZLES) {\n        const impl = getSwizzleImpl(swizzle);\n        Object.defineProperty(Vec3.prototype, swizzle, {\n            get: impl\n        });\n        Object.defineProperty(Vec4.prototype, swizzle, {\n            get: impl\n        });\n    }\n    for (const swizzle of VEC4_SWIZZLES) {\n        const impl = getSwizzleImpl(swizzle);\n        Object.defineProperty(Vec4.prototype, swizzle, {\n            get: impl\n        });\n    }\n    swizzlesEnabled = true;\n}\n\nexport { EnableSwizzles, Mat2, Mat2d, Mat3, Mat4, Quat, Quat2, Vec2, Vec3, Vec4 };\n//# sourceMappingURL=index.js.map\n","/**\n * Awaits `requestAnimationFrame` calls by the counter specified. This allows asynchronous applications for direct /\n * inline style modification amongst other direct animation techniques.\n *\n * @param {number}   [cntr=1] - A positive integer greater than 0 for amount of requestAnimationFrames to wait.\n *\n * @returns {Promise<number>} Returns current time equivalent to `performance.now()`.\n */\nasync function nextAnimationFrame(cntr = 1)\n{\n   if (!Number.isInteger(cntr) || cntr < 1)\n   {\n      throw new TypeError(`nextAnimationFrame error: 'cntr' must be a positive integer greater than 0.`);\n   }\n\n   let currentTime = performance.now();\n   for (;--cntr >= 0;)\n   {\n      currentTime = await new Promise((resolve) => requestAnimationFrame(resolve));\n   }\n\n   return currentTime;\n}\n\nexport { nextAnimationFrame };\n//# sourceMappingURL=index.js.map\n","/**\n * Clamps a value between min / max values.\n *\n * @param {number}   value - Value to clamp.\n *\n * @param {number}   min - Minimum value.\n *\n * @param {number}   max - Maximum value.\n *\n * @returns {number} Clamped value.\n */\nfunction clamp(value = 0, min = 0, max = 0)\n{\n   return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Converts the given number from degrees to radians.\n *\n * @param {number}   deg - Degree number to convert\n *\n * @returns {number} Degree as radians.\n */\nfunction degToRad(deg)\n{\n   return deg * (Math.PI / 180.0);\n}\n\n/**\n * Converts the given number from radians to degrees.\n *\n * @param {number}   rad - Radian number to convert.\n *\n * @returns {number} Degree as radians.\n */\nfunction radToDeg(rad)\n{\n   return rad * (180.0 / Math.PI);\n}\n\nexport { clamp, degToRad, radToDeg };\n//# sourceMappingURL=index.js.map\n","import { propertyStore } from '@typhonjs-fvtt/runtime/svelte/store/writable-derived';\nimport { isObject, isPlainObject, isIterable, hasSetter } from '@typhonjs-fvtt/runtime/util/object';\nimport { subscribeIgnoreFirst } from '@typhonjs-fvtt/runtime/util/store';\nimport { cubicOut, linear } from 'svelte/easing';\nimport { lerp } from '@typhonjs-fvtt/runtime/math/interpolate';\nimport { writable } from 'svelte/store';\nimport { StyleParse } from '@typhonjs-fvtt/runtime/util/browser';\nimport { Mat4, Vec3 } from '@typhonjs-fvtt/runtime/math/gl-matrix';\nimport { nextAnimationFrame } from '@typhonjs-fvtt/runtime/util/animate';\nimport { degToRad, clamp } from '@typhonjs-fvtt/runtime/math/util';\n\n/**\n * Provides a TJSBasicAnimation implementation for TJSPosition animation.\n */\nclass AnimationControl\n{\n   /** @type {object} */\n   #animationData;\n\n   /** @type {Promise<void>} */\n   #finishedPromise;\n\n   #willFinish;\n\n   /**\n    * Defines a static empty / void animation control.\n    *\n    * @type {AnimationControl}\n    */\n   static #voidControl = new AnimationControl(null);\n\n   /**\n    * Provides a static void / undefined AnimationControl that is automatically resolved.\n    *\n    * @returns {AnimationControl} Void AnimationControl\n    */\n   static get voidControl() { return this.#voidControl; }\n\n   /**\n    * @param {object|null} [animationData] - Animation data from {@link AnimationAPI}.\n    *\n    * @param {boolean}     [willFinish] - Promise that tracks animation finished state.\n    */\n   constructor(animationData, willFinish = false)\n   {\n      this.#animationData = animationData;\n      this.#willFinish = willFinish;\n\n      // Set this control to animation data.\n      if (isObject(animationData)) { animationData.control = this; }\n   }\n\n   /**\n    * Get a promise that resolves when animation is finished.\n    *\n    * @returns {Promise<void>}\n    */\n   get finished()\n   {\n      if (!(this.#finishedPromise instanceof Promise))\n      {\n         this.#finishedPromise = this.#willFinish ? new Promise((resolve) => this.#animationData.resolve = resolve) :\n          Promise.resolve();\n      }\n\n      return this.#finishedPromise;\n   }\n\n   /**\n    * Returns whether this animation is currently active / animating.\n    *\n    * Note: a delayed animation may not be started / active yet. Use {@link AnimationControl.isFinished} to determine\n    * if an animation is actually finished.\n    *\n    * @returns {boolean} Animation active state.\n    */\n   get isActive() { return this.#animationData.active; }\n\n   /**\n    * Returns whether this animation is completely finished.\n    *\n    * @returns {boolean} Animation finished state.\n    */\n   get isFinished() { return this.#animationData.finished; }\n\n   /**\n    * Cancels the animation.\n    */\n   cancel()\n   {\n      const animationData = this.#animationData;\n\n      if (animationData === null || animationData === void 0) { return; }\n\n      // Set cancelled state to true and this animation data instance will be removed from AnimationManager on next\n      // update.\n      animationData.cancelled = true;\n   }\n}\n\n/**\n * Provides animation management and scheduling allowing all TJSPosition instances to utilize one micro-task.\n */\nclass AnimationManager\n{\n   /**\n    * @type {object[]}\n    */\n   static activeList = [];\n\n   /**\n    * @type {object[]}\n    */\n   static newList = [];\n\n   /**\n    * @type {number}\n    */\n   static current;\n\n   /**\n    * Add animation data.\n    *\n    * @param {object}   data -\n    */\n   static add(data)\n   {\n      const now = performance.now();\n\n      // Offset start time by delta between last rAF time. This allows continuous tween cycles to appear naturally as\n      // starting from the instant they are added to the AnimationManager. This is what makes `draggable` smooth when\n      // easing is enabled.\n      data.start = now + (AnimationManager.current - now);\n\n      AnimationManager.newList.push(data);\n   }\n\n   /**\n    * Manage all animation\n    */\n   static animate()\n   {\n      const current = AnimationManager.current = performance.now();\n\n      // Early out of the rAF callback when there are no current animations.\n      if (AnimationManager.activeList.length === 0 && AnimationManager.newList.length === 0)\n      {\n         globalThis.requestAnimationFrame(AnimationManager.animate);\n         return;\n      }\n\n      if (AnimationManager.newList.length)\n      {\n         // Process new data\n         for (let cntr = AnimationManager.newList.length; --cntr >= 0;)\n         {\n            const data = AnimationManager.newList[cntr];\n\n            // If animation instance has been cancelled before start then remove it from new list and cleanup.\n            if (data.cancelled)\n            {\n               AnimationManager.newList.splice(cntr, 1);\n               data.cleanup(data);\n            }\n\n            // If data is active then process it now. Delayed animations start with `active` false.\n            if (data.active)\n            {\n               // Remove from new list and add to active list.\n               AnimationManager.newList.splice(cntr, 1);\n               AnimationManager.activeList.push(data);\n            }\n         }\n      }\n\n      // Process active animations.\n      for (let cntr = AnimationManager.activeList.length; --cntr >= 0;)\n      {\n         const data = AnimationManager.activeList[cntr];\n\n         // Remove any animations that have been canceled.\n         // Ensure that the element is still connected otherwise remove it from active list and continue.\n         if (data.cancelled || (data.el !== void 0 && !data.el.isConnected))\n         {\n            AnimationManager.activeList.splice(cntr, 1);\n            data.cleanup(data);\n            continue;\n         }\n\n         data.current = current - data.start;\n\n         // Remove this animation instance if current animating time exceeds duration.\n         if (data.current >= data.duration)\n         {\n            // Prepare final update with end position data.\n            for (let dataCntr = data.keys.length; --dataCntr >= 0;)\n            {\n               const key = data.keys[dataCntr];\n               data.newData[key] = data.destination[key];\n            }\n\n            data.position.set(data.newData);\n\n            AnimationManager.activeList.splice(cntr, 1);\n            data.cleanup(data);\n\n            continue;\n         }\n\n         // Apply easing to create an eased time.\n         const easedTime = data.ease(data.current / data.duration);\n\n         for (let dataCntr = data.keys.length; --dataCntr >= 0;)\n         {\n            const key = data.keys[dataCntr];\n            data.newData[key] = data.interpolate(data.initial[key], data.destination[key], easedTime);\n         }\n\n         data.position.set(data.newData);\n      }\n\n      globalThis.requestAnimationFrame(AnimationManager.animate);\n   }\n\n   /**\n    * Cancels all animations for given TJSPosition instance.\n    *\n    * @param {import('../').TJSPosition} position - TJSPosition instance.\n    */\n   static cancel(position)\n   {\n      for (let cntr = AnimationManager.activeList.length; --cntr >= 0;)\n      {\n         const data = AnimationManager.activeList[cntr];\n         if (data.position === position)\n         {\n            AnimationManager.activeList.splice(cntr, 1);\n            data.cancelled = true;\n            data.cleanup(data);\n         }\n      }\n\n      for (let cntr = AnimationManager.newList.length; --cntr >= 0;)\n      {\n         const data = AnimationManager.newList[cntr];\n         if (data.position === position)\n         {\n            AnimationManager.newList.splice(cntr, 1);\n            data.cancelled = true;\n            data.cleanup(data);\n         }\n      }\n   }\n\n   /**\n    * Cancels all active and delayed animations.\n    */\n   static cancelAll()\n   {\n      for (let cntr = AnimationManager.activeList.length; --cntr >= 0;)\n      {\n         const data = AnimationManager.activeList[cntr];\n         data.cancelled = true;\n         data.cleanup(data);\n      }\n\n      for (let cntr = AnimationManager.newList.length; --cntr >= 0;)\n      {\n         const data = AnimationManager.newList[cntr];\n         data.cancelled = true;\n         data.cleanup(data);\n      }\n\n      AnimationManager.activeList.length = 0;\n      AnimationManager.newList.length = 0;\n   }\n\n   /**\n    * Gets all {@link AnimationControl} instances for a given TJSPosition instance.\n    *\n    * @param {import('../index.js').TJSPosition} position - TJSPosition instance.\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation[]} All scheduled AnimationControl instances for the\n    *          given TJSPosition instance.\n    */\n   static getScheduled(position)\n   {\n      const results = [];\n\n      for (let cntr = AnimationManager.activeList.length; --cntr >= 0;)\n      {\n         const data = AnimationManager.activeList[cntr];\n         if (data.position === position)\n         {\n            results.push(data.control);\n         }\n      }\n\n      for (let cntr = AnimationManager.newList.length; --cntr >= 0;)\n      {\n         const data = AnimationManager.newList[cntr];\n         if (data.position === position)\n         {\n            results.push(data.control);\n         }\n      }\n\n      return results;\n   }\n}\n\n// Start animation manager immediately. It constantly is running in background.\nAnimationManager.animate();\n\n/**\n * Stores the TJSPositionData properties that can be animated.\n *\n * @type {Set<string>}\n */\nconst animateKeys = new Set([\n   // Main keys\n   'left', 'top', 'maxWidth', 'maxHeight', 'minWidth', 'minHeight', 'width', 'height',\n   'rotateX', 'rotateY', 'rotateZ', 'scale', 'translateX', 'translateY', 'translateZ', 'zIndex',\n\n   // Aliases\n   'rotation'\n]);\n\n/**\n * Defines the keys of TJSPositionData that are transform keys.\n *\n * @type {string[]}\n */\nconst transformKeys = ['rotateX', 'rotateY', 'rotateZ', 'scale', 'translateX', 'translateY', 'translateZ'];\n\nObject.freeze(transformKeys);\n\n/**\n * Parses a relative value string in the form of '+=', '-=', or '*=' and float / numeric value. IE '+=0.2'.\n *\n * @type {RegExp}\n */\nconst relativeRegex = /^([-+*])=(-?[\\d]*\\.?[\\d]+)$/;\n\n/**\n * Provides numeric defaults for all parameters. This is used by {@link TJSPosition.get} to optionally\n * provide numeric defaults.\n *\n * @type {{rotation: number, scale: number, minWidth: null, minHeight: null, translateZ: number, top: number, left: number, maxHeight: null, translateY: number, translateX: number, width: number, transformOrigin: null, rotateX: number, rotateY: number, height: number, maxWidth: null, zIndex: null, rotateZ: number}}\n */\nconst numericDefaults = {\n   // Other keys\n   height: 0,\n   left: 0,\n   maxHeight: null,\n   maxWidth: null,\n   minHeight: null,\n   minWidth: null,\n   top: 0,\n   transformOrigin: null,\n   width: 0,\n   zIndex: null,\n\n   rotateX: 0,\n   rotateY: 0,\n   rotateZ: 0,\n   scale: 1,\n   translateX: 0,\n   translateY: 0,\n   translateZ: 0,\n\n   rotation: 0\n};\n\nObject.freeze(numericDefaults);\n\n/**\n * Sets numeric defaults for a {@link TJSPositionData} like object.\n *\n * @param {object}   data - A TJSPositionData like object.\n */\nfunction setNumericDefaults(data)\n{\n   // Transform keys\n   if (data.rotateX === null) { data.rotateX = 0; }\n   if (data.rotateY === null) { data.rotateY = 0; }\n   if (data.rotateZ === null) { data.rotateZ = 0; }\n   if (data.translateX === null) { data.translateX = 0; }\n   if (data.translateY === null) { data.translateY = 0; }\n   if (data.translateZ === null) { data.translateZ = 0; }\n   if (data.scale === null) { data.scale = 1; }\n\n   // Aliases\n   if (data.rotation === null) { data.rotation = 0; }\n}\n\n/**\n * Defines bitwise keys for transforms used in {@link TJSTransforms.getMat4}.\n *\n * @type {object}\n */\nconst transformKeysBitwise = {\n   rotateX: 1,\n   rotateY: 2,\n   rotateZ: 4,\n   scale: 8,\n   translateX: 16,\n   translateY: 32,\n   translateZ: 64\n};\n\nObject.freeze(transformKeysBitwise);\n\n/**\n * Defines the default transform origin.\n *\n * @type {string}\n */\nconst transformOriginDefault = 'top left';\n\n/**\n * Defines the valid transform origins.\n *\n * @type {string[]}\n */\nconst transformOrigins = ['top left', 'top center', 'top right', 'center left', 'center', 'center right', 'bottom left',\n 'bottom center', 'bottom right'];\n\nObject.freeze(transformOrigins);\n\n/**\n * Converts any relative string values for animatable keys to actual updates performed against current data.\n *\n * @param {import('./').TJSPositionDataExtended}    positionData - position data.\n *\n * @param {import('./').TJSPosition | import('./').TJSPositionData}   position - The source position instance.\n */\nfunction convertRelative(positionData, position)\n{\n   for (const key in positionData)\n   {\n      // Key is animatable / numeric.\n      if (animateKeys.has(key))\n      {\n         const value = positionData[key];\n\n         if (typeof value !== 'string') { continue; }\n\n         // Ignore 'auto' and 'inherit' string values.\n         if (value === 'auto' || value === 'inherit') { continue; }\n\n         const regexResults = relativeRegex.exec(value);\n\n         if (!regexResults)\n         {\n            throw new Error(\n             `convertRelative error: malformed relative key (${key}) with value (${value})`);\n         }\n\n         const current = position[key];\n\n         switch (regexResults[1])\n         {\n            case '-':\n               positionData[key] = current - parseFloat(regexResults[2]);\n               break;\n\n            case '+':\n               positionData[key] = current + parseFloat(regexResults[2]);\n               break;\n\n            case '*':\n               positionData[key] = current * parseFloat(regexResults[2]);\n               break;\n         }\n      }\n   }\n}\n\nclass AnimationAPI\n{\n   /** @type {import('../').TJSPositionData} */\n   #data;\n\n   /** @type {import('../').TJSPosition} */\n   #position;\n\n   /**\n    * Tracks the number of animation control instances that are active.\n    *\n    * @type {number}\n    */\n   #instanceCount = 0;\n\n   /**\n    * Provides a bound function to pass as data to AnimationManager to invoke `AnimationAPI.#cleanupInstance`.\n    *\n    * @type {Function}\n    */\n   #cleanup;\n\n   /**\n    * @param {import('../index.js').TJSPosition}       position -\n    *\n    * @param {import('../index.js').TJSPositionData}   data -\n    */\n   constructor(position, data)\n   {\n      this.#position = position;\n      this.#data = data;\n\n      this.#cleanup = this.#cleanupInstance.bind(this);\n   }\n\n   /**\n    * Returns whether there are scheduled animations whether active or delayed for this TJSPosition.\n    *\n    * @returns {boolean} Are there active animation instances.\n    */\n   get isScheduled()\n   {\n      return this.#instanceCount > 0;\n   }\n\n   /**\n    * Adds / schedules an animation w/ the AnimationManager. This contains the final steps common to all tweens.\n    *\n    * @param {object}      initial -\n    *\n    * @param {object}      destination -\n    *\n    * @param {number}      duration -\n    *\n    * @param {HTMLElement} el -\n    *\n    * @param {number}      delay -\n    *\n    * @param {Function}    ease -\n    *\n    * @param {Function}    interpolate -\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation} The associated animation control.\n    */\n   #addAnimation(initial, destination, duration, el, delay, ease, interpolate)\n   {\n      // Set initial data for transform values that are often null by default.\n      setNumericDefaults(initial);\n      setNumericDefaults(destination);\n\n      // Reject all initial data that is not a number.\n      for (const key in initial)\n      {\n         if (!Number.isFinite(initial[key])) { delete initial[key]; }\n      }\n\n      const keys = Object.keys(initial);\n      const newData = Object.assign({ immediateElementUpdate: true }, initial);\n\n      // Nothing to animate, so return now.\n      if (keys.length === 0) { return AnimationControl.voidControl; }\n\n      const animationData = {\n         active: true,\n         cleanup: this.#cleanup,\n         cancelled: false,\n         control: void 0,\n         current: 0,\n         destination,\n         duration: duration * 1000, // Internally the AnimationManager works in ms.\n         ease,\n         el,\n         finished: false,\n         initial,\n         interpolate,\n         keys,\n         newData,\n         position: this.#position,\n         resolve: void 0,\n         start: void 0\n      };\n\n      if (delay > 0)\n      {\n         animationData.active = false;\n\n         // Delay w/ setTimeout and schedule w/ AnimationManager if not already canceled\n         setTimeout(() =>\n         {\n            if (!animationData.cancelled)\n            {\n               animationData.active = true;\n\n               const now = performance.now();\n\n               // Offset start time by delta between last rAF time. This allows a delayed tween to start from the\n               // precise delayed time.\n               animationData.start = now + (AnimationManager.current - now);\n            }\n         }, delay * 1000);\n      }\n\n      // Schedule immediately w/ AnimationManager\n      this.#instanceCount++;\n      AnimationManager.add(animationData);\n\n      // Create animation control\n      return new AnimationControl(animationData, true);\n   }\n\n   /**\n    * Cancels all animation instances for this TJSPosition instance.\n    */\n   cancel()\n   {\n      AnimationManager.cancel(this.#position);\n   }\n\n   /**\n    * Cleans up an animation instance.\n    *\n    * @param {object}   data - Animation data for an animation instance.\n    */\n   #cleanupInstance(data)\n   {\n      this.#instanceCount--;\n\n      data.active = false;\n      data.finished = true;\n\n      if (typeof data.resolve === 'function') { data.resolve(data.cancelled); }\n   }\n\n   /**\n    * Returns all currently scheduled AnimationControl instances for this TJSPosition instance.\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation[]} All currently scheduled animation controls for\n    *          this TJSPosition instance.\n    */\n   getScheduled()\n   {\n      return AnimationManager.getScheduled(this.#position);\n   }\n\n   /**\n    * Provides a tween from given position data to the current position.\n    *\n    * @param {import('../index.js').TJSPositionDataExtended} fromData - The starting position.\n    *\n    * @param {object}         [opts] - Optional parameters.\n    *\n    * @param {number}         [opts.delay=0] - Delay in seconds before animation starts.\n    *\n    * @param {number}         [opts.duration=1] - Duration in seconds.\n    *\n    * @param {Function}       [opts.ease=cubicOut] - Easing function.\n    *\n    * @param {Function}       [opts.interpolate=lerp] - Interpolation function.\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation}  A control object that can cancel animation and\n    *          provides a `finished` Promise.\n    */\n   from(fromData, { delay = 0, duration = 1, ease = cubicOut, interpolate = lerp } = {})\n   {\n      if (!isObject(fromData))\n      {\n         throw new TypeError(`AnimationAPI.from error: 'fromData' is not an object.`);\n      }\n\n      const position = this.#position;\n      const parent = position.parent;\n\n      // Early out if the application is not positionable.\n      if (parent !== void 0 && typeof parent?.options?.positionable === 'boolean' && !parent?.options?.positionable)\n      {\n         return AnimationControl.voidControl;\n      }\n\n      // Cache any target element allowing AnimationManager to stop animation if it becomes disconnected from DOM.\n      const targetEl = parent instanceof HTMLElement ? parent : parent?.elementTarget;\n      const el = targetEl instanceof HTMLElement && targetEl.isConnected ? targetEl : void 0;\n\n      if (!Number.isFinite(delay) || delay < 0)\n      {\n         throw new TypeError(`AnimationAPI.from error: 'delay' is not a positive number.`);\n      }\n\n      if (!Number.isFinite(duration) || duration < 0)\n      {\n         throw new TypeError(`AnimationAPI.from error: 'duration' is not a positive number.`);\n      }\n\n      if (typeof ease !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.from error: 'ease' is not a function.`);\n      }\n\n      if (typeof interpolate !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.from error: 'interpolate' is not a function.`);\n      }\n\n      const initial = {};\n      const destination = {};\n\n      const data = this.#data;\n\n      // Set initial data if the key / data is defined and the end position is not equal to current data.\n      for (const key in fromData)\n      {\n         if (data[key] !== void 0 && fromData[key] !== data[key])\n         {\n            initial[key] = fromData[key];\n            destination[key] = data[key];\n         }\n      }\n\n      convertRelative(initial, data);\n\n      return this.#addAnimation(initial, destination, duration, el, delay, ease, interpolate);\n   }\n\n   /**\n    * Provides a tween from given position data to the current position.\n    *\n    * @param {import('../index.js').TJSPositionDataExtended} fromData - The starting position.\n    *\n    * @param {import('../index.js').TJSPositionDataExtended} toData - The ending position.\n    *\n    * @param {object}         [opts] - Optional parameters.\n    *\n    * @param {number}         [opts.delay=0] - Delay in seconds before animation starts.\n    *\n    * @param {number}         [opts.duration=1] - Duration in seconds.\n    *\n    * @param {Function}       [opts.ease=cubicOut] - Easing function.\n    *\n    * @param {Function}       [opts.interpolate=lerp] - Interpolation function.\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation}  A control object that can cancel animation and\n    *          provides a `finished` Promise.\n    */\n   fromTo(fromData, toData, { delay = 0, duration = 1, ease = cubicOut, interpolate = lerp } = {})\n   {\n      if (!isObject(fromData))\n      {\n         throw new TypeError(`AnimationAPI.fromTo error: 'fromData' is not an object.`);\n      }\n\n      if (!isObject(toData))\n      {\n         throw new TypeError(`AnimationAPI.fromTo error: 'toData' is not an object.`);\n      }\n\n      const parent = this.#position.parent;\n\n      // Early out if the application is not positionable.\n      if (parent !== void 0 && typeof parent?.options?.positionable === 'boolean' && !parent?.options?.positionable)\n      {\n         return AnimationControl.voidControl;\n      }\n\n      // Cache any target element allowing AnimationManager to stop animation if it becomes disconnected from DOM.\n      const targetEl = parent instanceof HTMLElement ? parent : parent?.elementTarget;\n      const el = targetEl instanceof HTMLElement && targetEl.isConnected ? targetEl : void 0;\n\n      if (!Number.isFinite(delay) || delay < 0)\n      {\n         throw new TypeError(`AnimationAPI.fromTo error: 'delay' is not a positive number.`);\n      }\n\n      if (!Number.isFinite(duration) || duration < 0)\n      {\n         throw new TypeError(`AnimationAPI.fromTo error: 'duration' is not a positive number.`);\n      }\n\n      if (typeof ease !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.fromTo error: 'ease' is not a function.`);\n      }\n\n      if (typeof interpolate !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.fromTo error: 'interpolate' is not a function.`);\n      }\n\n      const initial = {};\n      const destination = {};\n\n      const data = this.#data;\n\n      // Set initial data if the key / data is defined and the end position is not equal to current data.\n      for (const key in fromData)\n      {\n         if (toData[key] === void 0)\n         {\n            console.warn(\n             `AnimationAPI.fromTo warning: key ('${key}') from 'fromData' missing in 'toData'; skipping this key.`);\n            continue;\n         }\n\n         if (data[key] !== void 0)\n         {\n            initial[key] = fromData[key];\n            destination[key] = toData[key];\n         }\n      }\n\n      convertRelative(initial, data);\n      convertRelative(destination, data);\n\n      return this.#addAnimation(initial, destination, duration, el, delay, ease, interpolate);\n   }\n\n   /**\n    * Provides a tween to given position data from the current position.\n    *\n    * @param {import('../index.js').TJSPositionDataExtended} toData - The destination position.\n    *\n    * @param {object}         [opts] - Optional parameters.\n    *\n    * @param {number}         [opts.delay=0] - Delay in seconds before animation starts.\n    *\n    * @param {number}         [opts.duration=1] - Duration in seconds.\n    *\n    * @param {Function}       [opts.ease=cubicOut] - Easing function.\n    *\n    * @param {Function}       [opts.interpolate=lerp] - Interpolation function.\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation}  A control object that can cancel animation and\n    *          provides a `finished` Promise.\n    */\n   to(toData, { delay = 0, duration = 1, ease = cubicOut, interpolate = lerp } = {})\n   {\n      if (!isObject(toData))\n      {\n         throw new TypeError(`AnimationAPI.to error: 'toData' is not an object.`);\n      }\n\n      const parent = this.#position.parent;\n\n      // Early out if the application is not positionable.\n      if (parent !== void 0 && typeof parent?.options?.positionable === 'boolean' && !parent?.options?.positionable)\n      {\n         return AnimationControl.voidControl;\n      }\n\n      // Cache any target element allowing AnimationManager to stop animation if it becomes disconnected from DOM.\n      const targetEl = parent instanceof HTMLElement ? parent : parent?.elementTarget;\n      const el = targetEl instanceof HTMLElement && targetEl.isConnected ? targetEl : void 0;\n\n      if (!Number.isFinite(delay) || delay < 0)\n      {\n         throw new TypeError(`AnimationAPI.to error: 'delay' is not a positive number.`);\n      }\n\n      if (!Number.isFinite(duration) || duration < 0)\n      {\n         throw new TypeError(`AnimationAPI.to error: 'duration' is not a positive number.`);\n      }\n\n      if (typeof ease !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.to error: 'ease' is not a function.`);\n      }\n\n      if (typeof interpolate !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.to error: 'interpolate' is not a function.`);\n      }\n\n      const initial = {};\n      const destination = {};\n\n      const data = this.#data;\n\n      // Set initial data if the key / data is defined and the end position is not equal to current data.\n      for (const key in toData)\n      {\n         if (data[key] !== void 0 && toData[key] !== data[key])\n         {\n            destination[key] = toData[key];\n            initial[key] = data[key];\n         }\n      }\n\n      convertRelative(destination, data);\n\n      return this.#addAnimation(initial, destination, duration, el, delay, ease, interpolate);\n   }\n\n   /**\n    * Returns a function that provides an optimized way to constantly update a to-tween.\n    *\n    * @param {Iterable<string>}  keys - The keys for quickTo.\n    *\n    * @param {object}            [opts] - Optional parameters.\n    *\n    * @param {number}            [opts.duration=1] - Duration in seconds.\n    *\n    * @param {Function}          [opts.ease=cubicOut] - Easing function.\n    *\n    * @param {Function}          [opts.interpolate=lerp] - Interpolation function.\n    *\n    * @returns {import('../index.js').quickToCallback} quick-to tween function.\n    */\n   quickTo(keys, { duration = 1, ease = cubicOut, interpolate = lerp } = {})\n   {\n      if (!isIterable(keys))\n      {\n         throw new TypeError(`AnimationAPI.quickTo error: 'keys' is not an iterable list.`);\n      }\n\n      const parent = this.#position.parent;\n\n      // Early out if the application is not positionable.\n      if (parent !== void 0 && typeof parent?.options?.positionable === 'boolean' && !parent?.options?.positionable)\n      {\n         throw new Error(`AnimationAPI.quickTo error: 'parent' is not positionable.`);\n      }\n\n      if (!Number.isFinite(duration) || duration < 0)\n      {\n         throw new TypeError(`AnimationAPI.quickTo error: 'duration' is not a positive number.`);\n      }\n\n      if (typeof ease !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.quickTo error: 'ease' is not a function.`);\n      }\n\n      if (typeof interpolate !== 'function')\n      {\n         throw new TypeError(`AnimationAPI.quickTo error: 'interpolate' is not a function.`);\n      }\n\n      const initial = {};\n      const destination = {};\n\n      const data = this.#data;\n\n      // Set initial data if the key / data is defined and the end position is not equal to current data.\n      for (const key of keys)\n      {\n         if (typeof key !== 'string')\n         {\n            throw new TypeError(`AnimationAPI.quickTo error: key is not a string.`);\n         }\n\n         if (!animateKeys.has(key))\n         {\n            throw new Error(`AnimationAPI.quickTo error: key ('${key}') is not animatable.`);\n         }\n\n         if (data[key] !== void 0)\n         {\n            destination[key] = data[key];\n            initial[key] = data[key];\n         }\n      }\n\n      const keysArray = [...keys];\n\n      Object.freeze(keysArray);\n\n      const newData = Object.assign({ immediateElementUpdate: true }, initial);\n\n      const animationData = {\n         active: true,\n         cleanup: this.#cleanup,\n         cancelled: false,\n         control: void 0,\n         current: 0,\n         destination,\n         duration: duration * 1000, // Internally the AnimationManager works in ms.\n         ease,\n         el: void 0,\n         finished: true, // Note: start in finished state to add to AnimationManager on first callback.\n         initial,\n         interpolate,\n         keys,\n         newData,\n         position: this.#position,\n         resolve: void 0,\n         start: void 0\n      };\n\n      const quickToCB = (...args) =>\n      {\n         const argsLength = args.length;\n\n         if (argsLength === 0) { return; }\n\n         for (let cntr = keysArray.length; --cntr >= 0;)\n         {\n            const key = keysArray[cntr];\n            if (data[key] !== void 0) { initial[key] = data[key]; }\n         }\n\n         // Handle case where the first arg is an object. Update all quickTo keys from data contained in the object.\n         if (isObject(args[0]))\n         {\n            const objData = args[0];\n\n            for (const key in objData)\n            {\n               if (destination[key] !== void 0) { destination[key] = objData[key]; }\n            }\n         }\n         else // Assign each variable argument to the key specified in the initial `keys` array above.\n         {\n            for (let cntr = 0; cntr < argsLength && cntr < keysArray.length; cntr++)\n            {\n               const key = keysArray[cntr];\n               if (destination[key] !== void 0) { destination[key] = args[cntr]; }\n            }\n         }\n\n         convertRelative(destination, data);\n\n         // Set initial data for transform values that are often null by default.\n         setNumericDefaults(initial);\n         setNumericDefaults(destination);\n\n         // Set target element to animation data to track if it is removed from the DOM hence ending the animation.\n         const targetEl = parent instanceof HTMLElement ? parent : parent?.elementTarget;\n         animationData.el = targetEl instanceof HTMLElement && targetEl.isConnected ? targetEl : void 0;\n\n         // Reschedule the quickTo animation with AnimationManager as it is finished.\n         if (animationData.finished)\n         {\n            animationData.finished = false;\n            animationData.active = true;\n            animationData.current = 0;\n\n            this.#instanceCount++;\n            AnimationManager.add(animationData);\n         }\n         else // QuickTo animation is currently scheduled w/ AnimationManager so reset start and current time.\n         {\n            const now = performance.now();\n\n            // Offset start time by delta between last rAF time. This allows a delayed tween to start from the\n            // precise delayed time.\n            animationData.start = now + (AnimationManager.current - now);\n            animationData.current = 0;\n         }\n      };\n\n      quickToCB.keys = keysArray;\n\n      /**\n       * Sets options of quickTo tween.\n       *\n       * @param {object}            [opts] - Optional parameters.\n       *\n       * @param {number}            [opts.duration] - Duration in seconds.\n       *\n       * @param {Function}          [opts.ease] - Easing function.\n       *\n       * @param {Function}          [opts.interpolate] - Interpolation function.\n       *\n       * @returns {import('../').quickToCallback} The quickTo callback.\n       */\n      quickToCB.options = ({ duration, ease, interpolate } = {}) => // eslint-disable-line no-shadow\n      {\n         if (duration !== void 0 && (!Number.isFinite(duration) || duration < 0))\n         {\n            throw new TypeError(`AnimationAPI.quickTo.options error: 'duration' is not a positive number.`);\n         }\n\n         if (ease !== void 0 && typeof ease !== 'function')\n         {\n            throw new TypeError(`AnimationAPI.quickTo.options error: 'ease' is not a function.`);\n         }\n\n         if (interpolate !== void 0 && typeof interpolate !== 'function')\n         {\n            throw new TypeError(`AnimationAPI.quickTo.options error: 'interpolate' is not a function.`);\n         }\n\n         if (duration >= 0) { animationData.duration = duration * 1000; }\n         if (ease) { animationData.ease = ease; }\n         if (interpolate) { animationData.interpolate = interpolate; }\n\n         return quickToCB;\n      };\n\n      return quickToCB;\n   }\n}\n\n/**\n * Provides a TJSBasicAnimation implementation for a TJSPosition animation for a group of TJSPosition instances.\n */\nclass AnimationGroupControl\n{\n   /** @type {import('./AnimationControl').AnimationControl[]} */\n   #animationControls;\n\n   /** @type {Promise<Awaited<unknown>[]>} */\n   #finishedPromise;\n\n   /**\n    * Defines a static empty / void animation control.\n    *\n    * @type {AnimationGroupControl}\n    */\n   static #voidControl = new AnimationGroupControl(null);\n\n   /**\n    * Provides a static void / undefined AnimationGroupControl that is automatically resolved.\n    *\n    * @returns {AnimationGroupControl} Void AnimationGroupControl\n    */\n   static get voidControl() { return this.#voidControl; }\n\n   /**\n    * @param {import('./AnimationControl').AnimationControl[]} animationControls - An array of AnimationControl\n    *        instances.\n    */\n   constructor(animationControls)\n   {\n      this.#animationControls = animationControls;\n   }\n\n   /**\n    * Get a promise that resolves when all animations are finished.\n    *\n    * @returns {Promise<Awaited<unknown>[]>|Promise<void>} Finished Promise for all animations.\n    */\n   get finished()\n   {\n      const animationControls = this.#animationControls;\n\n      if (animationControls === null || animationControls === void 0) { return Promise.resolve(); }\n\n      if (!(this.#finishedPromise instanceof Promise))\n      {\n         const promises = [];\n         for (let cntr = animationControls.length; --cntr >= 0;)\n         {\n            promises.push(animationControls[cntr].finished);\n         }\n\n         this.#finishedPromise = Promise.all(promises);\n      }\n\n      return this.#finishedPromise;\n   }\n\n   /**\n    * Returns whether there are active animation instances for this group.\n    *\n    * Note: a delayed animation may not be started / active yet. Use {@link AnimationGroupControl.isFinished} to\n    * determine if all animations in the group are finished.\n    *\n    * @returns {boolean} Are there active animation instances.\n    */\n   get isActive()\n   {\n      const animationControls = this.#animationControls;\n\n      if (animationControls === null || animationControls === void 0) { return false; }\n\n      for (let cntr = animationControls.length; --cntr >= 0;)\n      {\n         if (animationControls[cntr].isActive) { return true; }\n      }\n\n      return false;\n   }\n\n   /**\n    * Returns whether all animations in the group are finished.\n    *\n    * @returns {boolean} Are all animation instances finished.\n    */\n   get isFinished()\n   {\n      const animationControls = this.#animationControls;\n\n      if (animationControls === null || animationControls === void 0) { return true; }\n\n      for (let cntr = animationControls.length; --cntr >= 0;)\n      {\n         if (!animationControls[cntr].isFinished) { return false; }\n      }\n\n      return false;\n   }\n\n   /**\n    * Cancels the all animations.\n    */\n   cancel()\n   {\n      const animationControls = this.#animationControls;\n\n      if (animationControls === null || animationControls === void 0) { return; }\n\n      for (let cntr = this.#animationControls.length; --cntr >= 0;)\n      {\n         this.#animationControls[cntr].cancel();\n      }\n   }\n}\n\n/**\n * Provides a public API for grouping multiple {@link TJSPosition} animations together with the\n * AnimationManager.\n *\n * Note: To remove cyclic dependencies as this class provides the TJSPosition static / group Animation API `instanceof`\n * checks are not done against TJSPosition. Instead, a check for the animate property being an instanceof\n * {@link AnimationAPI} is performed in {@link AnimationGroupAPI.#isPosition}.\n *\n * @see AnimationAPI\n */\nclass AnimationGroupAPI\n{\n   /**\n    * Checks of the given object is a TJSPosition instance by checking for AnimationAPI.\n    *\n    * @param {*}  object - Any data.\n    *\n    * @returns {boolean} Is TJSPosition.\n    */\n   static #isPosition(object)\n   {\n      return isObject(object) && object.animate instanceof AnimationAPI;\n   }\n\n   /**\n    * Cancels any animation for given TJSPosition data.\n    *\n    * @param {import('../').TJSPosition | {position: import('../').TJSPosition} | Iterable<import('../').TJSPosition> | Iterable<{position: import('../').TJSPosition}>} position -\n    */\n   static cancel(position)\n   {\n      if (isIterable(position))\n      {\n         let index = -1;\n\n         for (const entry of position)\n         {\n            index++;\n\n            const actualPosition = this.#isPosition(entry) ? entry : entry.position;\n\n            if (!this.#isPosition(actualPosition))\n            {\n               console.warn(`AnimationGroupAPI.cancel warning: No Position instance found at index: ${index}.`);\n               continue;\n            }\n\n            AnimationManager.cancel(actualPosition);\n         }\n      }\n      else\n      {\n         const actualPosition = this.#isPosition(position) ? position : position.position;\n\n         if (!this.#isPosition(actualPosition))\n         {\n            console.warn(`AnimationGroupAPI.cancel warning: No Position instance found.`);\n            return;\n         }\n\n         AnimationManager.cancel(actualPosition);\n      }\n   }\n\n   /**\n    * Cancels all TJSPosition animation.\n    */\n   static cancelAll() { AnimationManager.cancelAll(); }\n\n   /**\n    * Gets all animation controls for the given position data.\n    *\n    * @param {import('../').TJSPosition | {position: import('../').TJSPosition} | Iterable<import('../').TJSPosition> | Iterable<{position: import('../').TJSPosition}>} position -\n    *\n    * @returns {{ position: import('../').TJSPosition, data: object | void, controls: import('./AnimationControl').AnimationControl[]}[]} Results array.\n    */\n   static getScheduled(position)\n   {\n      const results = [];\n\n      if (isIterable(position))\n      {\n         let index = -1;\n\n         for (const entry of position)\n         {\n            index++;\n\n            const isPosition = this.#isPosition(entry);\n            const actualPosition = isPosition ? entry : entry.position;\n\n            if (!this.#isPosition(actualPosition))\n            {\n               console.warn(`AnimationGroupAPI.getScheduled warning: No Position instance found at index: ${index}.`);\n               continue;\n            }\n\n            const controls = AnimationManager.getScheduled(actualPosition);\n\n            results.push({ position: actualPosition, data: isPosition ? void 0 : entry, controls });\n         }\n      }\n      else\n      {\n         const isPosition = this.#isPosition(position);\n         const actualPosition = isPosition ? position : position.position;\n\n         if (!this.#isPosition(actualPosition))\n         {\n            console.warn(`AnimationGroupAPI.getScheduled warning: No Position instance found.`);\n            return results;\n         }\n\n         const controls = AnimationManager.getScheduled(actualPosition);\n\n         results.push({ position: actualPosition, data: isPosition ? void 0 : position, controls });\n      }\n\n      return results;\n   }\n\n   /**\n    * Provides the `from` animation tween for one or more TJSPosition instances as a group.\n    *\n    * @param {import('../').TJSPosition | {position: import('../').TJSPosition} | Iterable<import('../').TJSPosition> | Iterable<{position: import('../').TJSPosition}>} position -\n    *\n    * @param {object|Function}   fromData -\n    *\n    * @param {object|Function}   options -\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation} Basic animation control.\n    */\n   static from(position, fromData, options)\n   {\n      if (!isObject(fromData) && typeof fromData !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.from error: 'fromData' is not an object or function.`);\n      }\n\n      if (options !== void 0 && !isObject(options) && typeof options !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.from error: 'options' is not an object or function.`);\n      }\n\n      /**\n       * @type {import('./AnimationControl').AnimationControl[]}\n       */\n      const animationControls = [];\n\n      let index = -1;\n      let callbackOptions;\n\n      const hasDataCallback = typeof fromData === 'function';\n      const hasOptionCallback = typeof options === 'function';\n      const hasCallback = hasDataCallback || hasOptionCallback;\n\n      if (hasCallback) { callbackOptions = { index, position: void 0, data: void 0 }; }\n\n      let actualFromData = fromData;\n      let actualOptions = options;\n\n      if (isIterable(position))\n      {\n         for (const entry of position)\n         {\n            index++;\n\n            const isPosition = this.#isPosition(entry);\n            const actualPosition = isPosition ? entry : entry.position;\n\n            if (!this.#isPosition(actualPosition))\n            {\n               console.warn(`AnimationGroupAPI.from warning: No Position instance found at index: ${index}.`);\n               continue;\n            }\n\n            if (hasCallback)\n            {\n               callbackOptions.index = index;\n               callbackOptions.position = position;\n               callbackOptions.data = isPosition ? void 0 : entry;\n            }\n\n            if (hasDataCallback)\n            {\n               actualFromData = fromData(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualFromData === null || actualFromData === void 0) { continue; }\n\n               if (!isObject(actualFromData))\n               {\n                  throw new TypeError(`AnimationGroupAPI.from error: fromData callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            if (hasOptionCallback)\n            {\n               actualOptions = options(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualOptions === null || actualOptions === void 0) { continue; }\n\n               if (!isObject(actualOptions))\n               {\n                  throw new TypeError(`AnimationGroupAPI.from error: options callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            animationControls.push(actualPosition.animate.from(actualFromData, actualOptions));\n         }\n      }\n      else\n      {\n         const isPosition = this.#isPosition(position);\n         const actualPosition = isPosition ? position : position.position;\n\n         if (!this.#isPosition(actualPosition))\n         {\n            console.warn(`AnimationGroupAPI.from warning: No Position instance found.`);\n            return AnimationGroupControl.voidControl;\n         }\n\n         if (hasCallback)\n         {\n            callbackOptions.index = 0;\n            callbackOptions.position = position;\n            callbackOptions.data = isPosition ? void 0 : position;\n         }\n\n         if (hasDataCallback)\n         {\n            actualFromData = fromData(callbackOptions);\n\n            if (!isObject(actualFromData))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.from error: fromData callback function failed to return an object.`);\n            }\n         }\n\n         if (hasOptionCallback)\n         {\n            actualOptions = options(callbackOptions);\n\n            if (!isObject(actualOptions))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.from error: options callback function failed to return an object.`);\n            }\n         }\n\n         animationControls.push(actualPosition.animate.from(actualFromData, actualOptions));\n      }\n\n      return new AnimationGroupControl(animationControls);\n   }\n\n   /**\n    * Provides the `fromTo` animation tween for one or more TJSPosition instances as a group.\n    *\n    * @param {import('../').TJSPosition | {position: import('../').TJSPosition} | Iterable<import('../').TJSPosition> | Iterable<{position: import('../').TJSPosition}>} position -\n    *\n    * @param {object|Function}   fromData -\n    *\n    * @param {object|Function}   toData -\n    *\n    * @param {object|Function}   options -\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation} Basic animation control.\n    */\n   static fromTo(position, fromData, toData, options)\n   {\n      if (!isObject(fromData) && typeof fromData !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.fromTo error: 'fromData' is not an object or function.`);\n      }\n\n      if (!isObject(toData) && typeof toData !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.fromTo error: 'toData' is not an object or function.`);\n      }\n\n      if (options !== void 0 && !isObject(options) && typeof options !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.fromTo error: 'options' is not an object or function.`);\n      }\n\n      /**\n       * @type {import('./AnimationControl').AnimationControl[]}\n       */\n      const animationControls = [];\n\n      let index = -1;\n      let callbackOptions;\n\n      const hasFromCallback = typeof fromData === 'function';\n      const hasToCallback = typeof toData === 'function';\n      const hasOptionCallback = typeof options === 'function';\n      const hasCallback = hasFromCallback || hasToCallback || hasOptionCallback;\n\n      if (hasCallback) { callbackOptions = { index, position: void 0, data: void 0 }; }\n\n      let actualFromData = fromData;\n      let actualToData = toData;\n      let actualOptions = options;\n\n      if (isIterable(position))\n      {\n         for (const entry of position)\n         {\n            index++;\n\n            const isPosition = this.#isPosition(entry);\n            const actualPosition = isPosition ? entry : entry.position;\n\n            if (!this.#isPosition(actualPosition))\n            {\n               console.warn(`AnimationGroupAPI.fromTo warning: No Position instance found at index: ${index}.`);\n               continue;\n            }\n\n            if (hasCallback)\n            {\n               callbackOptions.index = index;\n               callbackOptions.position = position;\n               callbackOptions.data = isPosition ? void 0 : entry;\n            }\n\n            if (hasFromCallback)\n            {\n               actualFromData = fromData(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualFromData === null || actualFromData === void 0) { continue; }\n\n               if (!isObject(actualFromData))\n               {\n                  throw new TypeError(`AnimationGroupAPI.fromTo error: fromData callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            if (hasToCallback)\n            {\n               actualToData = toData(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualToData === null || actualToData === void 0) { continue; }\n\n               if (!isObject(actualToData))\n               {\n                  throw new TypeError(`AnimationGroupAPI.fromTo error: toData callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            if (hasOptionCallback)\n            {\n               actualOptions = options(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualOptions === null || actualOptions === void 0) { continue; }\n\n               if (!isObject(actualOptions))\n               {\n                  throw new TypeError(`AnimationGroupAPI.fromTo error: options callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            animationControls.push(actualPosition.animate.fromTo(actualFromData, actualToData, actualOptions));\n         }\n      }\n      else\n      {\n         const isPosition = this.#isPosition(position);\n         const actualPosition = isPosition ? position : position.position;\n\n         if (!this.#isPosition(actualPosition))\n         {\n            console.warn(`AnimationGroupAPI.fromTo warning: No Position instance found.`);\n            return AnimationGroupControl.voidControl;\n         }\n\n         if (hasCallback)\n         {\n            callbackOptions.index = 0;\n            callbackOptions.position = position;\n            callbackOptions.data = isPosition ? void 0 : position;\n         }\n\n         if (hasFromCallback)\n         {\n            actualFromData = fromData(callbackOptions);\n\n            if (!isObject(actualFromData))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.fromTo error: fromData callback function failed to return an object.`);\n            }\n         }\n\n         if (hasToCallback)\n         {\n            actualToData = toData(callbackOptions);\n\n            if (!isObject(actualToData))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.fromTo error: toData callback function failed to return an object.`);\n            }\n         }\n\n         if (hasOptionCallback)\n         {\n            actualOptions = options(callbackOptions);\n\n            if (!isObject(actualOptions))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.fromTo error: options callback function failed to return an object.`);\n            }\n         }\n\n         animationControls.push(actualPosition.animate.fromTo(actualFromData, actualToData, actualOptions));\n      }\n\n      return new AnimationGroupControl(animationControls);\n   }\n\n   /**\n    * Provides the `to` animation tween for one or more TJSPosition instances as a group.\n    *\n    * @param {import('../').TJSPosition | {position: import('../').TJSPosition} | Iterable<import('../').TJSPosition> | Iterable<{position: import('../').TJSPosition}>} position -\n    *\n    * @param {object|Function}   toData -\n    *\n    * @param {object|Function}   options -\n    *\n    * @returns {import('#runtime/util/animate').TJSBasicAnimation} Basic animation control.\n    */\n   static to(position, toData, options)\n   {\n      if (!isObject(toData) && typeof toData !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.to error: 'toData' is not an object or function.`);\n      }\n\n      if (options !== void 0 && !isObject(options) && typeof options !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.to error: 'options' is not an object or function.`);\n      }\n\n      /**\n       * @type {import('./AnimationControl').AnimationControl[]}\n       */\n      const animationControls = [];\n\n      let index = -1;\n      let callbackOptions;\n\n      const hasDataCallback = typeof toData === 'function';\n      const hasOptionCallback = typeof options === 'function';\n      const hasCallback = hasDataCallback || hasOptionCallback;\n\n      if (hasCallback) { callbackOptions = { index, position: void 0, data: void 0 }; }\n\n      let actualToData = toData;\n      let actualOptions = options;\n\n      if (isIterable(position))\n      {\n         for (const entry of position)\n         {\n            index++;\n\n            const isPosition = this.#isPosition(entry);\n            const actualPosition = isPosition ? entry : entry.position;\n\n            if (!this.#isPosition(actualPosition))\n            {\n               console.warn(`AnimationGroupAPI.to warning: No Position instance found at index: ${index}.`);\n               continue;\n            }\n\n            if (hasCallback)\n            {\n               callbackOptions.index = index;\n               callbackOptions.position = position;\n               callbackOptions.data = isPosition ? void 0 : entry;\n            }\n\n            if (hasDataCallback)\n            {\n               actualToData = toData(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualToData === null || actualToData === void 0) { continue; }\n\n               if (!isObject(actualToData))\n               {\n                  throw new TypeError(`AnimationGroupAPI.to error: toData callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            if (hasOptionCallback)\n            {\n               actualOptions = options(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualOptions === null || actualOptions === void 0) { continue; }\n\n               if (!isObject(actualOptions))\n               {\n                  throw new TypeError(`AnimationGroupAPI.to error: options callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            animationControls.push(actualPosition.animate.to(actualToData, actualOptions));\n         }\n      }\n      else\n      {\n         const isPosition = this.#isPosition(position);\n         const actualPosition = isPosition ? position : position.position;\n\n         if (!this.#isPosition(actualPosition))\n         {\n            console.warn(`AnimationGroupAPI.to warning: No Position instance found.`);\n            return AnimationGroupControl.voidControl;\n         }\n\n         if (hasCallback)\n         {\n            callbackOptions.index = 0;\n            callbackOptions.position = position;\n            callbackOptions.data = isPosition ? void 0 : position;\n         }\n\n         if (hasDataCallback)\n         {\n            actualToData = toData(callbackOptions);\n\n            if (!isObject(actualToData))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.to error: toData callback function failed to return an object.`);\n            }\n         }\n\n         if (hasOptionCallback)\n         {\n            actualOptions = options(callbackOptions);\n\n            if (!isObject(actualOptions))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.to error: options callback function failed to return an object.`);\n            }\n         }\n\n         animationControls.push(actualPosition.animate.to(actualToData, actualOptions));\n      }\n\n      return new AnimationGroupControl(animationControls);\n   }\n\n   /**\n    * Provides the `to` animation tween for one or more TJSPosition instances as a group.\n    *\n    * @param {import('../').TJSPosition | {position: import('../').TJSPosition} | Iterable<import('../').TJSPosition> | Iterable<{position: import('../').TJSPosition}>} position -\n    *\n    * @param {Iterable<string>}  keys -\n    *\n    * @param {object|Function}   options -\n    *\n    * @returns {import('../').quickToCallback} Basic animation control.\n    */\n   static quickTo(position, keys, options)\n   {\n      if (!isIterable(keys))\n      {\n         throw new TypeError(`AnimationGroupAPI.quickTo error: 'keys' is not an iterable list.`);\n      }\n\n      if (options !== void 0 && !isObject(options) && typeof options !== 'function')\n      {\n         throw new TypeError(`AnimationGroupAPI.quickTo error: 'options' is not an object or function.`);\n      }\n\n      /**\n       * @type {import('../').quickToCallback[]}\n       */\n      const quickToCallbacks = [];\n\n      let index = -1;\n\n      const hasOptionCallback = typeof options === 'function';\n\n      const callbackOptions = { index, position: void 0, data: void 0 };\n\n      let actualOptions = options;\n\n      if (isIterable(position))\n      {\n         for (const entry of position)\n         {\n            index++;\n\n            const isPosition = this.#isPosition(entry);\n            const actualPosition = isPosition ? entry : entry.position;\n\n            if (!this.#isPosition(actualPosition))\n            {\n               console.warn(`AnimationGroupAPI.quickTo warning: No Position instance found at index: ${index}.`);\n               continue;\n            }\n\n            callbackOptions.index = index;\n            callbackOptions.position = position;\n            callbackOptions.data = isPosition ? void 0 : entry;\n\n            if (hasOptionCallback)\n            {\n               actualOptions = options(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (actualOptions === null || actualOptions === void 0) { continue; }\n\n               if (!isObject(actualOptions))\n               {\n                  throw new TypeError(`AnimationGroupAPI.quickTo error: options callback function iteration(${\n                   index}) failed to return an object.`);\n               }\n            }\n\n            quickToCallbacks.push(actualPosition.animate.quickTo(keys, actualOptions));\n         }\n      }\n      else\n      {\n         const isPosition = this.#isPosition(position);\n         const actualPosition = isPosition ? position : position.position;\n\n         if (!this.#isPosition(actualPosition))\n         {\n            console.warn(`AnimationGroupAPI.quickTo warning: No Position instance found.`);\n            return () => null;\n         }\n\n         callbackOptions.index = 0;\n         callbackOptions.position = position;\n         callbackOptions.data = isPosition ? void 0 : position;\n\n         if (hasOptionCallback)\n         {\n            actualOptions = options(callbackOptions);\n\n            if (!isObject(actualOptions))\n            {\n               throw new TypeError(\n                `AnimationGroupAPI.quickTo error: options callback function failed to return an object.`);\n            }\n         }\n\n         quickToCallbacks.push(actualPosition.animate.quickTo(keys, actualOptions));\n      }\n\n      const keysArray = [...keys];\n\n      Object.freeze(keysArray);\n\n      const quickToCB = (...args) =>\n      {\n         const argsLength = args.length;\n\n         if (argsLength === 0) { return; }\n\n         if (typeof args[0] === 'function')\n         {\n            const dataCallback = args[0];\n\n            index = -1;\n            let cntr = 0;\n\n            if (isIterable(position))\n            {\n               for (const entry of position)\n               {\n                  index++;\n\n                  const isPosition = this.#isPosition(entry);\n                  const actualPosition = isPosition ? entry : entry.position;\n\n                  if (!this.#isPosition(actualPosition)) { continue; }\n\n                  callbackOptions.index = index;\n                  callbackOptions.position = position;\n                  callbackOptions.data = isPosition ? void 0 : entry;\n\n                  const toData = dataCallback(callbackOptions);\n\n                  // Returned data from callback is null / undefined, so skip this position instance.\n                  if (toData === null || toData === void 0) { continue; }\n\n                  /**\n                   * @type {boolean}\n                   */\n                  const toDataIterable = isIterable(toData);\n\n                  if (!Number.isFinite(toData) && !toDataIterable && !isObject(toData))\n                  {\n                     throw new TypeError(`AnimationGroupAPI.quickTo error: toData callback function iteration(${\n                      index}) failed to return a finite number, iterable list, or object.`);\n                  }\n\n                  if (toDataIterable)\n                  {\n                     quickToCallbacks[cntr++](...toData);\n                  }\n                  else\n                  {\n                     quickToCallbacks[cntr++](toData);\n                  }\n               }\n            }\n            else\n            {\n               const isPosition = this.#isPosition(position);\n               const actualPosition = isPosition ? position : position.position;\n\n               if (!this.#isPosition(actualPosition)) { return; }\n\n               callbackOptions.index = 0;\n               callbackOptions.position = position;\n               callbackOptions.data = isPosition ? void 0 : position;\n\n               const toData = dataCallback(callbackOptions);\n\n               // Returned data from callback is null / undefined, so skip this position instance.\n               if (toData === null || toData === void 0) { return; }\n\n               const toDataIterable = isIterable(toData);\n\n               if (!Number.isFinite(toData) && !toDataIterable && !isObject(toData))\n               {\n                  throw new TypeError(`AnimationGroupAPI.quickTo error: toData callback function iteration(${\n                   index}) failed to return a finite number, iterable list, or object.`);\n               }\n\n               if (toDataIterable)\n               {\n                  quickToCallbacks[cntr++](...toData);\n               }\n               else\n               {\n                  quickToCallbacks[cntr++](toData);\n               }\n            }\n         }\n         else\n         {\n            for (let cntr = quickToCallbacks.length; --cntr >= 0;)\n            {\n               quickToCallbacks[cntr](...args);\n            }\n         }\n      };\n\n      quickToCB.keys = keysArray;\n\n      /**\n       * Sets options of quickTo tween.\n       *\n       * @param {object|Function}   [options] - Optional parameters.\n       *\n       * @param {number}            [options.duration] - Duration in seconds.\n       *\n       * @param {Function}          [options.ease] - Easing function.\n       *\n       * @param {Function}          [options.interpolate] - Interpolation function.\n       *\n       * @returns {import('../').quickToCallback} The quickTo callback.\n       */\n      quickToCB.options = (options) => // eslint-disable-line no-shadow\n      {\n         if (options !== void 0 && !isObject(options) && typeof options !== 'function')\n         {\n            throw new TypeError(`AnimationGroupAPI.quickTo error: 'options' is not an object or function.`);\n         }\n\n         // Set options object for each quickTo callback.\n         if (isObject(options))\n         {\n            for (let cntr = quickToCallbacks.length; --cntr >= 0;) { quickToCallbacks[cntr].options(options); }\n         }\n         else if (typeof options === 'function')\n         {\n            if (isIterable(position))\n            {\n               index = -1;\n               let cntr = 0;\n\n               for (const entry of position)\n               {\n                  index++;\n\n                  const isPosition = this.#isPosition(entry);\n                  const actualPosition = isPosition ? entry : entry.position;\n\n                  if (!this.#isPosition(actualPosition))\n                  {\n                     console.warn(\n                      `AnimationGroupAPI.quickTo.options warning: No Position instance found at index: ${index}.`);\n                     continue;\n                  }\n\n                  callbackOptions.index = index;\n                  callbackOptions.position = position;\n                  callbackOptions.data = isPosition ? void 0 : entry;\n\n                  actualOptions = options(callbackOptions);\n\n                  // Returned data from callback is null / undefined, so skip this position instance.\n                  if (actualOptions === null || actualOptions === void 0) { continue; }\n\n                  if (!isObject(actualOptions))\n                  {\n                     throw new TypeError(\n                      `AnimationGroupAPI.quickTo.options error: options callback function iteration(${\n                       index}) failed to return an object.`);\n                  }\n\n                  quickToCallbacks[cntr++].options(actualOptions);\n               }\n            }\n            else\n            {\n               const isPosition = this.#isPosition(position);\n               const actualPosition = isPosition ? position : position.position;\n\n               if (!this.#isPosition(actualPosition))\n               {\n                  console.warn(`AnimationGroupAPI.quickTo.options warning: No Position instance found.`);\n                  return quickToCB;\n               }\n\n               callbackOptions.index = 0;\n               callbackOptions.position = position;\n               callbackOptions.data = isPosition ? void 0 : position;\n\n               actualOptions = options(callbackOptions);\n\n               if (!isObject(actualOptions))\n               {\n                  throw new TypeError(\n                   `AnimationGroupAPI.quickTo error: options callback function failed to return an object.`);\n               }\n\n               quickToCallbacks[0].options(actualOptions);\n            }\n         }\n\n         return quickToCB;\n      };\n\n      return quickToCB;\n   }\n}\n\n/**\n * Provides a {@link TJSPositionInitialHelper} implementation to center to element being positioned.\n */\nclass Centered\n{\n   /**\n    * @type {HTMLElement}\n    */\n   #element;\n\n   /**\n    * Provides a manual setting of the element height. As things go `offsetHeight` causes a browser layout and is not\n    * performance oriented. If manually set this height is used instead of `offsetHeight`.\n    *\n    * @type {number}\n    */\n   #height;\n\n   /**\n    * Set from an optional value in the constructor to lock accessors preventing modification.\n    */\n   #lock;\n\n   /**\n    * Provides a manual setting of the element width. As things go `offsetWidth` causes a browser layout and is not\n    * performance oriented. If manually set this width is used instead of `offsetWidth`.\n    *\n    * @type {number}\n    */\n   #width;\n\n   /**\n    * @param {object}      [options] - Initial options.\n    *\n    * @param {HTMLElement} [options.element] - Target element.\n    *\n    * @param {boolean}     [options.lock=false] - Lock parameters from being set.\n    *\n    * @param {number}      [options.width] - Manual width.\n    *\n    * @param {number}      [options.height] - Manual height.\n    */\n   constructor({ element, lock = false, width, height } = {})\n   {\n      this.element = element;\n      this.width = width;\n      this.height = height;\n\n      this.#lock = typeof lock === 'boolean' ? lock : false;\n   }\n\n   /**\n    * @returns {HTMLElement|undefined|null} Target element.\n    */\n   get element() { return this.#element; }\n\n   /**\n    * @returns {number} Get manual height.\n    */\n   get height() { return this.#height; }\n\n   /**\n    * @returns {number} Get manual width.\n    */\n   get width() { return this.#width; }\n\n   /**\n    * @param {HTMLElement|undefined|null} element - Set target element.\n    */\n   set element(element)\n   {\n      if (this.#lock) { return; }\n\n      if (element === void 0  || element === null || element instanceof HTMLElement)\n      {\n         this.#element = element;\n      }\n      else\n      {\n         throw new TypeError(`'element' is not a HTMLElement, undefined, or null.`);\n      }\n   }\n\n   /**\n    * @param {number}   height - Set manual height.\n    */\n   set height(height)\n   {\n      if (this.#lock) { return; }\n\n      if (height === void 0 || Number.isFinite(height))\n      {\n         this.#height = height;\n      }\n      else\n      {\n         throw new TypeError(`'height' is not a finite number or undefined.`);\n      }\n   }\n\n   /**\n    * @param {number}   width - Set manual width.\n    */\n   set width(width)\n   {\n      if (this.#lock) { return; }\n\n      if (width === void 0 || Number.isFinite(width))\n      {\n         this.#width = width;\n      }\n      else\n      {\n         throw new TypeError(`'width' is not a finite number or undefined.`);\n      }\n   }\n\n   /**\n    * Set manual width & height.\n    *\n    * @param {number}   width - New manual width.\n    *\n    * @param {number}   height - New manual height.\n    */\n   setDimension(width, height)\n   {\n      if (this.#lock) { return; }\n\n      if (width === void 0 || Number.isFinite(width))\n      {\n         this.#width = width;\n      }\n      else\n      {\n         throw new TypeError(`'width' is not a finite number or undefined.`);\n      }\n\n      if (height === void 0 || Number.isFinite(height))\n      {\n         this.#height = height;\n      }\n      else\n      {\n         throw new TypeError(`'height' is not a finite number or undefined.`);\n      }\n   }\n\n   /**\n    * Get the left constraint based on any manual target values or the browser inner width.\n    *\n    * @param {number}   width - Target width.\n    *\n    * @returns {number} Calculated left constraint.\n    */\n   getLeft(width)\n   {\n      // Determine containing bounds from manual values; or any element; lastly the browser width / height.\n      const boundsWidth = this.#width ?? this.#element?.offsetWidth ?? globalThis.innerWidth;\n\n      return (boundsWidth - width) / 2;\n   }\n\n   /**\n    * Get the top constraint based on any manual target values or the browser inner height.\n    *\n    * @param {number}   height - Target height.\n    *\n    * @returns {number} Calculated top constraint.\n    */\n   getTop(height)\n   {\n      const boundsHeight = this.#height ?? this.#element?.offsetHeight ?? globalThis.innerHeight;\n\n      return (boundsHeight - height) / 2;\n   }\n}\n\nclass PositionChangeSet\n{\n   constructor()\n   {\n      this.left = false;\n      this.top = false;\n      this.width = false;\n      this.height = false;\n      this.maxHeight = false;\n      this.maxWidth = false;\n      this.minHeight = false;\n      this.minWidth = false;\n      this.zIndex = false;\n      this.transform = false;\n      this.transformOrigin = false;\n   }\n\n   hasChange()\n   {\n      return this.left || this.top || this.width || this.height || this.maxHeight || this.maxWidth || this.minHeight ||\n       this.minWidth || this.zIndex || this.transform || this.transformOrigin;\n   }\n\n   set(value)\n   {\n      this.left = value;\n      this.top = value;\n      this.width = value;\n      this.height = value;\n      this.maxHeight = value;\n      this.maxWidth = value;\n      this.minHeight = value;\n      this.minWidth = value;\n      this.zIndex = value;\n      this.transform = value;\n      this.transformOrigin = value;\n   }\n}\n\n/**\n * Defines stored positional data.\n */\nclass TJSPositionData\n{\n   constructor({ height = null, left = null, maxHeight = null, maxWidth = null, minHeight = null, minWidth = null,\n    rotateX = null, rotateY = null, rotateZ = null, scale = null, translateX = null, translateY = null,\n     translateZ = null, top = null, transformOrigin = null, width = null, zIndex = null } = {})\n   {\n      /**\n       * @type {number|'auto'|'inherit'|null}\n       */\n      this.height = height;\n\n      /**\n       * @type {number|null}\n       */\n      this.left = left;\n\n      /**\n       * @type {number|null}\n       */\n      this.maxHeight = maxHeight;\n\n      /**\n       * @type {number|null}\n       */\n      this.maxWidth = maxWidth;\n\n      /**\n       * @type {number|null}\n       */\n      this.minHeight = minHeight;\n\n      /**\n       * @type {number|null}\n       */\n      this.minWidth = minWidth;\n\n      /**\n       * @type {number|null}\n       */\n      this.rotateX = rotateX;\n\n      /**\n       * @type {number|null}\n       */\n      this.rotateY = rotateY;\n\n      /**\n       * @type {number|null}\n       */\n      this.rotateZ = rotateZ;\n\n      /**\n       * @type {number|null}\n       */\n      this.scale = scale;\n\n      /**\n       * @type {number|null}\n       */\n      this.top = top;\n\n      /**\n       * @type {string|null}\n       */\n      this.transformOrigin = transformOrigin;\n\n      /**\n       * @type {number|null}\n       */\n      this.translateX = translateX;\n\n      /**\n       * @type {number|null}\n       */\n      this.translateY = translateY;\n\n      /**\n       * @type {number|null}\n       */\n      this.translateZ = translateZ;\n\n      /**\n       * @type {number|'auto'|'inherit'|null}\n       */\n      this.width = width;\n\n      /**\n       * @type {number|null}\n       */\n      this.zIndex = zIndex;\n\n      Object.seal(this);\n   }\n\n   /**\n    * Copies given data to this instance.\n    *\n    * @param {TJSPositionData}   data - Copy from this instance.\n    *\n    * @returns {TJSPositionData} This instance.\n    */\n   copy(data)\n   {\n      this.height = data.height;\n      this.left = data.left;\n      this.maxHeight = data.maxHeight;\n      this.maxWidth = data.maxWidth;\n      this.minHeight = data.minHeight;\n      this.minWidth = data.minWidth;\n      this.rotateX = data.rotateX;\n      this.rotateY = data.rotateY;\n      this.rotateZ = data.rotateZ;\n      this.scale = data.scale;\n      this.top = data.top;\n      this.transformOrigin = data.transformOrigin;\n      this.translateX = data.translateX;\n      this.translateY = data.translateY;\n      this.translateZ = data.translateZ;\n      this.width = data.width;\n      this.zIndex = data.zIndex;\n\n      return this;\n   }\n}\n\nclass PositionStateAPI\n{\n   /** @type {import('./TJSPositionData').TJSPositionData} */\n   #data;\n\n   /**\n    * @type {Map<string, import('./').TJSPositionDataExtended>}\n    */\n   #dataSaved = new Map();\n\n   /** @type {import('./').TJSPosition} */\n   #position;\n\n   /** @type {import('./transform').TJSTransforms} */\n   #transforms;\n\n   constructor(position, data, transforms)\n   {\n      this.#position = position;\n      this.#data = data;\n      this.#transforms = transforms;\n   }\n\n   /**\n    * Returns any stored save state by name.\n    *\n    * @param {object}   options - Options\n    *\n    * @param {string}   options.name - Saved data set name.\n    *\n    * @returns {import('./').TJSPositionDataExtended} The saved data set.\n    */\n   get({ name })\n   {\n      if (typeof name !== 'string') { throw new TypeError(`Position - getSave error: 'name' is not a string.`); }\n\n      return this.#dataSaved.get(name);\n   }\n\n   /**\n    * Returns any associated default data.\n    *\n    * @returns {import('./').TJSPositionDataExtended} Associated default data.\n    */\n   getDefault()\n   {\n      return this.#dataSaved.get('#defaultData');\n   }\n\n   /**\n    * Removes and returns any position state by name.\n    *\n    * @param {object}   options - Options.\n    *\n    * @param {string}   options.name - Name to remove and retrieve.\n    *\n    * @returns {import('./').TJSPositionDataExtended} Saved position data.\n    */\n   remove({ name })\n   {\n      if (typeof name !== 'string') { throw new TypeError(`Position - remove: 'name' is not a string.`); }\n\n      const data = this.#dataSaved.get(name);\n      this.#dataSaved.delete(name);\n\n      return data;\n   }\n\n   /**\n    * Resets data to default values and invokes set.\n    *\n    * @param {object}   [opts] - Optional parameters.\n    *\n    * @param {boolean}  [opts.keepZIndex=false] - When true keeps current z-index.\n    *\n    * @param {boolean}  [opts.invokeSet=true] - When true invokes set method.\n    *\n    * @returns {boolean} Operation successful.\n    */\n   reset({ keepZIndex = false, invokeSet = true } = {})\n   {\n      const defaultData = this.#dataSaved.get('#defaultData');\n\n      // Quit early if there is no saved default data.\n      if (!isObject(defaultData)) { return false; }\n\n      // Cancel all animations for TJSPosition if there are currently any scheduled.\n      if (this.#position.animate.isScheduled)\n      {\n         this.#position.animate.cancel();\n      }\n\n      const zIndex = this.#position.zIndex;\n\n      const data = Object.assign({}, defaultData);\n\n      if (keepZIndex) { data.zIndex = zIndex; }\n\n      // Reset the transform data.\n      this.#transforms.reset(data);\n\n      // If current minimized invoke `maximize`.\n      if (this.#position.parent?.reactive?.minimized)\n      {\n         this.#position.parent?.maximize?.({ animate: false, duration: 0 });\n      }\n\n      // Note next clock tick scheduling.\n      if (invokeSet) { setTimeout(() => this.#position.set(data), 0); }\n\n      return true;\n   }\n\n   /**\n    * Restores a saved positional state returning the data. Several optional parameters are available\n    * to control whether the restore action occurs silently (no store / inline styles updates), animates\n-   * to the stored data, or simply sets the stored data. Restoring via {@link AnimationAPI.to}\n    * allows specification of the duration, easing, and interpolate functions along with configuring a Promise to be\n    * returned if awaiting the end of the animation.\n    *\n    * @param {object}            params - Parameters\n    *\n    * @param {string}            params.name - Saved data set name.\n    *\n    * @param {boolean}           [params.remove=false] - Remove data set.\n    *\n    * @param {Iterable<string>}  [params.properties] - Specific properties to set / animate.\n    *\n    * @param {boolean}           [params.silent] - Set position data directly; no store or style updates.\n    *\n    * @param {boolean}           [params.async=false] - If animating return a Promise that resolves with any saved data.\n    *\n    * @param {boolean}           [params.animateTo=false] - Animate to restore data.\n    *\n    * @param {number}            [params.duration=0.1] - Duration in seconds.\n    *\n    * @param {Function}          [params.ease=linear] - Easing function.\n    *\n    * @param {Function}          [params.interpolate=lerp] - Interpolation function.\n    *\n    * @returns {import('./').TJSPositionDataExtended | Promise<import('./').TJSPositionDataExtended>} Saved position\n    *          data.\n    */\n   restore({ name, remove = false, properties, silent = false, async = false, animateTo = false, duration = 0.1,\n    ease = linear, interpolate = lerp })\n   {\n      if (typeof name !== 'string') { throw new TypeError(`Position - restore error: 'name' is not a string.`); }\n\n      const dataSaved = this.#dataSaved.get(name);\n\n      if (dataSaved)\n      {\n         if (remove) { this.#dataSaved.delete(name); }\n\n         let data = dataSaved;\n\n         if (isIterable(properties))\n         {\n            data = {};\n            for (const property of properties) { data[property] = dataSaved[property]; }\n         }\n\n         // Update data directly with no store or inline style updates.\n         if (silent)\n         {\n            for (const property in data) { this.#data[property] = data[property]; }\n            return dataSaved;\n         }\n         else if (animateTo)  // Animate to saved data.\n         {\n            // Provide special handling to potentially change transform origin as this parameter is not animated.\n            if (data.transformOrigin !== this.#position.transformOrigin)\n            {\n               this.#position.transformOrigin = data.transformOrigin;\n            }\n\n            // Return a Promise with saved data that resolves after animation ends.\n            if (async)\n            {\n               return this.#position.animate.to(data, { duration, ease, interpolate }).finished.then(() => dataSaved);\n            }\n            else  // Animate synchronously.\n            {\n               this.#position.animate.to(data, { duration, ease, interpolate });\n            }\n         }\n         else\n         {\n            // Default options is to set data for an immediate update.\n            this.#position.set(data);\n         }\n      }\n\n      return dataSaved;\n   }\n\n   /**\n    * Saves current position state with the opportunity to add extra data to the saved state.\n    *\n    * @param {object}   opts - Options.\n    *\n    * @param {string}   opts.name - name to index this saved data.\n    *\n    * @param {...*}     [opts.extra] - Extra data to add to saved data.\n    *\n    * @returns {import('./').TJSPositionData} Current position data\n    */\n   save({ name, ...extra })\n   {\n      if (typeof name !== 'string') { throw new TypeError(`Position - save error: 'name' is not a string.`); }\n\n      const data = this.#position.get(extra);\n\n      this.#dataSaved.set(name, data);\n\n      return data;\n   }\n\n   /**\n    * Directly sets a position state.\n    *\n    * @param {object}   opts - Options.\n    *\n    * @param {string}   opts.name - name to index this saved data.\n    *\n    * @param {...*}     [opts.data] - TJSPosition data to set.\n    */\n   set({ name, ...data })\n   {\n      if (typeof name !== 'string') { throw new TypeError(`Position - set error: 'name' is not a string.`); }\n\n      this.#dataSaved.set(name, data);\n   }\n}\n\nclass StyleCache\n{\n   constructor()\n   {\n      /** @type {HTMLElement|undefined} */\n      this.el = void 0;\n\n      /** @type {CSSStyleDeclaration} */\n      this.computed = void 0;\n\n      /** @type {number|undefined} */\n      this.marginLeft = void 0;\n\n      /** @type {number|undefined} */\n      this.marginTop = void 0;\n\n      /** @type {number|undefined} */\n      this.maxHeight = void 0;\n\n      /** @type {number|undefined} */\n      this.maxWidth = void 0;\n\n      /** @type {number|undefined} */\n      this.minHeight = void 0;\n\n      /** @type {number|undefined} */\n      this.minWidth = void 0;\n\n      /** @type {boolean} */\n      this.hasWillChange = false;\n\n      /**\n       * @type {import('./').ResizeObserverData}\n       */\n      this.resizeObserved = {\n         contentHeight: void 0,\n         contentWidth: void 0,\n         offsetHeight: void 0,\n         offsetWidth: void 0\n      };\n\n      /**\n       * Provides a writable store to track offset & content width / height from an associated `resizeObserver` action.\n       *\n       * @type {import('svelte/store').Writable<import('./').ResizeObserverData>}\n       */\n      const storeResizeObserved = writable(this.resizeObserved);\n\n      this.stores = {\n         element: writable(this.el),\n         resizeContentHeight: propertyStore(storeResizeObserved, 'contentHeight'),\n         resizeContentWidth: propertyStore(storeResizeObserved, 'contentWidth'),\n         resizeObserved: storeResizeObserved,\n         resizeOffsetHeight: propertyStore(storeResizeObserved, 'offsetHeight'),\n         resizeOffsetWidth: propertyStore(storeResizeObserved, 'offsetWidth')\n      };\n   }\n\n   /**\n    * Returns the cached offsetHeight from any attached `resizeObserver` action otherwise gets the offsetHeight from\n    * the element directly. The more optimized path is using `resizeObserver` as getting it from the element\n    * directly is more expensive and alters the execution order of an animation frame.\n    *\n    * @returns {number} The element offsetHeight.\n    */\n   get offsetHeight()\n   {\n      if (this.el instanceof HTMLElement)\n      {\n         return this.resizeObserved.offsetHeight !== void 0 ? this.resizeObserved.offsetHeight : this.el.offsetHeight;\n      }\n\n      throw new Error(`StyleCache - get offsetHeight error: no element assigned.`);\n   }\n\n   /**\n    * Returns the cached offsetWidth from any attached `resizeObserver` action otherwise gets the offsetWidth from\n    * the element directly. The more optimized path is using `resizeObserver` as getting it from the element\n    * directly is more expensive and alters the execution order of an animation frame.\n    *\n    * @returns {number} The element offsetHeight.\n    */\n   get offsetWidth()\n   {\n      if (this.el instanceof HTMLElement)\n      {\n         return this.resizeObserved.offsetWidth !== void 0 ? this.resizeObserved.offsetWidth : this.el.offsetWidth;\n      }\n\n      throw new Error(`StyleCache - get offsetWidth error: no element assigned.`);\n   }\n\n   /**\n    * @param {HTMLElement} el -\n    *\n    * @returns {boolean} Does element match cached element.\n    */\n   hasData(el) { return this.el === el; }\n\n   /**\n    * Resets the style cache.\n    */\n   reset()\n   {\n      // Remove will-change inline style from previous element if it is still connected.\n      if (this.el instanceof HTMLElement && this.el.isConnected && !this.hasWillChange)\n      {\n         this.el.style.willChange = null;\n      }\n\n      this.el = void 0;\n      this.computed = void 0;\n      this.marginLeft = void 0;\n      this.marginTop = void 0;\n      this.maxHeight = void 0;\n      this.maxWidth = void 0;\n      this.minHeight = void 0;\n      this.minWidth = void 0;\n\n      this.hasWillChange = false;\n\n      // Silently reset `resizedObserved`; With proper usage the `resizeObserver` action issues an update on removal.\n      this.resizeObserved.contentHeight = void 0;\n      this.resizeObserved.contentWidth = void 0;\n      this.resizeObserved.offsetHeight = void 0;\n      this.resizeObserved.offsetWidth = void 0;\n\n      // Reset the tracked element this TJSPosition instance is modifying.\n      this.stores.element.set(void 0);\n   }\n\n   /**\n    * Updates the style cache with new data from the given element.\n    *\n    * @param {HTMLElement} el - An HTML element.\n    */\n   update(el)\n   {\n      this.el = el;\n\n      this.computed = globalThis.getComputedStyle(el);\n\n      this.marginLeft = StyleParse.pixels(el.style.marginLeft) ?? StyleParse.pixels(this.computed.marginLeft);\n      this.marginTop = StyleParse.pixels(el.style.marginTop) ?? StyleParse.pixels(this.computed.marginTop);\n      this.maxHeight = StyleParse.pixels(el.style.maxHeight) ?? StyleParse.pixels(this.computed.maxHeight);\n      this.maxWidth = StyleParse.pixels(el.style.maxWidth) ?? StyleParse.pixels(this.computed.maxWidth);\n\n      // Note that the computed styles for below will always be 0px / 0 when no style is active.\n      this.minHeight = StyleParse.pixels(el.style.minHeight) ?? StyleParse.pixels(this.computed.minHeight);\n      this.minWidth = StyleParse.pixels(el.style.minWidth) ?? StyleParse.pixels(this.computed.minWidth);\n\n      // Tracks if there already is a will-change property on the inline or computed styles.\n      const willChange = el.style.willChange !== '' ? el.style.willChange : this.computed.willChange;\n\n      this.hasWillChange = willChange !== '' && willChange !== 'auto';\n\n      // Update the tracked element this TJSPosition instance is modifying.\n      this.stores.element.set(el);\n   }\n}\n\n/**\n * Provides the output data for {@link TJSTransforms.getData}.\n */\nclass TJSTransformData\n{\n   constructor()\n   {\n      Object.seal(this);\n   }\n\n   /**\n    * Stores the calculated bounding rectangle.\n    *\n    * @type {DOMRect}\n    */\n   #boundingRect = new DOMRect();\n\n   /**\n    * Stores the individual transformed corner points of the window in screen space clockwise from:\n    * top left -> top right -> bottom right -> bottom left.\n    *\n    * @type {import('#runtime/math/gl-matrix').Vec3[]}\n    */\n   #corners = [Vec3.create(), Vec3.create(), Vec3.create(), Vec3.create()];\n\n   /**\n    * Stores the current gl-matrix Mat4 data.\n    *\n    * @type {import('#runtime/math/gl-matrix').Mat4}\n    */\n   #mat4 = Mat4.create();\n\n   /**\n    * Stores the pre & post origin translations to apply to matrix transforms.\n    *\n    * @type {import('#runtime/math/gl-matrix').Mat4[]}\n    */\n   #originTranslations = [Mat4.create(), Mat4.create()];\n\n   /**\n    * @returns {DOMRect} The bounding rectangle.\n    */\n   get boundingRect() { return this.#boundingRect; }\n\n   /**\n    * @returns {import('#runtime/math/gl-matrix').Vec3[]} The transformed corner points as Vec3 in screen space.\n    */\n   get corners() { return this.#corners; }\n\n   /**\n    * @returns {string} Returns the CSS style string for the transform matrix.\n    */\n   get css() { return `matrix3d(${this.mat4.join(',')})`; }\n\n   /**\n    * @returns {import('#runtime/math/gl-matrix').Mat4} The transform matrix.\n    */\n   get mat4() { return this.#mat4; }\n\n   /**\n    * @returns {import('#runtime/math/gl-matrix').Mat4[]} The pre / post translation matrices for origin translation.\n    */\n   get originTranslations() { return this.#originTranslations; }\n}\n\n/** @type {number[]} */\nconst s_SCALE_VECTOR = [1, 1, 1];\n\n/** @type {number[]} */\nconst s_TRANSLATE_VECTOR = [0, 0, 0];\n\n/** @type {import('#runtime/math/gl-matrix').Mat4} */\nconst s_MAT4_RESULT = Mat4.create();\n\n/** @type {import('#runtime/math/gl-matrix').Mat4} */\nconst s_MAT4_TEMP = Mat4.create();\n\n/** @type {import('#runtime/math/gl-matrix').Vec3} */\nconst s_VEC3_TEMP = Vec3.create();\n\nclass TJSTransforms\n{\n   /**\n    * Stores the transform keys in the order added.\n    *\n    * @type {string[]}\n    */\n   #orderList = [];\n\n   constructor()\n   {\n      this._data = {};\n   }\n\n   /**\n    * @returns {boolean} Whether there are active transforms in local data.\n    */\n   get isActive() { return this.#orderList.length > 0; }\n\n   /**\n    * @returns {number|undefined} Any local rotateX data.\n    */\n   get rotateX() { return this._data.rotateX; }\n\n   /**\n    * @returns {number|undefined} Any local rotateY data.\n    */\n   get rotateY() { return this._data.rotateY; }\n\n   /**\n    * @returns {number|undefined} Any local rotateZ data.\n    */\n   get rotateZ() { return this._data.rotateZ; }\n\n   /**\n    * @returns {number|undefined} Any local rotateZ scale.\n    */\n   get scale() { return this._data.scale; }\n\n   /**\n    * @returns {number|undefined} Any local translateZ data.\n    */\n   get translateX() { return this._data.translateX; }\n\n   /**\n    * @returns {number|undefined} Any local translateZ data.\n    */\n   get translateY() { return this._data.translateY; }\n\n   /**\n    * @returns {number|undefined} Any local translateZ data.\n    */\n   get translateZ() { return this._data.translateZ; }\n\n   /**\n    * Sets the local rotateX data if the value is a finite number otherwise removes the local data.\n    *\n    * @param {number|null|undefined}   value - A value to set.\n    */\n   set rotateX(value)\n   {\n      if (Number.isFinite(value))\n      {\n         if (this._data.rotateX === void 0) { this.#orderList.push('rotateX'); }\n\n         this._data.rotateX = value;\n      }\n      else\n      {\n         if (this._data.rotateX !== void 0)\n         {\n            const index = this.#orderList.findIndex((entry) => entry === 'rotateX');\n            if (index >= 0) { this.#orderList.splice(index, 1); }\n         }\n\n         delete this._data.rotateX;\n      }\n   }\n\n   /**\n    * Sets the local rotateY data if the value is a finite number otherwise removes the local data.\n    *\n    * @param {number|null|undefined}   value - A value to set.\n    */\n   set rotateY(value)\n   {\n      if (Number.isFinite(value))\n      {\n         if (this._data.rotateY === void 0) { this.#orderList.push('rotateY'); }\n\n         this._data.rotateY = value;\n      }\n      else\n      {\n         if (this._data.rotateY !== void 0)\n         {\n            const index = this.#orderList.findIndex((entry) => entry === 'rotateY');\n            if (index >= 0) { this.#orderList.splice(index, 1); }\n         }\n\n         delete this._data.rotateY;\n      }\n   }\n\n   /**\n    * Sets the local rotateZ data if the value is a finite number otherwise removes the local data.\n    *\n    * @param {number|null|undefined}   value - A value to set.\n    */\n   set rotateZ(value)\n   {\n      if (Number.isFinite(value))\n      {\n         if (this._data.rotateZ === void 0) { this.#orderList.push('rotateZ'); }\n\n         this._data.rotateZ = value;\n      }\n\n      else\n      {\n         if (this._data.rotateZ !== void 0)\n         {\n            const index = this.#orderList.findIndex((entry) => entry === 'rotateZ');\n            if (index >= 0) { this.#orderList.splice(index, 1); }\n         }\n\n         delete this._data.rotateZ;\n      }\n   }\n\n   /**\n    * Sets the local scale data if the value is a finite number otherwise removes the local data.\n    *\n    * @param {number|null|undefined}   value - A value to set.\n    */\n   set scale(value)\n   {\n      if (Number.isFinite(value))\n      {\n         if (this._data.scale === void 0) { this.#orderList.push('scale'); }\n\n         this._data.scale = value;\n      }\n      else\n      {\n         if (this._data.scale !== void 0)\n         {\n            const index = this.#orderList.findIndex((entry) => entry === 'scale');\n            if (index >= 0) { this.#orderList.splice(index, 1); }\n         }\n\n         delete this._data.scale;\n      }\n   }\n\n   /**\n    * Sets the local translateX data if the value is a finite number otherwise removes the local data.\n    *\n    * @param {number|null|undefined}   value - A value to set.\n    */\n   set translateX(value)\n   {\n      if (Number.isFinite(value))\n      {\n         if (this._data.translateX === void 0) { this.#orderList.push('translateX'); }\n\n         this._data.translateX = value;\n      }\n\n      else\n      {\n         if (this._data.translateX !== void 0)\n         {\n            const index = this.#orderList.findIndex((entry) => entry === 'translateX');\n            if (index >= 0) { this.#orderList.splice(index, 1); }\n         }\n\n         delete this._data.translateX;\n      }\n   }\n\n   /**\n    * Sets the local translateY data if the value is a finite number otherwise removes the local data.\n    *\n    * @param {number|null|undefined}   value - A value to set.\n    */\n   set translateY(value)\n   {\n      if (Number.isFinite(value))\n      {\n         if (this._data.translateY === void 0) { this.#orderList.push('translateY'); }\n\n         this._data.translateY = value;\n      }\n\n      else\n      {\n         if (this._data.translateY !== void 0)\n         {\n            const index = this.#orderList.findIndex((entry) => entry === 'translateY');\n            if (index >= 0) { this.#orderList.splice(index, 1); }\n         }\n\n         delete this._data.translateY;\n      }\n   }\n\n   /**\n    * Sets the local translateZ data if the value is a finite number otherwise removes the local data.\n    *\n    * @param {number|null|undefined}   value - A value to set.\n    */\n   set translateZ(value)\n   {\n      if (Number.isFinite(value))\n      {\n         if (this._data.translateZ === void 0) { this.#orderList.push('translateZ'); }\n\n         this._data.translateZ = value;\n      }\n\n      else\n      {\n         if (this._data.translateZ !== void 0)\n         {\n            const index = this.#orderList.findIndex((entry) => entry === 'translateZ');\n            if (index >= 0) { this.#orderList.splice(index, 1); }\n         }\n\n         delete this._data.translateZ;\n      }\n   }\n\n   /**\n    * Returns the matrix3d CSS transform for the given position / transform data.\n    *\n    * @param {object} [data] - Optional position data otherwise use local stored transform data.\n    *\n    * @returns {string} The CSS matrix3d string.\n    */\n   getCSS(data = this._data)\n   {\n      return `matrix3d(${this.getMat4(data, s_MAT4_RESULT).join(',')})`;\n   }\n\n   /**\n    * Returns the matrix3d CSS transform for the given position / transform data.\n    *\n    * @param {object} [data] - Optional position data otherwise use local stored transform data.\n    *\n    * @returns {string} The CSS matrix3d string.\n    */\n   getCSSOrtho(data = this._data)\n   {\n      return `matrix3d(${this.getMat4Ortho(data, s_MAT4_RESULT).join(',')})`;\n   }\n\n   /**\n    * Collects all data including a bounding rect, transform matrix, and points array of the given\n    * {@link TJSPositionData} instance with the applied local transform data.\n    *\n    * @param {import('../').TJSPositionData} position - The position data to process.\n    *\n    * @param {TJSTransformData} [output] - Optional TJSTransformData output instance.\n    *\n    * @param {object} [validationData] - Optional validation data for adjustment parameters.\n    *\n    * @returns {TJSTransformData} The output TJSTransformData instance.\n    */\n   getData(position, output = new TJSTransformData(), validationData = {})\n   {\n      const valWidth = validationData.width ?? 0;\n      const valHeight = validationData.height ?? 0;\n      const valOffsetTop = validationData.offsetTop ?? validationData.marginTop ?? 0;\n      const valOffsetLeft = validationData.offsetLeft ?? validationData.offsetLeft ?? 0;\n\n      position.top += valOffsetTop;\n      position.left += valOffsetLeft;\n\n      const width = Number.isFinite(position.width) ? position.width : valWidth;\n      const height = Number.isFinite(position.height) ? position.height : valHeight;\n\n      const rect = output.corners;\n\n      if (this.hasTransform(position))\n      {\n         rect[0][0] = rect[0][1] = rect[0][2] = 0;\n         rect[1][0] = width;\n         rect[1][1] = rect[1][2] = 0;\n         rect[2][0] = width;\n         rect[2][1] = height;\n         rect[2][2] = 0;\n         rect[3][0] = 0;\n         rect[3][1] = height;\n         rect[3][2] = 0;\n\n         const matrix = this.getMat4(position, output.mat4);\n\n         const translate = s_GET_ORIGIN_TRANSLATION(position.transformOrigin, width, height, output.originTranslations);\n\n         if (transformOriginDefault === position.transformOrigin)\n         {\n            Vec3.transformMat4(rect[0], rect[0], matrix);\n            Vec3.transformMat4(rect[1], rect[1], matrix);\n            Vec3.transformMat4(rect[2], rect[2], matrix);\n            Vec3.transformMat4(rect[3], rect[3], matrix);\n         }\n         else\n         {\n            Vec3.transformMat4(rect[0], rect[0], translate[0]);\n            Vec3.transformMat4(rect[0], rect[0], matrix);\n            Vec3.transformMat4(rect[0], rect[0], translate[1]);\n\n            Vec3.transformMat4(rect[1], rect[1], translate[0]);\n            Vec3.transformMat4(rect[1], rect[1], matrix);\n            Vec3.transformMat4(rect[1], rect[1], translate[1]);\n\n            Vec3.transformMat4(rect[2], rect[2], translate[0]);\n            Vec3.transformMat4(rect[2], rect[2], matrix);\n            Vec3.transformMat4(rect[2], rect[2], translate[1]);\n\n            Vec3.transformMat4(rect[3], rect[3], translate[0]);\n            Vec3.transformMat4(rect[3], rect[3], matrix);\n            Vec3.transformMat4(rect[3], rect[3], translate[1]);\n         }\n\n         rect[0][0] = position.left + rect[0][0];\n         rect[0][1] = position.top + rect[0][1];\n         rect[1][0] = position.left + rect[1][0];\n         rect[1][1] = position.top + rect[1][1];\n         rect[2][0] = position.left + rect[2][0];\n         rect[2][1] = position.top + rect[2][1];\n         rect[3][0] = position.left + rect[3][0];\n         rect[3][1] = position.top + rect[3][1];\n      }\n      else\n      {\n         rect[0][0] = position.left;\n         rect[0][1] = position.top;\n         rect[1][0] = position.left + width;\n         rect[1][1] = position.top;\n         rect[2][0] = position.left + width;\n         rect[2][1] = position.top + height;\n         rect[3][0] = position.left;\n         rect[3][1] = position.top + height;\n\n         Mat4.identity(output.mat4);\n      }\n\n      let maxX = Number.MIN_SAFE_INTEGER;\n      let maxY = Number.MIN_SAFE_INTEGER;\n      let minX = Number.MAX_SAFE_INTEGER;\n      let minY = Number.MAX_SAFE_INTEGER;\n\n      for (let cntr = 4; --cntr >= 0;)\n      {\n         if (rect[cntr][0] > maxX) { maxX = rect[cntr][0]; }\n         if (rect[cntr][0] < minX) { minX = rect[cntr][0]; }\n         if (rect[cntr][1] > maxY) { maxY = rect[cntr][1]; }\n         if (rect[cntr][1] < minY) { minY = rect[cntr][1]; }\n      }\n\n      const boundingRect = output.boundingRect;\n      boundingRect.x = minX;\n      boundingRect.y = minY;\n      boundingRect.width = maxX - minX;\n      boundingRect.height = maxY - minY;\n\n      position.top -= valOffsetTop;\n      position.left -= valOffsetLeft;\n\n      return output;\n   }\n\n   /**\n    * Creates a transform matrix based on local data applied in order it was added.\n    *\n    * If no data object is provided then the source is the local transform data. If another data object is supplied\n    * then the stored local transform order is applied then all remaining transform keys are applied. This allows the\n    * construction of a transform matrix in advance of setting local data and is useful in collision detection.\n    *\n    * @param {object}   [data] - TJSPositionData instance or local transform data.\n    *\n    * @param {import('#runtime/math/gl-matrix').Mat4}  [output] - The output mat4 instance.\n    *\n    * @returns {import('#runtime/math/gl-matrix').Mat4} Transform matrix.\n    */\n   getMat4(data = this._data, output = Mat4.create())\n   {\n      const matrix = Mat4.identity(output);\n\n      // Bitwise tracks applied transform keys from local transform data.\n      let seenKeys = 0;\n\n      const orderList = this.#orderList;\n\n      // First apply ordered transforms from local transform data.\n      for (let cntr = 0; cntr < orderList.length; cntr++)\n      {\n         const key = orderList[cntr];\n\n         switch (key)\n         {\n            case 'rotateX':\n               seenKeys |= transformKeysBitwise.rotateX;\n               Mat4.multiply(matrix, matrix, Mat4.fromXRotation(s_MAT4_TEMP, degToRad(data[key])));\n               break;\n\n            case 'rotateY':\n               seenKeys |= transformKeysBitwise.rotateY;\n               Mat4.multiply(matrix, matrix, Mat4.fromYRotation(s_MAT4_TEMP, degToRad(data[key])));\n               break;\n\n            case 'rotateZ':\n               seenKeys |= transformKeysBitwise.rotateZ;\n               Mat4.multiply(matrix, matrix, Mat4.fromZRotation(s_MAT4_TEMP, degToRad(data[key])));\n               break;\n\n            case 'scale':\n               seenKeys |= transformKeysBitwise.scale;\n               s_SCALE_VECTOR[0] = s_SCALE_VECTOR[1] = data[key];\n               Mat4.multiply(matrix, matrix, Mat4.fromScaling(s_MAT4_TEMP, s_SCALE_VECTOR));\n               break;\n\n            case 'translateX':\n               seenKeys |= transformKeysBitwise.translateX;\n               s_TRANSLATE_VECTOR[0] = data.translateX;\n               s_TRANSLATE_VECTOR[1] = 0;\n               s_TRANSLATE_VECTOR[2] = 0;\n               Mat4.multiply(matrix, matrix, Mat4.fromTranslation(s_MAT4_TEMP, s_TRANSLATE_VECTOR));\n               break;\n\n            case 'translateY':\n               seenKeys |= transformKeysBitwise.translateY;\n               s_TRANSLATE_VECTOR[0] = 0;\n               s_TRANSLATE_VECTOR[1] = data.translateY;\n               s_TRANSLATE_VECTOR[2] = 0;\n               Mat4.multiply(matrix, matrix, Mat4.fromTranslation(s_MAT4_TEMP, s_TRANSLATE_VECTOR));\n               break;\n\n            case 'translateZ':\n               seenKeys |= transformKeysBitwise.translateZ;\n               s_TRANSLATE_VECTOR[0] = 0;\n               s_TRANSLATE_VECTOR[1] = 0;\n               s_TRANSLATE_VECTOR[2] = data.translateZ;\n               Mat4.multiply(matrix, matrix, Mat4.fromTranslation(s_MAT4_TEMP, s_TRANSLATE_VECTOR));\n               break;\n         }\n      }\n\n      // Now apply any new keys not set in local transform data that have not been applied yet.\n      if (data !== this._data)\n      {\n         for (let cntr = 0; cntr < transformKeys.length; cntr++)\n         {\n            const key = transformKeys[cntr];\n\n            // Reject bad / no data or if the key has already been applied.\n            if (data[key] === null || (seenKeys & transformKeysBitwise[key]) > 0) { continue; }\n\n            switch (key)\n            {\n               case 'rotateX':\n                  Mat4.multiply(matrix, matrix, Mat4.fromXRotation(s_MAT4_TEMP, degToRad(data[key])));\n                  break;\n\n               case 'rotateY':\n                  Mat4.multiply(matrix, matrix, Mat4.fromYRotation(s_MAT4_TEMP, degToRad(data[key])));\n                  break;\n\n               case 'rotateZ':\n                  Mat4.multiply(matrix, matrix, Mat4.fromZRotation(s_MAT4_TEMP, degToRad(data[key])));\n                  break;\n\n               case 'scale':\n                  s_SCALE_VECTOR[0] = s_SCALE_VECTOR[1] = data[key];\n                  Mat4.multiply(matrix, matrix, Mat4.fromScaling(s_MAT4_TEMP, s_SCALE_VECTOR));\n                  break;\n\n               case 'translateX':\n                  s_TRANSLATE_VECTOR[0] = data[key];\n                  s_TRANSLATE_VECTOR[1] = 0;\n                  s_TRANSLATE_VECTOR[2] = 0;\n                  Mat4.multiply(matrix, matrix, Mat4.fromTranslation(s_MAT4_TEMP, s_TRANSLATE_VECTOR));\n                  break;\n\n               case 'translateY':\n                  s_TRANSLATE_VECTOR[0] = 0;\n                  s_TRANSLATE_VECTOR[1] = data[key];\n                  s_TRANSLATE_VECTOR[2] = 0;\n                  Mat4.multiply(matrix, matrix, Mat4.fromTranslation(s_MAT4_TEMP, s_TRANSLATE_VECTOR));\n                  break;\n\n               case 'translateZ':\n                  s_TRANSLATE_VECTOR[0] = 0;\n                  s_TRANSLATE_VECTOR[1] = 0;\n                  s_TRANSLATE_VECTOR[2] = data[key];\n                  Mat4.multiply(matrix, matrix, Mat4.fromTranslation(s_MAT4_TEMP, s_TRANSLATE_VECTOR));\n                  break;\n            }\n         }\n      }\n\n      return matrix;\n   }\n\n   /**\n    * Provides an orthographic enhancement to convert left / top positional data to a translate operation.\n    *\n    * This transform matrix takes into account that the remaining operations are , but adds any left / top attributes from passed in data to\n    * translate X / Y.\n    *\n    * If no data object is provided then the source is the local transform data. If another data object is supplied\n    * then the stored local transform order is applied then all remaining transform keys are applied. This allows the\n    * construction of a transform matrix in advance of setting local data and is useful in collision detection.\n    *\n    * @param {object}   [data] - TJSPositionData instance or local transform data.\n    *\n    * @param {import('#runtime/math/gl-matrix').Mat4}  [output] - The output mat4 instance.\n    *\n    * @returns {import('#runtime/math/gl-matrix').Mat4} Transform matrix.\n    */\n   getMat4Ortho(data = this._data, output = Mat4.create())\n   {\n      const matrix = Mat4.identity(output);\n\n      // Attempt to retrieve values from passed in data otherwise default to 0.\n      // Always perform the translation last regardless of order added to local transform data.\n      // Add data.left to translateX and data.top to translateY.\n      s_TRANSLATE_VECTOR[0] = (data.left ?? 0) + (data.translateX ?? 0);\n      s_TRANSLATE_VECTOR[1] = (data.top ?? 0) + (data.translateY ?? 0);\n      s_TRANSLATE_VECTOR[2] = data.translateZ ?? 0;\n      Mat4.multiply(matrix, matrix, Mat4.fromTranslation(s_MAT4_TEMP, s_TRANSLATE_VECTOR));\n\n      // Scale can also be applied out of order.\n      if (data.scale !== null)\n      {\n         s_SCALE_VECTOR[0] = s_SCALE_VECTOR[1] = data.scale;\n         Mat4.multiply(matrix, matrix, Mat4.fromScaling(s_MAT4_TEMP, s_SCALE_VECTOR));\n      }\n\n      // Early out if there is not rotation data.\n      if (data.rotateX === null && data.rotateY === null && data.rotateZ === null) { return matrix; }\n\n      // Rotation transforms must be applied in the order they are added.\n\n      // Bitwise tracks applied transform keys from local transform data.\n      let seenKeys = 0;\n\n      const orderList = this.#orderList;\n\n      // First apply ordered transforms from local transform data.\n      for (let cntr = 0; cntr < orderList.length; cntr++)\n      {\n         const key = orderList[cntr];\n\n         switch (key)\n         {\n            case 'rotateX':\n               seenKeys |= transformKeysBitwise.rotateX;\n               Mat4.multiply(matrix, matrix, Mat4.fromXRotation(s_MAT4_TEMP, degToRad(data[key])));\n               break;\n\n            case 'rotateY':\n               seenKeys |= transformKeysBitwise.rotateY;\n               Mat4.multiply(matrix, matrix, Mat4.fromYRotation(s_MAT4_TEMP, degToRad(data[key])));\n               break;\n\n            case 'rotateZ':\n               seenKeys |= transformKeysBitwise.rotateZ;\n               Mat4.multiply(matrix, matrix, Mat4.fromZRotation(s_MAT4_TEMP, degToRad(data[key])));\n               break;\n         }\n      }\n\n      // Now apply any new keys not set in local transform data that have not been applied yet.\n      if (data !== this._data)\n      {\n         for (let cntr = 0; cntr < transformKeys.length; cntr++)\n         {\n            const key = transformKeys[cntr];\n\n            // Reject bad / no data or if the key has already been applied.\n            if (data[key] === null || (seenKeys & transformKeysBitwise[key]) > 0) { continue; }\n\n            switch (key)\n            {\n               case 'rotateX':\n                  Mat4.multiply(matrix, matrix, Mat4.fromXRotation(s_MAT4_TEMP, degToRad(data[key])));\n                  break;\n\n               case 'rotateY':\n                  Mat4.multiply(matrix, matrix, Mat4.fromYRotation(s_MAT4_TEMP, degToRad(data[key])));\n                  break;\n\n               case 'rotateZ':\n                  Mat4.multiply(matrix, matrix, Mat4.fromZRotation(s_MAT4_TEMP, degToRad(data[key])));\n                  break;\n            }\n         }\n      }\n\n      return matrix;\n   }\n\n   /**\n    * Tests an object if it contains transform keys and the values are finite numbers.\n    *\n    * @param {object} data - An object to test for transform data.\n    *\n    * @returns {boolean} Whether the given TJSPositionData has transforms.\n    */\n   hasTransform(data)\n   {\n      for (const key of transformKeys)\n      {\n         if (Number.isFinite(data[key])) { return true; }\n      }\n\n      return false;\n   }\n\n   /**\n    * Resets internal data from the given object containing valid transform keys.\n    *\n    * @param {object}   data - An object with transform data.\n    */\n   reset(data)\n   {\n      for (const key in data)\n      {\n         if (transformKeys.includes(key))\n         {\n            if (Number.isFinite(data[key]))\n            {\n               this._data[key] = data[key];\n            }\n            else\n            {\n               const index = this.#orderList.findIndex((entry) => entry === key);\n               if (index >= 0) { this.#orderList.splice(index, 1); }\n\n               delete this._data[key];\n            }\n         }\n      }\n   }\n}\n\n/**\n * Returns the translations necessary to translate a matrix operation based on the `transformOrigin` parameter of the\n * given position instance. The first entry / index 0 is the pre-translation and last entry / index 1 is the post-\n * translation.\n *\n * This method is used internally, but may be useful if you need the origin translation matrices to transform\n * bespoke points based on any `transformOrigin` set in {@link TJSPositionData}.\n *\n * @param {string}   transformOrigin - The transform origin attribute from TJSPositionData.\n *\n * @param {number}   width - The TJSPositionData width or validation data width when 'auto'.\n *\n * @param {number}   height - The TJSPositionData height or validation data height when 'auto'.\n *\n * @param {import('#runtime/math/gl-matrix').Mat4[]}   output - Output Mat4 array.\n *\n * @returns {import('#runtime/math/gl-matrix').Mat4[]} Output Mat4 array.\n */\nfunction s_GET_ORIGIN_TRANSLATION(transformOrigin, width, height, output)\n{\n   const vector = s_VEC3_TEMP;\n\n   switch (transformOrigin)\n   {\n      case 'top left':\n         vector[0] = vector[1] = 0;\n         Mat4.fromTranslation(output[0], vector);\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      case 'top center':\n         vector[0] = -width * 0.5;\n         vector[1] = 0;\n         Mat4.fromTranslation(output[0], vector);\n         vector[0] = width * 0.5;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      case 'top right':\n         vector[0] = -width;\n         vector[1] = 0;\n         Mat4.fromTranslation(output[0], vector);\n         vector[0] = width;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      case 'center left':\n         vector[0] = 0;\n         vector[1] = -height * 0.5;\n         Mat4.fromTranslation(output[0], vector);\n         vector[1] = height * 0.5;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      // By default, null / no transform is 'center'.\n      case null:\n      case 'center':\n         vector[0] = -width * 0.5;\n         vector[1] = -height * 0.5;\n         Mat4.fromTranslation(output[0], vector);\n         vector[0] = width * 0.5;\n         vector[1] = height * 0.5;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      case 'center right':\n         vector[0] = -width;\n         vector[1] = -height * 0.5;\n         Mat4.fromTranslation(output[0], vector);\n         vector[0] = width;\n         vector[1] = height * 0.5;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      case 'bottom left':\n         vector[0] = 0;\n         vector[1] = -height;\n         Mat4.fromTranslation(output[0], vector);\n         vector[1] = height;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      case 'bottom center':\n         vector[0] = -width * 0.5;\n         vector[1] = -height;\n         Mat4.fromTranslation(output[0], vector);\n         vector[0] = width * 0.5;\n         vector[1] = height;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      case 'bottom right':\n         vector[0] = -width;\n         vector[1] = -height;\n         Mat4.fromTranslation(output[0], vector);\n         vector[0] = width;\n         vector[1] = height;\n         Mat4.fromTranslation(output[1], vector);\n         break;\n\n      // No valid transform origin parameter; set identity.\n      default:\n         Mat4.identity(output[0]);\n         Mat4.identity(output[1]);\n         break;\n   }\n\n   return output;\n}\n\n/**\n * Provides the storage and sequencing of managed position validators. Each validator added may be a bespoke function or\n * a {@link ValidatorData} object containing an `id`, `validator`, and `weight` attributes; `validator` is\n * the only required attribute.\n *\n * The `id` attribute can be anything that creates a unique ID for the validator; recommended strings or numbers. This\n * allows validators to be removed by ID easily.\n *\n * The `weight` attribute is a number between 0 and 1 inclusive that allows validators to be added in a\n * predictable order which is especially handy if they are manipulated at runtime. A lower weighted validator always\n * runs before a higher weighted validator. If no weight is specified the default of '1' is assigned and it is appended\n * to the end of the validators list.\n *\n * This class forms the public API which is accessible from the `.validators` getter in the main TJSPosition instance.\n * ```\n * const position = new TJSPosition(<TJSPositionData>);\n * position.validators.add(...);\n * position.validators.clear();\n * position.validators.length;\n * position.validators.remove(...);\n * position.validators.removeBy(...);\n * position.validators.removeById(...);\n * ```\n */\nclass AdapterValidators\n{\n   /** @type {boolean} */\n   #enabled = true;\n\n   /**\n    * @type {import('../').ValidatorData[]}\n    */\n   #validatorData;\n\n   #mapUnsubscribe = new Map();\n\n   /**\n    * @returns {[AdapterValidators, import('../').ValidatorData[]]} Returns this and internal storage for validator\n    *          adapter.\n    */\n   constructor()\n   {\n      this.#validatorData = [];\n\n      Object.seal(this);\n\n      return [this, this.#validatorData];\n   }\n\n   /**\n    * @returns {boolean} Returns the enabled state.s\n    */\n   get enabled() { return this.#enabled; }\n\n   /**\n    * @returns {number} Returns the length of the validators array.\n    */\n   get length() { return this.#validatorData.length; }\n\n   /**\n    * @param {boolean}  enabled - Sets enabled state.\n    */\n   set enabled(enabled)\n   {\n      if (typeof enabled !== 'boolean') { throw new TypeError(`'enabled' is not a boolean.`); }\n\n      this.#enabled = enabled;\n   }\n\n   /**\n    * Provides an iterator for validators.\n    *\n    * @yields {import('../').ValidatorData}\n    */\n   *[Symbol.iterator]()\n   {\n      if (this.#validatorData.length === 0) { return; }\n\n      for (const entry of this.#validatorData)\n      {\n         yield { ...entry };\n      }\n   }\n\n   /**\n    * @param {...(import('../').ValidatorFn | import('../').ValidatorData)}   validators -\n    */\n   add(...validators)\n   {\n      /**\n       * Tracks the number of validators added that have subscriber functionality.\n       *\n       * @type {number}\n       */\n      // let subscribeCount = 0;  // TODO: Currently unused\n\n      for (const validator of validators)\n      {\n         const validatorType = typeof validator;\n\n         if ((validatorType !== 'function' && validatorType !== 'object') || validator === null)\n         {\n            throw new TypeError(`AdapterValidator error: 'validator' is not a function or object.`);\n         }\n\n         let data = void 0;\n         let subscribeFn = void 0;\n\n         switch (validatorType)\n         {\n            case 'function':\n               data = {\n                  id: void 0,\n                  validator,\n                  weight: 1\n               };\n\n               subscribeFn = validator.subscribe;\n               break;\n\n            case 'object':\n               if (typeof validator.validator !== 'function')\n               {\n                  throw new TypeError(`AdapterValidator error: 'validator' attribute is not a function.`);\n               }\n\n               if (validator.weight !== void 0 && typeof validator.weight !== 'number' ||\n                (validator.weight < 0 || validator.weight > 1))\n               {\n                  throw new TypeError(\n                   `AdapterValidator error: 'weight' attribute is not a number between '0 - 1' inclusive.`);\n               }\n\n               data = {\n                  id: validator.id !== void 0 ? validator.id : void 0,\n                  validator: validator.validator.bind(validator),\n                  weight: validator.weight || 1,\n                  instance: validator\n               };\n\n               subscribeFn = validator.validator.subscribe ?? validator.subscribe;\n               break;\n         }\n\n         // Find the index to insert where data.weight is less than existing values weight.\n         const index = this.#validatorData.findIndex((value) =>\n         {\n            return data.weight < value.weight;\n         });\n\n         // If an index was found insert at that location.\n         if (index >= 0)\n         {\n            this.#validatorData.splice(index, 0, data);\n         }\n         else // push to end of validators.\n         {\n            this.#validatorData.push(data);\n         }\n\n         if (typeof subscribeFn === 'function')\n         {\n            // TODO: consider how to handle validator updates.\n            const unsubscribe = subscribeFn();\n\n            // Ensure that unsubscribe is a function.\n            if (typeof unsubscribe !== 'function')\n            {\n               throw new TypeError(\n                'AdapterValidator error: Filter has subscribe function, but no unsubscribe function is returned.');\n            }\n\n            // Ensure that the same validator is not subscribed to multiple times.\n            if (this.#mapUnsubscribe.has(data.validator))\n            {\n               throw new Error(\n                'AdapterValidator error: Filter added already has an unsubscribe function registered.');\n            }\n\n            this.#mapUnsubscribe.set(data.validator, unsubscribe);\n            // subscribeCount++;  // TODO: Currently unused\n         }\n      }\n\n      // Filters with subscriber functionality are assumed to immediately invoke the `subscribe` callback. If the\n      // subscriber count is less than the amount of validators added then automatically trigger an index update\n      // manually.\n      // TODO: handle validator updates.\n      // if (subscribeCount < validators.length) { this.#indexUpdate(); }\n   }\n\n   clear()\n   {\n      this.#validatorData.length = 0;\n\n      // Unsubscribe from all validators with subscription support.\n      for (const unsubscribe of this.#mapUnsubscribe.values())\n      {\n         unsubscribe();\n      }\n\n      this.#mapUnsubscribe.clear();\n\n      // TODO: handle validator updates.\n      // this.#indexUpdate();\n   }\n\n   /**\n    * @param {...(import('../').ValidatorFn | import('../').ValidatorData)}   validators -\n    */\n   remove(...validators)\n   {\n      const length = this.#validatorData.length;\n\n      if (length === 0) { return; }\n\n      for (const data of validators)\n      {\n         // Handle the case that the validator may either be a function or a validator entry / object.\n         const actualValidator = typeof data === 'function' ? data : isObject(data) ? data.validator : void 0;\n\n         if (!actualValidator) { continue; }\n\n         for (let cntr = this.#validatorData.length; --cntr >= 0;)\n         {\n            if (this.#validatorData[cntr].validator === actualValidator)\n            {\n               this.#validatorData.splice(cntr, 1);\n\n               // Invoke any unsubscribe function for given validator then remove from tracking.\n               let unsubscribe = void 0;\n               if (typeof (unsubscribe = this.#mapUnsubscribe.get(actualValidator)) === 'function')\n               {\n                  unsubscribe();\n                  this.#mapUnsubscribe.delete(actualValidator);\n               }\n            }\n         }\n      }\n\n      // Update the index a validator was removed.\n      // TODO: handle validator updates.\n      // if (length !== this.#validatorData.length) { this.#indexUpdate(); }\n   }\n\n   /**\n    * Remove validators by the provided callback. The callback takes 3 parameters: `id`, `validator`, and `weight`.\n    * Any truthy value returned will remove that validator.\n    *\n    * @param {function(*, import('../').ValidatorFn, number): boolean} callback - Callback function to evaluate each\n    *        validator entry.\n    */\n   removeBy(callback)\n   {\n      const length = this.#validatorData.length;\n\n      if (length === 0) { return; }\n\n      if (typeof callback !== 'function')\n      {\n         throw new TypeError(`AdapterValidator error: 'callback' is not a function.`);\n      }\n\n      this.#validatorData = this.#validatorData.filter((data) =>\n      {\n         const remove = callback.call(callback, { ...data });\n\n         if (remove)\n         {\n            let unsubscribe;\n            if (typeof (unsubscribe = this.#mapUnsubscribe.get(data.validator)) === 'function')\n            {\n               unsubscribe();\n               this.#mapUnsubscribe.delete(data.validator);\n            }\n         }\n\n         // Reverse remove boolean to properly validator / remove this validator.\n         return !remove;\n      });\n\n      // TODO: handle validator updates.\n      // if (length !== this.#validatorData.length) { this.#indexUpdate(); }\n   }\n\n   removeById(...ids)\n   {\n      const length = this.#validatorData.length;\n\n      if (length === 0) { return; }\n\n      this.#validatorData = this.#validatorData.filter((data) =>\n      {\n         let remove = false;\n\n         for (const id of ids) { remove |= data.id === id; }\n\n         // If not keeping invoke any unsubscribe function for given validator then remove from tracking.\n         if (remove)\n         {\n            let unsubscribe;\n            if (typeof (unsubscribe = this.#mapUnsubscribe.get(data.validator)) === 'function')\n            {\n               unsubscribe();\n               this.#mapUnsubscribe.delete(data.validator);\n            }\n         }\n\n         return !remove; // Swap here to actually remove the item via array validator method.\n      });\n\n      // TODO: handle validator updates.\n      // if (length !== this.#validatorData.length) { this.#indexUpdate(); }\n   }\n}\n\nclass BasicBounds\n{\n   /**\n    * When true constrains the min / max width or height to element.\n    *\n    * @type {boolean}\n    */\n   #constrain;\n\n   /**\n    * @type {HTMLElement}\n    */\n   #element;\n\n   /**\n    * When true the validator is active.\n    *\n    * @type {boolean}\n    */\n   #enabled;\n\n   /**\n    * Provides a manual setting of the element height. As things go `offsetHeight` causes a browser layout and is not\n    * performance oriented. If manually set this height is used instead of `offsetHeight`.\n    *\n    * @type {number}\n    */\n   #height;\n\n   /**\n    * Set from an optional value in the constructor to lock accessors preventing modification.\n    */\n   #lock;\n\n   /**\n    * Provides a manual setting of the element width. As things go `offsetWidth` causes a browser layout and is not\n    * performance oriented. If manually set this width is used instead of `offsetWidth`.\n    *\n    * @type {number}\n    */\n   #width;\n\n   constructor({ constrain = true, element, enabled = true, lock = false, width, height } = {})\n   {\n      this.element = element;\n      this.constrain = constrain;\n      this.enabled = enabled;\n      this.width = width;\n      this.height = height;\n\n      this.#lock = typeof lock === 'boolean' ? lock : false;\n   }\n\n   get constrain() { return this.#constrain; }\n\n   get element() { return this.#element; }\n\n   get enabled() { return this.#enabled; }\n\n   get height() { return this.#height; }\n\n   get width() { return this.#width; }\n\n   set constrain(constrain)\n   {\n      if (this.#lock) { return; }\n\n      if (typeof constrain !== 'boolean') { throw new TypeError(`'constrain' is not a boolean.`); }\n\n      this.#constrain = constrain;\n   }\n\n   set element(element)\n   {\n      if (this.#lock) { return; }\n\n      if (element === void 0  || element === null || element instanceof HTMLElement)\n      {\n         this.#element = element;\n      }\n      else\n      {\n         throw new TypeError(`'element' is not a HTMLElement, undefined, or null.`);\n      }\n   }\n\n   set enabled(enabled)\n   {\n      if (this.#lock) { return; }\n\n      if (typeof enabled !== 'boolean') { throw new TypeError(`'enabled' is not a boolean.`); }\n\n      this.#enabled = enabled;\n   }\n\n   set height(height)\n   {\n      if (this.#lock) { return; }\n\n      if (height === void 0 || Number.isFinite(height))\n      {\n         this.#height = height;\n      }\n      else\n      {\n         throw new TypeError(`'height' is not a finite number or undefined.`);\n      }\n   }\n\n   set width(width)\n   {\n      if (this.#lock) { return; }\n\n      if (width === void 0 || Number.isFinite(width))\n      {\n         this.#width = width;\n      }\n      else\n      {\n         throw new TypeError(`'width' is not a finite number or undefined.`);\n      }\n   }\n\n   setDimension(width, height)\n   {\n      if (this.#lock) { return; }\n\n      if (width === void 0 || Number.isFinite(width))\n      {\n         this.#width = width;\n      }\n      else\n      {\n         throw new TypeError(`'width' is not a finite number or undefined.`);\n      }\n\n      if (height === void 0 || Number.isFinite(height))\n      {\n         this.#height = height;\n      }\n      else\n      {\n         throw new TypeError(`'height' is not a finite number or undefined.`);\n      }\n   }\n\n   /**\n    * Provides a validator that respects transforms in positional data constraining the position to within the target\n    * elements bounds.\n    *\n    * @param {import('../').ValidationData}   valData - The associated validation data for position updates.\n    *\n    * @returns {import('../').TJSPositionData} Potentially adjusted position data.\n    */\n   validator(valData)\n   {\n      // Early out if element is undefined or local enabled state is false.\n      if (!this.#enabled) { return valData.position; }\n\n      // Determine containing bounds from manual values; or any element; lastly the browser width / height.\n      const boundsWidth = this.#width ?? this.#element?.offsetWidth ?? globalThis.innerWidth;\n      const boundsHeight = this.#height ?? this.#element?.offsetHeight ?? globalThis.innerHeight;\n\n      if (typeof valData.position.width === 'number')\n      {\n         const maxW = valData.maxWidth ?? (this.#constrain ? boundsWidth : Number.MAX_SAFE_INTEGER);\n         valData.position.width = valData.width = clamp(valData.position.width, valData.minWidth, maxW);\n\n         if ((valData.width + valData.position.left + valData.marginLeft) > boundsWidth)\n         {\n            valData.position.left = boundsWidth - valData.width - valData.marginLeft;\n         }\n      }\n\n      if (typeof valData.position.height === 'number')\n      {\n         const maxH = valData.maxHeight ?? (this.#constrain ? boundsHeight : Number.MAX_SAFE_INTEGER);\n         valData.position.height = valData.height = clamp(valData.position.height, valData.minHeight, maxH);\n\n         if ((valData.height + valData.position.top + valData.marginTop) > boundsHeight)\n         {\n            valData.position.top = boundsHeight - valData.height - valData.marginTop;\n         }\n      }\n\n      const maxL = Math.max(boundsWidth - valData.width - valData.marginLeft, 0);\n      valData.position.left = Math.round(clamp(valData.position.left, 0, maxL));\n\n      const maxT = Math.max(boundsHeight - valData.height - valData.marginTop, 0);\n      valData.position.top = Math.round(clamp(valData.position.top, 0, maxT));\n\n      return valData.position;\n   }\n}\n\nconst s_TRANSFORM_DATA = new TJSTransformData();\n\nclass TransformBounds\n{\n   /**\n    * When true constrains the min / max width or height to element.\n    *\n    * @type {boolean}\n    */\n   #constrain;\n\n   /**\n    * @type {HTMLElement}\n    */\n   #element;\n\n   /**\n    * When true the validator is active.\n    *\n    * @type {boolean}\n    */\n   #enabled;\n\n   /**\n    * Provides a manual setting of the element height. As things go `offsetHeight` causes a browser layout and is not\n    * performance oriented. If manually set this height is used instead of `offsetHeight`.\n    *\n    * @type {number}\n    */\n   #height;\n\n   /**\n    * Set from an optional value in the constructor to lock accessors preventing modification.\n    */\n   #lock;\n\n   /**\n    * Provides a manual setting of the element width. As things go `offsetWidth` causes a browser layout and is not\n    * performance oriented. If manually set this width is used instead of `offsetWidth`.\n    *\n    * @type {number}\n    */\n   #width;\n\n   constructor({ constrain = true, element, enabled = true, lock = false, width, height } = {})\n   {\n      this.element = element;\n      this.constrain = constrain;\n      this.enabled = enabled;\n      this.width = width;\n      this.height = height;\n\n      this.#lock = typeof lock === 'boolean' ? lock : false;\n   }\n\n   get constrain() { return this.#constrain; }\n\n   get element() { return this.#element; }\n\n   get enabled() { return this.#enabled; }\n\n   get height() { return this.#height; }\n\n   get width() { return this.#width; }\n\n   set constrain(constrain)\n   {\n      if (this.#lock) { return; }\n\n      if (typeof constrain !== 'boolean') { throw new TypeError(`'constrain' is not a boolean.`); }\n\n      this.#constrain = constrain;\n   }\n\n   set element(element)\n   {\n      if (this.#lock) { return; }\n\n      if (element === void 0 || element === null || element instanceof HTMLElement)\n      {\n         this.#element = element;\n      }\n      else\n      {\n         throw new TypeError(`'element' is not a HTMLElement, undefined, or null.`);\n      }\n   }\n\n   set enabled(enabled)\n   {\n      if (this.#lock) { return; }\n\n      if (typeof enabled !== 'boolean') { throw new TypeError(`'enabled' is not a boolean.`); }\n\n      this.#enabled = enabled;\n   }\n\n   set height(height)\n   {\n      if (this.#lock) { return; }\n\n      if (height === void 0 || Number.isFinite(height))\n      {\n         this.#height = height;\n      }\n      else\n      {\n         throw new TypeError(`'height' is not a finite number or undefined.`);\n      }\n   }\n\n   set width(width)\n   {\n      if (this.#lock) { return; }\n\n      if (width === void 0 || Number.isFinite(width))\n      {\n         this.#width = width;\n      }\n      else\n      {\n         throw new TypeError(`'width' is not a finite number or undefined.`);\n      }\n   }\n\n   setDimension(width, height)\n   {\n      if (this.#lock) { return; }\n\n      if (width === void 0 || Number.isFinite(width))\n      {\n         this.#width = width;\n      }\n      else\n      {\n         throw new TypeError(`'width' is not a finite number or undefined.`);\n      }\n\n      if (height === void 0 || Number.isFinite(height))\n      {\n         this.#height = height;\n      }\n      else\n      {\n         throw new TypeError(`'height' is not a finite number or undefined.`);\n      }\n   }\n\n   /**\n    * Provides a validator that respects transforms in positional data constraining the position to within the target\n    * elements bounds.\n    *\n    * @param {import('../').ValidationData}   valData - The associated validation data for position updates.\n    *\n    * @returns {import('../').TJSPositionData} Potentially adjusted position data.\n    */\n   validator(valData)\n   {\n      // Early out if element is undefined or local enabled state is false.\n      if (!this.#enabled) { return valData.position; }\n\n      // Determine containing bounds from manual values; or any element; lastly the browser width / height.\n      const boundsWidth = this.#width ?? this.#element?.offsetWidth ?? globalThis.innerWidth;\n      const boundsHeight = this.#height ?? this.#element?.offsetHeight ?? globalThis.innerHeight;\n\n      // Ensure min / max width constraints when position width is a number; not 'auto' or 'inherit'. If constrain is\n      // true cap width bounds.\n      if (typeof valData.position.width === 'number')\n      {\n         const maxW = valData.maxWidth ?? (this.#constrain ? boundsWidth : Number.MAX_SAFE_INTEGER);\n         valData.position.width = clamp(valData.width, valData.minWidth, maxW);\n      }\n\n      // Ensure min / max height constraints when position height is a number; not 'auto' or 'inherit'. If constrain\n      // is true cap height bounds.\n      if (typeof valData.position.height === 'number')\n      {\n         const maxH = valData.maxHeight ?? (this.#constrain ? boundsHeight : Number.MAX_SAFE_INTEGER);\n         valData.position.height = clamp(valData.height, valData.minHeight, maxH);\n      }\n\n      // Get transform data. First set constraints including any margin top / left as offsets and width / height. Used\n      // when position width / height is 'auto'.\n      const data = valData.transforms.getData(valData.position, s_TRANSFORM_DATA, valData);\n\n      // Check the bounding rectangle against browser height / width. Adjust position based on how far the overlap of\n      // the bounding rect is outside the bounds height / width. The order below matters as the constraints are top /\n      // left oriented, so perform those checks last.\n\n      const initialX = data.boundingRect.x;\n      const initialY = data.boundingRect.y;\n\n      if (data.boundingRect.bottom + valData.marginTop > boundsHeight)\n      {\n         data.boundingRect.y += boundsHeight - data.boundingRect.bottom - valData.marginTop;\n      }\n\n      if (data.boundingRect.right + valData.marginLeft > boundsWidth)\n      {\n         data.boundingRect.x += boundsWidth - data.boundingRect.right - valData.marginLeft;\n      }\n\n      if (data.boundingRect.top - valData.marginTop < 0)\n      {\n         data.boundingRect.y += Math.abs(data.boundingRect.top - valData.marginTop);\n      }\n\n      if (data.boundingRect.left - valData.marginLeft < 0)\n      {\n         data.boundingRect.x += Math.abs(data.boundingRect.left - valData.marginLeft);\n      }\n\n      valData.position.left -= initialX - data.boundingRect.x;\n      valData.position.top -= initialY - data.boundingRect.y;\n\n      return valData.position;\n   }\n}\n\nclass UpdateElementData\n{\n   constructor()\n   {\n      /**\n       * Stores the private data from TJSPosition.\n       *\n       * @type {TJSPositionData}\n       */\n      this.data = void 0;\n\n      /**\n       * Provides a copy of local data sent to subscribers.\n       *\n       * @type {TJSPositionData}\n       */\n      this.dataSubscribers = new TJSPositionData();\n\n      /**\n       * Stores the current dimension data used for the readable `dimension` store.\n       *\n       * @type {{width: number | 'auto', height: number | 'auto'}}\n       */\n      this.dimensionData = { width: 0, height: 0 };\n\n      /**\n       * @type {import('../PositionChangeSet').PositionChangeSet}\n       */\n      this.changeSet = void 0;\n\n      /**\n       * @type {import('../').TJSPositionOptions}\n       */\n      this.options = void 0;\n\n      /**\n       * Stores if this TJSPosition / update data is queued for update.\n       *\n       * @type {boolean}\n       */\n      this.queued = false;\n\n      /**\n       * @type {import('../StyleCache').StyleCache}\n       */\n      this.styleCache = void 0;\n\n      /**\n       * @type {import('../transform').TJSTransforms}\n       */\n      this.transforms = void 0;\n\n      /**\n       * Stores the current transform data used for the readable `transform` store. It is only active when there are\n       * subscribers to the store or calculateTransform options is true.\n       *\n       * @type {TJSTransformData}\n       */\n      this.transformData = new TJSTransformData();\n\n      /**\n       * @type {(function(TJSPositionData): void)[]}\n       */\n      this.subscriptions = void 0;\n\n      /**\n       * @type {import('svelte/store').Writable<{width: (number|\"auto\"), height: (number|\"auto\")}>}\n       */\n      this.storeDimension = writable(this.dimensionData);\n\n      // When there are subscribers set option to calculate transform updates; set to false when no subscribers.\n\n      /**\n       * @type {import('svelte/store').Writable<TJSTransformData>}\n       */\n      this.storeTransform = writable(this.transformData, () =>\n      {\n         this.options.transformSubscribed = true;\n         return () => this.options.transformSubscribed = false;\n      });\n\n      /**\n       * Stores the queued state for update element processing.\n       *\n       * @type {boolean}\n       */\n      this.queued = false;\n\n      // Seal data backing readable stores.\n      Object.seal(this.dimensionData);\n   }\n}\n\n/**\n * Decouples updates to any parent target HTMLElement inline styles. Invoke\n * {@link TJSPosition.elementUpdated} to await on the returned promise that is resolved with the current\n * render time via `nextAnimationFrame` / `requestAnimationFrame`. This allows the underlying data model to be updated\n * immediately while updates to the element are in sync with the browser and potentially in the future be further\n * throttled.\n *\n * @param {HTMLElement} el - The target HTMLElement.\n */\nclass UpdateElementManager\n{\n   static list = [];\n   static listCntr = 0;\n\n   static updatePromise;\n\n   static get promise() { return this.updatePromise; }\n\n   /**\n    * Potentially adds the given element and internal updateData instance to the list.\n    *\n    * @param {HTMLElement}       el - An HTMLElement instance.\n    *\n    * @param {import('./UpdateElementData').UpdateElementData} updateData - An UpdateElementData instance.\n    *\n    * @returns {Promise<number>} The unified next frame update promise. Returns `currentTime`.\n    */\n   static add(el, updateData)\n   {\n      if (this.listCntr < this.list.length)\n      {\n         const entry = this.list[this.listCntr];\n         entry[0] = el;\n         entry[1] = updateData;\n      }\n      else\n      {\n         this.list.push([el, updateData]);\n      }\n\n      this.listCntr++;\n      updateData.queued = true;\n\n      if (!this.updatePromise) { this.updatePromise = this.wait(); }\n\n      return this.updatePromise;\n   }\n\n   /**\n    * Await on `nextAnimationFrame` and iterate over list map invoking callback functions.\n    *\n    * @returns {Promise<number>} The next frame Promise / currentTime from nextAnimationFrame.\n    */\n   static async wait()\n   {\n      // Await the next animation frame. In the future this can be extended to multiple frames to divide update rate.\n      const currentTime = await nextAnimationFrame();\n\n      this.updatePromise = void 0;\n\n      for (let cntr = this.listCntr; --cntr >= 0;)\n      {\n         // Obtain data for entry.\n         const entry = this.list[cntr];\n         const el = entry[0];\n         const updateData = entry[1];\n\n         // Clear entry data.\n         entry[0] = void 0;\n         entry[1] = void 0;\n\n         // Reset queued state.\n         updateData.queued = false;\n\n         // Early out if the element is no longer connected to the DOM / shadow root.\n         // if (!el.isConnected || !updateData.changeSet.hasChange()) { continue; }\n         if (!el.isConnected) { continue; }\n\n         if (updateData.options.ortho)\n         {\n            s_UPDATE_ELEMENT_ORTHO(el, updateData);\n         }\n         else\n         {\n            s_UPDATE_ELEMENT(el, updateData);\n         }\n\n         // If calculate transform options is enabled then update the transform data and set the readable store.\n         if (updateData.options.calculateTransform || updateData.options.transformSubscribed)\n         {\n            s_UPDATE_TRANSFORM(el, updateData);\n         }\n\n         // Update all subscribers with changed data.\n         this.updateSubscribers(updateData);\n      }\n\n      this.listCntr = 0;\n\n      return currentTime;\n   }\n\n   /**\n    * Potentially immediately updates the given element.\n    *\n    * @param {HTMLElement}       el - An HTMLElement instance.\n    *\n    * @param {import('./UpdateElementData').UpdateElementData} updateData - An UpdateElementData instance.\n    */\n   static immediate(el, updateData)\n   {\n      // Early out if the element is no longer connected to the DOM / shadow root.\n      // if (!el.isConnected || !updateData.changeSet.hasChange()) { continue; }\n      if (!el.isConnected) { return; }\n\n      if (updateData.options.ortho)\n      {\n         s_UPDATE_ELEMENT_ORTHO(el, updateData);\n      }\n      else\n      {\n         s_UPDATE_ELEMENT(el, updateData);\n      }\n\n      // If calculate transform options is enabled then update the transform data and set the readable store.\n      if (updateData.options.calculateTransform || updateData.options.transformSubscribed)\n      {\n         s_UPDATE_TRANSFORM(el, updateData);\n      }\n\n      // Update all subscribers with changed data.\n      this.updateSubscribers(updateData);\n   }\n\n   /**\n    * @param {import('./UpdateElementData').UpdateElementData} updateData - Data change set.\n    */\n   static updateSubscribers(updateData)\n   {\n      const data = updateData.data;\n      const changeSet = updateData.changeSet;\n\n      if (!changeSet.hasChange()) { return; }\n\n      // Make a copy of the data.\n      const output = updateData.dataSubscribers.copy(data);\n\n      const subscriptions = updateData.subscriptions;\n\n      // Early out if there are no subscribers.\n      if (subscriptions.length > 0)\n      {\n         for (let cntr = 0; cntr < subscriptions.length; cntr++) { subscriptions[cntr](output); }\n      }\n\n      // Update dimension data if width / height has changed.\n      if (changeSet.width || changeSet.height)\n      {\n         updateData.dimensionData.width = data.width;\n         updateData.dimensionData.height = data.height;\n         updateData.storeDimension.set(updateData.dimensionData);\n      }\n\n      changeSet.set(false);\n   }\n}\n\n/**\n * Decouples updates to any parent target HTMLElement inline styles. Invoke\n * {@link TJSPosition.elementUpdated} to await on the returned promise that is resolved with the current\n * render time via `nextAnimationFrame` / `requestAnimationFrame`. This allows the underlying data model to be updated\n * immediately while updates to the element are in sync with the browser and potentially in the future be further\n * throttled.\n *\n * @param {HTMLElement} el - The target HTMLElement.\n *\n * @param {import('./UpdateElementData').UpdateElementData} updateData - Update data.\n */\nfunction s_UPDATE_ELEMENT(el, updateData)\n{\n   const changeSet = updateData.changeSet;\n   const data = updateData.data;\n\n   if (changeSet.left)\n   {\n      el.style.left = `${data.left}px`;\n   }\n\n   if (changeSet.top)\n   {\n      el.style.top = `${data.top}px`;\n   }\n\n   if (changeSet.zIndex)\n   {\n      el.style.zIndex = typeof data.zIndex === 'number' ? `${data.zIndex}` : null;\n   }\n\n   if (changeSet.width)\n   {\n      el.style.width = typeof data.width === 'number' ? `${data.width}px` : data.width;\n   }\n\n   if (changeSet.height)\n   {\n      el.style.height = typeof data.height === 'number' ? `${data.height}px` : data.height;\n   }\n\n   if (changeSet.transformOrigin)\n   {\n      el.style.transformOrigin = data.transformOrigin;\n   }\n\n   // Update all transforms in order added to transforms object.\n   if (changeSet.transform)\n   {\n      el.style.transform = updateData.transforms.isActive ? updateData.transforms.getCSS() : null;\n   }\n}\n\n/**\n * Decouples updates to any parent target HTMLElement inline styles. Invoke\n * {@link TJSPosition.elementUpdated} to await on the returned promise that is resolved with the current\n * render time via `nextAnimationFrame` / `requestAnimationFrame`. This allows the underlying data model to be updated\n * immediately while updates to the element are in sync with the browser and potentially in the future be further\n * throttled.\n *\n * @param {HTMLElement} el - The target HTMLElement.\n *\n * @param {import('./UpdateElementData').UpdateElementData} updateData - Update data.\n */\nfunction s_UPDATE_ELEMENT_ORTHO(el, updateData)\n{\n   const changeSet = updateData.changeSet;\n   const data = updateData.data;\n\n   if (changeSet.zIndex)\n   {\n      el.style.zIndex = typeof data.zIndex === 'number' ? `${data.zIndex}` : null;\n   }\n\n   if (changeSet.width)\n   {\n      el.style.width = typeof data.width === 'number' ? `${data.width}px` : data.width;\n   }\n\n   if (changeSet.height)\n   {\n      el.style.height = typeof data.height === 'number' ? `${data.height}px` : data.height;\n   }\n\n   if (changeSet.transformOrigin)\n   {\n      el.style.transformOrigin = data.transformOrigin;\n   }\n\n   // Update all transforms in order added to transforms object.\n   if (changeSet.left || changeSet.top || changeSet.transform)\n   {\n      el.style.transform = updateData.transforms.getCSSOrtho(data);\n   }\n}\n\n/**\n * Updates the applied transform data and sets the readble `transform` store.\n *\n * @param {HTMLElement} el - The target HTMLElement.\n *\n * @param {import('./UpdateElementData').UpdateElementData} updateData - Update element data.\n */\nfunction s_UPDATE_TRANSFORM(el, updateData)\n{\n   s_VALIDATION_DATA$1.height = updateData.data.height !== 'auto' ? updateData.data.height :\n    updateData.styleCache.offsetHeight;\n\n   s_VALIDATION_DATA$1.width = updateData.data.width !== 'auto' ? updateData.data.width :\n    updateData.styleCache.offsetWidth;\n\n   s_VALIDATION_DATA$1.marginLeft = updateData.styleCache.marginLeft;\n\n   s_VALIDATION_DATA$1.marginTop = updateData.styleCache.marginTop;\n\n   // Get transform data. First set constraints including any margin top / left as offsets and width / height. Used\n   // when position width / height is 'auto'.\n   updateData.transforms.getData(updateData.data, updateData.transformData, s_VALIDATION_DATA$1);\n\n   updateData.storeTransform.set(updateData.transformData);\n}\n\nconst s_VALIDATION_DATA$1 = {\n   height: void 0,\n   width: void 0,\n   marginLeft: void 0,\n   marginTop: void 0\n};\n\n/**\n * Provides a store for position following the subscriber protocol in addition to providing individual writable derived\n * stores for each independent variable.\n */\nclass TJSPosition\n{\n   /**\n    * @type {{browserCentered: Centered, Centered: Centered}}\n    */\n   static #positionInitial = {\n      browserCentered: new Centered({ lock: true }),\n      Centered\n   };\n\n   /**\n    * @type {{TransformBounds: TransformBounds, BasicBounds: BasicBounds, basicWindow: BasicBounds, transformWindow: TransformBounds}}\n    */\n   static #positionValidators = {\n      basicWindow: new BasicBounds({ lock: true }),\n      BasicBounds,\n      transformWindow: new TransformBounds({ lock: true }),\n      TransformBounds\n   };\n\n   /**\n    * @type {TJSPositionData}\n    */\n   #data = new TJSPositionData();\n\n   /**\n    * Provides the animation API.\n    *\n    * @type {AnimationAPI}\n    */\n   #animate = new AnimationAPI(this, this.#data);\n\n   /**\n    * Provides a way to turn on / off the position handling.\n    *\n    * @type {boolean}\n    */\n   #enabled = true;\n\n   /**\n    * Stores ongoing options that are set in the constructor or by transform store subscription.\n    *\n    * @type {import('./').TJSPositionOptions}\n    */\n   #options = {\n      calculateTransform: false,\n      initialHelper: void 0,\n      ortho: true,\n      transformSubscribed: false\n   };\n\n   /**\n    * The associated parent for positional data tracking. Used in validators.\n    *\n    * @type {import('./').TJSPositionParent}\n    */\n   #parent;\n\n   /**\n    * Stores the style attributes that changed on update.\n    *\n    * @type {PositionChangeSet}\n    */\n   #positionChangeSet = new PositionChangeSet();\n\n   /**\n    * @type {import('./').TJSPositionStores}\n    */\n   #stores;\n\n   /**\n    * Stores an instance of the computer styles for the target element.\n    *\n    * @type {StyleCache}\n    */\n   #styleCache;\n\n   /**\n    * Stores the subscribers.\n    *\n    * @type {import('svelte/store').Subscriber<TJSPositionData>[]}\n    */\n   #subscriptions = [];\n\n   /**\n    * @type {TJSTransforms}\n    */\n   #transforms = new TJSTransforms();\n\n   /**\n    * @type {UpdateElementData}\n    */\n   #updateElementData;\n\n   /**\n    * Stores the UpdateElementManager wait promise.\n    *\n    * @type {Promise}\n    */\n   #updateElementPromise;\n\n   /**\n    * @type {AdapterValidators}\n    */\n   #validators;\n\n   /**\n    * @type {import('./').ValidatorData[]}\n    */\n   #validatorData;\n\n   /**\n    * @type {PositionStateAPI}\n    */\n   #state = new PositionStateAPI(this, this.#data, this.#transforms);\n\n   /**\n    * @returns {AnimationGroupAPI} Public Animation API.\n    */\n   static get Animate() { return AnimationGroupAPI; }\n\n   /**\n    * @returns {{browserCentered: Centered, Centered: Centered}} TJSPosition initial API.\n    */\n   static get Initial() { return this.#positionInitial; }\n\n   /**\n    * Returns TJSTransformData class / constructor.\n    *\n    * @returns {TJSTransformData} TJSTransformData class / constructor.\n    */\n   static get TransformData() { return TJSTransformData; }\n\n   /**\n    * Returns default validators.\n    *\n    * Note: `basicWindow` and `BasicBounds` will eventually be removed.\n    *\n    * @returns {{TransformBounds: TransformBounds, BasicBounds: BasicBounds, basicWindow: BasicBounds, transformWindow: TransformBounds}}\n    * Available validators.\n    */\n   static get Validators() { return this.#positionValidators; }\n\n   /**\n    * Returns a duplicate of a given position instance copying any options and validators.\n    *\n    * // TODO: Consider more safety over options processing.\n    *\n    * @param {TJSPosition}          position - A position instance.\n    *\n    * @param {import('./').TJSPositionOptions}   options - TJSPosition options.\n    *\n    * @returns {TJSPosition} A duplicate position instance.\n    */\n   static duplicate(position, options)\n   {\n      if (!(position instanceof TJSPosition)) { throw new TypeError(`'position' is not an instance of Position.`); }\n\n      const newPosition = new TJSPosition(options);\n\n      newPosition.#options = Object.assign({}, position.#options, options);\n      newPosition.#validators.add(...position.#validators);\n\n      newPosition.set(position.#data);\n\n      return newPosition;\n   }\n\n   /**\n    * @param {import('./').TJSPositionParent | import('./').TJSPositionOptionsAll}   [parent] - A\n    *        potential parent element or object w/ `elementTarget` getter. May also be the TJSPositionOptions object\n    *        w/ 1 argument.\n    *\n    * @param {import('./').TJSPositionOptionsAll}   [options] - Default values.\n    */\n   constructor(parent, options)\n   {\n      // Test if `parent` is a plain object; if so treat as options object.\n      if (isPlainObject(parent))\n      {\n         options = parent;\n      }\n      else\n      {\n         this.#parent = parent;\n      }\n\n      const data = this.#data;\n      const transforms = this.#transforms;\n\n      this.#styleCache = new StyleCache();\n\n      const updateData = new UpdateElementData();\n\n      updateData.changeSet = this.#positionChangeSet;\n      updateData.data = this.#data;\n      updateData.options = this.#options;\n      updateData.styleCache = this.#styleCache;\n      updateData.subscriptions = this.#subscriptions;\n      updateData.transforms = this.#transforms;\n\n      this.#updateElementData = updateData;\n\n      if (isObject(options))\n      {\n         // Set TJSPosition options\n         if (typeof options.calculateTransform === 'boolean')\n         {\n            this.#options.calculateTransform = options.calculateTransform;\n         }\n\n         if (typeof options.ortho === 'boolean')\n         {\n            this.#options.ortho = options.ortho;\n         }\n\n         // Set default values from options.\n\n         if (Number.isFinite(options.height) || options.height === 'auto' || options.height === 'inherit' ||\n          options.height === null)\n         {\n            data.height = updateData.dimensionData.height = typeof options.height === 'number' ?\n             Math.round(options.height) : options.height;\n         }\n\n         if (Number.isFinite(options.left) || options.left === null)\n         {\n            data.left = typeof options.left === 'number' ? Math.round(options.left) : options.left;\n         }\n\n         if (Number.isFinite(options.maxHeight) || options.maxHeight === null)\n         {\n            data.maxHeight = typeof options.maxHeight === 'number' ? Math.round(options.maxHeight) : options.maxHeight;\n         }\n\n         if (Number.isFinite(options.maxWidth) || options.maxWidth === null)\n         {\n            data.maxWidth = typeof options.maxWidth === 'number' ? Math.round(options.maxWidth) : options.maxWidth;\n         }\n\n         if (Number.isFinite(options.minHeight) || options.minHeight === null)\n         {\n            data.minHeight = typeof options.minHeight === 'number' ? Math.round(options.minHeight) : options.minHeight;\n         }\n\n         if (Number.isFinite(options.minWidth) || options.minWidth === null)\n         {\n            data.minWidth = typeof options.minWidth === 'number' ? Math.round(options.minWidth) : options.minWidth;\n         }\n\n         if (Number.isFinite(options.rotateX) || options.rotateX === null)\n         {\n            transforms.rotateX = data.rotateX = options.rotateX;\n         }\n\n         if (Number.isFinite(options.rotateY) || options.rotateY === null)\n         {\n            transforms.rotateY = data.rotateY = options.rotateY;\n         }\n\n         if (Number.isFinite(options.rotateZ) || options.rotateZ === null)\n         {\n            transforms.rotateZ = data.rotateZ = options.rotateZ;\n         }\n\n         if (Number.isFinite(options.scale) || options.scale === null)\n         {\n            transforms.scale = data.scale = options.scale;\n         }\n\n         if (Number.isFinite(options.top) || options.top === null)\n         {\n            data.top = typeof options.top === 'number' ? Math.round(options.top) : options.top;\n         }\n\n         if (typeof options.transformOrigin === 'string' || options.transformOrigin === null)\n         {\n            data.transformOrigin = transformOrigins.includes(options.transformOrigin) ?\n             options.transformOrigin : null;\n         }\n\n         if (Number.isFinite(options.translateX) || options.translateX === null)\n         {\n            transforms.translateX = data.translateX = options.translateX;\n         }\n\n         if (Number.isFinite(options.translateY) || options.translateY === null)\n         {\n            transforms.translateY = data.translateY = options.translateY;\n         }\n\n         if (Number.isFinite(options.translateZ) || options.translateZ === null)\n         {\n            transforms.translateZ = data.translateZ = options.translateZ;\n         }\n\n         if (Number.isFinite(options.width) || options.width === 'auto' || options.width === 'inherit' ||\n          options.width === null)\n         {\n            data.width = updateData.dimensionData.width = typeof options.width === 'number' ?\n             Math.round(options.width) : options.width;\n         }\n\n         if (Number.isFinite(options.zIndex) || options.zIndex === null)\n         {\n            data.zIndex = typeof options.zIndex === 'number' ? Math.round(options.zIndex) : options.zIndex;\n         }\n      }\n\n      this.#stores = {\n         // The main properties for manipulating TJSPosition.\n         height: propertyStore(this, 'height'),\n         left: propertyStore(this, 'left'),\n         rotateX: propertyStore(this, 'rotateX'),\n         rotateY: propertyStore(this, 'rotateY'),\n         rotateZ: propertyStore(this, 'rotateZ'),\n         scale: propertyStore(this, 'scale'),\n         top: propertyStore(this, 'top'),\n         transformOrigin: propertyStore(this, 'transformOrigin'),\n         translateX: propertyStore(this, 'translateX'),\n         translateY: propertyStore(this, 'translateY'),\n         translateZ: propertyStore(this, 'translateZ'),\n         width: propertyStore(this, 'width'),\n         zIndex: propertyStore(this, 'zIndex'),\n\n         // Stores that control validation when width / height is not `auto`.\n         maxHeight: propertyStore(this, 'maxHeight'),\n         maxWidth: propertyStore(this, 'maxWidth'),\n         minHeight: propertyStore(this, 'minHeight'),\n         minWidth: propertyStore(this, 'minWidth'),\n\n         // Readable stores based on updates or from resize observer changes.\n         dimension: { subscribe: updateData.storeDimension.subscribe },\n         element: { subscribe: this.#styleCache.stores.element.subscribe },\n         resizeContentHeight: { subscribe: this.#styleCache.stores.resizeContentHeight.subscribe },\n         resizeContentWidth: { subscribe: this.#styleCache.stores.resizeContentWidth.subscribe },\n         resizeOffsetHeight: { subscribe: this.#styleCache.stores.resizeOffsetHeight.subscribe },\n         resizeOffsetWidth: { subscribe: this.#styleCache.stores.resizeOffsetWidth.subscribe },\n         transform: { subscribe: updateData.storeTransform.subscribe },\n\n         // Protected store that should only be set by resizeObserver action.\n         resizeObserved: this.#styleCache.stores.resizeObserved,\n      };\n\n      // When resize change from any applied resizeObserver action automatically set data for new validation run.\n      // A resizeObserver prop should be set to true for ApplicationShell components or usage of resizeObserver action\n      // to monitor for changes. This should only be used on elements that have 'auto' for width or height.\n      subscribeIgnoreFirst(this.#stores.resizeObserved, (resizeData) =>\n      {\n         const parent = this.#parent;\n         const el = parent instanceof HTMLElement ? parent : parent?.elementTarget;\n\n         // Only invoke set if there is a target element and the resize data has a valid offset width & height.\n         if (el instanceof HTMLElement && Number.isFinite(resizeData?.offsetWidth) &&\n          Number.isFinite(resizeData?.offsetHeight))\n         {\n            this.set(data);\n         }\n      });\n\n      this.#stores.transformOrigin.values = transformOrigins;\n\n      [this.#validators, this.#validatorData] = new AdapterValidators();\n\n      if (options?.initial || options?.positionInitial)\n      {\n         const initialHelper = options.initial ?? options.positionInitial;\n\n         if (typeof initialHelper?.getLeft !== 'function' || typeof initialHelper?.getTop !== 'function')\n         {\n            throw new Error(\n             `'options.initial' position helper does not contain 'getLeft' and / or 'getTop' functions.`);\n         }\n\n         this.#options.initialHelper = options.initial;\n      }\n\n      if (options?.validator)\n      {\n         if (isIterable(options?.validator)) { this.validators.add(...options.validator); }\n         else { this.validators.add(options.validator); }\n      }\n   }\n\n   /**\n    * Returns the animation API.\n    *\n    * @returns {AnimationAPI} Animation API.\n    */\n   get animate()\n   {\n      return this.#animate;\n   }\n\n   /**\n    * Returns the dimension data for the readable store.\n    *\n    * @returns {{width: number | 'auto', height: number | 'auto'}} Dimension data.\n    */\n   get dimension()\n   {\n      return this.#updateElementData.dimensionData;\n   }\n\n   /**\n    * Returns the enabled state.\n    *\n    * @returns {boolean} Enabled state.\n    */\n   get enabled()\n   {\n      return this.#enabled;\n   }\n\n   /**\n    * Returns the current HTMLElement being positioned.\n    *\n    * @returns {HTMLElement|undefined} Current HTMLElement being positioned.\n    */\n   get element()\n   {\n      return this.#styleCache.el;\n   }\n\n   /**\n    * Returns a promise that is resolved on the next element update with the time of the update.\n    *\n    * @returns {Promise<number>} Promise resolved on element update.\n    */\n   get elementUpdated()\n   {\n      return this.#updateElementPromise;\n   }\n\n   /**\n    * Returns the associated {@link TJSPositionParent} instance.\n    *\n    * @returns {import('./').TJSPositionParent} The TJSPositionParent instance.\n    */\n   get parent() { return this.#parent; }\n\n   /**\n    * Returns the state API.\n    *\n    * @returns {import('./PositionStateAPI').PositionStateAPI} TJSPosition state API.\n    */\n   get state() { return this.#state; }\n\n   /**\n    * Returns the derived writable stores for individual data variables.\n    *\n    * @returns {import('./').TJSPositionStores} Derived / writable stores.\n    */\n   get stores() { return this.#stores; }\n\n   /**\n    * Returns the transform data for the readable store.\n    *\n    * @returns {TJSTransformData} Transform Data.\n    */\n   get transform()\n   {\n      return this.#updateElementData.transformData;\n   }\n\n   /**\n    * Returns the validators.\n    *\n    * @returns {AdapterValidators} validators.\n    */\n   get validators() { return this.#validators; }\n\n   /**\n    * Sets the enabled state.\n    *\n    * @param {boolean}  enabled - New enabled state.\n    */\n   set enabled(enabled)\n   {\n      if (typeof enabled !== 'boolean')\n      {\n         throw new TypeError(`'enabled' is not a boolean.`);\n      }\n\n      this.#enabled = enabled;\n   }\n\n   /**\n    * Sets the associated {@link TJSPositionParent} instance. Resets the style cache and default data.\n    *\n    * @param {import('./').TJSPositionParent} parent - A TJSPositionParent instance.\n    */\n   set parent(parent)\n   {\n      if (parent !== void 0 && !(parent instanceof HTMLElement) && !isObject(parent))\n      {\n         throw new TypeError(`'parent' is not an HTMLElement, object, or undefined.`);\n      }\n\n      this.#parent = parent;\n\n      // Reset any stored default data & the style cache.\n      this.#state.remove({ name: '#defaultData' });\n      this.#styleCache.reset();\n\n      // If a parent is defined then invoke set to update any parent element.\n      if (parent) { this.set(this.#data); }\n   }\n\n// Data accessors ----------------------------------------------------------------------------------------------------\n\n   /**\n    * @returns {number|'auto'|'inherit'|null} height\n    */\n   get height() { return this.#data.height; }\n\n   /**\n    * @returns {number|null} left\n    */\n   get left() { return this.#data.left; }\n\n   /**\n    * @returns {number|null} maxHeight\n    */\n   get maxHeight() { return this.#data.maxHeight; }\n\n   /**\n    * @returns {number|null} maxWidth\n    */\n   get maxWidth() { return this.#data.maxWidth; }\n\n   /**\n    * @returns {number|null} minHeight\n    */\n   get minHeight() { return this.#data.minHeight; }\n\n   /**\n    * @returns {number|null} minWidth\n    */\n   get minWidth() { return this.#data.minWidth; }\n\n   /**\n    * @returns {number|null} rotateX\n    */\n   get rotateX() { return this.#data.rotateX; }\n\n   /**\n    * @returns {number|null} rotateY\n    */\n   get rotateY() { return this.#data.rotateY; }\n\n   /**\n    * @returns {number|null} rotateZ\n    */\n   get rotateZ() { return this.#data.rotateZ; }\n\n   /**\n    * @returns {number|null} alias for rotateZ\n    */\n   get rotation() { return this.#data.rotateZ; }\n\n   /**\n    * @returns {number|null} scale\n    */\n   get scale() { return this.#data.scale; }\n\n   /**\n    * @returns {number|null} top\n    */\n   get top() { return this.#data.top; }\n\n   /**\n    * @returns {import('./').TJSTransformOrigin} transformOrigin\n    */\n   get transformOrigin() { return this.#data.transformOrigin; }\n\n   /**\n    * @returns {number|null} translateX\n    */\n   get translateX() { return this.#data.translateX; }\n\n   /**\n    * @returns {number|null} translateY\n    */\n   get translateY() { return this.#data.translateY; }\n\n   /**\n    * @returns {number|null} translateZ\n    */\n   get translateZ() { return this.#data.translateZ; }\n\n   /**\n    * @returns {number|'auto'|'inherit'|null} width\n    */\n   get width() { return this.#data.width; }\n\n   /**\n    * @returns {number|null} z-index\n    */\n   get zIndex() { return this.#data.zIndex; }\n\n   /**\n    * @param {number|string|null} height -\n    */\n   set height(height)\n   {\n      this.#stores.height.set(height);\n   }\n\n   /**\n    * @param {number|string|null} left -\n    */\n   set left(left)\n   {\n      this.#stores.left.set(left);\n   }\n\n   /**\n    * @param {number|string|null} maxHeight -\n    */\n   set maxHeight(maxHeight)\n   {\n      this.#stores.maxHeight.set(maxHeight);\n   }\n\n   /**\n    * @param {number|string|null} maxWidth -\n    */\n   set maxWidth(maxWidth)\n   {\n      this.#stores.maxWidth.set(maxWidth);\n   }\n\n   /**\n    * @param {number|string|null} minHeight -\n    */\n   set minHeight(minHeight)\n   {\n      this.#stores.minHeight.set(minHeight);\n   }\n\n   /**\n    * @param {number|string|null} minWidth -\n    */\n   set minWidth(minWidth)\n   {\n      this.#stores.minWidth.set(minWidth);\n   }\n\n   /**\n    * @param {number|string|null} rotateX -\n    */\n   set rotateX(rotateX)\n   {\n      this.#stores.rotateX.set(rotateX);\n   }\n\n   /**\n    * @param {number|string|null} rotateY -\n    */\n   set rotateY(rotateY)\n   {\n      this.#stores.rotateY.set(rotateY);\n   }\n\n   /**\n    * @param {number|string|null} rotateZ -\n    */\n   set rotateZ(rotateZ)\n   {\n      this.#stores.rotateZ.set(rotateZ);\n   }\n\n   /**\n    * @param {number|string|null} rotateZ - alias for rotateZ\n    */\n   set rotation(rotateZ)\n   {\n      this.#stores.rotateZ.set(rotateZ);\n   }\n\n   /**\n    * @param {number|string|null} scale -\n    */\n   set scale(scale)\n   {\n      this.#stores.scale.set(scale);\n   }\n\n   /**\n    * @param {number|string|null} top -\n    */\n   set top(top)\n   {\n      this.#stores.top.set(top);\n   }\n\n   /**\n    * @param {import('./').TJSTransformOrigin} transformOrigin -\n    */\n   set transformOrigin(transformOrigin)\n   {\n      if (transformOrigins.includes(transformOrigin)) { this.#stores.transformOrigin.set(transformOrigin); }\n   }\n\n   /**\n    * @param {number|string|null} translateX -\n    */\n   set translateX(translateX)\n   {\n      this.#stores.translateX.set(translateX);\n   }\n\n   /**\n    * @param {number|string|null} translateY -\n    */\n   set translateY(translateY)\n   {\n      this.#stores.translateY.set(translateY);\n   }\n\n   /**\n    * @param {number|string|null} translateZ -\n    */\n   set translateZ(translateZ)\n   {\n      this.#stores.translateZ.set(translateZ);\n   }\n\n   /**\n    * @param {number|string|null} width -\n    */\n   set width(width)\n   {\n      this.#stores.width.set(width);\n   }\n\n   /**\n    * @param {number|string|null} zIndex -\n    */\n   set zIndex(zIndex)\n   {\n      this.#stores.zIndex.set(zIndex);\n   }\n\n   /**\n    * Assigns current position to object passed into method.\n    *\n    * @param {object|TJSPositionData}  [position] - Target to assign current position data.\n    *\n    * @param {import('./').TJSPositionGetOptions}   [options] - Defines options for specific keys and substituting null\n    *        for numeric default values.\n    *\n    * @returns {TJSPositionData} Passed in object with current position data.\n    */\n   get(position = {}, options)\n   {\n      const keys = options?.keys;\n      const excludeKeys = options?.exclude;\n      const numeric = options?.numeric ?? false;\n\n      if (isIterable(keys))\n      {\n         // Replace any null values potentially with numeric default values.\n         if (numeric)\n         {\n            for (const key of keys) { position[key] = this[key] ?? numericDefaults[key]; }\n         }\n         else // Accept current values.\n         {\n            for (const key of keys) { position[key] = this[key]; }\n         }\n\n         // Remove any excluded keys.\n         if (isIterable(excludeKeys))\n         {\n            for (const key of excludeKeys) { delete position[key]; }\n         }\n\n         return position;\n      }\n      else\n      {\n         const data = Object.assign(position, this.#data);\n\n         // Remove any excluded keys.\n         if (isIterable(excludeKeys))\n         {\n            for (const key of excludeKeys) { delete data[key]; }\n         }\n\n         // Potentially set numeric defaults.\n         if (numeric) { setNumericDefaults(data); }\n\n         return data;\n      }\n   }\n\n   /**\n    * @returns {TJSPositionData} Current position data.\n    */\n   toJSON()\n   {\n      return Object.assign({}, this.#data);\n   }\n\n   /**\n    * All calculation and updates of position are implemented in {@link TJSPosition}. This allows position to be fully\n    * reactive and in control of updating inline styles for the application.\n    *\n    * Note: the logic for updating position is improved and changes a few aspects from the default\n    * {@link globalThis.Application.setPosition}. The gate on `popOut` is removed, so to ensure no positional\n    * application occurs popOut applications can set `this.options.positionable` to false ensuring no positional inline\n    * styles are applied.\n    *\n    * The initial set call on an application with a target element will always set width / height as this is\n    * necessary for correct calculations.\n    *\n    * When a target element is present updated styles are applied after validation. To modify the behavior of set\n    * implement one or more validator functions and add them from the application via\n    * `this.position.validators.add(<Function>)`.\n    *\n    * Updates to any target element are decoupled from the underlying TJSPosition data. This method returns this instance\n    * that you can then await on the target element inline style update by using {@link TJSPosition.elementUpdated}.\n    *\n    * @param {import('./').TJSPositionDataExtended} [position] - TJSPosition data to set.\n    *\n    * @returns {TJSPosition} This TJSPosition instance.\n    */\n   set(position = {})\n   {\n      if (!isObject(position)) { throw new TypeError(`Position - set error: 'position' is not an object.`); }\n\n      const parent = this.#parent;\n\n      // An early out to prevent `set` from taking effect if not enabled.\n      if (!this.#enabled)\n      {\n         return this;\n      }\n\n      // An early out to prevent `set` from taking effect if options `positionable` is false.\n      if (parent !== void 0 && typeof parent?.options?.positionable === 'boolean' && !parent?.options?.positionable)\n      {\n         return this;\n      }\n\n      // Callers can specify to immediately update an associated element. This is useful if set is called from\n      // requestAnimationFrame / rAF. Library integrations like GSAP invoke set from rAF.\n      const immediateElementUpdate = position.immediateElementUpdate === true;\n\n      const data = this.#data;\n      const transforms = this.#transforms;\n\n      // Find the target HTML element and verify that it is connected storing it in `el`.\n      const targetEl = parent instanceof HTMLElement ? parent : parent?.elementTarget;\n      const el = targetEl instanceof HTMLElement && targetEl.isConnected ? targetEl : void 0;\n\n      const changeSet = this.#positionChangeSet;\n      const styleCache = this.#styleCache;\n\n      if (el)\n      {\n         // Cache the computed styles of the element.\n         if (!styleCache.hasData(el))\n         {\n            styleCache.update(el);\n\n            // Add will-change property if not already set in inline or computed styles.\n            if (!styleCache.hasWillChange)\n            ;\n\n            // Update all properties / clear queued state.\n            changeSet.set(true);\n            this.#updateElementData.queued = false;\n         }\n\n         // Converts any relative string position data to numeric inputs.\n         convertRelative(position, this);\n\n         position = this.#updatePosition(position, parent, el, styleCache);\n\n         // Check if a validator cancelled the update.\n         if (position === null) { return this; }\n      }\n\n      if (Number.isFinite(position.left))\n      {\n         position.left = Math.round(position.left);\n\n         if (data.left !== position.left) { data.left = position.left; changeSet.left = true; }\n      }\n\n      if (Number.isFinite(position.top))\n      {\n         position.top = Math.round(position.top);\n\n         if (data.top !== position.top) { data.top = position.top; changeSet.top = true; }\n      }\n\n      if (Number.isFinite(position.maxHeight) || position.maxHeight === null)\n      {\n         position.maxHeight = typeof position.maxHeight === 'number' ? Math.round(position.maxHeight) : null;\n\n         if (data.maxHeight !== position.maxHeight) { data.maxHeight = position.maxHeight; changeSet.maxHeight = true; }\n      }\n\n      if (Number.isFinite(position.maxWidth) || position.maxWidth === null)\n      {\n         position.maxWidth = typeof position.maxWidth === 'number' ? Math.round(position.maxWidth) : null;\n\n         if (data.maxWidth !== position.maxWidth) { data.maxWidth = position.maxWidth; changeSet.maxWidth = true; }\n      }\n\n      if (Number.isFinite(position.minHeight) || position.minHeight === null)\n      {\n         position.minHeight = typeof position.minHeight === 'number' ? Math.round(position.minHeight) : null;\n\n         if (data.minHeight !== position.minHeight) { data.minHeight = position.minHeight; changeSet.minHeight = true; }\n      }\n\n      if (Number.isFinite(position.minWidth) || position.minWidth === null)\n      {\n         position.minWidth = typeof position.minWidth === 'number' ? Math.round(position.minWidth) : null;\n\n         if (data.minWidth !== position.minWidth) { data.minWidth = position.minWidth; changeSet.minWidth = true; }\n      }\n\n      if (Number.isFinite(position.rotateX) || position.rotateX === null)\n      {\n         if (data.rotateX !== position.rotateX)\n         {\n            data.rotateX = transforms.rotateX = position.rotateX;\n            changeSet.transform = true;\n         }\n      }\n\n      if (Number.isFinite(position.rotateY) || position.rotateY === null)\n      {\n         if (data.rotateY !== position.rotateY)\n         {\n            data.rotateY = transforms.rotateY = position.rotateY;\n            changeSet.transform = true;\n         }\n      }\n\n      if (Number.isFinite(position.rotateZ) || position.rotateZ === null)\n      {\n         if (data.rotateZ !== position.rotateZ)\n         {\n            data.rotateZ = transforms.rotateZ = position.rotateZ;\n            changeSet.transform = true;\n         }\n      }\n\n      if (Number.isFinite(position.scale) || position.scale === null)\n      {\n         position.scale = typeof position.scale === 'number' ? Math.max(0, Math.min(position.scale, 1000)) : null;\n\n         if (data.scale !== position.scale)\n         {\n            data.scale = transforms.scale = position.scale;\n            changeSet.transform = true;\n         }\n      }\n\n      if ((typeof position.transformOrigin === 'string' && transformOrigins.includes(\n       position.transformOrigin)) || position.transformOrigin === null)\n      {\n         if (data.transformOrigin !== position.transformOrigin)\n         {\n            data.transformOrigin = position.transformOrigin;\n            changeSet.transformOrigin = true;\n         }\n      }\n\n      if (Number.isFinite(position.translateX) || position.translateX === null)\n      {\n         if (data.translateX !== position.translateX)\n         {\n            data.translateX = transforms.translateX = position.translateX;\n            changeSet.transform = true;\n         }\n      }\n\n      if (Number.isFinite(position.translateY) || position.translateY === null)\n      {\n         if (data.translateY !== position.translateY)\n         {\n            data.translateY = transforms.translateY = position.translateY;\n            changeSet.transform = true;\n         }\n      }\n\n      if (Number.isFinite(position.translateZ) || position.translateZ === null)\n      {\n         if (data.translateZ !== position.translateZ)\n         {\n            data.translateZ = transforms.translateZ = position.translateZ;\n            changeSet.transform = true;\n         }\n      }\n\n      if (Number.isFinite(position.zIndex))\n      {\n         position.zIndex = Math.round(position.zIndex);\n\n         if (data.zIndex !== position.zIndex) { data.zIndex = position.zIndex; changeSet.zIndex = true; }\n      }\n\n      if (Number.isFinite(position.width) || position.width === 'auto' || position.width === 'inherit' ||\n       position.width === null)\n      {\n         position.width = typeof position.width === 'number' ? Math.round(position.width) : position.width;\n\n         if (data.width !== position.width) { data.width = position.width; changeSet.width = true; }\n      }\n\n      if (Number.isFinite(position.height) || position.height === 'auto' || position.height === 'inherit' ||\n       position.height === null)\n      {\n         position.height = typeof position.height === 'number' ? Math.round(position.height) : position.height;\n\n         if (data.height !== position.height) { data.height = position.height; changeSet.height = true; }\n      }\n\n      if (el)\n      {\n         const defaultData = this.#state.getDefault();\n\n         // Set default data after first set operation that has a target element.\n         if (!isObject(defaultData)) { this.#state.save({ name: '#defaultData', ...Object.assign({}, data) }); }\n\n         // If `immediateElementUpdate` is true in position data passed to `set` then update the element immediately.\n         // This is for rAF based library integrations like GSAP.\n         if (immediateElementUpdate)\n         {\n            UpdateElementManager.immediate(el, this.#updateElementData);\n            this.#updateElementPromise = Promise.resolve(performance.now());\n         }\n         // Else if not queued then queue an update for the next rAF callback.\n         else if (!this.#updateElementData.queued)\n         {\n            this.#updateElementPromise = UpdateElementManager.add(el, this.#updateElementData);\n         }\n      }\n      else\n      {\n         // Notify main store subscribers.\n         UpdateElementManager.updateSubscribers(this.#updateElementData);\n      }\n\n      return this;\n   }\n\n   /**\n    * @param {import('svelte/store').Subscriber<TJSPositionData>} handler - Callback function that is invoked on\n    *        update / changes. Receives a copy of the TJSPositionData.\n    *\n    * @returns {import('svelte/store').Unsubscriber} Unsubscribe function.\n    */\n   subscribe(handler)\n   {\n      this.#subscriptions.push(handler); // add handler to the array of subscribers\n\n      handler(Object.assign({}, this.#data));                     // call handler with current value\n\n      // Return unsubscribe function.\n      return () =>\n      {\n         const index = this.#subscriptions.findIndex((sub) => sub === handler);\n         if (index >= 0) { this.#subscriptions.splice(index, 1); }\n      };\n   }\n\n   /**\n    * @param {import('./').TJSPositionDataExtended} opts -\n    *\n    * @param {number|null} opts.left -\n    *\n    * @param {number|null} opts.top -\n    *\n    * @param {number|null} opts.maxHeight -\n    *\n    * @param {number|null} opts.maxWidth -\n    *\n    * @param {number|null} opts.minHeight -\n    *\n    * @param {number|null} opts.minWidth -\n    *\n    * @param {number|'auto'|null} opts.width -\n    *\n    * @param {number|'auto'|null} opts.height -\n    *\n    * @param {number|null} opts.rotateX -\n    *\n    * @param {number|null} opts.rotateY -\n    *\n    * @param {number|null} opts.rotateZ -\n    *\n    * @param {number|null} opts.scale -\n    *\n    * @param {string} opts.transformOrigin -\n    *\n    * @param {number|null} opts.translateX -\n    *\n    * @param {number|null} opts.translateY -\n    *\n    * @param {number|null} opts.translateZ -\n    *\n    * @param {number|null} opts.zIndex -\n    *\n    * @param {number|null} opts.rotation - alias for rotateZ\n    *\n    * @param {*} opts.rest -\n    *\n    * @param {object} parent -\n    *\n    * @param {HTMLElement} el -\n    *\n    * @param {StyleCache} styleCache -\n    *\n    * @returns {null|TJSPositionData} Updated position data or null if validation fails.\n    */\n   #updatePosition({\n      // Directly supported parameters\n      left, top, maxWidth, maxHeight, minWidth, minHeight, width, height, rotateX, rotateY, rotateZ, scale,\n       transformOrigin, translateX, translateY, translateZ, zIndex,\n\n      // Aliased parameters\n      rotation,\n\n      ...rest\n   } = {}, parent, el, styleCache)\n   {\n      let currentPosition = s_DATA_UPDATE.copy(this.#data);\n\n      // Update width if an explicit value is passed, or if no width value is set on the element.\n      if (el.style.width === '' || width !== void 0)\n      {\n         if (width === 'auto' || (currentPosition.width === 'auto' && width !== null))\n         {\n            currentPosition.width = 'auto';\n            width = styleCache.offsetWidth;\n         }\n         else if (width === 'inherit' || (currentPosition.width === 'inherit' && width !== null))\n         {\n            currentPosition.width = 'inherit';\n            width = styleCache.offsetWidth;\n         }\n         else\n         {\n            const newWidth = Number.isFinite(width) ? width : currentPosition.width;\n            currentPosition.width = width = Number.isFinite(newWidth) ? Math.round(newWidth) : styleCache.offsetWidth;\n         }\n      }\n      else\n      {\n         width = Number.isFinite(currentPosition.width) ? currentPosition.width : styleCache.offsetWidth;\n      }\n\n      // Update height if an explicit value is passed, or if no height value is set on the element.\n      if (el.style.height === '' || height !== void 0)\n      {\n         if (height === 'auto' || (currentPosition.height === 'auto' && height !== null))\n         {\n            currentPosition.height = 'auto';\n            height = styleCache.offsetHeight;\n         }\n         else if (height === 'inherit' || (currentPosition.height === 'inherit' && height !== null))\n         {\n            currentPosition.height = 'inherit';\n            height = styleCache.offsetHeight;\n         }\n         else\n         {\n            const newHeight = Number.isFinite(height) ? height : currentPosition.height;\n            currentPosition.height = height = Number.isFinite(newHeight) ? Math.round(newHeight) :\n             styleCache.offsetHeight;\n         }\n      }\n      else\n      {\n         height = Number.isFinite(currentPosition.height) ? currentPosition.height : styleCache.offsetHeight;\n      }\n\n      // Update left\n      if (Number.isFinite(left))\n      {\n         currentPosition.left = left;\n      }\n      else if (!Number.isFinite(currentPosition.left))\n      {\n         // Potentially use any initial position helper if available or set to 0.\n         currentPosition.left = typeof this.#options.initialHelper?.getLeft === 'function' ?\n          this.#options.initialHelper.getLeft(width) : 0;\n      }\n\n      // Update top\n      if (Number.isFinite(top))\n      {\n         currentPosition.top = top;\n      }\n      else if (!Number.isFinite(currentPosition.top))\n      {\n         // Potentially use any initial position helper if available or set to 0.\n         currentPosition.top = typeof this.#options.initialHelper?.getTop === 'function' ?\n          this.#options.initialHelper.getTop(height) : 0;\n      }\n\n      if (Number.isFinite(maxHeight) || maxHeight === null)\n      {\n         currentPosition.maxHeight = Number.isFinite(maxHeight) ? Math.round(maxHeight) : null;\n      }\n\n      if (Number.isFinite(maxWidth) || maxWidth === null)\n      {\n         currentPosition.maxWidth = Number.isFinite(maxWidth) ? Math.round(maxWidth) : null;\n      }\n\n      if (Number.isFinite(minHeight) || minHeight === null)\n      {\n         currentPosition.minHeight = Number.isFinite(minHeight) ? Math.round(minHeight) : null;\n      }\n\n      if (Number.isFinite(minWidth) || minWidth === null)\n      {\n         currentPosition.minWidth = Number.isFinite(minWidth) ? Math.round(minWidth) : null;\n      }\n\n      // Update rotate X/Y/Z, scale, z-index\n      if (Number.isFinite(rotateX) || rotateX === null) { currentPosition.rotateX = rotateX; }\n      if (Number.isFinite(rotateY) || rotateY === null) { currentPosition.rotateY = rotateY; }\n\n      // Handle alias for rotateZ. First check if `rotateZ` is valid and different from the current value. Next check if\n      // `rotation` is valid and use it for `rotateZ`.\n      if (rotateZ !== currentPosition.rotateZ && (Number.isFinite(rotateZ) || rotateZ === null))\n      {\n         currentPosition.rotateZ = rotateZ;\n      }\n      else if (rotation !== currentPosition.rotateZ && (Number.isFinite(rotation) || rotation === null))\n      {\n         currentPosition.rotateZ = rotation;\n      }\n\n      if (Number.isFinite(translateX) || translateX === null) { currentPosition.translateX = translateX; }\n      if (Number.isFinite(translateY) || translateY === null) { currentPosition.translateY = translateY; }\n      if (Number.isFinite(translateZ) || translateZ === null) { currentPosition.translateZ = translateZ; }\n\n      if (Number.isFinite(scale) || scale === null)\n      {\n         currentPosition.scale = typeof scale === 'number' ? Math.max(0, Math.min(scale, 1000)) : null;\n      }\n\n      if (typeof transformOrigin === 'string' || transformOrigin === null)\n      {\n         currentPosition.transformOrigin = transformOrigins.includes(transformOrigin) ? transformOrigin :\n          null;\n      }\n\n      if (Number.isFinite(zIndex) || zIndex === null)\n      {\n         currentPosition.zIndex = typeof zIndex === 'number' ? Math.round(zIndex) : zIndex;\n      }\n\n      const validatorData = this.#validatorData;\n\n      // If there are any validators allow them to potentially modify position data or reject the update.\n      if (this.#validators.enabled && validatorData.length)\n      {\n         s_VALIDATION_DATA.parent = parent;\n\n         s_VALIDATION_DATA.el = el;\n\n         s_VALIDATION_DATA.computed = styleCache.computed;\n\n         s_VALIDATION_DATA.transforms = this.#transforms;\n\n         s_VALIDATION_DATA.height = height;\n\n         s_VALIDATION_DATA.width = width;\n\n         s_VALIDATION_DATA.marginLeft = styleCache.marginLeft;\n\n         s_VALIDATION_DATA.marginTop = styleCache.marginTop;\n\n         s_VALIDATION_DATA.maxHeight = styleCache.maxHeight ?? currentPosition.maxHeight;\n\n         s_VALIDATION_DATA.maxWidth = styleCache.maxWidth ?? currentPosition.maxWidth;\n\n         // Given a parent w/ reactive state and is minimized ignore styleCache min-width/height.\n         const isMinimized = parent?.reactive?.minimized ?? false;\n\n         // Note the use of || for accessing the style cache as the left hand is ignored w/ falsy values such as '0'.\n         s_VALIDATION_DATA.minHeight = isMinimized ? currentPosition.minHeight ?? 0 :\n          styleCache.minHeight || (currentPosition.minHeight ?? 0);\n\n         s_VALIDATION_DATA.minWidth = isMinimized ? currentPosition.minWidth ?? 0 :\n          styleCache.minWidth || (currentPosition.minWidth ?? 0);\n\n         for (let cntr = 0; cntr < validatorData.length; cntr++)\n         {\n            s_VALIDATION_DATA.position = currentPosition;\n            s_VALIDATION_DATA.rest = rest;\n            currentPosition = validatorData[cntr].validator(s_VALIDATION_DATA);\n\n            if (currentPosition === null) { return null; }\n         }\n      }\n\n      // Return the updated position object.\n      return currentPosition;\n   }\n}\n\nconst s_DATA_UPDATE = new TJSPositionData();\n\n/**\n * @type {import('./').ValidationData}\n */\nconst s_VALIDATION_DATA = {\n   position: void 0,\n   parent: void 0,\n   el: void 0,\n   computed: void 0,\n   transforms: void 0,\n   height: void 0,\n   width: void 0,\n   marginLeft: void 0,\n   marginTop: void 0,\n   maxHeight: void 0,\n   maxWidth: void 0,\n   minHeight: void 0,\n   minWidth: void 0,\n   rest: void 0\n};\n\nObject.seal(s_VALIDATION_DATA);\n\n/**\n * Provides an action to apply a TJSPosition instance to a HTMLElement and invoke `position.parent`\n *\n * @param {HTMLElement}       node - The node associated with the action.\n *\n * @param {import('..').TJSPosition}   position - A position instance.\n *\n * @returns {import('svelte/action').ActionReturn<import('..').TJSPosition>} The action lifecycle methods.\n */\nfunction applyPosition(node, position)\n{\n   if (hasSetter(position, 'parent')) { position.parent = node; }\n\n   return {\n      update: (newPosition) =>\n      {\n         // Sanity case to short circuit update if positions are the same instance.\n         if (newPosition === position && newPosition.parent === position.parent) { return; }\n\n         if (hasSetter(position, 'parent')) { position.parent = void 0; }\n\n         position = newPosition;\n\n         if (hasSetter(position, 'parent')) { position.parent = node; }\n      },\n\n      destroy: () => { if (hasSetter(position, 'parent')) { position.parent = void 0; } }\n   };\n}\n\n/**\n * Provides an action to enable pointer dragging of an HTMLElement and invoke `position.set` on a given\n * {@link TJSPosition} instance provided. When the attached boolean store state changes the draggable\n * action is enabled or disabled.\n *\n * @param {HTMLElement}       node - The node associated with the action.\n *\n * @param {object}            params - Required parameters.\n *\n * @param {import('..').TJSPosition}   params.position - A position instance.\n *\n * @param {boolean}           [params.active=true] - A boolean value; attached to a readable store.\n *\n * @param {number}            [params.button=0] - MouseEvent button; {@link https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button}.\n *\n * @param {import('svelte/store').Writable<boolean>} [params.storeDragging] - A writable store that tracks \"dragging\"\n *        state.\n *\n * @param {boolean}           [params.ease=true] - When true easing is enabled.\n *\n * @param {object}            [params.easeOptions] - Gsap `to / `quickTo` vars object.\n *\n * @param {Iterable<string>}  [params.hasTargetClassList] - When defined any event targets that have a class in this\n *        list are allowed.\n *\n * @param {Iterable<string>}  [params.ignoreTargetClassList] - When defined any event targets that have a class in this\n *        list are ignored.\n *\n * @returns {import('svelte/action').ActionReturn<Record<string, any>>} Lifecycle functions.\n */\nfunction draggable(node, { position, active = true, button = 0, storeDragging = void 0, ease = false,\n easeOptions = { duration: 0.1, ease: cubicOut }, hasTargetClassList, ignoreTargetClassList })\n{\n   if (hasTargetClassList !== void 0 && !isIterable(hasTargetClassList))\n   {\n      throw new TypeError(`'hasTargetClassList' is not iterable.`);\n   }\n\n   if (ignoreTargetClassList !== void 0 && !isIterable(ignoreTargetClassList))\n   {\n      throw new TypeError(`'ignoreTargetClassList' is not iterable.`);\n   }\n\n   /**\n    * Used for direct call to `position.set`.\n    *\n    * @type {{top: number, left: number}}\n    */\n   const positionData = { left: 0, top: 0 };\n\n   /**\n    * Duplicate the app / Positionable starting position to track differences.\n    *\n    * @type {object}\n    */\n   let initialPosition = null;\n\n   /**\n    * Stores the initial X / Y on drag down.\n    *\n    * @type {object}\n    */\n   let initialDragPoint = {};\n\n   /**\n    * Stores the current dragging state and gates the move pointer as the dragging store is not\n    * set until the first pointer move.\n    *\n    * @type {boolean}\n    */\n   let dragging = false;\n\n   /**\n    * Stores the quickTo callback to use for optimized tweening when easing is enabled.\n    *\n    * @type {import('#runtime/svelte/store/position').quickToCallback}\n    */\n   let quickTo = position.animate.quickTo(['top', 'left'], easeOptions);\n\n   /**\n    * Remember event handlers associated with this action, so they may be later unregistered.\n    *\n    *  @type {{ [key: string]: [string, Function, boolean] }}\n    */\n   const handlers = {\n      dragDown: ['pointerdown', onDragPointerDown, false],\n      dragMove: ['pointermove', onDragPointerChange, false],\n      dragUp: ['pointerup', onDragPointerUp, false]\n   };\n\n   /**\n    * Activates listeners.\n    */\n   function activateListeners()\n   {\n      // Drag handlers\n      node.addEventListener(...handlers.dragDown);\n      node.classList.add('draggable');\n   }\n\n   /**\n    * Removes listeners.\n    */\n   function removeListeners()\n   {\n      if (typeof storeDragging?.set === 'function') { storeDragging.set(false); }\n\n      // Drag handlers\n      node.removeEventListener(...handlers.dragDown);\n      node.removeEventListener(...handlers.dragMove);\n      node.removeEventListener(...handlers.dragUp);\n      node.classList.remove('draggable');\n   }\n\n   if (active)\n   {\n      activateListeners();\n   }\n\n   /**\n    * Handle the initial pointer down that activates dragging behavior for the positionable.\n    *\n    * @param {PointerEvent} event - The pointer down event.\n    */\n   function onDragPointerDown(event)\n   {\n      if (event.button !== button || !event.isPrimary) { return; }\n\n      // Do not process if the position system is not enabled.\n      if (!position.enabled) { return; }\n\n      // Potentially ignore this event if `ignoreTargetClassList` is defined and the `event.target` has a matching\n      // class.\n      if (ignoreTargetClassList !== void 0 && event.target instanceof HTMLElement)\n      {\n         for (const targetClass of ignoreTargetClassList)\n         {\n            if (event.target.classList.contains(targetClass)) { return; }\n         }\n      }\n\n      // Potentially ignore this event if `hasTargetClassList` is defined and the `event.target` does not have any\n      // matching class from the list.\n      if (hasTargetClassList !== void 0 && event.target instanceof HTMLElement)\n      {\n         let foundTarget = false;\n\n         for (const targetClass of hasTargetClassList)\n         {\n            if (event.target.classList.contains(targetClass))\n            {\n               foundTarget = true;\n               break;\n            }\n         }\n\n         if (!foundTarget) { return; }\n      }\n\n      event.preventDefault();\n\n      dragging = false;\n\n      // Record initial position.\n      initialPosition = position.get();\n      initialDragPoint = { x: event.clientX, y: event.clientY };\n\n      // Add move and pointer up handlers.\n      node.addEventListener(...handlers.dragMove);\n      node.addEventListener(...handlers.dragUp);\n\n      node.setPointerCapture(event.pointerId);\n   }\n\n   /**\n    * Move the positionable.\n    *\n    * @param {PointerEvent} event - The pointer move event.\n    */\n   function onDragPointerChange(event)\n   {\n      // See chorded button presses for pointer events:\n      // https://www.w3.org/TR/pointerevents3/#chorded-button-interactions\n      // TODO: Support different button configurations for PointerEvents.\n      if ((event.buttons & 1) === 0)\n      {\n         onDragPointerUp(event);\n         return;\n      }\n\n      if (event.button !== -1 || !event.isPrimary) { return; }\n\n      event.preventDefault();\n\n      // Only set store dragging on first move event.\n      if (!dragging && typeof storeDragging?.set === 'function')\n      {\n         dragging = true;\n         storeDragging.set(true);\n      }\n\n      /** @type {number} */\n      const newLeft = initialPosition.left + (event.clientX - initialDragPoint.x);\n      /** @type {number} */\n      const newTop = initialPosition.top + (event.clientY - initialDragPoint.y);\n\n      if (ease)\n      {\n         quickTo(newTop, newLeft);\n      }\n      else\n      {\n         positionData.left = newLeft;\n         positionData.top = newTop;\n\n         position.set(positionData);\n      }\n   }\n\n   /**\n    * Finish dragging and set the final position and removing listeners.\n    *\n    * @param {PointerEvent} event - The pointer up event.\n    */\n   function onDragPointerUp(event)\n   {\n      event.preventDefault();\n\n      dragging = false;\n      if (typeof storeDragging?.set === 'function') { storeDragging.set(false); }\n\n      node.removeEventListener(...handlers.dragMove);\n      node.removeEventListener(...handlers.dragUp);\n   }\n\n   return {\n      // The default of active being true won't automatically add listeners twice.\n      update: (options) =>\n      {\n         if (typeof options.active === 'boolean')\n         {\n            active = options.active;\n            if (active) { activateListeners(); }\n            else { removeListeners(); }\n         }\n\n         if (typeof options.button === 'number')\n         {\n            button = options.button;\n         }\n\n         if (options.position !== void 0 && options.position !== position)\n         {\n            position = options.position;\n            quickTo = position.animate.quickTo(['top', 'left'], easeOptions);\n         }\n\n         if (typeof options.ease === 'boolean') { ease = options.ease; }\n\n         if (isObject(options.easeOptions))\n         {\n            easeOptions = options.easeOptions;\n            quickTo.options(easeOptions);\n         }\n\n         if (options.hasTargetClassList !== void 0)\n         {\n            if (!isIterable(options.hasTargetClassList))\n            {\n               throw new TypeError(`'hasTargetClassList' is not iterable.`);\n            }\n            else\n            {\n               hasTargetClassList = options.hasTargetClassList;\n            }\n         }\n\n         if (options.ignoreTargetClassList !== void 0)\n         {\n            if (!isIterable(options.ignoreTargetClassList))\n            {\n               throw new TypeError(`'ignoreTargetClassList' is not iterable.`);\n            }\n            else\n            {\n               ignoreTargetClassList = options.ignoreTargetClassList;\n            }\n         }\n      },\n\n      destroy: () => removeListeners()\n   };\n}\n\nclass DraggableOptions\n{\n   #ease = false;\n\n   /**\n    * @type {{ duration: number, ease: (t: number) => number | string }}\n    */\n   #easeOptions = { duration: 0.1, ease: cubicOut };\n\n   /**\n    * Stores the subscribers.\n    *\n    * @type {import('svelte/store').Subscriber<DraggableOptions>[]}\n    */\n   #subscriptions = [];\n\n   /**\n    *\n    * @param {object} [opts] - Optional parameters.\n    *\n    * @param {boolean}  [opts.ease] -\n    *\n    * @param {object}   [opts.easeOptions] -\n    */\n   constructor({ ease, easeOptions } = {})\n   {\n      // Define the following getters directly on this instance and make them enumerable. This allows them to be\n      // picked up w/ `Object.assign`.\n      Object.defineProperty(this, 'ease', {\n         get: () => { return this.#ease; },\n         set: (newEase) =>\n         {\n            if (typeof newEase !== 'boolean') { throw new TypeError(`'ease' is not a boolean.`); }\n\n            this.#ease = newEase;\n            this.#updateSubscribers();\n         },\n         enumerable: true\n      });\n\n      Object.defineProperty(this, 'easeOptions', {\n         get: () => { return this.#easeOptions; },\n         set: (newEaseOptions) =>\n         {\n            if (!isObject(newEaseOptions))\n            {\n               throw new TypeError(`'easeOptions' is not an object.`);\n            }\n\n            if (newEaseOptions.duration !== void 0)\n            {\n               if (!Number.isFinite(newEaseOptions.duration))\n               {\n                  throw new TypeError(`'easeOptions.duration' is not a finite number.`);\n               }\n\n               if (newEaseOptions.duration < 0) { throw new Error(`'easeOptions.duration' is less than 0.`); }\n\n               this.#easeOptions.duration = newEaseOptions.duration;\n            }\n\n            if (newEaseOptions.ease !== void 0)\n            {\n               if (typeof newEaseOptions.ease !== 'function' && typeof newEaseOptions.ease !== 'string')\n               {\n                  throw new TypeError(`'easeOptions.ease' is not a function or string.`);\n               }\n\n               this.#easeOptions.ease = newEaseOptions.ease;\n            }\n\n            this.#updateSubscribers();\n         },\n         enumerable: true\n      });\n\n      // Set default options.\n      if (ease !== void 0) { this.ease = ease; }\n      if (easeOptions !== void 0) { this.easeOptions = easeOptions; }\n   }\n\n\n   /**\n    * @returns {number} Get ease duration\n    */\n   get easeDuration() { return this.#easeOptions.duration; }\n\n   /**\n    * @returns {string|Function} Get easing function value.\n    */\n   get easeValue() { return this.#easeOptions.ease; }\n\n\n   /**\n    * @param {number}   duration - Set ease duration.\n    */\n   set easeDuration(duration)\n   {\n      if (!Number.isFinite(duration))\n      {\n         throw new TypeError(`'duration' is not a finite number.`);\n      }\n\n      if (duration < 0) { throw new Error(`'duration' is less than 0.`); }\n\n      this.#easeOptions.duration = duration;\n      this.#updateSubscribers();\n   }\n\n   /**\n    * @param {string|Function} value - Get easing function value.\n    */\n   set easeValue(value)\n   {\n      if (typeof value !== 'function' && typeof value !== 'string')\n      {\n         throw new TypeError(`'value' is not a function or string.`);\n      }\n\n      this.#easeOptions.ease = value;\n      this.#updateSubscribers();\n   }\n\n   /**\n    * Resets all options data to default values.\n    */\n   reset()\n   {\n      this.#ease = false;\n      this.#easeOptions = { duration: 0.1, ease: cubicOut };\n      this.#updateSubscribers();\n   }\n\n   /**\n    * Resets easing options to default values.\n    */\n   resetEase()\n   {\n      this.#easeOptions = { duration: 0.1, ease: cubicOut };\n      this.#updateSubscribers();\n   }\n\n   /**\n    *\n    * @param {import('svelte/store').Subscriber<DraggableOptions>} handler - Callback function that is invoked on\n    *        update / changes. Receives the DraggableOptions object / instance.\n    *\n    * @returns {import('svelte/store').Unsubscriber} Unsubscribe function.\n    */\n   subscribe(handler)\n   {\n      this.#subscriptions.push(handler); // add handler to the array of subscribers\n\n      handler(this);                     // call handler with current value\n\n      // Return unsubscribe function.\n      return () =>\n      {\n         const index = this.#subscriptions.findIndex((sub) => sub === handler);\n         if (index >= 0) { this.#subscriptions.splice(index, 1); }\n      };\n   }\n\n   #updateSubscribers()\n   {\n      const subscriptions = this.#subscriptions;\n\n      // Early out if there are no subscribers.\n      if (subscriptions.length > 0)\n      {\n         for (let cntr = 0; cntr < subscriptions.length; cntr++) { subscriptions[cntr](this); }\n      }\n   }\n}\n\n/**\n * Define a function to get a DraggableOptions instance.\n *\n * @param {{ ease?: boolean, easeOptions?: object }} options - Draggable options.\n *\n * @returns {DraggableOptions} A new options instance.\n */\ndraggable.options = (options) => new DraggableOptions(options);\n\nexport { TJSPosition, TJSPositionData, applyPosition, draggable };\n//# sourceMappingURL=index.js.map\n","<script>\n   /**\n    * Provides an app header button conforming to the Foundry {@link ApplicationHeaderButton} type. Additionally, a\n    * `title` field is supported to give a tool tip for the button. For backward compatibility `onclick` is supported,\n    * but for uniformity across TRL defining an `onPress` function is recommended. If defined it is invoked when\n    * the button is clicked or `Enter` key pressed and state is updated accordingly.\n    *\n    * TRL also supports the following extra button data:\n    * - {keyCode='Enter'}           keyCode: A string conforming to `KeyboardEvent.code` to activate `onPress` callback.\n    * - {keepMinimized=false}       keepMinimized: When true the button is not removed when app minimized.\n    * - {Function}                  onContextMenu: Invoked when right mouse button or contextmenu key is pressed.\n    * - {Function}                  onPress: Invoked when left mouse button or `keyCode` key is pressed.\n    * - {Record<string, string>}    styles: Additional inline styles to apply to button.\n    * - {string}                    title: Tooltip title.\n    */\n   import { applyStyles }   from '@typhonjs-fvtt/runtime/svelte/action/dom';\n   import { isObject }      from '@typhonjs-fvtt/runtime/util/object';\n\n   import { localize }      from '@typhonjs-fvtt/runtime/svelte/helper';\n\n   export let button = void 0;\n\n   const s_REGEX_HTML = /^\\s*<.*>$/;\n\n   $: title = isObject(button) && typeof button.title === 'string' ? localize(button.title) : '';\n\n   // Handle icon and treat bare strings as the icon class; otherwise assume the icon is fully formed HTML.\n   $: icon = isObject(button) && typeof button.icon !== 'string' ? void 0 : s_REGEX_HTML.test(button.icon) ?\n    button.icon : `<i class=\"${button.icon}\" title=\"${title}\"></i>`;\n\n   $: label = isObject(button) && typeof button.label === 'string' ? localize(button.label) : void 0;\n\n   $: keepMinimized = isObject(button) && typeof button.keepMinimized === 'boolean' ? button.keepMinimized : false;\n\n   $: keyCode = isObject(button) && typeof button.keyCode === 'string' ? button.keyCode : 'Enter';\n\n   $: styles = isObject(button) && isObject(button.styles) ? button.styles : void 0;\n\n   function onClick(event)\n   {\n      // Accept `onPress or `onclick` as the function / data to invoke.\n      const invoke = button?.onPress ?? button?.onclick;\n\n      if (typeof invoke === 'function')\n      {\n         invoke.call(button, event);\n         button = button; // This provides a reactive update if button data changes.\n      }\n   }\n\n   function onContextMenu(event)\n   {\n      // Accept `onContextMenu` as the function / data to invoke.\n      const invoke = button?.onContextMenu;\n\n      if (typeof invoke === 'function')\n      {\n         invoke.call(button, event);\n         button = button; // This provides a reactive update if button data changes.\n      }\n   }\n\n   /**\n    * Consume / stop propagation of key down when key codes match.\n    *\n    * @param {KeyboardEvent}    event -\n    */\n   function onKeydown(event)\n   {\n      if (event.code === keyCode)\n      {\n         event.preventDefault();\n         event.stopPropagation();\n      }\n   }\n\n   /**\n    * Handle press event if key codes match.\n    *\n    * @param {KeyboardEvent}    event -\n    */\n   function onKeyup(event)\n   {\n      if (event.code === keyCode)\n      {\n         const invoke = button.onPress ?? button.onclick;\n\n         if (typeof invoke === 'function')\n         {\n            invoke.call(button, event);\n            button = button; // This provides a reactive update if button data changes.\n         }\n\n         event.preventDefault();\n         event.stopPropagation();\n      }\n   }\n</script>\n\n<svelte:options accessors={true}/>\n\n<!-- svelte-ignore a11y-missing-attribute -->\n<a on:click|preventDefault|stopPropagation={onClick}\n   on:contextmenu|preventDefault|stopPropagation={onContextMenu}\n   on:keydown={onKeydown}\n   on:keyup={onKeyup}\n   use:applyStyles={styles}\n   class=\"header-button {button.class}\"\n   class:keep-minimized={keepMinimized}\n   aria-label={label}\n   tabindex=0\n   role=button>\n    {@html icon}{#if label}<span class:has-icon={icon !== void 0}>{label}</span>{/if}\n</a>\n\n<style>\n   a {\n      padding: var(--tjs-app-header-button-padding, 0 3px);\n   }\n\n   a :global(i) {\n      padding: var(--tjs-app-header-button-icon-padding, 0);\n   }\n\n   a:hover {\n      text-shadow: var(--tjs-app-header-button-text-shadow-hover, var(--tjs-default-text-shadow-focus-hover, inherit));\n   }\n\n   a:focus-visible {\n      box-shadow: var(--tjs-app-header-button-box-shadow-focus-visible, var(--tjs-default-box-shadow-focus-visible));\n      outline: var(--tjs-app-header-button-outline-focus-visible, var(--tjs-default-outline-focus-visible, revert));\n      transition: var(--tjs-app-header-button-transition-focus-visible, var(--tjs-default-transition-focus-visible));\n      text-shadow: var(--tjs-app-header-button-text-shadow-focus-visible, var(--tjs-default-text-shadow-focus-hover, inherit));\n   }\n\n   span {\n      padding: var(--tjs-app-header-button-label-padding, 0);\n   }\n\n   span.has-icon {\n      padding: var(--tjs-app-header-button-label-padding, 0 0 0 3px);\n   }\n</style>\n","<script>\n   import { getContext }            from 'svelte';\n   import { cubicOut }              from 'svelte/easing';\n\n   import { isSvelteComponent }     from '@typhonjs-fvtt/runtime/svelte/util';\n   import { isObject }              from '@typhonjs-fvtt/runtime/util/object';\n\n   import { localize }              from '@typhonjs-fvtt/runtime/svelte/helper';\n\n   import {\n      draggable as dragDefault }    from '@typhonjs-fvtt/runtime/svelte/store/position';\n\n   import TJSHeaderButton           from './TJSHeaderButton.svelte';\n\n   export let draggable = void 0;\n   export let draggableOptions = void 0;\n\n   const { application } = getContext('#external');\n\n   // Focus related app options stores.\n   const { focusAuto, focusKeep } = application.reactive.storeAppOptions;\n\n   const { elementRoot } = getContext('#internal').stores;\n\n   const storeTitle = application.reactive.storeAppOptions.title;\n   const storeDraggable = application.reactive.storeAppOptions.draggable;\n   const storeDragging = application.reactive.storeUIState.dragging;\n   const storeHeaderButtons = application.reactive.storeUIState.headerButtons;\n   const storeHeaderIcon = application.reactive.storeAppOptions.headerIcon;\n   const storeHeaderNoTitleMinimized = application.reactive.storeAppOptions.headerNoTitleMinimized;\n   const storeMinimizable = application.reactive.storeAppOptions.minimizable;\n   const storeMinimized = application.reactive.storeUIState.minimized;\n\n   // These classes in the window header allow dragging.\n   const s_DRAG_TARGET_CLASSLIST = Object.freeze(['tjs-app-icon', 'tjs-window-header-spacer',\n    'window-header', 'window-title']);\n\n   let dragOptions;\n\n   $: draggable = typeof draggable === 'function' ? draggable : dragDefault;\n\n   // Combines external options with defaults for TJSApplicationHeader. By default, easing is turned on w/ duration of\n   // 0.08 seconds and cubicOut, but can be overridden by any provided `draggableOptions`. `position`, `active`, and\n   // `storeDragging` are always overridden by application position / stores.\n   $: dragOptions = Object.assign({}, { ease: true, easeOptions: { duration: 0.06, ease: cubicOut } },\n    isObject(draggableOptions) ? draggableOptions : {}, { position: application.position, active:\n     $storeDraggable, storeDragging, hasTargetClassList: s_DRAG_TARGET_CLASSLIST });\n\n   let displayHeaderTitle;\n\n   $: displayHeaderTitle = $storeHeaderNoTitleMinimized && $storeMinimized ? 'none' : null;\n\n   let buttonsLeft;\n   let buttonsRight;\n\n   $:\n   {\n      buttonsLeft = [];\n      buttonsRight = [];\n\n      for (const button of $storeHeaderButtons)\n      {\n         const buttonsList = typeof button?.alignLeft === 'boolean' && button?.alignLeft ? buttonsLeft : buttonsRight;\n\n         // If the button is a Svelte component set it as the class otherwise use `TJSHeaderButton` w/ button as props.\n         buttonsList.push(isSvelteComponent(button) ? { class: button, props: {} } :\n          { class: TJSHeaderButton, props: { button } });\n      }\n   }\n\n   function minimizable(node, booleanStore)\n   {\n      const callback = (event) =>\n      {\n         // Only toggle minimize state if window title or header is the event target. Also allow toggle state if the\n         // event target has 'keep-minimized' class.\n         if (event.target.classList.contains('window-title') || event.target.classList.contains('window-header') ||\n           event.target.classList.contains('keep-minimized'))\n         {\n            application._onToggleMinimize(event);\n         }\n      }\n\n      function activateListeners() { node.addEventListener('dblclick', callback); }\n      function removeListeners() { node.removeEventListener('dblclick', callback); }\n\n      if (booleanStore) { activateListeners(); }\n\n      return {\n         update: (booleanStore) =>  // eslint-disable-line no-shadow\n         {\n            if (booleanStore) { activateListeners(); }\n            else { removeListeners(); }\n         },\n\n         destroy: () => removeListeners()\n      };\n   }\n\n   /**\n    * Explicitly focus `elementRoot` if pointer event is not consumed by header buttons / components. This allows\n    * keyboard tab navigation to select header buttons.\n    *\n    * Note: if `focusKeep` app option store is set to true `elementRoot` is only focused if the current browser wide\n    * active element is not contained inside the app element.\n    */\n   function onPointerdown(event)\n   {\n      const rootEl = $elementRoot;\n\n      if ($focusAuto && rootEl instanceof HTMLElement && rootEl?.isConnected)\n      {\n         if ($focusKeep)\n         {\n            const focusOutside = document.activeElement instanceof HTMLElement &&\n             !rootEl.contains(document.activeElement);\n\n            // Only focus the content element if the active element is outside the app; maintaining internal focused\n            // element.\n            if (focusOutside)\n            {\n               rootEl.focus();\n            }\n            else\n            {\n               event.preventDefault();\n            }\n         }\n         else\n         {\n            rootEl.focus();\n         }\n      }\n   }\n</script>\n\n{#key draggable}\n   <header class=\"window-header flexrow\"\n           use:draggable={dragOptions}\n           use:minimizable={$storeMinimizable}\n           on:pointerdown={onPointerdown}>\n      {#if typeof $storeHeaderIcon === 'string'}\n         <img class=\"tjs-app-icon keep-minimized\" src={$storeHeaderIcon} alt=icon>\n      {/if}\n      <h4 class=window-title style:display={displayHeaderTitle}>\n         {localize($storeTitle)}\n      </h4>\n      {#each buttonsLeft as button}\n         <svelte:component this={button.class} {...button.props} />\n      {/each}\n      <span class=\"tjs-window-header-spacer keep-minimized\" />\n      {#each buttonsRight as button}\n         <svelte:component this={button.class} {...button.props} />\n      {/each}\n   </header>\n{/key}\n\n<style>\n   /**\n    * Provides a zero space element that expands to the right creating the gap between window title and left aligned\n    * buttons and right aligned buttons. Note the use of a negative left margin to remove the gap between elements.\n    */\n   .tjs-window-header-spacer {\n      flex: 0;\n      margin-left: calc(-1 * var(--tjs-app-header-gap, 5px));\n      margin-right: auto;\n   }\n\n   .window-header {\n      flex: var(--tjs-app-header-flex, 0 0 30px);\n      gap: var(--tjs-app-header-gap, 5px);\n      padding: var(--tjs-app-header-padding, 0 4px);\n   }\n\n   .window-header .tjs-app-icon {\n      align-self: center;\n      border-radius: var(--tjs-app-header-icon-border-radius, 4px);\n      flex: 0 0 var(--tjs-app-header-icon-width, 24px);\n      height: var(--tjs-app-header-icon-height, 24px);\n   }\n\n   .window-title {\n      gap: var(--tjs-app-header-gap, 5px);\n      max-width: fit-content;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n   }\n</style>\n","<script>\n   import { A11yHelper }    from '@typhonjs-fvtt/runtime/util/browser';\n\n   /** @type {HTMLElement} */\n   export let elementRoot = void 0;\n\n   /** @type {boolean} */\n   export let enabled = true;\n\n   let ignoreElements, wrapEl;\n\n   $: if (wrapEl) { ignoreElements = new Set([wrapEl]); }\n\n   function onFocus()\n   {\n      // Early out if not enabled.\n      if (!enabled) { return; }\n\n      if (elementRoot instanceof HTMLElement)\n      {\n         const firstFocusEl = A11yHelper.getFirstFocusableElement(elementRoot, ignoreElements);\n\n         if (firstFocusEl instanceof HTMLElement && firstFocusEl !== wrapEl)\n         {\n            firstFocusEl.focus();\n         }\n         else\n         {\n            // No focus target found, so focus elementRoot.\n            elementRoot.focus();\n         }\n      }\n   }\n</script>\n\n<!-- svelte-ignore a11y-no-noninteractive-tabindex -->\n<div bind:this={wrapEl} class=tjs-focus-wrap tabindex=0 on:focus={onFocus} />\n\n<style>\n    div {\n        width: 0;\n        height: 0;\n        flex: 0;\n    }\n\n    div:focus {\n        outline: none;\n    }\n</style>\n","<script>\n   import { getContext }         from 'svelte';\n\n   export let isResizable = false;\n\n   const application = getContext('#external').application;\n\n   // Allows retrieval of the element root at runtime.\n   const storeElementRoot = getContext('#internal').stores.elementRoot;\n\n   const storeResizable = application.reactive.storeAppOptions.resizable;\n\n   const storeMinimized = application.reactive.storeUIState.minimized;\n   const storeResizing = application.reactive.storeUIState.resizing;\n\n   let elementResize;\n\n   $: if (elementResize)\n   {\n      // Instead of creating a derived store it is easier to use isResizable and the minimized store below.\n      elementResize.style.display = isResizable && !$storeMinimized ? 'block' : 'none';\n\n      // Add / remove `resizable` class from element root.\n      const elementRoot = $storeElementRoot;\n      if (elementRoot) { elementRoot.classList[isResizable ? 'add' : 'remove']('resizable'); }\n   }\n\n   /**\n    * Provides an action to handle resizing the application shell based on the resizable app option.\n    *\n    * @param {HTMLElement}       node - The node associated with the action.\n    *\n    * @param {object}            [opts] - Optional parameters.\n    *\n    * @param {boolean}           [opts.active=true] - A boolean value; attached to a readable store.\n    *\n    * @param {Writable<boolean>} [opts.storeResizing] - A writable store that tracks \"resizing\" state.\n    *\n    * @returns {{update: Function, destroy: Function}} The action lifecycle methods.\n    */\n   function resizable(node, { active = true, storeResizing = void 0 } = {})\n   {\n      /**\n       * Duplicate the app / Positionable starting position to track differences.\n       *\n       * @type {object}\n       */\n      let position = null;\n\n      /**\n       * Stores the initial X / Y on drag down.\n       *\n       * @type {object}\n       */\n      let initialPosition = {};\n\n      /**\n       * Stores the current resizing state and gates the move pointer as the resizing store is not\n       * set until the first pointer move.\n       *\n       * @type {boolean}\n       */\n      let resizing = false;\n\n      /**\n       * Remember event handlers associated with this action so they may be later unregistered.\n       *\n       * @type {Object}\n       */\n      const handlers = {\n         resizeDown: ['pointerdown', (e) => onResizePointerDown(e), false],\n         resizeMove: ['pointermove', (e) => onResizePointerMove(e), false],\n         resizeUp: ['pointerup', (e) => onResizePointerUp(e), false]\n      };\n\n      /**\n       * Activates listeners.\n       */\n      function activateListeners()\n      {\n         // Resize handlers\n         node.addEventListener(...handlers.resizeDown);\n\n         isResizable = true;\n\n         node.style.display = 'block';\n      }\n\n      /**\n       * Removes listeners.\n       */\n      function removeListeners()\n      {\n         if (typeof storeResizing?.set === 'function') { storeResizing.set(false); }\n\n         // Resize handlers\n         node.removeEventListener(...handlers.resizeDown);\n         node.removeEventListener(...handlers.resizeMove);\n         node.removeEventListener(...handlers.resizeUp);\n\n         node.style.display = 'none';\n\n         isResizable = false;\n      }\n\n      // On mount if resizable is true then activate listeners otherwise set element display to `none`.\n      if (active)\n      {\n         activateListeners();\n      }\n      else\n      {\n         node.style.display = 'none';\n      }\n\n      /**\n       * Handle the initial pointer down that activates resizing capture.\n       */\n      function onResizePointerDown(event)\n      {\n         event.preventDefault();\n\n         resizing = false;\n\n         // Record initial position\n         position = application.position.get();\n\n         if (position.height === 'auto') { position.height = $storeElementRoot.clientHeight; }\n         if (position.width === 'auto') { position.width = $storeElementRoot.clientWidth; }\n\n         initialPosition = { x: event.clientX, y: event.clientY };\n\n         // Add temporary handlers\n         node.addEventListener(...handlers.resizeMove);\n         node.addEventListener(...handlers.resizeUp);\n\n         node.setPointerCapture(event.pointerId);\n      }\n\n      /**\n       * Sets the width / height of the positionable application.\n       */\n      function onResizePointerMove(event)\n      {\n         event.preventDefault();\n\n         if (!resizing && typeof storeResizing?.set === 'function')\n         {\n            resizing = true;\n            storeResizing.set(true);\n         }\n\n         application.position.set({\n            width: position.width + (event.clientX - initialPosition.x),\n            height: position.height + (event.clientY - initialPosition.y)\n         });\n      }\n\n      /**\n       * Conclude the dragging behavior when the pointer is released setting the final position and\n       * removing listeners.\n       */\n      function onResizePointerUp(event)\n      {\n         resizing = false;\n         if (typeof storeResizing?.set === 'function') { storeResizing.set(false); }\n\n         event.preventDefault();\n         node.removeEventListener(...handlers.resizeMove);\n         node.removeEventListener(...handlers.resizeUp);\n\n         // TODO: Direct Foundry API access.\n         application?._onResize?.(event);\n      }\n\n      return {\n         update: ({ active }) =>  // eslint-disable-line no-shadow\n         {\n            if (active) { activateListeners(); }\n            else { removeListeners(); }\n         },\n\n         destroy: () => removeListeners()\n      };\n   }\n\n</script>\n\n<div class=\"window-resizable-handle\"\n     use:resizable={{active: $storeResizable, storeResizing}}\n     bind:this={elementResize}>\n   <i class=\"fas fa-arrows-alt-h\"></i>\n</div>\n\n<style>\n   .window-resizable-handle {\n      display: block;\n      position: absolute;\n      width: var(--tjs-app-resizable-handle-width, 20px);\n      height: var(--tjs-app-resizable-handle-height, 20px);\n      top: var(--tjs-app-resizable-handle-top, unset);\n      bottom: var(--tjs-app-resizable-handle-bottom, -1px);\n      right: var(--tjs-app-resizable-handle-right, 0);\n      left: var(--tjs-app-resizable-handle-left, unset);\n      background: var(--tjs-app-resizable-handle-background, #444);\n      border: var(--tjs-app-resizable-handle-border, 1px solid #111);\n      border-radius: var(--tjs-app-resizable-handle-border-radius, 4px 0 0 0);\n      padding: var(--tjs-app-resizable-handle-padding, 2px);\n   }\n\n   .fa-arrows-alt-h {\n      color: var(--tjs-app-resizable-handle-icon-color, #f0f0e0);\n      transform: var(--tjs-app-resizable-handle-icon-transform, rotate(45deg));\n   }\n</style>\n","<script>\n   /**\n    * Provides an application shell is a main top level slotted component that provides a reactive\n    * outer wrapper and header bar for the main content component.\n    */\n\n   import {\n      getContext,\n      onMount,\n      setContext }                     from 'svelte';\n\n   import {\n      applyStyles,\n      resizeObserver }                 from '@typhonjs-fvtt/runtime/svelte/action/dom';\n\n   import { TJSDefaultTransition }     from '@typhonjs-fvtt/runtime/svelte/transition';\n   import { A11yHelper }               from '@typhonjs-fvtt/runtime/util/browser';\n   import { isObject }                 from '@typhonjs-fvtt/runtime/util/object';\n\n   import { AppShellContextInternal }  from './AppShellContextInternal.js';\n   import TJSApplicationHeader         from './TJSApplicationHeader.svelte';\n   import TJSFocusWrap                 from './TJSFocusWrap.svelte';\n   import ResizableHandle              from './ResizableHandle.svelte';\n\n   // Bound to the content and root elements. Can be used by parent components. SvelteApplication will also\n   // use 'elementRoot' to set the element of the Application. You can also provide `elementContent` and\n   // `elementTarget`. Please see SvelteApplication lifecycle documentation.\n   export let elementContent = void 0;\n   export let elementRoot = void 0;\n\n   // Allows custom draggable implementations to be forwarded to TJSApplicationHeader.\n   export let draggable = void 0;\n   export let draggableOptions = void 0;\n\n   // The children array can be specified by a parent via prop or is read below from the external context.\n   // export let children = void 0;\n\n   // Explicit style overrides for the main app and content elements. Uses action `applyStyles`.\n   export let stylesApp = void 0;\n   export let stylesContent = void 0;\n\n   // If a parent component binds and sets `appOffsetHeight` to true then a resizeObserver action is enabled on the\n   // outer application `div`. Additionally, the SvelteApplication position resizeObserved store is updated.\n   export let appOffsetHeight = false;\n   export let appOffsetWidth = false;\n\n   // Set to `resizeObserver` if either of the above props are truthy otherwise a null operation.\n   const appResizeObserver = !!appOffsetHeight || !!appOffsetWidth ? resizeObserver : () => null;\n\n   // If a parent component binds and sets `contentOffsetHeight` or `contentOffsetWidth` to true then a\n   // resizeObserver action is enabled on the content `section`.\n   export let contentOffsetHeight = false;\n   export let contentOffsetWidth = false;\n\n   // Set to `resizeObserver` if either of the above props are truthy otherwise a null operation.\n   const contentResizeObserver = !!contentOffsetHeight || !!contentOffsetWidth ? resizeObserver : () => null;\n\n   // Provides the internal context for data / stores of the application shell.\n   const internal = new AppShellContextInternal();\n\n   // Provides options to `A11yHelper.getFocusableElements` to ignore TJSFocusWrap by CSS class.\n   const s_IGNORE_CLASSES = { ignoreClasses: ['tjs-focus-wrap'] };\n\n   // Internal context for `elementContent` / `elementRoot` stores.\n   setContext('#internal', internal);\n\n   // Only update the `elementContent` store if the new `elementContent` is not null or undefined.\n   $: if (elementContent !== void 0 && elementContent !== null)\n   {\n      getContext('#internal').stores.elementContent.set(elementContent);\n   }\n\n   // Only update the `elementRoot` store if the new `elementRoot` is not null or undefined.\n   $: if (elementRoot !== void 0 && elementRoot !== null)\n   {\n      getContext('#internal').stores.elementRoot.set(elementRoot);\n   }\n\n   // Store application reference.\n   const { application } = getContext('#external');\n\n   // Focus related app options stores.\n   const { focusAuto, focusKeep, focusTrap } = application.reactive.storeAppOptions;\n\n   const { minimized } = application.reactive.storeUIState;\n\n   let focusWrapEnabled;\n\n   // Enable TJSFocusWrap component when focus trapping app option is true and app is not minimized.\n   $: focusWrapEnabled = $focusAuto && $focusTrap && !$minimized;\n\n   // ---------------------------------------------------------------------------------------------------------------\n\n   // The following block is somewhat complex, but allows transition options to be updated reactively during\n   // runtime execution.\n\n   // Exports properties to set a transition w/ in / out options.\n   export let transition = TJSDefaultTransition.default;\n   export let inTransition = TJSDefaultTransition.default;\n   export let outTransition = TJSDefaultTransition.default;\n\n   // Exports properties to set options for any transitions.\n   export let transitionOptions = void 0;\n   export let inTransitionOptions = TJSDefaultTransition.options;\n   export let outTransitionOptions = TJSDefaultTransition.options;\n\n   // Tracks last transition state.\n   let oldTransition = TJSDefaultTransition.default;\n   let oldTransitionOptions = void 0\n\n   // Run this reactive block when the last transition state is not equal to the current state.\n   $: if (oldTransition !== transition)\n   {\n      // If transition is defined and not the default transition then set it to both in and out transition otherwise\n      // set the default transition to both in & out transitions.\n      const newTransition = typeof transition === 'function' ? transition : TJSDefaultTransition.default;\n\n      inTransition = newTransition;\n      outTransition = newTransition;\n\n      oldTransition = newTransition;\n   }\n\n   // Run this reactive block when the last transition options state is not equal to the current options state.\n   $: if (oldTransitionOptions !== transitionOptions)\n   {\n      const newOptions = transitionOptions !== TJSDefaultTransition.options && isObject(transitionOptions) ?\n       transitionOptions : TJSDefaultTransition.options;\n\n      inTransitionOptions = newOptions;\n      outTransitionOptions = newOptions;\n\n      oldTransitionOptions = newOptions;\n   }\n\n   // Handle cases if inTransition is unset; assign noop default transition function.\n   $: if (typeof inTransition !== 'function') { inTransition = TJSDefaultTransition.default; }\n\n   $:\n   {\n      // Handle cases if outTransition is unset; assign noop default transition function.\n      if (typeof outTransition !== 'function') { outTransition = TJSDefaultTransition.default; }\n\n      // Set close animation to `false` / not run when an out transition is defined.\n      const defaultCloseAnimation = application?.options?.defaultCloseAnimation;\n      if (typeof defaultCloseAnimation === 'boolean' && defaultCloseAnimation &&\n       outTransition !== TJSDefaultTransition.default)\n      {\n         application.options.defaultCloseAnimation = false;\n      }\n   }\n\n   // Handle cases if inTransitionOptions is unset; assign empty default transition options.\n   $: if (!isObject(inTransitionOptions)) { inTransitionOptions = TJSDefaultTransition.options; }\n\n   // Handle cases if outTransitionOptions is unset; assign empty default transition options.\n   $: if (!isObject(outTransitionOptions)) { outTransitionOptions = TJSDefaultTransition.options; }\n\n   // ---------------------------------------------------------------------------------------------------------------\n\n   // Focus `elementRoot` on mount to allow keyboard tab navigation of header buttons.\n   onMount(() => elementRoot.focus());\n\n   // ---------------------------------------------------------------------------------------------------------------\n\n   /**\n    * Provides a handler for the custom `close:popup` event fired by `svelte-standard` components like TJSMenu. The\n    * intention is to handle focus management of a component that is no longer connected in the DOM. If a target element\n    * that is the source of the close event is attached attempt to resolve internal focus to the application.\n    *\n    * @param {CustomEvent}  event - A custom event for `close:popup`.\n    */\n   function onClosePopup(event)\n   {\n      // Early out as automatic focus management is not enabled.\n      if (!$focusAuto) { return; }\n\n      const targetEl = event?.detail?.target;\n\n      // Early out if there is no target element.\n      if (!(targetEl instanceof HTMLElement)) { return; }\n\n      // Early out if the target element is focusable as it will gain focus naturally.\n      if (A11yHelper.isFocusable(targetEl)) { return; }\n\n      const elementRootContains = elementRoot.contains(targetEl);\n\n      // First check for if the target is elementRoot or elementContent then fallback to contains checks.\n      if (targetEl === elementRoot)\n      {\n         elementRoot.focus();\n      }\n      else if (targetEl === elementContent)\n      {\n         elementContent.focus();\n      }\n      else if (elementRootContains)\n      {\n         if (elementContent.contains(targetEl))\n         {\n            elementContent.focus();\n         }\n         else\n         {\n            elementRoot.focus();\n         }\n      }\n   }\n\n   /**\n    * Provides focus cycling inside the application capturing `<Shift-Tab>` and if `elementRoot` or `firstFocusEl` is\n    * the actively focused element then last focusable element is focused skipping `TJSFocusWrap`.\n    *\n    * Also, if a popout app all key down events will bring this application to the top such that when focus is trapped\n    * the app is top most.\n    *\n    * @param {KeyboardEvent} event - Keyboard Event.\n    */\n   function onKeydown(event)\n   {\n      // TODO: Note this handling is specifically for Foundry v11+ as the platform KeyboardManager uses\n      // `document.querySelector(':focus')` to short circuit keyboard handling internally to KeyboardManager.\n      // ApplicationShell manages containing focus programmatically and this prevents the Foundry KeyboardManager from\n      // activating. We need to check if this key event target is currently the `elementRoot` or `elementContent` and\n      // the event matches any KeyboardManager actions and if so blur current focus.\n      if ((event.target === elementRoot || event.target === elementContent) &&\n       KeyboardManager && KeyboardManager?._getMatchingActions?.(\n        KeyboardManager?.getKeyboardEventContext?.(event))?.length)\n      {\n         event.target?.blur();\n         return;\n      }\n\n      if (focusWrapEnabled && event.shiftKey && event.code === 'Tab')\n      {\n         // Collect all focusable elements from `elementRoot` and ignore TJSFocusWrap.\n         const allFocusable = A11yHelper.getFocusableElements(elementRoot, s_IGNORE_CLASSES);\n\n         // Find first and last focusable elements.\n         const firstFocusEl = allFocusable.length > 0 ? allFocusable[0] : void 0;\n         const lastFocusEl = allFocusable.length > 0 ? allFocusable[allFocusable.length - 1] : void 0;\n\n         // Only cycle focus to the last keyboard focusable app element if `elementRoot` or first focusable element\n         // is the active element.\n         if (elementRoot === document.activeElement || firstFocusEl === document.activeElement)\n         {\n            if (lastFocusEl instanceof HTMLElement && firstFocusEl !== lastFocusEl) { lastFocusEl.focus(); }\n\n            event.preventDefault();\n            event.stopPropagation();\n         }\n      }\n\n      // Make sure this application is top most when it receives keyboard events.\n      if (typeof application?.options?.popOut === 'boolean' && application.options.popOut &&\n       application !== globalThis.ui?.activeWindow)\n      {\n         application.bringToTop.call(application);\n      }\n   }\n\n   /**\n    * If the application is a popOut application then when clicked bring to top if not already the Foundry\n    * `activeWindow`.\n    */\n   function onPointerdownApp()\n   {\n      if (typeof application?.options?.popOut === 'boolean' && application.options.popOut &&\n       application !== globalThis.ui?.activeWindow)\n      {\n         application.bringToTop.call(application);\n      }\n   }\n\n   /**\n    * Focus `elementContent` if the event target is not focusable and `focusAuto` is enabled.\n    *\n    * Note: `focusAuto` is an app option store. This check is a bit tricky as `section.window-content` has a tabindex\n    * of '-1', so it is focusable manually.\n    */\n   function onPointerdownContent(event)\n   {\n      const focusable = A11yHelper.isFocusable(event.target);\n\n      if (!focusable && $focusAuto)\n      {\n         if ($focusKeep)\n         {\n            const focusOutside = document.activeElement instanceof HTMLElement &&\n             !elementRoot.contains(document.activeElement);\n\n            // Only focus the content element if the active element is outside the app; maintaining internal focused\n            // element.\n            if (focusOutside)\n            {\n               elementContent.focus();\n            }\n            else\n            {\n               event.preventDefault();\n            }\n         }\n         else\n         {\n            elementContent.focus();\n         }\n      }\n   }\n\n   /**\n    * Callback for content resizeObserver action. This is enabled when contentOffsetHeight or contentOffsetWidth is\n    * bound.\n    *\n    * @param {number}   offsetWidth - Observed offsetWidth.\n    *\n    * @param {number}   offsetHeight - Observed offsetHeight\n    */\n   function resizeObservedContent(offsetWidth, offsetHeight)\n   {\n      contentOffsetWidth = offsetWidth;\n      contentOffsetHeight = offsetHeight;\n   }\n\n   /**\n    * Callback for app resizeObserver action. This is enabled when appOffsetHeight or appOffsetWidth is\n    * bound. Additionally, the Application position resizeObserved store is updated.\n    *\n    * @param {number}   contentWidth - Observed contentWidth.\n    * @param {number}   contentHeight - Observed contentHeight\n    * @param {number}   offsetWidth - Observed offsetWidth.\n    * @param {number}   offsetHeight - Observed offsetHeight\n    */\n   function resizeObservedApp(offsetWidth, offsetHeight, contentWidth, contentHeight)\n   {\n      application.position.stores.resizeObserved.update((object) =>\n      {\n         object.contentWidth = contentWidth;\n         object.contentHeight = contentHeight;\n         object.offsetWidth = offsetWidth;\n         object.offsetHeight = offsetHeight;\n\n         return object;\n      });\n\n      appOffsetHeight = offsetHeight;\n      appOffsetWidth = offsetWidth;\n   }\n\n   /**\n    * Transitions can cause side effects. Work around this issue by using an if conditional.\n    * Due to timing issues and the onDestroy / outro transitions can cause elementRoot / elementContent to be set to\n    * null when swapped dynamically. There is a feature request to allow transition functions to be undefined:\n    *\n    * @see: https://github.com/sveltejs/svelte/issues/6942\n    */\n</script>\n\n<svelte:options accessors={true}/>\n\n{#if inTransition !== TJSDefaultTransition.default || outTransition !== TJSDefaultTransition.default}\n   <!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n   <div id={application.id}\n        class=\"app window-app {application.options.classes.join(' ')}\"\n        data-appid={application.appId}\n        bind:this={elementRoot}\n        in:inTransition|global={inTransitionOptions}\n        out:outTransition|global={outTransitionOptions}\n        on:close:popup|preventDefault|stopPropagation={onClosePopup}\n        on:keydown|capture={onKeydown}\n        on:pointerdown={onPointerdownApp}\n        use:applyStyles={stylesApp}\n        use:appResizeObserver={resizeObservedApp}\n        role=application\n        tabindex=-1>\n      <TJSApplicationHeader {draggable} {draggableOptions} />\n      <section class=window-content\n               bind:this={elementContent}\n               on:pointerdown={onPointerdownContent}\n               use:applyStyles={stylesContent}\n               use:contentResizeObserver={resizeObservedContent}\n               tabindex=-1>\n         <slot />\n      </section>\n      <ResizableHandle />\n      <TJSFocusWrap {elementRoot} />\n   </div>\n{:else}\n   <!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n   <div id={application.id}\n        class=\"app window-app {application.options.classes.join(' ')}\"\n        data-appid={application.appId}\n        bind:this={elementRoot}\n        on:close:popup|preventDefault|stopPropagation={onClosePopup}\n        on:keydown|capture={onKeydown}\n        on:pointerdown={onPointerdownApp}\n        use:applyStyles={stylesApp}\n        use:appResizeObserver={resizeObservedApp}\n        role=application\n        tabindex=-1>\n      <TJSApplicationHeader {draggable} {draggableOptions} />\n      <section class=window-content\n               bind:this={elementContent}\n               on:pointerdown={onPointerdownContent}\n               use:applyStyles={stylesContent}\n               use:contentResizeObserver={resizeObservedContent}\n               tabindex=-1>\n         <slot />\n      </section>\n      <ResizableHandle />\n      <TJSFocusWrap {elementRoot} enabled={focusWrapEnabled} />\n   </div>\n{/if}\n\n<style>\n   /* Note: this is different than stock Foundry and allows rounded corners from .app core styles */\n   .window-app {\n      overflow: var(--tjs-app-overflow, hidden);\n   }\n\n   .window-app:focus-visible {\n      outline: var(--tjs-app-outline-focus-visible, var(--tjs-default-a11y-outline-focus-visible, 2px solid transparent));\n   }\n\n   .window-content:focus-visible {\n      outline: var(--tjs-app-content-outline-focus-visible, var(--tjs-default-a11y-outline-focus-visible, 2px solid transparent));\n   }\n\n   /* Override Foundry default; adjust --tjs-app-header-gap to change gap size */\n   .window-app :global(.window-header a) {\n      flex: none;\n      margin: 0;\n   }\n\n   /* Override Foundry default; See TJSHeaderButton for CSS variables */\n   .window-app :global(.window-header i[class^=fa]) {\n      margin: 0\n   }\n</style>\n","import { cssVariables } from './cssVariables.js';\n\nexport { default as TJSComponentShell }   from './TJSComponentShell.svelte';\nexport { default as TJSContainer }        from './TJSContainer.svelte';\nexport { default as TJSGlassPane }        from './TJSGlassPane.svelte';\nexport *                                  from './application/index.js';\nexport *                                  from './dialog/index.js';\n\n/**\n * Provides default CSS variables for core components.\n */\ncssVariables.setProperties({\n   // Anchor text shadow / header buttons\n   '--tjs-default-text-shadow-focus-hover': '0 0 8px var(--color-shadow-primary)',\n\n   // TJSApplicationShell app background.\n   '--tjs-app-background': `url(\"${globalThis.foundry.utils.getRoute('/ui/denim075.png')}\")`,\n}, false);\n","import { writable, get } from 'svelte/store';\nimport { Strings } from '@typhonjs-fvtt/runtime/util';\nimport { isIterable, safeAccess } from '@typhonjs-fvtt/runtime/util/object';\nimport { isWritableStore } from '@typhonjs-fvtt/runtime/util/store';\n\nclass DynReducerUtils {\n    /**\n     * Checks for array equality between two arrays of numbers.\n     *\n     * @param a - Array A\n     *\n     * @param b - Array B\n     *\n     * @returns Arrays are equal.\n     */\n    static arrayEquals(a, b) {\n        if (a === b) {\n            return true;\n        }\n        if (a === null || b === null) {\n            return false;\n        }\n        /* c8 ignore next */\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let cntr = a.length; --cntr >= 0;) {\n            /* c8 ignore next */\n            if (a[cntr] !== b[cntr]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Provides a solid string hashing algorithm.\n     *\n     * Sourced from: https://stackoverflow.com/a/52171480\n     *\n     * @param str - String to hash.\n     *\n     * @param seed - A seed value altering the hash.\n     *\n     * @returns Hash code.\n     */\n    static hashString(str, seed = 0) {\n        let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;\n        for (let ch, i = 0; i < str.length; i++) {\n            ch = str.charCodeAt(i);\n            h1 = Math.imul(h1 ^ ch, 2654435761);\n            h2 = Math.imul(h2 ^ ch, 1597334677);\n        }\n        h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n        h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n        return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n    }\n    /**\n     * Converts an unknown value for hashing purposes in {@link AdapterIndexer.calcHashUpdate}.\n     *\n     * Currently objects / Map w/ object keys is not supported. Potentially can include `object-hash` to handle this\n     * case, but it is not common to use objects as keys in Maps.\n     *\n     * @param value - An unknown value to convert to a number.\n     */\n    static hashUnknown(value) {\n        if (value === null || value === void 0) {\n            return 0;\n        }\n        let result = 0;\n        switch (typeof value) {\n            case 'boolean':\n                result = value ? 1 : 0;\n                break;\n            case 'bigint':\n                result = Number(BigInt.asIntN(64, value));\n                break;\n            case 'function':\n                result = this.hashString(value.name);\n                break;\n            case 'number':\n                result = Number.isFinite(value) ? value : 0;\n                break;\n            case 'object':\n                // TODO: consider hashing an object IE `object-hash` and convert to number.\n                break;\n            case 'string':\n                result = this.hashString(value);\n                break;\n            case 'symbol':\n                result = this.hashString(Symbol.keyFor(value));\n                break;\n        }\n        return result;\n    }\n    /**\n     * @param target -\n     *\n     * @param Prototype -\n     *\n     * @returns target constructor function has Prototype.\n     */\n    static hasPrototype(target, Prototype) {\n        /* c8 ignore next */\n        if (typeof target !== 'function') {\n            return false;\n        }\n        if (target === Prototype) {\n            return true;\n        }\n        // Walk parent prototype chain. Check for descriptor at each prototype level.\n        for (let proto = Object.getPrototypeOf(target); proto; proto = Object.getPrototypeOf(proto)) {\n            if (proto === Prototype) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Provides a utility method to determine if the given data is iterable / implements iterator protocol.\n     *\n     * @param data - Data to verify as iterable.\n     *\n     * @returns Is data iterable.\n     */\n    static isIterable(data) {\n        return data !== null && data !== void 0 && typeof data === 'object' &&\n            typeof data[Symbol.iterator] === 'function';\n    }\n}\n\n/**\n * Provides the `derived` API for all dynamic reducers.\n */\nclass AdapterDerived {\n    #hostData;\n    #DerivedReducerCtor;\n    #parentIndex;\n    #derived = new Map();\n    #destroyed = false;\n    /**\n     * @param hostData - Hosted data structure.\n     *\n     * @param parentIndex - Any associated parent index API.\n     *\n     * @param DerivedReducerCtor - The default derived reducer constructor function.\n     */\n    constructor(hostData, parentIndex, DerivedReducerCtor) {\n        this.#hostData = hostData;\n        this.#parentIndex = parentIndex;\n        this.#DerivedReducerCtor = DerivedReducerCtor;\n        Object.freeze(this);\n    }\n    /**\n     * Creates a new derived reducer.\n     *\n     * @param options - Options defining the new derived reducer.\n     *\n     * @returns Newly created derived reducer.\n     */\n    create(options) {\n        if (this.#destroyed) {\n            throw Error(`AdapterDerived.create error: this instance has been destroyed.`);\n        }\n        let name;\n        let rest = {};\n        let ctor;\n        const DerivedReducerCtor = this.#DerivedReducerCtor;\n        if (typeof options === 'string') {\n            name = options;\n            ctor = DerivedReducerCtor;\n        }\n        else if (typeof options === 'function' && DynReducerUtils.hasPrototype(options, DerivedReducerCtor)) {\n            ctor = options;\n        }\n        else if (typeof options === 'object' && options !== null) {\n            ({ name, ctor = DerivedReducerCtor, ...rest } = options);\n        }\n        else {\n            throw new TypeError(`AdapterDerived.create error: 'options' does not conform to allowed parameters.`);\n        }\n        if (!DynReducerUtils.hasPrototype(ctor, DerivedReducerCtor)) {\n            throw new TypeError(`AdapterDerived.create error: 'ctor' is not a '${DerivedReducerCtor?.name}'.`);\n        }\n        name = name ?? ctor?.name;\n        if (typeof name !== 'string') {\n            throw new TypeError(`AdapterDerived.create error: 'name' is not a string.`);\n        }\n        const derivedReducer = new ctor(this.#hostData, this.#parentIndex, rest);\n        this.#derived.set(name, derivedReducer);\n        return derivedReducer;\n    }\n    /**\n     * Removes all derived reducers and associated subscriptions.\n     */\n    clear() {\n        if (this.#destroyed) {\n            return;\n        }\n        for (const reducer of this.#derived.values()) {\n            reducer.destroy();\n        }\n        this.#derived.clear();\n    }\n    /**\n     * Deletes and destroys a derived reducer by name.\n     *\n     * @param name - Name of the derived reducer.\n     */\n    delete(name) {\n        if (this.#destroyed) {\n            throw Error(`AdapterDerived.delete error: this instance has been destroyed.`);\n        }\n        const reducer = this.#derived.get(name);\n        if (reducer) {\n            reducer.destroy();\n        }\n        return this.#derived.delete(name);\n    }\n    /**\n     * Removes all derived reducers, subscriptions, and cleans up all resources.\n     */\n    destroy() {\n        if (this.#destroyed) {\n            return;\n        }\n        this.clear();\n        this.#hostData = [null];\n        this.#parentIndex = null;\n        this.#destroyed = true;\n    }\n    /**\n     * Returns an existing derived reducer.\n     *\n     * @param name - Name of derived reducer.\n     */\n    get(name) {\n        if (this.#destroyed) {\n            throw Error(`AdapterDerived.get error: this instance has been destroyed.`);\n        }\n        return this.#derived.get(name);\n    }\n    /**\n     * Updates all managed derived reducer indexes.\n     *\n     * @param [force] - Force an update to subscribers.\n     */\n    update(force = false) {\n        if (this.#destroyed) {\n            return;\n        }\n        for (const reducer of this.#derived.values()) {\n            reducer.index.update(force);\n        }\n    }\n}\n\n/**\n * Provides the storage and sequencing of managed filters. Each filter added may be a bespoke function or a\n * {@link DynDataFilter} object containing an `id`, `filter`, and `weight` attributes; `filter` is the only required\n * attribute.\n *\n * The `id` attribute can be anything that creates a unique ID for the filter; recommended strings or numbers. This\n * allows filters to be removed by ID easily.\n *\n * The `weight` attribute is a number between 0 and 1 inclusive that allows filters to be added in a\n * predictable order which is especially handy if they are manipulated at runtime. A lower weighted filter always runs\n * before a higher weighted filter. For speed and efficiency always set the heavier / more inclusive filter with a\n * lower weight; an example of this is a keyword / name that will filter out many entries making any further filtering\n * faster. If no weight is specified the default of '1' is assigned and it is appended to the end of the filters list.\n *\n * This class forms the public API which is accessible from the `.filters` getter in the main reducer implementation.\n * ```\n * const dynArray = new DynArrayReducer([...]);\n * dynArray.filters.add(...);\n * dynArray.filters.clear();\n * dynArray.filters.length;\n * dynArray.filters.remove(...);\n * dynArray.filters.removeBy(...);\n * dynArray.filters.removeById(...);\n * ```\n */\nclass AdapterFilters {\n    #filtersData;\n    #indexUpdate;\n    #mapUnsubscribe = new Map();\n    /**\n     * @param indexUpdate - update function for the indexer.\n     *\n     * @param filtersAdapter - Stores the filter function data.\n     */\n    constructor(indexUpdate, filtersAdapter) {\n        this.#indexUpdate = indexUpdate;\n        this.#filtersData = filtersAdapter;\n        Object.freeze(this);\n    }\n    /**\n     * @returns Returns the length of the filter data.\n     */\n    get length() { return this.#filtersData.filters.length; }\n    /**\n     * Provides an iterator for filters.\n     *\n     * @yields {DataFilter<T>}\n     */\n    *[Symbol.iterator]() {\n        if (this.#filtersData.filters.length === 0) {\n            return;\n        }\n        for (const entry of this.#filtersData.filters) {\n            yield { ...entry };\n        }\n    }\n    /**\n     * @param filters -\n     */\n    add(...filters) {\n        /**\n         * Tracks the number of filters added that have subscriber functionality.\n         */\n        let subscribeCount = 0;\n        for (const filter of filters) {\n            const filterType = typeof filter;\n            if (filterType !== 'function' && (filterType !== 'object' || filter === null)) {\n                throw new TypeError(`AdapterFilters error: 'filter' is not a function or object.`);\n            }\n            let data = void 0;\n            let subscribeFn = void 0;\n            if (filterType === 'function') {\n                data = {\n                    id: void 0,\n                    filter,\n                    weight: 1\n                };\n                subscribeFn = filter.subscribe;\n            }\n            else if (filterType === 'object') {\n                if ('filter' in filter) {\n                    if (typeof filter.filter !== 'function') {\n                        throw new TypeError(`AdapterFilters error: 'filter' attribute is not a function.`);\n                    }\n                    if (filter.weight !== void 0 && typeof filter.weight !== 'number' ||\n                        (filter.weight < 0 || filter.weight > 1)) {\n                        throw new TypeError(`AdapterFilters error: 'weight' attribute is not a number between '0 - 1' inclusive.`);\n                    }\n                    data = {\n                        id: filter.id !== void 0 ? filter.id : void 0,\n                        filter: filter.filter,\n                        weight: filter.weight || 1\n                    };\n                    subscribeFn = filter.filter.subscribe ?? filter.subscribe;\n                }\n                else {\n                    throw new TypeError(`AdapterFilters error: 'filter' attribute is not a function.`);\n                }\n            }\n            // Find the index to insert where data.weight is less than existing values weight.\n            const index = this.#filtersData.filters.findIndex((value) => {\n                return data.weight < value.weight;\n            });\n            // If an index was found insert at that location.\n            if (index >= 0) {\n                this.#filtersData.filters.splice(index, 0, data);\n            }\n            else // push to end of filters.\n             {\n                this.#filtersData.filters.push(data);\n            }\n            if (typeof subscribeFn === 'function') {\n                const unsubscribe = subscribeFn(this.#indexUpdate);\n                // Ensure that unsubscribe is a function.\n                if (typeof unsubscribe !== 'function') {\n                    throw new TypeError('AdapterFilters error: Filter has subscribe function, but no unsubscribe function is returned.');\n                }\n                // Ensure that the same filter is not subscribed to multiple times.\n                if (this.#mapUnsubscribe.has(data.filter)) {\n                    throw new Error('AdapterFilters error: Filter added already has an unsubscribe function registered.');\n                }\n                this.#mapUnsubscribe.set(data.filter, unsubscribe);\n                subscribeCount++;\n            }\n        }\n        // Filters with subscriber functionality are assumed to immediately invoke the `subscribe` callback. If the\n        // subscriber count is less than the amount of filters added then automatically trigger an index update manually.\n        if (subscribeCount < filters.length) {\n            this.#indexUpdate();\n        }\n    }\n    /**\n     * Clears and removes all filters.\n     */\n    clear() {\n        this.#filtersData.filters.length = 0;\n        // Unsubscribe from all filters with subscription support.\n        for (const unsubscribe of this.#mapUnsubscribe.values()) {\n            unsubscribe();\n        }\n        this.#mapUnsubscribe.clear();\n        this.#indexUpdate();\n    }\n    /**\n     * @param filters -\n     */\n    remove(...filters) {\n        const length = this.#filtersData.filters.length;\n        if (length === 0) {\n            return;\n        }\n        for (const data of filters) {\n            // Handle the case that the filter may either be a function or a filter entry / object.\n            const actualFilter = typeof data === 'function' ? data : data !== null && typeof data === 'object' ?\n                data.filter : void 0;\n            if (!actualFilter) {\n                continue;\n            }\n            for (let cntr = this.#filtersData.filters.length; --cntr >= 0;) {\n                if (this.#filtersData.filters[cntr].filter === actualFilter) {\n                    this.#filtersData.filters.splice(cntr, 1);\n                    // Invoke any unsubscribe function for given filter then remove from tracking.\n                    let unsubscribe = void 0;\n                    if (typeof (unsubscribe = this.#mapUnsubscribe.get(actualFilter)) === 'function') {\n                        unsubscribe();\n                        this.#mapUnsubscribe.delete(actualFilter);\n                    }\n                }\n            }\n        }\n        // Update the index a filter was removed.\n        if (length !== this.#filtersData.filters.length) {\n            this.#indexUpdate();\n        }\n    }\n    /**\n     * Remove filters by the provided callback. The callback takes 3 parameters: `id`, `filter`, and `weight`.\n     * Any truthy value returned will remove that filter.\n     *\n     * @param callback - Callback function to evaluate each filter entry.\n     */\n    removeBy(callback) {\n        const length = this.#filtersData.filters.length;\n        if (length === 0) {\n            return;\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(`AdapterFilters error: 'callback' is not a function.`);\n        }\n        this.#filtersData.filters = this.#filtersData.filters.filter((data) => {\n            const remove = callback.call(callback, { ...data });\n            if (remove) {\n                let unsubscribe;\n                if (typeof (unsubscribe = this.#mapUnsubscribe.get(data.filter)) === 'function') {\n                    unsubscribe();\n                    this.#mapUnsubscribe.delete(data.filter);\n                }\n            }\n            // Reverse remove boolean to properly filter / remove this filter.\n            return !remove;\n        });\n        if (length !== this.#filtersData.filters.length) {\n            this.#indexUpdate();\n        }\n    }\n    /**\n     * @param ids - Removes filters by ID.\n     */\n    removeById(...ids) {\n        const length = this.#filtersData.filters.length;\n        if (length === 0) {\n            return;\n        }\n        this.#filtersData.filters = this.#filtersData.filters.filter((data) => {\n            let remove = 0;\n            for (const id of ids) {\n                remove |= (data.id === id ? 1 : 0);\n            }\n            // If not keeping invoke any unsubscribe function for given filter then remove from tracking.\n            if (!!remove) {\n                let unsubscribe;\n                if (typeof (unsubscribe = this.#mapUnsubscribe.get(data.filter)) === 'function') {\n                    unsubscribe();\n                    this.#mapUnsubscribe.delete(data.filter);\n                }\n            }\n            return !remove; // Swap here to actually remove the item via array filter method.\n        });\n        if (length !== this.#filtersData.filters.length) {\n            this.#indexUpdate();\n        }\n    }\n}\n\n/**\n * Provides construction and management of indexed data when there are parent indexes or filter / sort functions\n * applied.\n */\nclass AdapterIndexer {\n    derivedAdapter;\n    filtersData;\n    hostData;\n    hostUpdate;\n    indexData;\n    sortData;\n    sortFn;\n    destroyed = false;\n    /**\n     * @param hostData - Hosted data structure.\n     *\n     * @param hostUpdate - Host update function invoked on index updates.\n     *\n     * @param [parentIndexer] - Any associated parent index API.\n     *\n     * @returns Indexer adapter instance.\n     */\n    constructor(hostData, hostUpdate, parentIndexer) {\n        this.hostData = hostData;\n        this.hostUpdate = hostUpdate;\n        this.indexData = { index: null, hash: null, reversed: false, parent: parentIndexer };\n    }\n    /**\n     * @returns Returns whether the index is active.\n     */\n    get active() {\n        return this.filtersData.filters.length > 0 || this.sortData.compareFn !== null ||\n            this.indexData.parent?.active === true;\n    }\n    /**\n     * @returns Returns length of reduced index.\n     */\n    get length() {\n        return this.indexData.index ? this.indexData.index.length : 0;\n    }\n    /* c8 ignore start */\n    /**\n     * @returns Returns reversed state.\n     */\n    get reversed() { return this.indexData.reversed; }\n    /* c8 ignore end */\n    /**\n     * @param reversed - New reversed state.\n     */\n    set reversed(reversed) { this.indexData.reversed = reversed; }\n    // -------------------------------------------------------------------------------------------------------------------\n    /**\n     * Calculates a new hash value for the new index array if any. If the new index array is null then the hash value\n     * is set to null. Set calculated new hash value to the index adapter hash value.\n     *\n     * After hash generation compare old and new hash values and perform an update if they are different. If they are\n     * equal check for array equality between the old and new index array and perform an update if they are not equal.\n     *\n     * @param oldIndex - Old index array.\n     *\n     * @param oldHash - Old index hash value.\n     *\n     * @param [force=false] - When true forces an update to subscribers.\n     */\n    calcHashUpdate(oldIndex, oldHash, force = false) {\n        // Use force if a boolean otherwise default to false.\n        const actualForce = typeof force === 'boolean' ? force : /* c8 ignore next */ false;\n        let newHash = null;\n        const newIndex = this.indexData.index;\n        if (newIndex) {\n            for (let cntr = newIndex.length; --cntr >= 0;) {\n                newHash ^= DynReducerUtils.hashUnknown(newIndex[cntr]) + 0x9e3779b9 + (newHash << 6) + (newHash >> 2);\n            }\n        }\n        this.indexData.hash = newHash;\n        if (actualForce || (oldHash === newHash ? !DynReducerUtils.arrayEquals(oldIndex, newIndex) : true)) {\n            this.hostUpdate();\n        }\n    }\n    /**\n     * Destroys all resources.\n     */\n    destroy() {\n        if (this.destroyed) {\n            return;\n        }\n        this.indexData.index = null;\n        this.indexData.hash = null;\n        this.indexData.reversed = null;\n        this.indexData.parent = null;\n        this.destroyed = true;\n    }\n    /**\n     * Store associated filter and sort data that are constructed after the indexer.\n     *\n     * @param filtersData - Associated AdapterFilters instance.\n     *\n     * @param sortData - Associated AdapterSort instance.\n     *\n     * @param derivedAdapter - Associated AdapterDerived instance.\n     */\n    initAdapters(filtersData, sortData, derivedAdapter) {\n        this.filtersData = filtersData;\n        this.sortData = sortData;\n        this.derivedAdapter = derivedAdapter;\n        this.sortFn = this.createSortFn();\n    }\n}\n\n/**\n * Provides the storage and sequencing of a managed sort function. The sort function set may be a bespoke function or a\n * {@link DynDataSort} object containing an `compare`, and `subscribe` attributes; `compare` is the only required\n * attribute.\n *\n * Note: You can set a compare function that also has a subscribe function attached as the `subscribe` attribute.\n * If a subscribe function is provided the sort function can notify any updates that may change sort order and this\n * triggers an index update.\n *\n * This class forms the public API which is accessible from the `.sort` getter in the main reducer implementation.\n * ```\n * const dynArray = new DynArrayReducer([...]);\n * dynArray.sort.clear();\n * dynArray.sort.set(...);\n * ```\n */\nclass AdapterSort {\n    #sortData;\n    #indexUpdate;\n    #unsubscribe;\n    /**\n     * @param indexUpdate - Function to update indexer.\n     *\n     * @param sortData - Storage for compare function.\n     */\n    constructor(indexUpdate, sortData) {\n        this.#indexUpdate = indexUpdate;\n        this.#sortData = sortData;\n        Object.freeze(this);\n    }\n    /**\n     * Clears & removes any assigned sort function and triggers an index update.\n     */\n    clear() {\n        const oldCompareFn = this.#sortData.compareFn;\n        this.#sortData.compareFn = null;\n        if (typeof this.#unsubscribe === 'function') {\n            this.#unsubscribe();\n            this.#unsubscribe = void 0;\n        }\n        // Only update index if an old compare function is set.\n        if (typeof oldCompareFn === 'function') {\n            this.#indexUpdate();\n        }\n    }\n    /**\n     * @param data - A callback function that compares two values. Return > 0 to sort b before a;\n     * < 0 to sort a before b; or 0 to keep original order of a & b.\n     *\n     * Note: You can set a compare function that also has a subscribe function attached as the `subscribe` attribute.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#parameters\n     */\n    set(data) {\n        if (typeof this.#unsubscribe === 'function') {\n            this.#unsubscribe();\n            this.#unsubscribe = void 0;\n        }\n        let compareFn = void 0;\n        let subscribeFn = void 0;\n        switch (typeof data) {\n            case 'function':\n                compareFn = data;\n                subscribeFn = data.subscribe;\n                break;\n            case 'object':\n                // Early out if data is null / noop.\n                if (data === null) {\n                    break;\n                }\n                if (typeof data.compare !== 'function') {\n                    throw new TypeError(`AdapterSort error: 'compare' attribute is not a function.`);\n                }\n                compareFn = data.compare;\n                subscribeFn = data.compare.subscribe ?? data.subscribe;\n                break;\n        }\n        if (typeof compareFn === 'function') {\n            this.#sortData.compareFn = compareFn;\n        }\n        else {\n            const oldCompareFn = this.#sortData.compareFn;\n            this.#sortData.compareFn = null;\n            // Update index if the old compare function exists.\n            if (typeof oldCompareFn === 'function') {\n                this.#indexUpdate();\n            }\n            return;\n        }\n        if (typeof subscribeFn === 'function') {\n            this.#unsubscribe = subscribeFn(this.#indexUpdate);\n            // Ensure that unsubscribe is a function.\n            if (typeof this.#unsubscribe !== 'function') {\n                throw new Error(`AdapterSort error: sort has 'subscribe' function, but no 'unsubscribe' function is returned.`);\n            }\n        }\n        else {\n            // A sort function with subscriber functionality are assumed to immediately invoke the `subscribe` callback.\n            // Only manually update the index if there is no subscriber functionality.\n            this.#indexUpdate();\n        }\n    }\n}\n\n/**\n * Provides the public API for accessing the index API.\n *\n * This class forms the public API which is accessible from the `.index` getter in the main reducer implementation.\n * ```\n * const dynArray = new DynArrayReducer([...]);\n * dynArray.index.active;\n * dynArray.index.hash;\n * dynArray.index.length;\n * dynArray.index.update(...);\n * ```\n */\nclass IndexerAPI {\n    #indexData;\n    /**\n     * Provides a getter to determine if the index is active.\n     */\n    active;\n    /**\n     * Provides length of reduced / indexed elements.\n     */\n    length;\n    /**\n     * Manually invoke an update of the index.\n     *\n     * @param force - Force update to any subscribers.\n     */\n    update;\n    constructor(adapterIndexer) {\n        this.#indexData = adapterIndexer.indexData;\n        this.update = adapterIndexer.update.bind(adapterIndexer);\n        // Defines getters on the public API to get the index hash, active state, and index length.\n        Object.defineProperties(this, {\n            active: { get: () => adapterIndexer.active },\n            length: { get: () => adapterIndexer.length }\n        });\n        Object.freeze(this);\n    }\n    /**\n     * - Current hash value of the index.\n     */\n    get hash() {\n        return this.#indexData.hash;\n    }\n    /**\n     * Provides an iterator over the index array.\n     *\n     * @yields {K}\n     */\n    *[Symbol.iterator]() {\n        const indexData = this.#indexData;\n        if (!indexData.index) {\n            return;\n        }\n        const reversed = indexData.reversed;\n        const length = indexData.index.length;\n        if (reversed) {\n            for (let cntr = length; --cntr >= 0;) {\n                yield indexData.index[cntr];\n            }\n        }\n        else {\n            for (let cntr = 0; cntr < length; cntr++) {\n                yield indexData.index[cntr];\n            }\n        }\n    }\n}\n\n/**\n * Provides the public API for derived reducers. There are several ways to create a derived reducer from utilizing the\n * default implementation or passing in a constructor function / class for a custom derived reducer.\n *\n * This class forms the public API which is accessible from the `.derived` getter in the main reducer implementation.\n * ```\n * const dynArray = new DynArrayReducer([...]);\n * dynArray.derived.clear();\n * dynArray.derived.create(...);\n * dynArray.derived.delete(...);\n * dynArray.derived.destroy();\n * dynArray.derived.get(...);\n * ```\n */\nclass DerivedAPI {\n    /**\n     * Removes all derived reducers and associated subscriptions.\n     */\n    clear;\n    /**\n     * @param options - Options for creating a reducer.\n     *\n     * @returns Newly created derived reducer.\n     */\n    create;\n    /**\n     * Deletes and destroys a derived reducer.\n     *\n     * @param name - Name of the derived reducer\n     */\n    delete;\n    /**\n     * Removes all derived reducers, associated subscriptions, and cleans up all resources.\n     */\n    destroy;\n    /**\n     * Returns an existing derived reducer.\n     *\n     * @param name - Name of derived reducer.\n     */\n    get;\n    constructor(adapterDerived) {\n        this.clear = adapterDerived.clear.bind(adapterDerived);\n        this.create = adapterDerived.create.bind(adapterDerived);\n        this.delete = adapterDerived.delete.bind(adapterDerived);\n        this.destroy = adapterDerived.destroy.bind(adapterDerived);\n        this.get = adapterDerived.get.bind(adapterDerived);\n        Object.freeze(this);\n    }\n}\n\n/**\n */\nlet Indexer$1 = class Indexer extends AdapterIndexer {\n    /**\n     * @inheritDoc\n     */\n    createSortFn() {\n        return (a, b) => this.sortData.compareFn(this.hostData[0][a], this.hostData[0][b]);\n    }\n    /**\n     * Provides the custom filter / reduce step that is ~25-40% faster than implementing with `Array.reduce`.\n     *\n     * Note: Other loop unrolling techniques like Duff's Device gave a slight faster lower bound on large data sets,\n     * but the maintenance factor is not worth the extra complication.\n     *\n     * @returns New filtered index array.\n     */\n    reduceImpl() {\n        const data = [];\n        const array = this.hostData[0];\n        if (!array) {\n            return data;\n        }\n        const filters = this.filtersData.filters;\n        let include = true;\n        const parentIndex = this.indexData.parent;\n        // Source index data is coming from an active parent index.\n        if (DynReducerUtils.isIterable(parentIndex) && parentIndex.active) {\n            for (const adjustedIndex of parentIndex) {\n                const value = array[adjustedIndex];\n                include = true;\n                for (let filCntr = 0, filLength = filters.length; filCntr < filLength; filCntr++) {\n                    if (!filters[filCntr].filter(value)) {\n                        include = false;\n                        break;\n                    }\n                }\n                if (include) {\n                    data.push(adjustedIndex);\n                }\n            }\n        }\n        else {\n            for (let cntr = 0, length = array.length; cntr < length; cntr++) {\n                include = true;\n                for (let filCntr = 0, filLength = filters.length; filCntr < filLength; filCntr++) {\n                    if (!filters[filCntr].filter(array[cntr])) {\n                        include = false;\n                        break;\n                    }\n                }\n                if (include) {\n                    data.push(cntr);\n                }\n            }\n        }\n        return data;\n    }\n    /**\n     * Update the reducer indexes. If there are changes subscribers are notified. If data order is changed externally\n     * pass in true to force an update to subscribers.\n     *\n     * @param [force=false] - When true forces an update to subscribers.\n     */\n    update(force = false) {\n        if (this.destroyed) {\n            return;\n        }\n        const oldIndex = this.indexData.index;\n        const oldHash = this.indexData.hash;\n        const array = this.hostData[0];\n        const parentIndex = this.indexData.parent;\n        // Clear index if there are no filters and no sort function or the index length doesn't match the item length.\n        if ((this.filtersData.filters.length === 0 && !this.sortData.compareFn) ||\n            (this.indexData.index && array?.length !== this.indexData.index.length)) {\n            this.indexData.index = null;\n        }\n        // If there are filters build new index.\n        if (this.filtersData.filters.length > 0) {\n            this.indexData.index = this.reduceImpl();\n        }\n        // If the index isn't built yet and there is an active parent index then create it from the parent.\n        if (!this.indexData.index && parentIndex?.active) {\n            this.indexData.index = [...parentIndex];\n        }\n        if (this.sortData.compareFn && Array.isArray(array)) {\n            // If there is no index then create one with keys matching host item length.\n            if (!this.indexData.index) {\n                this.indexData.index = [...Array(array.length).keys()];\n            }\n            this.indexData.index.sort(this.sortFn);\n        }\n        this.calcHashUpdate(oldIndex, oldHash, force);\n        // Update all derived reducers.\n        this.derivedAdapter?.update(force);\n    }\n};\n\n/**\n * Provides the base implementation derived reducer for arrays / DynArrayReducer.\n */\nclass DynArrayReducerDerived {\n    #array;\n    #derived;\n    #derivedPublicAPI;\n    #filters;\n    #filtersData = { filters: [] };\n    #index;\n    #indexPublicAPI;\n    #reversed = false;\n    #sort;\n    #sortData = { compareFn: null };\n    #subscriptions = [];\n    #destroyed = false;\n    /**\n     * @param array - Data host array.\n     *\n     * @param parentIndex - Parent indexer.\n     *\n     * @param options - Any filters and sort functions to apply.\n     */\n    constructor(array, parentIndex, options) {\n        this.#array = array;\n        this.#index = new Indexer$1(this.#array, this.#updateSubscribers.bind(this), parentIndex);\n        this.#indexPublicAPI = new IndexerAPI(this.#index);\n        this.#filters = new AdapterFilters(this.#indexPublicAPI.update, this.#filtersData);\n        this.#sort = new AdapterSort(this.#indexPublicAPI.update, this.#sortData);\n        this.#derived = new AdapterDerived(this.#array, this.#indexPublicAPI, DynArrayReducerDerived);\n        this.#derivedPublicAPI = new DerivedAPI(this.#derived);\n        this.#index.initAdapters(this.#filtersData, this.#sortData, this.#derived);\n        let filters = void 0;\n        let sort = void 0;\n        if (options !== void 0 && ('filters' in options || 'sort' in options)) {\n            if (options.filters !== void 0) {\n                if (DynReducerUtils.isIterable(options.filters)) {\n                    filters = options.filters;\n                }\n                else {\n                    throw new TypeError(`DerivedArrayReducer error (DataDerivedOptions): 'filters' attribute is not iterable.`);\n                }\n            }\n            if (options.sort !== void 0) {\n                if (typeof options.sort === 'function') {\n                    sort = options.sort;\n                }\n                else if (typeof options.sort === 'object' && options.sort !== null) {\n                    sort = options.sort;\n                }\n                else {\n                    throw new TypeError(`DerivedArrayReducer error (DataDerivedOptions): 'sort' attribute is not a function or object.`);\n                }\n            }\n        }\n        // Add any filters and sort function defined by DataDynArray.\n        if (filters) {\n            this.filters.add(...filters);\n        }\n        if (sort) {\n            this.sort.set(sort);\n        }\n        // Invoke an custom initialization for child classes.\n        this.initialize();\n    }\n    /**\n     * Returns the internal data of this instance. Be careful!\n     *\n     * Note: if an array is set as initial data then that array is used as the internal data. If any changes are\n     * performed to the data externally do invoke {@link IndexerAPI.update} with `true` to recalculate the index and\n     * notify all subscribers.\n     *\n     * @returns The internal data.\n     */\n    get data() { return this.#array[0]; }\n    /**\n     * @returns Derived public API.\n     */\n    get derived() { return this.#derivedPublicAPI; }\n    /**\n     * @returns The filters adapter.\n     */\n    get filters() { return this.#filters; }\n    /**\n     * Returns the Indexer public API.\n     *\n     * @returns Indexer API - is also iterable.\n     */\n    get index() { return this.#indexPublicAPI; }\n    /**\n     * Returns whether this derived reducer is destroyed.\n     */\n    get destroyed() { return this.#destroyed; }\n    /**\n     * @returns Main data / items length or indexed length.\n     */\n    get length() {\n        const array = this.#array[0];\n        return this.#index.active ? this.index.length :\n            array ? array.length : 0;\n    }\n    /**\n     * @returns Gets current reversed state.\n     */\n    get reversed() { return this.#reversed; }\n    /**\n     * @returns The sort adapter.\n     */\n    get sort() { return this.#sort; }\n    /**\n     * Sets reversed state and notifies subscribers.\n     *\n     * @param reversed - New reversed state.\n     */\n    set reversed(reversed) {\n        if (typeof reversed !== 'boolean') {\n            throw new TypeError(`DerivedArrayReducer.reversed error: 'reversed' is not a boolean.`);\n        }\n        this.#reversed = reversed;\n        this.#index.reversed = reversed;\n        // Recalculate index and force an update to any subscribers.\n        this.index.update(true);\n    }\n    /**\n     * Removes all derived reducers, subscriptions, and cleans up all resources.\n     */\n    destroy() {\n        this.#destroyed = true;\n        // Remove any external data reference and perform a final update.\n        this.#array = [null];\n        this.#index.update(true);\n        // Remove all subscriptions.\n        this.#subscriptions.length = 0;\n        this.#derived.destroy();\n        this.#index.destroy();\n        this.#filters.clear();\n        this.#sort.clear();\n    }\n    /**\n     * Provides a callback for custom derived reducers to initialize any data / custom configuration. This allows\n     * child classes to avoid implementing the constructor.\n     *\n     * @protected\n     */\n    initialize() { }\n    /**\n     * Provides an iterator for data stored in DerivedArrayReducer.\n     *\n     * @yields {T}\n     */\n    *[Symbol.iterator]() {\n        const array = this.#array[0];\n        if (this.#destroyed || array === null || array?.length === 0) {\n            return;\n        }\n        if (this.#index.active) {\n            for (const entry of this.index) {\n                yield array[entry];\n            }\n        }\n        else {\n            if (this.reversed) {\n                for (let cntr = array.length; --cntr >= 0;) {\n                    yield array[cntr];\n                }\n            }\n            else {\n                for (let cntr = 0; cntr < array.length; cntr++) {\n                    yield array[cntr];\n                }\n            }\n        }\n    }\n    // -------------------------------------------------------------------------------------------------------------------\n    /**\n     * Subscribe to this DerivedArrayReducer.\n     *\n     * @param handler - Callback function that is invoked on update / changes. Receives `this` reference.\n     *\n     * @returns Unsubscribe function.\n     */\n    subscribe(handler) {\n        this.#subscriptions.push(handler); // add handler to the array of subscribers\n        handler(this); // call handler with current value\n        // Return unsubscribe function.\n        return () => {\n            const index = this.#subscriptions.findIndex((sub) => sub === handler);\n            if (index >= 0) {\n                this.#subscriptions.splice(index, 1);\n            }\n        };\n    }\n    /**\n     * Updates subscribers on changes.\n     */\n    #updateSubscribers() {\n        for (let cntr = 0; cntr < this.#subscriptions.length; cntr++) {\n            this.#subscriptions[cntr](this);\n        }\n    }\n}\n\n/**\n * Provides a managed array with non-destructive reducing / filtering / sorting capabilities with subscription /\n * Svelte store support.\n */\nclass DynArrayReducer {\n    #array = [null];\n    #derived;\n    #derivedPublicAPI;\n    #filters;\n    #filtersData = { filters: [] };\n    #index;\n    #indexPublicAPI;\n    #reversed = false;\n    #sort;\n    #sortData = { compareFn: null };\n    #subscriptions = [];\n    #destroyed = false;\n    /**\n     * Initializes DynArrayReducer. Any iterable is supported for initial data. Take note that if `data` is an array it\n     * will be used as the host array and not copied. All non-array iterables otherwise create a new array / copy.\n     *\n     * @param [data] - Data iterable to store if array or copy otherwise.\n     */\n    constructor(data) {\n        let dataIterable = void 0;\n        let filters = void 0;\n        let sort = void 0;\n        if (data === null) {\n            throw new TypeError(`DynArrayReducer error: 'data' is not iterable.`);\n        }\n        if (data !== void 0 && typeof data !== 'object' && !DynReducerUtils.isIterable(data)) {\n            throw new TypeError(`DynArrayReducer error: 'data' is not iterable.`);\n        }\n        if (data !== void 0 && Symbol.iterator in data) {\n            dataIterable = data;\n        }\n        else if (data !== void 0 && ('data' in data || 'filters' in data || 'sort' in data)) {\n            if (data.data !== void 0 && !DynReducerUtils.isIterable(data.data)) {\n                throw new TypeError(`DynArrayReducer error (DataDynArray): 'data' attribute is not iterable.`);\n            }\n            dataIterable = data.data;\n            if (data.filters !== void 0) {\n                if (DynReducerUtils.isIterable(data.filters)) {\n                    filters = data.filters;\n                }\n                else {\n                    throw new TypeError(`DynArrayReducer error (DataDynArray): 'filters' attribute is not iterable.`);\n                }\n            }\n            if (data.sort !== void 0) {\n                if (typeof data.sort === 'function') {\n                    sort = data.sort;\n                }\n                else if (typeof data.sort === 'object' && data.sort !== null) {\n                    sort = data.sort;\n                }\n                else {\n                    throw new TypeError(`DynArrayReducer error (DataDynArray): 'sort' attribute is not a function or object.`);\n                }\n            }\n        }\n        // In the case of the main data being an array directly use the array otherwise create a copy.\n        if (dataIterable) {\n            this.#array[0] = Array.isArray(dataIterable) ? dataIterable : [...dataIterable];\n        }\n        this.#index = new Indexer$1(this.#array, this.#updateSubscribers.bind(this));\n        this.#indexPublicAPI = new IndexerAPI(this.#index);\n        this.#filters = new AdapterFilters(this.#indexPublicAPI.update, this.#filtersData);\n        this.#sort = new AdapterSort(this.#indexPublicAPI.update, this.#sortData);\n        this.#derived = new AdapterDerived(this.#array, this.#indexPublicAPI, DynArrayReducerDerived);\n        this.#derivedPublicAPI = new DerivedAPI(this.#derived);\n        this.#index.initAdapters(this.#filtersData, this.#sortData, this.#derived);\n        // Add any filters and sort function defined by DataDynArray.\n        if (filters) {\n            this.filters.add(...filters);\n        }\n        if (sort) {\n            this.sort.set(sort);\n        }\n        // Invoke an custom initialization for child classes.\n        this.initialize();\n    }\n    /**\n     * Returns the internal data of this instance. Be careful!\n     *\n     * Note: if an array is set as initial data then that array is used as the internal data. If any changes are\n     * performed to the data externally do invoke {@link AdapterIndexer.index.update} with `true` to recalculate the\n     * index and notify all subscribers.\n     *\n     * @returns The internal data.\n     */\n    get data() { return this.#array[0]; }\n    /**\n     * @returns Derived public API.\n     */\n    get derived() { return this.#derivedPublicAPI; }\n    /**\n     * @returns The filters adapter.\n     */\n    get filters() { return this.#filters; }\n    /**\n     * @returns Returns the Indexer public API.\n     */\n    get index() { return this.#indexPublicAPI; }\n    /**\n     * Returns whether this instance is destroyed.\n     */\n    get destroyed() { return this.#destroyed; }\n    /**\n     * Gets the main data / items length.\n     *\n     * @returns {number} Main data / items length.\n     */\n    get length() {\n        const array = this.#array[0];\n        return this.#index.active ? this.#indexPublicAPI.length :\n            array ? array.length : 0;\n    }\n    /**\n     * Gets current reversed state.\n     *\n     * @returns {boolean} Reversed state.\n     */\n    get reversed() { return this.#reversed; }\n    /**\n     * @returns The sort adapter.\n     */\n    get sort() { return this.#sort; }\n    /**\n     * Sets reversed state and notifies subscribers.\n     *\n     * @param reversed - New reversed state.\n     */\n    set reversed(reversed) {\n        if (typeof reversed !== 'boolean') {\n            throw new TypeError(`DynArrayReducer.reversed error: 'reversed' is not a boolean.`);\n        }\n        this.#reversed = reversed;\n        this.#index.reversed = reversed;\n        // Recalculate index and force an update to any subscribers.\n        this.index.update(true);\n    }\n    /**\n     * Removes all derived reducers, subscriptions, and cleans up all resources.\n     */\n    destroy() {\n        if (this.#destroyed) {\n            return;\n        }\n        this.#destroyed = true;\n        this.#derived.destroy();\n        // Set the backing data to null and provide a final update.\n        this.#array = [null];\n        this.index.update(true);\n        // Remove all subscriptions.\n        this.#subscriptions.length = 0;\n        this.#index.destroy();\n        this.#filters.clear();\n        this.#sort.clear();\n    }\n    /**\n     * Provides a callback for custom reducers to initialize any data / custom configuration. This allows\n     * child classes to avoid implementing the constructor.\n     *\n     * @protected\n     */\n    initialize() { }\n    /**\n     * Removes internal data and pushes new data. This does not destroy any initial array set to internal data unless\n     * `replace` is set to true.\n     *\n     * @param data - New data to set to internal data.\n     *\n     * @param replace=false - New data to set to internal data.\n     */\n    setData(data, replace = false) {\n        if (data !== null && !DynReducerUtils.isIterable(data)) {\n            throw new TypeError(`DynArrayReducer.setData error: 'data' is not iterable.`);\n        }\n        if (typeof replace !== 'boolean') {\n            throw new TypeError(`DynArrayReducer.setData error: 'replace' is not a boolean.`);\n        }\n        const array = this.#array[0];\n        // If the array isn't defined or 'replace' is true then replace internal data with new array or create an array\n        // from an iterable.\n        if (!Array.isArray(array) || replace) {\n            if (data) {\n                this.#array[0] = Array.isArray(data) ? data : [...data];\n            }\n        }\n        else {\n            if (data) {\n                // Remove all entries in internal data. This will not replace any initially set array.\n                array.length = 0;\n                // Add all new data.\n                array.push(...data);\n            }\n            else {\n                this.#array[0] = null;\n            }\n        }\n        // Recalculate index and force an update to any subscribers.\n        this.index.update(true);\n    }\n    /**\n     * Add a subscriber to this DynArrayReducer instance.\n     *\n     * @param handler - Callback function that is invoked on update / changes. Receives `this` reference.\n     *\n     * @returns Unsubscribe function.\n     */\n    subscribe(handler) {\n        this.#subscriptions.push(handler); // add handler to the array of subscribers\n        handler(this); // call handler with current value\n        // Return unsubscribe function.\n        return () => {\n            const index = this.#subscriptions.findIndex((sub) => sub === handler);\n            if (index >= 0) {\n                this.#subscriptions.splice(index, 1);\n            }\n        };\n    }\n    /**\n     * Updates subscribers on changes.\n     */\n    #updateSubscribers() {\n        for (let cntr = 0; cntr < this.#subscriptions.length; cntr++) {\n            this.#subscriptions[cntr](this);\n        }\n    }\n    /**\n     * Provides an iterator for data stored in DynArrayReducer.\n     *\n     * @yields {T}\n     */\n    *[Symbol.iterator]() {\n        const array = this.#array[0];\n        if (this.#destroyed || array === null || array?.length === 0) {\n            return;\n        }\n        if (this.#index.active) {\n            for (const entry of this.index) {\n                yield array[entry];\n            }\n        }\n        else {\n            if (this.reversed) {\n                for (let cntr = array.length; --cntr >= 0;) {\n                    yield array[cntr];\n                }\n            }\n            else {\n                for (let cntr = 0; cntr < array.length; cntr++) {\n                    yield array[cntr];\n                }\n            }\n        }\n    }\n}\n\n/**\n */\nclass Indexer extends AdapterIndexer {\n    /**\n     * @inheritDoc\n     */\n    createSortFn() {\n        return (a, b) => this.sortData.compareFn(this.hostData[0].get(a), this.hostData[0].get(b));\n    }\n    /**\n     * Provides the custom filter / reduce step that is ~25-40% faster than implementing with `Array.reduce`.\n     *\n     * Note: Other loop unrolling techniques like Duff's Device gave a slight faster lower bound on large data sets,\n     * but the maintenance factor is not worth the extra complication.\n     *\n     * @returns New filtered index array.\n     */\n    reduceImpl() {\n        const data = [];\n        const map = this.hostData[0];\n        if (!map) {\n            return data;\n        }\n        const filters = this.filtersData.filters;\n        let include = true;\n        const parentIndex = this.indexData.parent;\n        // Source index data is coming from an active parent index.\n        if (DynReducerUtils.isIterable(parentIndex) && parentIndex.active) {\n            for (const key of parentIndex) {\n                const value = map.get(key);\n                include = true;\n                for (let filCntr = 0, filLength = filters.length; filCntr < filLength; filCntr++) {\n                    if (!filters[filCntr].filter(value)) {\n                        include = false;\n                        break;\n                    }\n                }\n                if (include) {\n                    data.push(key);\n                }\n            }\n        }\n        else {\n            for (const key of map.keys()) {\n                include = true;\n                const value = map.get(key);\n                for (let filCntr = 0, filLength = filters.length; filCntr < filLength; filCntr++) {\n                    if (!filters[filCntr].filter(value)) {\n                        include = false;\n                        break;\n                    }\n                }\n                if (include) {\n                    data.push(key);\n                }\n            }\n        }\n        return data;\n    }\n    /**\n     * Update the reducer indexes. If there are changes subscribers are notified. If data order is changed externally\n     * pass in true to force an update to subscribers.\n     *\n     * @param [force=false] - When true forces an update to subscribers.\n     */\n    update(force = false) {\n        if (this.destroyed) {\n            return;\n        }\n        const oldIndex = this.indexData.index;\n        const oldHash = this.indexData.hash;\n        const map = this.hostData[0];\n        const parentIndex = this.indexData.parent;\n        // Clear index if there are no filters and no sort function or the index length doesn't match the item length.\n        if ((this.filtersData.filters.length === 0 && !this.sortData.compareFn) ||\n            (this.indexData.index && map?.size !== this.indexData.index.length)) {\n            this.indexData.index = null;\n        }\n        // If there are filters build new index.\n        if (this.filtersData.filters.length > 0) {\n            this.indexData.index = this.reduceImpl();\n        }\n        // If the index isn't built yet and there is an active parent index then create it from the parent.\n        if (!this.indexData.index && parentIndex?.active) {\n            this.indexData.index = [...parentIndex];\n        }\n        if (this.sortData.compareFn && map instanceof Map) {\n            // If there is no index then create one with keys matching host item length.\n            if (!this.indexData.index) {\n                this.indexData.index = this.indexData.index = [...map.keys()];\n            }\n            this.indexData.index.sort(this.sortFn);\n        }\n        this.calcHashUpdate(oldIndex, oldHash, force);\n        // Update all derived reducers.\n        this.derivedAdapter?.update(force);\n    }\n}\n\n/**\n * Provides the base implementation derived reducer for arrays / DynArrayReducer.\n */\nclass DynMapReducerDerived {\n    #map;\n    #derived;\n    #derivedPublicAPI;\n    #filters;\n    #filtersData = { filters: [] };\n    #index;\n    #indexPublicAPI;\n    #reversed = false;\n    #sort;\n    #sortData = { compareFn: null };\n    #subscriptions = [];\n    #destroyed = false;\n    /**\n     * @param map - Data host Map.\n     *\n     * @param parentIndex - Parent indexer.\n     *\n     * @param options - Any filters and sort functions to apply.\n     */\n    constructor(map, parentIndex, options) {\n        this.#map = map;\n        this.#index = new Indexer(this.#map, this.#updateSubscribers.bind(this), parentIndex);\n        this.#indexPublicAPI = new IndexerAPI(this.#index);\n        this.#filters = new AdapterFilters(this.#indexPublicAPI.update, this.#filtersData);\n        this.#sort = new AdapterSort(this.#indexPublicAPI.update, this.#sortData);\n        this.#derived = new AdapterDerived(this.#map, this.#indexPublicAPI, DynMapReducerDerived);\n        this.#derivedPublicAPI = new DerivedAPI(this.#derived);\n        this.#index.initAdapters(this.#filtersData, this.#sortData, this.#derived);\n        let filters = void 0;\n        let sort = void 0;\n        if (options !== void 0 && ('filters' in options || 'sort' in options)) {\n            if (options.filters !== void 0) {\n                if (DynReducerUtils.isIterable(options.filters)) {\n                    filters = options.filters;\n                }\n                else {\n                    throw new TypeError(`DerivedMapReducer error (DataDerivedOptions): 'filters' attribute is not iterable.`);\n                }\n            }\n            if (options.sort !== void 0) {\n                if (typeof options.sort === 'function') {\n                    sort = options.sort;\n                }\n                else if (typeof options.sort === 'object' && options.sort !== null) {\n                    sort = options.sort;\n                }\n                else {\n                    throw new TypeError(`DerivedMapReducer error (DataDerivedOptions): 'sort' attribute is not a function or object.`);\n                }\n            }\n        }\n        // Add any filters and sort function defined by DataDynArray.\n        if (filters) {\n            this.filters.add(...filters);\n        }\n        if (sort) {\n            this.sort.set(sort);\n        }\n        // Invoke an custom initialization for child classes.\n        this.initialize();\n    }\n    /**\n     * Returns the internal data of this instance. Be careful!\n     *\n     * Note: The returned map is the same map set by the main reducer. If any changes are performed to the data\n     * externally do invoke {@link IndexerAPI.update} with `true` to recalculate the index and notify all subscribers.\n     *\n     * @returns The internal data.\n     */\n    get data() { return this.#map[0]; }\n    /**\n     * @returns Derived public API.\n     */\n    get derived() { return this.#derivedPublicAPI; }\n    /**\n     * @returns The filters adapter.\n     */\n    get filters() { return this.#filters; }\n    /**\n     * Returns the Indexer public API.\n     *\n     * @returns Indexer API - is also iterable.\n     */\n    get index() { return this.#indexPublicAPI; }\n    /**\n     * Returns whether this derived reducer is destroyed.\n     */\n    get destroyed() { return this.#destroyed; }\n    /**\n     * @returns Main data / items length or indexed length.\n     */\n    get length() {\n        const map = this.#map[0];\n        return this.#index.active ? this.index.length :\n            map ? map.size : 0;\n    }\n    /**\n     * @returns Gets current reversed state.\n     */\n    get reversed() { return this.#reversed; }\n    /**\n     * @returns The sort adapter.\n     */\n    get sort() { return this.#sort; }\n    /**\n     * Sets reversed state and notifies subscribers.\n     *\n     * @param reversed - New reversed state.\n     */\n    set reversed(reversed) {\n        if (typeof reversed !== 'boolean') {\n            throw new TypeError(`DerivedMapReducer.reversed error: 'reversed' is not a boolean.`);\n        }\n        this.#reversed = reversed;\n        this.#index.reversed = reversed;\n        // Recalculate index and force an update to any subscribers.\n        this.index.update(true);\n    }\n    /**\n     * Removes all derived reducers, subscriptions, and cleans up all resources.\n     */\n    destroy() {\n        this.#destroyed = true;\n        // Remove any external data reference and perform a final update.\n        this.#map = [null];\n        this.#index.update(true);\n        // Remove all subscriptions.\n        this.#subscriptions.length = 0;\n        this.#derived.destroy();\n        this.#index.destroy();\n        this.#filters.clear();\n        this.#sort.clear();\n    }\n    /**\n     * Provides a callback for custom derived reducers to initialize any data / custom configuration. This allows\n     * child classes to avoid implementing the constructor.\n     *\n     * @protected\n     */\n    initialize() { }\n    /**\n     * Provides an iterator for data stored in DerivedMapReducer.\n     *\n     * @yields {T}\n     */\n    *[Symbol.iterator]() {\n        const map = this.#map[0];\n        if (this.#destroyed || map === null || map?.size === 0) {\n            return;\n        }\n        if (this.#index.active) {\n            for (const key of this.index) {\n                yield map.get(key);\n            }\n        }\n        else {\n            if (this.reversed) {\n                // TODO: Not efficient due to creating temporary values array.\n                const values = [...map.values()];\n                for (let cntr = values.length; --cntr >= 0;) {\n                    yield values[cntr];\n                }\n            }\n            else {\n                for (const value of map.values()) {\n                    yield value;\n                }\n            }\n        }\n    }\n    // -------------------------------------------------------------------------------------------------------------------\n    /**\n     * Subscribe to this DerivedMapReducer.\n     *\n     * @param handler - Callback function that is invoked on update / changes. Receives `this` reference.\n     *\n     * @returns Unsubscribe function.\n     */\n    subscribe(handler) {\n        this.#subscriptions.push(handler); // add handler to the array of subscribers\n        handler(this); // call handler with current value\n        // Return unsubscribe function.\n        return () => {\n            const index = this.#subscriptions.findIndex((sub) => sub === handler);\n            if (index >= 0) {\n                this.#subscriptions.splice(index, 1);\n            }\n        };\n    }\n    /**\n     * Updates subscribers on changes.\n     */\n    #updateSubscribers() {\n        for (let cntr = 0; cntr < this.#subscriptions.length; cntr++) {\n            this.#subscriptions[cntr](this);\n        }\n    }\n}\n\n/**\n * Provides a managed Map with non-destructive reducing / filtering / sorting capabilities with subscription /\n * Svelte store support.\n */\nclass DynMapReducer {\n    #map = [null];\n    #derived;\n    #derivedPublicAPI;\n    #filters;\n    #filtersData = { filters: [] };\n    #index;\n    #indexPublicAPI;\n    #reversed = false;\n    #sort;\n    #sortData = { compareFn: null };\n    #subscriptions = [];\n    #destroyed = false;\n    /**\n     * Initializes DynMapReducer. Any iterable is supported for initial data. Take note that if `data` is an array it\n     * will be used as the host array and not copied. All non-array iterables otherwise create a new array / copy.\n     *\n     * @param [data] - Data iterable to store if array or copy otherwise.\n     */\n    constructor(data) {\n        let dataMap = void 0;\n        let filters = void 0;\n        let sort = void 0;\n        if (data === null) {\n            throw new TypeError(`DynMapReducer error: 'data' is not an object or Map.`);\n        }\n        if (data !== void 0 && typeof data !== 'object' && !(data instanceof Map)) {\n            throw new TypeError(`DynMapReducer error: 'data' is not an object or Map.`);\n        }\n        if (data !== void 0 && data instanceof Map) {\n            dataMap = data;\n        }\n        else if (data !== void 0 && ('data' in data || 'filters' in data || 'sort' in data)) {\n            if (data.data !== void 0 && !(data.data instanceof Map)) {\n                throw new TypeError(`DynMapReducer error (DataDynMap): 'data' attribute is not a Map.`);\n            }\n            dataMap = data.data;\n            if (data.filters !== void 0) {\n                if (DynReducerUtils.isIterable(data.filters)) {\n                    filters = data.filters;\n                }\n                else {\n                    throw new TypeError(`DynMapReducer error (DataDynMap): 'filters' attribute is not iterable.`);\n                }\n            }\n            if (data.sort !== void 0) {\n                if (typeof data.sort === 'function') {\n                    sort = data.sort;\n                }\n                else if (typeof data.sort === 'object' && data.sort !== null) {\n                    sort = data.sort;\n                }\n                else {\n                    throw new TypeError(`DynMapReducer error (DataDynMap): 'sort' attribute is not a function or object.`);\n                }\n            }\n        }\n        // In the case of the main data being an array directly use the array otherwise create a copy.\n        if (dataMap) {\n            this.#map[0] = dataMap;\n        }\n        this.#index = new Indexer(this.#map, this.#updateSubscribers.bind(this));\n        this.#indexPublicAPI = new IndexerAPI(this.#index);\n        this.#filters = new AdapterFilters(this.#indexPublicAPI.update, this.#filtersData);\n        this.#sort = new AdapterSort(this.#indexPublicAPI.update, this.#sortData);\n        this.#derived = new AdapterDerived(this.#map, this.#indexPublicAPI, DynMapReducerDerived);\n        this.#derivedPublicAPI = new DerivedAPI(this.#derived);\n        this.#index.initAdapters(this.#filtersData, this.#sortData, this.#derived);\n        // Add any filters and sort function defined by DataDynMap.\n        if (filters) {\n            this.filters.add(...filters);\n        }\n        if (sort) {\n            this.sort.set(sort);\n        }\n        // Invoke an custom initialization for child classes.\n        this.initialize();\n    }\n    /**\n     * Returns the internal data of this instance. Be careful!\n     *\n     * Note: When a map is set as data then that map is used as the internal data. If any changes are\n     * performed to the data externally do invoke {@link AdapterIndexer.index.update} with `true` to recalculate the\n     * index and notify all subscribers.\n     *\n     * @returns The internal data.\n     */\n    get data() { return this.#map[0]; }\n    /**\n     * @returns Derived public API.\n     */\n    get derived() { return this.#derivedPublicAPI; }\n    /**\n     * @returns The filters adapter.\n     */\n    get filters() { return this.#filters; }\n    /**\n     * @returns Returns the Indexer public API.\n     */\n    get index() { return this.#indexPublicAPI; }\n    /**\n     * Returns whether this instance is destroyed.\n     */\n    get destroyed() { return this.#destroyed; }\n    /**\n     * Gets the main data / items length.\n     *\n     * @returns {number} Main data / items length.\n     */\n    get length() {\n        const map = this.#map[0];\n        return this.#index.active ? this.#indexPublicAPI.length :\n            map ? map.size : 0;\n    }\n    /**\n     * Gets current reversed state.\n     *\n     * @returns {boolean} Reversed state.\n     */\n    get reversed() { return this.#reversed; }\n    /**\n     * @returns The sort adapter.\n     */\n    get sort() { return this.#sort; }\n    /**\n     * Sets reversed state and notifies subscribers.\n     *\n     * @param reversed - New reversed state.\n     */\n    set reversed(reversed) {\n        if (typeof reversed !== 'boolean') {\n            throw new TypeError(`DynMapReducer.reversed error: 'reversed' is not a boolean.`);\n        }\n        this.#reversed = reversed;\n        this.#index.reversed = reversed;\n        // Recalculate index and force an update to any subscribers.\n        this.index.update(true);\n    }\n    /**\n     * Removes all derived reducers, subscriptions, and cleans up all resources.\n     */\n    destroy() {\n        if (this.#destroyed) {\n            return;\n        }\n        this.#destroyed = true;\n        this.#derived.destroy();\n        // Set the backing data to null and provide a final update.\n        this.#map = [null];\n        this.index.update(true);\n        // Remove all subscriptions.\n        this.#subscriptions.length = 0;\n        this.#index.destroy();\n        this.#filters.clear();\n        this.#sort.clear();\n    }\n    /**\n     * Provides a callback for custom reducers to initialize any data / custom configuration. This allows\n     * child classes to avoid implementing the constructor.\n     *\n     * @protected\n     */\n    initialize() { }\n    /**\n     * Removes internal data and pushes new data. This does not destroy any initial array set to internal data unless\n     * `replace` is set to true.\n     *\n     * @param data - New data to set to internal data.\n     *\n     * @param replace=false - New data to set to internal data.\n     */\n    setData(data, replace = false) {\n        if (data !== null && !(data instanceof Map)) {\n            throw new TypeError(`DynMapReducer.setData error: 'data' is not iterable.`);\n        }\n        if (typeof replace !== 'boolean') {\n            throw new TypeError(`DynMapReducer.setData error: 'replace' is not a boolean.`);\n        }\n        const map = this.#map[0];\n        // If the array isn't defined or 'replace' is true then replace internal data with new array or create an array\n        // from an iterable.\n        if (!(map instanceof Map) || replace) {\n            this.#map[0] = data instanceof Map ? data : null;\n        }\n        else if (data instanceof Map && map instanceof Map) {\n            // Create a set of all current entry IDs.\n            const removeKeySet = new Set(map.keys());\n            for (const key of data.keys()) {\n                map.set(key, data.get(key));\n                if (removeKeySet.has(key)) {\n                    removeKeySet.delete(key);\n                }\n            }\n            // Remove entries that are no longer in data.\n            for (const key of removeKeySet) {\n                map.delete(key);\n            }\n        }\n        else if (data === null) {\n            this.#map[0] = null;\n        }\n        // Recalculate index and force an update to any subscribers.\n        this.index.update(true);\n    }\n    /**\n     * Add a subscriber to this DynMapReducer instance.\n     *\n     * @param handler - Callback function that is invoked on update / changes. Receives `this` reference.\n     *\n     * @returns Unsubscribe function.\n     */\n    subscribe(handler) {\n        this.#subscriptions.push(handler); // add handler to the array of subscribers\n        handler(this); // call handler with current value\n        // Return unsubscribe function.\n        return () => {\n            const index = this.#subscriptions.findIndex((sub) => sub === handler);\n            if (index >= 0) {\n                this.#subscriptions.splice(index, 1);\n            }\n        };\n    }\n    /**\n     * Updates subscribers on changes.\n     */\n    #updateSubscribers() {\n        for (let cntr = 0; cntr < this.#subscriptions.length; cntr++) {\n            this.#subscriptions[cntr](this);\n        }\n    }\n    /**\n     * Provides an iterator for data stored in DynMapReducer.\n     *\n     * @yields {T}\n     */\n    *[Symbol.iterator]() {\n        const map = this.#map[0];\n        if (this.#destroyed || map === null || map?.size === 0) {\n            return;\n        }\n        if (this.#index.active) {\n            for (const key of this.index) {\n                yield map.get(key);\n            }\n        }\n        else {\n            if (this.reversed) {\n                // TODO: Not efficient due to creating temporary values array.\n                const values = [...map.values()];\n                for (let cntr = values.length; --cntr >= 0;) {\n                    yield values[cntr];\n                }\n            }\n            else {\n                for (const value of map.values()) {\n                    yield value;\n                }\n            }\n        }\n    }\n}\n\n/**\n * Creates a filter function to compare objects by a give property key against a regex test. The returned function\n * is also a writable Svelte store that builds a regex from the stores value.\n *\n * This filter function can be used w/ a dynamic reducer and bound as a store to input elements.\n *\n * @param {string|Iterable<string>}   accessors - Property key / accessors to lookup key to compare. To access deeper\n *        entries into the object format the accessor string with `.` between entries to walk.\n *\n * @param {object}   [opts] - Optional parameters.\n *\n * @param {boolean}  [opts.accessWarn=false] - When true warnings will be posted if accessor not retrieved.\n  *\n * @param {boolean}  [opts.caseSensitive=false] - When true regex test is case-sensitive.\n *\n * @param {import('svelte/store').Writable<string>}  [opts.store] - Use the provided store to instead of creating\n *        a default writable store.\n *\n * @returns {((data: object) => boolean) & import('svelte/store').Writable<string>} The query string filter.\n */\nfunction regexObjectQuery(accessors, { accessWarn = false, caseSensitive = false, store } = {})\n{\n   let keyword = '';\n   let regex;\n\n   if (store !== void 0 && !isWritableStore(store))\n   {\n      throw new TypeError(`createObjectQuery error: 'store' is not a writable store.`);\n   }\n\n   const storeKeyword = store ? store : writable(keyword);\n\n   // If an existing store is provided then set initial values.\n   if (store)\n   {\n      const current = get(store);\n\n      if (typeof current === 'string')\n      {\n         keyword = Strings.normalize(current);\n         regex = new RegExp(Strings.escape(keyword), caseSensitive ? '' : 'i');\n      }\n      else\n      {\n         store.set(keyword);\n      }\n   }\n\n   /**\n    * If there is no filter keyword / regex then do not filter otherwise filter based on the regex\n    * created from the search input element.\n    *\n    * @param {object} data - Data object to test against regex.\n    *\n    * @returns {boolean} AnimationStore filter state.\n    */\n   function filterQuery(data)\n   {\n      if (keyword === '' || !regex) { return true; }\n\n      if (isIterable(accessors))\n      {\n         for (const accessor of accessors)\n         {\n            const value = safeAccess(data, accessor);\n            if (typeof value !== 'string')\n            {\n               if (accessWarn)\n               {\n                  console.warn(`regexObjectQuery warning: could not access string data from '${accessor}'.`);\n               }\n\n               continue;\n            }\n\n            if (regex.test(Strings.normalize(value))) { return true; }\n         }\n\n         return false;\n      }\n      else\n      {\n         const value = safeAccess(data, accessors);\n\n         if (typeof value !== 'string')\n         {\n            if (accessWarn)\n            {\n               console.warn(`regexObjectQuery warning: could not access string data from '${accessors}'.`);\n            }\n\n            return false;\n         }\n\n         return regex.test(Strings.normalize(value));\n      }\n   }\n\n   /**\n    * Create a custom store that changes when the search keyword changes.\n    *\n    * @param {(string) => void} handler - A callback function that accepts strings.\n    *\n    * @returns {import('svelte/store').Unsubscriber} Store unsubscribe function.\n    */\n   filterQuery.subscribe = (handler) =>\n   {\n      return storeKeyword.subscribe(handler);\n   };\n\n   /**\n    * Set\n    *\n    * @param {string}   value - A new value for the keyword / regex test.\n    */\n   filterQuery.set = (value) =>\n   {\n      if (typeof value === 'string')\n      {\n         keyword = Strings.normalize(value);\n         regex = new RegExp(Strings.escape(keyword), caseSensitive ? '' : 'i');\n         storeKeyword.set(keyword);\n      }\n   };\n\n   return filterQuery;\n}\n\nconst filters = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    regexObjectQuery: regexObjectQuery\n});\n\n/**\n * Provides helper functions to create dynamic store driven filters and sort functions for dynamic reducers. The\n * returned functions are also Svelte stores and can be added to a reducer as well as used as a store.\n */\nclass DynReducerHelper\n{\n   /**\n    * Returns the following filter functions:\n    * - regexObjectQuery(accessors, options); suitable for object reducers matching one or more property keys /\n    *   accessors against the store value as a regex. To access deeper entries into the object format the accessor\n    *   string with `.` between entries to walk. Optional parameters include logging access warnings, case sensitivity,\n    *   and passing in an existing store.\n    *\n    * @returns {{\n    *    regexObjectQuery: (accessors: string|Iterable<string>, options?: {accessWarn?: boolean, caseSensitive?: boolean, store?: import('svelte/store').Writable<string>}) => (((data: {}) => boolean) & import('svelte/store').Writable<string>)\n    * }} All available filters.\n    */\n   static get filters() { return filters; }\n}\n\nexport { DynArrayReducer, DynArrayReducerDerived, DynMapReducer, DynMapReducerDerived, DynReducerHelper };\n//# sourceMappingURL=index.js.map\n","import { Hashing } from '@typhonjs-fvtt/runtime/util';\nimport { isPlainObject, isObject, hasPrototype } from '@typhonjs-fvtt/runtime/util/object';\nimport { DynMapReducer } from '@typhonjs-fvtt/runtime/svelte/store/reducer';\n\n/**\n * Provides management of reactive embedded collections.\n *\n * TODO: Consider subscribing to TJSDocument rather than exposing {@link EmbeddedStoreManager.handleDocChange} and\n * {@link EmbeddedStoreManager.handleUpdate}\n */\nclass EmbeddedStoreManager\n{\n   /**\n    * RegExp for detecting CRUD updates for renderContext.\n    *\n    * @type {RegExp}\n    */\n   static #renderContextRegex = /(?<action>create|delete|update)(?<sep>\\.?)(?<name>\\w+)/;\n\n   /**\n    * @type {Map<string, EmbeddedCollectionData<any>>}\n    */\n   #name = new Map();\n\n   /**\n    * @type {foundry.abstract.Document[]}\n    */\n   #document;\n\n   /**\n    * @type {Map<string, string>}\n    */\n   #collectionToDocName = new Map();\n\n   /**\n    * @type {Set<string>}\n    */\n   #embeddedNames = new Set();\n\n   /**\n    * @param {foundry.abstract.Document[]} document - The associated document holder.\n    */\n   constructor(document)\n   {\n      this.#document = document;\n\n      this.handleDocChange();\n\n      Object.seal(this);\n   }\n\n   /**\n    * @template [T=import('./types').NamedDocumentConstructor]\n    *\n    * @param {T} FoundryDoc - A Foundry document class / constructor.\n    *\n    * @param {import('#runtime/svelte/store/reducer').DynOptionsMapCreate<string, T>} options - DynMapReducer\n    *        creation options.\n    *\n    * @returns {import('#runtime/svelte/store/reducer').DynMapReducer<string, T>} DynMapReducer instance.\n    */\n   create(FoundryDoc, options)\n   {\n      const docName = FoundryDoc?.documentName;\n\n      if (typeof docName !== 'string')\n      {\n         throw new TypeError(\n          `EmbeddedStoreManager.create error: 'FoundryDoc' does not have a valid 'documentName' property.`);\n      }\n\n      /** @type {foundry.abstract.Document} */\n      const doc = this.#document[0];\n\n      let collection = null;\n\n      if (doc)\n      {\n         try\n         {\n            collection = doc.getEmbeddedCollection(docName);\n         }\n         catch (err)\n         {\n            console.warn(`EmbeddedStoreManager.create error: No valid embedded collection for: ${docName}`);\n         }\n      }\n\n      let embeddedData;\n\n      if (!this.#name.has(docName))\n      {\n         embeddedData = {\n            collection,\n            stores: new Map()\n         };\n\n         this.#name.set(docName, embeddedData);\n      }\n      else\n      {\n         embeddedData = this.#name.get(docName);\n      }\n\n      /** @type {string} */\n      let name;\n\n      /** @type {import('#runtime/svelte/store/reducer').DynDataOptions<T>} */\n      let rest = {};\n\n      /** @type {import('#runtime/svelte/store/reducer').IDynMapReducerCtor<string, T>} */\n      let ctor;\n\n      if (typeof options === 'string')\n      {\n         name = options;\n         ctor = DynMapReducer;\n      }\n      else if (typeof options === 'function' && hasPrototype(options, DynMapReducer))\n      {\n         ctor = options;\n      }\n      else if (isObject(options))\n      {\n         ({ name, ctor = DynMapReducer, ...rest } = options);\n      }\n      else\n      {\n         throw new TypeError(`EmbeddedStoreManager.create error: 'options' does not conform to allowed parameters.`);\n      }\n\n      if (!hasPrototype(ctor, DynMapReducer))\n      {\n         throw new TypeError(`EmbeddedStoreManager.create error: 'ctor' is not a 'DynMapReducer'.`);\n      }\n\n      name = name ?? ctor?.name;\n\n      if (typeof name !== 'string')\n      {\n         throw new TypeError(`EmbeddedStoreManager.create error: 'name' is not a string.`);\n      }\n\n      if (embeddedData.stores.has(name))\n      {\n         return embeddedData.stores.get(name);\n      }\n      else\n      {\n         const storeOptions = collection ? { data: collection, ...rest } : { ...rest };\n         const store = new ctor(storeOptions);\n         embeddedData.stores.set(name, store);\n         return store;\n      }\n   }\n\n   /**\n    * @template [T=import('./types').NamedDocumentConstructor]\n    *\n    * Destroys and removes embedded collection stores. Invoking this method with no parameters destroys all stores.\n    * Invoking with an embedded name destroys all stores for that particular collection. If you provide an embedded and\n    * store name just that particular store is destroyed and removed.\n    *\n    * @param {T}   [FoundryDoc] - A Foundry document class / constructor.\n    *\n    * @param {string}   [storeName] - Specific store name.\n    *\n    * @returns {boolean} One or more stores destroyed?\n    */\n   destroy(FoundryDoc, storeName)\n   {\n      let count = 0;\n\n      // Destroy all embedded stores\n      if (FoundryDoc === void 0)\n      {\n         for (const embeddedData of this.#name.values())\n         {\n            embeddedData.collection = null;\n            for (const store of embeddedData.stores.values())\n            {\n               store.destroy();\n               count++;\n            }\n         }\n\n         this.#name.clear();\n      }\n      else\n      {\n         const docName = FoundryDoc?.documentName;\n\n         if (typeof docName !== 'string')\n         {\n            throw new TypeError(\n             `EmbeddedStoreManager.delete error: 'FoundryDoc' does not have a valid 'documentName' property.`);\n         }\n\n         if (storeName === void 0)\n         {\n            const embeddedData = this.#name.get(docName);\n            if (embeddedData)\n            {\n               embeddedData.collection = null;\n               for (const store of embeddedData.stores.values())\n               {\n                  store.destroy();\n                  count++;\n               }\n            }\n\n            this.#name.delete(docName);\n         }\n         else if (storeName === 'string')\n         {\n            const embeddedData = this.#name.get(docName);\n            if (embeddedData)\n            {\n               const store = embeddedData.stores.get(storeName);\n               if (store)\n               {\n                  store.destroy();\n                  count++;\n               }\n            }\n         }\n      }\n\n      return count > 0;\n   }\n\n   /**\n    * @template [T=import('./types').NamedDocumentConstructor]\n    *\n    * @param {T} FoundryDoc - A Foundry document class / constructor.\n    *\n    * @param {string} storeName - Name of the embedded collection to retrieve.\n    *\n    * @returns {import('#runtime/svelte/store/reducer').DynMapReducer<string, InstanceType<T>>} DynMapReducer\n    *          instance.\n    */\n   get(FoundryDoc, storeName)\n   {\n      const docName = FoundryDoc?.documentName;\n\n      if (typeof docName !== 'string')\n      {\n         throw new TypeError(\n          `EmbeddedStoreManager.get error: 'FoundryDoc' does not have a valid 'documentName' property.`);\n      }\n\n      if (!this.#name.has(docName)) { return void 0; }\n\n      return this.#name.get(docName).stores.get(storeName);\n   }\n\n   /**\n    * Updates all existing embedded collection stores with the associated embedded collection\n    */\n   handleDocChange()\n   {\n      const doc = this.#document[0];\n\n      if (doc instanceof globalThis.foundry.abstract.Document)\n      {\n         const existingEmbeddedNames = new Set(this.#name.keys());\n\n         /** @type {[string, string][]} */\n         const embeddedNames = Object.entries(doc.constructor?.metadata?.embedded ?? []);\n\n         this.#collectionToDocName.clear();\n\n         // Remove all previously stored embedded name CRUD keys.\n         this.#embeddedNames.clear();\n\n         for (const [docName, collectionName] of embeddedNames)\n         {\n            // Remove processed embedded doc name from existingEmbeddedNames set.\n            existingEmbeddedNames.delete(docName);\n\n            // Update CRUD keys for v10.\n            this.#embeddedNames.add(`create${docName}`);\n            this.#embeddedNames.add(`delete${docName}`);\n            this.#embeddedNames.add(`update${docName}`);\n\n            // Update CRUD keys for v11.\n            this.#embeddedNames.add(`create.${collectionName}`);\n            this.#embeddedNames.add(`delete.${collectionName}`);\n            this.#embeddedNames.add(`update.${collectionName}`);\n\n            // Update CRUD keys for v12.\n            this.#embeddedNames.add(`create${collectionName}`);\n            this.#embeddedNames.add(`delete${collectionName}`);\n            this.#embeddedNames.add(`update${collectionName}`);\n\n            // v10 collection to doc name lookup.\n            this.#collectionToDocName.set(docName, docName);\n            this.#collectionToDocName.set(collectionName, docName);\n\n            let collection = null;\n\n            try\n            {\n               // Update any existing stores with the actual collection.\n               collection = doc.getEmbeddedCollection(docName);\n            }\n            catch (err)\n            {\n               console.warn(`EmbeddedStoreManager.handleDocUpdate error: No valid embedded collection for: ${docName}`);\n            }\n\n            // Update EmbeddedData for new collection.\n            const embeddedData = this.#name.get(docName);\n            if (embeddedData)\n            {\n               embeddedData.collection = collection;\n\n               // Update all existing stores.\n               for (const store of embeddedData.stores.values()) { store.setData(collection, true); }\n            }\n         }\n\n         // Update all existing embedded collections with null data that aren't processed above.\n         for (const embeddedName of existingEmbeddedNames)\n         {\n            const embeddedData = this.#name.get(embeddedName);\n            if (embeddedData)\n            {\n               embeddedData.collection = null;\n\n               for (const store of embeddedData.stores.values()) { store.setData(null, true); }\n            }\n         }\n      }\n      else // Reset all embedded reducer stores to null data.\n      {\n         this.#collectionToDocName.clear();\n         this.#embeddedNames.clear();\n\n         for (const embeddedData of this.#name.values())\n         {\n            embeddedData.collection = null;\n\n            for (const store of embeddedData.stores.values()) { store.setData(null, true); }\n         }\n      }\n   }\n\n   /**\n    * Handles updates to embedded stores parsing the render context for valid embedded store types.\n    *\n    * On create, delete, update parse the type being modified then force index updates for the embedded type.\n    *\n    * @param {string}   renderContext - render context update from document.\n    */\n   handleUpdate(renderContext)\n   {\n      if (!this.#embeddedNames.has(renderContext)) { return; }\n\n      const match = EmbeddedStoreManager.#renderContextRegex.exec(renderContext);\n\n      if (match)\n      {\n         const docOrCollectionName = match.groups.name;\n         const embeddedName = this.#collectionToDocName.get(docOrCollectionName);\n\n         if (!this.#name.has(embeddedName)) { return; }\n\n         for (const store of this.#name.get(embeddedName).stores.values())\n         {\n            store.index.update(true);\n         }\n      }\n   }\n}\n\n/**\n * @template T\n *\n * @typedef {object} EmbeddedCollectionData\n *\n * @property {foundry.abstract.Collection} collection -\n *\n * @property {Map<string, import('#runtime/svelte/store/reducer').DynMapReducer<string, T>>} stores -\n */\n\n/**\n * @template [T=globalThis.foundry.abstract.Document]\n *\n * Provides a wrapper implementing the Svelte store / subscriber protocol around any Document / ClientMixinDocument.\n * This makes documents reactive in a Svelte component, but otherwise provides subscriber functionality external to\n * Svelte.\n */\nclass TJSDocument\n{\n   /**\n    * @type {T[]}\n    */\n   #document = [void 0];\n\n   /**\n    * @type {EmbeddedStoreManager}\n    */\n   #embeddedStoreManager;\n\n   /**\n    * @type {import('./types').EmbeddedAPI}\n    */\n   #embeddedAPI;\n\n   /**\n    * @type {string}\n    */\n   #uuidv4;\n\n   /**\n    * @type {TJSDocumentOptions}\n    */\n   #options = { delete: void 0, preDelete: void 0 };\n\n   /**\n    * @type {((value: T, updateOptions?: TJSDocumentUpdateOptions) => void)[]}\n    */\n   #subscriptions = [];\n\n   /**\n    * @type {TJSDocumentUpdateOptions}\n    */\n   #updateOptions;\n\n   /**\n    * @param {T | TJSDocumentOptions}  [document] - Document to wrap or TJSDocumentOptions.\n    *\n    * @param {TJSDocumentOptions}      [options] - TJSDocument options.\n    */\n   constructor(document, options = {})\n   {\n      this.#uuidv4 = `tjs-document-${Hashing.uuidv4()}`;\n\n      if (isPlainObject(document)) // Handle case when only options are passed into ctor.\n      {\n         this.setOptions(document);\n      }\n      else\n      {\n         this.setOptions(options);\n         this.set(document);\n      }\n   }\n\n   /**\n    * @returns {import('./types').EmbeddedAPI} Embedded store manager.\n    */\n   get embedded()\n   {\n      if (!this.#embeddedAPI)\n      {\n         this.#embeddedStoreManager = new EmbeddedStoreManager(this.#document);\n\n         /** @type {import('./types').EmbeddedAPI} */\n         this.#embeddedAPI = {\n            create: (doc, options) => this.#embeddedStoreManager.create(doc, options),\n            destroy: (doc, storeName) => this.#embeddedStoreManager.destroy(doc, storeName),\n            get: (doc, storeName) => this.#embeddedStoreManager.get(doc, storeName)\n         };\n      }\n\n      return this.#embeddedAPI;\n   }\n\n   /**\n    * Returns the options passed on last update.\n    *\n    * @returns {TJSDocumentUpdateOptions} Last update options.\n    */\n   get updateOptions() { return this.#updateOptions ?? {}; }\n\n   /**\n    * Returns the UUID assigned to this store.\n    *\n    * @returns {string} UUID\n    */\n   get uuidv4() { return this.#uuidv4; }\n\n   /**\n    * Handles cleanup when the document is deleted. Invoking any optional delete function set in the constructor.\n    *\n    * @returns {Promise<void>}\n    */\n   async #deleted()\n   {\n      const doc = this.#document[0];\n\n      // Check to see if the document is still in the associated collection to determine if actually deleted.\n      if (doc instanceof globalThis.foundry.abstract.Document && !doc?.collection?.has(doc.id))\n      {\n         delete doc?.apps[this.#uuidv4];\n         this.#setDocument(void 0);\n\n         if (typeof this.#options.preDelete === 'function')\n         {\n            await this.#options.preDelete(doc);\n         }\n\n         this.#updateSubscribers(false, { action: 'delete', data: void 0 });\n\n         if (typeof this.#options.delete === 'function')\n         {\n            await this.#options.delete(doc);\n         }\n\n         this.#updateOptions = void 0;\n      }\n   }\n\n   /**\n    * Completely removes all internal subscribers, any optional delete callback, and unregisters from the\n    * ClientDocumentMixin `apps` tracking object.\n    */\n   destroy()\n   {\n      const doc = this.#document[0];\n\n      if (this.#embeddedStoreManager)\n      {\n         this.#embeddedStoreManager.destroy();\n         this.#embeddedStoreManager = void 0;\n         this.#embeddedAPI = void 0;\n      }\n\n      if (doc instanceof globalThis.foundry.abstract.Document)\n      {\n         delete doc?.apps[this.#uuidv4];\n         this.#setDocument(void 0);\n      }\n\n      this.#options.delete = void 0;\n      this.#subscriptions.length = 0;\n   }\n\n   /**\n    * @param {boolean}  [force] - unused - signature from Foundry render function.\n    *\n    * @param {object}   [options] - Options from render call; will have document update context.\n    */\n   #updateSubscribers(force = false, options = {}) // eslint-disable-line no-unused-vars\n   {\n      this.#updateOptions = options;\n\n      const doc = this.#document[0];\n\n      for (let cntr = 0; cntr < this.#subscriptions.length; cntr++) { this.#subscriptions[cntr](doc, options); }\n\n      if (this.#embeddedStoreManager)\n      {\n         this.#embeddedStoreManager.handleUpdate(options.renderContext);\n      }\n   }\n\n   /**\n    * @returns {T} Current document\n    */\n   get() { return this.#document[0]; }\n\n   /**\n    * Attempts to create a Foundry UUID from standard drop data. This may not work for all systems.\n    *\n    * @param {object}   data - Drop transfer data.\n    *\n    * @param {object}   [opts] - Optional parameters.\n    *\n    * @param {boolean}  [opts.actor=true] - Accept actor owned documents.\n    *\n    * @param {boolean}  [opts.compendium=true] - Accept compendium documents.\n    *\n    * @param {boolean}  [opts.world=true] - Accept world documents.\n    *\n    * @param {string[]|undefined}   [opts.types] - Require the `data.type` to match entry in `types`.\n    *\n    * @returns {string|undefined} Foundry UUID for drop data.\n    */\n   static getUUIDFromDataTransfer(data, { actor = true, compendium = true, world = true, types = void 0 } = {})\n   {\n      if (!isObject(data)) { return void 0; }\n      if (Array.isArray(types) && !types.includes(data.type)) { return void 0; }\n\n      let uuid = void 0;\n\n      if (typeof data.uuid === 'string') // v10 and above provides a full UUID.\n      {\n         const isCompendium = data.uuid.startsWith('Compendium');\n\n         if (isCompendium && compendium)\n         {\n            uuid = data.uuid;\n         }\n         else if (world)\n         {\n            uuid = data.uuid;\n         }\n      }\n      else // v9 and below parsing.\n      {\n         if (actor && world && data.actorId && data.type)\n         {\n            uuid = `Actor.${data.actorId}.${data.type}.${data.data._id}`;\n         }\n         else if (typeof data.id === 'string') // v9 and below uses `id`\n         {\n            if (compendium && typeof data.pack === 'string')\n            {\n               uuid = `Compendium.${data.pack}.${data.id}`;\n            }\n            else if (world)\n            {\n               uuid = `${data.type}.${data.id}`;\n            }\n         }\n      }\n\n      return uuid;\n   }\n\n\n   /**\n    * @param {T | undefined}  document - New document to set.\n    *\n    * @param {TJSDocumentUpdateOptions}   [options] - New document update options to set.\n    */\n   set(document, options = {})\n   {\n      if (this.#document[0])\n      {\n         delete this.#document[0].apps[this.#uuidv4];\n      }\n\n      if (document !== void 0 && !(document instanceof globalThis.foundry.abstract.Document))\n      {\n         throw new TypeError(`TJSDocument set error: 'document' is not a valid Document or undefined.`);\n      }\n\n      if (!isObject(options))\n      {\n         throw new TypeError(`TJSDocument set error: 'options' is not an object.`);\n      }\n\n      if (document instanceof globalThis.foundry.abstract.Document)\n      {\n         document.apps[this.#uuidv4] = {\n            close: this.#deleted.bind(this),\n            render: this.#updateSubscribers.bind(this)\n         };\n      }\n\n      this.#setDocument(document);\n      this.#updateOptions = options;\n      this.#updateSubscribers();\n   }\n\n   /**\n    *\n    * @param {T | undefined} doc -\n    */\n   #setDocument(doc)\n   {\n      this.#document[0] = doc;\n\n      if (this.#embeddedStoreManager) { this.#embeddedStoreManager.handleDocChange(); }\n   }\n\n   /**\n    * Potentially sets new document from data transfer object.\n    *\n    * @param {object}   data - Document transfer data.\n    *\n    * @param {{ actor?: boolean, compendium?: boolean, world?: boolean, types?: string[] } & TJSDocumentOptions}   [options] - Optional\n    *        parameters.\n    *\n    * @returns {Promise<boolean>} Returns true if new document set from data transfer blob.\n    */\n   async setFromDataTransfer(data, options)\n   {\n      return this.setFromUUID(TJSDocument.getUUIDFromDataTransfer(data, options), options);\n   }\n\n   /**\n    * Sets the document by Foundry UUID performing a lookup and setting the document if found.\n    *\n    * @param {string}   uuid - A Foundry UUID to lookup.\n    *\n    * @param {TJSDocumentOptions}   [options] - New document update options to set.\n    *\n    * @returns {Promise<boolean>} True if successfully set document from UUID.\n    */\n   async setFromUUID(uuid, options = {})\n   {\n      if (typeof uuid !== 'string' || uuid.length === 0) { return false; }\n\n      try\n      {\n         const doc = await globalThis.fromUuid(uuid);\n\n         if (doc)\n         {\n            this.set(doc, options);\n            return true;\n         }\n      }\n      catch (err) { /**/ }\n\n      return false;\n   }\n\n   /**\n    * Sets options for this document wrapper / store.\n    *\n    * @param {TJSDocumentOptions}   options - Options for TJSDocument.\n    */\n   setOptions(options)\n   {\n      if (!isObject(options))\n      {\n         throw new TypeError(`TJSDocument error: 'options' is not a plain object.`);\n      }\n\n      // Verify valid values -------------\n\n      if (options.delete !== void 0 && typeof options.delete !== 'function')\n      {\n         throw new TypeError(`TJSDocument error: 'delete' attribute in options is not a function.`);\n      }\n\n      if (options.preDelete !== void 0 && typeof options.preDelete !== 'function')\n      {\n         throw new TypeError(`TJSDocument error: 'preDelete' attribute in options is not a function.`);\n      }\n\n      // Set any valid values -------------\n\n      if (options.delete === void 0 || typeof options.delete === 'function')\n      {\n         this.#options.delete = options.delete;\n      }\n\n      if (options.preDelete === void 0 || typeof options.preDelete === 'function')\n      {\n         this.#options.preDelete = options.preDelete;\n      }\n   }\n\n   /**\n    * @param {(value: T, updateOptions?: TJSDocumentUpdateOptions) => void} handler - Callback function that is\n    * invoked on update / changes.\n    *\n    * @returns {import('svelte/store').Unsubscriber} Unsubscribe function.\n    */\n   subscribe(handler)\n   {\n      this.#subscriptions.push(handler);           // Add handler to the array of subscribers.\n\n      const updateOptions = { action: 'subscribe', data: void 0 };\n\n      handler(this.#document[0], updateOptions);      // Call handler with current value and update options.\n\n      // Return unsubscribe function.\n      return () =>\n      {\n         const index = this.#subscriptions.findIndex((sub) => sub === handler);\n         if (index >= 0) { this.#subscriptions.splice(index, 1); }\n      };\n   }\n}\n\n/**\n * @typedef {object} TJSDocumentOptions\n *\n * @property {(doc: globalThis.foundry.abstract.Document) => void} [delete] Optional post delete function to invoke when\n * document is deleted _after_ subscribers have been notified.\n *\n * @property {(doc: globalThis.foundry.abstract.Document) => void} [preDelete] Optional pre delete function to invoke\n * when document is deleted _before_ subscribers are notified.\n */\n\n/**\n * @typedef TJSDocumentUpdateOptions Provides data regarding the latest document change.\n *\n * @property {string}   [action] The update action. Useful for filtering.\n *\n * @property {string}   [renderContext] The update action. Useful for filtering.\n *\n * @property {object[]|string[]} [data] Foundry data associated with document changes.\n */\n\n/**\n * Provides a wrapper implementing the Svelte store / subscriber protocol around any DocumentCollection. This makes\n * document collections reactive in a Svelte component, but otherwise provides subscriber functionality external to\n * Svelte.\n *\n * @template [T=DocumentCollection]\n */\nclass TJSDocumentCollection\n{\n   #collection;\n   #collectionCallback;\n   #uuid;\n\n   /**\n    * @type {TJSDocumentCollectionOptions}\n    */\n   #options = { delete: void 0, preDelete: void 0 };\n\n   /**\n    * @type {((value: T, updateOptions?: TJSDocumentCollectionUpdateOptions<T>) => void)[]}\n    */\n   #subscriptions = [];\n\n   /**\n    * @type {TJSDocumentCollectionUpdateOptions<T>}\n    */\n   #updateOptions;\n\n   /**\n    * @param {T | TJSDocumentCollectionOptions}   [collection] - Collection to wrap or TJSDocumentCollectionOptions.\n    *\n    * @param {TJSDocumentCollectionOptions}     [options] - TJSDocumentCollection options.\n    */\n   constructor(collection, options = {})\n   {\n      this.#uuid = `tjs-collection-${Hashing.uuidv4()}`;\n\n      if (isPlainObject(collection)) // Handle case when only options are passed into ctor.\n      {\n         this.setOptions(collection);\n      }\n      else\n      {\n         this.setOptions(options);\n         this.set(collection);\n      }\n   }\n\n   /**\n    * Returns the options passed on last update.\n    *\n    * @returns {TJSDocumentCollectionUpdateOptions<T>} Last update options.\n    */\n   get updateOptions() { return this.#updateOptions ?? {}; }\n\n   /**\n    * Returns the UUID assigned to this store.\n    *\n    * @returns {string} UUID\n    */\n   get uuid() { return this.#uuid; }\n\n   /**\n    * Handles cleanup when the collection is deleted. Invoking any optional delete function set in the constructor.\n    *\n    * @returns {Promise<void>}\n    */\n   async #deleted()\n   {\n      const collection = this.#collection;\n\n      if (collection instanceof DocumentCollection)\n      {\n         const index = collection?.apps?.findIndex((sub) => sub === this.#collectionCallback);\n         if (index >= 0) { collection?.apps?.splice(index, 1); }\n\n         this.#collection = void 0;\n      }\n\n      if (typeof this.#options.preDelete === 'function')\n      {\n         await this.#options.preDelete(collection);\n      }\n\n      this.#notify(false, { action: 'delete', documentType: collection.documentName, documents: [], data: [] });\n\n      if (typeof this.#options.delete === 'function')\n      {\n         await this.#options.delete(collection);\n      }\n\n      this.#updateOptions = void 0;\n   }\n\n   /**\n    * Completely removes all internal subscribers, any optional delete callback, and unregisters from the\n    * DocumentCollection `apps` tracking array.\n    */\n   destroy()\n   {\n      const collection = this.#collection;\n\n      if (collection instanceof DocumentCollection)\n      {\n         const index = collection?.apps?.findIndex((sub) => sub === this.#collectionCallback);\n         if (index >= 0) { collection?.apps?.splice(index, 1); }\n\n         this.#collection = void 0;\n      }\n\n      this.#options.delete = void 0;\n      this.#subscriptions.length = 0;\n   }\n\n   /**\n    * @param {boolean}  [force] - unused - signature from Foundry render function.\n    *\n    * @param {object}   [options] - Options from render call; will have collection update context.\n    */\n   #notify(force = false, options = {}) // eslint-disable-line no-unused-vars\n   {\n      this.#updateOptions = options;\n\n      // Subscriptions are stored locally as on the browser Babel is still used for private class fields / Babel\n      // support until 2023. IE not doing this will require several extra method calls otherwise.\n      const subscriptions = this.#subscriptions;\n      const collection = this.#collection;\n\n      for (let cntr = 0; cntr < subscriptions.length; cntr++) { subscriptions[cntr](collection, options); }\n   }\n\n   /**\n    * @returns {T} Current collection\n    */\n   get() { return this.#collection; }\n\n   /**\n    * @param {T | undefined}  collection - New collection to set.\n    *\n    * @param {object}         [options] - New collection update options to set.\n    */\n   set(collection, options = {})\n   {\n      if (this.#collection)\n      {\n         const index = this.#collection.apps.findIndex((sub) => sub === this.#collectionCallback);\n         if (index >= 0) { this.#collection.apps.splice(index, 1); }\n\n         this.#collectionCallback = void 0;\n      }\n\n      if (collection !== void 0 && !(collection instanceof DocumentCollection))\n      {\n         throw new TypeError(\n          `TJSDocumentCollection set error: 'collection' is not a valid DocumentCollection or undefined.`);\n      }\n\n      if (!isObject(options))\n      {\n         throw new TypeError(`TJSDocument set error: 'options' is not an object.`);\n      }\n\n      if (collection instanceof DocumentCollection)\n      {\n         this.#collectionCallback = {\n            close: this.#deleted.bind(this),\n            render: this.#notify.bind(this)\n         };\n\n         collection?.apps?.push(this.#collectionCallback);\n      }\n\n      this.#collection = collection;\n      this.#updateOptions = options;\n      this.#notify();\n   }\n\n   /**\n    * Sets options for this collection wrapper / store.\n    *\n    * @param {TJSDocumentCollectionOptions}   options - Options for TJSDocumentCollection.\n    */\n   setOptions(options)\n   {\n      if (!isObject(options))\n      {\n         throw new TypeError(`TJSDocumentCollection error: 'options' is not an object.`);\n      }\n\n      // Verify valid values -------------\n\n      if (options.delete !== void 0 && typeof options.delete !== 'function')\n      {\n         throw new TypeError(`TJSDocumentCollection error: 'delete' attribute in options is not a function.`);\n      }\n\n      if (options.preDelete !== void 0 && typeof options.preDelete !== 'function')\n      {\n         throw new TypeError(`TJSDocumentCollection error: 'preDelete' attribute in options is not a function.`);\n      }\n\n      // Set any valid values -------------\n\n      if (options.delete === void 0 || typeof options.delete === 'function')\n      {\n         this.#options.delete = options.delete;\n      }\n\n      if (options.preDelete === void 0 || typeof options.preDelete === 'function')\n      {\n         this.#options.preDelete = options.preDelete;\n      }\n   }\n\n   /**\n    * @param {(value: T, updateOptions?: TJSDocumentCollectionUpdateOptions<T>) => void} handler - Callback function\n    * that is invoked on update / changes.\n    *\n    * @returns {import('svelte/store').Unsubscriber} Unsubscribe function.\n    */\n   subscribe(handler)\n   {\n      this.#subscriptions.push(handler);              // Add handler to the array of subscribers.\n\n      const collection = this.#collection;\n\n      const documentType = collection?.documentName ?? void 0;\n\n      const updateOptions = { action: 'subscribe', documentType, documents: [], data: [] };\n\n      handler(collection, updateOptions);  // Call handler with current value and update options.\n\n      // Return unsubscribe function.\n      return () =>\n      {\n         const index = this.#subscriptions.findIndex((sub) => sub === handler);\n         if (index >= 0) { this.#subscriptions.splice(index, 1); }\n      };\n   }\n}\n\nexport { TJSDocument, TJSDocumentCollection };\n//# sourceMappingURL=index.js.map\n","<script>\n  import { OBSEvent, SceneLoadEvent } from \"../../utils/settings\";\n  import ObsSetting from \"./OBSSetting.svelte\";\n  import { TJSDocument } from \"@typhonjs-fvtt/runtime/svelte/store/fvtt/document\";\n\n  /**\n   * @type {Array<SceneLoadEvent>}\n   */\n  export let eventArray;\n  export let useWebSocket;\n\n  function handleRemove(index) {\n    eventArray = [\n      ...eventArray.slice(0, index),\n      ...eventArray.slice(index + 1, eventArray.length),\n    ];\n  }\n\n  export const handleAdd = () => {\n    eventArray = eventArray.concat(new SceneLoadEvent());\n  };\n\n  function handleChildAdd(index) {\n    eventArray[index].obsActions.push(new OBSEvent());\n    // Weird hack to force update\n    eventArray[index].obsActions = eventArray[index].obsActions;\n  }\n\n  function handleChildRemove(index, aindex) {\n    eventArray[index].obsActions = [\n      ...eventArray[index].obsActions.slice(0, aindex),\n      ...eventArray[index].obsActions.slice(\n        aindex + 1,\n        eventArray[index].obsActions.length,\n      ),\n    ];\n  }\n\n  const doc = new TJSDocument();\n  async function dropScene(index, event) {\n    try {\n      await doc.setFromDataTransfer(\n        JSON.parse(event.dataTransfer.getData(\"text/plain\")),\n      );\n      const scene = doc.get();\n      if (scene.documentName.includes(\"Scene\")) {\n        eventArray[index].sceneName = scene.name;\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n</script>\n\n<div class=\"scroll\">\n  <ul>\n    {#each eventArray as event, index (eventArray.indexOf(event))}\n      <li>\n        <div class=\"setting\">\n          <span for=\"input-{index}\">VTT Scene Name:</span><input\n            name=\"input-{index}\"\n            bind:value=\"{event.sceneName}\"\n            on:drop|preventDefault|stopPropagation=\"{(event) =>\n              dropScene(index, event)}\"\n          />\n          <button on:click=\"{() => handleRemove(index)}\" type=\"button\">\n            <i class=\"fas fa-trash\"></i>\n          </button>\n          <button on:click=\"{() => handleChildAdd(index)}\" type=\"button\">\n            <i class=\"fas fa-plus\"></i>\n          </button>\n        </div>\n        <ul>\n          {#each event.obsActions as action, aindex (event.obsActions.indexOf(action))}\n            <ObsSetting\n              event=\"{action}\"\n              removeFn=\"{() => handleChildRemove(index, aindex)}\"\n              useWebSocket=\"{useWebSocket}\"\n            />\n          {/each}\n        </ul>\n      </li>\n      <hr />\n    {/each}\n  </ul>\n</div>\n\n<style>\n  .setting {\n    height: 35px;\n    display: flex;\n    justify-content: center;\n    align-content: space-around;\n    flex-flow: row nowrap;\n    align-items: stretch;\n  }\n  .setting button {\n    width: 35px;\n    margin: auto;\n  }\n  .setting input {\n    width: 400px;\n  }\n\n  .scroll {\n    overflow: auto;\n    float: left;\n    max-height: 535px;\n    height: 535px;\n    width: auto;\n    padding-left: 3px;\n  }\n\n  ul {\n    list-style-type: none;\n    padding: 0;\n  }\n</style>\n","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  return {\n    ...rect,\n    top: rect.y,\n    left: rect.x,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    ...rects.floating,\n    x,\n    y\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      if (!specifiedFallbackPlacements && fallbackAxisSideDirection !== 'none') {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle.\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$map$so;\n                const placement = (_overflowsData$map$so = overflowsData.map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$map$so[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = ['left', 'top'].includes(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: 0,\n    crossAxis: 0,\n    alignmentAxis: null,\n    ...rawValue\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const overflowAvailableHeight = height - overflow[heightSide];\n      const overflowAvailableWidth = width - overflow[widthSide];\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if (isYAxis) {\n        const maximumClippingWidth = width - overflow.left - overflow.right;\n        availableWidth = alignment || noShift ? min(overflowAvailableWidth, maximumClippingWidth) : maximumClippingWidth;\n      } else {\n        const maximumClippingHeight = height - overflow.top - overflow.bottom;\n        availableHeight = alignment || noShift ? min(overflowAvailableHeight, maximumClippingHeight) : maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","function getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  // Browsers without `ShadowRoot` support.\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isContainingBlock(element) {\n  const webkit = isWebKit();\n  const css = getComputedStyle(element);\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  return css.transform !== 'none' || css.perspective !== 'none' || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else {\n      currentNode = getParentNode(currentNode);\n    }\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.pageXOffset,\n    scrollTop: element.pageYOffset\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], win.frameElement && traverseIframes ? getOverflowAncestors(win.frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isWebKit };\n","import { rectToClientRect, autoPlacement as autoPlacement$1, shift as shift$1, flip as flip$1, size as size$1, hide as hide$1, arrow as arrow$1, inline as inline$1, limitShift as limitShift$1, computePosition as computePosition$1 } from '@floating-ui/core';\nexport { detectOverflow, offset } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle, isHTMLElement, isElement, getWindow, isWebKit, getDocumentElement, getNodeName, isOverflowElement, getNodeScroll, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = currentWin.frameElement;\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = currentWin.frameElement;\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\nconst topLayerSelectors = [':popover-open', ':modal'];\nfunction isTopLayer(floating) {\n  return topLayerSelectors.some(selector => {\n    try {\n      return floating.matches(selector);\n    } catch (e) {\n      return false;\n    }\n  });\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\nfunction getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  return getBoundingClientRect(getDocumentElement(element)).left + getNodeScroll(element).scrollLeft;\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      ...clippingAncestor,\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  const x = rect.left + scroll.scrollLeft - offsets.x;\n  const y = rect.top + scroll.scrollTop - offsets.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  return element.offsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const window = getWindow(element);\n  if (!isHTMLElement(element) || isTopLayer(element)) {\n    return window;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static' && !isContainingBlock(offsetParent))) {\n    return window;\n  }\n  return offsetParent || getContainingBlock(element) || window;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      ...(await getDimensionsFn(data.floating))\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 100);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, flip, hide, inline, limitShift, platform, shift, size };\n","//@ts-ignore\nimport { arrow as arrowCore } from \"./core\";\nimport { autoUpdate as _autoUpdate, computePosition } from \"./dom/index.js\";\nimport { get } from \"svelte/store\";\nimport { onDestroy, tick } from 'svelte';\nexport function createFloatingActions(initOptions) {\n    let referenceElement;\n    let floatingElement;\n    const defaultOptions = {\n        autoUpdate: true\n    };\n    let options = initOptions;\n    const getOptions = (mixin) => {\n        return { ...defaultOptions, ...(initOptions || {}), ...(mixin || {}) };\n    };\n    const updatePosition = (updateOptions) => {\n        if (referenceElement && floatingElement) {\n            options = getOptions(updateOptions);\n            computePosition(referenceElement, floatingElement, options)\n                .then(v => {\n                Object.assign(floatingElement.style, {\n                    position: v.strategy,\n                    left: `${v.x}px`,\n                    top: `${v.y}px`,\n                });\n                options?.onComputed && options.onComputed(v);\n            });\n        }\n    };\n    const referenceAction = node => {\n        if ('subscribe' in node) {\n            setupVirtualElementObserver(node);\n            return {};\n        }\n        else {\n            referenceElement = node;\n            updatePosition();\n        }\n    };\n    const contentAction = (node, contentOptions) => {\n        let autoUpdateDestroy;\n        floatingElement = node;\n        options = getOptions(contentOptions);\n        setTimeout(() => updatePosition(contentOptions), 0); //tick doesn't work\n        updatePosition(contentOptions);\n        const destroyAutoUpdate = () => {\n            if (autoUpdateDestroy) {\n                autoUpdateDestroy();\n                autoUpdateDestroy = undefined;\n            }\n        };\n        const initAutoUpdate = ({ autoUpdate } = options || {}) => {\n            destroyAutoUpdate();\n            if (autoUpdate !== false) {\n                tick().then(() => {\n                    return _autoUpdate(referenceElement, floatingElement, () => updatePosition(options), (autoUpdate === true ? {} : autoUpdate));\n                });\n            }\n            return;\n        };\n        autoUpdateDestroy = initAutoUpdate();\n        return {\n            update(contentOptions) {\n                updatePosition(contentOptions);\n                autoUpdateDestroy = initAutoUpdate(contentOptions);\n            },\n            destroy() {\n                destroyAutoUpdate();\n            }\n        };\n    };\n    const setupVirtualElementObserver = (node) => {\n        const unsubscribe = node.subscribe(($node) => {\n            if (referenceElement === undefined) {\n                referenceElement = $node;\n                updatePosition();\n            }\n            else {\n                // Preserve the reference to the virtual element.\n                Object.assign(referenceElement, $node);\n                updatePosition();\n            }\n        });\n        onDestroy(unsubscribe);\n    };\n    return [\n        referenceAction,\n        contentAction,\n        updatePosition\n    ];\n}\nexport function arrow(options) {\n    return {\n        name: \"arrow\",\n        options,\n        fn(args) {\n            const element = get(options.element);\n            if (element) {\n                return arrowCore({\n                    element,\n                    padding: options.padding\n                }).fn(args);\n            }\n            return {};\n        }\n    };\n}\n","export default function filter({\n    loadOptions,\n    filterText,\n    items,\n    multiple,\n    value,\n    itemId,\n    groupBy,\n    filterSelectedItems,\n    itemFilter,\n    convertStringItemsToObjects,\n    filterGroupedItems,\n    label,\n}) {\n    if (items && loadOptions) return items;\n    if (!items) return [];\n\n    if (items && items.length > 0 && typeof items[0] !== 'object') {\n        items = convertStringItemsToObjects(items);\n    }\n\n    let filterResults = items.filter((item) => {\n        let matchesFilter = itemFilter(item[label], filterText, item);\n        if (matchesFilter && multiple && value?.length) {\n            matchesFilter = !value.some((x) => {\n                return filterSelectedItems ? x[itemId] === item[itemId] : false;\n            });\n        }\n\n        return matchesFilter;\n    });\n\n    if (groupBy) {\n        filterResults = filterGroupedItems(filterResults);\n    }\n\n    return filterResults;\n}\n","export default async function getItems({ dispatch, loadOptions, convertStringItemsToObjects, filterText }) {\n    let res = await loadOptions(filterText).catch((err) => {\n        console.warn('svelte-select loadOptions error :>> ', err);\n        dispatch('error', { type: 'loadOptions', details: err });\n    });\n\n    if (res && !res.cancelled) {        \n        if (res) {\n            if (res && res.length > 0 && typeof res[0] !== 'object') {\n                res = convertStringItemsToObjects(res);\n            }\n            \n            dispatch('loaded', { items: res });\n        } else {\n            res = [];\n        }\n\n        return {\n            filteredItems: res,\n            loading: false,\n            focused: true,\n            listOpen: true,\n        };\n    }\n}\n","<svg\n    width=\"100%\"\n    height=\"100%\"\n    viewBox=\"0 0 20 20\"\n    focusable=\"false\"\n    aria-hidden=\"true\">\n    <path\n    fill=\"currentColor\"\n        d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747\n          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0\n          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502\n          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0\n          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\" />\n</svg>\n\n<style>\n  svg {\n      width: var(--chevron-icon-width, 20px);\n      height: var(--chevron-icon-width, 20px);\n      color: var(--chevron-icon-colour, currentColor);\n  }\n</style>","<svg\n    width=\"100%\"\n    height=\"100%\"\n    viewBox=\"-2 -2 50 50\"\n    focusable=\"false\"\n    aria-hidden=\"true\"\n    role=\"presentation\"\n>\n    <path\n        fill=\"currentColor\"\n        d=\"M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z\"\n    />\n</svg>\n\n<style>\n    svg {\n        width: var(--clear-icon-width, 20px);\n        height: var(--clear-icon-width, 20px);\n        color: var(--clear-icon-color, currentColor);\n    }\n</style>","<svg class=\"loading\" viewBox=\"25 25 50 50\">\n    <circle\n        class=\"circle_path\"\n        cx=\"50\"\n        cy=\"50\"\n        r=\"20\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        stroke-width=\"5\"\n        stroke-miterlimit=\"10\" />\n</svg>\n\n<style>\n    .loading {\n        width: var(--spinner-width, 20px);\n        height: var(--spinner-height, 20px);\n        color: var(--spinner-color, var(--icons-color));\n        animation: rotate 0.75s linear infinite;\n        transform-origin: center center;\n        transform: none;\n    }\n\n    .circle_path {\n        stroke-dasharray: 90;\n        stroke-linecap: round;\n    }\n\n    @keyframes rotate {\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n</style>","<script>\n    import { beforeUpdate, createEventDispatcher, onDestroy, onMount } from 'svelte';\n    import { offset, flip, shift } from 'svelte-floating-ui/dom';\n    import { createFloatingActions } from 'svelte-floating-ui';\n\n    const dispatch = createEventDispatcher();\n\n    import _filter from './filter';\n    import _getItems from './get-items';\n\n    import ChevronIcon from './ChevronIcon.svelte';\n    import ClearIcon from './ClearIcon.svelte';\n    import LoadingIcon from './LoadingIcon.svelte';\n\n    export let justValue = null; // read-only\n\n    export let filter = _filter;\n    export let getItems = _getItems;\n\n    export let id = null;\n    export let name = null;\n    export let container = undefined;\n    export let input = undefined;\n    export let multiple = false;\n    export let multiFullItemClearable = false;\n    export let disabled = false;\n    export let focused = false;\n    export let value = null;\n    export let filterText = '';\n    export let placeholder = 'Please select';\n    export let placeholderAlwaysShow = false;\n    export let items = null;\n    export let label = 'label';\n    export let itemFilter = (label, filterText, option) => `${label}`.toLowerCase().includes(filterText.toLowerCase());\n    export let groupBy = undefined;\n    export let groupFilter = (groups) => groups;\n    export let groupHeaderSelectable = false;\n    export let itemId = 'value';\n    export let loadOptions = undefined;\n    export let containerStyles = '';\n    export let hasError = false;\n    export let filterSelectedItems = true;\n    export let required = false;\n    export let closeListOnChange = true;\n    export let clearFilterTextOnBlur = true;\n\n    export let createGroupHeaderItem = (groupValue, item) => {\n        return {\n            value: groupValue,\n            [label]: groupValue,\n        };\n    };\n\n    export const getFilteredItems = () => {\n        return filteredItems;\n    };\n\n    export let searchable = true;\n    export let inputStyles = '';\n    export let clearable = true;\n    export let loading = false;\n    export let listOpen = false;\n\n    let timeout;\n    export let debounce = (fn, wait = 1) => {\n        clearTimeout(timeout);\n        timeout = setTimeout(fn, wait);\n    };\n\n    export let debounceWait = 300;\n    export let hideEmptyState = false;\n    export let inputAttributes = {};\n    export let listAutoWidth = true;\n    export let showChevron = false;\n    export let listOffset = 5;\n    export let hoverItemIndex = 0;\n    export let floatingConfig = {};\n\n    export { containerClasses as class };\n\n    let containerClasses = '';\n    let activeValue;\n    let prev_value;\n    let prev_filterText;\n    let prev_multiple;\n\n    function setValue() {\n        if (typeof value === 'string') {\n            let item = (items || []).find((item) => item[itemId] === value);\n            value = item || {\n                [itemId]: value,\n                label: value,\n            };\n        } else if (multiple && Array.isArray(value) && value.length > 0) {\n            value = value.map((item) => (typeof item === 'string' ? { value: item, label: item } : item));\n        }\n    }\n\n    let _inputAttributes;\n    function assignInputAttributes() {\n        _inputAttributes = Object.assign(\n            {\n                autocapitalize: 'none',\n                autocomplete: 'off',\n                autocorrect: 'off',\n                spellcheck: false,\n                tabindex: 0,\n                type: 'text',\n                'aria-autocomplete': 'list',\n            },\n            inputAttributes\n        );\n\n        if (id) {\n            _inputAttributes['id'] = id;\n        }\n\n        if (!searchable) {\n            _inputAttributes['readonly'] = true;\n        }\n    }\n\n    function convertStringItemsToObjects(_items) {\n        return _items.map((item, index) => {\n            return {\n                index,\n                value: item,\n                label: `${item}`,\n            };\n        });\n    }\n\n    function filterGroupedItems(_items) {\n        const groupValues = [];\n        const groups = {};\n\n        _items.forEach((item) => {\n            const groupValue = groupBy(item);\n\n            if (!groupValues.includes(groupValue)) {\n                groupValues.push(groupValue);\n                groups[groupValue] = [];\n\n                if (groupValue) {\n                    groups[groupValue].push(\n                        Object.assign(createGroupHeaderItem(groupValue, item), {\n                            id: groupValue,\n                            groupHeader: true,\n                            selectable: groupHeaderSelectable,\n                        })\n                    );\n                }\n            }\n\n            groups[groupValue].push(Object.assign({ groupItem: !!groupValue }, item));\n        });\n\n        const sortedGroupedItems = [];\n\n        groupFilter(groupValues).forEach((groupValue) => {\n            if (groups[groupValue]) sortedGroupedItems.push(...groups[groupValue]);\n        });\n\n        return sortedGroupedItems;\n    }\n\n    function dispatchSelectedItem() {\n        if (multiple) {\n            if (JSON.stringify(value) !== JSON.stringify(prev_value)) {\n                if (checkValueForDuplicates()) {\n                    dispatch('input', value);\n                }\n            }\n            return;\n        }\n\n        if (!prev_value || JSON.stringify(value[itemId]) !== JSON.stringify(prev_value[itemId])) {\n            dispatch('input', value);\n        }\n    }\n\n    function setupMulti() {\n        if (value) {\n            if (Array.isArray(value)) {\n                value = [...value];\n            } else {\n                value = [value];\n            }\n        }\n    }\n\n    function setupSingle() {\n        if (value) value = null;\n    }\n\n    $: if ((items, value)) setValue();\n    $: if (inputAttributes || !searchable) assignInputAttributes();\n    $: if (multiple) setupMulti();\n    $: if (prev_multiple && !multiple) setupSingle();\n    $: if (multiple && value && value.length > 1) checkValueForDuplicates();\n    $: if (value) dispatchSelectedItem();\n    $: if (!value && multiple && prev_value) dispatch('input', value);\n    $: if (!focused && input) closeList();\n    $: if (filterText !== prev_filterText) setupFilterText();\n    $: if (!multiple && listOpen && value && filteredItems) setValueIndexAsHoverIndex();\n    $: dispatchHover(hoverItemIndex);\n\n    function setValueIndexAsHoverIndex() {\n        const valueIndex = filteredItems.findIndex((i) => {\n            return i[itemId] === value[itemId];\n        });\n\n        checkHoverSelectable(valueIndex, true);\n    }\n\n    function dispatchHover(i) {\n        dispatch('hoverItem', i);\n    }\n\n    function checkHoverSelectable(startingIndex = 0, ignoreGroup) {\n        hoverItemIndex = startingIndex < 0 ? 0 : startingIndex;\n        if (!ignoreGroup && groupBy && filteredItems[hoverItemIndex] && !filteredItems[hoverItemIndex].selectable) {\n            setHoverIndex(1);\n        }\n    }\n\n    function setupFilterText() {\n        if (!loadOptions && filterText.length === 0) return;\n\n        if (loadOptions) {\n            debounce(async function () {\n                loading = true;\n                let res = await getItems({\n                    dispatch,\n                    loadOptions,\n                    convertStringItemsToObjects,\n                    filterText,\n                });\n\n                if (res) {\n                    loading = res.loading;\n                    listOpen = listOpen ? res.listOpen : filterText.length > 0 ? true : false;\n                    focused = listOpen && res.focused;\n                    items = groupBy ? filterGroupedItems(res.filteredItems) : res.filteredItems;\n                } else {\n                    loading = false;\n                    focused = true;\n                    listOpen = true;\n                }\n            }, debounceWait);\n        } else {\n            listOpen = true;\n\n            if (multiple) {\n                activeValue = undefined;\n            }\n        }\n    }\n\n    $: hasValue = multiple ? value && value.length > 0 : value;\n    $: hideSelectedItem = hasValue && filterText.length > 0;\n    $: showClear = hasValue && clearable && !disabled && !loading;\n    $: placeholderText =\n        placeholderAlwaysShow && multiple\n            ? placeholder\n            : multiple && value?.length === 0\n            ? placeholder\n            : value\n            ? ''\n            : placeholder;\n    $: ariaSelection = value ? handleAriaSelection(multiple) : '';\n    $: ariaContext = handleAriaContent({ filteredItems, hoverItemIndex, focused, listOpen });\n    $: updateValueDisplay(items);\n    $: justValue = computeJustValue(multiple, value, itemId);\n    $: if (!multiple && prev_value && !value) dispatch('input', value);\n    $: filteredItems = filter({\n        loadOptions,\n        filterText,\n        items,\n        multiple,\n        value,\n        itemId,\n        groupBy,\n        label,\n        filterSelectedItems,\n        itemFilter,\n        convertStringItemsToObjects,\n        filterGroupedItems,\n    });\n    $: if (listOpen && filteredItems && !multiple && !value) checkHoverSelectable();\n    $: handleFilterEvent(filteredItems);\n    $: if (container && floatingConfig) floatingUpdate(Object.assign(_floatingConfig, floatingConfig));\n    $: listDom = !!list;\n    $: listMounted(list, listOpen);\n    $: if (listOpen && container && list) setListWidth();\n    $: scrollToHoverItem = hoverItemIndex;\n    $: if (listOpen && multiple) hoverItemIndex = 0;\n    $: if (input && listOpen && !focused) handleFocus();\n    $: if (filterText) hoverItemIndex = 0;\n\n    function handleFilterEvent(items) {\n        if (listOpen) dispatch('filter', items);\n    }\n\n    beforeUpdate(async () => {\n        prev_value = value;\n        prev_filterText = filterText;\n        prev_multiple = multiple;\n    });\n\n    function computeJustValue() {\n        if (multiple) return value ? value.map((item) => item[itemId]) : null;\n        return value ? value[itemId] : value;\n    }\n\n    function checkValueForDuplicates() {\n        let noDuplicates = true;\n        if (value) {\n            const ids = [];\n            const uniqueValues = [];\n\n            value.forEach((val) => {\n                if (!ids.includes(val[itemId])) {\n                    ids.push(val[itemId]);\n                    uniqueValues.push(val);\n                } else {\n                    noDuplicates = false;\n                }\n            });\n\n            if (!noDuplicates) value = uniqueValues;\n        }\n        return noDuplicates;\n    }\n\n    function findItem(selection) {\n        let matchTo = selection ? selection[itemId] : value[itemId];\n        return items.find((item) => item[itemId] === matchTo);\n    }\n\n    function updateValueDisplay(items) {\n        if (!items || items.length === 0 || items.some((item) => typeof item !== 'object')) return;\n        if (!value || (multiple ? value.some((selection) => !selection || !selection[itemId]) : !value[itemId])) return;\n\n        if (Array.isArray(value)) {\n            value = value.map((selection) => findItem(selection) || selection);\n        } else {\n            value = findItem() || value;\n        }\n    }\n\n    async function handleMultiItemClear(i) {\n        const itemToRemove = value[i];\n\n        if (value.length === 1) {\n            value = undefined;\n        } else {\n            value = value.filter((item) => {\n                return item !== itemToRemove;\n            });\n        }\n\n        dispatch('clear', itemToRemove);\n    }\n\n    function handleKeyDown(e) {\n        if (!focused) return;\n        e.stopPropagation();\n        switch (e.key) {\n            case 'Escape':\n                e.preventDefault();\n                closeList();\n                break;\n            case 'Enter':\n                e.preventDefault();\n\n                if (listOpen) {\n                    if (filteredItems.length === 0) break;\n                    const hoverItem = filteredItems[hoverItemIndex];\n\n                    if (value && !multiple && value[itemId] === hoverItem[itemId]) {\n                        closeList();\n                        break;\n                    } else {\n                        handleSelect(filteredItems[hoverItemIndex]);\n                    }\n                }\n\n                break;\n            case 'ArrowDown':\n                e.preventDefault();\n\n                if (listOpen) {\n                    setHoverIndex(1);\n                } else {\n                    listOpen = true;\n                    activeValue = undefined;\n                }\n\n                break;\n            case 'ArrowUp':\n                e.preventDefault();\n\n                if (listOpen) {\n                    setHoverIndex(-1);\n                } else {\n                    listOpen = true;\n                    activeValue = undefined;\n                }\n\n                break;\n            case 'Tab':\n                if (listOpen && focused) {\n                    if (\n                        filteredItems.length === 0 ||\n                        (value && value[itemId] === filteredItems[hoverItemIndex][itemId])\n                    )\n                        return closeList();\n\n                    e.preventDefault();\n                    handleSelect(filteredItems[hoverItemIndex]);\n                    closeList();\n                }\n\n                break;\n            case 'Backspace':\n                if (!multiple || filterText.length > 0) return;\n\n                if (multiple && value && value.length > 0) {\n                    handleMultiItemClear(activeValue !== undefined ? activeValue : value.length - 1);\n                    if (activeValue === 0 || activeValue === undefined) break;\n                    activeValue = value.length > activeValue ? activeValue - 1 : undefined;\n                }\n\n                break;\n            case 'ArrowLeft':\n                if (!value || !multiple || filterText.length > 0) return;\n                if (activeValue === undefined) {\n                    activeValue = value.length - 1;\n                } else if (value.length > activeValue && activeValue !== 0) {\n                    activeValue -= 1;\n                }\n                break;\n            case 'ArrowRight':\n                if (!value || !multiple || filterText.length > 0 || activeValue === undefined) return;\n                if (activeValue === value.length - 1) {\n                    activeValue = undefined;\n                } else if (activeValue < value.length - 1) {\n                    activeValue += 1;\n                }\n                break;\n        }\n    }\n\n    function handleFocus(e) {\n        if (focused && input === document?.activeElement) return;\n        if (e) dispatch('focus', e);\n        input?.focus();\n        focused = true;\n    }\n\n    async function handleBlur(e) {\n        if (isScrolling) return;\n        if (listOpen || focused) {\n            dispatch('blur', e);\n            closeList();\n            focused = false;\n            activeValue = undefined;\n            input?.blur();\n        }\n    }\n\n    function handleClick() {\n        if (disabled) return;\n        if (filterText.length > 0) return listOpen = true;\n        listOpen = !listOpen;\n    }\n\n    export function handleClear() {\n        dispatch('clear', value);\n        value = undefined;\n        closeList();\n        handleFocus();\n    }\n\n    onMount(() => {\n        if (listOpen) focused = true;\n        if (focused && input) input.focus();\n    });\n\n    function itemSelected(selection) {\n        if (selection) {\n            filterText = '';\n            const item = Object.assign({}, selection);\n\n            if (item.groupHeader && !item.selectable) return;\n            value = multiple ? (value ? value.concat([item]) : [item]) : (value = item);\n\n            setTimeout(() => {\n                if (closeListOnChange) closeList();\n                activeValue = undefined;\n                dispatch('change', value);\n                dispatch('select', selection);\n            });\n        }\n    }\n\n    function closeList() {\n        if (clearFilterTextOnBlur) {\n            filterText = '';\n        }\n        listOpen = false;\n    }\n\n    export let ariaValues = (values) => {\n        return `Option ${values}, selected.`;\n    };\n\n    export let ariaListOpen = (label, count) => {\n        return `You are currently focused on option ${label}. There are ${count} results available.`;\n    };\n\n    export let ariaFocused = () => {\n        return `Select is focused, type to refine list, press down to open the menu.`;\n    };\n\n    function handleAriaSelection(_multiple) {\n        let selected = undefined;\n\n        if (_multiple && value.length > 0) {\n            selected = value.map((v) => v[label]).join(', ');\n        } else {\n            selected = value[label];\n        }\n\n        return ariaValues(selected);\n    }\n\n    function handleAriaContent() {\n        if (!filteredItems || filteredItems.length === 0) return '';\n        let _item = filteredItems[hoverItemIndex];\n        if (listOpen && _item) {\n            let count = filteredItems ? filteredItems.length : 0;\n            return ariaListOpen(_item[label], count);\n        } else {\n            return ariaFocused();\n        }\n    }\n\n    let list = null;\n\n    let isScrollingTimer;\n    function handleListScroll() {\n        clearTimeout(isScrollingTimer);\n        isScrollingTimer = setTimeout(() => {\n            isScrolling = false;\n        }, 100);\n    }\n\n    function handleClickOutside(event) {\n        if (!listOpen && !focused && container && !container.contains(event.target) && !list?.contains(event.target)) {\n            handleBlur();\n        }\n    }\n\n    onDestroy(() => {\n        list?.remove();\n    });\n\n    let isScrolling = false;\n\n    function handleSelect(item) {\n        if (!item || item.selectable === false) return;\n        itemSelected(item);\n    }\n\n    function handleHover(i) {\n        if (isScrolling) return;\n        hoverItemIndex = i;\n    }\n\n    function handleItemClick(args) {\n        const { item, i } = args;\n        if (item?.selectable === false) return;\n        if (value && !multiple && value[itemId] === item[itemId]) return closeList();\n        if (isItemSelectable(item)) {\n            hoverItemIndex = i;\n            handleSelect(item);\n        }\n    }\n\n    function setHoverIndex(increment) {\n        let selectableFilteredItems = filteredItems.filter(\n            (item) => !Object.hasOwn(item, 'selectable') || item.selectable === true\n        );\n\n        if (selectableFilteredItems.length === 0) {\n            return (hoverItemIndex = 0);\n        }\n\n        if (increment > 0 && hoverItemIndex === filteredItems.length - 1) {\n            hoverItemIndex = 0;\n        } else if (increment < 0 && hoverItemIndex === 0) {\n            hoverItemIndex = filteredItems.length - 1;\n        } else {\n            hoverItemIndex = hoverItemIndex + increment;\n        }\n\n        const hover = filteredItems[hoverItemIndex];\n\n        if (hover && hover.selectable === false) {\n            if (increment === 1 || increment === -1) setHoverIndex(increment);\n            return;\n        }\n    }\n\n    function isItemActive(item, value, itemId) {\n        if (multiple) return;\n        return value && value[itemId] === item[itemId];\n    }\n\n    function isItemFirst(itemIndex) {\n        return itemIndex === 0;\n    }\n\n    function isItemSelectable(item) {\n        return (item.groupHeader && item.selectable) || item.selectable || !item.hasOwnProperty('selectable');\n    }\n\n    const activeScroll = scrollAction;\n    const hoverScroll = scrollAction;\n\n    function scrollAction(node) {\n        return {\n            update(args) {\n                if (args.scroll) {\n                    handleListScroll();\n                    node.scrollIntoView({ behavior: 'auto', block: 'nearest' });\n                }\n            },\n        };\n    }\n\n    function setListWidth() {\n        const { width } = container.getBoundingClientRect();\n        list.style.width = listAutoWidth ? width + 'px' : 'auto';\n    }\n\n    let _floatingConfig = {\n        strategy: 'absolute',\n        placement: 'bottom-start',\n        middleware: [offset(listOffset), flip(), shift()],\n        autoUpdate: false,\n    };\n\n    const [floatingRef, floatingContent, floatingUpdate] = createFloatingActions(_floatingConfig);\n\n    $: if (container && floatingConfig?.autoUpdate === undefined) {\n        _floatingConfig.autoUpdate = true;\n    }\n\n    let prefloat = true;\n    function listMounted(list, listOpen) {\n        if (!list || !listOpen) return (prefloat = true);\n        setTimeout(() => {\n            prefloat = false;\n        }, 0);\n    }\n</script>\n\n<svelte:window on:click={handleClickOutside} on:keydown={handleKeyDown} />\n\n<div\n    class=\"svelte-select {containerClasses}\"\n    class:multi={multiple}\n    class:disabled\n    class:focused\n    class:list-open={listOpen}\n    class:show-chevron={showChevron}\n    class:error={hasError}\n    style={containerStyles}\n    on:pointerup|preventDefault={handleClick}\n    bind:this={container}\n    use:floatingRef\n    role=\"none\">\n    {#if listOpen}\n        <div\n            use:floatingContent\n            bind:this={list}\n            class=\"svelte-select-list\"\n            class:prefloat\n            on:scroll={handleListScroll}\n            on:pointerup|preventDefault|stopPropagation\n            on:mousedown|preventDefault|stopPropagation\n\t\t\trole=\"none\">\n            {#if $$slots['list-prepend']}<slot name=\"list-prepend\" />{/if}\n            {#if $$slots.list}<slot name=\"list\" {filteredItems} />\n            {:else if filteredItems.length > 0}\n                {#each filteredItems as item, i}\n                    <div\n                        on:mouseover={() => handleHover(i)}\n                        on:focus={() => handleHover(i)}\n                        on:click|stopPropagation={() => handleItemClick({ item, i })}\n                        on:keydown|preventDefault|stopPropagation\n                        class=\"list-item\"\n                        tabindex=\"-1\"\n                        role=\"none\">\n                        <div\n                            use:activeScroll={{ scroll: isItemActive(item, value, itemId), listDom }}\n                            use:hoverScroll={{ scroll: scrollToHoverItem === i, listDom }}\n                            class=\"item\"\n                            class:list-group-title={item.groupHeader}\n                            class:active={isItemActive(item, value, itemId)}\n                            class:first={isItemFirst(i)}\n                            class:hover={hoverItemIndex === i}\n                            class:group-item={item.groupItem}\n                            class:not-selectable={item?.selectable === false}>\n                            <slot name=\"item\" {item} index={i}>\n                                {item?.[label]}\n                            </slot>\n                        </div>\n                    </div>\n                {/each}\n            {:else if !hideEmptyState}\n                <slot name=\"empty\">\n                    <div class=\"empty\">No options</div>\n                </slot>\n            {/if}\n            {#if $$slots['list-append']}<slot name=\"list-append\" />{/if}\n        </div>\n    {/if}\n\n    <span aria-live=\"polite\" aria-atomic=\"false\" aria-relevant=\"additions text\" class=\"a11y-text\">\n        {#if focused}\n            <span id=\"aria-selection\">{ariaSelection}</span>\n            <span id=\"aria-context\">\n                {ariaContext}\n            </span>\n        {/if}\n    </span>\n\n    <div class=\"prepend\">\n        <slot name=\"prepend\" />\n    </div>\n\n    <div class=\"value-container\">\n        {#if hasValue}\n            {#if multiple}\n                {#each value as item, i}\n                    <div\n                        class=\"multi-item\"\n                        class:active={activeValue === i}\n                        class:disabled\n                        on:click|preventDefault={() => (multiFullItemClearable ? handleMultiItemClear(i) : {})}\n                        on:keydown|preventDefault|stopPropagation\n                        role=\"none\">\n                        <span class=\"multi-item-text\">\n                            <slot name=\"selection\" selection={item} index={i}>\n                                {item[label]}\n                            </slot>\n                        </span>\n\n                        {#if !disabled && !multiFullItemClearable && ClearIcon}\n                            <div\n                                class=\"multi-item-clear\"\n                                on:pointerup|preventDefault|stopPropagation={() => handleMultiItemClear(i)}>\n                                <slot name=\"multi-clear-icon\">\n                                    <ClearIcon />\n                                </slot>\n                            </div>\n                        {/if}\n                    </div>\n                {/each}\n            {:else}\n                <div class=\"selected-item\" class:hide-selected-item={hideSelectedItem}>\n                    <slot name=\"selection\" selection={value}>\n                        {value[label]}\n                    </slot>\n                </div>\n            {/if}\n        {/if}\n\n        <input\n            on:keydown={handleKeyDown}\n            on:blur={handleBlur}\n            on:focus={handleFocus}\n            readOnly={!searchable}\n            {..._inputAttributes}\n            bind:this={input}\n            bind:value={filterText}\n            placeholder={placeholderText}\n            style={inputStyles}\n            {disabled} />\n    </div>\n\n    <div class=\"indicators\">\n        {#if loading}\n            <div class=\"icon loading\" aria-hidden=\"true\">\n                <slot name=\"loading-icon\">\n                    <LoadingIcon />\n                </slot>\n            </div>\n        {/if}\n\n        {#if showClear}\n            <button type=\"button\" class=\"icon clear-select\" on:click={handleClear}>\n                <slot name=\"clear-icon\">\n                    <ClearIcon />\n                </slot>\n            </button>\n        {/if}\n\n        {#if showChevron}\n            <div class=\"icon chevron\" aria-hidden=\"true\">\n                <slot name=\"chevron-icon\" {listOpen}>\n                    <ChevronIcon />\n                </slot>\n            </div>\n        {/if}\n    </div>\n\n    <slot name=\"input-hidden\" {value}>\n        <input {name} type=\"hidden\" value={value ? JSON.stringify(value) : null} />\n    </slot>\n\n    {#if required && (!value || value.length === 0)}\n        <slot name=\"required\" {value}>\n            <select class=\"required\" required tabindex=\"-1\" aria-hidden=\"true\" />\n        </slot>\n    {/if}\n</div>\n\n<style>\n    .svelte-select {\n        /* deprecating camelCase custom props in favour of kebab-case for v5 */\n        --borderRadius: var(--border-radius);\n        --clearSelectColor: var(--clear-select-color);\n        --clearSelectWidth: var(--clear-select-width);\n        --disabledBackground: var(--disabled-background);\n        --disabledBorderColor: var(--disabled-border-color);\n        --disabledColor: var(--disabled-color);\n        --disabledPlaceholderColor: var(--disabled-placeholder-color);\n        --disabledPlaceholderOpacity: var(--disabled-placeholder-opacity);\n        --errorBackground: var(--error-background);\n        --errorBorder: var(--error-border);\n        --groupItemPaddingLeft: var(--group-item-padding-left);\n        --groupTitleColor: var(--group-title-color);\n        --groupTitleFontSize: var(--group-title-font-size);\n        --groupTitleFontWeight: var(--group-title-font-weight);\n        --groupTitlePadding: var(--group-title-padding);\n        --groupTitleTextTransform: var(--group-title-text-transform);\n        --groupTitleBorderColor: var(--group-title-border-color);\n        --groupTitleBorderWidth: var(--group-title-border-width);\n        --groupTitleBorderStyle: var(--group-title-border-style);\n        --indicatorColor: var(--chevron-color);\n        --indicatorHeight: var(--chevron-height);\n        --indicatorWidth: var(--chevron-width);\n        --inputColor: var(--input-color);\n        --inputLeft: var(--input-left);\n        --inputLetterSpacing: var(--input-letter-spacing);\n        --inputMargin: var(--input-margin);\n        --inputPadding: var(--input-padding);\n        --itemActiveBackground: var(--item-active-background);\n        --itemColor: var(--item-color);\n        --itemFirstBorderRadius: var(--item-first-border-radius);\n        --itemHoverBG: var(--item-hover-bg);\n        --itemHoverColor: var(--item-hover-color);\n        --itemIsActiveBG: var(--item-is-active-bg);\n        --itemIsActiveColor: var(--item-is-active-color);\n        --itemIsNotSelectableColor: var(--item-is-not-selectable-color);\n        --itemPadding: var(--item-padding);\n        --listBackground: var(--list-background);\n        --listBorder: var(--list-border);\n        --listBorderRadius: var(--list-border-radius);\n        --listEmptyColor: var(--list-empty-color);\n        --listEmptyPadding: var(--list-empty-padding);\n        --listEmptyTextAlign: var(--list-empty-text-align);\n        --listMaxHeight: var(--list-max-height);\n        --listPosition: var(--list-position);\n        --listShadow: var(--list-shadow);\n        --listZIndex: var(--list-z-index);\n        --multiItemBG: var(--multi-item-bg);\n        --multiItemBorderRadius: var(--multi-item-border-radius);\n        --multiItemDisabledHoverBg: var(--multi-item-disabled-hover-bg);\n        --multiItemDisabledHoverColor: var(--multi-item-disabled-hover-color);\n        --multiItemHeight: var(--multi-item-height);\n        --multiItemMargin: var(--multi-item-margin);\n        --multiItemPadding: var(--multi-item-padding);\n        --multiSelectInputMargin: var(--multi-select-input-margin);\n        --multiSelectInputPadding: var(--multi-select-input-padding);\n        --multiSelectPadding: var(--multi-select-padding);\n        --placeholderColor: var(--placeholder-color);\n        --placeholderOpacity: var(--placeholder-opacity);\n        --selectedItemPadding: var(--selected-item-padding);\n        --spinnerColor: var(--spinner-color);\n        --spinnerHeight: var(--spinner-height);\n        --spinnerWidth: var(--spinner-width);\n\n        --internal-padding: 0 0 0 16px;\n\n        border: var(--border, 1px solid #d8dbdf);\n        border-radius: var(--border-radius, 6px);\n        min-height: var(--height, 42px);\n        position: relative;\n        display: flex;\n        align-items: stretch;\n        padding: var(--padding, var(--internal-padding));\n        background: var(--background, #fff);\n        margin: var(--margin, 0);\n        width: var(--width, 100%);\n        font-size: var(--font-size, 16px);\n        max-height: var(--max-height);\n    }\n\n    * {\n        box-sizing: var(--box-sizing, border-box);\n    }\n\n    .svelte-select:hover {\n        border: var(--border-hover, 1px solid #b2b8bf);\n    }\n\n    .value-container {\n        display: flex;\n        flex: 1 1 0%;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: 5px 10px;\n        padding: var(--value-container-padding, 5px 0);\n        position: relative;\n        overflow: var(--value-container-overflow, hidden);\n        align-self: stretch;\n    }\n\n    .prepend,\n    .indicators {\n        display: flex;\n        flex-shrink: 0;\n        align-items: center;\n    }\n\n    .indicators {\n        position: var(--indicators-position);\n        top: var(--indicators-top);\n        right: var(--indicators-right);\n        bottom: var(--indicators-bottom);\n    }\n\n    input {\n        position: absolute;\n        cursor: default;\n        border: none;\n        color: var(--input-color, var(--item-color));\n        padding: var(--input-padding, 0);\n        letter-spacing: var(--input-letter-spacing, inherit);\n        margin: var(--input-margin, 0);\n        min-width: 10px;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        background: transparent;\n        font-size: var(--font-size, 16px);\n    }\n\n    :not(.multi) > .value-container > input {\n        width: 100%;\n        height: 100%;\n    }\n\n    input::placeholder {\n        color: var(--placeholder-color, #78848f);\n        opacity: var(--placeholder-opacity, 1);\n    }\n\n    input:focus {\n        outline: none;\n    }\n\n    .svelte-select.focused {\n        border: var(--border-focused, 1px solid #006fe8);\n        border-radius: var(--border-radius-focused, var(--border-radius, 6px));\n    }\n\n    .disabled {\n        background: var(--disabled-background, #ebedef);\n        border-color: var(--disabled-border-color, #ebedef);\n        color: var(--disabled-color, #c1c6cc);\n    }\n\n    .disabled input::placeholder {\n        color: var(--disabled-placeholder-color, #c1c6cc);\n        opacity: var(--disabled-placeholder-opacity, 1);\n    }\n\n    .selected-item {\n        position: relative;\n        overflow: var(--selected-item-overflow, hidden);\n        padding: var(--selected-item-padding, 0 20px 0 0);\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        color: var(--selected-item-color, inherit);\n        font-size: var(--font-size, 16px);\n    }\n\n    .multi .selected-item {\n        position: absolute;\n        line-height: var(--height, 42px);\n        height: var(--height, 42px);\n    }\n\n    .selected-item:focus {\n        outline: none;\n    }\n\n    .hide-selected-item {\n        opacity: 0;\n    }\n\n    .icon {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .clear-select {\n        all: unset;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: var(--clear-select-width, 40px);\n        height: var(--clear-select-height, 100%);\n        color: var(--clear-select-color, var(--icons-color));\n        margin: var(--clear-select-margin, 0);\n        pointer-events: all;\n        flex-shrink: 0;\n    }\n\n    .clear-select:focus {\n        outline: var(--clear-select-focus-outline, 1px solid #006fe8);\n    }\n\n    .loading {\n        width: var(--loading-width, 40px);\n        height: var(--loading-height);\n        color: var(--loading-color, var(--icons-color));\n        margin: var(--loading--margin, 0);\n        flex-shrink: 0;\n    }\n\n    .chevron {\n        width: var(--chevron-width, 40px);\n        height: var(--chevron-height, 40px);\n        background: var(--chevron-background, transparent);\n        pointer-events: var(--chevron-pointer-events, none);\n        color: var(--chevron-color, var(--icons-color));\n        border: var(--chevron-border, 0 0 0 1px solid #d8dbdf);\n        flex-shrink: 0;\n    }\n\n    .multi {\n        padding: var(--multi-select-padding, var(--internal-padding));\n    }\n\n    .multi input {\n        padding: var(--multi-select-input-padding, 0);\n        position: relative;\n        margin: var(--multi-select-input-margin, 5px 0);\n        flex: 1 1 40px;\n    }\n\n    .svelte-select.error {\n        border: var(--error-border, 1px solid #ff2d55);\n        background: var(--error-background, #fff);\n    }\n\n    .a11y-text {\n        z-index: 9999;\n        border: 0px;\n        clip: rect(1px, 1px, 1px, 1px);\n        height: 1px;\n        width: 1px;\n        position: absolute;\n        overflow: hidden;\n        padding: 0px;\n        white-space: nowrap;\n    }\n\n    .multi-item {\n        background: var(--multi-item-bg, #ebedef);\n        margin: var(--multi-item-margin, 0);\n        outline: var(--multi-item-outline, 1px solid #ddd);\n        border-radius: var(--multi-item-border-radius, 4px);\n        height: var(--multi-item-height, 25px);\n        line-height: var(--multi-item-height, 25px);\n        display: flex;\n        cursor: default;\n        padding: var(--multi-item-padding, 0 5px);\n        overflow: hidden;\n        gap: var(--multi-item-gap, 4px);\n        outline-offset: -1px;\n        max-width: var(--multi-max-width, none);\n        color: var(--multi-item-color, var(--item-color));\n    }\n\n    .multi-item.disabled:hover {\n        background: var(--multi-item-disabled-hover-bg, #ebedef);\n        color: var(--multi-item-disabled-hover-color, #c1c6cc);\n    }\n\n    .multi-item-text {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n\n    .multi-item-clear {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        --clear-icon-color: var(--multi-item-clear-icon-color, #000);\n    }\n\n    .multi-item.active {\n        outline: var(--multi-item-active-outline, 1px solid #006fe8);\n    }\n\n    .svelte-select-list {\n        box-shadow: var(--list-shadow, 0 2px 3px 0 rgba(44, 62, 80, 0.24));\n        border-radius: var(--list-border-radius, 4px);\n        max-height: var(--list-max-height, 252px);\n        overflow-y: auto;\n        background: var(--list-background, #fff);\n        position: var(--list-position, absolute);\n        z-index: var(--list-z-index, 2);\n        border: var(--list-border);\n    }\n\n    .prefloat {\n        opacity: 0;\n        pointer-events: none;\n    }\n\n    .list-group-title {\n        color: var(--group-title-color, #8f8f8f);\n        cursor: default;\n        font-size: var(--group-title-font-size, 16px);\n        font-weight: var(--group-title-font-weight, 600);\n        height: var(--height, 42px);\n        line-height: var(--height, 42px);\n        padding: var(--group-title-padding, 0 20px);\n        text-overflow: ellipsis;\n        overflow-x: hidden;\n        white-space: nowrap;\n        text-transform: var(--group-title-text-transform, uppercase);\n        border-width: var(--group-title-border-width, medium);\n        border-style: var(--group-title-border-style, none);\n        border-color: var(--group-title-border-color, color);\n    }\n\n    .empty {\n        text-align: var(--list-empty-text-align, center);\n        padding: var(--list-empty-padding, 20px 0);\n        color: var(--list-empty-color, #78848f);\n    }\n\n    .item {\n        cursor: default;\n        height: var(--item-height, var(--height, 42px));\n        line-height: var(--item-line-height, var(--height, 42px));\n        padding: var(--item-padding, 0 20px);\n        color: var(--item-color, inherit);\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n        transition: var(--item-transition, all 0.2s);\n        align-items: center;\n        width: 100%;\n    }\n\n    .item.group-item {\n        padding-left: var(--group-item-padding-left, 40px);\n    }\n\n    .item:active {\n        background: var(--item-active-background, #b9daff);\n    }\n\n    .item.active {\n        background: var(--item-is-active-bg, #007aff);\n        color: var(--item-is-active-color, #fff);\n    }\n\n    .item.first {\n        border-radius: var(--item-first-border-radius, 4px 4px 0 0);\n    }\n\n    .item.hover:not(.active) {\n        background: var(--item-hover-bg, #e7f2ff);\n        color: var(--item-hover-color, inherit);\n    }\n\n    .item.not-selectable,\n    .item.hover.item.not-selectable,\n    .item.active.item.not-selectable,\n    .item.not-selectable:active {\n        color: var(--item-is-not-selectable-color, #999);\n        background: transparent;\n    }\n\n    .required {\n        opacity: 0;\n        z-index: -1;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n    }\n</style>\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import ObsTab from \"./components/OBSTab.svelte\";\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n  import { getSetting, setSetting } from \"../utils/settings.js\";\n  import { getContext } from \"svelte\";\n  import SceneSelect from \"./components/SceneSelect.svelte\";\n  import Select from \"svelte-select\";\n\n  const useWebSocket = getSetting(\"enableOBSWebsocket\");\n  let obssettings = getSetting(\"obsRemote\");\n\n  export let elementRoot = void 0;\n\n  let entries = Object.getOwnPropertyNames(obssettings);\n\n  if (!useWebSocket) {\n    entries = entries.filter((entry) => entry != \"onStopStreaming\");\n  }\n\n  function formatKey(key) {\n    return key.replace(/([a-z])([A-Z])/g, \"$1 $2\").substring(2);\n  }\n\n  const context = getContext(\"#external\");\n\n  async function submit() {\n    await setSetting(\"obsRemote\", obssettings);\n    context.application.close();\n  }\n\n  let handleAdd;\n\n  let selection = \"\";\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <main>\n    <div class=\"header\">\n      <Select\n        bind:justValue=\"{selection}\"\n        value=\"{entries[0]}\"\n        items=\"{entries}\"\n        searchable=\"{false}\"\n        clearable=\"{false}\"\n        containerStyles=\"background-color: white;\"\n      >\n        <div slot=\"selection\" let:selection>\n          <i\n            class=\"fas {selection.value === 'onStopStreaming'\n              ? 'fa-signal-stream'\n              : 'fa-dice-d20'}\"\n          ></i>\n          {formatKey(selection.value)}\n        </div>\n        <div slot=\"item\" let:item>\n          <i\n            class=\"fas {item.value === 'onStopStreaming'\n              ? 'fa-signal-stream'\n              : 'fa-dice-d20'}\"\n          ></i>\n          {formatKey(item.value)}\n        </div>\n      </Select>\n      <button\n        class=\"add\"\n        on:click=\"{() => {\n          console.log(handleAdd);\n          if (handleAdd !== undefined) handleAdd();\n        }}\"\n        type=\"button\"><i class=\"fas fa-plus\"></i></button\n      >\n    </div>\n    <hr />\n    <div>\n      <section class=\"content\">\n        {#if selection === \"onSceneLoad\"}\n          <SceneSelect\n            bind:handleAdd=\"{handleAdd}\"\n            bind:eventArray=\"{obssettings[selection]}\"\n            useWebSocket=\"{useWebSocket}\"\n          ></SceneSelect>\n        {:else if selection !== \"\"}\n          {#key selection}\n            <ObsTab\n              bind:handleAdd=\"{handleAdd}\"\n              bind:eventArray=\"{obssettings[selection]}\"\n              useWebSocket=\"{useWebSocket}\"\n            />\n          {/key}\n        {/if}\n      </section>\n      <footer>\n        <hr />\n        <button class=\"submit\" on:click=\"{submit}\">Submit</button>\n      </footer>\n    </div>\n  </main>\n</ApplicationShell>\n\n<style>\n  .header {\n    display: grid;\n    grid-template-columns: auto 45px;\n  }\n  footer {\n    position: absolute;\n    width: 100%;\n    bottom: 0;\n    left: 0;\n    padding: 10px;\n  }\n</style>\n","import { linear }             from 'svelte/easing';\n\nimport { lerp }               from '@typhonjs-fvtt/runtime/math/interpolate';\nimport { isObject }           from '@typhonjs-fvtt/runtime/util/object';\n\n/**\n * @template T\n *\n * Provides the ability the save / restore application state for positional and UI state such as minimized status.\n *\n * You can restore a saved state with animation; please see the options of {@link ApplicationState.restore}.\n */\nexport class ApplicationState\n{\n   /** @type {T} */\n   #application;\n\n   /** @type {Map<string, ApplicationStateData>} */\n   #dataSaved = new Map();\n\n   /**\n    * @param {T}   application - The application.\n    */\n   constructor(application)\n   {\n      this.#application = application;\n\n      Object.seal(this);\n   }\n\n   /**\n    * Returns current application state along with any extra data passed into method.\n    *\n    * @param {object} [extra] - Extra data to add to application state.\n    *\n    * @returns {ApplicationStateData} Passed in object with current application state.\n    */\n   get(extra = {})\n   {\n      return Object.assign(extra, {\n         position: this.#application?.position?.get(),\n         beforeMinimized: this.#application?.position?.state.get({ name: '#beforeMinimized' }),\n         options: Object.assign({}, this.#application?.options),\n         ui: { minimized: this.#application?.reactive?.minimized }\n      });\n   }\n\n   /**\n    * Returns any stored save state by name.\n    *\n    * @param {object}   options - Options.\n    *\n    * @param {string}   options.name - Saved data set name.\n    *\n    * @returns {ApplicationStateData} The saved data set.\n    */\n   getSave({ name })\n   {\n      if (typeof name !== 'string')\n      {\n         throw new TypeError(`ApplicationState - getSave error: 'name' is not a string.`);\n      }\n\n      return this.#dataSaved.get(name);\n   }\n\n   /**\n    * Removes and returns any application state by name.\n    *\n    * @param {object}   options - Options.\n    *\n    * @param {string}   options.name - Name to remove and retrieve.\n    *\n    * @returns {ApplicationStateData} Saved application data.\n    */\n   remove({ name })\n   {\n      if (typeof name !== 'string') { throw new TypeError(`ApplicationState - remove: 'name' is not a string.`); }\n\n      const data = this.#dataSaved.get(name);\n      this.#dataSaved.delete(name);\n\n      return data;\n   }\n\n   /**\n    * Restores a saved application state returning the data. Several optional parameters are available\n    * to control whether the restore action occurs silently (no store / inline styles updates), animates\n    * to the stored data, or simply sets the stored data. Restoring via {@link AnimationAPI.to} allows\n    * specification of the duration, easing, and interpolate functions along with configuring a Promise to be\n    * returned if awaiting the end of the animation.\n    *\n    * @param {object}            params - Parameters\n    *\n    * @param {string}            params.name - Saved data set name.\n    *\n    * @param {boolean}           [params.remove=false] - Remove data set.\n    *\n    * @param {boolean}           [params.async=false] - If animating return a Promise that resolves with any saved data.\n    *\n    * @param {boolean}           [params.animateTo=false] - Animate to restore data.\n    *\n    * @param {number}            [params.duration=0.1] - Duration in seconds.\n    *\n    * @param {Function}          [params.ease=linear] - Easing function.\n    *\n    * @param {Function}          [params.interpolate=lerp] - Interpolation function.\n    *\n    * @returns {ApplicationStateData|Promise<ApplicationStateData>} Saved application data.\n    */\n   restore({ name, remove = false, async = false, animateTo = false, duration = 0.1, ease = linear,\n    interpolate = lerp })\n   {\n      if (typeof name !== 'string')\n      {\n         throw new TypeError(`ApplicationState - restore error: 'name' is not a string.`);\n      }\n\n      const dataSaved = this.#dataSaved.get(name);\n\n      if (dataSaved)\n      {\n         if (remove) { this.#dataSaved.delete(name); }\n\n         if (async)\n         {\n            return this.set(dataSaved, { async, animateTo, duration, ease, interpolate }).then(() => dataSaved);\n         }\n         else\n         {\n            this.set(dataSaved, { async, animateTo, duration, ease, interpolate });\n         }\n      }\n\n      return dataSaved;\n   }\n\n   /**\n    * Saves current application state with the opportunity to add extra data to the saved state.\n    *\n    * @param {object}   options - Options.\n    *\n    * @param {string}   options.name - name to index this saved data.\n    *\n    * @param {...*}     [options.extra] - Extra data to add to saved data.\n    *\n    * @returns {ApplicationStateData} Current application data\n    */\n   save({ name, ...extra })\n   {\n      if (typeof name !== 'string') { throw new TypeError(`ApplicationState - save error: 'name' is not a string.`); }\n\n      const data = this.get(extra);\n\n      this.#dataSaved.set(name, data);\n\n      return data;\n   }\n\n   /**\n    * Restores a saved application state returning the data. Several optional parameters are available\n    * to control whether the restore action occurs silently (no store / inline styles updates), animates\n    * to the stored data, or simply sets the stored data. Restoring via {@link AnimationAPI.to} allows\n    * specification of the duration, easing, and interpolate functions along with configuring a Promise to be\n    * returned if awaiting the end of the animation.\n    *\n    * Note: If serializing application state any minimized apps will use the before minimized state on initial render\n    * of the app as it is currently not possible to render apps with Foundry VTT core API in the minimized state.\n    *\n    * TODO: THIS METHOD NEEDS TO BE REFACTORED WHEN TRL IS MADE INTO A STANDALONE FRAMEWORK.\n    *\n    * @param {ApplicationStateData}   data - Saved data set name.\n    *\n    * @param {object}            [opts] - Optional parameters\n    *\n    * @param {boolean}           [opts.async=false] - If animating return a Promise that resolves with any saved data.\n    *\n    * @param {boolean}           [opts.animateTo=false] - Animate to restore data.\n    *\n    * @param {number}            [opts.duration=0.1] - Duration in seconds.\n    *\n    * @param {Function}          [opts.ease=linear] - Easing function.\n    *\n    * @param {Function}          [opts.interpolate=lerp] - Interpolation function.\n    *\n    * @returns {T | Promise<T>} When synchronous the application or Promise when animating resolving with application.\n    */\n   set(data, { async = false, animateTo = false, duration = 0.1, ease = linear, interpolate = lerp } = {})\n   {\n      if (!isObject(data))\n      {\n         throw new TypeError(`ApplicationState - restore error: 'data' is not an object.`);\n      }\n\n      const application = this.#application;\n\n      if (!isObject(data?.position))\n      {\n         console.warn(`ApplicationState.set warning: 'data.position' is not an object.`);\n         return application;\n      }\n\n      // TODO: TAKE NOTE THAT WE ARE ACCESSING A FOUNDRY APP v1 GETTER HERE TO DETERMINE IF APPLICATION IS RENDERED.\n      // TODO: THIS NEEDS TO BE REFACTORED WHEN CONVERTING TRL TO A GENERIC FRAMEWORK.\n      const rendered = application.rendered;\n\n      if (animateTo && !rendered)\n      {\n         console.warn(`ApplicationState.set warning: Application is not rendered and 'animateTo' is true.`);\n         return application;\n      }\n\n      // Update data directly with no store or inline style updates.\n      if (animateTo)  // Animate to saved data.\n      {\n         // Provide special handling to potentially change transform origin as this parameter is not animated.\n         if (data.position.transformOrigin !== application.position.transformOrigin)\n         {\n            application.position.transformOrigin = data.position.transformOrigin;\n         }\n\n         if (isObject(data?.ui))\n         {\n            const minimized = typeof data.ui?.minimized === 'boolean' ? data.ui.minimized : false;\n\n            if (application?.reactive?.minimized && !minimized)\n            {\n               application.maximize({ animate: false, duration: 0 });\n            }\n         }\n\n         const promise = application.position.animate.to(data.position,\n          { duration, ease, interpolate }).finished.then((cancelled) =>\n         {\n            if (cancelled) { return application; }\n\n            // Merge in saved options to application.\n            if (isObject(data?.options))\n            {\n               application?.reactive.mergeOptions(data.options);\n            }\n\n            if (isObject(data?.ui))\n            {\n               const minimized = typeof data.ui?.minimized === 'boolean' ? data.ui.minimized : false;\n\n               // Application is currently minimized and stored state is not, so reset minimized state without\n               // animation.\n               if (!application?.reactive?.minimized && minimized)\n               {\n                  application.minimize({ animate: false, duration: 0 });\n               }\n            }\n\n            if (isObject(data?.beforeMinimized))\n            {\n               application.position.state.set({ name: '#beforeMinimized', ...data.beforeMinimized });\n            }\n\n            return application;\n         });\n\n         // Return a Promise with the application that resolves after animation ends.\n         if (async) { return promise; }\n      }\n      else\n      {\n         if (rendered)\n         {\n            // Merge in saved options to application.\n            if (isObject(data?.options))\n            {\n               application?.reactive.mergeOptions(data.options);\n            }\n\n            if (isObject(data?.ui))\n            {\n               const minimized = typeof data.ui?.minimized === 'boolean' ? data.ui.minimized : false;\n\n               // Application is currently minimized and stored state is not, so reset minimized state without\n               // animation.\n               if (application?.reactive?.minimized && !minimized)\n               {\n                  application.maximize({ animate: false, duration: 0 });\n               }\n               else if (!application?.reactive?.minimized && minimized)\n               {\n                  application.minimize({ animate: false, duration });\n               }\n            }\n\n            if (isObject(data?.beforeMinimized))\n            {\n               application.position.state.set({ name: '#beforeMinimized', ...data.beforeMinimized });\n            }\n\n            // Default options is to set data for an immediate update.\n            application.position.set(data.position);\n         }\n         else\n         {\n            // When not rendered set position to the 'beforeMinimized' data if it exists otherwise set w/ 'position'.\n            // Currently, w/ Foundry core Application API it is impossible to initially render an app in the minimized\n            // state.\n\n            let positionData = data.position;\n\n            if (isObject(data.beforeMinimized))\n            {\n               // Take before minimized data.\n               positionData = data.beforeMinimized;\n\n               // Apply position left / top to before minimized data. This covers the case when an app is minimized,\n               // but then moved. This allows restoration of the before minimized parameters w/ the last position\n               // location.\n               positionData.left = data.position.left;\n               positionData.top = data.position.top;\n            }\n\n            application.position.set(positionData);\n         }\n      }\n\n      return application;\n   }\n}\n\n/**\n * @typedef {object} ApplicationStateData\n *\n * @property {import('@typhonjs-fvtt/runtime/svelte/store/position').TJSPositionDataExtended}   position Application position.\n *\n * @property {object}         beforeMinimized Any application saved position state for #beforeMinimized\n *\n * @property {object}         options Application options.\n *\n * @property {object}         ui Application UI state.\n */\n","/**\n * Provides a mechanism to retrieve and query all mounted Svelte components including the main application shell.\n */\nexport class GetSvelteData\n{\n   /** @type {import('./types').MountedAppShell[] | null[]} */\n   #applicationShellHolder;\n\n   /** @type {import('./types').SvelteData[]} */\n   #svelteData;\n\n   /**\n    * Keep a direct reference to the SvelteData array in an associated {@link SvelteApplication}.\n    *\n    * @param {import('./types').MountedAppShell[] | null[]}  applicationShellHolder - A reference to the\n    *        MountedAppShell array.\n    *\n    * @param {import('./types').SvelteData[]}  svelteData - A reference to the SvelteData array of mounted components.\n    */\n   constructor(applicationShellHolder, svelteData)\n   {\n      this.#applicationShellHolder = applicationShellHolder;\n      this.#svelteData = svelteData;\n   }\n\n   /**\n    * Returns any mounted {@link MountedAppShell}.\n    *\n    * @returns {import('./types').MountedAppShell | null} Any mounted application shell.\n    */\n   get applicationShell() { return this.#applicationShellHolder[0]; }\n\n   /**\n    * Returns the indexed Svelte component.\n    *\n    * @param {number}   index -\n    *\n    * @returns {object} The loaded Svelte component.\n    */\n   component(index)\n   {\n      const data = this.#svelteData[index];\n      return data?.component ?? void 0;\n   }\n\n   /**\n    * Returns the Svelte component entries iterator.\n    *\n    * @returns {IterableIterator<[number, import('svelte').SvelteComponent]>} Svelte component entries iterator.\n    * @yields\n    */\n   *componentEntries()\n   {\n      for (let cntr = 0; cntr < this.#svelteData.length; cntr++)\n      {\n         yield [cntr, this.#svelteData[cntr].component];\n      }\n   }\n\n   /**\n    * Returns the Svelte component values iterator.\n    *\n    * @returns {IterableIterator<import('svelte').SvelteComponent>} Svelte component values iterator.\n    * @yields\n    */\n   *componentValues()\n   {\n      for (let cntr = 0; cntr < this.#svelteData.length; cntr++)\n      {\n         yield this.#svelteData[cntr].component;\n      }\n   }\n\n   /**\n    * Returns the indexed SvelteData entry.\n    *\n    * @param {number}   index - The index of SvelteData instance to retrieve.\n    *\n    * @returns {import('./types').SvelteData} The loaded Svelte config + component.\n    */\n   data(index)\n   {\n      return this.#svelteData[index];\n   }\n\n   /**\n    * Returns the {@link SvelteData} instance for a given component.\n    *\n    * @param {import('svelte').SvelteComponent} component - Svelte component.\n    *\n    * @returns {import('./types').SvelteData} -  The loaded Svelte config + component.\n    */\n   dataByComponent(component)\n   {\n      for (const data of this.#svelteData)\n      {\n         if (data.component === component) { return data; }\n      }\n\n      return void 0;\n   }\n\n   /**\n    * Returns the SvelteData entries iterator.\n    *\n    * @returns {IterableIterator<[number, import('./types').SvelteData]>} SvelteData entries iterator.\n    */\n   dataEntries()\n   {\n      return this.#svelteData.entries();\n   }\n\n   /**\n    * Returns the SvelteData values iterator.\n    *\n    * @returns {IterableIterator<import('./types').SvelteData>} SvelteData values iterator.\n    */\n   dataValues()\n   {\n      return this.#svelteData.values();\n   }\n\n   /**\n    * Returns the length of the mounted Svelte component list.\n    *\n    * @returns {number} Length of mounted Svelte component list.\n    */\n   get length()\n   {\n      return this.#svelteData.length;\n   }\n}\n","import { writable, get } from 'svelte/store';\n\n/**\n * Generates derived, readable, writable helper functions wrapping the given Storage API provided with any additional\n * customization for data serialization. By default, JSON serialization is used.\n *\n * @param {object}   opts - Generator options.\n *\n * @param {Storage}  storage - The web storage source.\n *\n * @param {(value: any, ...rest: any[]) => string}  [opts.serialize] - Replace with custom serialization;\n *        default: `JSON.stringify`.\n *\n * @param {(value: string, ...rest: any[]) => any}  [opts.deserialize] - Replace with custom deserialization;\n *        default: `JSON.parse`.\n *\n * @returns {StorageStores} A complete set of store helper functions and associated storage API instance and\n *          serialization strategy.\n */\nfunction storeGenerator({ storage, serialize = JSON.stringify, deserialize = JSON.parse }) {\n    function isSimpleDeriver(deriver) {\n        return deriver.length < 2;\n    }\n    function storageReadable(key, value, start) {\n        return {\n            subscribe: storageWritable(key, value, start).subscribe\n        };\n    }\n    function storageWritable(key, value, start) {\n        function wrap_start(ogSet) {\n            return start(function wrap_set(new_value) {\n                if (storage) {\n                    storage.setItem(key, serialize(new_value));\n                }\n                return ogSet(new_value);\n            }, function wrap_update(fn) {\n                set(fn(get(ogStore)));\n            });\n        }\n        if (storage) {\n            const storageValue = storage.getItem(key);\n            try {\n                if (storageValue) {\n                    value = deserialize(storageValue);\n                }\n            }\n            catch (err) { /**/ }\n            storage.setItem(key, serialize(value));\n        }\n        const ogStore = writable(value, start ? wrap_start : void 0);\n        function set(new_value) {\n            if (storage) {\n                storage.setItem(key, serialize(new_value));\n            }\n            ogStore.set(new_value);\n        }\n        function update(fn) {\n            set(fn(get(ogStore)));\n        }\n        function subscribe(run, invalidate) {\n            return ogStore.subscribe(run, invalidate);\n        }\n        return { set, update, subscribe };\n    }\n    function storageDerived(key, stores, fn, initial_value) {\n        const single = !Array.isArray(stores);\n        const stores_array = single ? [stores] : stores;\n        if (storage && storage.getItem(key)) {\n            try {\n                initial_value = deserialize(storage.getItem(key));\n            }\n            catch (err) { /**/ }\n        }\n        return storageReadable(key, initial_value, (set, update) => {\n            let inited = false;\n            const values = [];\n            let pending = 0;\n            let cleanup;\n            const sync = () => {\n                if (pending) {\n                    return;\n                }\n                cleanup?.();\n                const input = single ? values[0] : values;\n                if (isSimpleDeriver(fn)) {\n                    set(fn(input));\n                }\n                else {\n                    const result = fn(input, set, update);\n                    if (typeof result === 'function') {\n                        cleanup = result;\n                    }\n                }\n            };\n            const unsubscribers = stores_array.map((store, i) => store.subscribe((value) => {\n                values[i] = value;\n                pending &= ~(1 << i);\n                if (inited) {\n                    sync();\n                }\n            }, () => { pending |= (1 << i); }));\n            inited = true;\n            sync();\n            return function stop() {\n                // Equivalent to run_all from Svelte internals.\n                unsubscribers.forEach((unsubscriber) => unsubscriber());\n                cleanup?.();\n            };\n        });\n    }\n    return {\n        readable: storageReadable,\n        writable: storageWritable,\n        derived: storageDerived,\n        storage,\n        serialize,\n        deserialize\n    };\n}\n\n/**\n * Provides all Storage API enabled `localStorage` store helper functions. Data is serialized as JSON.\n */\nconst localStores = storeGenerator({ storage: globalThis?.localStorage });\n/**\n * Provides the Storage API enabled derived `localStorage` store helper function. Data is serialized as JSON.\n */\nlocalStores.derived;\n/**\n * Provides the Storage API enabled readable `localStorage` store helper function. Data is serialized as JSON.\n */\nlocalStores.readable;\n/**\n * Provides the Storage API enabled writable `localStorage` store helper function. Data is serialized as JSON.\n */\nlocalStores.writable;\n\n/**\n * Provides all Storage API enabled `sessionStorage` store helper functions. Data is serialized as JSON.\n */\nconst sessionStores = storeGenerator({ storage: globalThis?.sessionStorage });\n/**\n * Provides the Storage API enabled derived `sessionStorage` store helper function. Data is serialized as JSON.\n */\nsessionStores.derived;\n/**\n * Provides the Storage API enabled readable `sessionStorage` store helper function. Data is serialized as JSON.\n */\nsessionStores.readable;\n/**\n * Provides the Storage API enabled writable `sessionStorage` store helper function. Data is serialized as JSON.\n */\nsessionStores.writable;\n\n/**\n * Provides the base Storage API store manager. It is recommended to use {@link TJSLocalStorage} &\n * {@link TJSSessionStorage} for standard browser local and session storage use cases. TJSWebStorage exists\n * to provide additional customization options for custom Storage API compatible storage instances and custom\n * serialization configuration.\n */\nclass TJSWebStorage\n{\n   /** @type {import('./').StorageStores} */\n   #storageStores;\n\n   /**\n    * @type {(Map<string, {\n    *    store: import('svelte/store').Writable,\n    *    deserialize?: (value: string, ...rest: any[]) => any,\n    *    serialize?: (value: any, ...rest: any[]) => string\n    * }>)}\n    */\n   #stores = new Map();\n\n   /**\n    * @param {import('./').StorageStores} storageStores - Provides a complete set of\n    *        storage API store helper functions and the associated storage API instance and serializations strategy.\n    */\n   constructor(storageStores)\n   {\n      this.#storageStores = storageStores;\n   }\n\n\n   /**\n    * @param {string}   key - Storage key.\n    *\n    * @returns {(value: string, ...rest: any[]) => any} Deserialize function.\n    */\n   #getDeserialize(key)\n   {\n      return this.#stores.get(key)?.deserialize ?? this.#storageStores.deserialize;\n   }\n\n\n   /**\n    * @param {string}   key - Storage key.\n    *\n    * @returns {(value: any, ...rest: any[]) => string} Serialize function.\n    */\n   #getSerialize(key)\n   {\n      return this.#stores.get(key)?.serialize ?? this.#storageStores.serialize;\n   }\n\n   /**\n    * Creates a new store for the given key.\n    *\n    * @template T\n    *\n    * @param {string}   key - Key to lookup in stores map.\n    *\n    * @param {T}        [defaultValue] - A default value to set for the store.\n    *\n    * @param {import('./').StorageStores} [storageStores] - Additional store creation options.\n    *\n    * @returns {import('svelte/store').Writable<T>} The new store.\n    */\n   #createStore(key, defaultValue = void 0, storageStores)\n   {\n      try\n      {\n         const value = this.#storageStores.storage.getItem(key);\n         if (value !== null)\n         {\n            const deserialize = storageStores?.deserialize ?? this.#storageStores.deserialize;\n            defaultValue = deserialize(value);\n         }\n      }\n      catch (err) { /**/ }\n\n      const writable = storageStores?.writable ?? this.#storageStores.writable;\n\n      return writable(key, defaultValue);\n   }\n\n   /**\n    * Gets a store from the `stores` Map or creates a new store for the key and a given default value.\n    *\n    * @template T\n    *\n    * @param {string}   key - Key to lookup in stores map.\n    *\n    * @param {T}        [defaultValue] - A default value to set for the store.\n    *\n    * @param {import('./').StorageStores} [storageStores] - Additional store creation options.\n    *\n    * @returns {import('svelte/store').Writable<T>} The store for the given key.\n    */\n   #getStore(key, defaultValue = void 0, storageStores)\n   {\n      const storeEntry = this.#stores.get(key);\n      if (storeEntry) { return storeEntry.store; }\n\n      const store = this.#createStore(key, defaultValue, storageStores);\n\n      // Set any key specific storage helper details.\n      this.#stores.set(key, {\n         store,\n         deserialize: storageStores?.deserialize,\n         serialize: storageStores?.serialize\n      });\n\n      return store;\n   }\n\n   /**\n    * Get value from the storage API.\n    *\n    * @param {string}   key - Key to lookup in storage API.\n    *\n    * @param {*}        [defaultValue] - A default value to return if key not present in session storage.\n    *\n    * @returns {*} Value from session storage or if not defined any default value provided.\n    */\n   getItem(key, defaultValue)\n   {\n      let value = defaultValue;\n\n      const storageValue = this.#storageStores.storage.getItem(key);\n\n      if (storageValue !== null)\n      {\n         try\n         {\n            value = this.#getDeserialize(key)(storageValue);\n         }\n         catch (err)\n         {\n            value = defaultValue;\n         }\n      }\n      else if (defaultValue !== void 0)\n      {\n         try\n         {\n            const newValue = this.#getSerialize(key)(defaultValue);\n\n            // If there is no existing storage value and defaultValue is defined the storage value needs to be set.\n            this.#storageStores.storage.setItem(key, newValue);\n         }\n         catch (err) { /* */ }\n      }\n\n      return value;\n   }\n\n   /**\n    * Returns the backing Svelte store for the given key; potentially sets a default value if the key\n    * is not already set.\n    *\n    * @template T\n    *\n    * @param {string}   key - Key to lookup in storage API.\n    *\n    * @param {T}        [defaultValue] - A default value to return if key not present in session storage.\n    *\n    * @param {import('./').StorageStores} [storageStores] - Additional store creation options.\n    *\n    * @returns {import('svelte/store').Writable<T>} The Svelte store for this key.\n    */\n   getStore(key, defaultValue, storageStores)\n   {\n      return this.#getStore(key, defaultValue, storageStores);\n   }\n\n   /**\n    * Sets the value for the given key in storage API.\n    *\n    * @param {string}   key - Key to lookup in storage API.\n    *\n    * @param {*}        value - A value to set for this key.\n    */\n   setItem(key, value)\n   {\n      const store = this.#getStore(key);\n      store.set(value);\n   }\n\n   /**\n    * Convenience method to swap a boolean value stored in storage API.\n    *\n    * @param {string}   key - Key to lookup in storage API.\n    *\n    * @param {boolean}  [defaultValue] - A default value to return if key not present in session storage.\n    *\n    * @returns {boolean} The boolean swap for the given key.\n    */\n   swapItemBoolean(key, defaultValue)\n   {\n      const store = this.#getStore(key, defaultValue);\n\n      let currentValue = false;\n\n      try\n      {\n         currentValue = !!this.#getDeserialize(key)(this.#storageStores.storage.getItem(key));\n      }\n      catch (err) { /**/ }\n\n      const newValue = typeof currentValue === 'boolean' ? !currentValue : false;\n\n      store.set(newValue);\n      return newValue;\n   }\n}\n\n/**\n * Provides a {@link TJSWebStorage} instance for standard browser local storage use cases.\n */\nclass TJSLocalStorage extends TJSWebStorage\n{\n   constructor()\n   {\n      super(localStores);\n   }\n}\n\n/**\n * Provides a {@link TJSWebStorage} instance for standard browser session storage use cases.\n */\nclass TJSSessionStorage extends TJSWebStorage\n{\n   constructor()\n   {\n      super(sessionStores);\n   }\n}\n\nexport { TJSLocalStorage, TJSSessionStorage, TJSWebStorage, localStores, sessionStores, storeGenerator };\n//# sourceMappingURL=index.js.map\n","import { derived, writable }     from 'svelte/store';\n\nimport {\n   TJSSessionStorage,\n   TJSWebStorage }               from '@typhonjs-fvtt/runtime/svelte/store/web-storage';\n\nimport { propertyStore }         from '@typhonjs-fvtt/runtime/svelte/store/writable-derived';\n\nimport {\n   deepMerge,\n   safeAccess,\n   safeSet }                     from '@typhonjs-fvtt/runtime/util/object';\n\nimport { subscribeIgnoreFirst }  from '@typhonjs-fvtt/runtime/util/store';\n\n/**\n * Contains the reactive functionality / Svelte stores associated with SvelteApplication and retrievable by\n * {@link SvelteApplication.reactive}.\n *\n * There are several reactive getters for UI state such and for two-way bindings / stores see\n * {@link SvelteReactive.storeUIState}:\n * - {@link SvelteReactive.dragging}\n * - {@link SvelteReactive.minimized}\n * - {@link SvelteReactive.resizing}\n *\n * There are also reactive getters / setters for {@link SvelteApplicationOptions} and Foundry\n * {@link ApplicationOptions}. You can use the following as one way bindings and update the associated stores. For\n * two-way bindings / stores see {@link SvelteReactive.storeAppOptions}.\n *\n * - {@link SvelteReactive.draggable}\n * - {@link SvelteReactive.focusAuto}\n * - {@link SvelteReactive.focusKeep}\n * - {@link SvelteReactive.focusTrap}\n * - {@link SvelteReactive.headerButtonNoClose}\n * - {@link SvelteReactive.headerButtonNoLabel}\n * - {@link SvelteReactive.headerIcon}\n * - {@link SvelteReactive.headerNoTitleMinimized}\n * - {@link SvelteReactive.minimizable}\n * - {@link SvelteReactive.popOut}\n * - {@link SvelteReactive.positionable}\n * - {@link SvelteReactive.resizable}\n * - {@link SvelteReactive.title}\n *\n * An instance of TJSWebStorage (session) / TJSSessionStorage is accessible via {@link SvelteReactive.sessionStorage}.\n * Optionally you can pass in an existing TJSWebStorage instance that can be shared across multiple SvelteApplications\n * by setting {@link SvelteApplicationOptions.sessionStorage}.\n *\n * -------------------------------------------------------------------------------------------------------------------\n *\n * This API is not sealed, and it is recommended that you extend it with accessors to get / set data that is reactive\n * in your application. An example of setting an exported prop `document` from the main mounted application shell.\n *\n * @example\n * import { hasSetter } from '@typhonjs-fvtt/runtime/svelte/util';\n *\n * // Note: make a normal comment.\n * //  * @member {object} document - Adds accessors to SvelteReactive to get / set the document associated with\n * //  *                             Document with the mounted application shell Svelte component.\n * //  *\n * //  * @memberof SvelteReactive#\n * //  *\n * Object.defineProperty(this.reactive, 'document', {\n *    get: () => this.svelte?.applicationShell?.document,\n *    set: (document) =>\n *    {\n *       const component = this.svelte?.applicationShell;\n *       if (hasSetter(component, 'document')) { component.document = document; }\n *    }\n * });\n */\nexport class SvelteReactive\n{\n   /**\n    * @type {import('../SvelteApplication').SvelteApplication}\n    */\n   #application;\n\n   /**\n    * @type {boolean}\n    */\n   #initialized = false;\n\n   /** @type {import('@typhonjs-fvtt/runtime/svelte/store/web-storage').TJSWebStorage} */\n   #sessionStorage;\n\n   /**\n    * The Application option store which is injected into mounted Svelte component context under the `external` key.\n    *\n    * @type {import('./types').StoreAppOptions}\n    */\n   #storeAppOptions;\n\n   /**\n    * Stores the update function for `#storeAppOptions`.\n    *\n    * @type {(this: void, updater: import('svelte/store').Updater<object>) => void}\n    */\n   #storeAppOptionsUpdate;\n\n   /**\n    * Stores the UI state data to make it accessible via getters.\n    *\n    * @type {object}\n    */\n   #dataUIState;\n\n   /**\n    * The UI option store which is injected into mounted Svelte component context under the `external` key.\n    *\n    * @type {import('./types').StoreUIOptions}\n    */\n   #storeUIState;\n\n   /**\n    * Stores the update function for `#storeUIState`.\n    *\n    * @type {(this: void, updater: import('svelte/store').Updater<object>) => void}\n    */\n   #storeUIStateUpdate;\n\n   /**\n    * Stores the unsubscribe functions from local store subscriptions.\n    *\n    * @type {import('svelte/store').Unsubscriber[]}\n    */\n   #storeUnsubscribe = [];\n\n   /**\n    * @param {import('../SvelteApplication').SvelteApplication} application - The host Foundry application.\n    */\n   constructor(application)\n   {\n      this.#application = application;\n      const optionsSessionStorage = application?.options?.sessionStorage;\n\n      if (optionsSessionStorage !== void 0 && !(optionsSessionStorage instanceof TJSWebStorage))\n      {\n         throw new TypeError(`'options.sessionStorage' is not an instance of TJSWebStorage.`);\n      }\n\n      // If no external web storage API instance is available then create a TJSSessionStorage instance.\n      this.#sessionStorage = optionsSessionStorage !== void 0 ? optionsSessionStorage : new TJSSessionStorage();\n   }\n\n   /**\n    * Initializes reactive support. Package private for internal use.\n    *\n    * @returns {SvelteReactiveStores | undefined} Internal methods to interact with Svelte stores.\n    * @package\n    * @internal\n    */\n   initialize()\n   {\n      if (this.#initialized) { return; }\n\n      this.#initialized = true;\n\n      this.#storesInitialize();\n\n      return {\n         appOptionsUpdate: this.#storeAppOptionsUpdate,\n         uiStateUpdate: this.#storeUIStateUpdate,\n         subscribe: this.#storesSubscribe.bind(this),\n         unsubscribe: this.#storesUnsubscribe.bind(this)\n      };\n   }\n\n// Store getters -----------------------------------------------------------------------------------------------------\n\n   /**\n    * @returns {import('@typhonjs-fvtt/runtime/svelte/store/web-storage').TJSWebStorage} Returns TJSWebStorage (session) instance.\n    */\n   get sessionStorage()\n   {\n      return this.#sessionStorage;\n   }\n\n   /**\n    * Returns the store for app options.\n    *\n    * @returns {import('./types').StoreAppOptions} App options store.\n    */\n   get storeAppOptions() { return this.#storeAppOptions; }\n\n   /**\n    * Returns the store for UI options.\n    *\n    * @returns {import('./types').StoreUIOptions} UI options store.\n    */\n   get storeUIState() { return this.#storeUIState; }\n\n// Only reactive getters ---------------------------------------------------------------------------------------------\n\n   /**\n    * Returns the current dragging UI state.\n    *\n    * @returns {boolean} Dragging UI state.\n    */\n   get dragging() { return this.#dataUIState.dragging; }\n\n   /**\n    * Returns the current minimized UI state.\n    *\n    * @returns {boolean} Minimized UI state.\n    */\n   get minimized() { return this.#dataUIState.minimized; }\n\n   /**\n    * Returns the current resizing UI state.\n    *\n    * @returns {boolean} Resizing UI state.\n    */\n   get resizing() { return this.#dataUIState.resizing; }\n\n// Reactive getter / setters -----------------------------------------------------------------------------------------\n\n   /**\n    * Returns the draggable app option.\n    *\n    * @returns {boolean} Draggable app option.\n    */\n   get draggable() { return this.#application?.options?.draggable; }\n\n   /**\n    * Returns the focusAuto app option.\n    *\n    * @returns {boolean} When true auto-management of app focus is enabled.\n    */\n   get focusAuto() { return this.#application?.options?.focusAuto; }\n\n   /**\n    * Returns the focusKeep app option.\n    *\n    * @returns {boolean} When `focusAuto` and `focusKeep` is true; keeps internal focus.\n    */\n   get focusKeep() { return this.#application?.options?.focusKeep; }\n\n   /**\n    * Returns the focusTrap app option.\n    *\n    * @returns {boolean} When true focus trapping / wrapping is enabled keeping focus inside app.\n    */\n   get focusTrap() { return this.#application?.options?.focusTrap; }\n\n   /**\n    * Returns the headerButtonNoClose app option.\n    *\n    * @returns {boolean} Remove the close the button in header app option.\n    */\n   get headerButtonNoClose() { return this.#application?.options?.headerButtonNoClose; }\n\n   /**\n    * Returns the headerButtonNoLabel app option.\n    *\n    * @returns {boolean} Remove the labels from buttons in header app option.\n    */\n   get headerButtonNoLabel() { return this.#application?.options?.headerButtonNoLabel; }\n\n   /**\n    * Returns the headerIcon app option.\n    *\n    * @returns {string|void} URL for header app icon.\n    */\n   get headerIcon() { return this.#application?.options?.headerIcon; }\n\n   /**\n    * Returns the headerNoTitleMinimized app option.\n    *\n    * @returns {boolean} When true removes the header title when minimized.\n    */\n   get headerNoTitleMinimized() { return this.#application?.options?.headerNoTitleMinimized; }\n\n   /**\n    * Returns the minimizable app option.\n    *\n    * @returns {boolean} Minimizable app option.\n    */\n   get minimizable() { return this.#application?.options?.minimizable; }\n\n   /**\n    * Returns the Foundry popOut state; {@link Application.popOut}\n    *\n    * @returns {boolean} Positionable app option.\n    */\n   get popOut() { return this.#application.popOut; }\n\n   /**\n    * Returns the positionable app option; {@link SvelteApplicationOptions.positionable}\n    *\n    * @returns {boolean} Positionable app option.\n    */\n   get positionable() { return this.#application?.options?.positionable; }\n\n   /**\n    * Returns the resizable option.\n    *\n    * @returns {boolean} Resizable app option.\n    */\n   get resizable() { return this.#application?.options?.resizable; }\n\n   /**\n    * Returns the title accessor from the parent Application class; {@link Application.title}\n    * TODO: Application v2; note that super.title localizes `this.options.title`; IMHO it shouldn't.\n    *\n    * @returns {string} Title.\n    */\n   get title() { return this.#application.title; }\n\n   /**\n    * Sets `this.options.draggable` which is reactive for application shells.\n    *\n    * @param {boolean}  draggable - Sets the draggable option.\n    */\n   set draggable(draggable)\n   {\n      if (typeof draggable === 'boolean') { this.setOptions('draggable', draggable); }\n   }\n\n   /**\n    * Sets `this.options.focusAuto` which is reactive for application shells.\n    *\n    * @param {boolean}  focusAuto - Sets the focusAuto option.\n    */\n   set focusAuto(focusAuto)\n   {\n      if (typeof focusAuto === 'boolean') { this.setOptions('focusAuto', focusAuto); }\n   }\n\n   /**\n    * Sets `this.options.focusKeep` which is reactive for application shells.\n    *\n    * @param {boolean}  focusKeep - Sets the focusKeep option.\n    */\n   set focusKeep(focusKeep)\n   {\n      if (typeof focusKeep === 'boolean') { this.setOptions('focusKeep', focusKeep); }\n   }\n\n   /**\n    * Sets `this.options.focusTrap` which is reactive for application shells.\n    *\n    * @param {boolean}  focusTrap - Sets the focusTrap option.\n    */\n   set focusTrap(focusTrap)\n   {\n      if (typeof focusTrap === 'boolean') { this.setOptions('focusTrap', focusTrap); }\n   }\n\n   /**\n    * Sets `this.options.headerButtonNoClose` which is reactive for application shells.\n    *\n    * @param {boolean}  headerButtonNoClose - Sets the headerButtonNoClose option.\n    */\n   set headerButtonNoClose(headerButtonNoClose)\n   {\n      if (typeof headerButtonNoClose === 'boolean') { this.setOptions('headerButtonNoClose', headerButtonNoClose); }\n   }\n\n   /**\n    * Sets `this.options.headerButtonNoLabel` which is reactive for application shells.\n    *\n    * @param {boolean}  headerButtonNoLabel - Sets the headerButtonNoLabel option.\n    */\n   set headerButtonNoLabel(headerButtonNoLabel)\n   {\n      if (typeof headerButtonNoLabel === 'boolean') { this.setOptions('headerButtonNoLabel', headerButtonNoLabel); }\n   }\n\n   /**\n    * Sets `this.options.headerIcon` which is reactive for application shells.\n    *\n    * @param {string | undefined}  headerIcon - Sets the headerButtonNoLabel option.\n    */\n   set headerIcon(headerIcon)\n   {\n      if (headerIcon === void 0 || typeof headerIcon === 'string') { this.setOptions('headerIcon', headerIcon); }\n   }\n\n   /**\n    * Sets `this.options.headerNoTitleMinimized` which is reactive for application shells.\n    *\n    * @param {boolean}  headerNoTitleMinimized - Sets the headerNoTitleMinimized option.\n    */\n   set headerNoTitleMinimized(headerNoTitleMinimized)\n   {\n      if (typeof headerNoTitleMinimized === 'boolean')\n      {\n         this.setOptions('headerNoTitleMinimized', headerNoTitleMinimized);\n      }\n   }\n\n   /**\n    * Sets `this.options.minimizable` which is reactive for application shells that are also pop out.\n    *\n    * @param {boolean}  minimizable - Sets the minimizable option.\n    */\n   set minimizable(minimizable)\n   {\n      if (typeof minimizable === 'boolean') { this.setOptions('minimizable', minimizable); }\n   }\n\n   /**\n    * Sets `this.options.popOut` which is reactive for application shells. This will add / remove this application\n    * from `ui.windows`.\n    *\n    * @param {boolean}  popOut - Sets the popOut option.\n    */\n   set popOut(popOut)\n   {\n      if (typeof popOut === 'boolean') { this.setOptions('popOut', popOut); }\n   }\n\n   /**\n    * Sets `this.options.positionable` enabling / disabling {@link SvelteApplication.position}.\n    *\n    * @param {boolean}  positionable - Sets the positionable option.\n    */\n   set positionable(positionable)\n   {\n      if (typeof positionable === 'boolean') { this.setOptions('positionable', positionable); }\n   }\n\n   /**\n    * Sets `this.options.resizable` which is reactive for application shells.\n    *\n    * @param {boolean}  resizable - Sets the resizable option.\n    */\n   set resizable(resizable)\n   {\n      if (typeof resizable === 'boolean') { this.setOptions('resizable', resizable); }\n   }\n\n   /**\n    * Sets `this.options.title` which is reactive for application shells.\n    *\n    * Note: Will set empty string if title is undefined or null.\n    *\n    * @param {string | undefined | null}   title - Application title; will be localized, so a translation key is fine.\n    */\n   set title(title)\n   {\n      if (typeof title === 'string')\n      {\n         this.setOptions('title', title);\n      }\n      else if (title === void 0 || title === null)\n      {\n         this.setOptions('title', '');\n      }\n   }\n\n   // Reactive Options API -------------------------------------------------------------------------------------------\n\n   /**\n    * Provides a way to safely get this applications options given an accessor string which describes the\n    * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\n    * to walk.\n    *\n    * // TODO DOCUMENT the accessor in more detail.\n    *\n    * @param {string}   accessor - The path / key to set. You can set multiple levels.\n    *\n    * @param {*}        [defaultValue] - A default value returned if the accessor is not found.\n    *\n    * @returns {*} Value at the accessor.\n    */\n   getOptions(accessor, defaultValue)\n   {\n      return safeAccess(this.#application.options, accessor, defaultValue);\n   }\n\n   /**\n    * Provides a way to merge `options` into this applications options and update the appOptions store.\n    *\n    * @param {object}   options - The options object to merge with `this.options`.\n    */\n   mergeOptions(options)\n   {\n      this.#storeAppOptionsUpdate((instanceOptions) => deepMerge(instanceOptions, options));\n   }\n\n   /**\n    * Provides a way to safely set this applications options given an accessor string which describes the\n    * entries to walk. To access deeper entries into the object format the accessor string with `.` between entries\n    * to walk.\n    *\n    * Additionally if an application shell Svelte component is mounted and exports the `appOptions` property then\n    * the application options is set to `appOptions` potentially updating the application shell / Svelte component.\n    *\n    * // TODO DOCUMENT the accessor in more detail.\n    *\n    * @param {string}   accessor - The path / key to set. You can set multiple levels.\n    *\n    * @param {any}      value - Value to set.\n    */\n   setOptions(accessor, value)\n   {\n      const success = safeSet(this.#application.options, accessor, value);\n\n      // If `this.options` modified then update the app options store.\n      if (success)\n      {\n         this.#storeAppOptionsUpdate(() => this.#application.options);\n      }\n   }\n\n   /**\n    * Initializes the Svelte stores and derived stores for the application options and UI state.\n    *\n    * While writable stores are created the update method is stored in private variables locally and derived Readable\n    * stores are provided for essential options which are commonly used.\n    *\n    * These stores are injected into all Svelte components mounted under the `external` context: `storeAppOptions` and\n    * `storeUIState`.\n    */\n   #storesInitialize()\n   {\n      const writableAppOptions = writable(this.#application.options);\n\n      // Keep the update function locally, but make the store essentially readable.\n      this.#storeAppOptionsUpdate = writableAppOptions.update;\n\n      /**\n       * Create custom store. The main subscribe method for all app options changes is provided along with derived\n       * writable stores for all reactive options.\n       *\n       * @type {import('./types').StoreAppOptions}\n       */\n      const storeAppOptions = {\n         subscribe: writableAppOptions.subscribe,\n\n         draggable: propertyStore(writableAppOptions, 'draggable'),\n         focusAuto: propertyStore(writableAppOptions, 'focusAuto'),\n         focusKeep: propertyStore(writableAppOptions, 'focusKeep'),\n         focusTrap: propertyStore(writableAppOptions, 'focusTrap'),\n         headerButtonNoClose: propertyStore(writableAppOptions, 'headerButtonNoClose'),\n         headerButtonNoLabel: propertyStore(writableAppOptions, 'headerButtonNoLabel'),\n         headerIcon: propertyStore(writableAppOptions, 'headerIcon'),\n         headerNoTitleMinimized: propertyStore(writableAppOptions, 'headerNoTitleMinimized'),\n         minimizable: propertyStore(writableAppOptions, 'minimizable'),\n         popOut: propertyStore(writableAppOptions, 'popOut'),\n         positionable: propertyStore(writableAppOptions, 'positionable'),\n         resizable: propertyStore(writableAppOptions, 'resizable'),\n         title: propertyStore(writableAppOptions, 'title')\n      };\n\n      Object.freeze(storeAppOptions);\n\n      this.#storeAppOptions = storeAppOptions;\n\n      this.#dataUIState = {\n         dragging: false,\n         headerButtons: [],\n         minimized: this.#application._minimized,\n         resizing: false\n      };\n\n      // Create a store for UI state data.\n      const writableUIOptions = writable(this.#dataUIState);\n\n      // Keep the update function locally, but make the store essentially readable.\n      this.#storeUIStateUpdate = writableUIOptions.update;\n\n      /**\n       * @type {import('./types').StoreUIOptions}\n       */\n      const storeUIState = {\n         subscribe: writableUIOptions.subscribe,\n\n         dragging: propertyStore(writableUIOptions, 'dragging'),\n         headerButtons: derived(writableUIOptions, ($options, set) => set($options.headerButtons)),\n         minimized: derived(writableUIOptions, ($options, set) => set($options.minimized)),\n         resizing: propertyStore(writableUIOptions, 'resizing')\n      };\n\n      Object.freeze(storeUIState);\n\n      // Initialize the store with options set in the Application constructor.\n      this.#storeUIState = storeUIState;\n   }\n\n   /**\n    * Registers local store subscriptions for app options. `popOut` controls registering this app with `ui.windows`.\n    *\n    * @see SvelteApplication._injectHTML\n    */\n   #storesSubscribe()\n   {\n      // Register local subscriptions.\n\n      // Handles updating header buttons to add / remove the close button.\n      this.#storeUnsubscribe.push(subscribeIgnoreFirst(this.#storeAppOptions.headerButtonNoClose, (value) =>\n      {\n         this.updateHeaderButtons({ headerButtonNoClose: value });\n      }));\n\n      // Handles updating header buttons to add / remove button labels.\n      this.#storeUnsubscribe.push(subscribeIgnoreFirst(this.#storeAppOptions.headerButtonNoLabel, (value) =>\n      {\n         this.updateHeaderButtons({ headerButtonNoLabel: value });\n      }));\n\n      // Handles adding / removing this application from `ui.windows` when popOut changes.\n      this.#storeUnsubscribe.push(subscribeIgnoreFirst(this.#storeAppOptions.popOut, (value) =>\n      {\n         if (value && this.#application.rendered)\n         {\n            globalThis.ui.windows[this.#application.appId] = this.#application;\n         }\n         else\n         {\n            delete globalThis.ui.windows[this.#application.appId];\n         }\n      }));\n   }\n\n   /**\n    * Unsubscribes from any locally monitored stores.\n    *\n    * @see SvelteApplication.close\n    */\n   #storesUnsubscribe()\n   {\n      this.#storeUnsubscribe.forEach((unsubscribe) => unsubscribe());\n      this.#storeUnsubscribe = [];\n   }\n\n   /**\n    * Updates the UI Options store with the current header buttons. You may dynamically add / remove header buttons\n    * if using an application shell Svelte component. In either overriding `_getHeaderButtons` or responding to the\n    * Hooks fired return a new button array and the uiOptions store is updated and the application shell will render\n    * the new buttons.\n    *\n    * Optionally you can set in the SvelteApplication app options {@link SvelteApplicationOptions.headerButtonNoClose}\n    * to remove the close button and {@link SvelteApplicationOptions.headerButtonNoLabel} to true and labels will be\n    * removed from the header buttons.\n    *\n    * @param {object} [opts] - Optional parameters (for internal use)\n    *\n    * @param {boolean} [opts.headerButtonNoClose] - The value for `headerButtonNoClose`.\n    *\n    * @param {boolean} [opts.headerButtonNoLabel] - The value for `headerButtonNoLabel`.\n    */\n   updateHeaderButtons({ headerButtonNoClose = this.#application.options.headerButtonNoClose,\n    headerButtonNoLabel = this.#application.options.headerButtonNoLabel } = {})\n   {\n      let buttons = this.#application._getHeaderButtons();\n\n      // Remove close button if this.options.headerButtonNoClose is true;\n      if (typeof headerButtonNoClose === 'boolean' && headerButtonNoClose)\n      {\n         buttons = buttons.filter((button) => button.class !== 'close');\n      }\n\n      // Remove labels if this.options.headerButtonNoLabel is true;\n      if (typeof headerButtonNoLabel === 'boolean' && headerButtonNoLabel)\n      {\n         for (const button of buttons) { button.label = void 0; }\n      }\n\n      this.#storeUIStateUpdate((options) =>\n      {\n         options.headerButtons = buttons;\n         return options;\n      });\n   }\n}\n\n/**\n * @typedef {object} SvelteReactiveStores\n *\n * @property {(this: void, updater: import('svelte/store').Updater<object>) => void} appOptionsUpdate Update function\n * for app options store.\n *\n * @property {Function} subscribe Subscribes to local stores.\n *\n * @property {(this: void, updater: import('svelte/store').Updater<object>) => void} uiStateUpdate Update function\n * for UI state stores.\n *\n * @property {Function} unsubscribe Unsubscribes from local stores.\n */\n","/**\n * Defines the application shell contract. If Svelte components export getter / setters for the following properties\n * then that component is considered an application shell.\n *\n * @type {string[]}\n */\nconst applicationShellContract = ['elementRoot'];\n\nObject.freeze(applicationShellContract);\n\nexport { applicationShellContract };\n","import { applicationShellContract } from './applicationShellContract.js';\n\n/**\n * Provides a method to determine if the passed in object / Svelte component follows the application shell contract.\n * This involves ensuring that the accessors defined in `applicationShellContract`.\n *\n * Note: A caveat is that when using Vite in a developer build components are wrapped in a proxy / ProxyComponent that\n * defines instance accessors versus on the prototype, so the check below ensures that all accessors in the contract are\n * either available on the prototype or directly on the instance.\n *\n * @param {*}  component - Object / component to test.\n *\n * @returns {boolean} Whether the component is a ApplicationShell or TJSApplicationShell.\n */\nexport function isApplicationShell(component)\n{\n   if (component === null || component === void 0) { return false; }\n\n   let compHasContract = true;\n   let protoHasContract = true;\n\n   // Check for accessors on the instance.\n   for (const accessor of applicationShellContract)\n   {\n      const descriptor = Object.getOwnPropertyDescriptor(component, accessor);\n      if (descriptor === void 0 || descriptor.get === void 0 || descriptor.set === void 0) { compHasContract = false; }\n   }\n\n   // Get the prototype which is the parent SvelteComponent that has any getter / setters.\n   const prototype = Object.getPrototypeOf(component);\n\n   // Verify the application shell contract. If the accessors (getters / setters) are defined for\n   // `applicationShellContract`.\n   for (const accessor of applicationShellContract)\n   {\n      const descriptor = Object.getOwnPropertyDescriptor(prototype, accessor);\n      if (descriptor === void 0 || descriptor.get === void 0 || descriptor.set === void 0) { protoHasContract = false; }\n   }\n\n   return compHasContract || protoHasContract;\n}\n","import { parseTJSSvelteConfig }  from '@typhonjs-fvtt/runtime/svelte/util';\n\nimport { isApplicationShell }    from './isApplicationShell.js';\n\nimport { isObject }              from '@typhonjs-fvtt/runtime/util/object';\n\n/**\n * Instantiates and attaches a Svelte component to the main inserted HTML.\n *\n * @param {object}            [opts] - Optional parameters.\n *\n * @param {object}            [opts.app] - The target application\n *\n * @param {HTMLElement}       [opts.template] - Any HTML template.\n *\n * @param {import('@typhonjs-fvtt/runtime/svelte/util').TJSSvelteConfig}  [opts.config] - Svelte component options\n *\n * @param {Function}          [opts.elementRootUpdate] - A callback to assign to the external context.\n *\n * @returns {import('@typhonjs-fvtt/runtime/svelte/application').SvelteData} The config + instantiated Svelte component.\n */\nexport function loadSvelteConfig({ app, template, config, elementRootUpdate } = {})\n{\n   const svelteOptions = isObject(config.options) ? config.options : {};\n\n   let target;\n\n   // A specific HTMLElement to append Svelte component.\n   if (config.target instanceof HTMLElement)\n   {\n      target = config.target;\n   }\n   // A string target defines a selector to find in existing HTML.\n   else if (template instanceof HTMLElement && typeof config.target === 'string')\n   {\n      target = template.querySelector(config.target);\n   }\n   else                                            // No target defined, create a document fragment.\n   {\n      target = document.createDocumentFragment();\n   }\n\n   if (target === void 0)\n   {\n      console.log(\n       `%c[TRL] loadSvelteConfig error - could not find target selector, '${config.target}', for config:\\n`,\n       'background: rgb(57,34,34)', config);\n\n      throw new Error();\n   }\n\n   const NewSvelteComponent = config.class;\n\n   const svelteConfig = parseTJSSvelteConfig({ ...config, target }, app);\n\n   const externalContext = svelteConfig.context.get('#external');\n\n   // Inject the Foundry application instance and `elementRootUpdate` to the external context.\n   externalContext.application = app;\n   externalContext.elementRootUpdate = elementRootUpdate;\n   externalContext.sessionStorage = app.reactive.sessionStorage;\n\n   let eventbus;\n\n   // Potentially inject any TyphonJS eventbus and track the proxy in the SvelteData instance.\n   if (isObject(app._eventbus) && typeof app._eventbus.createProxy === 'function')\n   {\n      eventbus = app._eventbus.createProxy();\n      externalContext.eventbus = eventbus;\n   }\n\n   // Seal external context so that it can't be extended.\n   Object.seal(externalContext);\n\n   // TODO: Remove deprecation warning in the future -----------------------------------------------------------------\n\n   svelteConfig.context.set('external', new Proxy({}, {\n      get(targetUnused, prop)\n      {\n         console.warn(`[TRL] Deprecation warning: Please change getContext('external') to getContext('#external').`);\n         return externalContext[prop];\n      }\n   }));\n\n   // TODO: Remove deprecation warning in the future -----------------------------------------------------------------\n\n   // Create the Svelte component.\n   /**\n    * @type {import('svelte').SvelteComponent}\n    */\n   const component = new NewSvelteComponent(svelteConfig);\n\n   // Set any eventbus to the config.\n   svelteConfig.eventbus = eventbus;\n\n   /**\n    * @type {HTMLElement}\n    */\n   let element;\n\n   // We can directly get the root element from components which follow the application store contract.\n   if (isApplicationShell(component))\n   {\n      element = component.elementRoot;\n   }\n\n   // Detect if target is a synthesized DocumentFragment with a child element. Child elements will be present\n   // if the Svelte component mounts and renders initial content into the document fragment.\n   if (target instanceof DocumentFragment && target.firstElementChild)\n   {\n      if (element === void 0) { element = target.firstElementChild; }\n      template.append(target);\n   }\n   else if (config.target instanceof HTMLElement && element === void 0)\n   {\n      if (config.target instanceof HTMLElement && typeof svelteOptions.selectorElement !== 'string')\n      {\n         console.log(\n          `%c[TRL] loadSvelteConfig error - HTMLElement target with no 'selectorElement' defined.\\n` +\n          `\\nNote: If configuring an application shell and directly targeting a HTMLElement did you bind an` +\n          `'elementRoot' and include '<svelte:options accessors={true}/>'?\\n` +\n          `\\nOffending config:\\n`, 'background: rgb(57,34,34)', config);\n\n         throw new Error();\n      }\n\n      // The target is an HTMLElement so find the Application element from `selectorElement` option.\n      element = target.querySelector(svelteOptions.selectorElement);\n\n      if (element === null || element === void 0)\n      {\n         console.log(\n          `%c[TRL] loadSvelteConfig error - HTMLElement target with 'selectorElement', '${\n           svelteOptions.selectorElement}', not found for config:\\n`,\n          'background: rgb(57,34,34)', config);\n\n         throw new Error();\n      }\n   }\n\n   // If the configuration / original target is an HTML element then do not inject HTML.\n   const injectHTML = !(config.target instanceof HTMLElement);\n\n   return { config: svelteConfig, component, element, injectHTML };\n}\n","/**\n * Provides an index of all visible rendered {@link SvelteApplication} instances in a given Svelte runtime. This allows\n * bulk operations to be performed across all apps.\n */\nexport class TJSAppIndex\n{\n   /**\n    * Stores all visible / rendered apps.\n    *\n    * @type {Map<string, import('@typhonjs-fvtt/runtime/svelte/application').SvelteApplication>}\n    */\n   static #visibleApps = new Map();\n\n   /**\n    * Adds a SvelteApplication to all visible apps tracked.\n    *\n    * @param {import('@typhonjs-fvtt/runtime/svelte/application').SvelteApplication} app - A SvelteApplication\n    *\n    * @package\n    */\n   static add(app)\n   {\n      this.#visibleApps.set(app.id, app);\n   }\n\n   /**\n    * Removes a SvelteApplication from all visible apps tracked.\n    *\n    * @param {import('@typhonjs-fvtt/runtime/svelte/application').SvelteApplication} app - A SvelteApplication\n    *\n    * @package\n    */\n   static delete(app)\n   {\n      this.#visibleApps.delete(app.id);\n   }\n\n   /**\n    * Gets a particular app by ID.\n    *\n    * @param {string}   key - App ID.\n    *\n    * @returns {import('@typhonjs-fvtt/runtime/svelte/application').SvelteApplication} Associated app.\n    */\n   static get(key)\n   {\n      return this.#visibleApps.get(key);\n   }\n\n   /**\n    * Returns whether an associated app by ID is being tracked.\n    *\n    * @param {string}   key - App ID.\n    *\n    * @returns {boolean} The given App ID is visible.\n    */\n   static has(key)\n   {\n      return this.#visibleApps.has(key);\n   }\n\n   /**\n    * @returns {IterableIterator<string>} All visible app IDs.\n    */\n   static keys()\n   {\n      return this.#visibleApps.keys();\n   }\n\n   /**\n    * @returns {IterableIterator<import('@typhonjs-fvtt/runtime/svelte/application').SvelteApplication>} All visible apps.\n    */\n   static values()\n   {\n      return this.#visibleApps.values();\n   }\n}\n","import { TJSPosition }  from '@typhonjs-fvtt/runtime/svelte/store/position';\n\nimport {\n   isHMRProxy,\n   outroAndDestroy }    from '@typhonjs-fvtt/runtime/svelte/util';\n\nimport { A11yHelper }   from '@typhonjs-fvtt/runtime/util/browser';\n\nimport {\n   deepMerge,\n   hasGetter,\n   isIterable,\n   isObject }           from '@typhonjs-fvtt/runtime/util/object';\n\nimport {\n   ApplicationState,\n   GetSvelteData,\n   loadSvelteConfig,\n   isApplicationShell,\n   SvelteReactive,\n   TJSAppIndex }        from './internal/index.js';\n\n/**\n * Provides a Svelte aware extension to the Foundry {@link Application} class to manage the app lifecycle\n * appropriately. You can declaratively load one or more components from `defaultOptions` using a\n * {@link TJSSvelteConfig} object in the SvelteApplicationOptions `options` {@link SvelteApplicationOptions.svelte}\n * property.\n */\nexport class SvelteApplication extends Application\n{\n   /**\n    * Stores the first mounted component which follows the application shell contract.\n    *\n    * @type {import('./internal/state-svelte/types').MountedAppShell[]|null[]} Application shell.\n    */\n   #applicationShellHolder = [null];\n\n   /**\n    * Stores and manages application state for saving / restoring / serializing.\n    *\n    * @type {ApplicationState<SvelteApplication>}\n    */\n   #applicationState;\n\n   /**\n    * Stores the target element which may not necessarily be the main element.\n    *\n    * @type {HTMLElement}\n    */\n   #elementTarget = null;\n\n   /**\n    * Stores the content element which is set for application shells.\n    *\n    * @type {HTMLElement}\n    */\n   #elementContent = null;\n\n   /**\n    * Stores initial z-index from `_renderOuter` to set to target element / Svelte component.\n    *\n    * @type {number}\n    */\n   #initialZIndex = 95;\n\n   /**\n    * Stores on mount state which is checked in _render to trigger onSvelteMount callback.\n    *\n    * @type {boolean}\n    */\n   #onMount = false;\n\n   /**\n    * The position store.\n    *\n    * @type {TJSPosition}\n    */\n   #position;\n\n   /**\n    * Contains the Svelte stores and reactive accessors.\n    *\n    * @type {SvelteReactive}\n    */\n   #reactive;\n\n   /**\n    * Stores SvelteData entries with instantiated Svelte components.\n    *\n    * @type {import('./internal/state-svelte/types').SvelteData[]}\n    */\n   #svelteData = [];\n\n   /**\n    * Provides a helper class that combines multiple methods for interacting with the mounted components tracked in\n    * #svelteData.\n    *\n    * @type {GetSvelteData}\n    */\n   #getSvelteData = new GetSvelteData(this.#applicationShellHolder, this.#svelteData);\n\n   /**\n    * Contains methods to interact with the Svelte stores.\n    *\n    * @type {import('./internal/state-reactive/SvelteReactive').SvelteReactiveStores}\n    */\n   #stores;\n\n   /**\n    * @param {import('@typhonjs-fvtt/runtime/svelte/application').SvelteApplicationOptions} options - The options for the application.\n    *\n    * @inheritDoc\n    */\n   constructor(options = {})\n   {\n      super(options);\n\n      /** @type {ApplicationState<SvelteApplication>} */\n      this.#applicationState = new ApplicationState(this);\n\n      // Initialize TJSPosition with the position object set by Application.\n      this.#position = new TJSPosition(this, {\n         ...this.position,\n         ...this.options,\n         initial: this.options.positionInitial,\n         ortho: this.options.positionOrtho,\n         validator: this.options.positionValidator\n      });\n\n      // Remove old position field.\n      delete this.position;\n\n      /**\n       * Define accessors to retrieve TJSPosition by `this.position`.\n       *\n       * @member {TJSPosition} position - Adds accessors to SvelteApplication to get / set the position data.\n       *\n       * @memberof SvelteApplication#\n       */\n      Object.defineProperty(this, 'position', {\n         get: () => this.#position,\n         set: (position) => { if (isObject(position)) { this.#position.set(position); } }\n      });\n\n      this.#reactive = new SvelteReactive(this);\n\n      this.#stores = this.#reactive.initialize();\n   }\n\n   /**\n    * Specifies the default options that SvelteApplication supports.\n    *\n    * @returns {import('@typhonjs-fvtt/runtime/svelte/application').SvelteApplicationOptions} options - Application options.\n    * @see https://foundryvtt.com/api/interfaces/client.ApplicationOptions.html\n    *\n    * @internal\n    */\n   static get defaultOptions()\n   {\n      return deepMerge(super.defaultOptions, {\n         defaultCloseAnimation: true,     // If false the default slide close animation is not run.\n         draggable: true,                 // If true then application shells are draggable.\n         focusAuto: true,                 // When true auto-management of app focus is enabled.\n         focusKeep: false,                // When `focusAuto` and `focusKeep` is true; keeps internal focus.\n         focusSource: void 0,             // Stores any A11yFocusSource data that is applied when app is closed.\n         focusTrap: true,                 // When true focus trapping / wrapping is enabled keeping focus inside app.\n         headerButtonNoClose: false,      // If true then the close header button is removed.\n         headerButtonNoLabel: false,      // If true then header button labels are removed for application shells.\n         headerIcon: void 0,              // Sets a header icon given an image URL.\n         headerNoTitleMinimized: false,   // If true then header title is hidden when application is minimized.\n         minHeight: MIN_WINDOW_HEIGHT,    // Assigned to position. Number specifying minimum window height.\n         minWidth: MIN_WINDOW_WIDTH,      // Assigned to position. Number specifying minimum window width.\n         positionable: true,              // If false then `position.set` does not take effect.\n         positionInitial: TJSPosition.Initial.browserCentered,      // A helper for initial position placement.\n         positionOrtho: true,             // When true TJSPosition is optimized for orthographic use.\n         positionValidator: TJSPosition.Validators.transformWindow, // A function providing the default validator.\n         sessionStorage: void 0,          // An instance of TJSWebStorage (session) to share across SvelteApplications.\n         svelte: void 0,                  // A Svelte configuration object.\n         transformOrigin: 'top left'      // By default, 'top / left' respects rotation when minimizing.\n      });\n   }\n\n   /**\n    * Returns the content element if an application shell is mounted.\n    *\n    * @returns {HTMLElement} Content element.\n    */\n   get elementContent() { return this.#elementContent; }\n\n   /**\n    * Returns the target element or main element if no target defined.\n    *\n    * @returns {HTMLElement} Target element.\n    */\n   get elementTarget() { return this.#elementTarget; }\n\n   /**\n    * Returns the reactive accessors & Svelte stores for SvelteApplication.\n    *\n    * @returns {import('./internal/state-reactive/types').SvelteReactive} The reactive accessors & Svelte stores.\n    */\n   get reactive() { return this.#reactive; }\n\n   /**\n    * Returns the application state manager.\n    *\n    * @returns {import('./internal/state-app/types').ApplicationState<SvelteApplication>} The application state manager.\n    */\n   get state() { return this.#applicationState; }\n\n   /**\n    * Returns the Svelte helper class w/ various methods to access mounted Svelte components.\n    *\n    * @returns {import('./internal/state-svelte/types').GetSvelteData} GetSvelteData\n    */\n   get svelte() { return this.#getSvelteData; }\n\n   /**\n    * In this case of when a template is defined in app options `html` references the inner HTML / template. However,\n    * to activate classic v1 tabs for a Svelte component the element target is passed as an array simulating JQuery as\n    * the element is retrieved immediately and the core listeners use standard DOM queries.\n    *\n    * @protected\n    * @ignore\n    * @internal\n    */\n   _activateCoreListeners(html)\n   {\n      super._activateCoreListeners(typeof this.options.template === 'string' ? html :\n       [this.popOut ? this.#elementTarget?.firstChild : this.#elementTarget]);\n   }\n\n   /**\n    * Provide an override to set this application as the active window regardless of z-index. Changes behaviour from\n    * Foundry core. This is important / used for instance in dialog key handling for left / right button selection.\n    *\n    * @param {object} [opts] - Optional parameters.\n    *\n    * @param {boolean} [opts.force=false] - Force bring to top; will increment z-index by popOut order.\n    *\n    * @ignore\n    * @internal\n    */\n   bringToTop({ force = false } = {})\n   {\n      if (force || this.popOut) { super.bringToTop(); }\n\n      // If the activeElement is not `document.body` and not contained in this app via elementTarget then blur the\n      // current active element and make `document.body`focused. This allows <esc> key to close all open apps / windows.\n      if (document.activeElement !== document.body && !this.elementTarget.contains(document.activeElement))\n      {\n         // Blur current active element.\n         if (document.activeElement instanceof HTMLElement) { document.activeElement.blur(); }\n\n         // Make document body focused.\n         document.body.focus();\n      }\n\n      globalThis.ui.activeWindow = this;\n   }\n\n   /**\n    * Note: This method is fully overridden and duplicated as Svelte components need to be destroyed manually and the\n    * best visual result is to destroy them after the default slide up animation occurs, but before the element\n    * is removed from the DOM.\n    *\n    * If you destroy the Svelte components before the slide up animation the Svelte elements are removed immediately\n    * from the DOM. The purpose of overriding ensures the slide up animation is always completed before\n    * the Svelte components are destroyed and then the element is removed from the DOM.\n    *\n    * Close the application and un-register references to it within UI mappings.\n    * This function returns a Promise which resolves once the window closing animation concludes\n    *\n    * @param {object}   [options] - Optional parameters.\n    *\n    * @param {boolean}  [options.force] - Force close regardless of render state.\n    *\n    * @returns {Promise<void>}    A Promise which resolves once the application is closed.\n    *\n    * @ignore\n    * @internal\n    */\n   async close(options = {})\n   {\n      const states = Application.RENDER_STATES;\n      if (!options.force && ![states.RENDERED, states.ERROR].includes(this._state)) { return; }\n\n      // Unsubscribe from any local stores.\n      this.#stores.unsubscribe();\n\n      /**\n       * @ignore\n       * @internal\n       */\n      this._state = states.CLOSING;\n\n      /**\n       * Get the element.\n       *\n       * @type {HTMLElement}\n       */\n      const el = this.#elementTarget;\n      if (!el) { return this._state = states.CLOSED; }\n\n      // Make any window content overflow hidden to avoid any scrollbars appearing in default or Svelte outro\n      // transitions.\n      const content = el.querySelector('.window-content');\n      if (content)\n      {\n         content.style.overflow = 'hidden';\n\n         // Set all children of content to overflow hidden as if there is going to be additional scrolling elements\n         // they are likely one level deep.\n         for (let cntr = content.children.length; --cntr >= 0;)\n         {\n            content.children[cntr].style.overflow = 'hidden';\n         }\n      }\n\n      // Dispatch Hooks for closing the base and subclass applications\n      for (const cls of this.constructor._getInheritanceChain())\n      {\n         /**\n          * A hook event that fires whenever this Application is closed.\n          *\n          * Note: JQuery wrapping as Foundry event arguments uses JQuery.\n          */\n         Hooks.call(`close${cls.name}`, this, $(el));\n      }\n\n      // If options `defaultCloseAnimation` is false then do not execute the standard slide up animation.\n      // This allows Svelte components to provide any out transition. Application shells will automatically set\n      // `defaultCloseAnimation` based on any out transition set or unset.\n      const animate = typeof this.options.defaultCloseAnimation === 'boolean' ? this.options.defaultCloseAnimation :\n       true;\n\n      if (animate)\n      {\n         // Set min height for full slide.\n         el.style.minHeight = '0';\n\n         const { paddingBottom, paddingTop } = globalThis.getComputedStyle(el);\n\n         // Slide-up application.\n         await el.animate([\n            { maxHeight: `${el.clientHeight}px`, paddingTop, paddingBottom },\n            { maxHeight: 0, paddingTop: 0, paddingBottom: 0 }\n         ], { duration: 250, easing: 'ease-in', fill: 'forwards' }).finished;\n      }\n\n      // Stores the Promises returned from running outro transitions and destroying each Svelte component.\n      const svelteDestroyPromises = [];\n\n      // Manually invoke the destroy callbacks for all Svelte components.\n      for (const entry of this.#svelteData)\n      {\n         // Use `outroAndDestroy` to run outro transitions before destroying.\n         svelteDestroyPromises.push(outroAndDestroy(entry.component));\n\n         // If any proxy eventbus has been added then remove all event registrations from the component.\n         const eventbus = entry.config.eventbus;\n         if (isObject(eventbus) && typeof eventbus.off === 'function')\n         {\n            eventbus.off();\n            entry.config.eventbus = void 0;\n         }\n      }\n\n      // Await all Svelte components to destroy.\n      await Promise.all(svelteDestroyPromises);\n\n      // Remove from all visible apps tracked.\n      TJSAppIndex.delete(this);\n\n      // Reset SvelteData like this to maintain reference to GetSvelteData / `this.svelte`.\n      this.#svelteData.length = 0;\n\n      // Remove element from the DOM. Most SvelteComponents have already removed it.\n      el.remove();\n\n      // Silently restore any width / height state before minimized as applicable.\n      this.position.state.restore({\n         name: '#beforeMinimized',\n         properties: ['width', 'height'],\n         silent: true,\n         remove: true\n      });\n\n      // Clean up data\n      this.#applicationShellHolder[0] = null;\n\n      /**\n       * @ignore\n       * @internal\n       */\n      this._element = null;\n      this.#elementContent = null;\n      this.#elementTarget = null;\n\n      delete globalThis.ui.windows[this.appId];\n\n      /**\n       * @ignore\n       * @internal\n       */\n      this._minimized = false;\n\n      /**\n       * @ignore\n       * @internal\n       */\n      this._scrollPositions = null;\n\n      /**\n       * @ignore\n       * @internal\n       */\n      this._state = states.CLOSED;\n\n      this.#onMount = false;\n\n      // Update the minimized UI store state.\n      this.#stores.uiStateUpdate((storeOptions) => deepMerge(storeOptions, { minimized: this._minimized }));\n\n      // Apply any stored focus options and then remove them from options.\n      A11yHelper.applyFocusSource(this.options.focusSource);\n\n      delete this.options.focusSource;\n   }\n\n   /**\n    * Inject the Svelte components defined in `this.options.svelte`. The Svelte component can attach to the existing\n    * pop-out of Application or provide no template and render into a document fragment which is then attached to the\n    * DOM.\n    *\n    * @protected\n    * @ignore\n    * @internal\n    */\n   _injectHTML(html)\n   {\n      if (this.popOut && html.length === 0 && isIterable(this.options.svelte))\n      {\n         throw new Error(\n          'SvelteApplication - _injectHTML - A popout app with no template can only support one Svelte component.');\n      }\n\n      // Make sure the store is updated with the latest header buttons. Also allows filtering buttons before display.\n      this.reactive.updateHeaderButtons();\n\n      // Create a function to generate a callback for Svelte components to invoke to update the tracked elements for\n      // application shells in the rare cases that the main element root changes. The update is only trigged on\n      // successive changes of `elementRoot`. Returns a boolean to indicate the element roots are updated.\n      const elementRootUpdate = () =>\n      {\n         let cntr = 0;\n\n         return (elementRoot) =>\n         {\n            if (elementRoot !== null && elementRoot !== void 0 && cntr++ > 0)\n            {\n               this.#updateApplicationShell();\n               return true;\n            }\n\n            return false;\n         };\n      };\n\n      if (isIterable(this.options.svelte))\n      {\n         for (const svelteConfig of this.options.svelte)\n         {\n            const svelteData = loadSvelteConfig({\n               app: this,\n               template: html[0],\n               config: svelteConfig,\n               elementRootUpdate\n            });\n\n            if (isApplicationShell(svelteData.component))\n            {\n               if (this.svelte.applicationShell !== null)\n               {\n                  throw new Error(\n                   `SvelteApplication - _injectHTML - An application shell is already mounted; offending config:\n                    ${JSON.stringify(svelteConfig)}`);\n               }\n\n               this.#applicationShellHolder[0] = svelteData.component;\n\n               // If Vite / HMR / svelte_hmr is enabled then add a hook to receive callbacks when the ProxyComponent\n               // refreshes. Update the element root accordingly and force an update to TJSPosition.\n               // See this issue for info about `on_hmr`:\n               // https://github.com/sveltejs/svelte-hmr/issues/57\n               if (isHMRProxy(svelteData.component) && Array.isArray(svelteData.component?.$$?.on_hmr))\n               {\n                  svelteData.component.$$.on_hmr.push(() => () => this.#updateApplicationShell());\n               }\n            }\n\n            this.#svelteData.push(svelteData);\n         }\n      }\n      else if (isObject(this.options.svelte))\n      {\n         const svelteData = loadSvelteConfig({\n            app: this,\n            template: html[0],\n            config: this.options.svelte,\n            elementRootUpdate\n         });\n\n         if (isApplicationShell(svelteData.component))\n         {\n            // A sanity check as shouldn't hit this case as only one component is being mounted.\n            if (this.svelte.applicationShell !== null)\n            {\n               throw new Error(\n                `SvelteApplication - _injectHTML - An application shell is already mounted; offending config:\n                 ${JSON.stringify(this.options.svelte)}`);\n            }\n\n            this.#applicationShellHolder[0] = svelteData.component;\n\n            // If Vite / HMR / svelte_hmr is enabled then add a hook to receive callbacks when the ProxyComponent\n            // refreshes. Update the element root accordingly and force an update to TJSPosition.\n            // See this issue for info about `on_hmr`:\n            // https://github.com/sveltejs/svelte-hmr/issues/57\n            if (isHMRProxy(svelteData.component) && Array.isArray(svelteData.component?.$$?.on_hmr))\n            {\n               svelteData.component.$$.on_hmr.push(() => () => this.#updateApplicationShell());\n            }\n         }\n\n         this.#svelteData.push(svelteData);\n      }\n\n      // Detect if this is a synthesized DocumentFragment.\n      const isDocumentFragment = html.length && html[0] instanceof DocumentFragment;\n\n      // If any of the Svelte components mounted directly targets an HTMLElement then do not inject HTML.\n      let injectHTML = true;\n      for (const svelteData of this.#svelteData)\n      {\n         if (!svelteData.injectHTML) { injectHTML = false; break; }\n      }\n      if (injectHTML) { super._injectHTML(html); }\n\n      if (this.svelte.applicationShell !== null)\n      {\n         this._element = $(this.svelte.applicationShell.elementRoot);\n\n         // Detect if the application shell exports an `elementContent` accessor.\n         this.#elementContent = hasGetter(this.svelte.applicationShell, 'elementContent') ?\n          this.svelte.applicationShell.elementContent : null;\n\n         // Detect if the application shell exports an `elementTarget` accessor.\n         this.#elementTarget = hasGetter(this.svelte.applicationShell, 'elementTarget') ?\n          this.svelte.applicationShell.elementTarget : null;\n      }\n      else if (isDocumentFragment) // Set the element of the app to the first child element in order of Svelte components mounted.\n      {\n         for (const svelteData of this.#svelteData)\n         {\n            if (svelteData.element instanceof HTMLElement)\n            {\n               this._element = $(svelteData.element);\n               break;\n            }\n         }\n      }\n\n      // Potentially retrieve a specific target element if `selectorTarget` is defined otherwise make the target the\n      // main element.\n      if (this.#elementTarget === null)\n      {\n         this.#elementTarget = typeof this.options.selectorTarget === 'string' ?\n          this._element[0].querySelector(this.options.selectorTarget) : this._element[0];\n      }\n\n      if (this.#elementTarget === null || this.#elementTarget === void 0)\n      {\n         throw new Error(`SvelteApplication - _injectHTML: Target element '${this.options.selectorTarget}' not found.`);\n      }\n\n      // The initial zIndex may be set in application options or for popOut applications is stored by `_renderOuter`\n      // in `this.#initialZIndex`.\n      if (typeof this.options.positionable === 'boolean' && this.options.positionable)\n      {\n         this.#elementTarget.style.zIndex = typeof this.options.zIndex === 'number' ? this.options.zIndex :\n          this.#initialZIndex ?? 95;\n      }\n\n      // Subscribe to local store handling.\n      this.#stores.subscribe();\n   }\n\n   /**\n    * Provides a mechanism to update the UI options store for maximized.\n    *\n    * Note: the sanity check is duplicated from {@link Application.maximize} the store is updated _before_\n    * performing the rest of animations. This allows application shells to remove / show any resize handlers\n    * correctly. Extra constraint data is stored in a saved position state in {@link SvelteApplication.minimize}\n    * to animate the content area.\n    *\n    * @param {object}   [opts] - Optional parameters.\n    *\n    * @param {boolean}  [opts.animate=true] - When true perform default maximizing animation.\n    *\n    * @param {number}   [opts.duration=0.1] - Controls content area animation duration in seconds.\n    */\n   async maximize({ animate = true, duration = 0.1 } = {})\n   {\n      if (!this.popOut || [false, null].includes(this._minimized)) { return; }\n\n      this._minimized = null;\n\n      const durationMS = duration * 1000; // For WAAPI.\n\n      // Get content\n      const element = this.elementTarget;\n      const header = element.querySelector('.window-header');\n      const content = element.querySelector('.window-content');\n\n      // Get the complete position before minimized. Used to reset min width & height to initial values later.\n      const positionBefore = this.position.state.get({ name: '#beforeMinimized' });\n\n      // First animate / restore width / async.\n      if (animate)\n      {\n         await this.position.state.restore({\n            name: '#beforeMinimized',\n            async: true,\n            animateTo: true,\n            properties: ['width'],\n            duration: 0.1\n         });\n      }\n\n      element.classList.remove('minimized');\n\n      // Reset display none on all children of header.\n      for (let cntr = header.children.length; --cntr >= 0;) { header.children[cntr].style.display = null; }\n\n      content.style.display = null;\n\n      let constraints;\n\n      if (animate)\n      {\n         // Next animate / restore height synchronously and remove key. Retrieve constraints data for slide up animation\n         // below.\n         ({ constraints } = this.position.state.restore({\n            name: '#beforeMinimized',\n            animateTo: true,\n            properties: ['height'],\n            remove: true,\n            duration\n         }));\n      }\n      else\n      {\n         ({ constraints } = this.position.state.remove({ name: '#beforeMinimized' }));\n      }\n\n      // Slide down content with stored constraints.\n      await content.animate([\n         { maxHeight: 0, paddingTop: 0, paddingBottom: 0, offset: 0 },\n         { ...constraints, offset: 1 },\n         { maxHeight: '100%', offset: 1 },\n      ], { duration: durationMS, fill: 'forwards' }).finished; // WAAPI in ms.\n\n      // Restore previous min width & height from saved data, app options, or default Foundry values.\n      this.position.set({\n         minHeight: positionBefore.minHeight ?? this.options?.minHeight ?? MIN_WINDOW_HEIGHT,\n         minWidth: positionBefore.minWidth ?? this.options?.minWidth ?? MIN_WINDOW_WIDTH,\n      });\n\n      // Remove inline styles that override any styles assigned to the app.\n      element.style.minWidth = null;\n      element.style.minHeight = null;\n\n      this._minimized = false;\n\n      // Using a 50ms timeout prevents any instantaneous display of scrollbars with the above maximize animation.\n      setTimeout(() =>\n      {\n         content.style.overflow = null;\n\n         // Reset all children of content removing overflow hidden.\n         for (let cntr = content.children.length; --cntr >= 0;)\n         {\n            content.children[cntr].style.overflow = null;\n         }\n      }, 50);\n\n      this.#stores.uiStateUpdate((options) => deepMerge(options, { minimized: false }));\n   }\n\n   /**\n    * Provides a mechanism to update the UI options store for minimized.\n    *\n    * Note: the sanity check is duplicated from {@link Application.minimize} the store is updated _before_\n    * performing the rest of animations. This allows application shells to remove / show any resize handlers\n    * correctly. Extra constraint data is stored in a saved position state in {@link SvelteApplication.minimize}\n    * to animate the content area.\n    *\n    * @param {object}   [opts] - Optional parameters\n    *\n    * @param {boolean}  [opts.animate=true] - When true perform default minimizing animation.\n    *\n    * @param {number}   [opts.duration=0.1] - Controls content area animation duration in seconds.\n    */\n   async minimize({ animate = true, duration = 0.1 } = {})\n   {\n      if (!this.rendered || !this.popOut || [true, null].includes(this._minimized)) { return; }\n\n      this.#stores.uiStateUpdate((options) => deepMerge(options, { minimized: true }));\n\n      this._minimized = null;\n\n      const durationMS = duration * 1000; // For WAAPI.\n\n      const element = this.elementTarget;\n\n      // Get content\n      const header = element.querySelector('.window-header');\n      const content = element.querySelector('.window-content');\n\n      // Save current max / min height & width.\n      const beforeMinWidth = this.position.minWidth;\n      const beforeMinHeight = this.position.minHeight;\n\n      // Set minimized min width & height for header bar.\n      this.position.set({ minWidth: 100, minHeight: 30 });\n\n      // Also set inline styles to override any styles scoped to the app.\n      element.style.minWidth = '100px';\n      element.style.minHeight = '30px';\n\n      if (content)\n      {\n         content.style.overflow = 'hidden';\n\n         // Set all children of content to overflow hidden as if there is going to be additional scrolling elements\n         // they are likely one level deep.\n         for (let cntr = content.children.length; --cntr >= 0;)\n         {\n            content.children[cntr].style.overflow = 'hidden';\n         }\n      }\n\n      const { paddingBottom, paddingTop } = globalThis.getComputedStyle(content);\n\n      // Extra data that is saved with the current position. Used during `maximize`.\n      const constraints = {\n         maxHeight: `${content.clientHeight}px`,\n         paddingTop,\n         paddingBottom\n      };\n\n      // Slide-up content\n      if (animate)\n      {\n         const animation = content.animate([\n            constraints,\n            { maxHeight: 0, paddingTop: 0, paddingBottom: 0 }\n         ], { duration: durationMS, fill: 'forwards' }); // WAAPI in ms.\n\n         // Set display style to none when animation finishes.\n         animation.finished.then(() => content.style.display = 'none');\n      }\n      else\n      {\n         setTimeout(() => content.style.display = 'none', durationMS);\n      }\n\n      // Save current position state and add the constraint data to use in `maximize`.\n      const saved = this.position.state.save({ name: '#beforeMinimized', constraints });\n\n      // Set the initial before min width & height.\n      saved.minWidth = beforeMinWidth;\n      saved.minHeight = beforeMinHeight;\n\n      const headerOffsetHeight = header.offsetHeight;\n\n      // minHeight needs to be adjusted to header height.\n      this.position.minHeight = headerOffsetHeight;\n\n      if (animate)\n      {\n         // First await animation of height upward.\n         await this.position.animate.to({ height: headerOffsetHeight }, { duration }).finished;\n      }\n\n      // Set all header buttons besides close and the window title to display none.\n      for (let cntr = header.children.length; --cntr >= 0;)\n      {\n         const className = header.children[cntr].className;\n\n         if (className.includes('window-title') || className.includes('close')) { continue; }\n\n         // v10+ of Foundry core styles automatically hides anything besides the window title and close button, so\n         // explicitly set display to block.\n         if (className.includes('keep-minimized'))\n         {\n            header.children[cntr].style.display = 'block';\n            continue;\n         }\n\n         header.children[cntr].style.display = 'none';\n      }\n\n      if (animate)\n      {\n         // Await animation of width to the left / minimum width.\n         await this.position.animate.to({ width: MIN_WINDOW_WIDTH }, { duration: 0.1 }).finished;\n      }\n\n      element.classList.add('minimized');\n\n      this._minimized = true;\n   }\n\n   /**\n    * Provides a callback after all Svelte components are initialized.\n    *\n    * @param {import('./internal/state-svelte/types').MountedAppShell} [mountedAppShell] - The mounted app shell\n    *        elements.\n    */\n   onSvelteMount(mountedAppShell) {} // eslint-disable-line no-unused-vars\n\n   /**\n    * Provides a callback after the main application shell is remounted. This may occur during HMR / hot module\n    * replacement or directly invoked from the `elementRootUpdate` callback passed to the application shell component\n    * context.\n    *\n    * @param {import('./internal/state-svelte/types').MountedAppShell} [mountedAppShell] - The mounted app shell\n    *        elements.\n    */\n   onSvelteRemount(mountedAppShell) {} // eslint-disable-line no-unused-vars\n\n   /**\n    * Override replacing HTML as Svelte components control the rendering process. Only potentially change the outer\n    * application frame / title for pop-out applications.\n    *\n    * @protected\n    * @ignore\n    * @internal\n    */\n   _replaceHTML(element, html)  // eslint-disable-line no-unused-vars\n   {\n      if (!element.length) { return; }\n\n      this.reactive.updateHeaderButtons();\n   }\n\n   /**\n    * Provides an override verifying that a new Application being rendered for the first time doesn't have a\n    * corresponding DOM element already loaded. This is a check that only occurs when `this._state` is\n    * `Application.RENDER_STATES.NONE`. It is useful in particular when SvelteApplication has a static ID\n    * explicitly set in `this.options.id` and long intro / outro transitions are assigned. If a new application\n    * sharing this static ID attempts to open / render for the first time while an existing DOM element sharing\n    * this static ID exists then the initial render is cancelled below rather than crashing later in the render\n    * cycle {@link TJSPosition.set}.\n    *\n    * @protected\n    * @ignore\n    * @internal\n    */\n   async _render(force = false, options = {})\n   {\n      // Store any focusSource instance.\n      if (isObject(options?.focusSource)) { this.options.focusSource = options.focusSource; }\n\n      if (this._state === Application.RENDER_STATES.NONE &&\n       document.querySelector(`#${this.id}`) instanceof HTMLElement)\n      {\n         console.warn(`SvelteApplication - _render: A DOM element already exists for CSS ID '${this.id\n         }'. Cancelling initial render for new application with appId '${this.appId}'.`);\n\n         return;\n      }\n\n      await super._render(force, options);\n\n      // Handle the same render exclusion tests that reject a render in Application.\n\n      // Do not render under certain conditions.\n      if ([Application.RENDER_STATES.CLOSING, Application.RENDER_STATES.RENDERING].includes(this._state)) { return; }\n\n      // Applications which are not currently rendered must be forced.\n      if (!force && (this._state <= Application.RENDER_STATES.NONE)) { return; }\n\n      // It is necessary to directly invoke `position.set` as TJSPosition uses accessors and is not a bare object, so\n      // the merging that occurs is `Application._render` does not take effect.\n      if (!this._minimized) { this.#position.set(options); }\n\n      if (!this.#onMount)\n      {\n         // Add to visible apps tracked.\n         TJSAppIndex.add(this);\n\n         this.onSvelteMount({ element: this._element[0], elementContent: this.#elementContent, elementTarget:\n          this.#elementTarget });\n\n         this.#onMount = true;\n      }\n   }\n\n   /**\n    * Render the inner application content. Only render a template if one is defined otherwise provide an empty\n    * JQuery element per the core Foundry API.\n    *\n    * @protected\n    * @ignore\n    * @internal\n    */\n   async _renderInner(data)\n   {\n      const html = typeof this.template === 'string' ? await renderTemplate(this.template, data) :\n       document.createDocumentFragment();\n\n      return $(html);\n   }\n\n   /**\n    * Stores the initial z-index set in `_renderOuter` which is used in `_injectHTML` to set the target element\n    * z-index after the Svelte component is mounted.\n    *\n    * @protected\n    * @ignore\n    * @internal\n    */\n   async _renderOuter()\n   {\n      const html = await super._renderOuter();\n      this.#initialZIndex = html[0].style.zIndex;\n      return html;\n   }\n\n   /**\n    * All calculation and updates of position are implemented in {@link TJSPosition.set}. This allows position to be fully\n    * reactive and in control of updating inline styles for the application.\n    *\n    * This method remains for backward compatibility with Foundry. If you have a custom override quite likely you need\n    * to update to using the {@link TJSPosition.validators} functionality.\n    *\n    * @param {import('@typhonjs-fvtt/runtime/svelte/store/position').TJSPositionDataExtended}   [position] - TJSPosition data.\n    *\n    * @returns {TJSPosition} The updated position object for the application containing the new values.\n    * @ignore\n    */\n   setPosition(position)\n   {\n      return this.position.set(position);\n   }\n\n   /**\n    * This method is invoked by the `elementRootUpdate` callback that is added to the external context passed to\n    * Svelte components. When invoked it updates the local element roots tracked by SvelteApplication.\n    *\n    * This method may also be invoked by HMR / hot module replacement via `svelte-hmr`.\n    */\n   #updateApplicationShell()\n   {\n      const applicationShell = this.svelte.applicationShell;\n\n      if (applicationShell !== null)\n      {\n         this._element = $(applicationShell.elementRoot);\n\n         // Detect if the application shell exports an `elementContent` accessor.\n         this.#elementContent = hasGetter(applicationShell, 'elementContent') ?\n          applicationShell.elementContent : null;\n\n         // Detect if the application shell exports an `elementTarget` accessor.\n         this.#elementTarget = hasGetter(applicationShell, 'elementTarget') ?\n          applicationShell.elementTarget : null;\n\n         if (this.#elementTarget === null)\n         {\n            this.#elementTarget = typeof this.options.selectorTarget === 'string' ?\n             this._element[0].querySelector(this.options.selectorTarget) : this._element[0];\n         }\n\n         // The initial zIndex may be set in application options or for popOut applications is stored by `_renderOuter`\n         // in `this.#initialZIndex`.\n         if (typeof this.options.positionable === 'boolean' && this.options.positionable)\n         {\n            this.#elementTarget.style.zIndex = typeof this.options.zIndex === 'number' ? this.options.zIndex :\n             this.#initialZIndex ?? 95;\n\n            super.bringToTop();\n\n            // Ensure that new root element has inline position styles set.\n            this.position.set(this.position.get());\n         }\n\n         super._activateCoreListeners([this.popOut ? this.#elementTarget?.firstChild : this.#elementTarget]);\n\n         this.onSvelteRemount({ element: this._element[0], elementContent: this.#elementContent, elementTarget:\n          this.#elementTarget });\n      }\n   }\n}\n","import { SvelteApplication } from './SvelteApplication.js';\nimport { TJSAppIndex }       from './internal/index.js';\n\nexport * from './SvelteApplication.js';\nexport * from './TJSDialog.js';\n\n// Handle `hotReload` Foundry hook when running the Vite dev server. -------------------------------------------------\n\nif (import.meta.hot)\n{\n   Hooks.on('hotReload', (data) =>\n   {\n      // Only handle JSON hot reload presumably specified in package manifest for language translation files.\n      if (data?.extension === 'json')\n      {\n         // Postpone until next clock tick to allow Foundry to update localization first.\n         setTimeout(() =>\n         {\n            for (const app of TJSAppIndex.values())\n            {\n               const appShell = app.svelte.applicationShell;\n\n               // Retrieve the original `svelte-hmr` instrumented HMR component / not the proxy.\n               const hmrComponent = appShell?.$$?.hmr_cmp;\n\n               if (appShell && typeof hmrComponent?.$replace === 'function')\n               {\n                  const svelteData = app.svelte.dataByComponent(appShell);\n                  if (svelteData)\n                  {\n                     try\n                     {\n                        // Replace with self; this will invoke `on_hmr` callback in associated SvelteApplication.\n                        hmrComponent.$replace(hmrComponent.constructor, {\n                           target: svelteData.config.target,\n                           anchor: svelteData.config.anchor,\n                           preserveLocalState: true,\n                           conservative: true\n                        });\n                     }\n                     catch (error)\n                     {\n                        const name = hmrComponent?.constructor?.name ?? 'Unknown';\n                        console.error(`TyphonJS Runtime Library error; Could not hot reload component: '${name}'`);\n                        console.error(error);\n                     }\n                  }\n               }\n            }\n         }, 0);\n      }\n\n      return true;\n   });\n}\n\n// Handle `PopOut!` module hooks to allow applications to popout to their own browser window -------------------------\n\nHooks.on('PopOut:loading', (app) =>\n{\n   if (app instanceof SvelteApplication) { app.position.enabled = false; }\n});\n\nHooks.on('PopOut:popin', (app) =>\n{\n   if (app instanceof SvelteApplication) { app.position.enabled = true; }\n});\n\nHooks.on('PopOut:close', (app) =>\n{\n   if (app instanceof SvelteApplication) { app.position.enabled = true; }\n});\n\n// From: SvelteApplication.js ----------------------------------------------------------------------------------------\n\n/**\n * @typedef {object} SvelteApplicationOptions Options for SvelteApplication. Note: that this extends the Foundry\n * {@link ApplicationOptions}.\n *\n * @property {boolean}  [defaultCloseAnimation=true] If false the default slide close animation is not run.\n *\n * @property {boolean}  [draggable=true] If true then application shells are draggable.\n *\n * @property {boolean}  [focusAuto=true] When true auto-management of app focus is enabled.\n *\n * @property {boolean}  [focusKeep=false] When `focusAuto` and `focusKeep` is true; keeps internal focus.\n *\n * @property {import('@typhonjs-fvtt/runtime/util/browser').A11yFocusSource}   [focusSource] - Defines A11yHelper focus source to\n *           apply when application closes.\n *\n * @property {boolean}  [focusTrap=true] When true focus trapping / wrapping is enabled keeping focus inside app.\n *\n * @property {boolean}  [headerButtonNoClose=false] If true then the close header button is removed.\n *\n * @property {boolean}  [headerButtonNoLabel=false] If true then header button labels are removed.\n *\n * @property {string}   [headerIcon] Sets a header icon given an image URL.\n *\n * @property {boolean}  [headerNoTitleMinimized=false] If true then header title is hidden when minimized.\n *\n * @property {number}   [minHeight=MIN_WINDOW_HEIGHT] Assigned to position. Number specifying minimum\n *           window height.\n *\n * @property {number}   [minWidth=MIN_WINDOW_WIDTH] Assigned to position. Number specifying minimum\n *           window width.\n *\n * @property {boolean}  [positionable=true] If false then `position.set` does not take effect.\n *\n * @property {import('@typhonjs-fvtt/runtime/svelte/store/position').TJSPositionInitialHelper}   [positionInitial] A helper for\n *           initial position placement.\n *\n * @property {boolean}  [positionOrtho=true] When true TJSPosition is optimized for orthographic use.\n *\n * @property {import('@typhonjs-fvtt/runtime/svelte/store/position').TJSPositionValidatorOptions}   [positionValidator] A validator\n *           function or data or list of validators.\n *\n * @property {import('@typhonjs-fvtt/runtime/svelte/store/web-storage').TJSWebStorage}   [sessionStorage] An instance of\n *           TJSWebStorage (session) to share across SvelteApplications.\n *\n * @property {import('@typhonjs-fvtt/runtime/svelte/util').TJSSvelteConfig}   [svelte] A Svelte configuration object defining\n *           the main component.\n *\n * @property {import('@typhonjs-fvtt/runtime/svelte/store/position').TJSTransformOrigin}   [transformOrigin='top left'] By default,\n *           'top / left' respects rotation when minimizing.\n */\n","import OBSRemote from \"../svelte/OBSRemote.svelte\";\nimport { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\n\nexport default class OBSRemoteApplication extends SvelteApplication {\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"obsremote\"],\n      id: \"obsremote-application\",\n      title: \"OBS Remote Settings\",\n      height: 700,\n      width: 520,\n      focusAuto: false,\n      svelte: {\n        class: OBSRemote,\n        target: document.body,\n      },\n    });\n  }\n}\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import {\n    generateDataBlockFromSetting,\n    getSetting,\n    setSetting,\n  } from \"../utils/settings.js\";\n  import { getContext, onDestroy } from \"svelte\";\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n  import { sendOBSSetting } from \"../utils/socket.js\";\n\n  let websocketSettings = getSetting(\"websocketSettings\");\n  export let elementRoot = void 0;\n\n  const context = getContext(\"#external\");\n\n  async function submit() {\n    await setSetting(\"websocketSettings\", websocketSettings);\n    context.application.close();\n  }\n\n  let { onlineUsers } = generateDataBlockFromSetting();\n  let currentTrackedPlayer = game?.user.id;\n\n  let hook = Hooks.on(\"userConnected\", () => {\n    onlineUsers = generateDataBlockFromSetting().onlineUsers;\n    if (\n      onlineUsers.find((element) => element.id === currentTrackedPlayer) ===\n      undefined\n    ) {\n      currentTrackedPlayer = game?.user.id;\n    }\n  });\n\n  onDestroy(() => {\n    Hooks.off(\"userConnected\", hook);\n  });\n\n  function sync() {\n    sendOBSSetting(currentTrackedPlayer, websocketSettings);\n  }\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <main>\n    <hr />\n    <div class=\"flexcol\">\n      URL:<input bind:value=\"{websocketSettings.url}\" name=\"url\" type=\"text\" />\n      <br />\n      Port:\n      <input bind:value=\"{websocketSettings.port}\" name=\"port\" type=\"number\" />\n      <br />\n      Password:\n      <input\n        bind:value=\"{websocketSettings.password}\"\n        name=\"password\"\n        type=\"password\"\n      />\n      <hr />\n      <button on:click=\"{submit}\" type=\"submit\">Save</button>\n      <hr />\n      Sync to Client:\n      <div>\n        <select\n          bind:value=\"{currentTrackedPlayer}\"\n          name=\"trackedPlayer\"\n          id=\"trackedPlayer\"\n        >\n          {#each onlineUsers as { id, name }}\n            <option value=\"{id}\">{name}</option>\n          {/each}\n        </select>\n        <br />\n        <button on:click=\"{sync}\" type=\"submit\">Sync</button>\n      </div>\n    </div>\n  </main>\n</ApplicationShell>\n","import ObsWebsocket from \"../svelte/OBSWebsocket.svelte\";\nimport { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\n\nexport default class OBSWebsocketApplication extends SvelteApplication {\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"obswebsocket\"],\n      id: \"obswebsocket-application\",\n      title: \"OBS Websocket Settings\",\n      tabs: [\n        {\n          navSelector: \".tabs\",\n          contentSelector: \".content\",\n          initial: \"onLoad\",\n        },\n      ],\n      svelte: {\n        class: ObsWebsocket,\n        target: document.body,\n      },\n    });\n  }\n}\n","<script>\n\timport { onMount, tick } from 'svelte';\n\n\t// props\n\texport let items;\n\texport let height = '100%';\n\texport let itemHeight = undefined;\n\n\tlet foo;\n\n\t// read-only, but visible to consumers via bind:start\n\texport let start = 0;\n\texport let end = 0;\n\n\t// local state\n\tlet height_map = [];\n\tlet rows;\n\tlet viewport;\n\tlet contents;\n\tlet viewport_height = 0;\n\tlet visible;\n\tlet mounted;\n\n\tlet top = 0;\n\tlet bottom = 0;\n\tlet average_height;\n\n\t$: visible = items.slice(start, end).map((data, i) => {\n\t\treturn { index: i + start, data };\n\t});\n\n\t// whenever `items` changes, invalidate the current heightmap\n\t$: if (mounted) refresh(items, viewport_height, itemHeight);\n\n\tasync function refresh(items, viewport_height, itemHeight) {\n\t\tconst { scrollTop } = viewport;\n\n\t\tawait tick(); // wait until the DOM is up to date\n\n\t\tlet content_height = top - scrollTop;\n\t\tlet i = start;\n\n\t\twhile (content_height < viewport_height && i < items.length) {\n\t\t\tlet row = rows[i - start];\n\n\t\t\tif (!row) {\n\t\t\t\tend = i + 1;\n\t\t\t\tawait tick(); // render the newly visible row\n\t\t\t\trow = rows[i - start];\n\t\t\t}\n\n\t\t\tconst row_height = height_map[i] = itemHeight || row.offsetHeight;\n\t\t\tcontent_height += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = (top + content_height) / end;\n\n\t\tbottom = remaining * average_height;\n\t\theight_map.length = items.length;\n\n\t}\n\n\tasync function handle_scroll() {\n\t\tconst { scrollTop } = viewport;\n\n\t\tconst old_start = start;\n\n\t\tfor (let v = 0; v < rows.length; v += 1) {\n\t\t\theight_map[start + v] = itemHeight || rows[v].offsetHeight;\n\t\t}\n\n\t\tlet i = 0;\n\t\tlet y = 0;\n\n\t\twhile (i < items.length) {\n\t\t\tconst row_height = height_map[i] || average_height;\n\t\t\tif (y + row_height > scrollTop) {\n\t\t\t\tstart = i;\n\t\t\t\ttop = y;\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ty += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\twhile (i < items.length) {\n\t\t\ty += height_map[i] || average_height;\n\t\t\ti += 1;\n\n\t\t\tif (y > scrollTop + viewport_height) break;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = y / end;\n\n\t\twhile (i < items.length) height_map[i++] = average_height;\n\t\tbottom = remaining * average_height;\n\n\t\t// prevent jumping if we scrolled up into unknown territory\n\t\tif (start < old_start) {\n\t\t\tawait tick();\n\n\t\t\tlet expected_height = 0;\n\t\t\tlet actual_height = 0;\n\n\t\t\tfor (let i = start; i < old_start; i +=1) {\n\t\t\t\tif (rows[i - start]) {\n\t\t\t\t\texpected_height += height_map[i];\n\t\t\t\t\tactual_height += itemHeight || rows[i - start].offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst d = actual_height - expected_height;\n\t\t\tviewport.scrollTo(0, scrollTop + d);\n\t\t}\n\n\t\t// TODO if we overestimated the space these\n\t\t// rows would occupy we may need to add some\n\t\t// more. maybe we can just call handle_scroll again?\n\t}\n\n\t// trigger initial refresh\n\tonMount(() => {\n\t\trows = contents.getElementsByTagName('svelte-virtual-list-row');\n\t\tmounted = true;\n\t});\n</script>\n\n<style>\n\tsvelte-virtual-list-viewport {\n\t\tposition: relative;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling:touch;\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-contents, svelte-virtual-list-row {\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-row {\n\t\toverflow: hidden;\n\t}\n</style>\n\n<svelte-virtual-list-viewport\n\tbind:this={viewport}\n\tbind:offsetHeight={viewport_height}\n\ton:scroll={handle_scroll}\n\tstyle=\"height: {height};\"\n>\n\t<svelte-virtual-list-contents\n\t\tbind:this={contents}\n\t\tstyle=\"padding-top: {top}px; padding-bottom: {bottom}px;\"\n\t>\n\t\t{#each visible as row (row.index)}\n\t\t\t<svelte-virtual-list-row>\n\t\t\t\t<slot item={row.data}>Missing template</slot>\n\t\t\t</svelte-virtual-list-row>\n\t\t{/each}\n\t</svelte-virtual-list-contents>\n</svelte-virtual-list-viewport>\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import VirtualList from \"@sveltejs/svelte-virtual-list\";\n  import { getStore, setSetting } from \"../utils/settings.js\";\n  import { getContext } from \"svelte\";\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n\n  let selectedActors = getStore(\"overlayActors\");\n\n  let actors = game.actors;\n  export let elementRoot = void 0;\n\n  let searchTerm = \"\";\n\n  $: filteredActors = actors.filter(\n    (item) => item.name?.indexOf(searchTerm) !== -1,\n  );\n\n  const context = getContext(\"#external\");\n\n  async function submit() {\n    await setSetting(\"overlayActors\", $selectedActors);\n    context.application.close();\n  }\n\n  function change(id) {\n    let actors = $selectedActors;\n    if (actors.includes(id)) {\n      actors = actors.filter((e) => e !== id);\n    } else {\n      actors.push(id);\n    }\n    $selectedActors = actors;\n  }\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <main>\n    <input bind:value=\"{searchTerm}\" name=\"search\" type=\"text\" />\n\n    <VirtualList itemHeight=\"{50}\" items=\"{filteredActors}\" let:item>\n      <div>\n        <input\n          checked=\"{item.id ? $selectedActors.includes(item.id) : false}\"\n          id=\"{item.id}\"\n          name=\"{item.id}\"\n          on:change=\"{change(item.id)}\"\n          type=\"checkbox\"\n          value=\"{item.id}\"\n        />\n        <label for=\"{item.id}\"\n          ><img alt=\"{item.name}\" src=\"{item.img}\" />\n          <span>{item.name}</span></label\n        >\n      </div>\n    </VirtualList>\n\n    <footer>\n      <button on:click=\"{submit}\">Close</button>\n    </footer>\n  </main>\n</ApplicationShell>\n\n<style lang=\"stylus\">\n  main {\n    display: grid;\n    grid-template-columns: 100%;\n    grid-template-rows: 35px auto 35px;\n\n    input[type='checkbox'] {\n      opacity: 0;\n      position: fixed;\n      width: 0;\n    }\n\n    label {\n      width: 100%;\n      height: 50px;\n      display: inline-flex;\n      border: 2px solid #444;\n      align-items: center;\n      border-radius: 4px;\n    }\n\n    img {\n      height: inherit;\n    }\n\n    label:hover {\n      background-color: rgba(0 0 0 10%);\n    }\n\n    input[type='checkbox']:checked + label {\n      background-color: rgba(0 0 0 20%);\n      border-color: rgba(0 0 0 37.8%);\n    }\n\n    footer {\n      position: absolute;\n      width: 100%;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    }\n  }\n</style>\n","import OverlayActorSelectUi from \"../svelte/OverlayActorSelectUI.svelte\";\nimport { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\nimport { getStore } from \"../utils/settings.js\";\n\nexport default class OverlayActorSelect extends SvelteApplication {\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"actorselect\"],\n      id: \"actorselect-application\",\n      title: \"Actor Selection\",\n      tabs: [\n        {\n          navSelector: \".tabs\",\n          contentSelector: \".content\",\n          initial: \"onLoad\",\n        },\n      ],\n      height: 300,\n      width: 400,\n      resizable: true,\n      svelte: {\n        class: OverlayActorSelectUi,\n        target: document.body,\n      },\n    });\n  }\n  _getHeaderButtons() {\n    const buttons = super._getHeaderButtons();\n\n    buttons.unshift({\n      icon: \"fas fa-rotate\",\n      title: \"Reset\",\n      label: \"Reset\",\n\n      onPress: function () {\n        getStore(\"overlayActors\").set([]);\n      },\n    });\n    return buttons;\n  }\n}\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n  import { getContext } from \"svelte\";\n\n  export let elementRoot = void 0;\n\n  let application = getContext(\"#external\").application;\n\n  let style = application.style;\n\n  function close() {\n    application.style = style;\n    application.close();\n  }\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <input bind:value=\"{style}\" name=\"style\" type=\"text\" />\n  <footer>\n    <button on:click=\"{close}\">Submit</button>\n  </footer>\n</ApplicationShell>\n\n<style>\n  footer {\n    position: absolute;\n    width: 100%;\n    bottom: 0;\n    left: 0;\n    padding: 10px;\n  }\n</style>\n","import { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\nimport StyleEditorUi from \"../svelte/StyleEditorUi.svelte\";\n\nexport default class StyleEditor extends SvelteApplication {\n  style;\n  callback;\n\n  constructor(style, callback) {\n    super();\n    this.style = style;\n    this.callback = callback;\n  }\n\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"styleeditor\"],\n      id: \"styleeditor-application\",\n      title: \"Style Editor\",\n      //tabs: [{ navSelector: '.tabs', contentSelector: '.content', initial: 'onLoad' }],\n      height: 125,\n      width: 400,\n      //resizable: true,\n      svelte: {\n        class: StyleEditorUi,\n        target: document.body,\n      },\n    });\n  }\n\n  async close(options = {}) {\n    this.callback(this.style);\n    return super.close(options);\n  }\n}\n","<span>\n  Legacy/Missing Type. Please select a new type in the dropdown to edit.\n</span>;\n","<script>\n  import StyleEditor from \"../../../applications/styleditor.js\";\n  import FallbackEditor from \"./FallbackEditor.svelte\";\n  import { getApi } from \"../../../utils/helpers\";\n\n  export let component;\n  export let removeFn;\n  export let index;\n\n  const componentNames = getApi().overlayTypes.get(\"sl\").overlayComponentNames;\n\n  //const componentEditors =  getApi().overlayTypes.get(\"sl\").overlayComponentEditors;\n\n  function openStyleEditor() {\n    let editor = new StyleEditor(component.style, (styleNew) => {\n      component.style = styleNew;\n    });\n    editor.render(true);\n  }\n\n  function getEditor(type) {\n    const editor = getApi()\n      .overlayTypes.get(\"sl\")\n      .overlayComponentEditors.get(type);\n    if (editor !== undefined) {\n      return editor;\n    } else {\n      return FallbackEditor;\n    }\n  }\n\n  function getCompactButtons(type) {\n    return !!getApi().overlayTypes.get(\"sl\").compactEditorButtons.get(type);\n  }\n</script>\n\n<li data-list-key=\"{index}\">\n  <div class=\"component handle\">\n    <i class=\"fa-light fa-bars grab\"></i>\n    <select bind:value=\"{component.type}\" name=\"types\">\n      {#each [...componentNames] as [component, name]}\n        <option value=\"{component}\">{name}</option>\n      {/each}\n    </select>\n    <svelte:component\n      this=\"{getEditor(component.type)}\"\n      bind:data=\"{component.data}\"\n    />\n    <div class=\"{getCompactButtons(component.type) ? '' : 'buttons'}\">\n      <button\n        on:click=\"{() => removeFn(index)}\"\n        title=\"Remove Component\"\n        type=\"button\"\n      >\n        <i class=\"fas fa-trash\"></i>\n      </button>\n      <button\n        class=\"add\"\n        on:click=\"{() => openStyleEditor()}\"\n        title=\"Edit Component Style\"\n        type=\"button\"\n      >\n        <i class=\"fas fa-pencil\"></i>\n      </button>\n    </div>\n  </div>\n</li>\n\n<style lang=\"stylus\">\n  li {\n    padding-top: 1px;\n    padding-bottom: 1px;\n  }\n\n  .grab {\n    height: 35px;\n    width: 35px;\n    font-size: 25px;\n    text-align: center;\n    align-self: center;\n    line-height: 35px;\n  }\n\n  .component {\n    display: grid;\n    grid-template-columns: 35px 150px auto 35px 35px;\n    grid-template-rows: auto;\n\n    button {\n      width: 35px;\n      margin: auto;\n    }\n\n    select {\n      height: auto;\n    }\n    .buttons {\n      grid-column 4 / span 2;\n      display flex;\n    }\n  }\n</style>\n","/**!\n * Sortable 1.15.2\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.2\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop);\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = parent.parentNode);\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvent: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","<script>import { onDestroy, onMount } from 'svelte';\nimport Sortable, { MultiDrag, Swap } from 'sortablejs';\n// Svelte Library Variables\nlet list;\nlet sortable;\nlet className;\n/**\n * Classes to be added to the list div\n */\nexport { className as class };\n/**\n * Add a multiDrag class. Automatically mounts the multiDrag Plugin, sets it to true and sets fallbackTolerance to 3.\n * @type {string}\n */\nexport let multiDragClass = null;\n/**\n * Add a swap class. Automatically mounts the swap Plugin, sets it to true.\n * @type {string}\n */\nexport let swapClass = null;\n// Default Options\n/**\n * \"name\" OR { name: \"...\", pull: [true, false, 'clone', array], put: [true, false, array] }\n * @type {string | GroupOptions}\n * */\nexport let group = undefined;\n/** Sorting inside list */\nexport let sort = true;\n/** Disables the sortable if set to true. */\nexport let disabled = false;\nexport let store = undefined;\n/**\n * Drag handle selector within list items\n * @type {string}\n * */\nexport let handle = undefined;\n/** Threshold of the swap zone. Must be between 0 and 1. */\nexport let swapThreshold = 1; // 0 <= x <= 1\n/** Will always use inverted swap zone if set to true. */\nexport let invertSwap = false;\n/**\n * Threshold of the inverted swap zone (will be set to swapThreshold value by default).\n * @type {number}\n */\nexport let invertedSwapThreshold = undefined; // will be set to same as swapThreshold if default\n/** Remove the clone element when it is not showing, rather than just hiding it */\nexport let removeCloneOnHide = true;\n/** Class name for the drop placeholder. */\nexport let ghostClass = 'sortable-ghost';\n/** Class name for the chosen item. */\nexport let chosenClass = 'sortable-chosen';\n/** Class name for the dragging item. */\nexport let dragClass = 'sortable-drag';\n/** Elements to ignore */\nexport let ignore = 'a; img';\n/**\n * Selectors that do not lead to dragging (String or Function)\n * @type {string | Function}\n */\nexport let filter = undefined;\nexport let preventOnFilter = true;\nexport let animation = 0;\n/**\n * Easing for animation. Defaults to null.\n *\n * See https://easings.net/ for examples.\n *\n * For other possible values, see\n * https://www.w3schools.com/cssref/css3_pr_animation-timing-function.asp\n *\n * @type {string | function}\n */\nexport let easing = undefined;\n/** HTML attribute that is used by the `toArray()` method. */\nexport let dataIdAttr = 'data-id';\n/** Time in milliseconds to define when the sorting should start */\nexport let delay = 0;\n/** Whether or not the delay should be applied only if the user is using touch (eg. on a mobile device). No delay will be applied in any other case. */\nexport let delayOnTouchOnly = false;\n/** Ignore the HTML5 DnD behaviour and force the fallback to kick in */\nexport let forceFallback = false;\n/** Class name for the cloned DOM Element when using forceFallback. */\nexport let fallbackClass = 'sortable-fallback';\n/** Appends the cloned DOM Element into the Document's Body. */\nexport let fallbackOnBody = false;\n/** Specify in pixels how far the mouse should move before it's considered as a drag. */\nexport let fallbackTolerance = 0;\nexport let fallbackOffset = {\n    x: 0,\n    y: 0\n};\n/** Pixel distance mouse must be from empty sortable to insert drag element into it */\nexport let emptyInsertThreshold = 5;\n/** Direction that the Sortable should sort in. Can be set to 'vertical', 'horizontal', or a function, which will be called whenever a target is dragged over. Must return 'vertical' or 'horizontal'. Leave blank to auto detect.*/\nexport let direction = undefined;\n/** How many pixels the point should move before cancelling a delayed drag event */\nexport let touchStartThreshold = undefined;\nexport let setData = undefined;\n/** Specifies which items inside the element should be draggable. */\nexport let draggable = null;\n/**\n * Element is chosen\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onChoose = undefined;\n/**\n * Element is unchosen\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onUnchoose = undefined;\n/**\n * Element dragging started\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onStart = undefined;\n/**\n * Element dragging ended\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onEnd = undefined;\n/**\n * Element is dropped into the list from another list\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onAdd = undefined;\n/**\n * Changed sorting within list\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onUpdate = undefined;\n/**\n * Element is removed from the list into another list\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onRemove = undefined;\n/**\n * Attempt to drag a filtered element\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onFilter = undefined;\n/**\n * Called by any change to the list (add / update / remove)\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onSort = undefined;\n/**\n * Called when creating a clone of element\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onClone = undefined;\n/**\n * Event when you move an item in the list or between lists\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onMove = undefined;\n/**\n * Called when dragging element changes position\n * @type {fn(event: SortableEvent) => void}\n * */\nexport let onChange = undefined;\nlet options;\nonMount(() => {\n    options = {\n        group,\n        sort,\n        disabled,\n        store,\n        handle,\n        swapThreshold,\n        invertSwap,\n        invertedSwapThreshold,\n        removeCloneOnHide,\n        ghostClass,\n        chosenClass,\n        dragClass,\n        ignore,\n        filter,\n        preventOnFilter,\n        animation,\n        easing,\n        dataIdAttr,\n        delay,\n        delayOnTouchOnly,\n        forceFallback,\n        fallbackClass,\n        fallbackOnBody,\n        fallbackTolerance,\n        fallbackOffset,\n        emptyInsertThreshold,\n        direction,\n        touchStartThreshold,\n        setData,\n        onChoose,\n        onUnchoose,\n        onStart,\n        onEnd,\n        onAdd,\n        onUpdate,\n        onRemove,\n        onFilter,\n        onSort,\n        onClone,\n        onMove,\n        onChange\n    };\n    if (draggable) {\n        options.draggable = draggable;\n    }\n    if (multiDragClass) {\n        try {\n            Sortable.mount(new MultiDrag());\n        }\n        catch (e) {\n            // BUG: Do nothing. Find a better way to handle multiple mounts.\n        }\n        options.multiDrag = true;\n        options.selectedClass = multiDragClass;\n        options.fallbackTolerance = 3;\n    }\n    if (swapClass) {\n        try {\n            Sortable.mount(new Swap());\n        }\n        catch (e) {\n            // BUG: Do nothing. Find a better way to handle multiple mounts.\n        }\n        options.swap = true;\n        options.swapClass = swapClass;\n    }\n    sortable = Sortable.create(list, { ...options });\n});\nonDestroy(() => {\n    if (sortable)\n        sortable.destroy();\n});\n</script>\n\n<!--\n@component\nSvelte wrapper for SortableJS.\n\n- Usage:\n  ```tsx\n  <SortableList>\n\t<div>List Item 1</div>\n\t<div>List Item 2</div>\n\t<div>List Item 3</div>\n  </SortableList>\n\t```\n  -->\n\n<div bind:this={list} class={className}>\n\t<slot />\n</div>\n","<script>\n  import { OverlayComponentData } from \"../../utils/stream\";\n  import OverlayComponentEditor from \"./editors/SingleLineOverlayEditor.svelte\";\n  import StyleEditor from \"../../applications/styleditor.js\";\n  import { SortableList } from \"@jhubbardsf/svelte-sortablejs\";\n\n  export let overlay;\n  export let removeFn;\n  export let componentindex;\n\n  function handleRemove(index) {\n    overlay.components = [\n      ...overlay.components.slice(0, index),\n      ...overlay.components.slice(index + 1, overlay.components.length),\n    ];\n  }\n\n  function handleAdd() {\n    overlay.components = overlay.components.concat(new OverlayComponentData());\n  }\n\n  let rerender = 0;\n\n  function handleReorder(e) {\n    [\n      overlay.components[e.oldDraggableIndex],\n      overlay.components[e.newDraggableIndex],\n    ] = [\n      overlay.components[e.newDraggableIndex],\n      overlay.components[e.oldDraggableIndex],\n    ];\n    rerender++;\n  }\n\n  function openStyleEditor() {\n    let editor = new StyleEditor(overlay.style, (styleNew) => {\n      overlay.style = styleNew;\n    });\n    editor.render(true);\n  }\n</script>\n\n<div class=\"scroll\">\n  <ul>\n    <SortableList animation=\"{150}\" handle=\".grab\" onEnd=\"{handleReorder}\">\n      {#key rerender}\n        {#each overlay.components as component, index (overlay.components.indexOf(component))}\n          <OverlayComponentEditor\n            bind:component=\"{component}\"\n            removeFn=\"{handleRemove}\"\n            index=\"{index}\"\n          />\n        {/each}\n      {/key}\n    </SortableList>\n  </ul>\n</div>\n<footer>\n  <button\n    class=\"add\"\n    on:click=\"{() => handleAdd()}\"\n    title=\"Add new Component\"\n    type=\"button\"><i class=\"fas fa-plus\"></i></button\n  >\n  <button\n    class=\"add\"\n    on:click=\"{() => openStyleEditor()}\"\n    title=\"Edit Overlay Style\"\n    type=\"button\"><i class=\"fas fa-pencil\"></i></button\n  >\n  <button\n    class=\"remove-tab\"\n    on:click=\"{() => removeFn(componentindex)}\"\n    title=\"Remove Overlay\"\n    type=\"button\"><i class=\"fas fa-trash\"></i></button\n  >\n</footer>\n\n<style lang=\"stylus\">\n  footer {\n    position: absolute;\n    width: calc(100% - 10px);\n    bottom: 0;\n    left: 5px;\n    display: flex;\n    padding: 0 5px 0 0;\n\n    .remove-tab {\n      width: calc(100% - 35px);\n    }\n  }\n\n  .scroll {\n    overflow: scroll;\n    float: left;\n    max-height: 100%;\n    width: 100%;\n    padding-right: 10px;\n    padding-left: 3px;\n    height: 100%;\n\n    ul {\n      list-style-type: none;\n      padding: 0;\n    }\n  }\n</style>\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import { OverlayData } from \"../utils/stream\";\n  import OverlayEditorTab from \"./components/OverlayEditorTab.svelte\";\n  import InformationOverlay from \"./streamoverlays/PerActorOverlay.svelte\";\n  import { getSetting, getStore } from \"../utils/settings\";\n  import { getContext } from \"svelte\";\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n\n  let overlays = getStore(\"streamOverlays\");\n  let actorIDs = getSetting(\"overlayActors\");\n\n  let activeIndex = 0;\n\n  function handleRemove(index) {\n    $overlays.splice(index, 1);\n    $overlays = $overlays;\n    if (activeIndex === index) {\n      activeIndex = Math.max(0, index - 1);\n    }\n  }\n\n  function handleAdd() {\n    $overlays.push(new OverlayData());\n    $overlays = $overlays;\n  }\n\n  function changeTab(tab) {\n    activeIndex = tab;\n  }\n\n  export let elementRoot = void 0;\n\n  const context = getContext(\"#external\");\n\n  async function close() {\n    context.application.close();\n  }\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <div class=\"grid\">\n    <div class=\"preview\">\n      <InformationOverlay actorIDs=\"{actorIDs}\" overlays=\"{$overlays}\" />\n    </div>\n\n    <div class=\"editor\">\n      <div class=\"nav-with-add-button\">\n        <button\n          class=\"add\"\n          on:click=\"{() => handleAdd()}\"\n          title=\"Add new Overlay\"\n          type=\"button\"><i class=\"fas fa-plus\"></i></button\n        >\n        <nav class=\"tabs\" data-group=\"primary-tabs\">\n          {#each $overlays as overlay, index ($overlays.indexOf(overlay))}\n            <!-- svelte-ignore a11y-missing-attribute -->\n            <!-- svelte-ignore a11y-click-events-have-key-events -->\n            <a\n              role=\"tab\"\n              tabindex=\"{index}\"\n              class=\"item {index === activeIndex ? 'active' : ''}\"\n              data-tab=\"{index}\"\n              on:click=\"{() => changeTab(index)}\">{index}</a\n            >\n          {/each}\n        </nav>\n      </div>\n      <hr />\n      <section class=\"content\">\n        {#each $overlays as overlay, index ($overlays.indexOf(overlay))}\n          <div\n            class=\"tab {index === activeIndex ? 'active' : ''}\"\n            data-tab=\"{index}\"\n            data-group=\"primary-tabs\"\n          >\n            <OverlayEditorTab\n              bind:overlay=\"{overlay}\"\n              removeFn=\"{handleRemove}\"\n              componentindex=\"{index}\"\n            />\n          </div>\n        {/each}\n      </section>\n    </div>\n  </div>\n  <hr />\n  <footer>\n    <button on:click=\"{close}\">Close</button>\n  </footer>\n</ApplicationShell>\n\n<style lang=\"stylus\">\n\n    footer {\n        position: absolute;\n        width: calc(100% - 20px);\n        bottom: 0;\n        left: 10px;\n        padding: 10px;\n        display: flex;\n    }\n\n    .add {\n        width: 35px;\n        align-self: flex-end;\n    }\n\n    .grid {\n        display: grid;\n        grid-template-columns: 40% 60%;\n        grid-template-rows: 100%;\n        height: calc(100% - 50px);\n        min-height: calc(100% - 50px);\n        max-height: calc(100% - 50px);\n    }\n\n    .preview {\n        background-color: black;\n        border-radius: 4px;\n    }\n\n    .editor {\n        height: 100%;\n        max-height: 100%;\n        overflow: hidden;\n        padding-left: 5px;\n\n        .content {\n            height: calc(100% - 110px);\n            max-height: calc(100% - 110px);\n            overflow: hidden;\n        }\n\n        .nav-with-add-button {\n            display: grid;\n            grid-template-columns: 35px calc(100% - 35px);\n\n            .tabs {\n                justify-content: left;\n                overflow-x: scroll;\n\n                .item {\n                    padding-inline: 10px;\n                    align-self: center;\n                    font-size: 20px;\n                    padding-top: 6px;\n                }\n            }\n\n            .add {\n                align-self: center;\n            }\n        }\n    }\n</style>\n","import OverlayEditorUI from \"../svelte/OverlayEditorUI.svelte\";\nimport { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\nimport { getSetting, setSetting } from \"../utils/settings.js\";\n\nexport default class OverlayEditor extends SvelteApplication {\n  dataArray = [];\n\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"overlayeditor\"],\n      id: \"overlayeditor-application\",\n      title: \"Overlay Editor\",\n      //tabs: [{ navSelector: '.tabs', contentSelector: '.content', initial: 'onLoad' }],\n      height: 600,\n      width: 1000,\n      zIndex: 95,\n      resizable: true,\n      focusAuto: false,\n      svelte: {\n        class: OverlayEditorUI,\n        target: document.body,\n      },\n    });\n  }\n  _getHeaderButtons() {\n    const buttons = super._getHeaderButtons();\n\n    buttons.unshift(\n      {\n        icon: \"fas fa-file-import\",\n        title: \"Import\",\n        label: \"Import\",\n\n        onPress: async function () {\n          new Dialog(\n            {\n              title: `Import Data: Overlays`,\n              content: await renderTemplate(\"templates/apps/import-data.html\", {\n                hint1:\n                  \"You are about to import an exported Overlay configuration. Please ensure that it was exported in the same system or AV Overlays may not work.\",\n                hint2:\n                  \"Please choose if you want to replace your existing overlays or add the imported list.\",\n              }),\n              buttons: {\n                replace: {\n                  icon: '<i class=\"fas fa-file-import\"></i>',\n                  label: \"Replace\",\n                  callback: (html) => {\n                    const form = html.find(\"form\")[0];\n                    if (!form.data.files.length)\n                      return ui.notifications.error(\n                        \"You did not upload a data file!\",\n                      );\n                    readTextFromFile(form.data.files[0]).then((json) =>\n                      importChatCommands(json, false),\n                    );\n                  },\n                },\n                append: {\n                  icon: '<i class=\"fas fa-file-import\"></i>',\n                  label: \"Append\",\n                  callback: (html) => {\n                    const form = html.find(\"form\")[0];\n                    if (!form.data.files.length)\n                      return ui.notifications.error(\n                        \"You did not upload a data file!\",\n                      );\n                    readTextFromFile(form.data.files[0]).then((json) =>\n                      importChatCommands(json, true),\n                    );\n                  },\n                },\n                no: {\n                  icon: '<i class=\"fas fa-times\"></i>',\n                  label: \"Cancel\",\n                },\n              },\n              default: \"import\",\n            },\n            {\n              width: 400,\n            },\n          ).render(true);\n        },\n      },\n      {\n        icon: \"fas fa-file-export\",\n        title: \"Export\",\n        label: \"Export\",\n\n        onPress: function () {\n          new Dialog({\n            title: \"Export your settings?\",\n            content: \"Do you want to export your Overlay Settings?\",\n            buttons: {\n              yes: {\n                label: \"Yes\",\n                callback: () => exportChatCommands(),\n              },\n              no: {\n                label: \"No\",\n              },\n            },\n          }).render(true);\n        },\n      },\n    );\n\n    return buttons;\n  }\n}\n\nfunction exportChatCommands() {\n  const overlays = foundry.utils.deepClone(getSetting(\"streamOverlays\"));\n\n  let data = {\n    type: \"ObsUtilsOverlays\",\n    version: 1,\n    overlays: overlays,\n    system: game.system?.id,\n  };\n\n  const filename = [\n    \"obsu\",\n    game.system?.id,\n    game.world.id,\n    \"overlays\",\n    new Date().toString(),\n  ].filterJoin(\"-\");\n  saveDataToFile(\n    JSON.stringify(data, null, 2),\n    \"text/json\",\n    `${filename}.json`,\n  );\n}\n\n/**\n * @param {String} data\n * @param {boolean} join\n */\nasync function importChatCommands(data, join) {\n  /**\n   * @type {{version:number, type: String,system: String, overlays:[]}}\n   */\n  const imported = JSON.parse(data);\n  if (imported.type !== \"ObsUtilsOverlays\") {\n    throw new Error(\"Imported file is not an OBS Utils Export\");\n  }\n  if (imported.version !== 1) {\n    throw new Error(\"Version unsupported\");\n  }\n  if (join) {\n    const overlays = getSetting(\"streamOverlays\");\n    overlays.push(...imported.overlays);\n    await setSetting(\"streamOverlays\", overlays);\n  } else {\n    await setSetting(\"streamOverlays\", imported.overlays);\n  }\n}\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n  import {\n    generateDataBlockFromSetting,\n    getSetting,\n    getStore,\n    setSetting,\n  } from \"../utils/settings.js\";\n\n  let { ic, ooc, players } = generateDataBlockFromSetting();\n  let currentIC = getSetting(\"defaultInCombat\");\n  let currentOOC = getSetting(\"defaultOutOfCombat\");\n  let currentTrackedPlayer = getSetting(\"trackedUser\");\n  let clampCanvas = getStore(\"clampCanvas\");\n\n  async function onChangeIC(event) {\n    await setSetting(\"defaultInCombat\", event.target.value);\n  }\n\n  async function onChangeOOC(event) {\n    await setSetting(\"defaultOutOfCombat\", event.target.value);\n  }\n\n  async function onChangePlayer(event) {\n    await setSetting(\"trackedUser\", event.target.value);\n  }\n\n  export let elementRoot = void 0;\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <main>\n    <b>In Combat Type</b>\n    <div>\n      {#each ic as { id, tooltip, icon }}\n        <input\n          type=\"radio\"\n          bind:group=\"{currentIC}\"\n          id=\"radioic{id}\"\n          name=\"currentIC\"\n          value=\"{id}\"\n          on:change=\"{onChangeIC}\"\n        />\n        <label class=\"button\" for=\"radioic{id}\" title=\"{tooltip}\"\n          ><i class=\"{icon}\"></i></label\n        >\n      {/each}\n    </div>\n    <hr />\n    <b>Out of Combat Types</b>\n    <div>\n      {#each ooc as { id, tooltip, icon }}\n        <input\n          type=\"radio\"\n          bind:group=\"{currentOOC}\"\n          id=\"radioooc{id}\"\n          name=\"currentOOC\"\n          value=\"{id}\"\n          on:change=\"{onChangeOOC}\"\n        />\n        <label class=\"button\" for=\"radioooc{id}\" title=\"{tooltip}\"\n          ><i class=\"{icon}\"></i></label\n        >\n      {/each}\n    </div>\n    <div>\n      <hr />\n      <b>Canvas Options</b>\n      <hr />\n      <input\n        name=\"limitcanvas\"\n        id=\"limitcanvas\"\n        type=\"checkbox\"\n        bind:checked=\"{$clampCanvas}\"\n      />\n      <label\n        class=\"button\"\n        title=\"Limit Canvas to Screen Edges\"\n        for=\"limitcanvas\"><i class=\"fas fa-arrows-maximize\"></i></label\n      >\n    </div>\n    <div>\n      <hr />\n      <b>Tracked Player</b>\n      <hr />\n      <select\n        bind:value=\"{currentTrackedPlayer}\"\n        name=\"trackedPlayer\"\n        id=\"trackedPlayer\"\n        on:change=\"{onChangePlayer}\"\n      >\n        {#each players as { id, name }}\n          <option value=\"{id}\">{name}</option>\n        {/each}\n      </select>\n    </div>\n  </main>\n</ApplicationShell>\n\n<style>\n  input {\n    opacity: 0;\n    position: fixed;\n    width: 0;\n  }\n\n  label.button {\n    background-color: #ddd;\n    width: 40px;\n    height: 40px;\n    display: inline-flex;\n    border: 2px solid #444;\n    justify-content: center;\n    align-items: center;\n    border-radius: 4px;\n  }\n\n  label i {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n  }\n\n  label:hover {\n    background-color: #dfd;\n  }\n\n  input:checked + label {\n    background-color: #bfb;\n    border-color: #4c4;\n  }\n</style>\n","import DirectorApp from \"../svelte/DirectorApp.svelte\";\nimport { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\n\nexport default class DirectorApplication extends SvelteApplication {\n  sidebarButton;\n\n  constructor(sidebarButton) {\n    super();\n    this.sidebarButton = sidebarButton;\n  }\n\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"obsdirector\"],\n      minimizable: true,\n      width: 275,\n      id: \"director-application\",\n      title: \"Director\",\n      positionOrtho: false,\n      transformOrigin: null,\n      svelte: {\n        class: DirectorApp,\n        target: document.body,\n        intro: true,\n      },\n    });\n  }\n\n  async close(options) {\n    await super.close(options);\n    $(\"[data-tool=openStreamDirector]\").removeClass(\"active\");\n    this.sidebarButton.active = false;\n  }\n}\n","export function SettingsShell(Application) {\n  return class Shell extends FormApplication {\n    static #mceSettingsApp;\n\n    static showSettings() {\n      this.#mceSettingsApp = this.#mceSettingsApp\n        ? this.#mceSettingsApp\n        : new Application();\n      this.#mceSettingsApp.render(true, { focus: true });\n\n      return this.#mceSettingsApp;\n    }\n\n    /**\n     * @inheritDoc\n     */\n    constructor(options = {}) {\n      super({}, options);\n      Shell.showSettings();\n    }\n\n    async _updateObject() {}\n\n    render() {\n      this.close();\n    }\n  };\n}\n","<script>\n  import { getActorValues } from \"../../../utils/helpers\";\n\n  import Select from \"svelte-select\";\n\n  export let data;\n  let values = getActorValues();\n  let items = [...values];\n\n  let filterText = \"\";\n\n  function handleFilter(e) {\n    if (e.detail.length === 0 && filterText.length > 0) {\n      items = [...values, filterText];\n    }\n  }\n</script>\n\n<Select\n  containerStyles=\"background-color: white;\"\n  --height=\"30px\"\n  bind:filterText=\"{filterText}\"\n  bind:justValue=\"{data}\"\n  closeListOnChange=\"false\"\n  floatingConfig=\"{{\n    strategy: 'fixed',\n  }}\"\n  items=\"{items}\"\n  on:filter=\"{handleFilter}\"\n  value=\"{data}\"\n/>\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import PlayerRollComponent from \"../../streamoverlays/overlaycomponents/PlayerRollComponent.svelte\";\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n  import { getStore } from \"../../../utils/settings\";\n\n  let preRollDelay = getStore(\"rollOverlayPreRollDelay\");\n  let preRollStay = getStore(\"rollOverlayPreRollStay\");\n  let preRollFadeIn = getStore(\"rollOverlayPreRollFadeIn\");\n  let preRollFadeOut = getStore(\"rollOverlayPreRollFadeOut\");\n  let rollStay = getStore(\"rollOverlayRollStay\");\n  let rollFadeIn = getStore(\"rollOverlayRollFadeIn\");\n  let rollFadeOut = getStore(\"rollOverlayRollFadeOut\");\n  let postRollStay = getStore(\"rollOverlayPostRollStay\");\n  let postRollFadeIn = getStore(\"rollOverlayPostRollFadeIn\");\n  let postRollFadeOut = getStore(\"rollOverlayPostRollFadeOut\");\n\n  let preRollImage = getStore(\"rollOverlayPreRollImage\");\n  let rollBackgroundImage = getStore(\"rollOverlayRollBackground\");\n  let rollForegroundImage = getStore(\"rollOverlayRollForeground\");\n  let postRollImage = getStore(\"rollOverlayPostRollImage\");\n\n  let pre = getStore(\"rollOverlayPostRollEnabled\");\n  let post = getStore(\"rollOverlayPreRollEnabled\");\n\n  let rollValue = \"20\";\n  let rollShow = false;\n\n  export let elementRoot = void 0;\n\n  function test() {\n    rollValue = Math.round(Math.random() * 20);\n    rollShow = false;\n    rollShow = true;\n  }\n\n  let filePickerAppPreRoll;\n\n  function openFilePickerPreRoll() {\n    if (filePickerAppPreRoll) {\n      filePickerAppPreRoll.bringToTop();\n    } else {\n      filePickerAppPreRoll = new FilePicker({\n        type: \"image\",\n        callback: (path) => {\n          $preRollImage = path;\n          filePickerAppPreRoll = null;\n        },\n        title: \"Select an Image\",\n      }).render(true);\n    }\n  }\n\n  let filePickerAppForeground;\n\n  function openFilePickerForeground() {\n    if (filePickerAppForeground) {\n      filePickerAppForeground.bringToTop();\n    } else {\n      filePickerAppForeground = new FilePicker({\n        type: \"image\",\n        callback: (path) => {\n          $rollForegroundImage = path;\n          filePickerAppForeground = null;\n        },\n        title: \"Select an Image\",\n      }).render(true);\n    }\n  }\n\n  let filePickerAppBackground;\n\n  function openFilePickerBackground() {\n    if (filePickerAppBackground) {\n      filePickerAppBackground.bringToTop();\n      filePickerAppBackground = null;\n    } else {\n      filePickerAppBackground = new FilePicker({\n        type: \"image\",\n        callback: (path) => {\n          $rollBackgroundImage = path;\n        },\n        title: \"Select an Image\",\n      }).render(true);\n    }\n  }\n\n  let filePickerAppPostRoll;\n\n  function openFilePickerPostRoll() {\n    if (filePickerAppPostRoll) {\n      filePickerAppPostRoll.bringToTop();\n      filePickerAppPostRoll = null;\n    } else {\n      filePickerAppPostRoll = new FilePicker({\n        type: \"image\",\n        callback: (path) => {\n          $postRollImage = path;\n        },\n        title: \"Select an Image\",\n      }).render(true);\n    }\n  }\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <div class=\"editor\">\n    <section class=\"preview obs-utils roll-overlay\">\n      <PlayerRollComponent\n        bind:rollValue=\"{rollValue}\"\n        id=\"preview\"\n        postRollShow=\"{rollShow}\"\n        preRollShow=\"{rollShow}\"\n        rollShow=\"{rollShow}\"\n      />\n      <button on:click=\"{test}\">Test</button>\n    </section>\n    <section class=\"menu\">\n      <div class=\"pre\">\n        <section class=\"header\">\n          <input bind:checked=\"{$pre}\" type=\"checkbox\" />\n\n          <span>Pre Roll Image</span>\n        </section>\n        <section class=\"content\">\n          Image URL\n          <section class=\"filepicker\">\n            <input bind:value=\"{$preRollImage}\" type=\"text\" />\n            <button on:click=\"{openFilePickerPreRoll}\"\n              ><i class=\"fa-solid fa-file\"></i></button\n            >\n          </section>\n          Delay (ms)\n          <input bind:value=\"{$preRollDelay}\" min=\"0\" type=\"number\" />\n          Fade In (ms)\n          <input bind:value=\"{$preRollFadeIn}\" min=\"0\" type=\"number\" />\n          Duration (ms)\n          <input bind:value=\"{$preRollStay}\" min=\"0\" type=\"number\" />\n          Fade Out (ms)\n          <input bind:value=\"{$preRollFadeOut}\" min=\"0\" type=\"number\" />\n        </section>\n      </div>\n      <div class=\"roll\">\n        <section class=\"header\">\n          <span>Roll</span>\n        </section>\n        <section class=\"content\">\n          Foreground Image URL\n          <section class=\"filepicker\">\n            <input bind:value=\"{$rollForegroundImage}\" type=\"text\" />\n            <button on:click=\"{openFilePickerForeground}\"\n              ><i class=\"fa-solid fa-file\"></i></button\n            >\n          </section>\n          Background Image URL\n          <section class=\"filepicker\">\n            <input bind:value=\"{$rollBackgroundImage}\" type=\"text\" />\n            <button on:click=\"{openFilePickerBackground}\"\n              ><i class=\"fa-solid fa-file\"></i></button\n            >\n          </section>\n          Fade In (ms)\n          <input bind:value=\"{$rollFadeIn}\" min=\"0\" type=\"number\" />\n          Duration (ms)\n          <input bind:value=\"{$rollStay}\" min=\"0\" type=\"number\" />\n          Fade Out (ms)\n          <input bind:value=\"{$rollFadeOut}\" min=\"0\" type=\"number\" />\n        </section>\n      </div>\n      <div class=\"post\">\n        <section class=\"header\">\n          <input bind:checked=\"{$post}\" type=\"checkbox\" />\n          <span>Post Roll Image</span>\n        </section>\n        <section class=\"content\">\n          Image URL\n          <section class=\"filepicker\">\n            <input bind:value=\"{$postRollImage}\" type=\"text\" />\n            <button on:click=\"{openFilePickerPostRoll}\"\n              ><i class=\"fa-solid fa-file\"></i></button\n            >\n          </section>\n          Fade In (ms)\n          <input bind:value=\"{$postRollFadeIn}\" min=\"0\" type=\"number\" />\n          Duration (ms)\n          <input bind:value=\"{$postRollStay}\" min=\"0\" type=\"number\" />\n          Fade Out (ms)\n          <input bind:value=\"{$postRollFadeOut}\" min=\"0\" type=\"number\" />\n        </section>\n      </div>\n    </section>\n  </div>\n</ApplicationShell>\n\n<style lang=\"stylus\">\n  .editor\n    display grid\n    grid-template-rows 2fr 1fr\n\n    .preview\n      grid-row-start 1\n      background black\n      border-radius 5px\n      color white\n      margin unset\n      padding unset\n      position relative\n\n      button\n        position absolute\n        bottom 1px\n        left 0\n        width 40px\n        background black\n        color white\n        border-color darkgray\n\n    .menu\n      grid-row-start 2\n      display grid\n      grid-template-columns 1fr 1fr 1fr\n\n      // Text Inputs with 35px wide button on the right side\n\n      .filepicker\n        display flex\n\n        button\n          width 35px\n\n      div\n        border-left 2px solid grey\n        border-right 2px solid grey\n        border-bottom 2px solid grey\n        border-radius 6px\n        margin 2px\n\n        .header\n          display flex\n          height 30px\n          align-items center\n          background lightgray\n          border-bottom 1px solid gray\n          border-top 2px solid gray\n          border-top-left-radius 6px\n          border-top-right-radius 6px\n\n\n        .content\n          margin 2px\n\n      .pre\n        grid-column-start 1\n\n      .roll\n        grid-column-start 2\n\n      .post\n        grid-column-start 3\n</style>\n","import { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\nimport PlayerRollOverlayEditor from \"../svelte/components/editors/PlayerRollOverlayEditor.svelte\";\n\nexport default class RollOverlay extends SvelteApplication {\n  dataArray = [];\n\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"rolloverlayeditor\"],\n      id: \"rolloverlayeditor-application\",\n      title: \"Roll Overlay Editor\",\n      height: 600,\n      width: 1000,\n      zIndex: 95,\n      resizable: true,\n      focusKeep: true,\n      svelte: {\n        class: PlayerRollOverlayEditor,\n        target: document.body,\n      },\n    });\n  }\n}\n","<script>\n  import { slide } from \"svelte/transition\";\n\n  export let collapsed = true;\n  export let title = \"Section\";\n  export let editableTitle = false;\n\n  function click() {\n    collapsed = !collapsed;\n  }\n</script>\n\n<div class=\"collapsable-section\">\n  <!-- svelte-ignore a11y-click-events-have-key-events -->\n  <!-- svelte-ignore a11y-no-static-element-interactions -->\n  <section class=\"header\" on:click=\"{click}\">\n    {#if editableTitle}<input type=\"text\" bind:value=\"{title}\" />{:else}<span\n        >{title}</span\n      >{/if}\n  </section>\n  {#if !collapsed}\n    <section class=\"{`content`}\" in:slide out:slide>\n      <slot />\n    </section>\n  {/if}\n</div>\n\n<style lang=\"sass\">\n  .header\n    display: flex\n    border: #2b2d42 1px solid\n    border-radius: 5px\n    background: #00000040\n    vertical-align: middle\n    height: 30px\n    justify-content: center\n    font-size: 22px\n\n    span\n      vertical-align: middle\n      text-align: center\n      width: 100%\n\n  .header:hover\n    background: #00000060\n\n  .content\n    display: block\n    margin: 9px 1%\n\n\n</style>\n","<svelte:options accessors=\"{true}\" />\n\n<script>\n  import { ApplicationShell } from \"@typhonjs-fvtt/runtime/svelte/component/core\";\n  import notifications from \"../utils/notifications.json\";\n  import CollapsibleSection from \"./components/CollapsibleSection.svelte\";\n  import { setSetting } from \"../utils/settings.js\";\n  import { onDestroy } from \"svelte\";\n\n  export let elementRoot = void 0;\n\n  function openLink(uri) {\n    window.open(uri, \"_blank\").focus();\n  }\n  onDestroy(() => {\n    setSetting(\"lastReadNotification\", notifications[0].id);\n  });\n</script>\n\n<ApplicationShell bind:elementRoot=\"{elementRoot}\">\n  <main>\n    {#each notifications as notification, index}\n      <CollapsibleSection\n        title=\"{notification.title}\"\n        collapsed=\"{!(index <= 0)}\"\n      >\n        <div class=\"news\">\n          {#each notification.text as block}\n            <p>{block}</p>\n          {/each}\n          <br />\n          {#each notification.link as { url, title }}\n            <button on:click=\"{() => openLink(url)}\">{title}</button>\n          {/each}\n        </div>\n      </CollapsibleSection>\n    {/each}\n  </main>\n</ApplicationShell>\n\n<style lang=\"sass\">\n  .news\n    font-size: 17px\n</style>\n","import { SvelteApplication } from \"@typhonjs-fvtt/runtime/svelte/application\";\nimport NotificationCenterUI from \"../svelte/NotificationCenterUI.svelte\";\n\nexport default class NotificationCenter extends SvelteApplication {\n  static get defaultOptions() {\n    return foundry.utils.mergeObject(super.defaultOptions, {\n      classes: [\"notification-center\"],\n      id: \"notification-application\",\n      title: \"OBS Utils Notification Center\",\n      height: 420,\n      width: 520,\n      resizable: true,\n      svelte: {\n        class: NotificationCenterUI,\n        target: document.body,\n      },\n    });\n  }\n}\n","<script>\n  import { getActorValues } from \"../../../utils/helpers\";\n\n  import Select from \"svelte-select\";\n\n  export let data = \"\";\n  let av1, av2, icon1, icon2;\n  let values = getActorValues();\n  let items = [...values];\n  let items2 = [...values];\n\n  let filterText = \"\";\n  let filterText2 = \"\";\n\n  function onChange() {\n    data = `${av1};${icon1};${av2};${icon2}`;\n  }\n\n  function handleFilter(e) {\n    if (e.detail.length === 0 && filterText.length > 0) {\n      items = [...values, filterText];\n    }\n  }\n\n  function handleFilter2(e) {\n    if (e.detail.length === 0 && filterText2.length > 0) {\n      items2 = [...values, filterText2];\n    }\n  }\n\n  function getSplit() {\n    av1 = data.split(\";\")[0];\n    icon1 = data.split(\";\")[1];\n    av2 = data.split(\";\")[2];\n    icon2 = data.split(\";\")[3];\n    return \"\";\n  }\n</script>\n\n{getSplit()}\n<div class=\"input\">\n  <Select\n    containerStyles=\"background-color: white;\"\n    --height=\"30px\"\n    bind:filterText=\"{filterText}\"\n    bind:justValue=\"{av1}\"\n    closeListOnChange=\"false\"\n    floatingConfig=\"{{\n      strategy: 'fixed',\n    }}\"\n    items=\"{items}\"\n    on:filter=\"{handleFilter}\"\n    value=\"{av1}\"\n    on:change=\"{onChange}\"\n  />\n  <input type=\"text\" on:change=\"{onChange}\" bind:value=\"{icon1}\" />\n  <Select\n    containerStyles=\"background-color: white;\"\n    --height=\"30px\"\n    bind:filterText=\"{filterText2}\"\n    bind:justValue=\"{av2}\"\n    closeListOnChange=\"false\"\n    floatingConfig=\"{{\n      strategy: 'fixed',\n    }}\"\n    items=\"{items2}\"\n    on:filter=\"{handleFilter2}\"\n    value=\"{av2}\"\n    on:change=\"{onChange}\"\n  />\n  <input type=\"text\" on:change=\"{onChange}\" bind:value=\"{icon2}\" />\n</div>\n\n<style lang=\"stylus\">\n  .input {\n    display grid;\n    grid-column-start span 2;\n    grid-template-columns 5fr 2fr;\n    grid-template-rows auto auto;\n  }\n  input {\n    padding-left: 10px;\n    height: 100%;\n    width: 100%;\n    font-size: 16px;\n    font-family: inherit;\n    border: 1px solid #d8dbdf;\n    border-radius: 6px;\n    background: white;\n  }\n</style>\n","<script>\n  import { getActorValues } from \"../../../utils/helpers\";\n\n  import Select from \"svelte-select\";\n\n  export let data = \"\";\n  let av1, av2;\n  let values = getActorValues();\n  let items = [...values];\n  let items2 = [...values];\n\n  let filterText = \"\";\n  let filterText2 = \"\";\n\n  function onChange() {\n    data = `${av1};${av2}`;\n  }\n\n  function handleFilter(e) {\n    if (e.detail.length === 0 && filterText.length > 0) {\n      items = [...values, filterText];\n    }\n  }\n\n  function handleFilter2(e) {\n    if (e.detail.length === 0 && filterText2.length > 0) {\n      items2 = [...values, filterText2];\n    }\n  }\n\n  function getSplit() {\n    av1 = data.split(\";\")[0];\n    av2 = data.split(\";\")[1];\n    return \"\";\n  }\n</script>\n\n{getSplit()}\n<div class=\"input\">\n  <Select\n    containerStyles=\"background-color: white;\"\n    --height=\"30px\"\n    bind:filterText=\"{filterText}\"\n    bind:justValue=\"{av1}\"\n    closeListOnChange=\"false\"\n    floatingConfig=\"{{\n      strategy: 'fixed',\n    }}\"\n    items=\"{items}\"\n    on:filter=\"{handleFilter}\"\n    value=\"{av1}\"\n    on:change=\"{onChange}\"\n  />\n  <Select\n    containerStyles=\"background-color: white;\"\n    --height=\"30px\"\n    bind:filterText=\"{filterText2}\"\n    bind:justValue=\"{av2}\"\n    closeListOnChange=\"false\"\n    floatingConfig=\"{{\n      strategy: 'fixed',\n    }}\"\n    items=\"{items2}\"\n    on:filter=\"{handleFilter2}\"\n    value=\"{av2}\"\n    on:change=\"{onChange}\"\n  />\n</div>\n\n<style lang=\"stylus\">\n  .input {\n    display grid;\n    grid-column-start span 2;\n    grid-template-columns auto;\n    grid-template-rows auto auto;\n  }\n</style>\n","<script>\n  import { getActorValues } from \"../../../utils/helpers\";\n\n  import Select from \"svelte-select\";\n\n  export let data = \"\";\n  let av1, icon1, icon2;\n  let values = getActorValues();\n  let items = [...values];\n\n  let filterText = \"\";\n\n  function onChange() {\n    data = `${av1};${icon1};${icon2}`;\n  }\n\n  function handleFilter(e) {\n    if (e.detail.length === 0 && filterText.length > 0) {\n      items = [...values, filterText];\n    }\n  }\n\n  function getSplit() {\n    av1 = data.split(\";\")[0];\n    icon1 = data.split(\";\")[1];\n    icon2 = data.split(\";\")[2];\n    return \"\";\n  }\n</script>\n\n{getSplit()}\n<div class=\"input\">\n  <Select\n    containerStyles=\"background-color: white;\"\n    --height=\"30px\"\n    bind:filterText=\"{filterText}\"\n    bind:justValue=\"{av1}\"\n    closeListOnChange=\"false\"\n    floatingConfig=\"{{\n      strategy: 'fixed',\n    }}\"\n    items=\"{items}\"\n    on:filter=\"{handleFilter}\"\n    value=\"{av1}\"\n    on:change=\"{onChange}\"\n  />\n  <div class=\"labeled\">\n    <label for=\"bool-icon1\">True</label>\n    <input\n      id=\"bool-icon1\"\n      type=\"text\"\n      on:change=\"{onChange}\"\n      bind:value=\"{icon1}\"\n    />\n  </div>\n  <div class=\"labeled\">\n    <label for=\"bool-icon2\">False</label>\n    <input\n      id=\"bool-icon2\"\n      type=\"text\"\n      on:change=\"{onChange}\"\n      bind:value=\"{icon2}\"\n    />\n  </div>\n</div>\n\n<style lang=\"stylus\">\n  .input {\n    display grid;\n    grid-column-start span 2;\n    grid-template-columns auto;\n    grid-template-rows auto auto;\n  }\n     \n  .labeled {\n    display grid;\n    grid-template-columns 50px auto;\n    \n    label {\n      display flex;\n      justify-content center;\n      position relative;\n      top 5px;\n    }\n  }\n</style>\n","import { ID as moduleID } from \"./const\";\nimport OBSRemoteApplication from \"../applications/obsremote.js\";\nimport OBSWebsocketApplication from \"../applications/obswebsocket.js\";\nimport OverlayActorSelect from \"../applications/overlayactorselect.js\";\nimport OverlayEditor from \"../applications/overlayeditor.js\";\nimport DirectorApplication from \"../applications/director.js\";\nimport { SettingsShell } from \"../applications/settingsShell.js\";\nimport { getApi } from \"./helpers.js\";\nimport SingleLineOverlayEditor from \"../svelte/components/editors/SingleLineOverlayEditor.svelte\";\nimport AVEditor from \"../svelte/components/editors/AVEditor.svelte\";\nimport RollOverlay from \"../applications/rolloverlay.js\";\nimport { getSetting } from \"./settings.js\";\n/**\n * @type {Array<any>}\n */\nimport notifications from \"./notifications.json\";\nimport NotificationCenter from \"../applications/notificationCenter.js\";\nimport MultiAVIconEditor from \"../svelte/components/editors/MultiAVIconEditor.svelte\";\nimport MultiAVEditor from \"../svelte/components/editors/MultiAVEditor.svelte\";\nimport BooleanEditor from \"../svelte/components/editors/BooleanEditor.svelte\";\n\nlet d;\n\nexport async function openDirector(button) {\n  if (!d) d = new DirectorApplication(button);\n  if (!d.rendered) d.render(true);\n  else d.close();\n}\n\nexport function registerUI() {\n  game.settings.registerMenu(moduleID, \"obsRemoteMenu\", {\n    name: `${moduleID}.settings.obsRemoteMenu.Name`,\n    label: `${moduleID}.settings.obsRemoteMenu.Label`,\n    hint: `${moduleID}.settings.obsRemoteMenu.Hint`,\n    type: SettingsShell(OBSRemoteApplication),\n    icon: \"fas fa-bars\",\n    restricted: true,\n  });\n  game.settings.registerMenu(moduleID, \"obsWebsocketMenu\", {\n    name: `${moduleID}.settings.obsWebsocketMenu.Name`,\n    label: `${moduleID}.settings.obsWebsocketMenu.Label`,\n    hint: `${moduleID}.settings.obsWebsocketMenu.Hint`,\n    type: SettingsShell(OBSWebsocketApplication),\n    icon: \"fas fa-bars\",\n    restricted: true,\n  });\n  game.settings.registerMenu(moduleID, \"overlayActorSelect\", {\n    name: `${moduleID}.settings.overlayActorSelect.Name`,\n    label: `${moduleID}.settings.overlayActorSelect.Label`,\n    hint: `${moduleID}.settings.overlayActorSelect.Hint`,\n    type: SettingsShell(OverlayActorSelect),\n    icon: \"fas fa-bars\",\n    restricted: true,\n  });\n  game.settings.registerMenu(moduleID, \"overlayEditor\", {\n    name: `${moduleID}.settings.overlayEditor.Name`,\n    label: `${moduleID}.settings.overlayEditor.Label`,\n    hint: `${moduleID}.settings.overlayEditor.Hint`,\n    type: SettingsShell(OverlayEditor),\n    icon: \"fas fa-bars\",\n    restricted: true,\n  });\n  game.settings.registerMenu(moduleID, \"rollOverlayEditor\", {\n    name: `${moduleID}.settings.rollOverlayEditor.Name`,\n    label: `${moduleID}.settings.rollOverlayEditor.Label`,\n    hint: `${moduleID}.settings.rollOverlayEditor.Hint`,\n    icon: \"fas fa-bars\",\n    type: SettingsShell(RollOverlay),\n    restricted: true,\n  });\n\n  getApi()\n    .overlayTypes.get(\"sl\")\n    .registerOverlayEditor(SingleLineOverlayEditor);\n  getApi().overlayTypes.get(\"sl\").registerComponentEditor(\"pt\", AVEditor);\n  getApi().overlayTypes.get(\"sl\").registerComponentEditor(\"fai\", AVEditor);\n  getApi().overlayTypes.get(\"sl\").registerComponentEditor(\"img\", AVEditor);\n  getApi()\n    .overlayTypes.get(\"sl\")\n    .registerComponentEditor(\"bav\", BooleanEditor, true);\n  getApi()\n    .overlayTypes.get(\"sl\")\n    .registerComponentEditor(\"bavimg\", BooleanEditor, true);\n  getApi()\n    .overlayTypes.get(\"sl\")\n    .registerComponentEditor(\"micoav\", MultiAVIconEditor, true);\n  getApi()\n    .overlayTypes.get(\"sl\")\n    .registerComponentEditor(\"mimgav\", MultiAVIconEditor, true);\n  getApi()\n    .overlayTypes.get(\"sl\")\n    .registerComponentEditor(\"pb\", MultiAVEditor, true);\n}\n\nexport function showNotifications() {\n  if (!game.user.isGM) return;\n  const lastRead = getSetting(\"lastReadNotification\");\n  if (lastRead < notifications[0].id) {\n    new NotificationCenter().render(true);\n  }\n}\n"],"names":["get_spread_update","levels","updates","update","to_null_out","accounted_for","i","o","n","key","get_spread_object","spread_props","ctx","insert","target","option","anchor","set_data","t","t_value","add_render_callback","select","sceneDisabled","li","append","div","select_option","input0","set_input_value","input1","button","is_function","dirty","removeFn","$$props","event","useWebSocket","idDisabled","actionTypes","OBSAction","type","changeEvent","$$invalidate","select_value","ul","eventArray","handleRemove","index","handleAdd","OBSEvent","func","s_TAG_OBJECT","deepMerge","sourceObj","cntr","_deepMerge","hasGetter","object","accessor","iDescriptor","descriptor","hasPrototype","Prototype","proto","isIterable","value","isObject","isPlainObject","prototype","safeAccess","data","defaultValue","access","safeSet","operation","createMissing","number","obj","prop","A11yHelper","options","focusOpts","debug","element","focusableElements","anchorHref","ignoreClasses","ignoreElements","selectors","selectorQuery","#getFocusableSelectors","allElements","el","hasIgnoreClass","ignoreClass","x","y","focusEl","targetEl","result","rect","contenteditableAttr","contenteditableFocusable","tabindexAttr","tabindexFocusable","isAnchor","StyleParse","#regexPixels","isPixels","TJSStyleManager","#cssRule","#docKey","#selector","#styleElement","#version","docKey","selector","document","version","existingVersion","newStyleManager","cssText","entry","values","rules","overwrite","keys","cssVariables","Hashing","#regexUuidv","str","seed","h1","h2","ch","uuid","c","isUpdatableStore","store","subscribeIgnoreFirst","firedFirst","resizeObserver","node","ResizeObserverManager","newTarget","subscribers","s_MAP","computed","borderBottom","borderLeft","borderRight","borderTop","paddingBottom","paddingLeft","paddingRight","paddingTop","additionalWidth","additionalHeight","subscriber","s_UPDATE_SUBSCRIBER","updateType","s_GET_UPDATE_TYPE","s_RESIZE_OBSERVER","s_UPDATE_TYPES","entries","contentWidth","contentHeight","targetType","stores","styles","offsetWidth","offsetHeight","applyStyles","properties","setProperties","newProperties","lerp","start","end","amount","TJSDefaultTransition","#options","#default","AppShellContextInternal","#stores","writable","isHMRProxy","comp","instanceName","prototypeName","isSvelteComponent","outroAndDestroy","instance","resolve","group_outros","transition_out","check_outros","parseTJSSvelteConfig","config","thisArg","svelteConfig","externalContext","contextFunc","s_PROCESS_PROPS","children","child","props","localize","stringId","writableDerived","origins","derive","reflect","initial","childDerivedSetter","originValues","blockNextDerive","reflectOldValues","wrappedDerive","got","set","returned","childDerived","derived","singleOrigin","doReflect","reflecting","setWith","tryingSet","fn","isUpdated","mutatedBySubscriptions","oldValue","newValue","get","unsubscribe","propertyStore","origin","propName","EPSILON","IDENTITY_4X4","Mat4","v","a","b","rad","axis","fovy","aspect","near","far","left","right","bottom","top","out","a01","a02","a03","a12","a13","a23","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","z","len","s","b12","b20","b21","b22","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","mat","m11","m12","m13","m21","m22","m23","m31","m32","m33","tmpVec3$1","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","out_r","out_t","out_s","sx","sy","sz","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","yx","zx","zy","rl","tb","nf","f","fov","upTan","downTan","leftTan","rightTan","xScale","yScale","lr","bt","eye","center","up","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","z0","z1","x0","x1","y0","y1","scale","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b13","b14","b15","Vec3","angle","sinTotal","ratioA","ratioB","d","factorTimes2","factor1","factor2","factor3","factor4","inverseFactor","inverseFactorTimesTwo","m","qx","qy","qz","w2","uvx","uvy","uvz","uuvx","uuvy","uuvz","py","pz","px","mag","cosine","nextAnimationFrame","currentTime","clamp","min","max","degToRad","deg","AnimationControl","#animationData","#finishedPromise","#willFinish","#voidControl","animationData","willFinish","AnimationManager","now","current","dataCntr","easedTime","position","results","animateKeys","transformKeys","relativeRegex","numericDefaults","setNumericDefaults","transformKeysBitwise","transformOriginDefault","transformOrigins","convertRelative","positionData","regexResults","AnimationAPI","#data","#position","#instanceCount","#cleanup","#cleanupInstance","#addAnimation","destination","duration","delay","ease","interpolate","newData","fromData","cubicOut","parent","toData","keysArray","quickToCB","args","argsLength","objData","AnimationGroupControl","#animationControls","animationControls","promises","AnimationGroupAPI","#isPosition","actualPosition","isPosition","controls","callbackOptions","hasDataCallback","hasOptionCallback","hasCallback","actualFromData","actualOptions","hasFromCallback","hasToCallback","actualToData","quickToCallbacks","dataCallback","toDataIterable","Centered","#element","#height","#lock","#width","lock","width","height","PositionChangeSet","TJSPositionData","maxHeight","maxWidth","minHeight","minWidth","rotateX","rotateY","rotateZ","translateX","translateY","translateZ","transformOrigin","zIndex","PositionStateAPI","#dataSaved","#transforms","transforms","name","keepZIndex","invokeSet","defaultData","remove","silent","async","animateTo","linear","dataSaved","property","extra","StyleCache","storeResizeObserved","willChange","TJSTransformData","#boundingRect","#corners","#mat4","#originTranslations","s_SCALE_VECTOR","s_TRANSLATE_VECTOR","s_MAT4_RESULT","s_MAT4_TEMP","s_VEC3_TEMP","TJSTransforms","#orderList","output","validationData","valWidth","valHeight","valOffsetTop","valOffsetLeft","matrix","translate","s_GET_ORIGIN_TRANSLATION","maxX","maxY","minX","minY","boundingRect","seenKeys","orderList","vector","AdapterValidators","#enabled","#validatorData","#mapUnsubscribe","enabled","validators","validator","validatorType","subscribeFn","actualValidator","callback","ids","id","BasicBounds","#constrain","constrain","valData","boundsWidth","boundsHeight","maxW","maxH","maxL","maxT","s_TRANSFORM_DATA","TransformBounds","initialX","initialY","UpdateElementData","UpdateElementManager","updateData","s_UPDATE_ELEMENT_ORTHO","s_UPDATE_ELEMENT","s_UPDATE_TRANSFORM","changeSet","subscriptions","s_VALIDATION_DATA$1","TJSPosition","#positionInitial","#positionValidators","#animate","#parent","#positionChangeSet","#styleCache","#subscriptions","#updateElementData","#updateElementPromise","#validators","#state","newPosition","resizeData","initialHelper","excludeKeys","numeric","immediateElementUpdate","styleCache","#updatePosition","handler","sub","rotation","rest","currentPosition","s_DATA_UPDATE","newWidth","newHeight","validatorData","s_VALIDATION_DATA","isMinimized","draggable","active","storeDragging","easeOptions","hasTargetClassList","ignoreTargetClassList","initialPosition","initialDragPoint","dragging","quickTo","handlers","onDragPointerDown","onDragPointerChange","onDragPointerUp","activateListeners","removeListeners","targetClass","foundTarget","newLeft","newTop","DraggableOptions","#ease","#easeOptions","newEase","#updateSubscribers","newEaseOptions","toggle_class","span","create_if_block","attr","a_class_value","s_REGEX_HTML","onClick","invoke","onContextMenu","onKeydown","keyCode","onKeyup","title","icon","label","keepMinimized","img","img_src_value","switch_instance_spread_levels","switch_value","switch_instance_props","assign","t1_value","if_block","header","h4","t1","each_blocks_1","each_blocks","draggableOptions","application","getContext","focusAuto","focusKeep","elementRoot","storeTitle","storeDraggable","storeHeaderButtons","storeHeaderIcon","storeHeaderNoTitleMinimized","storeMinimizable","storeMinimized","s_DRAG_TARGET_CLASSLIST","dragOptions","displayHeaderTitle","buttonsLeft","buttonsRight","minimizable","booleanStore","onPointerdown","rootEl","$elementRoot","$focusAuto","$focusKeep","dragDefault","$storeDraggable","$storeHeaderNoTitleMinimized","$storeMinimized","$storeHeaderButtons","TJSHeaderButton","wrapEl","onFocus","firstFocusEl","$$value","isResizable","storeElementRoot","storeResizable","storeResizing","elementResize","resizable","resizing","e","onResizePointerDown","onResizePointerMove","onResizePointerUp","$storeElementRoot","div_id_value","div_class_value","div_data_appid_value","section","elementContent","stylesApp","stylesContent","appOffsetHeight","appOffsetWidth","appResizeObserver","contentOffsetHeight","contentOffsetWidth","contentResizeObserver","internal","s_IGNORE_CLASSES","setContext","focusTrap","minimized","focusWrapEnabled","transition","inTransition","outTransition","transitionOptions","inTransitionOptions","outTransitionOptions","oldTransition","oldTransitionOptions","onMount","onClosePopup","elementRootContains","allFocusable","lastFocusEl","onPointerdownApp","onPointerdownContent","resizeObservedContent","resizeObservedApp","$focusTrap","$minimized","newTransition","newOptions","defaultCloseAnimation","DynReducerUtils","AdapterDerived","#hostData","#DerivedReducerCtor","#parentIndex","#derived","#destroyed","hostData","parentIndex","DerivedReducerCtor","ctor","derivedReducer","reducer","force","AdapterFilters","#filtersData","#indexUpdate","indexUpdate","filtersAdapter","filters","subscribeCount","filter","filterType","length","actualFilter","AdapterIndexer","hostUpdate","parentIndexer","reversed","oldIndex","oldHash","actualForce","newHash","newIndex","filtersData","sortData","derivedAdapter","AdapterSort","#sortData","#unsubscribe","oldCompareFn","compareFn","IndexerAPI","#indexData","adapterIndexer","indexData","DerivedAPI","adapterDerived","Indexer","map","include","filCntr","filLength","DynMapReducerDerived","#map","#derivedPublicAPI","#filters","#index","#indexPublicAPI","#reversed","#sort","sort","DynMapReducer","dataMap","replace","removeKeySet","EmbeddedStoreManager","#renderContextRegex","#name","#document","#collectionToDocName","#embeddedNames","FoundryDoc","docName","doc","collection","embeddedData","storeOptions","storeName","count","existingEmbeddedNames","embeddedNames","collectionName","embeddedName","renderContext","match","docOrCollectionName","TJSDocument","#embeddedStoreManager","#embeddedAPI","#uuidv4","#updateOptions","#deleted","#setDocument","actor","compendium","world","types","updateOptions","each_value_1","ensure_array_like","get_key","input","button0","button1","hr","SceneLoadEvent","handleChildAdd","handleChildRemove","aindex","dropScene","scene","err","drop_handler","click_handler","click_handler_1","round","floor","createCoords","oppositeSideMap","oppositeAlignmentMap","evaluate","param","getSide","placement","getAlignment","getOppositeAxis","getAxisLength","getSideAxis","getAlignmentAxis","getAlignmentSides","rects","rtl","alignment","alignmentAxis","mainAlignmentSide","getOppositePlacement","getExpandedPlacements","oppositePlacement","getOppositeAlignmentPlacement","getSideList","side","isStart","getOppositeAxisPlacements","flipAlignment","direction","list","expandPaddingObject","padding","getPaddingObject","rectToClientRect","computeCoordsFromPlacement","_ref","reference","floating","sideAxis","alignLength","isVertical","commonX","commonY","commonAlign","coords","computePosition","strategy","middleware","platform","validMiddleware","statefulPlacement","middlewareData","resetCount","nextX","nextY","reset","detectOverflow","state","_await$platform$isEle","elements","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","offsetParent","offsetScale","elementClientRect","flip","_middlewareData$arrow","_middlewareData$flip","initialPlacement","checkMainAxis","checkCrossAxis","specifiedFallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","detectOverflowOptions","isBasePlacement","fallbackPlacements","placements","overflow","overflows","overflowsData","sides","_middlewareData$flip2","_overflowsData$filter","nextIndex","nextPlacement","resetPlacement","_overflowsData$map$so","acc","convertValueToCoords","mainAxisMulti","crossAxisMulti","rawValue","mainAxis","crossAxis","offset","_middlewareData$offse","diffCoords","shift","limiter","mainAxisCoord","crossAxisCoord","minSide","maxSide","limitedCoords","getNodeName","isNode","getWindow","_node$ownerDocument","getDocumentElement","isElement","isHTMLElement","isShadowRoot","isOverflowElement","overflowX","overflowY","display","getComputedStyle","isTableElement","isContainingBlock","webkit","isWebKit","css","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","getNodeScroll","getNearestOverflowAncestor","parentNode","getOverflowAncestors","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","getCssDimensions","hasOffset","shouldFallback","unwrapElement","getScale","domElement","$","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","visualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","topLayerSelectors","isTopLayer","convertOffsetParentRelativeRectToViewportRelativeRect","documentElement","topLayer","scroll","offsets","isOffsetParentAnElement","offsetRect","getClientRects","getWindowScrollBarX","getDocumentRect","html","body","getViewportRect","visualViewport","visualViewportBased","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cache","cachedResult","currentContainingBlockComputedStyle","elementIsFixed","computedStyle","currentNodeIsContaining","ancestor","getClippingRect","clippingAncestors","firstClippingAncestor","clippingRect","accRect","getDimensions","getRectRelativeToOffsetParent","getTrueOffsetParent","polyfill","getOffsetParent","window","getElementRects","getOffsetParentFn","getDimensionsFn","isRTL","observeMove","onMove","io","timeoutId","root","cleanup","_io","refresh","skip","threshold","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","ratio","autoUpdate","ancestorScroll","ancestorResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","shift$1","flip$1","mergedOptions","platformWithCache","computePosition$1","createFloatingActions","initOptions","referenceElement","floatingElement","defaultOptions","getOptions","mixin","updatePosition","referenceAction","setupVirtualElementObserver","contentAction","contentOptions","autoUpdateDestroy","destroyAutoUpdate","initAutoUpdate","tick","_autoUpdate","$node","onDestroy","loadOptions","filterText","items","multiple","itemId","groupBy","filterSelectedItems","itemFilter","convertStringItemsToObjects","filterGroupedItems","filterResults","item","matchesFilter","getItems","dispatch","res","svg","path","circle","if_block0","create_if_block_13","if_block2","create_if_block_9","div0","isItemFirst","div1","span0","span1","ClearIcon","create_if_block_6","input_1","create_if_block_8","create_if_block_7","create_if_block_4","create_if_block_3","create_if_block_2","create_if_block_1","if_block6","div3","div2","input_1_readonly_value","_items","itemIndex","isItemSelectable","createEventDispatcher","justValue","_filter","_getItems","container","multiFullItemClearable","disabled","focused","placeholder","placeholderAlwaysShow","groupFilter","groups","groupHeaderSelectable","containerStyles","hasError","required","closeListOnChange","clearFilterTextOnBlur","createGroupHeaderItem","groupValue","getFilteredItems","filteredItems","searchable","inputStyles","clearable","loading","listOpen","timeout","debounce","wait","debounceWait","hideEmptyState","inputAttributes","listAutoWidth","showChevron","listOffset","hoverItemIndex","floatingConfig","containerClasses","activeValue","prev_value","prev_filterText","prev_multiple","setValue","_inputAttributes","assignInputAttributes","groupValues","sortedGroupedItems","dispatchSelectedItem","checkValueForDuplicates","setupMulti","setupSingle","setValueIndexAsHoverIndex","valueIndex","checkHoverSelectable","dispatchHover","startingIndex","ignoreGroup","setHoverIndex","setupFilterText","handleFilterEvent","beforeUpdate","computeJustValue","noDuplicates","uniqueValues","val","findItem","selection","matchTo","updateValueDisplay","handleMultiItemClear","itemToRemove","handleKeyDown","closeList","hoverItem","handleSelect","handleFocus","handleBlur","isScrolling","handleClick","handleClear","itemSelected","ariaValues","ariaListOpen","ariaFocused","handleAriaSelection","_multiple","selected","handleAriaContent","_item","isScrollingTimer","handleListScroll","handleClickOutside","handleHover","handleItemClick","increment","hover","isItemActive","activeScroll","scrollAction","hoverScroll","setListWidth","_floatingConfig","floatingRef","floatingContent","floatingUpdate","prefloat","listMounted","mouseover_handler","focus_handler","pointerup_handler_1","hasValue","hideSelectedItem","showClear","placeholderText","ariaSelection","ariaContext","listDom","scrollToHoverItem","formatKey","sceneselect_props","sceneselect_changes","obstab_props","obstab_changes","main","hr0","footer","hr1","select_changes","getSetting","obssettings","context","submit","setSetting","$$self","ApplicationState","#application","rendered","promise","cancelled","GetSvelteData","#applicationShellHolder","#svelteData","applicationShellHolder","svelteData","component","storeGenerator","storage","serialize","deserialize","isSimpleDeriver","deriver","storageReadable","storageWritable","wrap_start","ogSet","new_value","ogStore","storageValue","subscribe","run","invalidate","storageDerived","initial_value","single","stores_array","inited","pending","sync","unsubscribers","unsubscriber","sessionStores","TJSWebStorage","#storageStores","storageStores","#getDeserialize","#getSerialize","#createStore","#getStore","storeEntry","currentValue","TJSSessionStorage","SvelteReactive","#initialized","#sessionStorage","#storeAppOptions","#storeAppOptionsUpdate","#dataUIState","#storeUIState","#storeUIStateUpdate","#storeUnsubscribe","optionsSessionStorage","#storesInitialize","#storesSubscribe","#storesUnsubscribe","headerButtonNoClose","headerButtonNoLabel","headerIcon","headerNoTitleMinimized","popOut","positionable","instanceOptions","writableAppOptions","storeAppOptions","writableUIOptions","storeUIState","$options","buttons","applicationShellContract","isApplicationShell","compHasContract","protoHasContract","loadSvelteConfig","app","template","elementRootUpdate","svelteOptions","NewSvelteComponent","eventbus","targetUnused","injectHTML","TJSAppIndex","#visibleApps","SvelteApplication","#applicationState","#elementTarget","#elementContent","#initialZIndex","#onMount","#reactive","#getSvelteData","states","content","cls","svelteDestroyPromises","#updateApplicationShell","isDocumentFragment","animate","durationMS","positionBefore","constraints","beforeMinWidth","beforeMinHeight","saved","headerOffsetHeight","className","mountedAppShell","applicationShell","OBSRemoteApplication","OBSRemote","br0","br1","input2","hr2","br2","to_number","websocketSettings","onlineUsers","generateDataBlockFromSetting","currentTrackedPlayer","hook","sendOBSSetting","OBSWebsocketApplication","ObsWebsocket","get_default_slot_context","svelte_virtual_list_row","svelte_virtual_list_viewport","svelte_virtual_list_contents","itemHeight","height_map","rows","viewport","contents","viewport_height","visible","mounted","average_height","scrollTop","content_height","row","row_height","remaining","handle_scroll","old_start","expected_height","actual_height","t2_value","input_checked_value","input_id_value","input_name_value","input_value_value","img_alt_value","src_url_equal","label_for_value","t2","selectedActors","getStore","actors","searchTerm","$selectedActors","change","set_store_value","filteredActors","OverlayActorSelect","OverlayActorSelectUi","style","close","StyleEditor","StyleEditorUi","text","i0","switch_instance_changes","componentNames","getApi","openStyleEditor","styleNew","getEditor","editor","FallbackEditor","getCompactButtons","ownKeys","enumerableOnly","symbols","sym","_objectSpread2","source","_defineProperty","_typeof","_extends","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","iter","minLen","arr2","userAgent","pattern","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","on","off","matches","getParentOrHost","closest","includeCTX","R_SPACE","toggleClass","selfOnly","appliedTransforms","transform","matrixFn","find","tagName","iterator","getWindowScrollingElement","scrollingElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","elRect","containerRect","elMatrix","scaleX","scaleY","isScrolledPast","elSide","parentSide","getParentAutoScrollElement","elSideVal","parentSideVal","getChild","childNum","includeDragEl","currentChild","Sortable","lastChild","last","getRelativeScrollOffset","offsetLeft","offsetTop","winScroller","indexOfObject","includeSelf","elem","gotSelf","elemCSS","extend","dst","src","isRectEqual","rect1","rect2","_throttleTimeout","throttle","ms","_this","cancelThrottle","scrollBy","clone","Polymer","setRect","unsetRect","getChildContainingRectFromElement","ghostEl","_rect$left","_rect$top","_rect$right","_rect$bottom","childRect","expando","AnimationStateManager","animationStates","animationCallbackId","fromRect","childMatrix","animating","animationTime","time","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","calculateRealTime","currentRect","repaint","plugins","defaults","PluginManager","plugin","p","eventName","sortable","evt","eventNameGlobal","pluginName","initialized","modified","eventProperties","modifiedValue","dispatchEvent","cloneEl","toEl","fromEl","oldDraggableIndex","newDraggableIndex","originalEvent","putSortable","extraEventProperties","onName","allEventProperties","_excluded","pluginEvent","dragEl","parentEl","nextEl","lastDownEl","cloneHidden","moved","_hideGhostForTarget","_unhideGhostForTarget","_dispatchEvent","info","activeGroup","awaitingDragStarted","ignoreNextClick","sortables","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","pastFirstInvertThresh","isCircumstantialInvert","targetMoveDistance","ghostRelativeParent","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","_detectDirection","elCSS","elWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","secondChildWidth","touchingSideChild2","_dragElInRowColumn","dragRect","targetRect","vertical","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_detectNearestEmptySortable","ret","insideHorizontally","insideVertically","_prepareGroup","toFn","pull","to","from","sameGroup","otherGroup","group","originalGroup","nearestEmptyInsertDetectEvent","nearest","_checkOutsideTargetEl","dataTransfer","preventOnFilter","touch","originalTarget","_saveInputCheckedState","criteria","ownerDocument","dragStartFn","_disableDraggable","_nextTick","fallback","inserted","fallbackTolerance","fallbackOffset","ghostMatrix","relativeScrollOffset","dx","dy","cssMatrix","revert","activeSortable","isOwner","canSort","fromSortable","completedFired","dragOverEvent","completed","after","_onMove","changed","capture","insertion","elLastChild","_ghostIsLast","_ghostIsFirst","firstChild","targetBeforeFirstSwap","differentLevel","differentRowCol","side1","scrolledPastTop","scrollBefore","_getSwapDirection","sibling","dragIndex","nextSibling","moveVector","_unsilent","_cancelNextTick","_globalDragOver","order","_generateId","useAnimation","willInsertAfter","onMoveFn","retVal","firstElRect","childContainingRect","spacer","lastElRect","swapThreshold","invertedSwapThreshold","invertSwap","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","sum","inputs","idx","_len","_key","autoScrolls","scrollEl","scrollRootEl","scrolling","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","AutoScrollPlugin","AutoScroll","_ref2","clearPointerElemChangedInterval","clearAutoScrolls","autoScroll","ogElemScroller","newElem","isFallback","sens","speed","scrollThisInstance","scrollCustomFn","layersOut","currentParent","canScrollX","canScrollY","scrollWidth","scrollHeight","scrollPosX","scrollPosY","vx","vy","scrollOffsetY","scrollOffsetX","drop","dispatchSortableEvent","hideGhostForTarget","unhideGhostForTarget","toSortable","Revert","_ref3","Remove","_ref4","parentSortable","lastSwapEl","SwapPlugin","Swap","cancel","prevSwapEl","swapNodes","n1","n2","p1","p2","i1","i2","multiDragElements","multiDragClones","lastMultiDragSelect","multiDragSortable","initialFolding","folding","dragStarted","dragEl$1","clonesFromRect","clonesHidden","MultiDragPlugin","MultiDrag","multiDragElement","dragged","insertMultiDragClones","cloneNowShown","_ref5","cloneNowHidden","_ref6","_ref7","_this2","removeMultiDragElements","_ref8","_ref9","insertMultiDragElements","_ref10","dragRectAbsolute","clonesHiddenBefore","_ref11","dragMatrix","_ref12","lastIndex","currentIndex","multiDragIndex","_this3","oldIndicies","newIndicies","clonesInserted","elementsInserted","multiDragClass","swapClass","handle","removeCloneOnHide","ghostClass","chosenClass","dragClass","ignore","animation","easing","dataIdAttr","delayOnTouchOnly","forceFallback","fallbackClass","fallbackOnBody","emptyInsertThreshold","touchStartThreshold","setData","onChoose","onUnchoose","onStart","onEnd","onAdd","onUpdate","onRemove","onFilter","onSort","onClone","onChange","each_value","button2","overlay","componentindex","OverlayComponentData","rerender","handleReorder","click_handler_2","nav","overlays","actorIDs","activeIndex","$overlays","OverlayData","changeTab","tab","OverlayEditor","OverlayEditorUI","form","json","importChatCommands","exportChatCommands","filename","join","imported","hr3","hr4","ic","ooc","players","currentIC","currentOOC","clampCanvas","onChangeIC","onChangeOOC","onChangePlayer","$clampCanvas","DirectorApplication","sidebarButton","DirectorApp","SettingsShell","Application","Shell","#mceSettingsApp","getActorValues","handleFilter","section0","section11","section1","section3","section2","input3","input4","input5","section4","section7","section5","input6","section6","input7","button3","input8","input9","input10","section8","input11","span2","section10","section9","input12","button4","input13","input14","input15","preRollDelay","preRollStay","preRollFadeIn","preRollFadeOut","rollStay","rollFadeIn","rollFadeOut","postRollStay","postRollFadeIn","postRollFadeOut","preRollImage","rollBackgroundImage","rollForegroundImage","postRollImage","pre","post","rollValue","rollShow","test","filePickerAppPreRoll","openFilePickerPreRoll","$preRollImage","filePickerAppForeground","openFilePickerForeground","$rollForegroundImage","filePickerAppBackground","openFilePickerBackground","$rollBackgroundImage","filePickerAppPostRoll","openFilePickerPostRoll","$postRollImage","$pre","$preRollDelay","$preRollFadeIn","$preRollStay","$preRollFadeOut","$rollFadeIn","$rollStay","$rollFadeOut","$post","$postRollFadeIn","$postRollStay","$postRollFadeOut","RollOverlay","PlayerRollOverlayEditor","collapsed","editableTitle","click","each_value_2","br","notifications","openLink","uri","url","NotificationCenter","NotificationCenterUI","av1","av2","icon1","icon2","items2","filterText2","handleFilter2","getSplit","label0","label1","openDirector","registerUI","moduleID","SingleLineOverlayEditor","AVEditor","BooleanEditor","MultiAVIconEditor","MultiAVEditor","showNotifications"],"mappings":"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","x_google_ignoreList":[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,40,41,42,43,44,45,46,47,48,49,53,60,61]}