import{S as Ct,i as It,s as Mt,e as wt,a as k,b as W,c as v,d as yn,f as B,g as E,h as wn,j as et,l as G,k as ze,m as zr,n as X,o as Ie,r as Vt,O as qi,t as pt,p as Me,q as Pr,u as Bo,v as Dt,w as kn,x as Zn,y as kt,z as L,A as z,B as De,C as mt,D as gt,E as bt,F as jr,G as cn,H as Yi,I as Xo,J as un,K as Zi,L as Wt,M as Tt,N as Ge,P as Pe,Q as be,R as _t,T as dc,U as je,V as xt,W as se,X as qo,Y as Gn,Z as co,_ as vt,$ as fc,a0 as Yo,a1 as ue,a2 as he,a3 as de,a4 as fe,a5 as Wr,a6 as Br,a7 as pc,a8 as uo,a9 as Zo,aa as Vn,ab as Xr,ac as mc,ad as gc,ae as bc,af as Go,ag as At,ah as Ht,ai as en,aj as hn,ak as Gi,al as vc,am as Kt,an as Vi,ao as yc,ap as ae,aq as ho,ar as fo,as as We,at as wc,au as $c,av as Tc,aw as xc,ax as qr,ay as Vo,az as Ec,aA as Yr,aB as le}from"./index-B-TggPxp.js";function po(o,t){const e={},n={},i={$$scope:1};let r=o.length;for(;r--;){const s=o[r],a=t[r];if(a){for(const l in s)l in a||(n[l]=1);for(const l in a)i[l]||(e[l]=a[l],i[l]=1);o[r]=a}else for(const l in s)i[l]=1}for(const s in n)s in e||(e[s]=void 0);return e}function Uo(o){return typeof o=="object"&&o!==null?o:{}}function Zr(o,t,e){const n=o.slice();return n[9]=t[e],n}function Gr(o){let t,e=o[9]+"",n,i;return{c(){t=k("option"),n=pt(e),t.__value=i=o[9],et(t,t.__value)},m(r,s){B(r,t,s),E(t,n)},p(r,s){s&8&&e!==(e=r[9]+"")&&Me(n,e),s&8&&i!==(i=r[9])&&(t.__value=i,et(t,t.__value))},d(r){r&&X(t)}}}function Oc(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m=wt(o[3]),f=[];for(let g=0;g<m.length;g+=1)f[g]=Gr(Zr(o,m,g));return{c(){t=k("li"),e=k("div"),n=k("select");for(let g=0;g<f.length;g+=1)f[g].c();i=W(),r=k("input"),s=W(),a=k("input"),l=W(),c=k("button"),c.innerHTML='<i class="fas fa-trash"></i>',v(n,"name","types"),v(n,"class","svelte-obsu-j4t800"),o[0].targetAction===void 0&&yn(()=>o[6].call(n)),r.disabled=Sc,v(r,"name","sceneNames"),v(r,"placeholder","OBS Scene Name"),a.disabled=o[2],v(a,"name","itemIDs"),v(a,"placeholder","OBS Source Name"),v(c,"type","button"),v(c,"class","svelte-obsu-j4t800"),v(e,"class","setting svelte-obsu-j4t800"),v(t,"class","svelte-obsu-j4t800")},m(g,b){B(g,t,b),E(t,e),E(e,n);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(n,null);wn(n,o[0].targetAction,!0),E(e,i),E(e,r),et(r,o[0].sceneName),E(e,s),E(e,a),et(a,o[0].targetName),E(e,l),E(e,c),h=!0,d||(p=[G(n,"change",o[6]),G(n,"change",o[4]),G(r,"input",o[7]),G(a,"input",o[8]),G(c,"click",function(){ze(o[1])&&o[1].apply(this,arguments)})],d=!0)},p(g,[b]){if(o=g,b&8){m=wt(o[3]);let w;for(w=0;w<m.length;w+=1){const T=Zr(o,m,w);f[w]?f[w].p(T,b):(f[w]=Gr(T),f[w].c(),f[w].m(n,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=m.length}b&9&&wn(n,o[0].targetAction),b&9&&r.value!==o[0].sceneName&&et(r,o[0].sceneName),(!h||b&4)&&(a.disabled=o[2]),b&9&&a.value!==o[0].targetName&&et(a,o[0].targetName)},i(g){h||(g&&yn(()=>{h&&(u||(u=zr(t,Pr,{},!0)),u.run(1))}),h=!0)},o(g){g&&(u||(u=zr(t,Pr,{},!1)),u.run(0)),h=!1},d(g){g&&X(t),Ie(f,g),g&&u&&u.end(),d=!1,Vt(p)}}}let Sc=!1;function Mc(o,t,e){let{removeFn:n}=t,{event:i}=t,{useWebSocket:r}=t,s=!0,a=Object.values(qi);r||(a=a.filter(d=>d===qi.SwitchScene));function l(){e(2,s=i.targetAction===qi.SwitchScene)}l();function c(){i.targetAction=Bo(this),e(0,i),e(3,a)}function u(){i.sceneName=this.value,e(0,i),e(3,a)}function h(){i.targetName=this.value,e(0,i),e(3,a)}return o.$$set=d=>{"removeFn"in d&&e(1,n=d.removeFn),"event"in d&&e(0,i=d.event),"useWebSocket"in d&&e(5,r=d.useWebSocket)},[i,n,s,a,l,r,c,u,h]}class Vr extends Ct{constructor(t){super(),It(this,t,Mc,Oc,Mt,{removeFn:1,event:0,useWebSocket:5})}}function Ur(o,t,e){const n=o.slice();return n[5]=t[e],n[7]=e,n}function Jr(o,t){let e,n,i;function r(){return t[4](t[7])}return n=new Vr({props:{event:t[5],removeFn:r,useWebSocket:t[1]}}),{key:o,first:null,c(){e=De(),mt(n.$$.fragment),this.first=e},m(s,a){B(s,e,a),gt(n,s,a),i=!0},p(s,a){t=s;const l={};a&1&&(l.event=t[5]),a&1&&(l.removeFn=r),a&2&&(l.useWebSocket=t[1]),n.$set(l)},i(s){i||(L(n.$$.fragment,s),i=!0)},o(s){z(n.$$.fragment,s),i=!1},d(s){s&&X(e),bt(n,s)}}}function Dc(o){let t,e,n=[],i=new Map,r,s=wt(o[0]);const a=l=>l[0].indexOf(l[5]);for(let l=0;l<s.length;l+=1){let c=Ur(o,s,l),u=a(c);i.set(u,n[l]=Jr(u,c))}return{c(){t=k("div"),e=k("ul");for(let l=0;l<n.length;l+=1)n[l].c();v(e,"class","svelte-obsu-14wkev9"),v(t,"class","scroll svelte-obsu-14wkev9")},m(l,c){B(l,t,c),E(t,e);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(l,[c]){c&7&&(s=wt(l[0]),Dt(),n=kn(n,c,a,1,l,s,i,e,Zn,Jr,null,Ur),kt())},i(l){if(!r){for(let c=0;c<s.length;c+=1)L(n[c]);r=!0}},o(l){for(let c=0;c<n.length;c+=1)z(n[c]);r=!1},d(l){l&&X(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function kc(o,t,e){let{eventArray:n}=t,{useWebSocket:i}=t;function r(l){e(0,n=[...n.slice(0,l),...n.slice(l+1,n.length)])}const s=()=>{e(0,n=n.concat(new jr))},a=l=>r(l);return o.$$set=l=>{"eventArray"in l&&e(0,n=l.eventArray),"useWebSocket"in l&&e(1,i=l.useWebSocket)},[n,i,r,s,a]}class Cc extends Ct{constructor(t){super(),It(this,t,kc,Dc,Mt,{eventArray:0,useWebSocket:1,handleAdd:3})}get handleAdd(){return this.$$.ctx[3]}}const Ui="[object Object]";function mo(o={},...t){if(Object.prototype.toString.call(o)!==Ui)throw new TypeError("deepMerge error: 'target' is not an 'object'.");for(let e=0;e<t.length;e++)if(Object.prototype.toString.call(t[e])!==Ui)throw new TypeError(`deepMerge error: 'sourceObj[${e}]' is not an 'object'.`);return ts(o,...t)}function Jo(o,t){if(typeof o!="object"||o===null||o===void 0)return!1;const e=Object.getOwnPropertyDescriptor(o,t);if(e!==void 0&&e.get!==void 0)return!0;for(let n=Object.getPrototypeOf(o);n;n=Object.getPrototypeOf(n)){const i=Object.getOwnPropertyDescriptor(n,t);if(i!==void 0&&i.get!==void 0)return!0}return!1}function Qr(o,t){if(typeof o!="function")return!1;if(o===t)return!0;for(let e=Object.getPrototypeOf(o);e;e=Object.getPrototypeOf(e))if(e===t)return!0;return!1}function zt(o){return o==null||typeof o!="object"?!1:Symbol.iterator in o}function V(o){return o!==null&&typeof o=="object"&&!Array.isArray(o)}function Kr(o){if(Object.prototype.toString.call(o)!==Ui)return!1;const t=Object.getPrototypeOf(o);return t===null||t===Object.prototype}function Ic(o,t,e){if(typeof o!="object"||typeof t!="string")return e;const n=t.split(".");for(let i=0;i<n.length;i++){if(typeof o[n[i]]>"u"||o[n[i]]===null)return e;o=o[n[i]]}return o}function Ac(o,t,e,n="set",i=!0){if(typeof o!="object")throw new TypeError("safeSet Error: 'data' is not an 'object'.");if(typeof t!="string")throw new TypeError("safeSet Error: 'accessor' is not a 'string'.");const r=t.split(".");for(let s=0;s<r.length;s++){if(Array.isArray(o)){const a=+r[s];if(!Number.isInteger(a)||a<0)return!1}if(s===r.length-1)switch(n){case"add":o[r[s]]+=e;break;case"div":o[r[s]]/=e;break;case"mult":o[r[s]]*=e;break;case"set":o[r[s]]=e;break;case"set-undefined":typeof o[r[s]]>"u"&&(o[r[s]]=e);break;case"sub":o[r[s]]-=e;break}else{if(i&&typeof o[r[s]]>"u"&&(o[r[s]]={}),o[r[s]]===null||typeof o[r[s]]!="object")return!1;o=o[r[s]]}}return!0}function ts(o={},...t){for(let e=0;e<t.length;e++){const n=t[e];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(i.startsWith("-=")){delete o[i.slice(2)];continue}o[i]=Object.prototype.hasOwnProperty.call(o,i)&&o[i]?.constructor===Object&&n[i]?.constructor===Object?ts({},o[i],n[i]):n[i]}}return o}class go{static applyFocusSource(t){if(!V(t))return;const e=V(t?.focusSource)?t.focusSource:t;setTimeout(()=>{const n=typeof e.debug=="boolean"?e.debug:!1;if(zt(e.focusEl)){n&&console.debug("A11yHelper.applyFocusSource debug - Attempting to apply focus target: ",e.focusEl);for(const i of e.focusEl)if(i instanceof HTMLElement&&i.isConnected){i.focus(),n&&console.debug("A11yHelper.applyFocusSource debug - Applied focus to target: ",i);break}else if(typeof i=="string"){const r=document.querySelector(i);if(r instanceof HTMLElement&&r.isConnected){r.focus(),n&&console.debug("A11yHelper.applyFocusSource debug - Applied focus to target: ",r);break}else n&&console.debug("A11yHelper.applyFocusSource debug - Could not query selector: ",i)}}else n&&console.debug("A11yHelper.applyFocusSource debug - No focus targets defined.")},0)}static getFirstFocusableElement(t=document,e){const n=this.getFocusableElements(t,e);return n.length>0?n[0]:void 0}static getFocusableElements(t=document,{anchorHref:e=!0,ignoreClasses:n,ignoreElements:i,selectors:r}={}){if(!(t instanceof HTMLElement)&&!(t instanceof Document))throw new TypeError("'element' is not a HTMLElement or Document instance.");if(typeof e!="boolean")throw new TypeError("'anchorHref' is not a boolean.");if(n!==void 0&&!zt(n))throw new TypeError("'ignoreClasses' is not an iterable list.");if(i!==void 0&&!(i instanceof Set))throw new TypeError("'ignoreElements' is not a Set.");if(r!==void 0&&typeof r!="string")throw new TypeError("'selectors' is not a string.");const s=r??this.#t(e),a=[...t.querySelectorAll(s)];return i&&n?a.filter(l=>{let c=!1;for(const u of n)if(l.classList.contains(u)){c=!0;break}return!c&&!i.has(l)&&l.style.display!=="none"&&l.style.visibility!=="hidden"&&!l.hasAttribute("disabled")&&!l.hasAttribute("inert")&&l.getAttribute("aria-hidden")!=="true"}):n?a.filter(l=>{let c=!1;for(const u of n)if(l.classList.contains(u)){c=!0;break}return!c&&l.style.display!=="none"&&l.style.visibility!=="hidden"&&!l.hasAttribute("disabled")&&!l.hasAttribute("inert")&&l.getAttribute("aria-hidden")!=="true"}):i?a.filter(l=>!i.has(l)&&l.style.display!=="none"&&l.style.visibility!=="hidden"&&!l.hasAttribute("disabled")&&!l.hasAttribute("inert")&&l.getAttribute("aria-hidden")!=="true"):a.filter(l=>l.style.display!=="none"&&l.style.visibility!=="hidden"&&!l.hasAttribute("disabled")&&!l.hasAttribute("inert")&&l.getAttribute("aria-hidden")!=="true")}static#t(t=!0){return`button, [contenteditable=""], [contenteditable="true"], details summary:not([tabindex="-1"]), embed, a${t?"[href]":""}, iframe, object, input:not([type=hidden]), select, textarea, [tabindex]:not([tabindex="-1"])`}static getFocusSource({event:t,x:e,y:n,focusEl:i,debug:r=!1}){if(i!==void 0&&!(i instanceof HTMLElement)&&typeof i!="string")throw new TypeError("A11yHelper.getFocusSource error: 'focusEl' is not a HTMLElement or string.");if(r!==void 0&&typeof r!="boolean")throw new TypeError("A11yHelper.getFocusSource error: 'debug' is not a boolean.");if(t===void 0){if(typeof e!="number")throw new TypeError("A11yHelper.getFocusSource error: 'event' not defined and 'x' is not a number.");if(typeof n!="number")throw new TypeError("A11yHelper.getFocusSource error: 'event' not defined and 'y' is not a number.");return{debug:r,focusEl:i!==void 0?[i]:void 0,x:e,y:n}}if(!(t instanceof KeyboardEvent)&&!(t instanceof MouseEvent))throw new TypeError("A11yHelper.getFocusSource error: 'event' is not a KeyboardEvent or MouseEvent.");if(e!==void 0&&!Number.isInteger(e))throw new TypeError("A11yHelper.getFocusSource error: 'x' is not a number.");if(n!==void 0&&!Number.isInteger(n))throw new TypeError("A11yHelper.getFocusSource error: 'y' is not a number.");const s=t.target;if(!(s instanceof HTMLElement))throw new TypeError("A11yHelper.getFocusSource error: 'event.target' is not an HTMLElement.");const a={debug:r};if(t instanceof MouseEvent)if(t?.button!==2&&t.type==="contextmenu"){const l=s.getBoundingClientRect();a.x=e??l.left+l.width/2,a.y=n??l.top+l.height/2,a.focusEl=i!==void 0?[s,i]:[s],a.source="keyboard"}else a.x=e??t.pageX,a.y=n??t.pageY,a.focusEl=i!==void 0?[i]:void 0;else{const l=s.getBoundingClientRect();a.x=e??l.left+l.width/2,a.y=n??l.top+l.height/2,a.focusEl=i!==void 0?[s,i]:[s],a.source="keyboard"}return a}static getLastFocusableElement(t=document,e){const n=this.getFocusableElements(t,e);return n.length>0?n[n.length-1]:void 0}static isFocusable(t,{anchorHref:e=!0,ignoreClasses:n}={}){if(t==null||!(t instanceof HTMLElement)||t?.hidden||!t?.isConnected)return!1;if(typeof e!="boolean")throw new TypeError("'anchorHref' is not a boolean.");if(n!==void 0&&!zt(n))throw new TypeError("'ignoreClasses' is not an iterable list.");const i=t.getAttribute("contenteditable"),r=typeof i=="string"&&(i===""||i==="true"),s=t.getAttribute("tabindex"),a=typeof s=="string"&&s!=="-1",l=t instanceof HTMLAnchorElement;return r||a||l||t instanceof HTMLButtonElement||t instanceof HTMLDetailsElement||t instanceof HTMLEmbedElement||t instanceof HTMLIFrameElement||t instanceof HTMLInputElement||t instanceof HTMLObjectElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?l&&e&&typeof t.getAttribute("href")!="string"?!1:t.style.display!=="none"&&t.style.visibility!=="hidden"&&!t.hasAttribute("disabled")&&!t.hasAttribute("inert")&&t.getAttribute("aria-hidden")!=="true":!1}static isFocusSource(t){return t instanceof HTMLElement||typeof t=="string"}}class ht{static#t=/(\d+)\s*px/;static pixels(t){if(typeof t!="string")return;const e=this.#t.test(t),n=parseInt(t);return e&&Number.isFinite(n)?n:void 0}}class Dr{#t;#e;#n;#o;#i;constructor({docKey:t,selector:e=":root",document:n=globalThis.document,version:i}={}){if(typeof t!="string")throw new TypeError("StyleManager error: 'docKey' is not a string.");if(typeof e!="string")throw new TypeError("StyleManager error: 'selector' is not a string.");if(i!==void 0&&!Number.isSafeInteger(i)&&i<1)throw new TypeError("StyleManager error: 'version' is defined and is not a positive integer >= 1.");if(this.#n=e,this.#e=t,this.#i=i,n[this.#e]===void 0)this.#o=n.createElement("style"),n.head.append(this.#o),this.#o._STYLE_MANAGER_VERSION=i,this.#o.sheet.insertRule(`${e} {}`,0),this.#t=this.#o.sheet.cssRules[0],n[t]=this.#o;else if(this.#o=n[t],this.#t=this.#o.sheet.cssRules[0],i){const r=this.#o._STYLE_MANAGER_VERSION??0;i>r&&(this.#t.style.cssText="")}}get cssText(){return this.#t.style.cssText}get version(){return this.#i}clone(t=globalThis.document){const e=new Dr({selector:this.#n,docKey:this.#e,document:t,version:this.#i});return e.#t.style.cssText=this.#t.style.cssText,e}get(){const t=this.#t.style.cssText,e={};if(t!==""){for(const n of t.split(";"))if(n!==""){const i=n.split(":");e[i[0].trim()]=i[1]}}return e}getProperty(t){if(typeof t!="string")throw new TypeError("StyleManager error: 'key' is not a string.");return this.#t.style.getPropertyValue(t)}setProperties(t,e=!0){if(!V(t))throw new TypeError("StyleManager error: 'rules' is not an object.");if(typeof e!="boolean")throw new TypeError("StyleManager error: 'overwrite' is not a boolean.");if(e)for(const[n,i]of Object.entries(t))this.#t.style.setProperty(n,i);else for(const[n,i]of Object.entries(t))this.#t.style.getPropertyValue(n)===""&&this.#t.style.setProperty(n,i)}setProperty(t,e,n=!0){if(typeof t!="string")throw new TypeError("StyleManager error: 'key' is not a string.");if(typeof e!="string")throw new TypeError("StyleManager error: 'value' is not a string.");if(typeof n!="boolean")throw new TypeError("StyleManager error: 'overwrite' is not a boolean.");n?this.#t.style.setProperty(t,e):this.#t.style.getPropertyValue(t)===""&&this.#t.style.setProperty(t,e)}removeProperties(t){if(!zt(t))throw new TypeError("StyleManager error: 'keys' is not an iterable list.");for(const e of t)typeof e=="string"&&this.#t.style.removeProperty(e)}removeProperty(t){if(typeof t!="string")throw new TypeError("StyleManager error: 'key' is not a string.");return this.#t.style.removeProperty(t)}}const Nc=new Dr({docKey:"#__trl-root-styles",version:1});class Hc{static#t=/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i;static hashCode(t,e=0){if(typeof t!="string")return 0;let n=3735928559^e,i=1103547991^e;for(let r,s=0;s<t.length;s++)r=t.charCodeAt(s),n=Math.imul(n^r,2654435761),i=Math.imul(i^r,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&i)+(n>>>0)}static isUuidv4(t){return this.#t.test(t)}static uuidv4(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^(globalThis.crypto??globalThis.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}}function es(o){if(o==null)return!1;switch(typeof o){case"function":case"object":return typeof o.subscribe=="function"&&typeof o.update=="function"}return!1}function Qo(o,t){let e=!1;return o.subscribe(n=>{e?t(n):e=!0})}function Ji(o,t){return Ko.add(o,t),{update:e=>{Ko.remove(o,t),t=e,Ko.add(o,t)},destroy:()=>{Ko.remove(o,t)}}}Ji.updateCache=function(o){if(!(o instanceof HTMLElement))throw new TypeError("resizeObserverUpdate error: 'el' is not an HTMLElement.");const t=Cn.get(o);if(Array.isArray(t)){const e=globalThis.getComputedStyle(o),n=ht.pixels(o.style.borderBottom)??ht.pixels(e.borderBottom)??0,i=ht.pixels(o.style.borderLeft)??ht.pixels(e.borderLeft)??0,r=ht.pixels(o.style.borderRight)??ht.pixels(e.borderRight)??0,s=ht.pixels(o.style.borderTop)??ht.pixels(e.borderTop)??0,a=ht.pixels(o.style.paddingBottom)??ht.pixels(e.paddingBottom)??0,l=ht.pixels(o.style.paddingLeft)??ht.pixels(e.paddingLeft)??0,c=ht.pixels(o.style.paddingRight)??ht.pixels(e.paddingRight)??0,u=ht.pixels(o.style.paddingTop)??ht.pixels(e.paddingTop)??0,h=i+r+l+c,d=s+n+u+a;for(const p of t)p.styles.additionalWidth=h,p.styles.additionalHeight=d,Qi(p,p.contentWidth,p.contentHeight)}};const Cn=new Map;class Ko{static add(t,e){const n=Rc(e);if(n===0)throw new Error("'target' does not match supported ResizeObserverManager update mechanisms.");const i=globalThis.getComputedStyle(t),r=ht.pixels(t.style.borderBottom)??ht.pixels(i.borderBottom)??0,s=ht.pixels(t.style.borderLeft)??ht.pixels(i.borderLeft)??0,a=ht.pixels(t.style.borderRight)??ht.pixels(i.borderRight)??0,l=ht.pixels(t.style.borderTop)??ht.pixels(i.borderTop)??0,c=ht.pixels(t.style.paddingBottom)??ht.pixels(i.paddingBottom)??0,u=ht.pixels(t.style.paddingLeft)??ht.pixels(i.paddingLeft)??0,h=ht.pixels(t.style.paddingRight)??ht.pixels(i.paddingRight)??0,d=ht.pixels(t.style.paddingTop)??ht.pixels(i.paddingTop)??0,p={updateType:n,target:e,contentWidth:0,contentHeight:0,styles:{additionalWidth:s+a+u+h,additionalHeight:l+r+d+c}};Cn.has(t)?Cn.get(t).push(p):Cn.set(t,[p]),ns.observe(t)}static remove(t,e=void 0){const n=Cn.get(t);if(Array.isArray(n)){const i=n.findIndex(r=>r.target===e);i>=0&&(Qi(n[i],void 0,void 0),n.splice(i,1)),n.length===0&&(Cn.delete(t),ns.unobserve(t))}}}const xe={none:0,attribute:1,function:2,resizeObserved:3,setContentBounds:4,setDimension:5,storeObject:6,storesObject:7},ns=new ResizeObserver(o=>{for(const t of o){const e=Cn.get(t?.target);if(Array.isArray(e)){const n=t.contentRect.width,i=t.contentRect.height;for(const r of e)Qi(r,n,i)}}});function Rc(o){if(o?.resizeObserved instanceof Function)return xe.resizeObserved;if(o?.setDimension instanceof Function)return xe.setDimension;if(o?.setContentBounds instanceof Function)return xe.setContentBounds;const t=typeof o;if(t!==null&&(t==="object"||t==="function")){if(es(o.resizeObserved))return xe.storeObject;const e=o?.stores;if((V(e)||typeof e=="function")&&es(e.resizeObserved))return xe.storesObject}return t!==null&&t==="object"?xe.attribute:t==="function"?xe.function:xe.none}function Qi(o,t,e){const n=o.styles;o.contentWidth=t,o.contentHeight=e;const i=Number.isFinite(t)?t+n.additionalWidth:void 0,r=Number.isFinite(e)?e+n.additionalHeight:void 0,s=o.target;switch(o.updateType){case xe.attribute:s.contentWidth=t,s.contentHeight=e,s.offsetWidth=i,s.offsetHeight=r;break;case xe.function:s?.(i,r,t,e);break;case xe.resizeObserved:s.resizeObserved?.(i,r,t,e);break;case xe.setContentBounds:s.setContentBounds?.(t,e);break;case xe.setDimension:s.setDimension?.(i,r);break;case xe.storeObject:s.resizeObserved.update(a=>(a.contentHeight=e,a.contentWidth=t,a.offsetHeight=r,a.offsetWidth=i,a));break;case xe.storesObject:s.stores.resizeObserved.update(a=>(a.contentHeight=e,a.contentWidth=t,a.offsetHeight=r,a.offsetWidth=i,a));break}}function bo(o,t){function e(){if(V(t))for(const n of Object.keys(t))o.style.setProperty(`${n}`,t[n])}return e(),{update:n=>{t=n,e()}}}function In(o,t,e){return(1-e)*o+e*t}class ve{static#t={};static#e=()=>{};static get default(){return this.#e}static get options(){return this.#t}}class Fc{#t;constructor(){this.#t={elementContent:cn(void 0),elementRoot:cn(void 0)},Object.freeze(this.#t),Object.seal(this)}get stores(){return this.#t}}function os(o){const t=o?.constructor?.name;if(typeof t=="string"&&(t.startsWith("Proxy<")||t==="ProxyComponent"))return!0;const e=o?.prototype?.constructor?.name;return typeof e=="string"&&(e.startsWith("Proxy<")||e==="ProxyComponent")}function ti(o){if(o==null||typeof o!="function")return!1;const t=o?.prototype?.constructor?.name;return typeof t=="string"&&(t.startsWith("Proxy<")||t==="ProxyComponent")?!0:typeof window<"u"?typeof o.prototype.$destroy=="function"&&typeof o.prototype.$on=="function":typeof o.render=="function"}async function Lc(o){return new Promise(t=>{o.$$.fragment&&o.$$.fragment.o?(Dt(),z(o.$$.fragment,0,0,()=>{o.$destroy(),t()}),kt()):(o.$destroy(),t())})}function _c(o,t=void 0){if(!V(o))throw new TypeError(`parseSvelteConfig - 'config' is not an object:
${JSON.stringify(o)}.`);if(!ti(o.class))throw new TypeError(`parseSvelteConfig - 'class' is not a Svelte component constructor for config:
${JSON.stringify(o)}.`);if(o.hydrate!==void 0&&typeof o.hydrate!="boolean")throw new TypeError(`parseSvelteConfig - 'hydrate' is not a boolean for config:
${JSON.stringify(o)}.`);if(o.intro!==void 0&&typeof o.intro!="boolean")throw new TypeError(`parseSvelteConfig - 'intro' is not a boolean for config:
${JSON.stringify(o)}.`);if(o.target!==void 0&&typeof o.target!="string"&&!(o.target instanceof HTMLElement)&&!(o.target instanceof ShadowRoot)&&!(o.target instanceof DocumentFragment))throw new TypeError(`parseSvelteConfig - 'target' is not a string, HTMLElement, ShadowRoot, or DocumentFragment for config:
${JSON.stringify(o)}.`);if(o.anchor!==void 0&&typeof o.anchor!="string"&&!(o.anchor instanceof HTMLElement)&&!(o.anchor instanceof ShadowRoot)&&!(o.anchor instanceof DocumentFragment))throw new TypeError(`parseSvelteConfig - 'anchor' is not a string, HTMLElement, ShadowRoot, or DocumentFragment for config:
${JSON.stringify(o)}.`);if(o.context!==void 0&&typeof o.context!="function"&&!(o.context instanceof Map)&&!V(o.context))throw new TypeError(`parseSvelteConfig - 'context' is not a Map, function or object for config:
${JSON.stringify(o)}.`);if(o.selectorTarget!==void 0&&typeof o.selectorTarget!="string")throw new TypeError(`parseSvelteConfig - 'selectorTarget' is not a string for config:
${JSON.stringify(o)}.`);if(o.options!==void 0&&!V(o.options))throw new TypeError(`parseSvelteConfig - 'options' is not an object for config:
${JSON.stringify(o)}.`);if(o.options!==void 0){if(o.options.injectApp!==void 0&&typeof o.options.injectApp!="boolean")throw new TypeError(`parseSvelteConfig - 'options.injectApp' is not a boolean for config:
${JSON.stringify(o)}.`);if(o.options.injectEventbus!==void 0&&typeof o.options.injectEventbus!="boolean")throw new TypeError(`parseSvelteConfig - 'options.injectEventbus' is not a boolean for config:
${JSON.stringify(o)}.`);if(o.options.selectorElement!==void 0&&typeof o.options.selectorElement!="string")throw new TypeError(`parseSvelteConfig - 'selectorElement' is not a string for config:
${JSON.stringify(o)}.`)}const e={...o};delete e.options;let n={};if(typeof e.context=="function"){const i=e.context;delete e.context;const r=i.call(t);if(V(r))n={...r};else throw new Error(`parseSvelteConfig - 'context' is a function that did not return an object for config:
${JSON.stringify(o)}`)}else e.context instanceof Map?(n=Object.fromEntries(e.context),delete e.context):V(e.context)&&(n=e.context,delete e.context);if(e.props=Ki(e.props,t,o),Array.isArray(e.children)){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r];if(!ti(s.class))throw new Error(`parseSvelteConfig - 'class' is not a Svelte component for child[${r}] for config:
${JSON.stringify(o)}`);s.props=Ki(s.props,t,o),i.push(s)}i.length>0&&(n.children=i),delete e.children}else if(V(e.children)){if(!ti(e.children.class))throw new Error(`parseSvelteConfig - 'class' is not a Svelte component for children object for config:
${JSON.stringify(o)}`);e.children.props=Ki(e.children.props,t,o),n.children=[e.children],delete e.children}return e.context instanceof Map||(e.context=new Map),e.context.set("#external",n),e}function Ki(o,t,e){if(typeof o=="function"){const n=o.call(t);if(V(n))return n;throw new Error(`parseSvelteConfig - 'props' is a function that did not return an object for config:
${JSON.stringify(e)}`)}else{if(V(o))return o;if(o!==void 0)throw new Error(`parseSvelteConfig - 'props' is not a function or an object for config:
${JSON.stringify(e)}`)}return{}}function ei(o,t){const e=V(t)?globalThis.game.i18n.format(o,t):globalThis.game.i18n.localize(o);return e!==void 0?e:""}function is(o,t,e,n){var i,r,s=!1,a=e.length>=2,l=(m,f,g)=>{if(i=f,a&&(r=m),!s){let b=t(m,f,g);if(t.length<2)f(b);else return b}s=!1},c=Yi(o,l,n),u=!Array.isArray(o);function h(m){var f=e(m,r);u?(s=!0,o.set(f)):f.forEach((g,b)=>{s=!0,o[b].set(g)}),s=!1}var d=!1;function p(m){var f,g,b,w;if(d){w=m(Xo(c)),i(w);return}var T=c.subscribe(S=>{d?f?g=!0:f=!0:b=S});w=m(b),d=!0,i(w),T(),d=!1,g&&(w=Xo(c)),f&&h(w)}return{subscribe:c.subscribe,set(m){p(()=>m)},update:p}}function Et(o,t){if(Array.isArray(t)){let e=t.concat();return is(o,n=>{for(let i=0;i<e.length;++i)n=n[e[i]];return n},(n,i)=>{let r=i;for(let s=0;s<e.length-1;++s)r=r[e[s]];return r[e[e.length-1]]=n,i})}else return is(o,e=>e[t],(e,n)=>(n[t]=e,n))}const qt=1e-6,rs=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class q extends Float32Array{static BYTE_LENGTH=16*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 16:super(t);break;case 2:super(t[0],t[1],16);break;case 1:const e=t[0];typeof e=="number"?super([e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]):super(e,0,16);break;default:super(rs);break}}get str(){return q.str(this)}copy(t){return this.set(t),this}identity(){return this.set(rs),this}multiply(t){return q.multiply(this,this,t)}mul(t){return this}transpose(){return q.transpose(this,this)}invert(){return q.invert(this,this)}translate(t){return q.translate(this,this,t)}rotate(t,e){return q.rotate(this,this,t,e)}scale(t){return q.scale(this,this,t)}rotateX(t){return q.rotateX(this,this,t)}rotateY(t){return q.rotateY(this,this,t)}rotateZ(t){return q.rotateZ(this,this,t)}perspectiveNO(t,e,n,i){return q.perspectiveNO(this,t,e,n,i)}perspectiveZO(t,e,n,i){return q.perspectiveZO(this,t,e,n,i)}orthoNO(t,e,n,i,r,s){return q.orthoNO(this,t,e,n,i,r,s)}orthoZO(t,e,n,i,r,s){return q.orthoZO(this,t,e,n,i,r,s)}static create(){return new q}static clone(t){return new q(t)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}static fromValues(...t){return new q(...t)}static set(t,...e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}static identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static transpose(t,e){if(t===e){const n=e[1],i=e[2],r=e[3],s=e[6],a=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=a,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}static invert(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],f=e[12],g=e[13],b=e[14],w=e[15],T=n*l-i*a,S=n*c-r*a,O=n*u-s*a,M=i*c-r*l,y=i*u-s*l,N=r*u-s*c,C=h*g-d*f,R=h*b-p*f,x=h*w-m*f,A=d*b-p*g,F=d*w-m*g,I=p*w-m*b;let H=T*I-S*F+O*A+M*x-y*R+N*C;return H?(H=1/H,t[0]=(l*I-c*F+u*A)*H,t[1]=(r*F-i*I-s*A)*H,t[2]=(g*N-b*y+w*M)*H,t[3]=(p*y-d*N-m*M)*H,t[4]=(c*x-a*I-u*R)*H,t[5]=(n*I-r*x+s*R)*H,t[6]=(b*O-f*N-w*S)*H,t[7]=(h*N-p*O+m*S)*H,t[8]=(a*F-l*x+u*C)*H,t[9]=(i*x-n*F-s*C)*H,t[10]=(f*y-g*O+w*T)*H,t[11]=(d*O-h*y-m*T)*H,t[12]=(l*R-a*A-c*C)*H,t[13]=(n*A-i*R+r*C)*H,t[14]=(g*S-f*M-b*T)*H,t[15]=(h*M-d*S+p*T)*H,t):null}static adjoint(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],f=e[12],g=e[13],b=e[14],w=e[15],T=n*l-i*a,S=n*c-r*a,O=n*u-s*a,M=i*c-r*l,y=i*u-s*l,N=r*u-s*c,C=h*g-d*f,R=h*b-p*f,x=h*w-m*f,A=d*b-p*g,F=d*w-m*g,I=p*w-m*b;return t[0]=l*I-c*F+u*A,t[1]=r*F-i*I-s*A,t[2]=g*N-b*y+w*M,t[3]=p*y-d*N-m*M,t[4]=c*x-a*I-u*R,t[5]=n*I-r*x+s*R,t[6]=b*O-f*N-w*S,t[7]=h*N-p*O+m*S,t[8]=a*F-l*x+u*C,t[9]=i*x-n*F-s*C,t[10]=f*y-g*O+w*T,t[11]=d*O-h*y-m*T,t[12]=l*R-a*A-c*C,t[13]=n*A-i*R+r*C,t[14]=g*S-f*M-b*T,t[15]=h*M-d*S+p*T,t}static determinant(t){const e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],m=t[12],f=t[13],g=t[14],b=t[15],w=e*a-n*s,T=e*l-i*s,S=n*l-i*a,O=u*f-h*m,M=u*g-d*m,y=h*g-d*f,N=e*y-n*M+i*O,C=s*y-a*M+l*O,R=u*S-h*T+d*w,x=m*S-f*T+g*w;return c*N-r*C+b*R-p*x}static multiply(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7],d=e[8],p=e[9],m=e[10],f=e[11],g=e[12],b=e[13],w=e[14],T=e[15];let S=n[0],O=n[1],M=n[2],y=n[3];return t[0]=S*i+O*l+M*d+y*g,t[1]=S*r+O*c+M*p+y*b,t[2]=S*s+O*u+M*m+y*w,t[3]=S*a+O*h+M*f+y*T,S=n[4],O=n[5],M=n[6],y=n[7],t[4]=S*i+O*l+M*d+y*g,t[5]=S*r+O*c+M*p+y*b,t[6]=S*s+O*u+M*m+y*w,t[7]=S*a+O*h+M*f+y*T,S=n[8],O=n[9],M=n[10],y=n[11],t[8]=S*i+O*l+M*d+y*g,t[9]=S*r+O*c+M*p+y*b,t[10]=S*s+O*u+M*m+y*w,t[11]=S*a+O*h+M*f+y*T,S=n[12],O=n[13],M=n[14],y=n[15],t[12]=S*i+O*l+M*d+y*g,t[13]=S*r+O*c+M*p+y*b,t[14]=S*s+O*u+M*m+y*w,t[15]=S*a+O*h+M*f+y*T,t}static mul(t,e,n){return t}static translate(t,e,n){const i=n[0],r=n[1],s=n[2];if(e===t)t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15];else{const a=e[0],l=e[1],c=e[2],u=e[3],h=e[4],d=e[5],p=e[6],m=e[7],f=e[8],g=e[9],b=e[10],w=e[11];t[0]=a,t[1]=l,t[2]=c,t[3]=u,t[4]=h,t[5]=d,t[6]=p,t[7]=m,t[8]=f,t[9]=g,t[10]=b,t[11]=w,t[12]=a*i+h*r+f*s+e[12],t[13]=l*i+d*r+g*s+e[13],t[14]=c*i+p*r+b*s+e[14],t[15]=u*i+m*r+w*s+e[15]}return t}static scale(t,e,n){const i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}static rotate(t,e,n,i){let r=i[0],s=i[1],a=i[2],l=Math.sqrt(r*r+s*s+a*a);if(l<qt)return null;l=1/l,r*=l,s*=l,a*=l;const c=Math.sin(n),u=Math.cos(n),h=1-u,d=e[0],p=e[1],m=e[2],f=e[3],g=e[4],b=e[5],w=e[6],T=e[7],S=e[8],O=e[9],M=e[10],y=e[11],N=r*r*h+u,C=s*r*h+a*c,R=a*r*h-s*c,x=r*s*h-a*c,A=s*s*h+u,F=a*s*h+r*c,I=r*a*h+s*c,H=s*a*h-r*c,P=a*a*h+u;return t[0]=d*N+g*C+S*R,t[1]=p*N+b*C+O*R,t[2]=m*N+w*C+M*R,t[3]=f*N+T*C+y*R,t[4]=d*x+g*A+S*F,t[5]=p*x+b*A+O*F,t[6]=m*x+w*A+M*F,t[7]=f*x+T*A+y*F,t[8]=d*I+g*H+S*P,t[9]=p*I+b*H+O*P,t[10]=m*I+w*H+M*P,t[11]=f*I+T*H+y*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}static rotateX(t,e,n){let i=Math.sin(n),r=Math.cos(n),s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+u*i,t[5]=a*r+h*i,t[6]=l*r+d*i,t[7]=c*r+p*i,t[8]=u*r-s*i,t[9]=h*r-a*i,t[10]=d*r-l*i,t[11]=p*r-c*i,t}static rotateY(t,e,n){let i=Math.sin(n),r=Math.cos(n),s=e[0],a=e[1],l=e[2],c=e[3],u=e[8],h=e[9],d=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-u*i,t[1]=a*r-h*i,t[2]=l*r-d*i,t[3]=c*r-p*i,t[8]=s*i+u*r,t[9]=a*i+h*r,t[10]=l*i+d*r,t[11]=c*i+p*r,t}static rotateZ(t,e,n){let i=Math.sin(n),r=Math.cos(n),s=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],d=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+u*i,t[1]=a*r+h*i,t[2]=l*r+d*i,t[3]=c*r+p*i,t[4]=u*r-s*i,t[5]=h*r-a*i,t[6]=d*r-l*i,t[7]=p*r-c*i,t}static fromTranslation(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}static fromScaling(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromRotation(t,e,n){let i=n[0],r=n[1],s=n[2],a=Math.sqrt(i*i+r*r+s*s);if(a<qt)return null;a=1/a,i*=a,r*=a,s*=a;const l=Math.sin(e),c=Math.cos(e),u=1-c;return t[0]=i*i*u+c,t[1]=r*i*u+s*l,t[2]=s*i*u-r*l,t[3]=0,t[4]=i*r*u-s*l,t[5]=r*r*u+c,t[6]=s*r*u+i*l,t[7]=0,t[8]=i*s*u+r*l,t[9]=r*s*u-i*l,t[10]=s*s*u+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromXRotation(t,e){let n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromYRotation(t,e){let n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromZRotation(t,e){const n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static fromRotationTranslation(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],l=i+i,c=r+r,u=s+s,h=i*l,d=i*c,p=i*u,m=r*c,f=r*u,g=s*u,b=a*l,w=a*c,T=a*u;return t[0]=1-(m+g),t[1]=d+T,t[2]=p-w,t[3]=0,t[4]=d-T,t[5]=1-(h+g),t[6]=f+b,t[7]=0,t[8]=p+w,t[9]=f-b,t[10]=1-(h+m),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}static fromQuat2(t,e){let n=[0,0,0];const i=-e[0],r=-e[1],s=-e[2],a=e[3],l=e[4],c=e[5],u=e[6],h=e[7];let d=i*i+r*r+s*s+a*a;return d>0?(n[0]=(l*a+h*i+c*s-u*r)*2/d,n[1]=(c*a+h*r+u*i-l*s)*2/d,n[2]=(u*a+h*s+l*r-c*i)*2/d):(n[0]=(l*a+h*i+c*s-u*r)*2,n[1]=(c*a+h*r+u*i-l*s)*2,n[2]=(u*a+h*s+l*r-c*i)*2),q.fromRotationTranslation(t,e,n),t}static getTranslation(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}static getScaling(t,e){const n=e[0],i=e[1],r=e[2],s=e[4],a=e[5],l=e[6],c=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(n*n+i*i+r*r),t[1]=Math.sqrt(s*s+a*a+l*l),t[2]=Math.sqrt(c*c+u*u+h*h),t}static getRotation(t,e){q.getScaling(ni,e);const n=1/ni[0],i=1/ni[1],r=1/ni[2],s=e[0]*n,a=e[1]*i,l=e[2]*r,c=e[4]*n,u=e[5]*i,h=e[6]*r,d=e[8]*n,p=e[9]*i,m=e[10]*r,f=s+u+m;let g=0;return f>0?(g=Math.sqrt(f+1)*2,t[3]=.25*g,t[0]=(h-p)/g,t[1]=(d-l)/g,t[2]=(a-c)/g):s>u&&s>m?(g=Math.sqrt(1+s-u-m)*2,t[3]=(h-p)/g,t[0]=.25*g,t[1]=(a+c)/g,t[2]=(d+l)/g):u>m?(g=Math.sqrt(1+u-s-m)*2,t[3]=(d-l)/g,t[0]=(a+c)/g,t[1]=.25*g,t[2]=(h+p)/g):(g=Math.sqrt(1+m-s-u)*2,t[3]=(a-c)/g,t[0]=(d+l)/g,t[1]=(h+p)/g,t[2]=.25*g),t}static decompose(t,e,n,i){e[0]=i[12],e[1]=i[13],e[2]=i[14];const r=i[0],s=i[1],a=i[2],l=i[4],c=i[5],u=i[6],h=i[8],d=i[9],p=i[10];n[0]=Math.sqrt(r*r+s*s+a*a),n[1]=Math.sqrt(l*l+c*c+u*u),n[2]=Math.sqrt(h*h+d*d+p*p);const m=1/n[0],f=1/n[1],g=1/n[2],b=r*m,w=s*f,T=a*g,S=l*m,O=c*f,M=u*g,y=h*m,N=d*f,C=p*g,R=b+O+C;let x=0;return R>0?(x=Math.sqrt(R+1)*2,t[3]=.25*x,t[0]=(M-N)/x,t[1]=(y-T)/x,t[2]=(w-S)/x):b>O&&b>C?(x=Math.sqrt(1+b-O-C)*2,t[3]=(M-N)/x,t[0]=.25*x,t[1]=(w+S)/x,t[2]=(y+T)/x):O>C?(x=Math.sqrt(1+O-b-C)*2,t[3]=(y-T)/x,t[0]=(w+S)/x,t[1]=.25*x,t[2]=(M+N)/x):(x=Math.sqrt(1+C-b-O)*2,t[3]=(w-S)/x,t[0]=(y+T)/x,t[1]=(M+N)/x,t[2]=.25*x),t}static fromRotationTranslationScale(t,e,n,i){const r=e[0],s=e[1],a=e[2],l=e[3],c=r+r,u=s+s,h=a+a,d=r*c,p=r*u,m=r*h,f=s*u,g=s*h,b=a*h,w=l*c,T=l*u,S=l*h,O=i[0],M=i[1],y=i[2];return t[0]=(1-(f+b))*O,t[1]=(p+S)*O,t[2]=(m-T)*O,t[3]=0,t[4]=(p-S)*M,t[5]=(1-(d+b))*M,t[6]=(g+w)*M,t[7]=0,t[8]=(m+T)*y,t[9]=(g-w)*y,t[10]=(1-(d+f))*y,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}static fromRotationTranslationScaleOrigin(t,e,n,i,r){const s=e[0],a=e[1],l=e[2],c=e[3],u=s+s,h=a+a,d=l+l,p=s*u,m=s*h,f=s*d,g=a*h,b=a*d,w=l*d,T=c*u,S=c*h,O=c*d,M=i[0],y=i[1],N=i[2],C=r[0],R=r[1],x=r[2],A=(1-(g+w))*M,F=(m+O)*M,I=(f-S)*M,H=(m-O)*y,P=(1-(p+w))*y,U=(b+T)*y,_=(f+S)*N,j=(b-T)*N,J=(1-(p+g))*N;return t[0]=A,t[1]=F,t[2]=I,t[3]=0,t[4]=H,t[5]=P,t[6]=U,t[7]=0,t[8]=_,t[9]=j,t[10]=J,t[11]=0,t[12]=n[0]+C-(A*C+H*R+_*x),t[13]=n[1]+R-(F*C+P*R+j*x),t[14]=n[2]+x-(I*C+U*R+J*x),t[15]=1,t}static fromQuat(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=n+n,l=i+i,c=r+r,u=n*a,h=i*a,d=i*l,p=r*a,m=r*l,f=r*c,g=s*a,b=s*l,w=s*c;return t[0]=1-d-f,t[1]=h+w,t[2]=p-b,t[3]=0,t[4]=h-w,t[5]=1-u-f,t[6]=m+g,t[7]=0,t[8]=p+b,t[9]=m-g,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static frustum(t,e,n,i,r,s,a){const l=1/(n-e),c=1/(r-i),u=1/(s-a);return t[0]=s*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*c,t[6]=0,t[7]=0,t[8]=(n+e)*l,t[9]=(r+i)*c,t[10]=(a+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*u,t[15]=0,t}static perspectiveNO(t,e,n,i,r){const s=1/Math.tan(e/2);if(t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0){const a=1/(i-r);t[10]=(r+i)*a,t[14]=2*r*i*a}else t[10]=-1,t[14]=-2*i;return t}static perspective(t,e,n,i,r){return t}static perspectiveZO(t,e,n,i,r){const s=1/Math.tan(e/2);if(t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0){const a=1/(i-r);t[10]=r*a,t[14]=r*i*a}else t[10]=-1,t[14]=-i;return t}static perspectiveFromFieldOfView(t,e,n,i){const r=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(a+l),u=2/(r+s);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((a-l)*c*.5),t[9]=(r-s)*u*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}static orthoNO(t,e,n,i,r,s,a){const l=1/(e-n),c=1/(i-r),u=1/(s-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*l,t[13]=(r+i)*c,t[14]=(a+s)*u,t[15]=1,t}static ortho(t,e,n,i,r,s,a){return t}static orthoZO(t,e,n,i,r,s,a){const l=1/(e-n),c=1/(i-r),u=1/(s-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+n)*l,t[13]=(r+i)*c,t[14]=s*u,t[15]=1,t}static lookAt(t,e,n,i){const r=e[0],s=e[1],a=e[2],l=i[0],c=i[1],u=i[2],h=n[0],d=n[1],p=n[2];if(Math.abs(r-h)<qt&&Math.abs(s-d)<qt&&Math.abs(a-p)<qt)return q.identity(t);let m=r-h,f=s-d,g=a-p,b=1/Math.sqrt(m*m+f*f+g*g);m*=b,f*=b,g*=b;let w=c*g-u*f,T=u*m-l*g,S=l*f-c*m;b=Math.sqrt(w*w+T*T+S*S),b?(b=1/b,w*=b,T*=b,S*=b):(w=0,T=0,S=0);let O=f*S-g*T,M=g*w-m*S,y=m*T-f*w;return b=Math.sqrt(O*O+M*M+y*y),b?(b=1/b,O*=b,M*=b,y*=b):(O=0,M=0,y=0),t[0]=w,t[1]=O,t[2]=m,t[3]=0,t[4]=T,t[5]=M,t[6]=f,t[7]=0,t[8]=S,t[9]=y,t[10]=g,t[11]=0,t[12]=-(w*r+T*s+S*a),t[13]=-(O*r+M*s+y*a),t[14]=-(m*r+f*s+g*a),t[15]=1,t}static targetTo(t,e,n,i){const r=e[0],s=e[1],a=e[2],l=i[0],c=i[1],u=i[2];let h=r-n[0],d=s-n[1],p=a-n[2],m=h*h+d*d+p*p;m>0&&(m=1/Math.sqrt(m),h*=m,d*=m,p*=m);let f=c*p-u*d,g=u*h-l*p,b=l*d-c*h;return m=f*f+g*g+b*b,m>0&&(m=1/Math.sqrt(m),f*=m,g*=m,b*=m),t[0]=f,t[1]=g,t[2]=b,t[3]=0,t[4]=d*b-p*g,t[5]=p*f-h*b,t[6]=h*g-d*f,t[7]=0,t[8]=h,t[9]=d,t[10]=p,t[11]=0,t[12]=r,t[13]=s,t[14]=a,t[15]=1,t}static frob(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8]+t[9]*t[9]+t[10]*t[10]+t[11]*t[11]+t[12]*t[12]+t[13]*t[13]+t[14]*t[14]+t[15]*t[15])}static add(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}static subtract(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}static sub(t,e,n){return t}static multiplyScalar(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}static multiplyScalarAndAdd(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}static exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}static equals(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],m=t[11],f=t[12],g=t[13],b=t[14],w=t[15],T=e[0],S=e[1],O=e[2],M=e[3],y=e[4],N=e[5],C=e[6],R=e[7],x=e[8],A=e[9],F=e[10],I=e[11],H=e[12],P=e[13],U=e[14],_=e[15];return Math.abs(n-T)<=qt*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(i-S)<=qt*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(r-O)<=qt*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(s-M)<=qt*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(a-y)<=qt*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-N)<=qt*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-C)<=qt*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(u-R)<=qt*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(h-x)<=qt*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(d-A)<=qt*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(p-F)<=qt*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(m-I)<=qt*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(f-H)<=qt*Math.max(1,Math.abs(f),Math.abs(H))&&Math.abs(g-P)<=qt*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(b-U)<=qt*Math.max(1,Math.abs(b),Math.abs(U))&&Math.abs(w-_)<=qt*Math.max(1,Math.abs(w),Math.abs(_))}static str(t){return`Mat4(${t.join(", ")})`}}const ni=[0,0,0];q.prototype.mul=q.prototype.multiply,q.sub=q.subtract,q.mul=q.multiply,q.perspective=q.perspectiveNO,q.ortho=q.orthoNO;class it extends Float32Array{static BYTE_LENGTH=3*Float32Array.BYTES_PER_ELEMENT;constructor(...t){switch(t.length){case 3:super(t);break;case 2:super(t[0],t[1],3);break;case 1:{const e=t[0];typeof e=="number"?super([e,e,e]):super(e,0,3);break}default:super(3);break}}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}get r(){return this[0]}set r(t){this[0]=t}get g(){return this[1]}set g(t){this[1]=t}get b(){return this[2]}set b(t){this[2]=t}get magnitude(){const t=this[0],e=this[1],n=this[2];return Math.sqrt(t*t+e*e+n*n)}get mag(){return this.magnitude}get squaredMagnitude(){const t=this[0],e=this[1],n=this[2];return t*t+e*e+n*n}get sqrMag(){return this.squaredMagnitude}get str(){return it.str(this)}copy(t){return this.set(t),this}add(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this}sub(t){return this}multiply(t){return this[0]*=t[0],this[1]*=t[1],this[2]*=t[2],this}mul(t){return this}divide(t){return this[0]/=t[0],this[1]/=t[1],this[2]/=t[2],this}div(t){return this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this}scaleAndAdd(t,e){return this[0]+=t[0]*e,this[1]+=t[1]*e,this[2]+=t[2]*e,this}distance(t){return it.distance(this,t)}dist(t){return 0}squaredDistance(t){return it.squaredDistance(this,t)}sqrDist(t){return 0}negate(){return this[0]*=-1,this[1]*=-1,this[2]*=-1,this}invert(){return this[0]=1/this[0],this[1]=1/this[1],this[2]=1/this[2],this}dot(t){return this[0]*t[0]+this[1]*t[1]+this[2]*t[2]}normalize(){return it.normalize(this,this)}static create(){return new it}static clone(t){return new it(t)}static magnitude(t){let e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}static mag(t){return 0}static length(t){return 0}static len(t){return 0}static fromValues(t,e,n){return new it(t,e,n)}static copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}static set(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}static add(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}static subtract(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}static sub(t,e,n){return[0,0,0]}static multiply(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}static mul(t,e,n){return[0,0,0]}static divide(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}static div(t,e,n){return[0,0,0]}static ceil(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}static floor(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}static min(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}static max(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}static scale(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}static scaleAndAdd(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}static distance(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}static dist(t,e){return 0}static squaredDistance(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}static sqrDist(t,e){return 0}static squaredLength(t){const e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}static sqrLen(t,e){return 0}static negate(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}static inverse(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}static normalize(t,e){const n=e[0],i=e[1],r=e[2];let s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}static dot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}static cross(t,e,n){const i=e[0],r=e[1],s=e[2],a=n[0],l=n[1],c=n[2];return t[0]=r*c-s*l,t[1]=s*a-i*c,t[2]=i*l-r*a,t}static lerp(t,e,n,i){const r=e[0],s=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=a+i*(n[2]-a),t}static slerp(t,e,n,i){const r=Math.acos(Math.min(Math.max(it.dot(e,n),-1),1)),s=Math.sin(r),a=Math.sin((1-i)*r)/s,l=Math.sin(i*r)/s;return t[0]=a*e[0]+l*n[0],t[1]=a*e[1]+l*n[1],t[2]=a*e[2]+l*n[2],t}static hermite(t,e,n,i,r,s){const a=s*s,l=a*(2*s-3)+1,c=a*(s-2)+s,u=a*(s-1),h=a*(3-2*s);return t[0]=e[0]*l+n[0]*c+i[0]*u+r[0]*h,t[1]=e[1]*l+n[1]*c+i[1]*u+r[1]*h,t[2]=e[2]*l+n[2]*c+i[2]*u+r[2]*h,t}static bezier(t,e,n,i,r,s){const a=1-s,l=a*a,c=s*s,u=l*a,h=3*s*l,d=3*c*a,p=c*s;return t[0]=e[0]*u+n[0]*h+i[0]*d+r[0]*p,t[1]=e[1]*u+n[1]*h+i[1]*d+r[1]*p,t[2]=e[2]*u+n[2]*h+i[2]*d+r[2]*p,t}static transformMat4(t,e,n){const i=e[0],r=e[1],s=e[2],a=n[3]*i+n[7]*r+n[11]*s+n[15]||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/a,t}static transformMat3(t,e,n){let i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}static transformQuat(t,e,n){const i=n[0],r=n[1],s=n[2],a=n[3]*2,l=e[0],c=e[1],u=e[2],h=r*u-s*c,d=s*l-i*u,p=i*c-r*l,m=(r*p-s*d)*2,f=(s*h-i*p)*2,g=(i*d-r*h)*2;return t[0]=l+h*a+m,t[1]=c+d*a+f,t[2]=u+p*a+g,t}static rotateX(t,e,n,i){const r=n[1],s=n[2],a=e[1]-r,l=e[2]-s;return t[0]=e[0],t[1]=a*Math.cos(i)-l*Math.sin(i)+r,t[2]=a*Math.sin(i)+l*Math.cos(i)+s,t}static rotateY(t,e,n,i){const r=n[0],s=n[2],a=e[0]-r,l=e[2]-s;return t[0]=l*Math.sin(i)+a*Math.cos(i)+r,t[1]=e[1],t[2]=l*Math.cos(i)-a*Math.sin(i)+s,t}static rotateZ(t,e,n,i){const r=n[0],s=n[1],a=e[0]-r,l=e[1]-s;return t[0]=a*Math.cos(i)-l*Math.sin(i)+r,t[1]=a*Math.sin(i)+l*Math.cos(i)+s,t[2]=n[2],t}static angle(t,e){const n=t[0],i=t[1],r=t[2],s=e[0],a=e[1],l=e[2],c=Math.sqrt((n*n+i*i+r*r)*(s*s+a*a+l*l)),u=c&&it.dot(t,e)/c;return Math.acos(Math.min(Math.max(u,-1),1))}static zero(t){return t[0]=0,t[1]=0,t[2]=0,t}static str(t){return`Vec3(${t.join(", ")})`}static exactEquals(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}static equals(t,e){const n=t[0],i=t[1],r=t[2],s=e[0],a=e[1],l=e[2];return Math.abs(n-s)<=qt*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=qt*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=qt*Math.max(1,Math.abs(r),Math.abs(l))}}it.prototype.sub=it.prototype.subtract,it.prototype.mul=it.prototype.multiply,it.prototype.div=it.prototype.divide,it.prototype.dist=it.prototype.distance,it.prototype.sqrDist=it.prototype.squaredDistance,it.sub=it.subtract,it.mul=it.multiply,it.div=it.divide,it.dist=it.distance,it.sqrDist=it.squaredDistance,it.sqrLen=it.squaredLength,it.mag=it.magnitude,it.length=it.magnitude,it.len=it.magnitude;async function zc(o=1){if(!Number.isInteger(o)||o<1)throw new TypeError("nextAnimationFrame error: 'cntr' must be a positive integer greater than 0.");let t=performance.now();for(;--o>=0;)t=await new Promise(e=>requestAnimationFrame(e));return t}function Un(o=0,t=0,e=0){return Math.min(Math.max(o,t),e)}function Be(o){return o*(Math.PI/180)}class Wn{#t;#e;#n;static#o=new Wn(null);static get voidControl(){return this.#o}constructor(t,e=!1){this.#t=t,this.#n=e,V(t)&&(t.control=this)}get finished(){return this.#e instanceof Promise||(this.#e=this.#n?new Promise(t=>this.#t.resolve=t):Promise.resolve()),this.#e}get isActive(){return this.#t.active}get isFinished(){return this.#t.finished}cancel(){const t=this.#t;t!=null&&(t.cancelled=!0)}}class ut{static activeList=[];static newList=[];static current;static add(t){const e=performance.now();t.start=e+(ut.current-e),ut.newList.push(t)}static animate(){const t=ut.current=performance.now();if(ut.activeList.length===0&&ut.newList.length===0){globalThis.requestAnimationFrame(ut.animate);return}if(ut.newList.length)for(let e=ut.newList.length;--e>=0;){const n=ut.newList[e];n.cancelled&&(ut.newList.splice(e,1),n.cleanup(n)),n.active&&(ut.newList.splice(e,1),ut.activeList.push(n))}for(let e=ut.activeList.length;--e>=0;){const n=ut.activeList[e];if(n.cancelled||n.el!==void 0&&!n.el.isConnected){ut.activeList.splice(e,1),n.cleanup(n);continue}if(n.current=t-n.start,n.current>=n.duration){for(let r=n.keys.length;--r>=0;){const s=n.keys[r];n.newData[s]=n.destination[s]}n.position.set(n.newData),ut.activeList.splice(e,1),n.cleanup(n);continue}const i=n.ease(n.current/n.duration);for(let r=n.keys.length;--r>=0;){const s=n.keys[r];n.newData[s]=n.interpolate(n.initial[s],n.destination[s],i)}n.position.set(n.newData)}globalThis.requestAnimationFrame(ut.animate)}static cancel(t){for(let e=ut.activeList.length;--e>=0;){const n=ut.activeList[e];n.position===t&&(ut.activeList.splice(e,1),n.cancelled=!0,n.cleanup(n))}for(let e=ut.newList.length;--e>=0;){const n=ut.newList[e];n.position===t&&(ut.newList.splice(e,1),n.cancelled=!0,n.cleanup(n))}}static cancelAll(){for(let t=ut.activeList.length;--t>=0;){const e=ut.activeList[t];e.cancelled=!0,e.cleanup(e)}for(let t=ut.newList.length;--t>=0;){const e=ut.newList[t];e.cancelled=!0,e.cleanup(e)}ut.activeList.length=0,ut.newList.length=0}static getScheduled(t){const e=[];for(let n=ut.activeList.length;--n>=0;){const i=ut.activeList[n];i.position===t&&e.push(i.control)}for(let n=ut.newList.length;--n>=0;){const i=ut.newList[n];i.position===t&&e.push(i.control)}return e}}ut.animate();const ss=new Set(["left","top","maxWidth","maxHeight","minWidth","minHeight","width","height","rotateX","rotateY","rotateZ","scale","translateX","translateY","translateZ","zIndex","rotation"]),An=["rotateX","rotateY","rotateZ","scale","translateX","translateY","translateZ"];Object.freeze(An);const Pc=/^([-+*])=(-?[\d]*\.?[\d]+)$/,as={height:0,left:0,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,top:0,transformOrigin:null,width:0,zIndex:null,rotateX:0,rotateY:0,rotateZ:0,scale:1,translateX:0,translateY:0,translateZ:0,rotation:0};Object.freeze(as);function vo(o){o.rotateX===null&&(o.rotateX=0),o.rotateY===null&&(o.rotateY=0),o.rotateZ===null&&(o.rotateZ=0),o.translateX===null&&(o.translateX=0),o.translateY===null&&(o.translateY=0),o.translateZ===null&&(o.translateZ=0),o.scale===null&&(o.scale=1),o.rotation===null&&(o.rotation=0)}const Ae={rotateX:1,rotateY:2,rotateZ:4,scale:8,translateX:16,translateY:32,translateZ:64};Object.freeze(Ae);const jc="top left",Jn=["top left","top center","top right","center left","center","center right","bottom left","bottom center","bottom right"];Object.freeze(Jn);function Qn(o,t){for(const e in o)if(ss.has(e)){const n=o[e];if(typeof n!="string"||n==="auto"||n==="inherit")continue;const i=Pc.exec(n);if(!i)throw new Error(`convertRelative error: malformed relative key (${e}) with value (${n})`);const r=t[e];switch(i[1]){case"-":o[e]=r-parseFloat(i[2]);break;case"+":o[e]=r+parseFloat(i[2]);break;case"*":o[e]=r*parseFloat(i[2]);break}}}class ls{#t;#e;#n=0;#o;constructor(t,e){this.#e=t,this.#t=e,this.#o=this.#r.bind(this)}get isScheduled(){return this.#n>0}#i(t,e,n,i,r,s,a){vo(t),vo(e);for(const h in t)Number.isFinite(t[h])||delete t[h];const l=Object.keys(t),c=Object.assign({immediateElementUpdate:!0},t);if(l.length===0)return Wn.voidControl;const u={active:!0,cleanup:this.#o,cancelled:!1,control:void 0,current:0,destination:e,duration:n*1e3,ease:s,el:i,finished:!1,initial:t,interpolate:a,keys:l,newData:c,position:this.#e,resolve:void 0,start:void 0};return r>0&&(u.active=!1,setTimeout(()=>{if(!u.cancelled){u.active=!0;const h=performance.now();u.start=h+(ut.current-h)}},r*1e3)),this.#n++,ut.add(u),new Wn(u,!0)}cancel(){ut.cancel(this.#e)}#r(t){this.#n--,t.active=!1,t.finished=!0,typeof t.resolve=="function"&&t.resolve(t.cancelled)}getScheduled(){return ut.getScheduled(this.#e)}from(t,{delay:e=0,duration:n=1,ease:i=un,interpolate:r=In}={}){if(!V(t))throw new TypeError("AnimationAPI.from error: 'fromData' is not an object.");const s=this.#e.parent;if(s!==void 0&&typeof s?.options?.positionable=="boolean"&&!s?.options?.positionable)return Wn.voidControl;const a=s instanceof HTMLElement?s:s?.elementTarget,l=a instanceof HTMLElement&&a.isConnected?a:void 0;if(!Number.isFinite(e)||e<0)throw new TypeError("AnimationAPI.from error: 'delay' is not a positive number.");if(!Number.isFinite(n)||n<0)throw new TypeError("AnimationAPI.from error: 'duration' is not a positive number.");if(typeof i!="function")throw new TypeError("AnimationAPI.from error: 'ease' is not a function.");if(typeof r!="function")throw new TypeError("AnimationAPI.from error: 'interpolate' is not a function.");const c={},u={},h=this.#t;for(const d in t)h[d]!==void 0&&t[d]!==h[d]&&(c[d]=t[d],u[d]=h[d]);return Qn(c,h),this.#i(c,u,n,l,e,i,r)}fromTo(t,e,{delay:n=0,duration:i=1,ease:r=un,interpolate:s=In}={}){if(!V(t))throw new TypeError("AnimationAPI.fromTo error: 'fromData' is not an object.");if(!V(e))throw new TypeError("AnimationAPI.fromTo error: 'toData' is not an object.");const a=this.#e.parent;if(a!==void 0&&typeof a?.options?.positionable=="boolean"&&!a?.options?.positionable)return Wn.voidControl;const l=a instanceof HTMLElement?a:a?.elementTarget,c=l instanceof HTMLElement&&l.isConnected?l:void 0;if(!Number.isFinite(n)||n<0)throw new TypeError("AnimationAPI.fromTo error: 'delay' is not a positive number.");if(!Number.isFinite(i)||i<0)throw new TypeError("AnimationAPI.fromTo error: 'duration' is not a positive number.");if(typeof r!="function")throw new TypeError("AnimationAPI.fromTo error: 'ease' is not a function.");if(typeof s!="function")throw new TypeError("AnimationAPI.fromTo error: 'interpolate' is not a function.");const u={},h={},d=this.#t;for(const p in t){if(e[p]===void 0){console.warn(`AnimationAPI.fromTo warning: key ('${p}') from 'fromData' missing in 'toData'; skipping this key.`);continue}d[p]!==void 0&&(u[p]=t[p],h[p]=e[p])}return Qn(u,d),Qn(h,d),this.#i(u,h,i,c,n,r,s)}to(t,{delay:e=0,duration:n=1,ease:i=un,interpolate:r=In}={}){if(!V(t))throw new TypeError("AnimationAPI.to error: 'toData' is not an object.");const s=this.#e.parent;if(s!==void 0&&typeof s?.options?.positionable=="boolean"&&!s?.options?.positionable)return Wn.voidControl;const a=s instanceof HTMLElement?s:s?.elementTarget,l=a instanceof HTMLElement&&a.isConnected?a:void 0;if(!Number.isFinite(e)||e<0)throw new TypeError("AnimationAPI.to error: 'delay' is not a positive number.");if(!Number.isFinite(n)||n<0)throw new TypeError("AnimationAPI.to error: 'duration' is not a positive number.");if(typeof i!="function")throw new TypeError("AnimationAPI.to error: 'ease' is not a function.");if(typeof r!="function")throw new TypeError("AnimationAPI.to error: 'interpolate' is not a function.");const c={},u={},h=this.#t;for(const d in t)h[d]!==void 0&&t[d]!==h[d]&&(u[d]=t[d],c[d]=h[d]);return Qn(u,h),this.#i(c,u,n,l,e,i,r)}quickTo(t,{duration:e=1,ease:n=un,interpolate:i=In}={}){if(!zt(t))throw new TypeError("AnimationAPI.quickTo error: 'keys' is not an iterable list.");const r=this.#e.parent;if(r!==void 0&&typeof r?.options?.positionable=="boolean"&&!r?.options?.positionable)throw new Error("AnimationAPI.quickTo error: 'parent' is not positionable.");if(!Number.isFinite(e)||e<0)throw new TypeError("AnimationAPI.quickTo error: 'duration' is not a positive number.");if(typeof n!="function")throw new TypeError("AnimationAPI.quickTo error: 'ease' is not a function.");if(typeof i!="function")throw new TypeError("AnimationAPI.quickTo error: 'interpolate' is not a function.");const s={},a={},l=this.#t;for(const p of t){if(typeof p!="string")throw new TypeError("AnimationAPI.quickTo error: key is not a string.");if(!ss.has(p))throw new Error(`AnimationAPI.quickTo error: key ('${p}') is not animatable.`);l[p]!==void 0&&(a[p]=l[p],s[p]=l[p])}const c=[...t];Object.freeze(c);const u=Object.assign({immediateElementUpdate:!0},s),h={active:!0,cleanup:this.#o,cancelled:!1,control:void 0,current:0,destination:a,duration:e*1e3,ease:n,el:void 0,finished:!0,initial:s,interpolate:i,keys:t,newData:u,position:this.#e,resolve:void 0,start:void 0},d=(...p)=>{const m=p.length;if(m===0)return;for(let g=c.length;--g>=0;){const b=c[g];l[b]!==void 0&&(s[b]=l[b])}if(V(p[0])){const g=p[0];for(const b in g)a[b]!==void 0&&(a[b]=g[b])}else for(let g=0;g<m&&g<c.length;g++){const b=c[g];a[b]!==void 0&&(a[b]=p[g])}Qn(a,l),vo(s),vo(a);const f=r instanceof HTMLElement?r:r?.elementTarget;if(h.el=f instanceof HTMLElement&&f.isConnected?f:void 0,h.finished)h.finished=!1,h.active=!0,h.current=0,this.#n++,ut.add(h);else{const g=performance.now();h.start=g+(ut.current-g),h.current=0}};return d.keys=c,d.options=({duration:p,ease:m,interpolate:f}={})=>{if(p!==void 0&&(!Number.isFinite(p)||p<0))throw new TypeError("AnimationAPI.quickTo.options error: 'duration' is not a positive number.");if(m!==void 0&&typeof m!="function")throw new TypeError("AnimationAPI.quickTo.options error: 'ease' is not a function.");if(f!==void 0&&typeof f!="function")throw new TypeError("AnimationAPI.quickTo.options error: 'interpolate' is not a function.");return p>=0&&(h.duration=p*1e3),m&&(h.ease=m),f&&(h.interpolate=f),d},d}}class Mn{#t;#e;static#n=new Mn(null);static get voidControl(){return this.#n}constructor(t){this.#t=t}get finished(){const t=this.#t;if(t==null)return Promise.resolve();if(!(this.#e instanceof Promise)){const e=[];for(let n=t.length;--n>=0;)e.push(t[n].finished);this.#e=Promise.all(e)}return this.#e}get isActive(){const t=this.#t;if(t==null)return!1;for(let e=t.length;--e>=0;)if(t[e].isActive)return!0;return!1}get isFinished(){const t=this.#t;if(t==null)return!0;for(let e=t.length;--e>=0;)if(!t[e].isFinished)return!1;return!1}cancel(){if(this.#t!=null)for(let e=this.#t.length;--e>=0;)this.#t[e].cancel()}}class Wc{static#t(t){return V(t)&&t.animate instanceof ls}static cancel(t){if(zt(t)){let e=-1;for(const n of t){e++;const i=this.#t(n)?n:n.position;if(!this.#t(i)){console.warn(`AnimationGroupAPI.cancel warning: No Position instance found at index: ${e}.`);continue}ut.cancel(i)}}else{const e=this.#t(t)?t:t.position;if(!this.#t(e)){console.warn("AnimationGroupAPI.cancel warning: No Position instance found.");return}ut.cancel(e)}}static cancelAll(){ut.cancelAll()}static getScheduled(t){const e=[];if(zt(t)){let n=-1;for(const i of t){n++;const r=this.#t(i),s=r?i:i.position;if(!this.#t(s)){console.warn(`AnimationGroupAPI.getScheduled warning: No Position instance found at index: ${n}.`);continue}const a=ut.getScheduled(s);e.push({position:s,data:r?void 0:i,controls:a})}}else{const n=this.#t(t),i=n?t:t.position;if(!this.#t(i))return console.warn("AnimationGroupAPI.getScheduled warning: No Position instance found."),e;const r=ut.getScheduled(i);e.push({position:i,data:n?void 0:t,controls:r})}return e}static from(t,e,n){if(!V(e)&&typeof e!="function")throw new TypeError("AnimationGroupAPI.from error: 'fromData' is not an object or function.");if(n!==void 0&&!V(n)&&typeof n!="function")throw new TypeError("AnimationGroupAPI.from error: 'options' is not an object or function.");const i=[];let r=-1,s;const a=typeof e=="function",l=typeof n=="function",c=a||l;c&&(s={index:r,position:void 0,data:void 0});let u=e,h=n;if(zt(t))for(const d of t){r++;const p=this.#t(d),m=p?d:d.position;if(!this.#t(m)){console.warn(`AnimationGroupAPI.from warning: No Position instance found at index: ${r}.`);continue}if(c&&(s.index=r,s.position=t,s.data=p?void 0:d),a){if(u=e(s),u==null)continue;if(!V(u))throw new TypeError(`AnimationGroupAPI.from error: fromData callback function iteration(${r}) failed to return an object.`)}if(l){if(h=n(s),h==null)continue;if(!V(h))throw new TypeError(`AnimationGroupAPI.from error: options callback function iteration(${r}) failed to return an object.`)}i.push(m.animate.from(u,h))}else{const d=this.#t(t),p=d?t:t.position;if(!this.#t(p))return console.warn("AnimationGroupAPI.from warning: No Position instance found."),Mn.voidControl;if(c&&(s.index=0,s.position=t,s.data=d?void 0:t),a&&(u=e(s),!V(u)))throw new TypeError("AnimationGroupAPI.from error: fromData callback function failed to return an object.");if(l&&(h=n(s),!V(h)))throw new TypeError("AnimationGroupAPI.from error: options callback function failed to return an object.");i.push(p.animate.from(u,h))}return new Mn(i)}static fromTo(t,e,n,i){if(!V(e)&&typeof e!="function")throw new TypeError("AnimationGroupAPI.fromTo error: 'fromData' is not an object or function.");if(!V(n)&&typeof n!="function")throw new TypeError("AnimationGroupAPI.fromTo error: 'toData' is not an object or function.");if(i!==void 0&&!V(i)&&typeof i!="function")throw new TypeError("AnimationGroupAPI.fromTo error: 'options' is not an object or function.");const r=[];let s=-1,a;const l=typeof e=="function",c=typeof n=="function",u=typeof i=="function",h=l||c||u;h&&(a={index:s,position:void 0,data:void 0});let d=e,p=n,m=i;if(zt(t))for(const f of t){s++;const g=this.#t(f),b=g?f:f.position;if(!this.#t(b)){console.warn(`AnimationGroupAPI.fromTo warning: No Position instance found at index: ${s}.`);continue}if(h&&(a.index=s,a.position=t,a.data=g?void 0:f),l){if(d=e(a),d==null)continue;if(!V(d))throw new TypeError(`AnimationGroupAPI.fromTo error: fromData callback function iteration(${s}) failed to return an object.`)}if(c){if(p=n(a),p==null)continue;if(!V(p))throw new TypeError(`AnimationGroupAPI.fromTo error: toData callback function iteration(${s}) failed to return an object.`)}if(u){if(m=i(a),m==null)continue;if(!V(m))throw new TypeError(`AnimationGroupAPI.fromTo error: options callback function iteration(${s}) failed to return an object.`)}r.push(b.animate.fromTo(d,p,m))}else{const f=this.#t(t),g=f?t:t.position;if(!this.#t(g))return console.warn("AnimationGroupAPI.fromTo warning: No Position instance found."),Mn.voidControl;if(h&&(a.index=0,a.position=t,a.data=f?void 0:t),l&&(d=e(a),!V(d)))throw new TypeError("AnimationGroupAPI.fromTo error: fromData callback function failed to return an object.");if(c&&(p=n(a),!V(p)))throw new TypeError("AnimationGroupAPI.fromTo error: toData callback function failed to return an object.");if(u&&(m=i(a),!V(m)))throw new TypeError("AnimationGroupAPI.fromTo error: options callback function failed to return an object.");r.push(g.animate.fromTo(d,p,m))}return new Mn(r)}static to(t,e,n){if(!V(e)&&typeof e!="function")throw new TypeError("AnimationGroupAPI.to error: 'toData' is not an object or function.");if(n!==void 0&&!V(n)&&typeof n!="function")throw new TypeError("AnimationGroupAPI.to error: 'options' is not an object or function.");const i=[];let r=-1,s;const a=typeof e=="function",l=typeof n=="function",c=a||l;c&&(s={index:r,position:void 0,data:void 0});let u=e,h=n;if(zt(t))for(const d of t){r++;const p=this.#t(d),m=p?d:d.position;if(!this.#t(m)){console.warn(`AnimationGroupAPI.to warning: No Position instance found at index: ${r}.`);continue}if(c&&(s.index=r,s.position=t,s.data=p?void 0:d),a){if(u=e(s),u==null)continue;if(!V(u))throw new TypeError(`AnimationGroupAPI.to error: toData callback function iteration(${r}) failed to return an object.`)}if(l){if(h=n(s),h==null)continue;if(!V(h))throw new TypeError(`AnimationGroupAPI.to error: options callback function iteration(${r}) failed to return an object.`)}i.push(m.animate.to(u,h))}else{const d=this.#t(t),p=d?t:t.position;if(!this.#t(p))return console.warn("AnimationGroupAPI.to warning: No Position instance found."),Mn.voidControl;if(c&&(s.index=0,s.position=t,s.data=d?void 0:t),a&&(u=e(s),!V(u)))throw new TypeError("AnimationGroupAPI.to error: toData callback function failed to return an object.");if(l&&(h=n(s),!V(h)))throw new TypeError("AnimationGroupAPI.to error: options callback function failed to return an object.");i.push(p.animate.to(u,h))}return new Mn(i)}static quickTo(t,e,n){if(!zt(e))throw new TypeError("AnimationGroupAPI.quickTo error: 'keys' is not an iterable list.");if(n!==void 0&&!V(n)&&typeof n!="function")throw new TypeError("AnimationGroupAPI.quickTo error: 'options' is not an object or function.");const i=[];let r=-1;const s=typeof n=="function",a={index:r,position:void 0,data:void 0};let l=n;if(zt(t))for(const h of t){r++;const d=this.#t(h),p=d?h:h.position;if(!this.#t(p)){console.warn(`AnimationGroupAPI.quickTo warning: No Position instance found at index: ${r}.`);continue}if(a.index=r,a.position=t,a.data=d?void 0:h,s){if(l=n(a),l==null)continue;if(!V(l))throw new TypeError(`AnimationGroupAPI.quickTo error: options callback function iteration(${r}) failed to return an object.`)}i.push(p.animate.quickTo(e,l))}else{const h=this.#t(t),d=h?t:t.position;if(!this.#t(d))return console.warn("AnimationGroupAPI.quickTo warning: No Position instance found."),()=>null;if(a.index=0,a.position=t,a.data=h?void 0:t,s&&(l=n(a),!V(l)))throw new TypeError("AnimationGroupAPI.quickTo error: options callback function failed to return an object.");i.push(d.animate.quickTo(e,l))}const c=[...e];Object.freeze(c);const u=(...h)=>{if(h.length!==0)if(typeof h[0]=="function"){const d=h[0];r=-1;let p=0;if(zt(t))for(const m of t){r++;const f=this.#t(m),g=f?m:m.position;if(!this.#t(g))continue;a.index=r,a.position=t,a.data=f?void 0:m;const b=d(a);if(b==null)continue;const w=zt(b);if(!Number.isFinite(b)&&!w&&!V(b))throw new TypeError(`AnimationGroupAPI.quickTo error: toData callback function iteration(${r}) failed to return a finite number, iterable list, or object.`);w?i[p++](...b):i[p++](b)}else{const m=this.#t(t),f=m?t:t.position;if(!this.#t(f))return;a.index=0,a.position=t,a.data=m?void 0:t;const g=d(a);if(g==null)return;const b=zt(g);if(!Number.isFinite(g)&&!b&&!V(g))throw new TypeError(`AnimationGroupAPI.quickTo error: toData callback function iteration(${r}) failed to return a finite number, iterable list, or object.`);b?i[p++](...g):i[p++](g)}}else for(let d=i.length;--d>=0;)i[d](...h)};return u.keys=c,u.options=h=>{if(h!==void 0&&!V(h)&&typeof h!="function")throw new TypeError("AnimationGroupAPI.quickTo error: 'options' is not an object or function.");if(V(h))for(let d=i.length;--d>=0;)i[d].options(h);else if(typeof h=="function")if(zt(t)){r=-1;let d=0;for(const p of t){r++;const m=this.#t(p),f=m?p:p.position;if(!this.#t(f)){console.warn(`AnimationGroupAPI.quickTo.options warning: No Position instance found at index: ${r}.`);continue}if(a.index=r,a.position=t,a.data=m?void 0:p,l=h(a),l!=null){if(!V(l))throw new TypeError(`AnimationGroupAPI.quickTo.options error: options callback function iteration(${r}) failed to return an object.`);i[d++].options(l)}}}else{const d=this.#t(t),p=d?t:t.position;if(!this.#t(p))return console.warn("AnimationGroupAPI.quickTo.options warning: No Position instance found."),u;if(a.index=0,a.position=t,a.data=d?void 0:t,l=h(a),!V(l))throw new TypeError("AnimationGroupAPI.quickTo error: options callback function failed to return an object.");i[0].options(l)}return u},u}}class cs{#t;#e;#n;#o;constructor({element:t,lock:e=!1,width:n,height:i}={}){this.element=t,this.width=n,this.height=i,this.#n=typeof e=="boolean"?e:!1}get element(){return this.#t}get height(){return this.#e}get width(){return this.#o}set element(t){if(!this.#n)if(t==null||t instanceof HTMLElement)this.#t=t;else throw new TypeError("'element' is not a HTMLElement, undefined, or null.")}set height(t){if(!this.#n)if(t===void 0||Number.isFinite(t))this.#e=t;else throw new TypeError("'height' is not a finite number or undefined.")}set width(t){if(!this.#n)if(t===void 0||Number.isFinite(t))this.#o=t;else throw new TypeError("'width' is not a finite number or undefined.")}setDimension(t,e){if(!this.#n){if(t===void 0||Number.isFinite(t))this.#o=t;else throw new TypeError("'width' is not a finite number or undefined.");if(e===void 0||Number.isFinite(e))this.#e=e;else throw new TypeError("'height' is not a finite number or undefined.")}}getLeft(t){return((this.#o??this.#t?.offsetWidth??globalThis.innerWidth)-t)/2}getTop(t){return((this.#e??this.#t?.offsetHeight??globalThis.innerHeight)-t)/2}}class Bc{constructor(){this.left=!1,this.top=!1,this.width=!1,this.height=!1,this.maxHeight=!1,this.maxWidth=!1,this.minHeight=!1,this.minWidth=!1,this.zIndex=!1,this.transform=!1,this.transformOrigin=!1}hasChange(){return this.left||this.top||this.width||this.height||this.maxHeight||this.maxWidth||this.minHeight||this.minWidth||this.zIndex||this.transform||this.transformOrigin}set(t){this.left=t,this.top=t,this.width=t,this.height=t,this.maxHeight=t,this.maxWidth=t,this.minHeight=t,this.minWidth=t,this.zIndex=t,this.transform=t,this.transformOrigin=t}}class tr{constructor({height:t=null,left:e=null,maxHeight:n=null,maxWidth:i=null,minHeight:r=null,minWidth:s=null,rotateX:a=null,rotateY:l=null,rotateZ:c=null,scale:u=null,translateX:h=null,translateY:d=null,translateZ:p=null,top:m=null,transformOrigin:f=null,width:g=null,zIndex:b=null}={}){this.height=t,this.left=e,this.maxHeight=n,this.maxWidth=i,this.minHeight=r,this.minWidth=s,this.rotateX=a,this.rotateY=l,this.rotateZ=c,this.scale=u,this.top=m,this.transformOrigin=f,this.translateX=h,this.translateY=d,this.translateZ=p,this.width=g,this.zIndex=b,Object.seal(this)}copy(t){return this.height=t.height,this.left=t.left,this.maxHeight=t.maxHeight,this.maxWidth=t.maxWidth,this.minHeight=t.minHeight,this.minWidth=t.minWidth,this.rotateX=t.rotateX,this.rotateY=t.rotateY,this.rotateZ=t.rotateZ,this.scale=t.scale,this.top=t.top,this.transformOrigin=t.transformOrigin,this.translateX=t.translateX,this.translateY=t.translateY,this.translateZ=t.translateZ,this.width=t.width,this.zIndex=t.zIndex,this}}class Xc{#t;#e=new Map;#n;#o;constructor(t,e,n){this.#n=t,this.#t=e,this.#o=n}get({name:t}){if(typeof t!="string")throw new TypeError("Position - getSave error: 'name' is not a string.");return this.#e.get(t)}getDefault(){return this.#e.get("#defaultData")}remove({name:t}){if(typeof t!="string")throw new TypeError("Position - remove: 'name' is not a string.");const e=this.#e.get(t);return this.#e.delete(t),e}reset({keepZIndex:t=!1,invokeSet:e=!0}={}){const n=this.#e.get("#defaultData");if(!V(n))return!1;this.#n.animate.isScheduled&&this.#n.animate.cancel();const i=this.#n.zIndex,r=Object.assign({},n);return t&&(r.zIndex=i),this.#o.reset(r),this.#n.parent?.reactive?.minimized&&this.#n.parent?.maximize?.({animate:!1,duration:0}),e&&setTimeout(()=>this.#n.set(r),0),!0}restore({name:t,remove:e=!1,properties:n,silent:i=!1,async:r=!1,animateTo:s=!1,duration:a=.1,ease:l=Zi,interpolate:c=In}){if(typeof t!="string")throw new TypeError("Position - restore error: 'name' is not a string.");const u=this.#e.get(t);if(u){e&&this.#e.delete(t);let h=u;if(zt(n)){h={};for(const d of n)h[d]=u[d]}if(i){for(const d in h)this.#t[d]=h[d];return u}else if(s){if(h.transformOrigin!==this.#n.transformOrigin&&(this.#n.transformOrigin=h.transformOrigin),r)return this.#n.animate.to(h,{duration:a,ease:l,interpolate:c}).finished.then(()=>u);this.#n.animate.to(h,{duration:a,ease:l,interpolate:c})}else this.#n.set(h)}return u}save({name:t,...e}){if(typeof t!="string")throw new TypeError("Position - save error: 'name' is not a string.");const n=this.#n.get(e);return this.#e.set(t,n),n}set({name:t,...e}){if(typeof t!="string")throw new TypeError("Position - set error: 'name' is not a string.");this.#e.set(t,e)}}class qc{constructor(){this.el=void 0,this.computed=void 0,this.marginLeft=void 0,this.marginTop=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.minHeight=void 0,this.minWidth=void 0,this.hasWillChange=!1,this.resizeObserved={contentHeight:void 0,contentWidth:void 0,offsetHeight:void 0,offsetWidth:void 0};const t=cn(this.resizeObserved);this.stores={element:cn(this.el),resizeContentHeight:Et(t,"contentHeight"),resizeContentWidth:Et(t,"contentWidth"),resizeObserved:t,resizeOffsetHeight:Et(t,"offsetHeight"),resizeOffsetWidth:Et(t,"offsetWidth")}}get offsetHeight(){if(this.el instanceof HTMLElement)return this.resizeObserved.offsetHeight!==void 0?this.resizeObserved.offsetHeight:this.el.offsetHeight;throw new Error("StyleCache - get offsetHeight error: no element assigned.")}get offsetWidth(){if(this.el instanceof HTMLElement)return this.resizeObserved.offsetWidth!==void 0?this.resizeObserved.offsetWidth:this.el.offsetWidth;throw new Error("StyleCache - get offsetWidth error: no element assigned.")}hasData(t){return this.el===t}reset(){this.el instanceof HTMLElement&&this.el.isConnected&&!this.hasWillChange&&(this.el.style.willChange=null),this.el=void 0,this.computed=void 0,this.marginLeft=void 0,this.marginTop=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.minHeight=void 0,this.minWidth=void 0,this.hasWillChange=!1,this.resizeObserved.contentHeight=void 0,this.resizeObserved.contentWidth=void 0,this.resizeObserved.offsetHeight=void 0,this.resizeObserved.offsetWidth=void 0,this.stores.element.set(void 0)}update(t){this.el=t,this.computed=globalThis.getComputedStyle(t),this.marginLeft=ht.pixels(t.style.marginLeft)??ht.pixels(this.computed.marginLeft),this.marginTop=ht.pixels(t.style.marginTop)??ht.pixels(this.computed.marginTop),this.maxHeight=ht.pixels(t.style.maxHeight)??ht.pixels(this.computed.maxHeight),this.maxWidth=ht.pixels(t.style.maxWidth)??ht.pixels(this.computed.maxWidth),this.minHeight=ht.pixels(t.style.minHeight)??ht.pixels(this.computed.minHeight),this.minWidth=ht.pixels(t.style.minWidth)??ht.pixels(this.computed.minWidth);const e=t.style.willChange!==""?t.style.willChange:this.computed.willChange;this.hasWillChange=e!==""&&e!=="auto",this.stores.element.set(t)}}class oi{constructor(){Object.seal(this)}#t=new DOMRect;#e=[it.create(),it.create(),it.create(),it.create()];#n=q.create();#o=[q.create(),q.create()];get boundingRect(){return this.#t}get corners(){return this.#e}get css(){return`matrix3d(${this.mat4.join(",")})`}get mat4(){return this.#n}get originTranslations(){return this.#o}}const dn=[1,1,1],Lt=[0,0,0],us=q.create(),te=q.create(),Yc=it.create();class Zc{#t=[];constructor(){this._data={}}get isActive(){return this.#t.length>0}get rotateX(){return this._data.rotateX}get rotateY(){return this._data.rotateY}get rotateZ(){return this._data.rotateZ}get scale(){return this._data.scale}get translateX(){return this._data.translateX}get translateY(){return this._data.translateY}get translateZ(){return this._data.translateZ}set rotateX(t){if(Number.isFinite(t))this._data.rotateX===void 0&&this.#t.push("rotateX"),this._data.rotateX=t;else{if(this._data.rotateX!==void 0){const e=this.#t.findIndex(n=>n==="rotateX");e>=0&&this.#t.splice(e,1)}delete this._data.rotateX}}set rotateY(t){if(Number.isFinite(t))this._data.rotateY===void 0&&this.#t.push("rotateY"),this._data.rotateY=t;else{if(this._data.rotateY!==void 0){const e=this.#t.findIndex(n=>n==="rotateY");e>=0&&this.#t.splice(e,1)}delete this._data.rotateY}}set rotateZ(t){if(Number.isFinite(t))this._data.rotateZ===void 0&&this.#t.push("rotateZ"),this._data.rotateZ=t;else{if(this._data.rotateZ!==void 0){const e=this.#t.findIndex(n=>n==="rotateZ");e>=0&&this.#t.splice(e,1)}delete this._data.rotateZ}}set scale(t){if(Number.isFinite(t))this._data.scale===void 0&&this.#t.push("scale"),this._data.scale=t;else{if(this._data.scale!==void 0){const e=this.#t.findIndex(n=>n==="scale");e>=0&&this.#t.splice(e,1)}delete this._data.scale}}set translateX(t){if(Number.isFinite(t))this._data.translateX===void 0&&this.#t.push("translateX"),this._data.translateX=t;else{if(this._data.translateX!==void 0){const e=this.#t.findIndex(n=>n==="translateX");e>=0&&this.#t.splice(e,1)}delete this._data.translateX}}set translateY(t){if(Number.isFinite(t))this._data.translateY===void 0&&this.#t.push("translateY"),this._data.translateY=t;else{if(this._data.translateY!==void 0){const e=this.#t.findIndex(n=>n==="translateY");e>=0&&this.#t.splice(e,1)}delete this._data.translateY}}set translateZ(t){if(Number.isFinite(t))this._data.translateZ===void 0&&this.#t.push("translateZ"),this._data.translateZ=t;else{if(this._data.translateZ!==void 0){const e=this.#t.findIndex(n=>n==="translateZ");e>=0&&this.#t.splice(e,1)}delete this._data.translateZ}}getCSS(t=this._data){return`matrix3d(${this.getMat4(t,us).join(",")})`}getCSSOrtho(t=this._data){return`matrix3d(${this.getMat4Ortho(t,us).join(",")})`}getData(t,e=new oi,n={}){const i=n.width??0,r=n.height??0,s=n.offsetTop??n.marginTop??0,a=n.offsetLeft??n.offsetLeft??0;t.top+=s,t.left+=a;const l=Number.isFinite(t.width)?t.width:i,c=Number.isFinite(t.height)?t.height:r,u=e.corners;if(this.hasTransform(t)){u[0][0]=u[0][1]=u[0][2]=0,u[1][0]=l,u[1][1]=u[1][2]=0,u[2][0]=l,u[2][1]=c,u[2][2]=0,u[3][0]=0,u[3][1]=c,u[3][2]=0;const g=this.getMat4(t,e.mat4),b=Gc(t.transformOrigin,l,c,e.originTranslations);jc===t.transformOrigin?(it.transformMat4(u[0],u[0],g),it.transformMat4(u[1],u[1],g),it.transformMat4(u[2],u[2],g),it.transformMat4(u[3],u[3],g)):(it.transformMat4(u[0],u[0],b[0]),it.transformMat4(u[0],u[0],g),it.transformMat4(u[0],u[0],b[1]),it.transformMat4(u[1],u[1],b[0]),it.transformMat4(u[1],u[1],g),it.transformMat4(u[1],u[1],b[1]),it.transformMat4(u[2],u[2],b[0]),it.transformMat4(u[2],u[2],g),it.transformMat4(u[2],u[2],b[1]),it.transformMat4(u[3],u[3],b[0]),it.transformMat4(u[3],u[3],g),it.transformMat4(u[3],u[3],b[1])),u[0][0]=t.left+u[0][0],u[0][1]=t.top+u[0][1],u[1][0]=t.left+u[1][0],u[1][1]=t.top+u[1][1],u[2][0]=t.left+u[2][0],u[2][1]=t.top+u[2][1],u[3][0]=t.left+u[3][0],u[3][1]=t.top+u[3][1]}else u[0][0]=t.left,u[0][1]=t.top,u[1][0]=t.left+l,u[1][1]=t.top,u[2][0]=t.left+l,u[2][1]=t.top+c,u[3][0]=t.left,u[3][1]=t.top+c,q.identity(e.mat4);let h=Number.MIN_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER;for(let g=4;--g>=0;)u[g][0]>h&&(h=u[g][0]),u[g][0]<p&&(p=u[g][0]),u[g][1]>d&&(d=u[g][1]),u[g][1]<m&&(m=u[g][1]);const f=e.boundingRect;return f.x=p,f.y=m,f.width=h-p,f.height=d-m,t.top-=s,t.left-=a,e}getMat4(t=this._data,e=q.create()){const n=q.identity(e);let i=0;const r=this.#t;for(let s=0;s<r.length;s++){const a=r[s];switch(a){case"rotateX":i|=Ae.rotateX,q.multiply(n,n,q.fromXRotation(te,Be(t[a])));break;case"rotateY":i|=Ae.rotateY,q.multiply(n,n,q.fromYRotation(te,Be(t[a])));break;case"rotateZ":i|=Ae.rotateZ,q.multiply(n,n,q.fromZRotation(te,Be(t[a])));break;case"scale":i|=Ae.scale,dn[0]=dn[1]=t[a],q.multiply(n,n,q.fromScaling(te,dn));break;case"translateX":i|=Ae.translateX,Lt[0]=t.translateX,Lt[1]=0,Lt[2]=0,q.multiply(n,n,q.fromTranslation(te,Lt));break;case"translateY":i|=Ae.translateY,Lt[0]=0,Lt[1]=t.translateY,Lt[2]=0,q.multiply(n,n,q.fromTranslation(te,Lt));break;case"translateZ":i|=Ae.translateZ,Lt[0]=0,Lt[1]=0,Lt[2]=t.translateZ,q.multiply(n,n,q.fromTranslation(te,Lt));break}}if(t!==this._data)for(let s=0;s<An.length;s++){const a=An[s];if(!(t[a]===null||(i&Ae[a])>0))switch(a){case"rotateX":q.multiply(n,n,q.fromXRotation(te,Be(t[a])));break;case"rotateY":q.multiply(n,n,q.fromYRotation(te,Be(t[a])));break;case"rotateZ":q.multiply(n,n,q.fromZRotation(te,Be(t[a])));break;case"scale":dn[0]=dn[1]=t[a],q.multiply(n,n,q.fromScaling(te,dn));break;case"translateX":Lt[0]=t[a],Lt[1]=0,Lt[2]=0,q.multiply(n,n,q.fromTranslation(te,Lt));break;case"translateY":Lt[0]=0,Lt[1]=t[a],Lt[2]=0,q.multiply(n,n,q.fromTranslation(te,Lt));break;case"translateZ":Lt[0]=0,Lt[1]=0,Lt[2]=t[a],q.multiply(n,n,q.fromTranslation(te,Lt));break}}return n}getMat4Ortho(t=this._data,e=q.create()){const n=q.identity(e);if(Lt[0]=(t.left??0)+(t.translateX??0),Lt[1]=(t.top??0)+(t.translateY??0),Lt[2]=t.translateZ??0,q.multiply(n,n,q.fromTranslation(te,Lt)),t.scale!==null&&(dn[0]=dn[1]=t.scale,q.multiply(n,n,q.fromScaling(te,dn))),t.rotateX===null&&t.rotateY===null&&t.rotateZ===null)return n;let i=0;const r=this.#t;for(let s=0;s<r.length;s++){const a=r[s];switch(a){case"rotateX":i|=Ae.rotateX,q.multiply(n,n,q.fromXRotation(te,Be(t[a])));break;case"rotateY":i|=Ae.rotateY,q.multiply(n,n,q.fromYRotation(te,Be(t[a])));break;case"rotateZ":i|=Ae.rotateZ,q.multiply(n,n,q.fromZRotation(te,Be(t[a])));break}}if(t!==this._data)for(let s=0;s<An.length;s++){const a=An[s];if(!(t[a]===null||(i&Ae[a])>0))switch(a){case"rotateX":q.multiply(n,n,q.fromXRotation(te,Be(t[a])));break;case"rotateY":q.multiply(n,n,q.fromYRotation(te,Be(t[a])));break;case"rotateZ":q.multiply(n,n,q.fromZRotation(te,Be(t[a])));break}}return n}hasTransform(t){for(const e of An)if(Number.isFinite(t[e]))return!0;return!1}reset(t){for(const e in t)if(An.includes(e))if(Number.isFinite(t[e]))this._data[e]=t[e];else{const n=this.#t.findIndex(i=>i===e);n>=0&&this.#t.splice(n,1),delete this._data[e]}}}function Gc(o,t,e,n){const i=Yc;switch(o){case"top left":i[0]=i[1]=0,q.fromTranslation(n[0],i),q.fromTranslation(n[1],i);break;case"top center":i[0]=-t*.5,i[1]=0,q.fromTranslation(n[0],i),i[0]=t*.5,q.fromTranslation(n[1],i);break;case"top right":i[0]=-t,i[1]=0,q.fromTranslation(n[0],i),i[0]=t,q.fromTranslation(n[1],i);break;case"center left":i[0]=0,i[1]=-e*.5,q.fromTranslation(n[0],i),i[1]=e*.5,q.fromTranslation(n[1],i);break;case null:case"center":i[0]=-t*.5,i[1]=-e*.5,q.fromTranslation(n[0],i),i[0]=t*.5,i[1]=e*.5,q.fromTranslation(n[1],i);break;case"center right":i[0]=-t,i[1]=-e*.5,q.fromTranslation(n[0],i),i[0]=t,i[1]=e*.5,q.fromTranslation(n[1],i);break;case"bottom left":i[0]=0,i[1]=-e,q.fromTranslation(n[0],i),i[1]=e,q.fromTranslation(n[1],i);break;case"bottom center":i[0]=-t*.5,i[1]=-e,q.fromTranslation(n[0],i),i[0]=t*.5,i[1]=e,q.fromTranslation(n[1],i);break;case"bottom right":i[0]=-t,i[1]=-e,q.fromTranslation(n[0],i),i[0]=t,i[1]=e,q.fromTranslation(n[1],i);break;default:q.identity(n[0]),q.identity(n[1]);break}return n}class Vc{#t=!0;#e;#n=new Map;constructor(){return this.#e=[],Object.seal(this),[this,this.#e]}get enabled(){return this.#t}get length(){return this.#e.length}set enabled(t){if(typeof t!="boolean")throw new TypeError("'enabled' is not a boolean.");this.#t=t}*[Symbol.iterator](){if(this.#e.length!==0)for(const t of this.#e)yield{...t}}add(...t){for(const e of t){const n=typeof e;if(n!=="function"&&n!=="object"||e===null)throw new TypeError("AdapterValidator error: 'validator' is not a function or object.");let i,r;switch(n){case"function":i={id:void 0,validator:e,weight:1},r=e.subscribe;break;case"object":if(typeof e.validator!="function")throw new TypeError("AdapterValidator error: 'validator' attribute is not a function.");if(e.weight!==void 0&&typeof e.weight!="number"||e.weight<0||e.weight>1)throw new TypeError("AdapterValidator error: 'weight' attribute is not a number between '0 - 1' inclusive.");i={id:e.id!==void 0?e.id:void 0,validator:e.validator.bind(e),weight:e.weight||1,instance:e},r=e.validator.subscribe??e.subscribe;break}const s=this.#e.findIndex(a=>i.weight<a.weight);if(s>=0?this.#e.splice(s,0,i):this.#e.push(i),typeof r=="function"){const a=r();if(typeof a!="function")throw new TypeError("AdapterValidator error: Filter has subscribe function, but no unsubscribe function is returned.");if(this.#n.has(i.validator))throw new Error("AdapterValidator error: Filter added already has an unsubscribe function registered.");this.#n.set(i.validator,a)}}}clear(){this.#e.length=0;for(const t of this.#n.values())t();this.#n.clear()}remove(...t){if(this.#e.length!==0)for(const e of t){const n=typeof e=="function"?e:V(e)?e.validator:void 0;if(n){for(let i=this.#e.length;--i>=0;)if(this.#e[i].validator===n){this.#e.splice(i,1);let r;typeof(r=this.#n.get(n))=="function"&&(r(),this.#n.delete(n))}}}}removeBy(t){if(this.#e.length!==0){if(typeof t!="function")throw new TypeError("AdapterValidator error: 'callback' is not a function.");this.#e=this.#e.filter(e=>{const n=t.call(t,{...e});if(n){let i;typeof(i=this.#n.get(e.validator))=="function"&&(i(),this.#n.delete(e.validator))}return!n})}}removeById(...t){this.#e.length!==0&&(this.#e=this.#e.filter(e=>{let n=!1;for(const i of t)n|=e.id===i;if(n){let i;typeof(i=this.#n.get(e.validator))=="function"&&(i(),this.#n.delete(e.validator))}return!n}))}}class hs{#t;#e;#n;#o;#i;#r;constructor({constrain:t=!0,element:e,enabled:n=!0,lock:i=!1,width:r,height:s}={}){this.element=e,this.constrain=t,this.enabled=n,this.width=r,this.height=s,this.#i=typeof i=="boolean"?i:!1}get constrain(){return this.#t}get element(){return this.#e}get enabled(){return this.#n}get height(){return this.#o}get width(){return this.#r}set constrain(t){if(!this.#i){if(typeof t!="boolean")throw new TypeError("'constrain' is not a boolean.");this.#t=t}}set element(t){if(!this.#i)if(t==null||t instanceof HTMLElement)this.#e=t;else throw new TypeError("'element' is not a HTMLElement, undefined, or null.")}set enabled(t){if(!this.#i){if(typeof t!="boolean")throw new TypeError("'enabled' is not a boolean.");this.#n=t}}set height(t){if(!this.#i)if(t===void 0||Number.isFinite(t))this.#o=t;else throw new TypeError("'height' is not a finite number or undefined.")}set width(t){if(!this.#i)if(t===void 0||Number.isFinite(t))this.#r=t;else throw new TypeError("'width' is not a finite number or undefined.")}setDimension(t,e){if(!this.#i){if(t===void 0||Number.isFinite(t))this.#r=t;else throw new TypeError("'width' is not a finite number or undefined.");if(e===void 0||Number.isFinite(e))this.#o=e;else throw new TypeError("'height' is not a finite number or undefined.")}}validator(t){if(!this.#n)return t.position;const e=this.#r??this.#e?.offsetWidth??globalThis.innerWidth,n=this.#o??this.#e?.offsetHeight??globalThis.innerHeight;if(typeof t.position.width=="number"){const s=t.maxWidth??(this.#t?e:Number.MAX_SAFE_INTEGER);t.position.width=t.width=Un(t.position.width,t.minWidth,s),t.width+t.position.left+t.marginLeft>e&&(t.position.left=e-t.width-t.marginLeft)}if(typeof t.position.height=="number"){const s=t.maxHeight??(this.#t?n:Number.MAX_SAFE_INTEGER);t.position.height=t.height=Un(t.position.height,t.minHeight,s),t.height+t.position.top+t.marginTop>n&&(t.position.top=n-t.height-t.marginTop)}const i=Math.max(e-t.width-t.marginLeft,0);t.position.left=Math.round(Un(t.position.left,0,i));const r=Math.max(n-t.height-t.marginTop,0);return t.position.top=Math.round(Un(t.position.top,0,r)),t.position}}const Uc=new oi;class ds{#t;#e;#n;#o;#i;#r;constructor({constrain:t=!0,element:e,enabled:n=!0,lock:i=!1,width:r,height:s}={}){this.element=e,this.constrain=t,this.enabled=n,this.width=r,this.height=s,this.#i=typeof i=="boolean"?i:!1}get constrain(){return this.#t}get element(){return this.#e}get enabled(){return this.#n}get height(){return this.#o}get width(){return this.#r}set constrain(t){if(!this.#i){if(typeof t!="boolean")throw new TypeError("'constrain' is not a boolean.");this.#t=t}}set element(t){if(!this.#i)if(t==null||t instanceof HTMLElement)this.#e=t;else throw new TypeError("'element' is not a HTMLElement, undefined, or null.")}set enabled(t){if(!this.#i){if(typeof t!="boolean")throw new TypeError("'enabled' is not a boolean.");this.#n=t}}set height(t){if(!this.#i)if(t===void 0||Number.isFinite(t))this.#o=t;else throw new TypeError("'height' is not a finite number or undefined.")}set width(t){if(!this.#i)if(t===void 0||Number.isFinite(t))this.#r=t;else throw new TypeError("'width' is not a finite number or undefined.")}setDimension(t,e){if(!this.#i){if(t===void 0||Number.isFinite(t))this.#r=t;else throw new TypeError("'width' is not a finite number or undefined.");if(e===void 0||Number.isFinite(e))this.#o=e;else throw new TypeError("'height' is not a finite number or undefined.")}}validator(t){if(!this.#n)return t.position;const e=this.#r??this.#e?.offsetWidth??globalThis.innerWidth,n=this.#o??this.#e?.offsetHeight??globalThis.innerHeight;if(typeof t.position.width=="number"){const a=t.maxWidth??(this.#t?e:Number.MAX_SAFE_INTEGER);t.position.width=Un(t.width,t.minWidth,a)}if(typeof t.position.height=="number"){const a=t.maxHeight??(this.#t?n:Number.MAX_SAFE_INTEGER);t.position.height=Un(t.height,t.minHeight,a)}const i=t.transforms.getData(t.position,Uc,t),r=i.boundingRect.x,s=i.boundingRect.y;return i.boundingRect.bottom+t.marginTop>n&&(i.boundingRect.y+=n-i.boundingRect.bottom-t.marginTop),i.boundingRect.right+t.marginLeft>e&&(i.boundingRect.x+=e-i.boundingRect.right-t.marginLeft),i.boundingRect.top-t.marginTop<0&&(i.boundingRect.y+=Math.abs(i.boundingRect.top-t.marginTop)),i.boundingRect.left-t.marginLeft<0&&(i.boundingRect.x+=Math.abs(i.boundingRect.left-t.marginLeft)),t.position.left-=r-i.boundingRect.x,t.position.top-=s-i.boundingRect.y,t.position}}class Jc{constructor(){this.data=void 0,this.dataSubscribers=new tr,this.dimensionData={width:0,height:0},this.changeSet=void 0,this.options=void 0,this.queued=!1,this.styleCache=void 0,this.transforms=void 0,this.transformData=new oi,this.subscriptions=void 0,this.storeDimension=cn(this.dimensionData),this.storeTransform=cn(this.transformData,()=>(this.options.transformSubscribed=!0,()=>this.options.transformSubscribed=!1)),this.queued=!1,Object.seal(this.dimensionData)}}class er{static list=[];static listCntr=0;static updatePromise;static get promise(){return this.updatePromise}static add(t,e){if(this.listCntr<this.list.length){const n=this.list[this.listCntr];n[0]=t,n[1]=e}else this.list.push([t,e]);return this.listCntr++,e.queued=!0,this.updatePromise||(this.updatePromise=this.wait()),this.updatePromise}static async wait(){const t=await zc();this.updatePromise=void 0;for(let e=this.listCntr;--e>=0;){const n=this.list[e],i=n[0],r=n[1];n[0]=void 0,n[1]=void 0,r.queued=!1,i.isConnected&&(r.options.ortho?ps(i,r):fs(i,r),(r.options.calculateTransform||r.options.transformSubscribed)&&ms(i,r),this.updateSubscribers(r))}return this.listCntr=0,t}static immediate(t,e){t.isConnected&&(e.options.ortho?ps(t,e):fs(t,e),(e.options.calculateTransform||e.options.transformSubscribed)&&ms(t,e),this.updateSubscribers(e))}static updateSubscribers(t){const e=t.data,n=t.changeSet;if(!n.hasChange())return;const i=t.dataSubscribers.copy(e),r=t.subscriptions;if(r.length>0)for(let s=0;s<r.length;s++)r[s](i);(n.width||n.height)&&(t.dimensionData.width=e.width,t.dimensionData.height=e.height,t.storeDimension.set(t.dimensionData)),n.set(!1)}}function fs(o,t){const e=t.changeSet,n=t.data;e.left&&(o.style.left=`${n.left}px`),e.top&&(o.style.top=`${n.top}px`),e.zIndex&&(o.style.zIndex=typeof n.zIndex=="number"?`${n.zIndex}`:null),e.width&&(o.style.width=typeof n.width=="number"?`${n.width}px`:n.width),e.height&&(o.style.height=typeof n.height=="number"?`${n.height}px`:n.height),e.transformOrigin&&(o.style.transformOrigin=n.transformOrigin),e.transform&&(o.style.transform=t.transforms.isActive?t.transforms.getCSS():null)}function ps(o,t){const e=t.changeSet,n=t.data;e.zIndex&&(o.style.zIndex=typeof n.zIndex=="number"?`${n.zIndex}`:null),e.width&&(o.style.width=typeof n.width=="number"?`${n.width}px`:n.width),e.height&&(o.style.height=typeof n.height=="number"?`${n.height}px`:n.height),e.transformOrigin&&(o.style.transformOrigin=n.transformOrigin),(e.left||e.top||e.transform)&&(o.style.transform=t.transforms.getCSSOrtho(n))}function ms(o,t){yo.height=t.data.height!=="auto"?t.data.height:t.styleCache.offsetHeight,yo.width=t.data.width!=="auto"?t.data.width:t.styleCache.offsetWidth,yo.marginLeft=t.styleCache.marginLeft,yo.marginTop=t.styleCache.marginTop,t.transforms.getData(t.data,t.transformData,yo),t.storeTransform.set(t.transformData)}const yo={height:void 0,width:void 0,marginLeft:void 0,marginTop:void 0};class ao{static#t={browserCentered:new cs({lock:!0}),Centered:cs};static#e={basicWindow:new hs({lock:!0}),BasicBounds:hs,transformWindow:new ds({lock:!0}),TransformBounds:ds};#n=new tr;#o=new ls(this,this.#n);#i=!0;#r={calculateTransform:!1,initialHelper:void 0,ortho:!0,transformSubscribed:!1};#a;#h=new Bc;#s;#c;#l=[];#u=new Zc;#d;#m;#f;#g;#p=new Xc(this,this.#n,this.#u);static get Animate(){return Wc}static get Initial(){return this.#t}static get TransformData(){return oi}static get Validators(){return this.#e}static duplicate(t,e){if(!(t instanceof ao))throw new TypeError("'position' is not an instance of Position.");const n=new ao(e);return n.#r=Object.assign({},t.#r,e),n.#f.add(...t.#f),n.set(t.#n),n}constructor(t,e){Kr(t)?e=t:this.#a=t;const n=this.#n,i=this.#u;this.#c=new qc;const r=new Jc;if(r.changeSet=this.#h,r.data=this.#n,r.options=this.#r,r.styleCache=this.#c,r.subscriptions=this.#l,r.transforms=this.#u,this.#d=r,V(e)&&(typeof e.calculateTransform=="boolean"&&(this.#r.calculateTransform=e.calculateTransform),typeof e.ortho=="boolean"&&(this.#r.ortho=e.ortho),(Number.isFinite(e.height)||e.height==="auto"||e.height==="inherit"||e.height===null)&&(n.height=r.dimensionData.height=typeof e.height=="number"?Math.round(e.height):e.height),(Number.isFinite(e.left)||e.left===null)&&(n.left=typeof e.left=="number"?Math.round(e.left):e.left),(Number.isFinite(e.maxHeight)||e.maxHeight===null)&&(n.maxHeight=typeof e.maxHeight=="number"?Math.round(e.maxHeight):e.maxHeight),(Number.isFinite(e.maxWidth)||e.maxWidth===null)&&(n.maxWidth=typeof e.maxWidth=="number"?Math.round(e.maxWidth):e.maxWidth),(Number.isFinite(e.minHeight)||e.minHeight===null)&&(n.minHeight=typeof e.minHeight=="number"?Math.round(e.minHeight):e.minHeight),(Number.isFinite(e.minWidth)||e.minWidth===null)&&(n.minWidth=typeof e.minWidth=="number"?Math.round(e.minWidth):e.minWidth),(Number.isFinite(e.rotateX)||e.rotateX===null)&&(i.rotateX=n.rotateX=e.rotateX),(Number.isFinite(e.rotateY)||e.rotateY===null)&&(i.rotateY=n.rotateY=e.rotateY),(Number.isFinite(e.rotateZ)||e.rotateZ===null)&&(i.rotateZ=n.rotateZ=e.rotateZ),(Number.isFinite(e.scale)||e.scale===null)&&(i.scale=n.scale=e.scale),(Number.isFinite(e.top)||e.top===null)&&(n.top=typeof e.top=="number"?Math.round(e.top):e.top),(typeof e.transformOrigin=="string"||e.transformOrigin===null)&&(n.transformOrigin=Jn.includes(e.transformOrigin)?e.transformOrigin:null),(Number.isFinite(e.translateX)||e.translateX===null)&&(i.translateX=n.translateX=e.translateX),(Number.isFinite(e.translateY)||e.translateY===null)&&(i.translateY=n.translateY=e.translateY),(Number.isFinite(e.translateZ)||e.translateZ===null)&&(i.translateZ=n.translateZ=e.translateZ),(Number.isFinite(e.width)||e.width==="auto"||e.width==="inherit"||e.width===null)&&(n.width=r.dimensionData.width=typeof e.width=="number"?Math.round(e.width):e.width),(Number.isFinite(e.zIndex)||e.zIndex===null)&&(n.zIndex=typeof e.zIndex=="number"?Math.round(e.zIndex):e.zIndex)),this.#s={height:Et(this,"height"),left:Et(this,"left"),rotateX:Et(this,"rotateX"),rotateY:Et(this,"rotateY"),rotateZ:Et(this,"rotateZ"),scale:Et(this,"scale"),top:Et(this,"top"),transformOrigin:Et(this,"transformOrigin"),translateX:Et(this,"translateX"),translateY:Et(this,"translateY"),translateZ:Et(this,"translateZ"),width:Et(this,"width"),zIndex:Et(this,"zIndex"),maxHeight:Et(this,"maxHeight"),maxWidth:Et(this,"maxWidth"),minHeight:Et(this,"minHeight"),minWidth:Et(this,"minWidth"),dimension:{subscribe:r.storeDimension.subscribe},element:{subscribe:this.#c.stores.element.subscribe},resizeContentHeight:{subscribe:this.#c.stores.resizeContentHeight.subscribe},resizeContentWidth:{subscribe:this.#c.stores.resizeContentWidth.subscribe},resizeOffsetHeight:{subscribe:this.#c.stores.resizeOffsetHeight.subscribe},resizeOffsetWidth:{subscribe:this.#c.stores.resizeOffsetWidth.subscribe},transform:{subscribe:r.storeTransform.subscribe},resizeObserved:this.#c.stores.resizeObserved},Qo(this.#s.resizeObserved,s=>{const a=this.#a;(a instanceof HTMLElement?a:a?.elementTarget)instanceof HTMLElement&&Number.isFinite(s?.offsetWidth)&&Number.isFinite(s?.offsetHeight)&&this.set(n)}),this.#s.transformOrigin.values=Jn,[this.#f,this.#g]=new Vc,e?.initial||e?.positionInitial){const s=e.initial??e.positionInitial;if(typeof s?.getLeft!="function"||typeof s?.getTop!="function")throw new Error("'options.initial' position helper does not contain 'getLeft' and / or 'getTop' functions.");this.#r.initialHelper=e.initial}e?.validator&&(zt(e?.validator)?this.validators.add(...e.validator):this.validators.add(e.validator))}get animate(){return this.#o}get dimension(){return this.#d.dimensionData}get enabled(){return this.#i}get element(){return this.#c.el}get elementUpdated(){return this.#m}get parent(){return this.#a}get state(){return this.#p}get stores(){return this.#s}get transform(){return this.#d.transformData}get validators(){return this.#f}set enabled(t){if(typeof t!="boolean")throw new TypeError("'enabled' is not a boolean.");this.#i=t}set parent(t){if(t!==void 0&&!(t instanceof HTMLElement)&&!V(t))throw new TypeError("'parent' is not an HTMLElement, object, or undefined.");this.#a=t,this.#p.remove({name:"#defaultData"}),this.#c.reset(),t&&this.set(this.#n)}get height(){return this.#n.height}get left(){return this.#n.left}get maxHeight(){return this.#n.maxHeight}get maxWidth(){return this.#n.maxWidth}get minHeight(){return this.#n.minHeight}get minWidth(){return this.#n.minWidth}get rotateX(){return this.#n.rotateX}get rotateY(){return this.#n.rotateY}get rotateZ(){return this.#n.rotateZ}get rotation(){return this.#n.rotateZ}get scale(){return this.#n.scale}get top(){return this.#n.top}get transformOrigin(){return this.#n.transformOrigin}get translateX(){return this.#n.translateX}get translateY(){return this.#n.translateY}get translateZ(){return this.#n.translateZ}get width(){return this.#n.width}get zIndex(){return this.#n.zIndex}set height(t){this.#s.height.set(t)}set left(t){this.#s.left.set(t)}set maxHeight(t){this.#s.maxHeight.set(t)}set maxWidth(t){this.#s.maxWidth.set(t)}set minHeight(t){this.#s.minHeight.set(t)}set minWidth(t){this.#s.minWidth.set(t)}set rotateX(t){this.#s.rotateX.set(t)}set rotateY(t){this.#s.rotateY.set(t)}set rotateZ(t){this.#s.rotateZ.set(t)}set rotation(t){this.#s.rotateZ.set(t)}set scale(t){this.#s.scale.set(t)}set top(t){this.#s.top.set(t)}set transformOrigin(t){Jn.includes(t)&&this.#s.transformOrigin.set(t)}set translateX(t){this.#s.translateX.set(t)}set translateY(t){this.#s.translateY.set(t)}set translateZ(t){this.#s.translateZ.set(t)}set width(t){this.#s.width.set(t)}set zIndex(t){this.#s.zIndex.set(t)}get(t={},e){const n=e?.keys,i=e?.exclude,r=e?.numeric??!1;if(zt(n)){if(r)for(const s of n)t[s]=this[s]??as[s];else for(const s of n)t[s]=this[s];if(zt(i))for(const s of i)delete t[s];return t}else{const s=Object.assign(t,this.#n);if(zt(i))for(const a of i)delete s[a];return r&&vo(s),s}}toJSON(){return Object.assign({},this.#n)}set(t={}){if(!V(t))throw new TypeError("Position - set error: 'position' is not an object.");const e=this.#a;if(!this.#i)return this;if(e!==void 0&&typeof e?.options?.positionable=="boolean"&&!e?.options?.positionable)return this;const n=t.immediateElementUpdate===!0,i=this.#n,r=this.#u,s=e instanceof HTMLElement?e:e?.elementTarget,a=s instanceof HTMLElement&&s.isConnected?s:void 0,l=this.#h,c=this.#c;if(a&&(c.hasData(a)||(c.update(a),c.hasWillChange,l.set(!0),this.#d.queued=!1),Qn(t,this),t=this.#b(t,e,a,c),t===null))return this;if(Number.isFinite(t.left)&&(t.left=Math.round(t.left),i.left!==t.left&&(i.left=t.left,l.left=!0)),Number.isFinite(t.top)&&(t.top=Math.round(t.top),i.top!==t.top&&(i.top=t.top,l.top=!0)),(Number.isFinite(t.maxHeight)||t.maxHeight===null)&&(t.maxHeight=typeof t.maxHeight=="number"?Math.round(t.maxHeight):null,i.maxHeight!==t.maxHeight&&(i.maxHeight=t.maxHeight,l.maxHeight=!0)),(Number.isFinite(t.maxWidth)||t.maxWidth===null)&&(t.maxWidth=typeof t.maxWidth=="number"?Math.round(t.maxWidth):null,i.maxWidth!==t.maxWidth&&(i.maxWidth=t.maxWidth,l.maxWidth=!0)),(Number.isFinite(t.minHeight)||t.minHeight===null)&&(t.minHeight=typeof t.minHeight=="number"?Math.round(t.minHeight):null,i.minHeight!==t.minHeight&&(i.minHeight=t.minHeight,l.minHeight=!0)),(Number.isFinite(t.minWidth)||t.minWidth===null)&&(t.minWidth=typeof t.minWidth=="number"?Math.round(t.minWidth):null,i.minWidth!==t.minWidth&&(i.minWidth=t.minWidth,l.minWidth=!0)),(Number.isFinite(t.rotateX)||t.rotateX===null)&&i.rotateX!==t.rotateX&&(i.rotateX=r.rotateX=t.rotateX,l.transform=!0),(Number.isFinite(t.rotateY)||t.rotateY===null)&&i.rotateY!==t.rotateY&&(i.rotateY=r.rotateY=t.rotateY,l.transform=!0),(Number.isFinite(t.rotateZ)||t.rotateZ===null)&&i.rotateZ!==t.rotateZ&&(i.rotateZ=r.rotateZ=t.rotateZ,l.transform=!0),(Number.isFinite(t.scale)||t.scale===null)&&(t.scale=typeof t.scale=="number"?Math.max(0,Math.min(t.scale,1e3)):null,i.scale!==t.scale&&(i.scale=r.scale=t.scale,l.transform=!0)),(typeof t.transformOrigin=="string"&&Jn.includes(t.transformOrigin)||t.transformOrigin===null)&&i.transformOrigin!==t.transformOrigin&&(i.transformOrigin=t.transformOrigin,l.transformOrigin=!0),(Number.isFinite(t.translateX)||t.translateX===null)&&i.translateX!==t.translateX&&(i.translateX=r.translateX=t.translateX,l.transform=!0),(Number.isFinite(t.translateY)||t.translateY===null)&&i.translateY!==t.translateY&&(i.translateY=r.translateY=t.translateY,l.transform=!0),(Number.isFinite(t.translateZ)||t.translateZ===null)&&i.translateZ!==t.translateZ&&(i.translateZ=r.translateZ=t.translateZ,l.transform=!0),Number.isFinite(t.zIndex)&&(t.zIndex=Math.round(t.zIndex),i.zIndex!==t.zIndex&&(i.zIndex=t.zIndex,l.zIndex=!0)),(Number.isFinite(t.width)||t.width==="auto"||t.width==="inherit"||t.width===null)&&(t.width=typeof t.width=="number"?Math.round(t.width):t.width,i.width!==t.width&&(i.width=t.width,l.width=!0)),(Number.isFinite(t.height)||t.height==="auto"||t.height==="inherit"||t.height===null)&&(t.height=typeof t.height=="number"?Math.round(t.height):t.height,i.height!==t.height&&(i.height=t.height,l.height=!0)),a){const u=this.#p.getDefault();V(u)||this.#p.save({name:"#defaultData",...Object.assign({},i)}),n?(er.immediate(a,this.#d),this.#m=Promise.resolve(performance.now())):this.#d.queued||(this.#m=er.add(a,this.#d))}else er.updateSubscribers(this.#d);return this}subscribe(t){return this.#l.push(t),t(Object.assign({},this.#n)),()=>{const e=this.#l.findIndex(n=>n===t);e>=0&&this.#l.splice(e,1)}}#b({left:t,top:e,maxWidth:n,maxHeight:i,minWidth:r,minHeight:s,width:a,height:l,rotateX:c,rotateY:u,rotateZ:h,scale:d,transformOrigin:p,translateX:m,translateY:f,translateZ:g,zIndex:b,rotation:w,...T}={},S,O,M){let y=Qc.copy(this.#n);if(O.style.width===""||a!==void 0)if(a==="auto"||y.width==="auto"&&a!==null)y.width="auto",a=M.offsetWidth;else if(a==="inherit"||y.width==="inherit"&&a!==null)y.width="inherit",a=M.offsetWidth;else{const C=Number.isFinite(a)?a:y.width;y.width=a=Number.isFinite(C)?Math.round(C):M.offsetWidth}else a=Number.isFinite(y.width)?y.width:M.offsetWidth;if(O.style.height===""||l!==void 0)if(l==="auto"||y.height==="auto"&&l!==null)y.height="auto",l=M.offsetHeight;else if(l==="inherit"||y.height==="inherit"&&l!==null)y.height="inherit",l=M.offsetHeight;else{const C=Number.isFinite(l)?l:y.height;y.height=l=Number.isFinite(C)?Math.round(C):M.offsetHeight}else l=Number.isFinite(y.height)?y.height:M.offsetHeight;Number.isFinite(t)?y.left=t:Number.isFinite(y.left)||(y.left=typeof this.#r.initialHelper?.getLeft=="function"?this.#r.initialHelper.getLeft(a):0),Number.isFinite(e)?y.top=e:Number.isFinite(y.top)||(y.top=typeof this.#r.initialHelper?.getTop=="function"?this.#r.initialHelper.getTop(l):0),(Number.isFinite(i)||i===null)&&(y.maxHeight=Number.isFinite(i)?Math.round(i):null),(Number.isFinite(n)||n===null)&&(y.maxWidth=Number.isFinite(n)?Math.round(n):null),(Number.isFinite(s)||s===null)&&(y.minHeight=Number.isFinite(s)?Math.round(s):null),(Number.isFinite(r)||r===null)&&(y.minWidth=Number.isFinite(r)?Math.round(r):null),(Number.isFinite(c)||c===null)&&(y.rotateX=c),(Number.isFinite(u)||u===null)&&(y.rotateY=u),h!==y.rotateZ&&(Number.isFinite(h)||h===null)?y.rotateZ=h:w!==y.rotateZ&&(Number.isFinite(w)||w===null)&&(y.rotateZ=w),(Number.isFinite(m)||m===null)&&(y.translateX=m),(Number.isFinite(f)||f===null)&&(y.translateY=f),(Number.isFinite(g)||g===null)&&(y.translateZ=g),(Number.isFinite(d)||d===null)&&(y.scale=typeof d=="number"?Math.max(0,Math.min(d,1e3)):null),(typeof p=="string"||p===null)&&(y.transformOrigin=Jn.includes(p)?p:null),(Number.isFinite(b)||b===null)&&(y.zIndex=typeof b=="number"?Math.round(b):b);const N=this.#g;if(this.#f.enabled&&N.length){ye.parent=S,ye.el=O,ye.computed=M.computed,ye.transforms=this.#u,ye.height=l,ye.width=a,ye.marginLeft=M.marginLeft,ye.marginTop=M.marginTop,ye.maxHeight=M.maxHeight??y.maxHeight,ye.maxWidth=M.maxWidth??y.maxWidth;const C=S?.reactive?.minimized??!1;ye.minHeight=C?y.minHeight??0:M.minHeight||(y.minHeight??0),ye.minWidth=C?y.minWidth??0:M.minWidth||(y.minWidth??0);for(let R=0;R<N.length;R++)if(ye.position=y,ye.rest=T,y=N[R].validator(ye),y===null)return null}return y}}const Qc=new tr,ye={position:void 0,parent:void 0,el:void 0,computed:void 0,transforms:void 0,height:void 0,width:void 0,marginLeft:void 0,marginTop:void 0,maxHeight:void 0,maxWidth:void 0,minHeight:void 0,minWidth:void 0,rest:void 0};Object.seal(ye);function gs(o,{position:t,active:e=!0,button:n=0,storeDragging:i=void 0,ease:r=!1,easeOptions:s={duration:.1,ease:un},hasTargetClassList:a,ignoreTargetClassList:l}){if(a!==void 0&&!zt(a))throw new TypeError("'hasTargetClassList' is not iterable.");if(l!==void 0&&!zt(l))throw new TypeError("'ignoreTargetClassList' is not iterable.");const c={left:0,top:0};let u=null,h={},d=!1,p=t.animate.quickTo(["top","left"],s);const m={dragDown:["pointerdown",b,!1],dragMove:["pointermove",w,!1],dragUp:["pointerup",T,!1]};function f(){o.addEventListener(...m.dragDown),o.classList.add("draggable")}function g(){typeof i?.set=="function"&&i.set(!1),o.removeEventListener(...m.dragDown),o.removeEventListener(...m.dragMove),o.removeEventListener(...m.dragUp),o.classList.remove("draggable")}e&&f();function b(S){if(!(S.button!==n||!S.isPrimary)&&t.enabled){if(l!==void 0&&S.target instanceof HTMLElement){for(const O of l)if(S.target.classList.contains(O))return}if(a!==void 0&&S.target instanceof HTMLElement){let O=!1;for(const M of a)if(S.target.classList.contains(M)){O=!0;break}if(!O)return}S.preventDefault(),d=!1,u=t.get(),h={x:S.clientX,y:S.clientY},o.addEventListener(...m.dragMove),o.addEventListener(...m.dragUp),o.setPointerCapture(S.pointerId)}}function w(S){if(!(S.buttons&1)){T(S);return}if(S.button!==-1||!S.isPrimary)return;S.preventDefault(),!d&&typeof i?.set=="function"&&(d=!0,i.set(!0));const O=u.left+(S.clientX-h.x),M=u.top+(S.clientY-h.y);r?p(M,O):(c.left=O,c.top=M,t.set(c))}function T(S){S.preventDefault(),d=!1,typeof i?.set=="function"&&i.set(!1),o.removeEventListener(...m.dragMove),o.removeEventListener(...m.dragUp)}return{update:S=>{if(typeof S.active=="boolean"&&(e=S.active,e?f():g()),typeof S.button=="number"&&(n=S.button),S.position!==void 0&&S.position!==t&&(t=S.position,p=t.animate.quickTo(["top","left"],s)),typeof S.ease=="boolean"&&(r=S.ease),V(S.easeOptions)&&(s=S.easeOptions,p.options(s)),S.hasTargetClassList!==void 0)if(zt(S.hasTargetClassList))a=S.hasTargetClassList;else throw new TypeError("'hasTargetClassList' is not iterable.");if(S.ignoreTargetClassList!==void 0)if(zt(S.ignoreTargetClassList))l=S.ignoreTargetClassList;else throw new TypeError("'ignoreTargetClassList' is not iterable.")},destroy:()=>g()}}class Kc{#t=!1;#e={duration:.1,ease:un};#n=[];constructor({ease:t,easeOptions:e}={}){Object.defineProperty(this,"ease",{get:()=>this.#t,set:n=>{if(typeof n!="boolean")throw new TypeError("'ease' is not a boolean.");this.#t=n,this.#o()},enumerable:!0}),Object.defineProperty(this,"easeOptions",{get:()=>this.#e,set:n=>{if(!V(n))throw new TypeError("'easeOptions' is not an object.");if(n.duration!==void 0){if(!Number.isFinite(n.duration))throw new TypeError("'easeOptions.duration' is not a finite number.");if(n.duration<0)throw new Error("'easeOptions.duration' is less than 0.");this.#e.duration=n.duration}if(n.ease!==void 0){if(typeof n.ease!="function"&&typeof n.ease!="string")throw new TypeError("'easeOptions.ease' is not a function or string.");this.#e.ease=n.ease}this.#o()},enumerable:!0}),t!==void 0&&(this.ease=t),e!==void 0&&(this.easeOptions=e)}get easeDuration(){return this.#e.duration}get easeValue(){return this.#e.ease}set easeDuration(t){if(!Number.isFinite(t))throw new TypeError("'duration' is not a finite number.");if(t<0)throw new Error("'duration' is less than 0.");this.#e.duration=t,this.#o()}set easeValue(t){if(typeof t!="function"&&typeof t!="string")throw new TypeError("'value' is not a function or string.");this.#e.ease=t,this.#o()}reset(){this.#t=!1,this.#e={duration:.1,ease:un},this.#o()}resetEase(){this.#e={duration:.1,ease:un},this.#o()}subscribe(t){return this.#n.push(t),t(this),()=>{const e=this.#n.findIndex(n=>n===t);e>=0&&this.#n.splice(e,1)}}#o(){const t=this.#n;if(t.length>0)for(let e=0;e<t.length;e++)t[e](this)}}gs.options=o=>new Kc(o);function bs(o){let t,e;return{c(){t=k("span"),e=pt(o[3]),v(t,"class","svelte-obsu-166l8wd"),Tt(t,"has-icon",o[4]!==void 0)},m(n,i){B(n,t,i),E(t,e)},p(n,i){i&8&&Me(e,n[3]),i&16&&Tt(t,"has-icon",n[4]!==void 0)},d(n){n&&X(t)}}}function tu(o){let t,e,n,i,r,s,a,l=o[3]&&bs(o);return{c(){t=k("a"),e=new dc(!1),n=De(),l&&l.c(),e.a=n,v(t,"class",i="header-button "+o[0].class+" svelte-obsu-166l8wd"),v(t,"aria-label",o[3]),v(t,"tabindex","0"),v(t,"role","button"),Tt(t,"keep-minimized",o[2])},m(c,u){B(c,t,u),e.m(o[4],t),E(t,n),l&&l.m(t,null),s||(a=[G(t,"click",Ge(Pe(o[5]))),G(t,"contextmenu",Ge(Pe(o[6]))),G(t,"keydown",o[7]),G(t,"keyup",o[8]),be(r=bo.call(null,t,o[1]))],s=!0)},p(c,[u]){u&16&&e.p(c[4]),c[3]?l?l.p(c,u):(l=bs(c),l.c(),l.m(t,null)):l&&(l.d(1),l=null),u&1&&i!==(i="header-button "+c[0].class+" svelte-obsu-166l8wd")&&v(t,"class",i),u&8&&v(t,"aria-label",c[3]),r&&ze(r.update)&&u&2&&r.update.call(null,c[1]),u&5&&Tt(t,"keep-minimized",c[2])},i:_t,o:_t,d(c){c&&X(t),l&&l.d(),s=!1,Vt(a)}}}const eu=/^\s*<.*>$/;function nu(o,t,e){let n,i,r,s,a,l,{button:c=void 0}=t;function u(m){const f=c?.onPress??c?.onclick;typeof f=="function"&&(f.call(c,m),e(0,c))}function h(m){const f=c?.onContextMenu;typeof f=="function"&&(f.call(c,m),e(0,c))}function d(m){m.code===a&&(m.preventDefault(),m.stopPropagation())}function p(m){if(m.code===a){const f=c.onPress??c.onclick;typeof f=="function"&&(f.call(c,m),e(0,c)),m.preventDefault(),m.stopPropagation()}}return o.$$set=m=>{"button"in m&&e(0,c=m.button)},o.$$.update=()=>{o.$$.dirty&1&&e(9,n=V(c)&&typeof c.title=="string"?ei(c.title):""),o.$$.dirty&513&&e(4,i=V(c)&&typeof c.icon!="string"?void 0:eu.test(c.icon)?c.icon:`<i class="${c.icon}" title="${n}"></i>`),o.$$.dirty&1&&e(3,r=V(c)&&typeof c.label=="string"?ei(c.label):void 0),o.$$.dirty&1&&e(2,s=V(c)&&typeof c.keepMinimized=="boolean"?c.keepMinimized:!1),o.$$.dirty&1&&(a=V(c)&&typeof c.keyCode=="string"?c.keyCode:"Enter"),o.$$.dirty&1&&e(1,l=V(c)&&V(c.styles)?c.styles:void 0)},[c,l,s,r,i,u,h,d,p,n]}class ou extends Ct{constructor(t){super(),It(this,t,nu,tu,Mt,{button:0})}get button(){return this.$$.ctx[0]}set button(t){this.$$set({button:t}),Wt()}}function vs(o,t,e){const n=o.slice();return n[31]=t[e],n}function ys(o,t,e){const n=o.slice();return n[31]=t[e],n}function ws(o){let t,e;return{c(){t=k("img"),v(t,"class","tjs-app-icon keep-minimized svelte-obsu-1wviwl9"),qo(t.src,e=o[6])||v(t,"src",e),v(t,"alt","icon")},m(n,i){B(n,t,i)},p(n,i){i[0]&64&&!qo(t.src,e=n[6])&&v(t,"src",e)},d(n){n&&X(t)}}}function $s(o){let t,e,n;const i=[o[31].props];var r=o[31].class;function s(a,l){let c={};for(let u=0;u<i.length;u+=1)c=co(c,i[u]);return l!==void 0&&l[0]&2&&(c=co(c,po(i,[Uo(a[31].props)]))),{props:c}}return r&&(t=Gn(r,s(o))),{c(){t&&mt(t.$$.fragment),e=De()},m(a,l){t&&gt(t,a,l),B(a,e,l),n=!0},p(a,l){if(l[0]&2&&r!==(r=a[31].class)){if(t){Dt();const c=t;z(c.$$.fragment,1,0,()=>{bt(c,1)}),kt()}r?(t=Gn(r,s(a,l)),mt(t.$$.fragment),L(t.$$.fragment,1),gt(t,e.parentNode,e)):t=null}else if(r){const c=l[0]&2?po(i,[Uo(a[31].props)]):{};t.$set(c)}},i(a){n||(t&&L(t.$$.fragment,a),n=!0)},o(a){t&&z(t.$$.fragment,a),n=!1},d(a){a&&X(e),t&&bt(t,a)}}}function Ts(o){let t,e,n;const i=[o[31].props];var r=o[31].class;function s(a,l){let c={};for(let u=0;u<i.length;u+=1)c=co(c,i[u]);return l!==void 0&&l[0]&4&&(c=co(c,po(i,[Uo(a[31].props)]))),{props:c}}return r&&(t=Gn(r,s(o))),{c(){t&&mt(t.$$.fragment),e=De()},m(a,l){t&&gt(t,a,l),B(a,e,l),n=!0},p(a,l){if(l[0]&4&&r!==(r=a[31].class)){if(t){Dt();const c=t;z(c.$$.fragment,1,0,()=>{bt(c,1)}),kt()}r?(t=Gn(r,s(a,l)),mt(t.$$.fragment),L(t.$$.fragment,1),gt(t,e.parentNode,e)):t=null}else if(r){const c=l[0]&4?po(i,[Uo(a[31].props)]):{};t.$set(c)}},i(a){n||(t&&L(t.$$.fragment,a),n=!0)},o(a){t&&z(t.$$.fragment,a),n=!1},d(a){a&&X(e),t&&bt(t,a)}}}function xs(o){let t,e,n,i=ei(o[7])+"",r,s,a,l,c,u,h,d,p,m,f=typeof o[6]=="string"&&ws(o),g=wt(o[1]),b=[];for(let M=0;M<g.length;M+=1)b[M]=$s(ys(o,g,M));const w=M=>z(b[M],1,1,()=>{b[M]=null});let T=wt(o[2]),S=[];for(let M=0;M<T.length;M+=1)S[M]=Ts(vs(o,T,M));const O=M=>z(S[M],1,1,()=>{S[M]=null});return{c(){t=k("header"),f&&f.c(),e=W(),n=k("h4"),r=pt(i),s=W();for(let M=0;M<b.length;M+=1)b[M].c();a=W(),l=k("span"),c=W();for(let M=0;M<S.length;M+=1)S[M].c();v(n,"class","window-title svelte-obsu-1wviwl9"),se(n,"display",o[4]),v(l,"class","tjs-window-header-spacer keep-minimized svelte-obsu-1wviwl9"),v(t,"class","window-header flexrow svelte-obsu-1wviwl9")},m(M,y){B(M,t,y),f&&f.m(t,null),E(t,e),E(t,n),E(n,r),E(t,s);for(let N=0;N<b.length;N+=1)b[N]&&b[N].m(t,null);E(t,a),E(t,l),E(t,c);for(let N=0;N<S.length;N+=1)S[N]&&S[N].m(t,null);d=!0,p||(m=[be(u=o[0].call(null,t,o[3])),be(h=o[18].call(null,t,o[5])),G(t,"pointerdown",o[19])],p=!0)},p(M,y){if(typeof M[6]=="string"?f?f.p(M,y):(f=ws(M),f.c(),f.m(t,e)):f&&(f.d(1),f=null),(!d||y[0]&128)&&i!==(i=ei(M[7])+"")&&Me(r,i),y[0]&16&&se(n,"display",M[4]),y[0]&2){g=wt(M[1]);let N;for(N=0;N<g.length;N+=1){const C=ys(M,g,N);b[N]?(b[N].p(C,y),L(b[N],1)):(b[N]=$s(C),b[N].c(),L(b[N],1),b[N].m(t,a))}for(Dt(),N=g.length;N<b.length;N+=1)w(N);kt()}if(y[0]&4){T=wt(M[2]);let N;for(N=0;N<T.length;N+=1){const C=vs(M,T,N);S[N]?(S[N].p(C,y),L(S[N],1)):(S[N]=Ts(C),S[N].c(),L(S[N],1),S[N].m(t,null))}for(Dt(),N=T.length;N<S.length;N+=1)O(N);kt()}u&&ze(u.update)&&y[0]&8&&u.update.call(null,M[3]),h&&ze(h.update)&&y[0]&32&&h.update.call(null,M[5])},i(M){if(!d){for(let y=0;y<g.length;y+=1)L(b[y]);for(let y=0;y<T.length;y+=1)L(S[y]);d=!0}},o(M){b=b.filter(Boolean);for(let y=0;y<b.length;y+=1)z(b[y]);S=S.filter(Boolean);for(let y=0;y<S.length;y+=1)z(S[y]);d=!1},d(M){M&&X(t),f&&f.d(),Ie(b,M),Ie(S,M),p=!1,Vt(m)}}}function iu(o){let t=o[0],e,n,i=xs(o);return{c(){i.c(),e=De()},m(r,s){i.m(r,s),B(r,e,s),n=!0},p(r,s){s[0]&1&&Mt(t,t=r[0])?(Dt(),z(i,1,1,_t),kt(),i=xs(r),i.c(),L(i,1),i.m(e.parentNode,e)):i.p(r,s)},i(r){n||(L(i),n=!0)},o(r){z(i),n=!1},d(r){r&&X(e),i.d(r)}}}function ru(o,t,e){let n,i,r,s,a,l,c,u,h,d,{draggable:p=void 0}=t,{draggableOptions:m=void 0}=t;const{application:f}=je("#external"),{focusAuto:g,focusKeep:b}=f.reactive.storeAppOptions;xt(o,g,_=>e(26,i=_)),xt(o,b,_=>e(25,n=_));const{elementRoot:w}=je("#internal").stores;xt(o,w,_=>e(27,r=_));const T=f.reactive.storeAppOptions.title;xt(o,T,_=>e(7,d=_));const S=f.reactive.storeAppOptions.draggable;xt(o,S,_=>e(24,c=_));const O=f.reactive.storeUIState.dragging,M=f.reactive.storeUIState.headerButtons;xt(o,M,_=>e(21,s=_));const y=f.reactive.storeAppOptions.headerIcon;xt(o,y,_=>e(6,h=_));const N=f.reactive.storeAppOptions.headerNoTitleMinimized;xt(o,N,_=>e(23,l=_));const C=f.reactive.storeAppOptions.minimizable;xt(o,C,_=>e(5,u=_));const R=f.reactive.storeUIState.minimized;xt(o,R,_=>e(22,a=_));const x=Object.freeze(["tjs-app-icon","tjs-window-header-spacer","window-header","window-title"]);let A,F,I,H;function P(_,j){const J=tt=>{(tt.target.classList.contains("window-title")||tt.target.classList.contains("window-header")||tt.target.classList.contains("keep-minimized"))&&f._onToggleMinimize(tt)};function at(){_.addEventListener("dblclick",J)}function yt(){_.removeEventListener("dblclick",J)}return j&&at(),{update:tt=>{tt?at():yt()},destroy:()=>yt()}}function U(_){const j=r;i&&j instanceof HTMLElement&&j?.isConnected&&(n?document.activeElement instanceof HTMLElement&&!j.contains(document.activeElement)?j.focus():_.preventDefault():j.focus())}return o.$$set=_=>{"draggable"in _&&e(0,p=_.draggable),"draggableOptions"in _&&e(20,m=_.draggableOptions)},o.$$.update=()=>{if(o.$$.dirty[0]&1&&e(0,p=typeof p=="function"?p:gs),o.$$.dirty[0]&17825792&&e(3,A=Object.assign({},{ease:!0,easeOptions:{duration:.06,ease:un}},V(m)?m:{},{position:f.position,active:c,storeDragging:O,hasTargetClassList:x})),o.$$.dirty[0]&12582912&&e(4,F=l&&a?"none":null),o.$$.dirty[0]&2097158){e(1,I=[]),e(2,H=[]);for(const _ of s)(typeof _?.alignLeft=="boolean"&&_?.alignLeft?I:H).push(ti(_)?{class:_,props:{}}:{class:ou,props:{button:_}})}},[p,I,H,A,F,u,h,d,g,b,w,T,S,M,y,N,C,R,P,U,m,s,a,l,c]}class Es extends Ct{constructor(t){super(),It(this,t,ru,iu,Mt,{draggable:0,draggableOptions:20},null,[-1,-1])}}function su(o){let t,e,n;return{c(){t=k("div"),v(t,"class","tjs-focus-wrap svelte-obsu-kjcljd"),v(t,"tabindex","0")},m(i,r){B(i,t,r),o[4](t),e||(n=G(t,"focus",o[1]),e=!0)},p:_t,i:_t,o:_t,d(i){i&&X(t),o[4](null),e=!1,n()}}}function au(o,t,e){let{elementRoot:n=void 0}=t,{enabled:i=!0}=t,r,s;function a(){if(i&&n instanceof HTMLElement){const c=go.getFirstFocusableElement(n,r);c instanceof HTMLElement&&c!==s?c.focus():n.focus()}}function l(c){vt[c?"unshift":"push"](()=>{s=c,e(0,s)})}return o.$$set=c=>{"elementRoot"in c&&e(2,n=c.elementRoot),"enabled"in c&&e(3,i=c.enabled)},o.$$.update=()=>{o.$$.dirty&1&&s&&(r=new Set([s]))},[s,a,n,i,l]}class Os extends Ct{constructor(t){super(),It(this,t,au,su,Mt,{elementRoot:2,enabled:3})}}function lu(o){let t,e,n,i;return{c(){t=k("div"),t.innerHTML='<i class="fas fa-arrows-alt-h svelte-obsu-14lnpz8"></i>',v(t,"class","window-resizable-handle svelte-obsu-14lnpz8")},m(r,s){B(r,t,s),o[10](t),n||(i=be(e=o[6].call(null,t,{active:o[1],storeResizing:o[5]})),n=!0)},p(r,[s]){e&&ze(e.update)&&s&2&&e.update.call(null,{active:r[1],storeResizing:r[5]})},i:_t,o:_t,d(r){r&&X(t),o[10](null),n=!1,i()}}}function cu(o,t,e){let n,i,r,{isResizable:s=!1}=t;const a=je("#external").application,l=je("#internal").stores.elementRoot;xt(o,l,f=>e(8,n=f));const c=a.reactive.storeAppOptions.resizable;xt(o,c,f=>e(1,r=f));const u=a.reactive.storeUIState.minimized;xt(o,u,f=>e(9,i=f));const h=a.reactive.storeUIState.resizing;let d;function p(f,{active:g=!0,storeResizing:b=void 0}={}){let w=null,T={},S=!1;const O={resizeDown:["pointerdown",x=>N(x),!1],resizeMove:["pointermove",x=>C(x),!1],resizeUp:["pointerup",x=>R(x),!1]};function M(){f.addEventListener(...O.resizeDown),e(7,s=!0),f.style.display="block"}function y(){typeof b?.set=="function"&&b.set(!1),f.removeEventListener(...O.resizeDown),f.removeEventListener(...O.resizeMove),f.removeEventListener(...O.resizeUp),f.style.display="none",e(7,s=!1)}g?M():f.style.display="none";function N(x){x.preventDefault(),S=!1,w=a.position.get(),w.height==="auto"&&(w.height=n.clientHeight),w.width==="auto"&&(w.width=n.clientWidth),T={x:x.clientX,y:x.clientY},f.addEventListener(...O.resizeMove),f.addEventListener(...O.resizeUp),f.setPointerCapture(x.pointerId)}function C(x){x.preventDefault(),!S&&typeof b?.set=="function"&&(S=!0,b.set(!0)),a.position.set({width:w.width+(x.clientX-T.x),height:w.height+(x.clientY-T.y)})}function R(x){S=!1,typeof b?.set=="function"&&b.set(!1),x.preventDefault(),f.removeEventListener(...O.resizeMove),f.removeEventListener(...O.resizeUp),a?._onResize?.(x)}return{update:({active:x})=>{x?M():y()},destroy:()=>y()}}function m(f){vt[f?"unshift":"push"](()=>{d=f,e(0,d),e(7,s),e(9,i),e(8,n)})}return o.$$set=f=>{"isResizable"in f&&e(7,s=f.isResizable)},o.$$.update=()=>{if(o.$$.dirty&897&&d){e(0,d.style.display=s&&!i?"block":"none",d);const f=n;f&&f.classList[s?"add":"remove"]("resizable")}},[d,r,l,c,u,h,p,s,n,i,m]}class Ss extends Ct{constructor(t){super(),It(this,t,cu,lu,Mt,{isResizable:7})}}function uu(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g;e=new Es({props:{draggable:o[6],draggableOptions:o[7]}});const b=o[36].default,w=ue(b,o,o[35],null);return a=new Ss({}),c=new Os({props:{elementRoot:o[1],enabled:o[11]}}),{c(){t=k("div"),mt(e.$$.fragment),n=W(),i=k("section"),w&&w.c(),s=W(),mt(a.$$.fragment),l=W(),mt(c.$$.fragment),v(i,"class","window-content svelte-obsu-oz81f7"),v(i,"tabindex","-1"),v(t,"id",u=o[10].id),v(t,"class",h="app window-app "+o[10].options.classes.join(" ")+" svelte-obsu-oz81f7"),v(t,"data-appid",d=o[10].appId),v(t,"role","application"),v(t,"tabindex","-1")},m(T,S){B(T,t,S),gt(e,t,null),E(t,n),E(t,i),w&&w.m(i,null),o[39](i),E(t,s),gt(a,t,null),E(t,l),gt(c,t,null),o[40](t),m=!0,f||(g=[G(i,"pointerdown",o[21]),be(r=bo.call(null,i,o[9])),be(o[13].call(null,i,o[22])),G(t,"close:popup",Ge(Pe(o[18]))),G(t,"keydown",o[19],!0),G(t,"pointerdown",o[20]),be(p=bo.call(null,t,o[8])),be(o[12].call(null,t,o[23]))],f=!0)},p(T,S){const O={};S[0]&64&&(O.draggable=T[6]),S[0]&128&&(O.draggableOptions=T[7]),e.$set(O),w&&w.p&&(!m||S[1]&16)&&he(w,b,T,T[35],m?fe(b,T[35],S,null):de(T[35]),null),r&&ze(r.update)&&S[0]&512&&r.update.call(null,T[9]);const M={};S[0]&2&&(M.elementRoot=T[1]),S[0]&2048&&(M.enabled=T[11]),c.$set(M),(!m||S[0]&1024&&u!==(u=T[10].id))&&v(t,"id",u),(!m||S[0]&1024&&h!==(h="app window-app "+T[10].options.classes.join(" ")+" svelte-obsu-oz81f7"))&&v(t,"class",h),(!m||S[0]&1024&&d!==(d=T[10].appId))&&v(t,"data-appid",d),p&&ze(p.update)&&S[0]&256&&p.update.call(null,T[8])},i(T){m||(L(e.$$.fragment,T),L(w,T),L(a.$$.fragment,T),L(c.$$.fragment,T),m=!0)},o(T){z(e.$$.fragment,T),z(w,T),z(a.$$.fragment,T),z(c.$$.fragment,T),m=!1},d(T){T&&X(t),bt(e),w&&w.d(T),o[39](null),bt(a),bt(c),o[40](null),f=!1,Vt(g)}}}function hu(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w;e=new Es({props:{draggable:o[6],draggableOptions:o[7]}});const T=o[36].default,S=ue(T,o,o[35],null);return a=new Ss({}),c=new Os({props:{elementRoot:o[1]}}),{c(){t=k("div"),mt(e.$$.fragment),n=W(),i=k("section"),S&&S.c(),s=W(),mt(a.$$.fragment),l=W(),mt(c.$$.fragment),v(i,"class","window-content svelte-obsu-oz81f7"),v(i,"tabindex","-1"),v(t,"id",u=o[10].id),v(t,"class",h="app window-app "+o[10].options.classes.join(" ")+" svelte-obsu-oz81f7"),v(t,"data-appid",d=o[10].appId),v(t,"role","application"),v(t,"tabindex","-1")},m(O,M){B(O,t,M),gt(e,t,null),E(t,n),E(t,i),S&&S.m(i,null),o[37](i),E(t,s),gt(a,t,null),E(t,l),gt(c,t,null),o[38](t),g=!0,b||(w=[G(i,"pointerdown",o[21]),be(r=bo.call(null,i,o[9])),be(o[13].call(null,i,o[22])),G(t,"close:popup",Ge(Pe(o[18]))),G(t,"keydown",o[19],!0),G(t,"pointerdown",o[20]),be(p=bo.call(null,t,o[8])),be(o[12].call(null,t,o[23]))],b=!0)},p(O,M){o=O;const y={};M[0]&64&&(y.draggable=o[6]),M[0]&128&&(y.draggableOptions=o[7]),e.$set(y),S&&S.p&&(!g||M[1]&16)&&he(S,T,o,o[35],g?fe(T,o[35],M,null):de(o[35]),null),r&&ze(r.update)&&M[0]&512&&r.update.call(null,o[9]);const N={};M[0]&2&&(N.elementRoot=o[1]),c.$set(N),(!g||M[0]&1024&&u!==(u=o[10].id))&&v(t,"id",u),(!g||M[0]&1024&&h!==(h="app window-app "+o[10].options.classes.join(" ")+" svelte-obsu-oz81f7"))&&v(t,"class",h),(!g||M[0]&1024&&d!==(d=o[10].appId))&&v(t,"data-appid",d),p&&ze(p.update)&&M[0]&256&&p.update.call(null,o[8])},i(O){g||(L(e.$$.fragment,O),L(S,O),L(a.$$.fragment,O),L(c.$$.fragment,O),yn(()=>{g&&(f&&f.end(1),m=Wr(t,o[2],o[4]),m.start())}),g=!0)},o(O){z(e.$$.fragment,O),z(S,O),z(a.$$.fragment,O),z(c.$$.fragment,O),m&&m.invalidate(),f=Br(t,o[3],o[5]),g=!1},d(O){O&&X(t),bt(e),S&&S.d(O),o[37](null),bt(a),bt(c),o[38](null),O&&f&&f.end(),b=!1,Vt(w)}}}function du(o){let t,e,n,i;const r=[hu,uu],s=[];function a(l,c){return l[2]!==ve.default||l[3]!==ve.default?0:1}return t=a(o),e=s[t]=r[t](o),{c(){e.c(),n=De()},m(l,c){s[t].m(l,c),B(l,n,c),i=!0},p(l,c){let u=t;t=a(l),t===u?s[t].p(l,c):(Dt(),z(s[u],1,1,()=>{s[u]=null}),kt(),e=s[t],e?e.p(l,c):(e=s[t]=r[t](l),e.c()),L(e,1),e.m(n.parentNode,n))},i(l){i||(L(e),i=!0)},o(l){z(e),i=!1},d(l){l&&X(n),s[t].d(l)}}}function fu(o,t,e){let n,i,r,s,{$$slots:a={},$$scope:l}=t,{elementContent:c=void 0}=t,{elementRoot:u=void 0}=t,{draggable:h=void 0}=t,{draggableOptions:d=void 0}=t,{stylesApp:p=void 0}=t,{stylesContent:m=void 0}=t,{appOffsetHeight:f=!1}=t,{appOffsetWidth:g=!1}=t;const b=f||g?Ji:()=>null;let{contentOffsetHeight:w=!1}=t,{contentOffsetWidth:T=!1}=t;const S=w||T?Ji:()=>null,O=new Fc,M={ignoreClasses:["tjs-focus-wrap"]};fc("#internal",O);const{application:y}=je("#external"),{focusAuto:N,focusKeep:C,focusTrap:R}=y.reactive.storeAppOptions;xt(o,N,Y=>e(32,i=Y)),xt(o,C,Y=>e(41,n=Y)),xt(o,R,Y=>e(34,s=Y));const{minimized:x}=y.reactive.storeUIState;xt(o,x,Y=>e(33,r=Y));let A,{transition:F=ve.default}=t,{inTransition:I=ve.default}=t,{outTransition:H=ve.default}=t,{transitionOptions:P=void 0}=t,{inTransitionOptions:U=ve.options}=t,{outTransitionOptions:_=ve.options}=t,j=ve.default,J;Yo(()=>u.focus());function at(Y){if(!i)return;const Nt=Y?.detail?.target;if(!(Nt instanceof HTMLElement)||go.isFocusable(Nt))return;const jt=u.contains(Nt);Nt===u?u.focus():Nt===c?c.focus():jt&&(c.contains(Nt)?c.focus():u.focus())}function yt(Y){if((Y.target===u||Y.target===c)&&KeyboardManager&&KeyboardManager?._getMatchingActions?.(KeyboardManager?.getKeyboardEventContext?.(Y))?.length){Y.target?.blur();return}if(A&&Y.shiftKey&&Y.code==="Tab"){const Nt=go.getFocusableElements(u,M),jt=Nt.length>0?Nt[0]:void 0,oe=Nt.length>0?Nt[Nt.length-1]:void 0;(u===document.activeElement||jt===document.activeElement)&&(oe instanceof HTMLElement&&jt!==oe&&oe.focus(),Y.preventDefault(),Y.stopPropagation())}typeof y?.options?.popOut=="boolean"&&y.options.popOut&&y!==globalThis.ui?.activeWindow&&y.bringToTop.call(y)}function tt(){typeof y?.options?.popOut=="boolean"&&y.options.popOut&&y!==globalThis.ui?.activeWindow&&y.bringToTop.call(y)}function Rt(Y){!go.isFocusable(Y.target)&&i&&(n?document.activeElement instanceof HTMLElement&&!u.contains(document.activeElement)?c.focus():Y.preventDefault():c.focus())}function K(Y,Nt){e(27,T=Y),e(26,w=Nt)}function Qt(Y,Nt,jt,oe){y.position.stores.resizeObserved.update(lt=>(lt.contentWidth=jt,lt.contentHeight=oe,lt.offsetWidth=Y,lt.offsetHeight=Nt,lt)),e(24,f=Nt),e(25,g=Y)}function ie(Y){vt[Y?"unshift":"push"](()=>{c=Y,e(0,c)})}function Oe(Y){vt[Y?"unshift":"push"](()=>{u=Y,e(1,u)})}function Zt(Y){vt[Y?"unshift":"push"](()=>{c=Y,e(0,c)})}function Fe(Y){vt[Y?"unshift":"push"](()=>{u=Y,e(1,u)})}return o.$$set=Y=>{"elementContent"in Y&&e(0,c=Y.elementContent),"elementRoot"in Y&&e(1,u=Y.elementRoot),"draggable"in Y&&e(6,h=Y.draggable),"draggableOptions"in Y&&e(7,d=Y.draggableOptions),"stylesApp"in Y&&e(8,p=Y.stylesApp),"stylesContent"in Y&&e(9,m=Y.stylesContent),"appOffsetHeight"in Y&&e(24,f=Y.appOffsetHeight),"appOffsetWidth"in Y&&e(25,g=Y.appOffsetWidth),"contentOffsetHeight"in Y&&e(26,w=Y.contentOffsetHeight),"contentOffsetWidth"in Y&&e(27,T=Y.contentOffsetWidth),"transition"in Y&&e(28,F=Y.transition),"inTransition"in Y&&e(2,I=Y.inTransition),"outTransition"in Y&&e(3,H=Y.outTransition),"transitionOptions"in Y&&e(29,P=Y.transitionOptions),"inTransitionOptions"in Y&&e(4,U=Y.inTransitionOptions),"outTransitionOptions"in Y&&e(5,_=Y.outTransitionOptions),"$$scope"in Y&&e(35,l=Y.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&1&&c!=null&&je("#internal").stores.elementContent.set(c),o.$$.dirty[0]&2&&u!=null&&je("#internal").stores.elementRoot.set(u),o.$$.dirty[1]&14&&e(11,A=i&&s&&!r),o.$$.dirty[0]&1342177280&&j!==F){const Y=typeof F=="function"?F:ve.default;e(2,I=Y),e(3,H=Y),e(30,j=Y)}if(o.$$.dirty[0]&536870912|o.$$.dirty[1]&1&&J!==P){const Y=P!==ve.options&&V(P)?P:ve.options;e(4,U=Y),e(5,_=Y),e(31,J=Y)}if(o.$$.dirty[0]&4&&typeof I!="function"&&e(2,I=ve.default),o.$$.dirty[0]&1032){typeof H!="function"&&e(3,H=ve.default);const Y=y?.options?.defaultCloseAnimation;typeof Y=="boolean"&&Y&&H!==ve.default&&e(10,y.options.defaultCloseAnimation=!1,y)}o.$$.dirty[0]&16&&(V(U)||e(4,U=ve.options)),o.$$.dirty[0]&32&&(V(_)||e(5,_=ve.options))},[c,u,I,H,U,_,h,d,p,m,y,A,b,S,N,C,R,x,at,yt,tt,Rt,K,Qt,f,g,w,T,F,P,j,J,i,r,s,l,a,ie,Oe,Zt,Fe]}class $n extends Ct{constructor(t){super(),It(this,t,fu,du,Mt,{elementContent:0,elementRoot:1,draggable:6,draggableOptions:7,stylesApp:8,stylesContent:9,appOffsetHeight:24,appOffsetWidth:25,contentOffsetHeight:26,contentOffsetWidth:27,transition:28,inTransition:2,outTransition:3,transitionOptions:29,inTransitionOptions:4,outTransitionOptions:5},null,[-1,-1])}get elementContent(){return this.$$.ctx[0]}set elementContent(t){this.$$set({elementContent:t}),Wt()}get elementRoot(){return this.$$.ctx[1]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}get draggable(){return this.$$.ctx[6]}set draggable(t){this.$$set({draggable:t}),Wt()}get draggableOptions(){return this.$$.ctx[7]}set draggableOptions(t){this.$$set({draggableOptions:t}),Wt()}get stylesApp(){return this.$$.ctx[8]}set stylesApp(t){this.$$set({stylesApp:t}),Wt()}get stylesContent(){return this.$$.ctx[9]}set stylesContent(t){this.$$set({stylesContent:t}),Wt()}get appOffsetHeight(){return this.$$.ctx[24]}set appOffsetHeight(t){this.$$set({appOffsetHeight:t}),Wt()}get appOffsetWidth(){return this.$$.ctx[25]}set appOffsetWidth(t){this.$$set({appOffsetWidth:t}),Wt()}get contentOffsetHeight(){return this.$$.ctx[26]}set contentOffsetHeight(t){this.$$set({contentOffsetHeight:t}),Wt()}get contentOffsetWidth(){return this.$$.ctx[27]}set contentOffsetWidth(t){this.$$set({contentOffsetWidth:t}),Wt()}get transition(){return this.$$.ctx[28]}set transition(t){this.$$set({transition:t}),Wt()}get inTransition(){return this.$$.ctx[2]}set inTransition(t){this.$$set({inTransition:t}),Wt()}get outTransition(){return this.$$.ctx[3]}set outTransition(t){this.$$set({outTransition:t}),Wt()}get transitionOptions(){return this.$$.ctx[29]}set transitionOptions(t){this.$$set({transitionOptions:t}),Wt()}get inTransitionOptions(){return this.$$.ctx[4]}set inTransitionOptions(t){this.$$set({inTransitionOptions:t}),Wt()}get outTransitionOptions(){return this.$$.ctx[5]}set outTransitionOptions(t){this.$$set({outTransitionOptions:t}),Wt()}}Nc.setProperties({"--tjs-default-text-shadow-focus-hover":"0 0 8px var(--color-shadow-primary)","--tjs-app-background":`url("${globalThis.foundry.utils.getRoute("/ui/denim075.png")}")`},!1);class Nn{static arrayEquals(t,e){if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(let n=t.length;--n>=0;)if(t[n]!==e[n])return!1;return!0}static hashString(t,e=0){let n=3735928559^e,i=1103547991^e;for(let r,s=0;s<t.length;s++)r=t.charCodeAt(s),n=Math.imul(n^r,2654435761),i=Math.imul(i^r,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&i)+(n>>>0)}static hashUnknown(t){if(t==null)return 0;let e=0;switch(typeof t){case"boolean":e=t?1:0;break;case"bigint":e=Number(BigInt.asIntN(64,t));break;case"function":e=this.hashString(t.name);break;case"number":e=Number.isFinite(t)?t:0;break;case"object":break;case"string":e=this.hashString(t);break;case"symbol":e=this.hashString(Symbol.keyFor(t));break}return e}static hasPrototype(t,e){if(typeof t!="function")return!1;if(t===e)return!0;for(let n=Object.getPrototypeOf(t);n;n=Object.getPrototypeOf(n))if(n===e)return!0;return!1}static isIterable(t){return t!=null&&typeof t=="object"&&typeof t[Symbol.iterator]=="function"}}class Ms{#t;#e;#n;#o=new Map;#i=!1;constructor(t,e,n){this.#t=t,this.#n=e,this.#e=n,Object.freeze(this)}create(t){if(this.#i)throw Error("AdapterDerived.create error: this instance has been destroyed.");let e,n={},i;const r=this.#e;if(typeof t=="string")e=t,i=r;else if(typeof t=="function"&&Nn.hasPrototype(t,r))i=t;else if(typeof t=="object"&&t!==null)({name:e,ctor:i=r,...n}=t);else throw new TypeError("AdapterDerived.create error: 'options' does not conform to allowed parameters.");if(!Nn.hasPrototype(i,r))throw new TypeError(`AdapterDerived.create error: 'ctor' is not a '${r?.name}'.`);if(e=e??i?.name,typeof e!="string")throw new TypeError("AdapterDerived.create error: 'name' is not a string.");const s=new i(this.#t,this.#n,n);return this.#o.set(e,s),s}clear(){if(!this.#i){for(const t of this.#o.values())t.destroy();this.#o.clear()}}delete(t){if(this.#i)throw Error("AdapterDerived.delete error: this instance has been destroyed.");const e=this.#o.get(t);return e&&e.destroy(),this.#o.delete(t)}destroy(){this.#i||(this.clear(),this.#t=[null],this.#n=null,this.#i=!0)}get(t){if(this.#i)throw Error("AdapterDerived.get error: this instance has been destroyed.");return this.#o.get(t)}update(t=!1){if(!this.#i)for(const e of this.#o.values())e.index.update(t)}}class Ds{#t;#e;#n=new Map;constructor(t,e){this.#e=t,this.#t=e,Object.freeze(this)}get length(){return this.#t.filters.length}*[Symbol.iterator](){if(this.#t.filters.length!==0)for(const t of this.#t.filters)yield{...t}}add(...t){let e=0;for(const n of t){const i=typeof n;if(i!=="function"&&(i!=="object"||n===null))throw new TypeError("AdapterFilters error: 'filter' is not a function or object.");let r,s;if(i==="function")r={id:void 0,filter:n,weight:1},s=n.subscribe;else if(i==="object")if("filter"in n){if(typeof n.filter!="function")throw new TypeError("AdapterFilters error: 'filter' attribute is not a function.");if(n.weight!==void 0&&typeof n.weight!="number"||n.weight<0||n.weight>1)throw new TypeError("AdapterFilters error: 'weight' attribute is not a number between '0 - 1' inclusive.");r={id:n.id!==void 0?n.id:void 0,filter:n.filter,weight:n.weight||1},s=n.filter.subscribe??n.subscribe}else throw new TypeError("AdapterFilters error: 'filter' attribute is not a function.");const a=this.#t.filters.findIndex(l=>r.weight<l.weight);if(a>=0?this.#t.filters.splice(a,0,r):this.#t.filters.push(r),typeof s=="function"){const l=s(this.#e);if(typeof l!="function")throw new TypeError("AdapterFilters error: Filter has subscribe function, but no unsubscribe function is returned.");if(this.#n.has(r.filter))throw new Error("AdapterFilters error: Filter added already has an unsubscribe function registered.");this.#n.set(r.filter,l),e++}}e<t.length&&this.#e()}clear(){this.#t.filters.length=0;for(const t of this.#n.values())t();this.#n.clear(),this.#e()}remove(...t){const e=this.#t.filters.length;if(e!==0){for(const n of t){const i=typeof n=="function"?n:n!==null&&typeof n=="object"?n.filter:void 0;if(i){for(let r=this.#t.filters.length;--r>=0;)if(this.#t.filters[r].filter===i){this.#t.filters.splice(r,1);let s;typeof(s=this.#n.get(i))=="function"&&(s(),this.#n.delete(i))}}}e!==this.#t.filters.length&&this.#e()}}removeBy(t){const e=this.#t.filters.length;if(e!==0){if(typeof t!="function")throw new TypeError("AdapterFilters error: 'callback' is not a function.");this.#t.filters=this.#t.filters.filter(n=>{const i=t.call(t,{...n});if(i){let r;typeof(r=this.#n.get(n.filter))=="function"&&(r(),this.#n.delete(n.filter))}return!i}),e!==this.#t.filters.length&&this.#e()}}removeById(...t){const e=this.#t.filters.length;e!==0&&(this.#t.filters=this.#t.filters.filter(n=>{let i=0;for(const r of t)i|=n.id===r?1:0;if(i){let r;typeof(r=this.#n.get(n.filter))=="function"&&(r(),this.#n.delete(n.filter))}return!i}),e!==this.#t.filters.length&&this.#e())}}class pu{derivedAdapter;filtersData;hostData;hostUpdate;indexData;sortData;sortFn;destroyed=!1;constructor(t,e,n){this.hostData=t,this.hostUpdate=e,this.indexData={index:null,hash:null,reversed:!1,parent:n}}get active(){return this.filtersData.filters.length>0||this.sortData.compareFn!==null||this.indexData.parent?.active===!0}get length(){return this.indexData.index?this.indexData.index.length:0}get reversed(){return this.indexData.reversed}set reversed(t){this.indexData.reversed=t}calcHashUpdate(t,e,n=!1){const i=typeof n=="boolean"?n:!1;let r=null;const s=this.indexData.index;if(s)for(let a=s.length;--a>=0;)r^=Nn.hashUnknown(s[a])+2654435769+(r<<6)+(r>>2);this.indexData.hash=r,(i||e!==r||!Nn.arrayEquals(t,s))&&this.hostUpdate()}destroy(){this.destroyed||(this.indexData.index=null,this.indexData.hash=null,this.indexData.reversed=null,this.indexData.parent=null,this.destroyed=!0)}initAdapters(t,e,n){this.filtersData=t,this.sortData=e,this.derivedAdapter=n,this.sortFn=this.createSortFn()}}class ks{#t;#e;#n;constructor(t,e){this.#e=t,this.#t=e,Object.freeze(this)}clear(){const t=this.#t.compareFn;this.#t.compareFn=null,typeof this.#n=="function"&&(this.#n(),this.#n=void 0),typeof t=="function"&&this.#e()}set(t){typeof this.#n=="function"&&(this.#n(),this.#n=void 0);let e,n;switch(typeof t){case"function":e=t,n=t.subscribe;break;case"object":if(t===null)break;if(typeof t.compare!="function")throw new TypeError("AdapterSort error: 'compare' attribute is not a function.");e=t.compare,n=t.compare.subscribe??t.subscribe;break}if(typeof e=="function")this.#t.compareFn=e;else{const i=this.#t.compareFn;this.#t.compareFn=null,typeof i=="function"&&this.#e();return}if(typeof n=="function"){if(this.#n=n(this.#e),typeof this.#n!="function")throw new Error("AdapterSort error: sort has 'subscribe' function, but no 'unsubscribe' function is returned.")}else this.#e()}}class Cs{#t;active;length;update;constructor(t){this.#t=t.indexData,this.update=t.update.bind(t),Object.defineProperties(this,{active:{get:()=>t.active},length:{get:()=>t.length}}),Object.freeze(this)}get hash(){return this.#t.hash}*[Symbol.iterator](){const t=this.#t;if(!t.index)return;const e=t.reversed,n=t.index.length;if(e)for(let i=n;--i>=0;)yield t.index[i];else for(let i=0;i<n;i++)yield t.index[i]}}class Is{clear;create;delete;destroy;get;constructor(t){this.clear=t.clear.bind(t),this.create=t.create.bind(t),this.delete=t.delete.bind(t),this.destroy=t.destroy.bind(t),this.get=t.get.bind(t),Object.freeze(this)}}class As extends pu{createSortFn(){return(t,e)=>this.sortData.compareFn(this.hostData[0].get(t),this.hostData[0].get(e))}reduceImpl(){const t=[],e=this.hostData[0];if(!e)return t;const n=this.filtersData.filters;let i=!0;const r=this.indexData.parent;if(Nn.isIterable(r)&&r.active)for(const s of r){const a=e.get(s);i=!0;for(let l=0,c=n.length;l<c;l++)if(!n[l].filter(a)){i=!1;break}i&&t.push(s)}else for(const s of e.keys()){i=!0;const a=e.get(s);for(let l=0,c=n.length;l<c;l++)if(!n[l].filter(a)){i=!1;break}i&&t.push(s)}return t}update(t=!1){if(this.destroyed)return;const e=this.indexData.index,n=this.indexData.hash,i=this.hostData[0],r=this.indexData.parent;(this.filtersData.filters.length===0&&!this.sortData.compareFn||this.indexData.index&&i?.size!==this.indexData.index.length)&&(this.indexData.index=null),this.filtersData.filters.length>0&&(this.indexData.index=this.reduceImpl()),!this.indexData.index&&r?.active&&(this.indexData.index=[...r]),this.sortData.compareFn&&i instanceof Map&&(this.indexData.index||(this.indexData.index=this.indexData.index=[...i.keys()]),this.indexData.index.sort(this.sortFn)),this.calcHashUpdate(e,n,t),this.derivedAdapter?.update(t)}}class kr{#t;#e;#n;#o;#i={filters:[]};#r;#a;#h=!1;#s;#c={compareFn:null};#l=[];#u=!1;constructor(t,e,n){this.#t=t,this.#r=new As(this.#t,this.#d.bind(this),e),this.#a=new Cs(this.#r),this.#o=new Ds(this.#a.update,this.#i),this.#s=new ks(this.#a.update,this.#c),this.#e=new Ms(this.#t,this.#a,kr),this.#n=new Is(this.#e),this.#r.initAdapters(this.#i,this.#c,this.#e);let i,r;if(n!==void 0&&("filters"in n||"sort"in n)){if(n.filters!==void 0)if(Nn.isIterable(n.filters))i=n.filters;else throw new TypeError("DerivedMapReducer error (DataDerivedOptions): 'filters' attribute is not iterable.");if(n.sort!==void 0)if(typeof n.sort=="function")r=n.sort;else if(typeof n.sort=="object"&&n.sort!==null)r=n.sort;else throw new TypeError("DerivedMapReducer error (DataDerivedOptions): 'sort' attribute is not a function or object.")}i&&this.filters.add(...i),r&&this.sort.set(r),this.initialize()}get data(){return this.#t[0]}get derived(){return this.#n}get filters(){return this.#o}get index(){return this.#a}get destroyed(){return this.#u}get length(){const t=this.#t[0];return this.#r.active?this.index.length:t?t.size:0}get reversed(){return this.#h}get sort(){return this.#s}set reversed(t){if(typeof t!="boolean")throw new TypeError("DerivedMapReducer.reversed error: 'reversed' is not a boolean.");this.#h=t,this.#r.reversed=t,this.index.update(!0)}destroy(){this.#u=!0,this.#t=[null],this.#r.update(!0),this.#l.length=0,this.#e.destroy(),this.#r.destroy(),this.#o.clear(),this.#s.clear()}initialize(){}*[Symbol.iterator](){const t=this.#t[0];if(!(this.#u||t===null||t?.size===0))if(this.#r.active)for(const e of this.index)yield t.get(e);else if(this.reversed){const e=[...t.values()];for(let n=e.length;--n>=0;)yield e[n]}else for(const e of t.values())yield e}subscribe(t){return this.#l.push(t),t(this),()=>{const e=this.#l.findIndex(n=>n===t);e>=0&&this.#l.splice(e,1)}}#d(){for(let t=0;t<this.#l.length;t++)this.#l[t](this)}}class ii{#t=[null];#e;#n;#o;#i={filters:[]};#r;#a;#h=!1;#s;#c={compareFn:null};#l=[];#u=!1;constructor(t){let e,n,i;if(t===null)throw new TypeError("DynMapReducer error: 'data' is not an object or Map.");if(t!==void 0&&typeof t!="object"&&!(t instanceof Map))throw new TypeError("DynMapReducer error: 'data' is not an object or Map.");if(t!==void 0&&t instanceof Map)e=t;else if(t!==void 0&&("data"in t||"filters"in t||"sort"in t)){if(t.data!==void 0&&!(t.data instanceof Map))throw new TypeError("DynMapReducer error (DataDynMap): 'data' attribute is not a Map.");if(e=t.data,t.filters!==void 0)if(Nn.isIterable(t.filters))n=t.filters;else throw new TypeError("DynMapReducer error (DataDynMap): 'filters' attribute is not iterable.");if(t.sort!==void 0)if(typeof t.sort=="function")i=t.sort;else if(typeof t.sort=="object"&&t.sort!==null)i=t.sort;else throw new TypeError("DynMapReducer error (DataDynMap): 'sort' attribute is not a function or object.")}e&&(this.#t[0]=e),this.#r=new As(this.#t,this.#d.bind(this)),this.#a=new Cs(this.#r),this.#o=new Ds(this.#a.update,this.#i),this.#s=new ks(this.#a.update,this.#c),this.#e=new Ms(this.#t,this.#a,kr),this.#n=new Is(this.#e),this.#r.initAdapters(this.#i,this.#c,this.#e),n&&this.filters.add(...n),i&&this.sort.set(i),this.initialize()}get data(){return this.#t[0]}get derived(){return this.#n}get filters(){return this.#o}get index(){return this.#a}get destroyed(){return this.#u}get length(){const t=this.#t[0];return this.#r.active?this.#a.length:t?t.size:0}get reversed(){return this.#h}get sort(){return this.#s}set reversed(t){if(typeof t!="boolean")throw new TypeError("DynMapReducer.reversed error: 'reversed' is not a boolean.");this.#h=t,this.#r.reversed=t,this.index.update(!0)}destroy(){this.#u||(this.#u=!0,this.#e.destroy(),this.#t=[null],this.index.update(!0),this.#l.length=0,this.#r.destroy(),this.#o.clear(),this.#s.clear())}initialize(){}setData(t,e=!1){if(t!==null&&!(t instanceof Map))throw new TypeError("DynMapReducer.setData error: 'data' is not iterable.");if(typeof e!="boolean")throw new TypeError("DynMapReducer.setData error: 'replace' is not a boolean.");const n=this.#t[0];if(!(n instanceof Map)||e)this.#t[0]=t instanceof Map?t:null;else if(t instanceof Map&&n instanceof Map){const i=new Set(n.keys());for(const r of t.keys())n.set(r,t.get(r)),i.has(r)&&i.delete(r);for(const r of i)n.delete(r)}else t===null&&(this.#t[0]=null);this.index.update(!0)}subscribe(t){return this.#l.push(t),t(this),()=>{const e=this.#l.findIndex(n=>n===t);e>=0&&this.#l.splice(e,1)}}#d(){for(let t=0;t<this.#l.length;t++)this.#l[t](this)}*[Symbol.iterator](){const t=this.#t[0];if(!(this.#u||t===null||t?.size===0))if(this.#r.active)for(const e of this.index)yield t.get(e);else if(this.reversed){const e=[...t.values()];for(let n=e.length;--n>=0;)yield e[n]}else for(const e of t.values())yield e}}class Cr{static#t=/(?<action>create|delete|update)(?<sep>\.?)(?<name>\w+)/;#e=new Map;#n;#o=new Map;#i=new Set;constructor(t){this.#n=t,this.handleDocChange(),Object.seal(this)}create(t,e){const n=t?.documentName;if(typeof n!="string")throw new TypeError("EmbeddedStoreManager.create error: 'FoundryDoc' does not have a valid 'documentName' property.");const i=this.#n[0];let r=null;if(i)try{r=i.getEmbeddedCollection(n)}catch{console.warn(`EmbeddedStoreManager.create error: No valid embedded collection for: ${n}`)}let s;this.#e.has(n)?s=this.#e.get(n):(s={collection:r,stores:new Map},this.#e.set(n,s));let a,l={},c;if(typeof e=="string")a=e,c=ii;else if(typeof e=="function"&&Qr(e,ii))c=e;else if(V(e))({name:a,ctor:c=ii,...l}=e);else throw new TypeError("EmbeddedStoreManager.create error: 'options' does not conform to allowed parameters.");if(!Qr(c,ii))throw new TypeError("EmbeddedStoreManager.create error: 'ctor' is not a 'DynMapReducer'.");if(a=a??c?.name,typeof a!="string")throw new TypeError("EmbeddedStoreManager.create error: 'name' is not a string.");if(s.stores.has(a))return s.stores.get(a);{const u=r?{data:r,...l}:{...l},h=new c(u);return s.stores.set(a,h),h}}destroy(t,e){let n=0;if(t===void 0){for(const i of this.#e.values()){i.collection=null;for(const r of i.stores.values())r.destroy(),n++}this.#e.clear()}else{const i=t?.documentName;if(typeof i!="string")throw new TypeError("EmbeddedStoreManager.delete error: 'FoundryDoc' does not have a valid 'documentName' property.");if(e===void 0){const r=this.#e.get(i);if(r){r.collection=null;for(const s of r.stores.values())s.destroy(),n++}this.#e.delete(i)}else if(e==="string"){const r=this.#e.get(i);if(r){const s=r.stores.get(e);s&&(s.destroy(),n++)}}}return n>0}get(t,e){const n=t?.documentName;if(typeof n!="string")throw new TypeError("EmbeddedStoreManager.get error: 'FoundryDoc' does not have a valid 'documentName' property.");if(this.#e.has(n))return this.#e.get(n).stores.get(e)}handleDocChange(){const t=this.#n[0];if(t instanceof globalThis.foundry.abstract.Document){const e=new Set(this.#e.keys()),n=Object.entries(t.constructor?.metadata?.embedded??[]);this.#o.clear(),this.#i.clear();for(const[i,r]of n){e.delete(i),this.#i.add(`create${i}`),this.#i.add(`delete${i}`),this.#i.add(`update${i}`),this.#i.add(`create.${r}`),this.#i.add(`delete.${r}`),this.#i.add(`update.${r}`),this.#i.add(`create${r}`),this.#i.add(`delete${r}`),this.#i.add(`update${r}`),this.#o.set(i,i),this.#o.set(r,i);let s=null;try{s=t.getEmbeddedCollection(i)}catch{console.warn(`EmbeddedStoreManager.handleDocUpdate error: No valid embedded collection for: ${i}`)}const a=this.#e.get(i);if(a){a.collection=s;for(const l of a.stores.values())l.setData(s,!0)}}for(const i of e){const r=this.#e.get(i);if(r){r.collection=null;for(const s of r.stores.values())s.setData(null,!0)}}}else{this.#o.clear(),this.#i.clear();for(const e of this.#e.values()){e.collection=null;for(const n of e.stores.values())n.setData(null,!0)}}}handleUpdate(t){if(!this.#i.has(t))return;const e=Cr.#t.exec(t);if(e){const n=e.groups.name,i=this.#o.get(n);if(!this.#e.has(i))return;for(const r of this.#e.get(i).stores.values())r.index.update(!0)}}}class Ir{#t=[void 0];#e;#n;#o;#i={delete:void 0,preDelete:void 0};#r=[];#a;constructor(t,e={}){this.#o=`tjs-document-${Hc.uuidv4()}`,Kr(t)?this.setOptions(t):(this.setOptions(e),this.set(t))}get embedded(){return this.#n||(this.#e=new Cr(this.#t),this.#n={create:(t,e)=>this.#e.create(t,e),destroy:(t,e)=>this.#e.destroy(t,e),get:(t,e)=>this.#e.get(t,e)}),this.#n}get updateOptions(){return this.#a??{}}get uuidv4(){return this.#o}async#h(){const t=this.#t[0];t instanceof globalThis.foundry.abstract.Document&&!t?.collection?.has(t.id)&&(delete t?.apps[this.#o],this.#c(void 0),typeof this.#i.preDelete=="function"&&await this.#i.preDelete(t),this.#s(!1,{action:"delete",data:void 0}),typeof this.#i.delete=="function"&&await this.#i.delete(t),this.#a=void 0)}destroy(){const t=this.#t[0];this.#e&&(this.#e.destroy(),this.#e=void 0,this.#n=void 0),t instanceof globalThis.foundry.abstract.Document&&(delete t?.apps[this.#o],this.#c(void 0)),this.#i.delete=void 0,this.#r.length=0}#s(t=!1,e={}){this.#a=e;const n=this.#t[0];for(let i=0;i<this.#r.length;i++)this.#r[i](n,e);this.#e&&this.#e.handleUpdate(e.renderContext)}get(){return this.#t[0]}static getUUIDFromDataTransfer(t,{actor:e=!0,compendium:n=!0,world:i=!0,types:r=void 0}={}){if(!V(t)||Array.isArray(r)&&!r.includes(t.type))return;let s;return typeof t.uuid=="string"?(t.uuid.startsWith("Compendium")&&n||i)&&(s=t.uuid):e&&i&&t.actorId&&t.type?s=`Actor.${t.actorId}.${t.type}.${t.data._id}`:typeof t.id=="string"&&(n&&typeof t.pack=="string"?s=`Compendium.${t.pack}.${t.id}`:i&&(s=`${t.type}.${t.id}`)),s}set(t,e={}){if(this.#t[0]&&delete this.#t[0].apps[this.#o],t!==void 0&&!(t instanceof globalThis.foundry.abstract.Document))throw new TypeError("TJSDocument set error: 'document' is not a valid Document or undefined.");if(!V(e))throw new TypeError("TJSDocument set error: 'options' is not an object.");t instanceof globalThis.foundry.abstract.Document&&(t.apps[this.#o]={close:this.#h.bind(this),render:this.#s.bind(this)}),this.#c(t),this.#a=e,this.#s()}#c(t){this.#t[0]=t,this.#e&&this.#e.handleDocChange()}async setFromDataTransfer(t,e){return this.setFromUUID(Ir.getUUIDFromDataTransfer(t,e),e)}async setFromUUID(t,e={}){if(typeof t!="string"||t.length===0)return!1;try{const n=await globalThis.fromUuid(t);if(n)return this.set(n,e),!0}catch{}return!1}setOptions(t){if(!V(t))throw new TypeError("TJSDocument error: 'options' is not a plain object.");if(t.delete!==void 0&&typeof t.delete!="function")throw new TypeError("TJSDocument error: 'delete' attribute in options is not a function.");if(t.preDelete!==void 0&&typeof t.preDelete!="function")throw new TypeError("TJSDocument error: 'preDelete' attribute in options is not a function.");(t.delete===void 0||typeof t.delete=="function")&&(this.#i.delete=t.delete),(t.preDelete===void 0||typeof t.preDelete=="function")&&(this.#i.preDelete=t.preDelete)}subscribe(t){this.#r.push(t);const e={action:"subscribe",data:void 0};return t(this.#t[0],e),()=>{const n=this.#r.findIndex(i=>i===t);n>=0&&this.#r.splice(n,1)}}}function Ns(o,t,e){const n=o.slice();return n[13]=t[e],n[14]=t,n[15]=e,n}function Hs(o,t,e){const n=o.slice();return n[16]=t[e],n[18]=e,n}function Rs(o,t){let e,n,i;function r(){return t[11](t[15],t[18])}return n=new Vr({props:{event:t[16],removeFn:r,useWebSocket:t[1]}}),{key:o,first:null,c(){e=De(),mt(n.$$.fragment),this.first=e},m(s,a){B(s,e,a),gt(n,s,a),i=!0},p(s,a){t=s;const l={};a&1&&(l.event=t[16]),a&1&&(l.removeFn=r),a&2&&(l.useWebSocket=t[1]),n.$set(l)},i(s){i||(L(n.$$.fragment,s),i=!0)},o(s){z(n.$$.fragment,s),i=!1},d(s){s&&X(e),bt(n,s)}}}function Fs(o,t){let e,n,i,r,s,a,l,c,u,h,d,p,m,f=[],g=new Map,b,w,T,S,O;function M(){t[7].call(a,t[14],t[15])}function y(...A){return t[8](t[15],...A)}function N(){return t[9](t[15])}function C(){return t[10](t[15])}let R=wt(t[13].obsActions);const x=A=>A[13].obsActions.indexOf(A[16]);for(let A=0;A<R.length;A+=1){let F=Hs(t,R,A),I=x(F);g.set(I,f[A]=Rs(I,F))}return{key:o,first:null,c(){e=k("li"),n=k("div"),i=k("span"),r=pt("VTT Scene Name:"),a=k("input"),c=W(),u=k("button"),u.innerHTML='<i class="fas fa-trash"></i>',h=W(),d=k("button"),d.innerHTML='<i class="fas fa-plus"></i>',p=W(),m=k("ul");for(let A=0;A<f.length;A+=1)f[A].c();b=W(),w=k("hr"),v(i,"for",s="input-"+t[15]),v(a,"name",l="input-"+t[15]),v(a,"class","svelte-obsu-769h5z"),v(u,"type","button"),v(u,"class","svelte-obsu-769h5z"),v(d,"type","button"),v(d,"class","svelte-obsu-769h5z"),v(n,"class","setting svelte-obsu-769h5z"),v(m,"class","svelte-obsu-769h5z"),this.first=e},m(A,F){B(A,e,F),E(e,n),E(n,i),E(i,r),E(n,a),et(a,t[13].sceneName),E(n,c),E(n,u),E(n,h),E(n,d),E(e,p),E(e,m);for(let I=0;I<f.length;I+=1)f[I]&&f[I].m(m,null);B(A,b,F),B(A,w,F),T=!0,S||(O=[G(a,"input",M),G(a,"drop",Ge(Pe(y))),G(u,"click",N),G(d,"click",C)],S=!0)},p(A,F){t=A,(!T||F&1&&s!==(s="input-"+t[15]))&&v(i,"for",s),(!T||F&1&&l!==(l="input-"+t[15]))&&v(a,"name",l),F&1&&a.value!==t[13].sceneName&&et(a,t[13].sceneName),F&19&&(R=wt(t[13].obsActions),Dt(),f=kn(f,F,x,1,t,R,g,m,Zn,Rs,null,Hs),kt())},i(A){if(!T){for(let F=0;F<R.length;F+=1)L(f[F]);T=!0}},o(A){for(let F=0;F<f.length;F+=1)z(f[F]);T=!1},d(A){A&&(X(e),X(b),X(w));for(let F=0;F<f.length;F+=1)f[F].d();S=!1,Vt(O)}}}function mu(o){let t,e,n=[],i=new Map,r,s=wt(o[0]);const a=l=>l[0].indexOf(l[13]);for(let l=0;l<s.length;l+=1){let c=Ns(o,s,l),u=a(c);i.set(u,n[l]=Fs(u,c))}return{c(){t=k("div"),e=k("ul");for(let l=0;l<n.length;l+=1)n[l].c();v(e,"class","svelte-obsu-769h5z"),v(t,"class","scroll svelte-obsu-769h5z")},m(l,c){B(l,t,c),E(t,e);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(l,[c]){c&63&&(s=wt(l[0]),Dt(),n=kn(n,c,a,1,l,s,i,e,Zn,Fs,null,Ns),kt())},i(l){if(!r){for(let c=0;c<s.length;c+=1)L(n[c]);r=!0}},o(l){for(let c=0;c<n.length;c+=1)z(n[c]);r=!1},d(l){l&&X(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function gu(o,t,e){let{eventArray:n}=t,{useWebSocket:i}=t;function r(g){e(0,n=[...n.slice(0,g),...n.slice(g+1,n.length)])}const s=()=>{e(0,n=n.concat(new pc))};function a(g){n[g].obsActions.push(new jr),e(0,n)}function l(g,b){e(0,n[g].obsActions=[...n[g].obsActions.slice(0,b),...n[g].obsActions.slice(b+1,n[g].obsActions.length)],n)}const c=new Ir;async function u(g,b){try{await c.setFromDataTransfer(JSON.parse(b.dataTransfer.getData("text/plain")));const w=c.get();w.documentName.includes("Scene")&&e(0,n[g].sceneName=w.name,n)}catch(w){console.error(w)}}function h(g,b){g[b].sceneName=this.value,e(0,n)}const d=(g,b)=>u(g,b),p=g=>r(g),m=g=>a(g),f=(g,b)=>l(g,b);return o.$$set=g=>{"eventArray"in g&&e(0,n=g.eventArray),"useWebSocket"in g&&e(1,i=g.useWebSocket)},[n,i,r,a,l,u,s,h,d,p,m,f]}class bu extends Ct{constructor(t){super(),It(this,t,gu,mu,Mt,{eventArray:0,useWebSocket:1,handleAdd:6})}get handleAdd(){return this.$$.ctx[6]}}const ri=Math.min,Hn=Math.max,si=Math.round,ai=Math.floor,Tn=o=>({x:o,y:o}),vu={left:"right",right:"left",bottom:"top",top:"bottom"},yu={start:"end",end:"start"};function Ls(o,t,e){return Hn(o,ri(t,e))}function li(o,t){return typeof o=="function"?o(t):o}function Rn(o){return o.split("-")[0]}function ci(o){return o.split("-")[1]}function _s(o){return o==="x"?"y":"x"}function zs(o){return o==="y"?"height":"width"}function hi(o){return["top","bottom"].includes(Rn(o))?"y":"x"}function Ps(o){return _s(hi(o))}function wu(o,t,e){e===void 0&&(e=!1);const n=ci(o),i=Ps(o),r=zs(i);let s=i==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(s=di(s)),[s,di(s)]}function $u(o){const t=di(o);return[nr(o),t,nr(t)]}function nr(o){return o.replace(/start|end/g,t=>yu[t])}function Tu(o,t,e){const n=["left","right"],i=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(o){case"top":case"bottom":return e?t?i:n:t?n:i;case"left":case"right":return t?r:s;default:return[]}}function xu(o,t,e,n){const i=ci(o);let r=Tu(Rn(o),e==="start",n);return i&&(r=r.map(s=>s+"-"+i),t&&(r=r.concat(r.map(nr)))),r}function di(o){return o.replace(/left|right|bottom|top/g,t=>vu[t])}function Eu(o){return{top:0,right:0,bottom:0,left:0,...o}}function Ou(o){return typeof o!="number"?Eu(o):{top:o,right:o,bottom:o,left:o}}function fi(o){return{...o,top:o.y,left:o.x,right:o.x+o.width,bottom:o.y+o.height}}function js(o,t,e){let{reference:n,floating:i}=o;const r=hi(t),s=Ps(t),a=zs(s),l=Rn(t),c=r==="y",u=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,d=n[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:n.y-i.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-i.width,y:h};break;default:p={x:n.x,y:n.y}}switch(ci(t)){case"start":p[s]-=d*(e&&c?-1:1);break;case"end":p[s]+=d*(e&&c?-1:1);break}return p}const Su=async(o,t,e)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:s}=e,a=r.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:o,floating:t,strategy:i}),{x:u,y:h}=js(c,n,l),d=n,p={},m=0;for(let f=0;f<a.length;f++){const{name:g,fn:b}=a[f],{x:w,y:T,data:S,reset:O}=await b({x:u,y:h,initialPlacement:n,placement:d,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:o,floating:t}});u=w??u,h=T??h,p={...p,[g]:{...p[g],...S}},O&&m<=50&&(m++,typeof O=="object"&&(O.placement&&(d=O.placement),O.rects&&(c=O.rects===!0?await s.getElementRects({reference:o,floating:t,strategy:i}):O.rects),{x:u,y:h}=js(c,d,l)),f=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:p}};async function Ws(o,t){var e;t===void 0&&(t={});const{x:n,y:i,platform:r,rects:s,elements:a,strategy:l}=o,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=li(t,o),m=Ou(p),f=a[d?h==="floating"?"reference":"floating":h],g=fi(await r.getClippingRect({element:(e=await(r.isElement==null?void 0:r.isElement(f)))==null||e?f:f.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=h==="floating"?{...s.floating,x:n,y:i}:s.reference,w=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),T=await(r.isElement==null?void 0:r.isElement(w))?await(r.getScale==null?void 0:r.getScale(w))||{x:1,y:1}:{x:1,y:1},S=fi(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(g.top-S.top+m.top)/T.y,bottom:(S.bottom-g.bottom+m.bottom)/T.y,left:(g.left-S.left+m.left)/T.x,right:(S.right-g.right+m.right)/T.x}}const Mu=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(t){var e,n;const{placement:i,middlewareData:r,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:f=!0,...g}=li(o,t);if((e=r.arrow)!=null&&e.alignmentOffset)return{};const b=Rn(i),w=Rn(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=d||(w||!f?[di(a)]:$u(a));!d&&m!=="none"&&S.push(...xu(a,f,m,T));const O=[a,...S],M=await Ws(t,g),y=[];let N=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&y.push(M[b]),h){const A=wu(i,s,T);y.push(M[A[0]],M[A[1]])}if(N=[...N,{placement:i,overflows:y}],!y.every(A=>A<=0)){var C,R;const A=(((C=r.flip)==null?void 0:C.index)||0)+1,F=O[A];if(F)return{data:{index:A,overflows:N},reset:{placement:F}};let I=(R=N.filter(H=>H.overflows[0]<=0).sort((H,P)=>H.overflows[1]-P.overflows[1])[0])==null?void 0:R.placement;if(!I)switch(p){case"bestFit":{var x;const H=(x=N.map(P=>[P.placement,P.overflows.filter(U=>U>0).reduce((U,_)=>U+_,0)]).sort((P,U)=>P[1]-U[1])[0])==null?void 0:x[0];H&&(I=H);break}case"initialPlacement":I=a;break}if(i!==I)return{reset:{placement:I}}}return{}}}};async function Du(o,t){const{placement:e,platform:n,elements:i}=o,r=await(n.isRTL==null?void 0:n.isRTL(i.floating)),s=Rn(e),a=ci(e),l=hi(e)==="y",c=["left","top"].includes(s)?-1:1,u=r&&l?-1:1,h=li(t,o);let{mainAxis:d,crossAxis:p,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}const ku=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(t){var e,n;const{x:i,y:r,placement:s,middlewareData:a}=t,l=await Du(t,o);return s===((e=a.offset)==null?void 0:e.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:s}}}}},Cu=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(t){const{x:e,y:n,placement:i}=t,{mainAxis:r=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:b,y:w}=g;return{x:b,y:w}}},...l}=li(o,t),c={x:e,y:n},u=await Ws(t,l),h=hi(Rn(i)),d=_s(h);let p=c[d],m=c[h];if(r){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",w=p+u[g],T=p-u[b];p=Ls(w,p,T)}if(s){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=m+u[g],T=m-u[b];m=Ls(w,m,T)}const f=a.fn({...t,[d]:p,[h]:m});return{...f,data:{x:f.x-e,y:f.y-n}}}}};function xn(o){return Bs(o)?(o.nodeName||"").toLowerCase():"#document"}function Ne(o){var t;return(o==null||(t=o.ownerDocument)==null?void 0:t.defaultView)||window}function fn(o){var t;return(t=(Bs(o)?o.ownerDocument:o.document)||window.document)==null?void 0:t.documentElement}function Bs(o){return o instanceof Node||o instanceof Ne(o).Node}function pn(o){return o instanceof Element||o instanceof Ne(o).Element}function nn(o){return o instanceof HTMLElement||o instanceof Ne(o).HTMLElement}function Xs(o){return typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof Ne(o).ShadowRoot}function wo(o){const{overflow:t,overflowX:e,overflowY:n,display:i}=Xe(o);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!["inline","contents"].includes(i)}function Iu(o){return["table","td","th"].includes(xn(o))}function or(o){const t=ir(),e=Xe(o);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(e.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(e.contain||"").includes(n))}function Au(o){let t=Kn(o);for(;nn(t)&&!pi(t);){if(or(t))return t;t=Kn(t)}return null}function ir(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pi(o){return["html","body","#document"].includes(xn(o))}function Xe(o){return Ne(o).getComputedStyle(o)}function mi(o){return pn(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.pageXOffset,scrollTop:o.pageYOffset}}function Kn(o){if(xn(o)==="html")return o;const t=o.assignedSlot||o.parentNode||Xs(o)&&o.host||fn(o);return Xs(t)?t.host:t}function qs(o){const t=Kn(o);return pi(t)?o.ownerDocument?o.ownerDocument.body:o.body:nn(t)&&wo(t)?t:qs(t)}function $o(o,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);const i=qs(o),r=i===((n=o.ownerDocument)==null?void 0:n.body),s=Ne(i);return r?t.concat(s,s.visualViewport||[],wo(i)?i:[],s.frameElement&&e?$o(s.frameElement):[]):t.concat(i,$o(i,[],e))}function Ys(o){const t=Xe(o);let e=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=nn(o),r=i?o.offsetWidth:e,s=i?o.offsetHeight:n,a=si(e)!==r||si(n)!==s;return a&&(e=r,n=s),{width:e,height:n,$:a}}function rr(o){return pn(o)?o:o.contextElement}function to(o){const t=rr(o);if(!nn(t))return Tn(1);const e=t.getBoundingClientRect(),{width:n,height:i,$:r}=Ys(t);let s=(r?si(e.width):e.width)/n,a=(r?si(e.height):e.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Nu=Tn(0);function Zs(o){const t=Ne(o);return!ir()||!t.visualViewport?Nu:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Hu(o,t,e){return t===void 0&&(t=!1),!e||t&&e!==Ne(o)?!1:t}function Fn(o,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);const i=o.getBoundingClientRect(),r=rr(o);let s=Tn(1);t&&(n?pn(n)&&(s=to(n)):s=to(o));const a=Hu(r,e,n)?Zs(r):Tn(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,h=i.height/s.y;if(r){const d=Ne(r),p=n&&pn(n)?Ne(n):n;let m=d,f=m.frameElement;for(;f&&n&&p!==m;){const g=to(f),b=f.getBoundingClientRect(),w=Xe(f),T=b.left+(f.clientLeft+parseFloat(w.paddingLeft))*g.x,S=b.top+(f.clientTop+parseFloat(w.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,h*=g.y,l+=T,c+=S,m=Ne(f),f=m.frameElement}}return fi({width:u,height:h,x:l,y:c})}const Ru=[":popover-open",":modal"];function Gs(o){return Ru.some(t=>{try{return o.matches(t)}catch{return!1}})}function Fu(o){let{elements:t,rect:e,offsetParent:n,strategy:i}=o;const r=i==="fixed",s=fn(n),a=t?Gs(t.floating):!1;if(n===s||a&&r)return e;let l={scrollLeft:0,scrollTop:0},c=Tn(1);const u=Tn(0),h=nn(n);if((h||!h&&!r)&&((xn(n)!=="body"||wo(s))&&(l=mi(n)),nn(n))){const d=Fn(n);c=to(n),u.x=d.x+n.clientLeft,u.y=d.y+n.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-l.scrollLeft*c.x+u.x,y:e.y*c.y-l.scrollTop*c.y+u.y}}function Lu(o){return Array.from(o.getClientRects())}function Vs(o){return Fn(fn(o)).left+mi(o).scrollLeft}function _u(o){const t=fn(o),e=mi(o),n=o.ownerDocument.body,i=Hn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),r=Hn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-e.scrollLeft+Vs(o);const a=-e.scrollTop;return Xe(n).direction==="rtl"&&(s+=Hn(t.clientWidth,n.clientWidth)-i),{width:i,height:r,x:s,y:a}}function zu(o,t){const e=Ne(o),n=fn(o),i=e.visualViewport;let r=n.clientWidth,s=n.clientHeight,a=0,l=0;if(i){r=i.width,s=i.height;const c=ir();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:s,x:a,y:l}}function Pu(o,t){const e=Fn(o,!0,t==="fixed"),n=e.top+o.clientTop,i=e.left+o.clientLeft,r=nn(o)?to(o):Tn(1),s=o.clientWidth*r.x,a=o.clientHeight*r.y,l=i*r.x,c=n*r.y;return{width:s,height:a,x:l,y:c}}function Us(o,t,e){let n;if(t==="viewport")n=zu(o,e);else if(t==="document")n=_u(fn(o));else if(pn(t))n=Pu(t,e);else{const i=Zs(o);n={...t,x:t.x-i.x,y:t.y-i.y}}return fi(n)}function Js(o,t){const e=Kn(o);return e===t||!pn(e)||pi(e)?!1:Xe(e).position==="fixed"||Js(e,t)}function ju(o,t){const e=t.get(o);if(e)return e;let n=$o(o,[],!1).filter(a=>pn(a)&&xn(a)!=="body"),i=null;const r=Xe(o).position==="fixed";let s=r?Kn(o):o;for(;pn(s)&&!pi(s);){const a=Xe(s),l=or(s);!l&&a.position==="fixed"&&(i=null),(r?!l&&!i:!l&&a.position==="static"&&i&&["absolute","fixed"].includes(i.position)||wo(s)&&!l&&Js(o,s))?n=n.filter(c=>c!==s):i=a,s=Kn(s)}return t.set(o,n),n}function Wu(o){let{element:t,boundary:e,rootBoundary:n,strategy:i}=o;const r=[...e==="clippingAncestors"?ju(t,this._c):[].concat(e),n],s=r[0],a=r.reduce((l,c)=>{const u=Us(t,c,i);return l.top=Hn(u.top,l.top),l.right=ri(u.right,l.right),l.bottom=ri(u.bottom,l.bottom),l.left=Hn(u.left,l.left),l},Us(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Bu(o){const{width:t,height:e}=Ys(o);return{width:t,height:e}}function Xu(o,t,e){const n=nn(t),i=fn(t),r=e==="fixed",s=Fn(o,!0,r,t);let a={scrollLeft:0,scrollTop:0};const l=Tn(0);if(n||!n&&!r)if((xn(t)!=="body"||wo(i))&&(a=mi(t)),n){const h=Fn(t,!0,r,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&(l.x=Vs(i));const c=s.left+a.scrollLeft-l.x,u=s.top+a.scrollTop-l.y;return{x:c,y:u,width:s.width,height:s.height}}function Qs(o,t){return!nn(o)||Xe(o).position==="fixed"?null:t?t(o):o.offsetParent}function Ks(o,t){const e=Ne(o);if(!nn(o)||Gs(o))return e;let n=Qs(o,t);for(;n&&Iu(n)&&Xe(n).position==="static";)n=Qs(n,t);return n&&(xn(n)==="html"||xn(n)==="body"&&Xe(n).position==="static"&&!or(n))?e:n||Au(o)||e}const qu=async function(o){const t=this.getOffsetParent||Ks,e=this.getDimensions;return{reference:Xu(o.reference,await t(o.floating),o.strategy),floating:{x:0,y:0,...await e(o.floating)}}};function Yu(o){return Xe(o).direction==="rtl"}const Zu={convertOffsetParentRelativeRectToViewportRelativeRect:Fu,getDocumentElement:fn,getClippingRect:Wu,getOffsetParent:Ks,getElementRects:qu,getClientRects:Lu,getDimensions:Bu,getScale:to,isElement:pn,isRTL:Yu};function Gu(o,t){let e=null,n;const i=fn(o);function r(){var a;clearTimeout(n),(a=e)==null||a.disconnect(),e=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const{left:c,top:u,width:h,height:d}=o.getBoundingClientRect();if(a||t(),!h||!d)return;const p=ai(u),m=ai(i.clientWidth-(c+h)),f=ai(i.clientHeight-(u+d)),g=ai(c),b={rootMargin:-p+"px "+-m+"px "+-f+"px "+-g+"px",threshold:Hn(0,ri(1,l))||1};let w=!0;function T(S){const O=S[0].intersectionRatio;if(O!==l){if(!w)return s();O?s(!1,O):n=setTimeout(()=>{s(!1,1e-7)},100)}w=!1}try{e=new IntersectionObserver(T,{...b,root:i.ownerDocument})}catch{e=new IntersectionObserver(T,b)}e.observe(o)}return s(!0),r}function Vu(o,t,e,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=rr(o),u=i||r?[...c?$o(c):[],...$o(t)]:[];u.forEach(b=>{i&&b.addEventListener("scroll",e,{passive:!0}),r&&b.addEventListener("resize",e)});const h=c&&a?Gu(c,e):null;let d=-1,p=null;s&&(p=new ResizeObserver(b=>{let[w]=b;w&&w.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var T;(T=p)==null||T.observe(t)})),e()}),c&&!l&&p.observe(c),p.observe(t));let m,f=l?Fn(o):null;l&&g();function g(){const b=Fn(o);f&&(b.x!==f.x||b.y!==f.y||b.width!==f.width||b.height!==f.height)&&e(),f=b,m=requestAnimationFrame(g)}return e(),()=>{var b;u.forEach(w=>{i&&w.removeEventListener("scroll",e),r&&w.removeEventListener("resize",e)}),h?.(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const Uu=Cu,Ju=Mu,Qu=(o,t,e)=>{const n=new Map,i={platform:Zu,...e},r={...i.platform,_c:n};return Su(o,t,{...i,platform:r})};function Ku(o){let t,e;const n={autoUpdate:!0};let i=o;const r=u=>({...n,...o||{},...u||{}}),s=u=>{t&&e&&(i=r(u),Qu(t,e,i).then(h=>{Object.assign(e.style,{position:h.strategy,left:`${h.x}px`,top:`${h.y}px`}),i?.onComputed&&i.onComputed(h)}))},a=u=>{if("subscribe"in u)return c(u),{};t=u,s()},l=(u,h)=>{let d;e=u,i=r(h),setTimeout(()=>s(h),0),s(h);const p=()=>{d&&(d(),d=void 0)},m=({autoUpdate:f}=i||{})=>{p(),f!==!1&&Zo().then(()=>Vu(t,e,()=>s(i),f===!0?{}:f))};return d=m(),{update(f){s(f),d=m(f)},destroy(){p()}}},c=u=>{const h=u.subscribe(d=>{t===void 0?(t=d,s()):(Object.assign(t,d),s())});uo(h)};return[a,l,s]}function th({loadOptions:o,filterText:t,items:e,multiple:n,value:i,itemId:r,groupBy:s,filterSelectedItems:a,itemFilter:l,convertStringItemsToObjects:c,filterGroupedItems:u,label:h}){if(e&&o)return e;if(!e)return[];e&&e.length>0&&typeof e[0]!="object"&&(e=c(e));let d=e.filter(p=>{let m=l(p[h],t,p);return m&&n&&i?.length&&(m=!i.some(f=>a?f[r]===p[r]:!1)),m});return s&&(d=u(d)),d}async function eh({dispatch:o,loadOptions:t,convertStringItemsToObjects:e,filterText:n}){let i=await t(n).catch(r=>{console.warn("svelte-select loadOptions error :>> ",r),o("error",{type:"loadOptions",details:r})});if(i&&!i.cancelled)return i?(i&&i.length>0&&typeof i[0]!="object"&&(i=e(i)),o("loaded",{items:i})):i=[],{filteredItems:i,loading:!1,focused:!0,listOpen:!0}}function nh(o){let t,e;return{c(){t=Vn("svg"),e=Vn("path"),v(e,"fill","currentColor"),v(e,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),v(t,"width","100%"),v(t,"height","100%"),v(t,"viewBox","0 0 20 20"),v(t,"focusable","false"),v(t,"aria-hidden","true"),v(t,"class","svelte-obsu-qbd276")},m(n,i){B(n,t,i),E(t,e)},p:_t,i:_t,o:_t,d(n){n&&X(t)}}}class oh extends Ct{constructor(t){super(),It(this,t,null,nh,Mt,{})}}function ih(o){let t,e;return{c(){t=Vn("svg"),e=Vn("path"),v(e,"fill","currentColor"),v(e,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),v(t,"width","100%"),v(t,"height","100%"),v(t,"viewBox","-2 -2 50 50"),v(t,"focusable","false"),v(t,"aria-hidden","true"),v(t,"role","presentation"),v(t,"class","svelte-obsu-whdbu1")},m(n,i){B(n,t,i),E(t,e)},p:_t,i:_t,o:_t,d(n){n&&X(t)}}}class gi extends Ct{constructor(t){super(),It(this,t,null,ih,Mt,{})}}function rh(o){let t,e;return{c(){t=Vn("svg"),e=Vn("circle"),v(e,"class","circle_path svelte-obsu-1p3nqvd"),v(e,"cx","50"),v(e,"cy","50"),v(e,"r","20"),v(e,"fill","none"),v(e,"stroke","currentColor"),v(e,"stroke-width","5"),v(e,"stroke-miterlimit","10"),v(t,"class","loading svelte-obsu-1p3nqvd"),v(t,"viewBox","25 25 50 50")},m(n,i){B(n,t,i),E(t,e)},p:_t,i:_t,o:_t,d(n){n&&X(t)}}}class sh extends Ct{constructor(t){super(),It(this,t,null,rh,Mt,{})}}const ah=o=>({value:o[0]&8}),ta=o=>({value:o[3]}),lh=o=>({value:o[0]&8}),ea=o=>({value:o[3]}),ch=o=>({listOpen:o[0]&64}),na=o=>({listOpen:o[6]}),uh=o=>({}),oa=o=>({}),hh=o=>({}),ia=o=>({}),dh=o=>({selection:o[0]&8}),ra=o=>({selection:o[3]});function sa(o,t,e){const n=o.slice();return n[126]=t[e],n[128]=e,n}const fh=o=>({}),aa=o=>({}),ph=o=>({selection:o[0]&8}),la=o=>({selection:o[126],index:o[128]}),mh=o=>({}),ca=o=>({}),gh=o=>({}),ua=o=>({}),bh=o=>({}),ha=o=>({});function da(o,t,e){const n=o.slice();return n[126]=t[e],n[128]=e,n}const vh=o=>({item:o[0]&16777216}),fa=o=>({item:o[126],index:o[128]}),yh=o=>({filteredItems:o[0]&16777216}),pa=o=>({filteredItems:o[24]}),wh=o=>({}),ma=o=>({});function ga(o){let t,e,n,i,r,s,a,l,c=o[50]["list-prepend"]&&ba(o);const u=[xh,Th,$h],h=[];function d(m,f){return m[50].list?0:m[24].length>0?1:m[19]?-1:2}~(n=d(o))&&(i=h[n]=u[n](o));let p=o[50]["list-append"]&&ya(o);return{c(){t=k("div"),c&&c.c(),e=W(),i&&i.c(),r=W(),p&&p.c(),v(t,"class","svelte-select-list svelte-obsu-82qwg8"),v(t,"role","none"),Tt(t,"prefloat",o[28])},m(m,f){B(m,t,f),c&&c.m(t,null),E(t,e),~n&&h[n].m(t,null),E(t,r),p&&p.m(t,null),o[91](t),s=!0,a||(l=[be(o[49].call(null,t)),G(t,"scroll",o[41]),G(t,"pointerup",Ge(Pe(o[85]))),G(t,"mousedown",Ge(Pe(o[86])))],a=!0)},p(m,f){m[50]["list-prepend"]?c?(c.p(m,f),f[1]&524288&&L(c,1)):(c=ba(m),c.c(),L(c,1),c.m(t,e)):c&&(Dt(),z(c,1,1,()=>{c=null}),kt());let g=n;n=d(m),n===g?~n&&h[n].p(m,f):(i&&(Dt(),z(h[g],1,1,()=>{h[g]=null}),kt()),~n?(i=h[n],i?i.p(m,f):(i=h[n]=u[n](m),i.c()),L(i,1),i.m(t,r)):i=null),m[50]["list-append"]?p?(p.p(m,f),f[1]&524288&&L(p,1)):(p=ya(m),p.c(),L(p,1),p.m(t,null)):p&&(Dt(),z(p,1,1,()=>{p=null}),kt()),(!s||f[0]&268435456)&&Tt(t,"prefloat",m[28])},i(m){s||(L(c),L(i),L(p),s=!0)},o(m){z(c),z(i),z(p),s=!1},d(m){m&&X(t),c&&c.d(),~n&&h[n].d(),p&&p.d(),o[91](null),a=!1,Vt(l)}}}function ba(o){let t;const e=o[83]["list-prepend"],n=ue(e,o,o[82],ma);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),t=!0},p(i,r){n&&n.p&&(!t||r[2]&1048576)&&he(n,e,i,i[82],t?fe(e,i[82],r,wh):de(i[82]),ma)},i(i){t||(L(n,i),t=!0)},o(i){z(n,i),t=!1},d(i){n&&n.d(i)}}}function $h(o){let t;const e=o[83].empty,n=ue(e,o,o[82],ha),i=n||Eh();return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s[2]&1048576)&&he(n,e,r,r[82],t?fe(e,r[82],s,bh):de(r[82]),ha)},i(r){t||(L(i,r),t=!0)},o(r){z(i,r),t=!1},d(r){i&&i.d(r)}}}function Th(o){let t,e,n=wt(o[24]),i=[];for(let s=0;s<n.length;s+=1)i[s]=va(da(o,n,s));const r=s=>z(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=De()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);B(s,t,a),e=!0},p(s,a){if(a[0]&1627402376|a[1]&28672|a[2]&1048576){n=wt(s[24]);let l;for(l=0;l<n.length;l+=1){const c=da(s,n,l);i[l]?(i[l].p(c,a),L(i[l],1)):(i[l]=va(c),i[l].c(),L(i[l],1),i[l].m(t.parentNode,t))}for(Dt(),l=n.length;l<i.length;l+=1)r(l);kt()}},i(s){if(!e){for(let a=0;a<n.length;a+=1)L(i[a]);e=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)z(i[a]);e=!1},d(s){s&&X(t),Ie(i,s)}}}function xh(o){let t;const e=o[83].list,n=ue(e,o,o[82],pa);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),t=!0},p(i,r){n&&n.p&&(!t||r[0]&16777216|r[2]&1048576)&&he(n,e,i,i[82],t?fe(e,i[82],r,yh):de(i[82]),pa)},i(i){t||(L(n,i),t=!0)},o(i){z(n,i),t=!1},d(i){n&&n.d(i)}}}function Eh(o){let t;return{c(){t=k("div"),t.textContent="No options",v(t,"class","empty svelte-obsu-82qwg8")},m(e,n){B(e,t,n)},p:_t,d(e){e&&X(t)}}}function Oh(o){let t=o[126]?.[o[12]]+"",e;return{c(){e=pt(t)},m(n,i){B(n,e,i)},p(n,i){i[0]&16781312&&t!==(t=n[126]?.[n[12]]+"")&&Me(e,t)},d(n){n&&X(e)}}}function va(o){let t,e,n,i,r,s,a,l;const c=o[83].item,u=ue(c,o,o[82],fa),h=u||Oh(o);function d(){return o[88](o[128])}function p(){return o[89](o[128])}function m(){return o[90](o[126],o[128])}return{c(){t=k("div"),e=k("div"),h&&h.c(),r=W(),v(e,"class","item svelte-obsu-82qwg8"),Tt(e,"list-group-title",o[126].groupHeader),Tt(e,"active",o[45](o[126],o[3],o[13])),Tt(e,"first",Lh(o[128])),Tt(e,"hover",o[7]===o[128]),Tt(e,"group-item",o[126].groupItem),Tt(e,"not-selectable",o[126]?.selectable===!1),v(t,"class","list-item svelte-obsu-82qwg8"),v(t,"tabindex","-1"),v(t,"role","none")},m(f,g){B(f,t,g),E(t,e),h&&h.m(e,null),E(t,r),s=!0,a||(l=[be(n=o[46].call(null,e,{scroll:o[45](o[126],o[3],o[13]),listDom:o[30]})),be(i=o[47].call(null,e,{scroll:o[29]===o[128],listDom:o[30]})),G(t,"mouseover",d),G(t,"focus",p),G(t,"click",Ge(m)),G(t,"keydown",Ge(Pe(o[87])))],a=!0)},p(f,g){o=f,u?u.p&&(!s||g[0]&16777216|g[2]&1048576)&&he(u,c,o,o[82],s?fe(c,o[82],g,vh):de(o[82]),fa):h&&h.p&&(!s||g[0]&16781312)&&h.p(o,s?g:[-1,-1,-1,-1,-1]),n&&ze(n.update)&&g[0]&1090527240&&n.update.call(null,{scroll:o[45](o[126],o[3],o[13]),listDom:o[30]}),i&&ze(i.update)&&g[0]&1610612736&&i.update.call(null,{scroll:o[29]===o[128],listDom:o[30]}),(!s||g[0]&16777216)&&Tt(e,"list-group-title",o[126].groupHeader),(!s||g[0]&16785416|g[1]&16384)&&Tt(e,"active",o[45](o[126],o[3],o[13])),(!s||g[0]&128)&&Tt(e,"hover",o[7]===o[128]),(!s||g[0]&16777216)&&Tt(e,"group-item",o[126].groupItem),(!s||g[0]&16777216)&&Tt(e,"not-selectable",o[126]?.selectable===!1)},i(f){s||(L(h,f),s=!0)},o(f){z(h,f),s=!1},d(f){f&&X(t),h&&h.d(f),a=!1,Vt(l)}}}function ya(o){let t;const e=o[83]["list-append"],n=ue(e,o,o[82],ua);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),t=!0},p(i,r){n&&n.p&&(!t||r[2]&1048576)&&he(n,e,i,i[82],t?fe(e,i[82],r,gh):de(i[82]),ua)},i(i){t||(L(n,i),t=!0)},o(i){z(n,i),t=!1},d(i){n&&n.d(i)}}}function wa(o){let t,e,n,i,r;return{c(){t=k("span"),e=pt(o[32]),n=W(),i=k("span"),r=pt(o[31]),v(t,"id","aria-selection"),v(t,"class","svelte-obsu-82qwg8"),v(i,"id","aria-context"),v(i,"class","svelte-obsu-82qwg8")},m(s,a){B(s,t,a),E(t,e),B(s,n,a),B(s,i,a),E(i,r)},p(s,a){a[1]&2&&Me(e,s[32]),a[1]&1&&Me(r,s[31])},d(s){s&&(X(t),X(n),X(i))}}}function $a(o){let t,e,n,i;const r=[Mh,Sh],s=[];function a(l,c){return l[9]?0:1}return t=a(o),e=s[t]=r[t](o),{c(){e.c(),n=De()},m(l,c){s[t].m(l,c),B(l,n,c),i=!0},p(l,c){let u=t;t=a(l),t===u?s[t].p(l,c):(Dt(),z(s[u],1,1,()=>{s[u]=null}),kt(),e=s[t],e?e.p(l,c):(e=s[t]=r[t](l),e.c()),L(e,1),e.m(n.parentNode,n))},i(l){i||(L(e),i=!0)},o(l){z(e),i=!1},d(l){l&&X(n),s[t].d(l)}}}function Sh(o){let t,e;const n=o[83].selection,i=ue(n,o,o[82],ra),r=i||Dh(o);return{c(){t=k("div"),r&&r.c(),v(t,"class","selected-item svelte-obsu-82qwg8"),Tt(t,"hide-selected-item",o[35])},m(s,a){B(s,t,a),r&&r.m(t,null),e=!0},p(s,a){i?i.p&&(!e||a[0]&8|a[2]&1048576)&&he(i,n,s,s[82],e?fe(n,s[82],a,dh):de(s[82]),ra):r&&r.p&&(!e||a[0]&4104)&&r.p(s,e?a:[-1,-1,-1,-1,-1]),(!e||a[1]&16)&&Tt(t,"hide-selected-item",s[35])},i(s){e||(L(r,s),e=!0)},o(s){z(r,s),e=!1},d(s){s&&X(t),r&&r.d(s)}}}function Mh(o){let t,e,n=wt(o[3]),i=[];for(let s=0;s<n.length;s+=1)i[s]=xa(sa(o,n,s));const r=s=>z(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=De()},m(s,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);B(s,t,a),e=!0},p(s,a){if(a[0]&67116040|a[1]&32|a[2]&1048576){n=wt(s[3]);let l;for(l=0;l<n.length;l+=1){const c=sa(s,n,l);i[l]?(i[l].p(c,a),L(i[l],1)):(i[l]=xa(c),i[l].c(),L(i[l],1),i[l].m(t.parentNode,t))}for(Dt(),l=n.length;l<i.length;l+=1)r(l);kt()}},i(s){if(!e){for(let a=0;a<n.length;a+=1)L(i[a]);e=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)z(i[a]);e=!1},d(s){s&&X(t),Ie(i,s)}}}function Dh(o){let t=o[3][o[12]]+"",e;return{c(){e=pt(t)},m(n,i){B(n,e,i)},p(n,i){i[0]&4104&&t!==(t=n[3][n[12]]+"")&&Me(e,t)},d(n){n&&X(e)}}}function kh(o){let t=o[126][o[12]]+"",e;return{c(){e=pt(t)},m(n,i){B(n,e,i)},p(n,i){i[0]&4104&&t!==(t=n[126][n[12]]+"")&&Me(e,t)},d(n){n&&X(e)}}}function Ta(o){let t,e,n,i;const r=o[83]["multi-clear-icon"],s=ue(r,o,o[82],aa),a=s||Ch();function l(){return o[92](o[128])}return{c(){t=k("div"),a&&a.c(),v(t,"class","multi-item-clear svelte-obsu-82qwg8")},m(c,u){B(c,t,u),a&&a.m(t,null),e=!0,n||(i=G(t,"pointerup",Ge(Pe(l))),n=!0)},p(c,u){o=c,s&&s.p&&(!e||u[2]&1048576)&&he(s,r,o,o[82],e?fe(r,o[82],u,fh):de(o[82]),aa)},i(c){e||(L(a,c),e=!0)},o(c){z(a,c),e=!1},d(c){c&&X(t),a&&a.d(c),n=!1,i()}}}function Ch(o){let t,e;return t=new gi({}),{c(){mt(t.$$.fragment)},m(n,i){gt(t,n,i),e=!0},i(n){e||(L(t.$$.fragment,n),e=!0)},o(n){z(t.$$.fragment,n),e=!1},d(n){bt(t,n)}}}function xa(o){let t,e,n,i,r,s,a;const l=o[83].selection,c=ue(l,o,o[82],la),u=c||kh(o);let h=!o[11]&&!o[10]&&gi&&Ta(o);function d(){return o[93](o[128])}return{c(){t=k("div"),e=k("span"),u&&u.c(),n=W(),h&&h.c(),i=W(),v(e,"class","multi-item-text svelte-obsu-82qwg8"),v(t,"class","multi-item svelte-obsu-82qwg8"),v(t,"role","none"),Tt(t,"active",o[26]===o[128]),Tt(t,"disabled",o[11])},m(p,m){B(p,t,m),E(t,e),u&&u.m(e,null),E(t,n),h&&h.m(t,null),E(t,i),r=!0,s||(a=[G(t,"click",Pe(d)),G(t,"keydown",Ge(Pe(o[84])))],s=!0)},p(p,m){o=p,c?c.p&&(!r||m[0]&8|m[2]&1048576)&&he(c,l,o,o[82],r?fe(l,o[82],m,ph):de(o[82]),la):u&&u.p&&(!r||m[0]&4104)&&u.p(o,r?m:[-1,-1,-1,-1,-1]),!o[11]&&!o[10]&&gi?h?(h.p(o,m),m[0]&3072&&L(h,1)):(h=Ta(o),h.c(),L(h,1),h.m(t,i)):h&&(Dt(),z(h,1,1,()=>{h=null}),kt()),(!r||m[0]&67108864)&&Tt(t,"active",o[26]===o[128]),(!r||m[0]&2048)&&Tt(t,"disabled",o[11])},i(p){r||(L(u,p),L(h),r=!0)},o(p){z(u,p),z(h),r=!1},d(p){p&&X(t),u&&u.d(p),h&&h.d(),s=!1,Vt(a)}}}function Ea(o){let t,e;const n=o[83]["loading-icon"],i=ue(n,o,o[82],ia),r=i||Ih();return{c(){t=k("div"),r&&r.c(),v(t,"class","icon loading svelte-obsu-82qwg8"),v(t,"aria-hidden","true")},m(s,a){B(s,t,a),r&&r.m(t,null),e=!0},p(s,a){i&&i.p&&(!e||a[2]&1048576)&&he(i,n,s,s[82],e?fe(n,s[82],a,hh):de(s[82]),ia)},i(s){e||(L(r,s),e=!0)},o(s){z(r,s),e=!1},d(s){s&&X(t),r&&r.d(s)}}}function Ih(o){let t,e;return t=new sh({}),{c(){mt(t.$$.fragment)},m(n,i){gt(t,n,i),e=!0},i(n){e||(L(t.$$.fragment,n),e=!0)},o(n){z(t.$$.fragment,n),e=!1},d(n){bt(t,n)}}}function Oa(o){let t,e,n,i;const r=o[83]["clear-icon"],s=ue(r,o,o[82],oa),a=s||Ah();return{c(){t=k("button"),a&&a.c(),v(t,"type","button"),v(t,"class","icon clear-select svelte-obsu-82qwg8")},m(l,c){B(l,t,c),a&&a.m(t,null),e=!0,n||(i=G(t,"click",o[22]),n=!0)},p(l,c){s&&s.p&&(!e||c[2]&1048576)&&he(s,r,l,l[82],e?fe(r,l[82],c,uh):de(l[82]),oa)},i(l){e||(L(a,l),e=!0)},o(l){z(a,l),e=!1},d(l){l&&X(t),a&&a.d(l),n=!1,i()}}}function Ah(o){let t,e;return t=new gi({}),{c(){mt(t.$$.fragment)},m(n,i){gt(t,n,i),e=!0},i(n){e||(L(t.$$.fragment,n),e=!0)},o(n){z(t.$$.fragment,n),e=!1},d(n){bt(t,n)}}}function Sa(o){let t,e;const n=o[83]["chevron-icon"],i=ue(n,o,o[82],na),r=i||Nh();return{c(){t=k("div"),r&&r.c(),v(t,"class","icon chevron svelte-obsu-82qwg8"),v(t,"aria-hidden","true")},m(s,a){B(s,t,a),r&&r.m(t,null),e=!0},p(s,a){i&&i.p&&(!e||a[0]&64|a[2]&1048576)&&he(i,n,s,s[82],e?fe(n,s[82],a,ch):de(s[82]),na)},i(s){e||(L(r,s),e=!0)},o(s){z(r,s),e=!1},d(s){s&&X(t),r&&r.d(s)}}}function Nh(o){let t,e;return t=new oh({}),{c(){mt(t.$$.fragment)},m(n,i){gt(t,n,i),e=!0},i(n){e||(L(t.$$.fragment,n),e=!0)},o(n){z(t.$$.fragment,n),e=!1},d(n){bt(t,n)}}}function Hh(o){let t,e;return{c(){t=k("input"),v(t,"name",o[8]),v(t,"type","hidden"),t.value=e=o[3]?JSON.stringify(o[3]):null,v(t,"class","svelte-obsu-82qwg8")},m(n,i){B(n,t,i)},p(n,i){i[0]&256&&v(t,"name",n[8]),i[0]&8&&e!==(e=n[3]?JSON.stringify(n[3]):null)&&(t.value=e)},d(n){n&&X(t)}}}function Ma(o){let t;const e=o[83].required,n=ue(e,o,o[82],ta),i=n||Rh();return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s[0]&8|s[2]&1048576)&&he(n,e,r,r[82],t?fe(e,r[82],s,ah):de(r[82]),ta)},i(r){t||(L(i,r),t=!0)},o(r){z(i,r),t=!1},d(r){i&&i.d(r)}}}function Rh(o){let t;return{c(){t=k("select"),v(t,"class","required svelte-obsu-82qwg8"),t.required=!0,v(t,"tabindex","-1"),v(t,"aria-hidden","true")},m(e,n){B(e,t,n)},p:_t,d(e){e&&X(t)}}}function Fh(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S,O=o[6]&&ga(o),M=o[2]&&wa(o);const y=o[83].prepend,N=ue(y,o,o[82],ca);let C=o[25]&&$a(o),R=[{readOnly:u=!o[17]},o[27],{placeholder:o[33]},{style:o[18]},{disabled:o[11]}],x={};for(let j=0;j<R.length;j+=1)x=co(x,R[j]);let A=o[5]&&Ea(o),F=o[34]&&Oa(o),I=o[20]&&Sa(o);const H=o[83]["input-hidden"],P=ue(H,o,o[82],ea),U=P||Hh(o);let _=o[16]&&(!o[3]||o[3].length===0)&&Ma(o);return{c(){t=k("div"),O&&O.c(),e=W(),n=k("span"),M&&M.c(),i=W(),r=k("div"),N&&N.c(),s=W(),a=k("div"),C&&C.c(),l=W(),c=k("input"),h=W(),d=k("div"),A&&A.c(),p=W(),F&&F.c(),m=W(),I&&I.c(),f=W(),U&&U.c(),g=W(),_&&_.c(),v(n,"aria-live","polite"),v(n,"aria-atomic","false"),v(n,"aria-relevant","additions text"),v(n,"class","a11y-text svelte-obsu-82qwg8"),v(r,"class","prepend svelte-obsu-82qwg8"),Xr(c,x),Tt(c,"svelte-obsu-82qwg8",!0),v(a,"class","value-container svelte-obsu-82qwg8"),v(d,"class","indicators svelte-obsu-82qwg8"),v(t,"class",b="svelte-select "+o[21]+" svelte-obsu-82qwg8"),v(t,"style",o[14]),v(t,"role","none"),Tt(t,"multi",o[9]),Tt(t,"disabled",o[11]),Tt(t,"focused",o[2]),Tt(t,"list-open",o[6]),Tt(t,"show-chevron",o[20]),Tt(t,"error",o[15])},m(j,J){B(j,t,J),O&&O.m(t,null),E(t,e),E(t,n),M&&M.m(n,null),E(t,i),E(t,r),N&&N.m(r,null),E(t,s),E(t,a),C&&C.m(a,null),E(a,l),E(a,c),c.autofocus&&c.focus(),o[94](c),et(c,o[4]),E(t,h),E(t,d),A&&A.m(d,null),E(d,p),F&&F.m(d,null),E(d,m),I&&I.m(d,null),E(t,f),U&&U.m(t,null),E(t,g),_&&_.m(t,null),o[96](t),w=!0,T||(S=[G(window,"click",o[42]),G(window,"keydown",o[37]),G(c,"keydown",o[37]),G(c,"blur",o[39]),G(c,"focus",o[38]),G(c,"input",o[95]),G(t,"pointerup",Pe(o[40])),be(o[48].call(null,t))],T=!0)},p(j,J){j[6]?O?(O.p(j,J),J[0]&64&&L(O,1)):(O=ga(j),O.c(),L(O,1),O.m(t,e)):O&&(Dt(),z(O,1,1,()=>{O=null}),kt()),j[2]?M?M.p(j,J):(M=wa(j),M.c(),M.m(n,null)):M&&(M.d(1),M=null),N&&N.p&&(!w||J[2]&1048576)&&he(N,y,j,j[82],w?fe(y,j[82],J,mh):de(j[82]),ca),j[25]?C?(C.p(j,J),J[0]&33554432&&L(C,1)):(C=$a(j),C.c(),L(C,1),C.m(a,l)):C&&(Dt(),z(C,1,1,()=>{C=null}),kt()),Xr(c,x=po(R,[(!w||J[0]&131072&&u!==(u=!j[17]))&&{readOnly:u},J[0]&134217728&&j[27],(!w||J[1]&4)&&{placeholder:j[33]},(!w||J[0]&262144)&&{style:j[18]},(!w||J[0]&2048)&&{disabled:j[11]}])),J[0]&16&&c.value!==j[4]&&et(c,j[4]),Tt(c,"svelte-obsu-82qwg8",!0),j[5]?A?(A.p(j,J),J[0]&32&&L(A,1)):(A=Ea(j),A.c(),L(A,1),A.m(d,p)):A&&(Dt(),z(A,1,1,()=>{A=null}),kt()),j[34]?F?(F.p(j,J),J[1]&8&&L(F,1)):(F=Oa(j),F.c(),L(F,1),F.m(d,m)):F&&(Dt(),z(F,1,1,()=>{F=null}),kt()),j[20]?I?(I.p(j,J),J[0]&1048576&&L(I,1)):(I=Sa(j),I.c(),L(I,1),I.m(d,null)):I&&(Dt(),z(I,1,1,()=>{I=null}),kt()),P?P.p&&(!w||J[0]&8|J[2]&1048576)&&he(P,H,j,j[82],w?fe(H,j[82],J,lh):de(j[82]),ea):U&&U.p&&(!w||J[0]&264)&&U.p(j,w?J:[-1,-1,-1,-1,-1]),j[16]&&(!j[3]||j[3].length===0)?_?(_.p(j,J),J[0]&65544&&L(_,1)):(_=Ma(j),_.c(),L(_,1),_.m(t,null)):_&&(Dt(),z(_,1,1,()=>{_=null}),kt()),(!w||J[0]&2097152&&b!==(b="svelte-select "+j[21]+" svelte-obsu-82qwg8"))&&v(t,"class",b),(!w||J[0]&16384)&&v(t,"style",j[14]),(!w||J[0]&2097664)&&Tt(t,"multi",j[9]),(!w||J[0]&2099200)&&Tt(t,"disabled",j[11]),(!w||J[0]&2097156)&&Tt(t,"focused",j[2]),(!w||J[0]&2097216)&&Tt(t,"list-open",j[6]),(!w||J[0]&3145728)&&Tt(t,"show-chevron",j[20]),(!w||J[0]&2129920)&&Tt(t,"error",j[15])},i(j){w||(L(O),L(N,j),L(C),L(A),L(F),L(I),L(U,j),L(_),w=!0)},o(j){z(O),z(N,j),z(C),z(A),z(F),z(I),z(U,j),z(_),w=!1},d(j){j&&X(t),O&&O.d(),M&&M.d(),N&&N.d(j),C&&C.d(),o[94](null),A&&A.d(),F&&F.d(),I&&I.d(),U&&U.d(j),_&&_.d(),o[96](null),T=!1,Vt(S)}}}function Da(o){return o.map((t,e)=>({index:e,value:t,label:`${t}`}))}function Lh(o){return o===0}function _h(o){return o.groupHeader&&o.selectable||o.selectable||!o.hasOwnProperty("selectable")}function zh(o,t,e){let n,i,r,s,a,l,c,u,h,{$$slots:d={},$$scope:p}=t;const m=mc(d),f=gc();let{justValue:g=null}=t,{filter:b=th}=t,{getItems:w=eh}=t,{id:T=null}=t,{name:S=null}=t,{container:O=void 0}=t,{input:M=void 0}=t,{multiple:y=!1}=t,{multiFullItemClearable:N=!1}=t,{disabled:C=!1}=t,{focused:R=!1}=t,{value:x=null}=t,{filterText:A=""}=t,{placeholder:F="Please select"}=t,{placeholderAlwaysShow:I=!1}=t,{items:H=null}=t,{label:P="label"}=t,{itemFilter:U=(D,nt,Gt)=>`${D}`.toLowerCase().includes(nt.toLowerCase())}=t,{groupBy:_=void 0}=t,{groupFilter:j=D=>D}=t,{groupHeaderSelectable:J=!1}=t,{itemId:at="value"}=t,{loadOptions:yt=void 0}=t,{containerStyles:tt=""}=t,{hasError:Rt=!1}=t,{filterSelectedItems:K=!0}=t,{required:Qt=!1}=t,{closeListOnChange:ie=!0}=t,{clearFilterTextOnBlur:Oe=!0}=t,{createGroupHeaderItem:Zt=(D,nt)=>({value:D,[P]:D})}=t;const Fe=()=>c;let{searchable:Y=!0}=t,{inputStyles:Nt=""}=t,{clearable:jt=!0}=t,{loading:oe=!1}=t,{listOpen:lt=!1}=t,re,{debounce:Se=(D,nt=1)=>{clearTimeout(re),re=setTimeout(D,nt)}}=t,{debounceWait:Z=300}=t,{hideEmptyState:bn=!1}=t,{inputAttributes:sn={}}=t,{listAutoWidth:me=!0}=t,{showChevron:Dn=!1}=t,{listOffset:Le=5}=t,{hoverItemIndex:St=0}=t,{floatingConfig:Qe={}}=t,{class:Ke=""}=t,Ft,pe,rt,_e;function _o(){if(typeof x=="string"){let D=(H||[]).find(nt=>nt[at]===x);e(3,x=D||{[at]:x,label:x})}else y&&Array.isArray(x)&&x.length>0&&e(3,x=x.map(D=>typeof D=="string"?{value:D,label:D}:D))}let Te;function Bn(){e(27,Te=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},sn)),T&&e(27,Te.id=T,Te),Y||e(27,Te.readonly=!0,Te)}function Xn(D){const nt=[],Gt={};D.forEach(Yn=>{const ln=_(Yn);nt.includes(ln)||(nt.push(ln),Gt[ln]=[],ln&&Gt[ln].push(Object.assign(Zt(ln,Yn),{id:ln,groupHeader:!0,selectable:J}))),Gt[ln].push(Object.assign({groupItem:!!ln},Yn))});const qn=[];return j(nt).forEach(Yn=>{Gt[Yn]&&qn.push(...Gt[Yn])}),qn}function zo(){if(y){JSON.stringify(x)!==JSON.stringify(pe)&&Ar()&&f("input",x);return}(!pe||JSON.stringify(x[at])!==JSON.stringify(pe[at]))&&f("input",x)}function Fi(){x&&(Array.isArray(x)?e(3,x=[...x]):e(3,x=[x]))}function Po(){x&&e(3,x=null)}function ct(){const D=c.findIndex(nt=>nt[at]===x[at]);vn(D,!0)}function Xt(D){f("hoverItem",D)}function vn(D=0,nt){e(7,St=D<0?0:D),!nt&&_&&c[St]&&!c[St].selectable&&Wo(1)}function Hl(){!yt&&A.length===0||(yt?Se(async function(){e(5,oe=!0);let D=await w({dispatch:f,loadOptions:yt,convertStringItemsToObjects:Da,filterText:A});D?(e(5,oe=D.loading),e(6,lt=lt?D.listOpen:A.length>0),e(2,R=lt&&D.focused),e(51,H=_?Xn(D.filteredItems):D.filteredItems)):(e(5,oe=!1),e(2,R=!0),e(6,lt=!0))},Z):(e(6,lt=!0),y&&e(26,Ft=void 0)))}function Rl(D){lt&&f("filter",D)}bc(async()=>{e(78,pe=x),e(79,rt=A),e(80,_e=y)});function Fl(){return y?x?x.map(D=>D[at]):null:x&&x[at]}function Ar(){let D=!0;if(x){const nt=[],Gt=[];x.forEach(qn=>{nt.includes(qn[at])?D=!1:(nt.push(qn[at]),Gt.push(qn))}),D||e(3,x=Gt)}return D}function Nr(D){let nt=D?D[at]:x[at];return H.find(Gt=>Gt[at]===nt)}function Ll(D){!D||D.length===0||D.some(nt=>typeof nt!="object")||!x||(y?x.some(nt=>!nt||!nt[at]):!x[at])||(Array.isArray(x)?e(3,x=x.map(nt=>Nr(nt)||nt)):e(3,x=Nr()||x))}async function jo(D){const nt=x[D];x.length===1?e(3,x=void 0):e(3,x=x.filter(Gt=>Gt!==nt)),f("clear",nt)}function _l(D){if(R)switch(D.stopPropagation(),D.key){case"Escape":D.preventDefault(),an();break;case"Enter":if(D.preventDefault(),lt){if(c.length===0)break;const nt=c[St];if(x&&!y&&x[at]===nt[at]){an();break}else Wi(c[St])}break;case"ArrowDown":D.preventDefault(),lt?Wo(1):(e(6,lt=!0),e(26,Ft=void 0));break;case"ArrowUp":D.preventDefault(),lt?Wo(-1):(e(6,lt=!0),e(26,Ft=void 0));break;case"Tab":if(lt&&R){if(c.length===0||x&&x[at]===c[St][at])return an();D.preventDefault(),Wi(c[St]),an()}break;case"Backspace":if(!y||A.length>0)return;if(y&&x&&x.length>0){if(jo(Ft!==void 0?Ft:x.length-1),Ft===0||Ft===void 0)break;e(26,Ft=x.length>Ft?Ft-1:void 0)}break;case"ArrowLeft":if(!x||!y||A.length>0)return;Ft===void 0?e(26,Ft=x.length-1):x.length>Ft&&Ft!==0&&e(26,Ft-=1);break;case"ArrowRight":if(!x||!y||A.length>0||Ft===void 0)return;Ft===x.length-1?e(26,Ft=void 0):Ft<x.length-1&&e(26,Ft+=1);break}}function Li(D){R&&M===document?.activeElement||(D&&f("focus",D),M?.focus(),e(2,R=!0))}async function Hr(D){ji||(lt||R)&&(f("blur",D),an(),e(2,R=!1),e(26,Ft=void 0),M?.blur())}function zl(){if(!C){if(A.length>0)return e(6,lt=!0);e(6,lt=!lt)}}function Pl(){f("clear",x),e(3,x=void 0),an(),Li()}Yo(()=>{lt&&e(2,R=!0),R&&M&&M.focus()});function jl(D){if(D){e(4,A="");const nt=Object.assign({},D);if(nt.groupHeader&&!nt.selectable)return;e(3,x=y?x?x.concat([nt]):[nt]:e(3,x=nt)),setTimeout(()=>{ie&&an(),e(26,Ft=void 0),f("change",x),f("select",D)})}}function an(){Oe&&e(4,A=""),e(6,lt=!1)}let{ariaValues:_i=D=>`Option ${D}, selected.`}=t,{ariaListOpen:zi=(D,nt)=>`You are currently focused on option ${D}. There are ${nt} results available.`}=t,{ariaFocused:Pi=()=>"Select is focused, type to refine list, press down to open the menu."}=t;function Wl(D){let nt;return D&&x.length>0?nt=x.map(Gt=>Gt[P]).join(", "):nt=x[P],_i(nt)}function Bl(){if(!c||c.length===0)return"";let D=c[St];if(lt&&D){let nt=c?c.length:0;return zi(D[P],nt)}else return Pi()}let tn=null,Rr;function Fr(){clearTimeout(Rr),Rr=setTimeout(()=>{ji=!1},100)}function Xl(D){!lt&&!R&&O&&!O.contains(D.target)&&!tn?.contains(D.target)&&Hr()}uo(()=>{tn?.remove()});let ji=!1;function Wi(D){!D||D.selectable===!1||jl(D)}function Bi(D){ji||e(7,St=D)}function Lr(D){const{item:nt,i:Gt}=D;if(nt?.selectable!==!1){if(x&&!y&&x[at]===nt[at])return an();_h(nt)&&(e(7,St=Gt),Wi(nt))}}function Wo(D){if(c.filter(Gt=>!Object.hasOwn(Gt,"selectable")||Gt.selectable===!0).length===0)return e(7,St=0);D>0&&St===c.length-1?e(7,St=0):D<0&&St===0?e(7,St=c.length-1):e(7,St=St+D);const nt=c[St];if(nt&&nt.selectable===!1){(D===1||D===-1)&&Wo(D);return}}function ql(D,nt,Gt){if(!y)return nt&&nt[Gt]===D[Gt]}const Yl=_r,Zl=_r;function _r(D){return{update(nt){nt.scroll&&(Fr(),D.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function Gl(){const{width:D}=O.getBoundingClientRect();e(23,tn.style.width=me?D+"px":"auto",tn)}let lo={strategy:"absolute",placement:"bottom-start",middleware:[ku(Le),Ju(),Uu()],autoUpdate:!1};const[Vl,Ul,Jl]=Ku(lo);let Xi=!0;function Ql(D,nt){if(!D||!nt)return e(28,Xi=!0);setTimeout(()=>{e(28,Xi=!1)},0)}function Kl(D){Go.call(this,o,D)}function tc(D){Go.call(this,o,D)}function ec(D){Go.call(this,o,D)}function nc(D){Go.call(this,o,D)}const oc=D=>Bi(D),ic=D=>Bi(D),rc=(D,nt)=>Lr({item:D,i:nt});function sc(D){vt[D?"unshift":"push"](()=>{tn=D,e(23,tn)})}const ac=D=>jo(D),lc=D=>N?jo(D):{};function cc(D){vt[D?"unshift":"push"](()=>{M=D,e(1,M)})}function uc(){A=this.value,e(4,A)}function hc(D){vt[D?"unshift":"push"](()=>{O=D,e(0,O)})}return o.$$set=D=>{"justValue"in D&&e(52,g=D.justValue),"filter"in D&&e(53,b=D.filter),"getItems"in D&&e(54,w=D.getItems),"id"in D&&e(55,T=D.id),"name"in D&&e(8,S=D.name),"container"in D&&e(0,O=D.container),"input"in D&&e(1,M=D.input),"multiple"in D&&e(9,y=D.multiple),"multiFullItemClearable"in D&&e(10,N=D.multiFullItemClearable),"disabled"in D&&e(11,C=D.disabled),"focused"in D&&e(2,R=D.focused),"value"in D&&e(3,x=D.value),"filterText"in D&&e(4,A=D.filterText),"placeholder"in D&&e(56,F=D.placeholder),"placeholderAlwaysShow"in D&&e(57,I=D.placeholderAlwaysShow),"items"in D&&e(51,H=D.items),"label"in D&&e(12,P=D.label),"itemFilter"in D&&e(58,U=D.itemFilter),"groupBy"in D&&e(59,_=D.groupBy),"groupFilter"in D&&e(60,j=D.groupFilter),"groupHeaderSelectable"in D&&e(61,J=D.groupHeaderSelectable),"itemId"in D&&e(13,at=D.itemId),"loadOptions"in D&&e(62,yt=D.loadOptions),"containerStyles"in D&&e(14,tt=D.containerStyles),"hasError"in D&&e(15,Rt=D.hasError),"filterSelectedItems"in D&&e(63,K=D.filterSelectedItems),"required"in D&&e(16,Qt=D.required),"closeListOnChange"in D&&e(64,ie=D.closeListOnChange),"clearFilterTextOnBlur"in D&&e(65,Oe=D.clearFilterTextOnBlur),"createGroupHeaderItem"in D&&e(66,Zt=D.createGroupHeaderItem),"searchable"in D&&e(17,Y=D.searchable),"inputStyles"in D&&e(18,Nt=D.inputStyles),"clearable"in D&&e(68,jt=D.clearable),"loading"in D&&e(5,oe=D.loading),"listOpen"in D&&e(6,lt=D.listOpen),"debounce"in D&&e(69,Se=D.debounce),"debounceWait"in D&&e(70,Z=D.debounceWait),"hideEmptyState"in D&&e(19,bn=D.hideEmptyState),"inputAttributes"in D&&e(71,sn=D.inputAttributes),"listAutoWidth"in D&&e(72,me=D.listAutoWidth),"showChevron"in D&&e(20,Dn=D.showChevron),"listOffset"in D&&e(73,Le=D.listOffset),"hoverItemIndex"in D&&e(7,St=D.hoverItemIndex),"floatingConfig"in D&&e(74,Qe=D.floatingConfig),"class"in D&&e(21,Ke=D.class),"ariaValues"in D&&e(75,_i=D.ariaValues),"ariaListOpen"in D&&e(76,zi=D.ariaListOpen),"ariaFocused"in D&&e(77,Pi=D.ariaFocused),"$$scope"in D&&e(82,p=D.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&8|o.$$.dirty[1]&1048576&&x&&_o(),o.$$.dirty[0]&131072|o.$$.dirty[2]&512&&(sn||!Y)&&Bn(),o.$$.dirty[0]&512&&y&&Fi(),o.$$.dirty[0]&512|o.$$.dirty[2]&262144&&_e&&!y&&Po(),o.$$.dirty[0]&520&&y&&x&&x.length>1&&Ar(),o.$$.dirty[0]&8&&x&&zo(),o.$$.dirty[0]&520|o.$$.dirty[2]&65536&&!x&&y&&pe&&f("input",x),o.$$.dirty[0]&6&&!R&&M&&an(),o.$$.dirty[0]&16|o.$$.dirty[2]&131072&&A!==rt&&Hl(),o.$$.dirty[0]&12824|o.$$.dirty[1]&407896064|o.$$.dirty[2]&3&&e(24,c=b({loadOptions:yt,filterText:A,items:H,multiple:y,value:x,itemId:at,groupBy:_,label:P,filterSelectedItems:K,itemFilter:U,convertStringItemsToObjects:Da,filterGroupedItems:Xn})),o.$$.dirty[0]&16777800&&!y&&lt&&x&&c&&ct(),o.$$.dirty[0]&576&&lt&&y&&e(7,St=0),o.$$.dirty[0]&16&&A&&e(7,St=0),o.$$.dirty[0]&128&&Xt(St),o.$$.dirty[0]&520&&e(25,n=y?x&&x.length>0:x),o.$$.dirty[0]&33554448&&e(35,i=n&&A.length>0),o.$$.dirty[0]&33556512|o.$$.dirty[2]&64&&e(34,r=n&&jt&&!C&&!oe),o.$$.dirty[0]&520|o.$$.dirty[1]&100663296&&e(33,s=I&&y||y&&x?.length===0?F:x?"":F),o.$$.dirty[0]&520&&e(32,a=x?Wl(y):""),o.$$.dirty[0]&16777412&&e(31,l=Bl()),o.$$.dirty[1]&1048576&&Ll(H),o.$$.dirty[0]&8712&&e(52,g=Fl()),o.$$.dirty[0]&520|o.$$.dirty[2]&65536&&!y&&pe&&!x&&f("input",x),o.$$.dirty[0]&16777800&&lt&&c&&!y&&!x&&vn(),o.$$.dirty[0]&16777216&&Rl(c),o.$$.dirty[0]&1|o.$$.dirty[2]&4096&&O&&Qe?.autoUpdate===void 0&&e(81,lo.autoUpdate=!0,lo),o.$$.dirty[0]&1|o.$$.dirty[2]&528384&&O&&Qe&&Jl(Object.assign(lo,Qe)),o.$$.dirty[0]&8388608&&e(30,u=!!tn),o.$$.dirty[0]&8388672&&Ql(tn,lt),o.$$.dirty[0]&8388673&&lt&&O&&tn&&Gl(),o.$$.dirty[0]&128&&e(29,h=St),o.$$.dirty[0]&70&&M&&lt&&!R&&Li()},[O,M,R,x,A,oe,lt,St,S,y,N,C,P,at,tt,Rt,Qt,Y,Nt,bn,Dn,Ke,Pl,tn,c,n,Ft,Te,Xi,h,u,l,a,s,r,i,jo,_l,Li,Hr,zl,Fr,Xl,Bi,Lr,ql,Yl,Zl,Vl,Ul,m,H,g,b,w,T,F,I,U,_,j,J,yt,K,ie,Oe,Zt,Fe,jt,Se,Z,sn,me,Le,Qe,_i,zi,Pi,pe,rt,_e,lo,p,d,Kl,tc,ec,nc,oc,ic,rc,sc,ac,lc,cc,uc,hc]}class Ln extends Ct{constructor(t){super(),It(this,t,zh,Fh,Mt,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,clearFilterTextOnBlur:65,createGroupHeaderItem:66,getFilteredItems:67,searchable:17,inputStyles:18,clearable:68,loading:5,listOpen:6,debounce:69,debounceWait:70,hideEmptyState:19,inputAttributes:71,listAutoWidth:72,showChevron:20,listOffset:73,hoverItemIndex:7,floatingConfig:74,class:21,handleClear:22,ariaValues:75,ariaListOpen:76,ariaFocused:77},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[67]}get handleClear(){return this.$$.ctx[22]}}function Ph(o){let t,e,n,i,r=bi(o[4].value)+"",s;return{c(){t=k("div"),e=k("i"),i=W(),s=pt(r),v(e,"class",n="fas "+(o[4].value==="onStopStreaming"?"fa-signal-stream":"fa-dice-d20")),v(t,"slot","selection")},m(a,l){B(a,t,l),E(t,e),E(t,i),E(t,s)},p(a,l){l&16&&n!==(n="fas "+(a[4].value==="onStopStreaming"?"fa-signal-stream":"fa-dice-d20"))&&v(e,"class",n),l&16&&r!==(r=bi(a[4].value)+"")&&Me(s,r)},d(a){a&&X(t)}}}function jh(o){let t,e,n,i,r=bi(o[15].value)+"",s;return{c(){t=k("div"),e=k("i"),i=W(),s=pt(r),v(e,"class",n="fas "+(o[15].value==="onStopStreaming"?"fa-signal-stream":"fa-dice-d20")),v(t,"slot","item")},m(a,l){B(a,t,l),E(t,e),E(t,i),E(t,s)},p(a,l){l&32768&&n!==(n="fas "+(a[15].value==="onStopStreaming"?"fa-signal-stream":"fa-dice-d20"))&&v(e,"class",n),l&32768&&r!==(r=bi(a[15].value)+"")&&Me(s,r)},d(a){a&&X(t)}}}function Wh(o){let t=o[4],e,n,i=ka(o);return{c(){i.c(),e=De()},m(r,s){i.m(r,s),B(r,e,s),n=!0},p(r,s){s&16&&Mt(t,t=r[4])?(Dt(),z(i,1,1,_t),kt(),i=ka(r),i.c(),L(i,1),i.m(e.parentNode,e)):i.p(r,s)},i(r){n||(L(i),n=!0)},o(r){z(i),n=!1},d(r){r&&X(e),i.d(r)}}}function Bh(o){let t,e,n,i;function r(l){o[9](l)}function s(l){o[10](l)}let a={useWebSocket:o[5]};return o[3]!==void 0&&(a.handleAdd=o[3]),o[1][o[4]]!==void 0&&(a.eventArray=o[1][o[4]]),t=new bu({props:a}),vt.push(()=>At(t,"handleAdd",r)),vt.push(()=>At(t,"eventArray",s)),{c(){mt(t.$$.fragment)},m(l,c){gt(t,l,c),i=!0},p(l,c){const u={};!e&&c&8&&(e=!0,u.handleAdd=l[3],Ht(()=>e=!1)),!n&&c&18&&(n=!0,u.eventArray=l[1][l[4]],Ht(()=>n=!1)),t.$set(u)},i(l){i||(L(t.$$.fragment,l),i=!0)},o(l){z(t.$$.fragment,l),i=!1},d(l){bt(t,l)}}}function ka(o){let t,e,n,i;function r(l){o[11](l)}function s(l){o[12](l)}let a={useWebSocket:o[5]};return o[3]!==void 0&&(a.handleAdd=o[3]),o[1][o[4]]!==void 0&&(a.eventArray=o[1][o[4]]),t=new Cc({props:a}),vt.push(()=>At(t,"handleAdd",r)),vt.push(()=>At(t,"eventArray",s)),{c(){mt(t.$$.fragment)},m(l,c){gt(t,l,c),i=!0},p(l,c){const u={};!e&&c&8&&(e=!0,u.handleAdd=l[3],Ht(()=>e=!1)),!n&&c&18&&(n=!0,u.eventArray=l[1][l[4]],Ht(()=>n=!1)),t.$set(u)},i(l){i||(L(t.$$.fragment,l),i=!0)},o(l){z(t.$$.fragment,l),i=!1},d(l){bt(t,l)}}}function Xh(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S,O;function M(x){o[7](x)}let y={value:o[2][0],items:o[2],searchable:!1,clearable:!1,containerStyles:"background-color: white;",$$slots:{item:[jh,({item:x})=>({15:x}),({item:x})=>x?32768:0],selection:[Ph,({selection:x})=>({4:x}),({selection:x})=>x?16:0]},$$scope:{ctx:o}};o[4]!==void 0&&(y.justValue=o[4]),n=new Ln({props:y}),vt.push(()=>At(n,"justValue",M));const N=[Bh,Wh],C=[];function R(x,A){return x[4]==="onSceneLoad"?0:x[4]!==""?1:-1}return~(d=R(o))&&(p=C[d]=N[d](o)),{c(){t=k("main"),e=k("div"),mt(n.$$.fragment),r=W(),s=k("button"),s.innerHTML='<i class="fas fa-plus"></i>',a=W(),l=k("hr"),c=W(),u=k("div"),h=k("section"),p&&p.c(),m=W(),f=k("footer"),g=k("hr"),b=W(),w=k("button"),w.textContent="Submit",v(s,"class","add"),v(s,"type","button"),v(e,"class","header svelte-obsu-1dgvwvv"),v(h,"class","content"),v(w,"class","submit"),v(f,"class","svelte-obsu-1dgvwvv")},m(x,A){B(x,t,A),E(t,e),gt(n,e,null),E(e,r),E(e,s),E(t,a),E(t,l),E(t,c),E(t,u),E(u,h),~d&&C[d].m(h,null),E(u,m),E(u,f),E(f,g),E(f,b),E(f,w),T=!0,S||(O=[G(s,"click",o[8]),G(w,"click",o[6])],S=!0)},p(x,A){const F={};A&4&&(F.value=x[2][0]),A&4&&(F.items=x[2]),A&98320&&(F.$$scope={dirty:A,ctx:x}),!i&&A&16&&(i=!0,F.justValue=x[4],Ht(()=>i=!1)),n.$set(F);let I=d;d=R(x),d===I?~d&&C[d].p(x,A):(p&&(Dt(),z(C[I],1,1,()=>{C[I]=null}),kt()),~d?(p=C[d],p?p.p(x,A):(p=C[d]=N[d](x),p.c()),L(p,1),p.m(h,null)):p=null)},i(x){T||(L(n.$$.fragment,x),L(p),T=!0)},o(x){z(n.$$.fragment,x),z(p),T=!1},d(x){x&&X(t),bt(n),~d&&C[d].d(),S=!1,Vt(O)}}}function qh(o){let t,e,n;function i(s){o[13](s)}let r={$$slots:{default:[Xh]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,[a]){const l={};a&65566&&(l.$$scope={dirty:a,ctx:s}),!e&&a&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function bi(o){return o.replace(/([a-z])([A-Z])/g,"$1 $2").substring(2)}function Yh(o,t,e){const n=en("enableOBSWebsocket");let i=en("obsRemote"),{elementRoot:r=void 0}=t,s=Object.getOwnPropertyNames(i);n||(s=s.filter(w=>w!="onStopStreaming"));const a=je("#external");async function l(){await hn("obsRemote",i),a.application.close()}let c,u="";function h(w){u=w,e(4,u)}const d=()=>{console.log(c),c!==void 0&&c()};function p(w){c=w,e(3,c)}function m(w){o.$$.not_equal(i[u],w)&&(i[u]=w,e(1,i))}function f(w){c=w,e(3,c)}function g(w){o.$$.not_equal(i[u],w)&&(i[u]=w,e(1,i))}function b(w){r=w,e(0,r)}return o.$$set=w=>{"elementRoot"in w&&e(0,r=w.elementRoot)},[r,i,s,c,u,n,l,h,d,p,m,f,g,b]}class Zh extends Ct{constructor(t){super(),It(this,t,Yh,qh,Mt,{elementRoot:0})}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class Gh{#t;#e=new Map;constructor(t){this.#t=t,Object.seal(this)}get(t={}){return Object.assign(t,{position:this.#t?.position?.get(),beforeMinimized:this.#t?.position?.state.get({name:"#beforeMinimized"}),options:Object.assign({},this.#t?.options),ui:{minimized:this.#t?.reactive?.minimized}})}getSave({name:t}){if(typeof t!="string")throw new TypeError("ApplicationState - getSave error: 'name' is not a string.");return this.#e.get(t)}remove({name:t}){if(typeof t!="string")throw new TypeError("ApplicationState - remove: 'name' is not a string.");const e=this.#e.get(t);return this.#e.delete(t),e}restore({name:t,remove:e=!1,async:n=!1,animateTo:i=!1,duration:r=.1,ease:s=Zi,interpolate:a=In}){if(typeof t!="string")throw new TypeError("ApplicationState - restore error: 'name' is not a string.");const l=this.#e.get(t);if(l){if(e&&this.#e.delete(t),n)return this.set(l,{async:n,animateTo:i,duration:r,ease:s,interpolate:a}).then(()=>l);this.set(l,{async:n,animateTo:i,duration:r,ease:s,interpolate:a})}return l}save({name:t,...e}){if(typeof t!="string")throw new TypeError("ApplicationState - save error: 'name' is not a string.");const n=this.get(e);return this.#e.set(t,n),n}set(t,{async:e=!1,animateTo:n=!1,duration:i=.1,ease:r=Zi,interpolate:s=In}={}){if(!V(t))throw new TypeError("ApplicationState - restore error: 'data' is not an object.");const a=this.#t;if(!V(t?.position))return console.warn("ApplicationState.set warning: 'data.position' is not an object."),a;const l=a.rendered;if(n&&!l)return console.warn("ApplicationState.set warning: Application is not rendered and 'animateTo' is true."),a;if(n){if(t.position.transformOrigin!==a.position.transformOrigin&&(a.position.transformOrigin=t.position.transformOrigin),V(t?.ui)){const u=typeof t.ui?.minimized=="boolean"?t.ui.minimized:!1;a?.reactive?.minimized&&!u&&a.maximize({animate:!1,duration:0})}const c=a.position.animate.to(t.position,{duration:i,ease:r,interpolate:s}).finished.then(u=>{if(u)return a;if(V(t?.options)&&a?.reactive.mergeOptions(t.options),V(t?.ui)){const h=typeof t.ui?.minimized=="boolean"?t.ui.minimized:!1;!a?.reactive?.minimized&&h&&a.minimize({animate:!1,duration:0})}return V(t?.beforeMinimized)&&a.position.state.set({name:"#beforeMinimized",...t.beforeMinimized}),a});if(e)return c}else if(l){if(V(t?.options)&&a?.reactive.mergeOptions(t.options),V(t?.ui)){const c=typeof t.ui?.minimized=="boolean"?t.ui.minimized:!1;a?.reactive?.minimized&&!c?a.maximize({animate:!1,duration:0}):!a?.reactive?.minimized&&c&&a.minimize({animate:!1,duration:i})}V(t?.beforeMinimized)&&a.position.state.set({name:"#beforeMinimized",...t.beforeMinimized}),a.position.set(t.position)}else{let c=t.position;V(t.beforeMinimized)&&(c=t.beforeMinimized,c.left=t.position.left,c.top=t.position.top),a.position.set(c)}return a}}class Vh{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get applicationShell(){return this.#t[0]}component(t){return this.#e[t]?.component??void 0}*componentEntries(){for(let t=0;t<this.#e.length;t++)yield[t,this.#e[t].component]}*componentValues(){for(let t=0;t<this.#e.length;t++)yield this.#e[t].component}data(t){return this.#e[t]}dataByComponent(t){for(const e of this.#e)if(e.component===t)return e}dataEntries(){return this.#e.entries()}dataValues(){return this.#e.values()}get length(){return this.#e.length}}function Uh({storage:o,serialize:t=JSON.stringify,deserialize:e=JSON.parse}){function n(a){return a.length<2}function i(a,l,c){return{subscribe:r(a,l,c).subscribe}}function r(a,l,c){function u(f){return c(function(g){return o&&o.setItem(a,t(g)),f(g)},function(g){d(g(Xo(h)))})}if(o){const f=o.getItem(a);try{f&&(l=e(f))}catch{}o.setItem(a,t(l))}const h=cn(l,c?u:void 0);function d(f){o&&o.setItem(a,t(f)),h.set(f)}function p(f){d(f(Xo(h)))}function m(f,g){return h.subscribe(f,g)}return{set:d,update:p,subscribe:m}}function s(a,l,c,u){const h=!Array.isArray(l),d=h?[l]:l;if(o&&o.getItem(a))try{u=e(o.getItem(a))}catch{}return i(a,u,(p,m)=>{let f=!1;const g=[];let b=0,w;const T=()=>{if(b)return;w?.();const O=h?g[0]:g;if(n(c))p(c(O));else{const M=c(O,p,m);typeof M=="function"&&(w=M)}},S=d.map((O,M)=>O.subscribe(y=>{g[M]=y,b&=~(1<<M),f&&T()},()=>{b|=1<<M}));return f=!0,T(),function(){S.forEach(O=>O()),w?.()}})}return{readable:i,writable:r,derived:s,storage:o,serialize:t,deserialize:e}}const Jh=Uh({storage:globalThis?.sessionStorage});class Ca{#t;#e=new Map;constructor(t){this.#t=t}#n(t){return this.#e.get(t)?.deserialize??this.#t.deserialize}#o(t){return this.#e.get(t)?.serialize??this.#t.serialize}#i(t,e=void 0,n){try{const i=this.#t.storage.getItem(t);i!==null&&(e=(n?.deserialize??this.#t.deserialize)(i))}catch{}return(n?.writable??this.#t.writable)(t,e)}#r(t,e=void 0,n){const i=this.#e.get(t);if(i)return i.store;const r=this.#i(t,e,n);return this.#e.set(t,{store:r,deserialize:n?.deserialize,serialize:n?.serialize}),r}getItem(t,e){let n=e;const i=this.#t.storage.getItem(t);if(i!==null)try{n=this.#n(t)(i)}catch{n=e}else if(e!==void 0)try{const r=this.#o(t)(e);this.#t.storage.setItem(t,r)}catch{}return n}getStore(t,e,n){return this.#r(t,e,n)}setItem(t,e){this.#r(t).set(e)}swapItemBoolean(t,e){const n=this.#r(t,e);let i=!1;try{i=!!this.#n(t)(this.#t.storage.getItem(t))}catch{}const r=typeof i=="boolean"?!i:!1;return n.set(r),r}}class Qh extends Ca{constructor(){super(Jh)}}class Kh{#t;#e=!1;#n;#o;#i;#r;#a;#h;#s=[];constructor(t){this.#t=t;const e=t?.options?.sessionStorage;if(e!==void 0&&!(e instanceof Ca))throw new TypeError("'options.sessionStorage' is not an instance of TJSWebStorage.");this.#n=e!==void 0?e:new Qh}initialize(){if(!this.#e)return this.#e=!0,this.#c(),{appOptionsUpdate:this.#i,uiStateUpdate:this.#h,subscribe:this.#l.bind(this),unsubscribe:this.#u.bind(this)}}get sessionStorage(){return this.#n}get storeAppOptions(){return this.#o}get storeUIState(){return this.#a}get dragging(){return this.#r.dragging}get minimized(){return this.#r.minimized}get resizing(){return this.#r.resizing}get draggable(){return this.#t?.options?.draggable}get focusAuto(){return this.#t?.options?.focusAuto}get focusKeep(){return this.#t?.options?.focusKeep}get focusTrap(){return this.#t?.options?.focusTrap}get headerButtonNoClose(){return this.#t?.options?.headerButtonNoClose}get headerButtonNoLabel(){return this.#t?.options?.headerButtonNoLabel}get headerIcon(){return this.#t?.options?.headerIcon}get headerNoTitleMinimized(){return this.#t?.options?.headerNoTitleMinimized}get minimizable(){return this.#t?.options?.minimizable}get popOut(){return this.#t.popOut}get positionable(){return this.#t?.options?.positionable}get resizable(){return this.#t?.options?.resizable}get title(){return this.#t.title}set draggable(t){typeof t=="boolean"&&this.setOptions("draggable",t)}set focusAuto(t){typeof t=="boolean"&&this.setOptions("focusAuto",t)}set focusKeep(t){typeof t=="boolean"&&this.setOptions("focusKeep",t)}set focusTrap(t){typeof t=="boolean"&&this.setOptions("focusTrap",t)}set headerButtonNoClose(t){typeof t=="boolean"&&this.setOptions("headerButtonNoClose",t)}set headerButtonNoLabel(t){typeof t=="boolean"&&this.setOptions("headerButtonNoLabel",t)}set headerIcon(t){(t===void 0||typeof t=="string")&&this.setOptions("headerIcon",t)}set headerNoTitleMinimized(t){typeof t=="boolean"&&this.setOptions("headerNoTitleMinimized",t)}set minimizable(t){typeof t=="boolean"&&this.setOptions("minimizable",t)}set popOut(t){typeof t=="boolean"&&this.setOptions("popOut",t)}set positionable(t){typeof t=="boolean"&&this.setOptions("positionable",t)}set resizable(t){typeof t=="boolean"&&this.setOptions("resizable",t)}set title(t){typeof t=="string"?this.setOptions("title",t):t==null&&this.setOptions("title","")}getOptions(t,e){return Ic(this.#t.options,t,e)}mergeOptions(t){this.#i(e=>mo(e,t))}setOptions(t,e){Ac(this.#t.options,t,e)&&this.#i(()=>this.#t.options)}#c(){const t=cn(this.#t.options);this.#i=t.update;const e={subscribe:t.subscribe,draggable:Et(t,"draggable"),focusAuto:Et(t,"focusAuto"),focusKeep:Et(t,"focusKeep"),focusTrap:Et(t,"focusTrap"),headerButtonNoClose:Et(t,"headerButtonNoClose"),headerButtonNoLabel:Et(t,"headerButtonNoLabel"),headerIcon:Et(t,"headerIcon"),headerNoTitleMinimized:Et(t,"headerNoTitleMinimized"),minimizable:Et(t,"minimizable"),popOut:Et(t,"popOut"),positionable:Et(t,"positionable"),resizable:Et(t,"resizable"),title:Et(t,"title")};Object.freeze(e),this.#o=e,this.#r={dragging:!1,headerButtons:[],minimized:this.#t._minimized,resizing:!1};const n=cn(this.#r);this.#h=n.update;const i={subscribe:n.subscribe,dragging:Et(n,"dragging"),headerButtons:Yi(n,(r,s)=>s(r.headerButtons)),minimized:Yi(n,(r,s)=>s(r.minimized)),resizing:Et(n,"resizing")};Object.freeze(i),this.#a=i}#l(){this.#s.push(Qo(this.#o.headerButtonNoClose,t=>{this.updateHeaderButtons({headerButtonNoClose:t})})),this.#s.push(Qo(this.#o.headerButtonNoLabel,t=>{this.updateHeaderButtons({headerButtonNoLabel:t})})),this.#s.push(Qo(this.#o.popOut,t=>{t&&this.#t.rendered?globalThis.ui.windows[this.#t.appId]=this.#t:delete globalThis.ui.windows[this.#t.appId]}))}#u(){this.#s.forEach(t=>t()),this.#s=[]}updateHeaderButtons({headerButtonNoClose:t=this.#t.options.headerButtonNoClose,headerButtonNoLabel:e=this.#t.options.headerButtonNoLabel}={}){let n=this.#t._getHeaderButtons();if(typeof t=="boolean"&&t&&(n=n.filter(i=>i.class!=="close")),typeof e=="boolean"&&e)for(const i of n)i.label=void 0;this.#h(i=>(i.headerButtons=n,i))}}const sr=["elementRoot"];Object.freeze(sr);function ar(o){if(o==null)return!1;let t=!0,e=!0;for(const i of sr){const r=Object.getOwnPropertyDescriptor(o,i);(r===void 0||r.get===void 0||r.set===void 0)&&(t=!1)}const n=Object.getPrototypeOf(o);for(const i of sr){const r=Object.getOwnPropertyDescriptor(n,i);(r===void 0||r.get===void 0||r.set===void 0)&&(e=!1)}return t||e}function Ia({app:o,template:t,config:e,elementRootUpdate:n}={}){const i=V(e.options)?e.options:{};let r;if(e.target instanceof HTMLElement?r=e.target:t instanceof HTMLElement&&typeof e.target=="string"?r=t.querySelector(e.target):r=document.createDocumentFragment(),r===void 0)throw console.log(`%c[TRL] loadSvelteConfig error - could not find target selector, '${e.target}', for config:
`,"background: rgb(57,34,34)",e),new Error;const s=e.class,a=_c({...e,target:r},o),l=a.context.get("#external");l.application=o,l.elementRootUpdate=n,l.sessionStorage=o.reactive.sessionStorage;let c;V(o._eventbus)&&typeof o._eventbus.createProxy=="function"&&(c=o._eventbus.createProxy(),l.eventbus=c),Object.seal(l),a.context.set("external",new Proxy({},{get(p,m){return console.warn("[TRL] Deprecation warning: Please change getContext('external') to getContext('#external')."),l[m]}}));const u=new s(a);a.eventbus=c;let h;if(ar(u)&&(h=u.elementRoot),r instanceof DocumentFragment&&r.firstElementChild)h===void 0&&(h=r.firstElementChild),t.append(r);else if(e.target instanceof HTMLElement&&h===void 0){if(e.target instanceof HTMLElement&&typeof i.selectorElement!="string")throw console.log(`%c[TRL] loadSvelteConfig error - HTMLElement target with no 'selectorElement' defined.

Note: If configuring an application shell and directly targeting a HTMLElement did you bind an'elementRoot' and include '<svelte:options accessors={true}/>'?

Offending config:
`,"background: rgb(57,34,34)",e),new Error;if(h=r.querySelector(i.selectorElement),h==null)throw console.log(`%c[TRL] loadSvelteConfig error - HTMLElement target with 'selectorElement', '${i.selectorElement}', not found for config:
`,"background: rgb(57,34,34)",e),new Error}const d=!(e.target instanceof HTMLElement);return{config:a,component:u,element:h,injectHTML:d}}class Aa{static#t=new Map;static add(t){this.#t.set(t.id,t)}static delete(t){this.#t.delete(t.id)}static get(t){return this.#t.get(t)}static has(t){return this.#t.has(t)}static keys(){return this.#t.keys()}static values(){return this.#t.values()}}class Ve extends Application{#t=[null];#e;#n=null;#o=null;#i=95;#r=!1;#a;#h;#s=[];#c=new Vh(this.#t,this.#s);#l;constructor(t={}){super(t),this.#e=new Gh(this),this.#a=new ao(this,{...this.position,...this.options,initial:this.options.positionInitial,ortho:this.options.positionOrtho,validator:this.options.positionValidator}),delete this.position,Object.defineProperty(this,"position",{get:()=>this.#a,set:e=>{V(e)&&this.#a.set(e)}}),this.#h=new Kh(this),this.#l=this.#h.initialize()}static get defaultOptions(){return mo(super.defaultOptions,{defaultCloseAnimation:!0,draggable:!0,focusAuto:!0,focusKeep:!1,focusSource:void 0,focusTrap:!0,headerButtonNoClose:!1,headerButtonNoLabel:!1,headerIcon:void 0,headerNoTitleMinimized:!1,minHeight:MIN_WINDOW_HEIGHT,minWidth:MIN_WINDOW_WIDTH,positionable:!0,positionInitial:ao.Initial.browserCentered,positionOrtho:!0,positionValidator:ao.Validators.transformWindow,sessionStorage:void 0,svelte:void 0,transformOrigin:"top left"})}get elementContent(){return this.#o}get elementTarget(){return this.#n}get reactive(){return this.#h}get state(){return this.#e}get svelte(){return this.#c}_activateCoreListeners(t){super._activateCoreListeners(typeof this.options.template=="string"?t:[this.popOut?this.#n?.firstChild:this.#n])}bringToTop({force:t=!1}={}){(t||this.popOut)&&super.bringToTop(),document.activeElement!==document.body&&!this.elementTarget.contains(document.activeElement)&&(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),document.body.focus()),globalThis.ui.activeWindow=this}async close(t={}){const e=Application.RENDER_STATES;if(!t.force&&![e.RENDERED,e.ERROR].includes(this._state))return;this.#l.unsubscribe(),this._state=e.CLOSING;const n=this.#n;if(!n)return this._state=e.CLOSED;const i=n.querySelector(".window-content");if(i){i.style.overflow="hidden";for(let s=i.children.length;--s>=0;)i.children[s].style.overflow="hidden"}for(const s of this.constructor._getInheritanceChain())Hooks.call(`close${s.name}`,this,$(n));if(typeof this.options.defaultCloseAnimation!="boolean"||this.options.defaultCloseAnimation){n.style.minHeight="0";const{paddingBottom:s,paddingTop:a}=globalThis.getComputedStyle(n);await n.animate([{maxHeight:`${n.clientHeight}px`,paddingTop:a,paddingBottom:s},{maxHeight:0,paddingTop:0,paddingBottom:0}],{duration:250,easing:"ease-in",fill:"forwards"}).finished}const r=[];for(const s of this.#s){r.push(Lc(s.component));const a=s.config.eventbus;V(a)&&typeof a.off=="function"&&(a.off(),s.config.eventbus=void 0)}await Promise.all(r),Aa.delete(this),this.#s.length=0,n.remove(),this.position.state.restore({name:"#beforeMinimized",properties:["width","height"],silent:!0,remove:!0}),this.#t[0]=null,this._element=null,this.#o=null,this.#n=null,delete globalThis.ui.windows[this.appId],this._minimized=!1,this._scrollPositions=null,this._state=e.CLOSED,this.#r=!1,this.#l.uiStateUpdate(s=>mo(s,{minimized:this._minimized})),go.applyFocusSource(this.options.focusSource),delete this.options.focusSource}_injectHTML(t){if(this.popOut&&t.length===0&&zt(this.options.svelte))throw new Error("SvelteApplication - _injectHTML - A popout app with no template can only support one Svelte component.");this.reactive.updateHeaderButtons();const e=()=>{let r=0;return s=>s!=null&&r++>0?(this.#u(),!0):!1};if(zt(this.options.svelte))for(const r of this.options.svelte){const s=Ia({app:this,template:t[0],config:r,elementRootUpdate:e});if(ar(s.component)){if(this.svelte.applicationShell!==null)throw new Error(`SvelteApplication - _injectHTML - An application shell is already mounted; offending config:
                    ${JSON.stringify(r)}`);this.#t[0]=s.component,os(s.component)&&Array.isArray(s.component?.$$?.on_hmr)&&s.component.$$.on_hmr.push(()=>()=>this.#u())}this.#s.push(s)}else if(V(this.options.svelte)){const r=Ia({app:this,template:t[0],config:this.options.svelte,elementRootUpdate:e});if(ar(r.component)){if(this.svelte.applicationShell!==null)throw new Error(`SvelteApplication - _injectHTML - An application shell is already mounted; offending config:
                 ${JSON.stringify(this.options.svelte)}`);this.#t[0]=r.component,os(r.component)&&Array.isArray(r.component?.$$?.on_hmr)&&r.component.$$.on_hmr.push(()=>()=>this.#u())}this.#s.push(r)}const n=t.length&&t[0]instanceof DocumentFragment;let i=!0;for(const r of this.#s)if(!r.injectHTML){i=!1;break}if(i&&super._injectHTML(t),this.svelte.applicationShell!==null)this._element=$(this.svelte.applicationShell.elementRoot),this.#o=Jo(this.svelte.applicationShell,"elementContent")?this.svelte.applicationShell.elementContent:null,this.#n=Jo(this.svelte.applicationShell,"elementTarget")?this.svelte.applicationShell.elementTarget:null;else if(n){for(const r of this.#s)if(r.element instanceof HTMLElement){this._element=$(r.element);break}}if(this.#n===null&&(this.#n=typeof this.options.selectorTarget=="string"?this._element[0].querySelector(this.options.selectorTarget):this._element[0]),this.#n===null||this.#n===void 0)throw new Error(`SvelteApplication - _injectHTML: Target element '${this.options.selectorTarget}' not found.`);typeof this.options.positionable=="boolean"&&this.options.positionable&&(this.#n.style.zIndex=typeof this.options.zIndex=="number"?this.options.zIndex:this.#i??95),this.#l.subscribe()}async maximize({animate:t=!0,duration:e=.1}={}){if(!this.popOut||[!1,null].includes(this._minimized))return;this._minimized=null;const n=e*1e3,i=this.elementTarget,r=i.querySelector(".window-header"),s=i.querySelector(".window-content"),a=this.position.state.get({name:"#beforeMinimized"});t&&await this.position.state.restore({name:"#beforeMinimized",async:!0,animateTo:!0,properties:["width"],duration:.1}),i.classList.remove("minimized");for(let c=r.children.length;--c>=0;)r.children[c].style.display=null;s.style.display=null;let l;t?{constraints:l}=this.position.state.restore({name:"#beforeMinimized",animateTo:!0,properties:["height"],remove:!0,duration:e}):{constraints:l}=this.position.state.remove({name:"#beforeMinimized"}),await s.animate([{maxHeight:0,paddingTop:0,paddingBottom:0,offset:0},{...l,offset:1},{maxHeight:"100%",offset:1}],{duration:n,fill:"forwards"}).finished,this.position.set({minHeight:a.minHeight??this.options?.minHeight??MIN_WINDOW_HEIGHT,minWidth:a.minWidth??this.options?.minWidth??MIN_WINDOW_WIDTH}),i.style.minWidth=null,i.style.minHeight=null,this._minimized=!1,setTimeout(()=>{s.style.overflow=null;for(let c=s.children.length;--c>=0;)s.children[c].style.overflow=null},50),this.#l.uiStateUpdate(c=>mo(c,{minimized:!1}))}async minimize({animate:t=!0,duration:e=.1}={}){if(!this.rendered||!this.popOut||[!0,null].includes(this._minimized))return;this.#l.uiStateUpdate(m=>mo(m,{minimized:!0})),this._minimized=null;const n=e*1e3,i=this.elementTarget,r=i.querySelector(".window-header"),s=i.querySelector(".window-content"),a=this.position.minWidth,l=this.position.minHeight;if(this.position.set({minWidth:100,minHeight:30}),i.style.minWidth="100px",i.style.minHeight="30px",s){s.style.overflow="hidden";for(let m=s.children.length;--m>=0;)s.children[m].style.overflow="hidden"}const{paddingBottom:c,paddingTop:u}=globalThis.getComputedStyle(s),h={maxHeight:`${s.clientHeight}px`,paddingTop:u,paddingBottom:c};t?s.animate([h,{maxHeight:0,paddingTop:0,paddingBottom:0}],{duration:n,fill:"forwards"}).finished.then(()=>s.style.display="none"):setTimeout(()=>s.style.display="none",n);const d=this.position.state.save({name:"#beforeMinimized",constraints:h});d.minWidth=a,d.minHeight=l;const p=r.offsetHeight;this.position.minHeight=p,t&&await this.position.animate.to({height:p},{duration:e}).finished;for(let m=r.children.length;--m>=0;){const f=r.children[m].className;if(!(f.includes("window-title")||f.includes("close"))){if(f.includes("keep-minimized")){r.children[m].style.display="block";continue}r.children[m].style.display="none"}}t&&await this.position.animate.to({width:MIN_WINDOW_WIDTH},{duration:.1}).finished,i.classList.add("minimized"),this._minimized=!0}onSvelteMount(t){}onSvelteRemount(t){}_replaceHTML(t,e){t.length&&this.reactive.updateHeaderButtons()}async _render(t=!1,e={}){if(V(e?.focusSource)&&(this.options.focusSource=e.focusSource),this._state===Application.RENDER_STATES.NONE&&document.querySelector(`#${this.id}`)instanceof HTMLElement){console.warn(`SvelteApplication - _render: A DOM element already exists for CSS ID '${this.id}'. Cancelling initial render for new application with appId '${this.appId}'.`);return}await super._render(t,e),![Application.RENDER_STATES.CLOSING,Application.RENDER_STATES.RENDERING].includes(this._state)&&(!t&&this._state<=Application.RENDER_STATES.NONE||(this._minimized||this.#a.set(e),this.#r||(Aa.add(this),this.onSvelteMount({element:this._element[0],elementContent:this.#o,elementTarget:this.#n}),this.#r=!0)))}async _renderInner(t){const e=typeof this.template=="string"?await renderTemplate(this.template,t):document.createDocumentFragment();return $(e)}async _renderOuter(){const t=await super._renderOuter();return this.#i=t[0].style.zIndex,t}setPosition(t){return this.position.set(t)}#u(){const t=this.svelte.applicationShell;t!==null&&(this._element=$(t.elementRoot),this.#o=Jo(t,"elementContent")?t.elementContent:null,this.#n=Jo(t,"elementTarget")?t.elementTarget:null,this.#n===null&&(this.#n=typeof this.options.selectorTarget=="string"?this._element[0].querySelector(this.options.selectorTarget):this._element[0]),typeof this.options.positionable=="boolean"&&this.options.positionable&&(this.#n.style.zIndex=typeof this.options.zIndex=="number"?this.options.zIndex:this.#i??95,super.bringToTop(),this.position.set(this.position.get())),super._activateCoreListeners([this.popOut?this.#n?.firstChild:this.#n]),this.onSvelteRemount({element:this._element[0],elementContent:this.#o,elementTarget:this.#n}))}}Hooks.on("PopOut:loading",o=>{o instanceof Ve&&(o.position.enabled=!1)}),Hooks.on("PopOut:popin",o=>{o instanceof Ve&&(o.position.enabled=!0)}),Hooks.on("PopOut:close",o=>{o instanceof Ve&&(o.position.enabled=!0)});class td extends Ve{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["obsremote"],id:"obsremote-application",title:"OBS Remote Settings",height:700,width:520,focusAuto:!1,svelte:{class:Zh,target:document.body}})}}function Na(o,t,e){const n=o.slice();return n[13]=t[e].id,n[14]=t[e].name,n}function Ha(o){let t,e=o[14]+"",n,i;return{c(){t=k("option"),n=pt(e),t.__value=i=o[13],et(t,t.__value)},m(r,s){B(r,t,s),E(t,n)},p(r,s){s&4&&e!==(e=r[14]+"")&&Me(n,e),s&4&&i!==(i=r[13])&&(t.__value=i,et(t,t.__value))},d(r){r&&X(t)}}}function ed(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S,O,M,y,N,C,R,x,A,F,I=wt(o[2]),H=[];for(let P=0;P<I.length;P+=1)H[P]=Ha(Na(o,I,P));return{c(){t=k("main"),e=k("hr"),n=W(),i=k("div"),r=pt("URL:"),s=k("input"),a=W(),l=k("br"),c=pt(`
      Port:
      `),u=k("input"),h=W(),d=k("br"),p=pt(`
      Password:
      `),m=k("input"),f=W(),g=k("hr"),b=W(),w=k("button"),w.textContent="Save",T=W(),S=k("hr"),O=pt(`
      Sync to Client:
      `),M=k("div"),y=k("select");for(let P=0;P<H.length;P+=1)H[P].c();N=W(),C=k("br"),R=W(),x=k("button"),x.textContent="Sync",v(s,"name","url"),v(s,"type","text"),v(u,"name","port"),v(u,"type","number"),v(m,"name","password"),v(m,"type","password"),v(w,"type","submit"),v(y,"name","trackedPlayer"),v(y,"id","trackedPlayer"),o[3]===void 0&&yn(()=>o[9].call(y)),v(x,"type","submit"),v(i,"class","flexcol")},m(P,U){B(P,t,U),E(t,e),E(t,n),E(t,i),E(i,r),E(i,s),et(s,o[1].url),E(i,a),E(i,l),E(i,c),E(i,u),et(u,o[1].port),E(i,h),E(i,d),E(i,p),E(i,m),et(m,o[1].password),E(i,f),E(i,g),E(i,b),E(i,w),E(i,T),E(i,S),E(i,O),E(i,M),E(M,y);for(let _=0;_<H.length;_+=1)H[_]&&H[_].m(y,null);wn(y,o[3],!0),E(M,N),E(M,C),E(M,R),E(M,x),A||(F=[G(s,"input",o[6]),G(u,"input",o[7]),G(m,"input",o[8]),G(w,"click",o[4]),G(y,"change",o[9]),G(x,"click",o[5])],A=!0)},p(P,U){if(U&2&&s.value!==P[1].url&&et(s,P[1].url),U&2&&Kt(u.value)!==P[1].port&&et(u,P[1].port),U&2&&m.value!==P[1].password&&et(m,P[1].password),U&4){I=wt(P[2]);let _;for(_=0;_<I.length;_+=1){const j=Na(P,I,_);H[_]?H[_].p(j,U):(H[_]=Ha(j),H[_].c(),H[_].m(y,null))}for(;_<H.length;_+=1)H[_].d(1);H.length=I.length}U&12&&wn(y,P[3])},d(P){P&&X(t),Ie(H,P),A=!1,Vt(F)}}}function nd(o){let t,e,n;function i(s){o[10](s)}let r={$$slots:{default:[ed]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,[a]){const l={};a&131086&&(l.$$scope={dirty:a,ctx:s}),!e&&a&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function od(o,t,e){let n=en("websocketSettings"),{elementRoot:i=void 0}=t;const r=je("#external");async function s(){await hn("websocketSettings",n),r.application.close()}let{onlineUsers:a}=Gi(),l=game?.user.id,c=Hooks.on("userConnected",()=>{e(2,a=Gi().onlineUsers),a.find(g=>g.id===l)===void 0&&e(3,l=game?.user.id)});uo(()=>{Hooks.off("userConnected",c)});function u(){vc(l,n)}function h(){n.url=this.value,e(1,n)}function d(){n.port=Kt(this.value),e(1,n)}function p(){n.password=this.value,e(1,n)}function m(){l=Bo(this),e(3,l),e(2,a)}function f(g){i=g,e(0,i)}return o.$$set=g=>{"elementRoot"in g&&e(0,i=g.elementRoot)},[i,n,a,l,s,u,h,d,p,m,f]}class id extends Ct{constructor(t){super(),It(this,t,od,nd,Mt,{elementRoot:0})}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class rd extends Ve{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["obswebsocket"],id:"obswebsocket-application",title:"OBS Websocket Settings",tabs:[{navSelector:".tabs",contentSelector:".content",initial:"onLoad"}],svelte:{class:id,target:document.body}})}}function Ra(o,t,e){const n=o.slice();return n[23]=t[e],n}const sd=o=>({item:o&16}),Fa=o=>({item:o[23].data});function ad(o){let t;return{c(){t=pt("Missing template")},m(e,n){B(e,t,n)},d(e){e&&X(t)}}}function La(o,t){let e,n,i;const r=t[14].default,s=ue(r,t,t[13],Fa),a=s||ad();return{key:o,first:null,c(){e=k("svelte-virtual-list-row"),a&&a.c(),n=W(),Vi(e,"class","svelte-obsu-1tqh76q"),this.first=e},m(l,c){B(l,e,c),a&&a.m(e,null),E(e,n),i=!0},p(l,c){t=l,s&&s.p&&(!i||c&8208)&&he(s,r,t,t[13],i?fe(r,t[13],c,sd):de(t[13]),Fa)},i(l){i||(L(a,l),i=!0)},o(l){z(a,l),i=!1},d(l){l&&X(e),a&&a.d(l)}}}function ld(o){let t,e,n=[],i=new Map,r,s,a,l,c=wt(o[4]);const u=h=>h[23].index;for(let h=0;h<c.length;h+=1){let d=Ra(o,c,h),p=u(d);i.set(p,n[h]=La(p,d))}return{c(){t=k("svelte-virtual-list-viewport"),e=k("svelte-virtual-list-contents");for(let h=0;h<n.length;h+=1)n[h].c();se(e,"padding-top",o[5]+"px"),se(e,"padding-bottom",o[6]+"px"),Vi(e,"class","svelte-obsu-1tqh76q"),se(t,"height",o[0]),Vi(t,"class","svelte-obsu-1tqh76q"),yn(()=>o[17].call(t))},m(h,d){B(h,t,d),E(t,e);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);o[15](e),o[16](t),r=yc(t,o[17].bind(t)),s=!0,a||(l=G(t,"scroll",o[7]),a=!0)},p(h,[d]){d&8208&&(c=wt(h[4]),Dt(),n=kn(n,d,u,1,h,c,i,e,Zn,La,null,Ra),kt()),(!s||d&32)&&se(e,"padding-top",h[5]+"px"),(!s||d&64)&&se(e,"padding-bottom",h[6]+"px"),(!s||d&1)&&se(t,"height",h[0])},i(h){if(!s){for(let d=0;d<c.length;d+=1)L(n[d]);s=!0}},o(h){for(let d=0;d<n.length;d+=1)z(n[d]);s=!1},d(h){h&&X(t);for(let d=0;d<n.length;d+=1)n[d].d();o[15](null),o[16](null),r(),a=!1,l()}}}function cd(o,t,e){let{$$slots:n={},$$scope:i}=t,{items:r}=t,{height:s="100%"}=t,{itemHeight:a=void 0}=t,{start:l=0}=t,{end:c=0}=t,u=[],h,d,p,m=0,f,g,b=0,w=0,T;async function S(C,R,x){const{scrollTop:A}=d;await Zo();let F=b-A,I=l;for(;F<R&&I<C.length;){let P=h[I-l];P||(e(9,c=I+1),await Zo(),P=h[I-l]);const U=u[I]=x||P.offsetHeight;F+=U,I+=1}e(9,c=I);const H=C.length-c;T=(b+F)/c,e(6,w=H*T),u.length=C.length}async function O(){const{scrollTop:C}=d,R=l;for(let I=0;I<h.length;I+=1)u[l+I]=a||h[I].offsetHeight;let x=0,A=0;for(;x<r.length;){const I=u[x]||T;if(A+I>C){e(8,l=x),e(5,b=A);break}A+=I,x+=1}for(;x<r.length&&(A+=u[x]||T,x+=1,!(A>C+m)););e(9,c=x);const F=r.length-c;for(T=A/c;x<r.length;)u[x++]=T;if(e(6,w=F*T),l<R){await Zo();let I=0,H=0;for(let U=l;U<R;U+=1)h[U-l]&&(I+=u[U],H+=a||h[U-l].offsetHeight);const P=H-I;d.scrollTo(0,C+P)}}Yo(()=>{h=p.getElementsByTagName("svelte-virtual-list-row"),e(12,g=!0)});function M(C){vt[C?"unshift":"push"](()=>{p=C,e(3,p)})}function y(C){vt[C?"unshift":"push"](()=>{d=C,e(2,d)})}function N(){m=this.offsetHeight,e(1,m)}return o.$$set=C=>{"items"in C&&e(10,r=C.items),"height"in C&&e(0,s=C.height),"itemHeight"in C&&e(11,a=C.itemHeight),"start"in C&&e(8,l=C.start),"end"in C&&e(9,c=C.end),"$$scope"in C&&e(13,i=C.$$scope)},o.$$.update=()=>{o.$$.dirty&1792&&e(4,f=r.slice(l,c).map((C,R)=>({index:R+l,data:C}))),o.$$.dirty&7170&&g&&S(r,m,a)},[s,m,d,p,f,b,w,O,l,c,r,a,g,i,n,M,y,N]}class ud extends Ct{constructor(t){super(),It(this,t,cd,ld,Mt,{items:10,height:0,itemHeight:11,start:8,end:9})}}function hd(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m=o[11].name+"",f,g,b,w;return{c(){t=k("div"),e=k("input"),a=W(),l=k("label"),c=k("img"),d=W(),p=k("span"),f=pt(m),e.checked=n=o[11].id?o[3].includes(o[11].id):!1,v(e,"id",i=o[11].id),v(e,"name",r=o[11].id),v(e,"type","checkbox"),e.value=s=o[11].id,v(e,"class","svelte-obsu-5x8izh"),v(c,"alt",u=o[11].name),qo(c.src,h=o[11].img)||v(c,"src",h),v(c,"class","svelte-obsu-5x8izh"),v(l,"for",g=o[11].id),v(l,"class","svelte-obsu-5x8izh")},m(T,S){B(T,t,S),E(t,e),E(t,a),E(t,l),E(l,c),E(l,d),E(l,p),E(p,f),b||(w=G(e,"change",function(){ze(o[6](o[11].id))&&o[6](o[11].id).apply(this,arguments)}),b=!0)},p(T,S){o=T,S&2056&&n!==(n=o[11].id?o[3].includes(o[11].id):!1)&&(e.checked=n),S&2048&&i!==(i=o[11].id)&&v(e,"id",i),S&2048&&r!==(r=o[11].id)&&v(e,"name",r),S&2048&&s!==(s=o[11].id)&&(e.value=s),S&2048&&u!==(u=o[11].name)&&v(c,"alt",u),S&2048&&!qo(c.src,h=o[11].img)&&v(c,"src",h),S&2048&&m!==(m=o[11].name+"")&&Me(f,m),S&2048&&g!==(g=o[11].id)&&v(l,"for",g)},d(T){T&&X(t),b=!1,w()}}}function dd(o){let t,e,n,i,r,s,a,l,c,u;return i=new ud({props:{itemHeight:50,items:o[2],$$slots:{default:[hd,({item:h})=>({11:h}),({item:h})=>h?2048:0]},$$scope:{ctx:o}}}),{c(){t=k("main"),e=k("input"),n=W(),mt(i.$$.fragment),r=W(),s=k("footer"),a=k("button"),a.textContent="Close",v(e,"name","search"),v(e,"type","text"),v(s,"class","svelte-obsu-5x8izh"),v(t,"class","svelte-obsu-5x8izh")},m(h,d){B(h,t,d),E(t,e),et(e,o[1]),E(t,n),gt(i,t,null),E(t,r),E(t,s),E(s,a),l=!0,c||(u=[G(e,"input",o[7]),G(a,"click",o[5])],c=!0)},p(h,d){d&2&&e.value!==h[1]&&et(e,h[1]);const p={};d&4&&(p.items=h[2]),d&6152&&(p.$$scope={dirty:d,ctx:h}),i.$set(p)},i(h){l||(L(i.$$.fragment,h),l=!0)},o(h){z(i.$$.fragment,h),l=!1},d(h){h&&X(t),bt(i),c=!1,Vt(u)}}}function fd(o){let t,e,n;function i(s){o[8](s)}let r={$$slots:{default:[dd]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,[a]){const l={};a&4110&&(l.$$scope={dirty:a,ctx:s}),!e&&a&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function pd(o,t,e){let n,i,r=ae("overlayActors");xt(o,r,m=>e(3,i=m));let s=game.actors,{elementRoot:a=void 0}=t,l="";const c=je("#external");async function u(){await hn("overlayActors",i),c.application.close()}function h(m){let f=i;f.includes(m)?f=f.filter(g=>g!==m):f.push(m),ho(r,i=f,i)}function d(){l=this.value,e(1,l)}function p(m){a=m,e(0,a)}return o.$$set=m=>{"elementRoot"in m&&e(0,a=m.elementRoot)},o.$$.update=()=>{o.$$.dirty&2&&e(2,n=s.filter(m=>m.name?.indexOf(l)!==-1))},[a,l,n,i,r,u,h,d,p]}class md extends Ct{constructor(t){super(),It(this,t,pd,fd,Mt,{elementRoot:0})}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class gd extends Ve{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["actorselect"],id:"actorselect-application",title:"Actor Selection",tabs:[{navSelector:".tabs",contentSelector:".content",initial:"onLoad"}],height:300,width:400,resizable:!0,svelte:{class:md,target:document.body}})}_getHeaderButtons(){const t=super._getHeaderButtons();return t.unshift({icon:"fas fa-rotate",title:"Reset",label:"Reset",onPress:function(){ae("overlayActors").set([])}}),t}}function bd(o){let t,e,n,i,r,s;return{c(){t=k("input"),e=W(),n=k("footer"),i=k("button"),i.textContent="Submit",v(t,"name","style"),v(t,"type","text"),v(n,"class","svelte-obsu-1axx4iv")},m(a,l){B(a,t,l),et(t,o[1]),B(a,e,l),B(a,n,l),E(n,i),r||(s=[G(t,"input",o[3]),G(i,"click",o[2])],r=!0)},p(a,l){l&2&&t.value!==a[1]&&et(t,a[1])},d(a){a&&(X(t),X(e),X(n)),r=!1,Vt(s)}}}function vd(o){let t,e,n;function i(s){o[4](s)}let r={$$slots:{default:[bd]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,[a]){const l={};a&66&&(l.$$scope={dirty:a,ctx:s}),!e&&a&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function yd(o,t,e){let{elementRoot:n=void 0}=t,i=je("#external").application,r=i.style;function s(){i.style=r,i.close()}function a(){r=this.value,e(1,r)}function l(c){n=c,e(0,n)}return o.$$set=c=>{"elementRoot"in c&&e(0,n=c.elementRoot)},[n,r,s,a,l]}class wd extends Ct{constructor(t){super(),It(this,t,yd,vd,Mt,{elementRoot:0})}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class _a extends Ve{style;callback;constructor(t,e){super(),this.style=t,this.callback=e}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["styleeditor"],id:"styleeditor-application",title:"Style Editor",height:125,width:400,svelte:{class:wd,target:document.body}})}async close(t={}){return this.callback(this.style),super.close(t)}}function $d(o){let t,e;return{c(){t=k("span"),t.textContent=`Legacy/Missing Type. Please select a new type in the dropdown to edit.
`,e=pt(";")},m(n,i){B(n,t,i),B(n,e,i)},p:_t,i:_t,o:_t,d(n){n&&(X(t),X(e))}}}class Td extends Ct{constructor(t){super(),It(this,t,null,$d,Mt,{})}}function za(o,t,e){const n=o.slice();return n[0]=t[e][0],n[11]=t[e][1],n}function Pa(o){let t,e=o[11]+"",n;return{c(){t=k("option"),n=pt(e),t.__value=o[0],et(t,t.__value)},m(i,r){B(i,t,r),E(t,n)},p:_t,d(i){i&&X(t)}}}function xd(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w=wt([...o[3]]),T=[];for(let y=0;y<w.length;y+=1)T[y]=Pa(za(o,w,y));function S(y){o[8](y)}var O=o[5](o[0].type);function M(y,N){let C={};return y[0].data!==void 0&&(C.data=y[0].data),{props:C}}return O&&(a=Gn(O,M(o)),vt.push(()=>At(a,"data",S))),{c(){t=k("li"),e=k("div"),n=k("i"),i=W(),r=k("select");for(let y=0;y<T.length;y+=1)T[y].c();s=W(),a&&mt(a.$$.fragment),c=W(),u=k("div"),h=k("button"),h.innerHTML='<i class="fas fa-trash"></i>',d=W(),p=k("button"),p.innerHTML='<i class="fas fa-pencil"></i>',v(n,"class","fa-light fa-bars grab svelte-obsu-1i6qivb"),v(r,"name","types"),v(r,"class","svelte-obsu-1i6qivb"),o[0].type===void 0&&yn(()=>o[7].call(r)),v(h,"title","Remove Component"),v(h,"type","button"),v(h,"class","svelte-obsu-1i6qivb"),v(p,"class","add svelte-obsu-1i6qivb"),v(p,"title","Edit Component Style"),v(p,"type","button"),v(u,"class",m=fo(o[6](o[0].type)?"":"buttons")+" svelte-obsu-1i6qivb"),v(e,"class","component handle svelte-obsu-1i6qivb"),v(t,"data-list-key",o[2]),v(t,"class","svelte-obsu-1i6qivb")},m(y,N){B(y,t,N),E(t,e),E(e,n),E(e,i),E(e,r);for(let C=0;C<T.length;C+=1)T[C]&&T[C].m(r,null);wn(r,o[0].type,!0),E(e,s),a&&gt(a,e,null),E(e,c),E(e,u),E(u,h),E(u,d),E(u,p),f=!0,g||(b=[G(r,"change",o[7]),G(h,"click",o[9]),G(p,"click",o[10])],g=!0)},p(y,[N]){if(N&8){w=wt([...y[3]]);let C;for(C=0;C<w.length;C+=1){const R=za(y,w,C);T[C]?T[C].p(R,N):(T[C]=Pa(R),T[C].c(),T[C].m(r,null))}for(;C<T.length;C+=1)T[C].d(1);T.length=w.length}if(N&9&&wn(r,y[0].type),N&1&&O!==(O=y[5](y[0].type))){if(a){Dt();const C=a;z(C.$$.fragment,1,0,()=>{bt(C,1)}),kt()}O?(a=Gn(O,M(y)),vt.push(()=>At(a,"data",S)),mt(a.$$.fragment),L(a.$$.fragment,1),gt(a,e,c)):a=null}else if(O){const C={};!l&&N&1&&(l=!0,C.data=y[0].data,Ht(()=>l=!1)),a.$set(C)}(!f||N&9&&m!==(m=fo(y[6](y[0].type)?"":"buttons")+" svelte-obsu-1i6qivb"))&&v(u,"class",m),(!f||N&4)&&v(t,"data-list-key",y[2])},i(y){f||(a&&L(a.$$.fragment,y),f=!0)},o(y){a&&z(a.$$.fragment,y),f=!1},d(y){y&&X(t),Ie(T,y),a&&bt(a),g=!1,Vt(b)}}}function Ed(o,t,e){let{component:n}=t,{removeFn:i}=t,{index:r}=t;const s=We().overlayTypes.get("sl").overlayComponentNames;function a(){new _a(n.style,m=>{e(0,n.style=m,n)}).render(!0)}function l(m){const f=We().overlayTypes.get("sl").overlayComponentEditors.get(m);return f!==void 0?f:Td}function c(m){return!!We().overlayTypes.get("sl").compactEditorButtons.get(m)}function u(){n.type=Bo(this),e(0,n),e(3,s)}function h(m){o.$$.not_equal(n.data,m)&&(n.data=m,e(0,n))}const d=()=>i(r),p=()=>a();return o.$$set=m=>{"component"in m&&e(0,n=m.component),"removeFn"in m&&e(1,i=m.removeFn),"index"in m&&e(2,r=m.index)},[n,i,r,s,a,l,c,u,h,d,p]}class ja extends Ct{constructor(t){super(),It(this,t,Ed,xd,Mt,{component:0,removeFn:1,index:2})}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Wa(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),e.push.apply(e,n)}return e}function on(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Wa(Object(e),!0).forEach(function(n){Od(o,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):Wa(Object(e)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(e,n))})}return o}function vi(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vi=function(t){return typeof t}:vi=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vi(o)}function Od(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}function qe(){return qe=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},qe.apply(this,arguments)}function Sd(o,t){if(o==null)return{};var e={},n=Object.keys(o),i,r;for(r=0;r<n.length;r++)i=n[r],!(t.indexOf(i)>=0)&&(e[i]=o[i]);return e}function Md(o,t){if(o==null)return{};var e=Sd(o,t),n,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(e[n]=o[n])}return e}function Dd(o){return kd(o)||Cd(o)||Id(o)||Ad()}function kd(o){if(Array.isArray(o))return lr(o)}function Cd(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function Id(o,t){if(o){if(typeof o=="string")return lr(o,t);var e=Object.prototype.toString.call(o).slice(8,-1);if(e==="Object"&&o.constructor&&(e=o.constructor.name),e==="Map"||e==="Set")return Array.from(o);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return lr(o,t)}}function lr(o,t){(t==null||t>o.length)&&(t=o.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=o[e];return n}function Ad(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Nd="1.15.2";function mn(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var gn=mn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),To=mn(/Edge/i),Ba=mn(/firefox/i),xo=mn(/safari/i)&&!mn(/chrome/i)&&!mn(/android/i),Xa=mn(/iP(ad|od|hone)/i),qa=mn(/chrome/i)&&mn(/android/i),Ya={capture:!1,passive:!1};function Ot(o,t,e){o.addEventListener(t,e,!gn&&Ya)}function $t(o,t,e){o.removeEventListener(t,e,!gn&&Ya)}function yi(o,t){if(t){if(t[0]===">"&&(t=t.substring(1)),o)try{if(o.matches)return o.matches(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t)}catch{return!1}return!1}}function Hd(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function Ye(o,t,e,n){if(o){e=e||document;do{if(t!=null&&(t[0]===">"?o.parentNode===e&&yi(o,t):yi(o,t))||n&&o===e)return o;if(o===e)break}while(o=Hd(o))}return null}var Za=/\s+/g;function Ut(o,t,e){if(o&&t)if(o.classList)o.classList[e?"add":"remove"](t);else{var n=(" "+o.className+" ").replace(Za," ").replace(" "+t+" "," ");o.className=(n+(e?" "+t:"")).replace(Za," ")}}function ot(o,t,e){var n=o&&o.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(e=o.currentStyle),t===void 0?e:e[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=e+(typeof e=="string"?"":"px")}}function _n(o,t){var e="";if(typeof o=="string")e=o;else do{var n=ot(o,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!t&&(o=o.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(e)}function Ga(o,t,e){if(o){var n=o.getElementsByTagName(t),i=0,r=n.length;if(e)for(;i<r;i++)e(n[i],i);return n}return[]}function rn(){var o=document.scrollingElement;return o||document.documentElement}function Bt(o,t,e,n,i){if(!(!o.getBoundingClientRect&&o!==window)){var r,s,a,l,c,u,h;if(o!==window&&o.parentNode&&o!==rn()?(r=o.getBoundingClientRect(),s=r.top,a=r.left,l=r.bottom,c=r.right,u=r.height,h=r.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(t||e)&&o!==window&&(i=i||o.parentNode,!gn))do if(i&&i.getBoundingClientRect&&(ot(i,"transform")!=="none"||e&&ot(i,"position")!=="static")){var d=i.getBoundingClientRect();s-=d.top+parseInt(ot(i,"border-top-width")),a-=d.left+parseInt(ot(i,"border-left-width")),l=s+r.height,c=a+r.width;break}while(i=i.parentNode);if(n&&o!==window){var p=_n(i||o),m=p&&p.a,f=p&&p.d;p&&(s/=f,a/=m,h/=m,u/=f,l=s+u,c=a+h)}return{top:s,left:a,bottom:l,right:c,width:h,height:u}}}function Va(o,t,e){for(var n=En(o,!0),i=Bt(o)[t];n;){var r=Bt(n)[e],s=void 0;if(s=i>=r,!s)return n;if(n===rn())break;n=En(n,!1)}return!1}function eo(o,t,e,n){for(var i=0,r=0,s=o.children;r<s.length;){if(s[r].style.display!=="none"&&s[r]!==st.ghost&&(n||s[r]!==st.dragged)&&Ye(s[r],e.draggable,o,!1)){if(i===t)return s[r];i++}r++}return null}function cr(o,t){for(var e=o.lastElementChild;e&&(e===st.ghost||ot(e,"display")==="none"||t&&!yi(e,t));)e=e.previousElementSibling;return e||null}function ee(o,t){var e=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==st.clone&&(!t||yi(o,t))&&e++;return e}function Ua(o){var t=0,e=0,n=rn();if(o)do{var i=_n(o),r=i.a,s=i.d;t+=o.scrollLeft*r,e+=o.scrollTop*s}while(o!==n&&(o=o.parentNode));return[t,e]}function Rd(o,t){for(var e in o)if(o.hasOwnProperty(e)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===o[e][n])return Number(e)}return-1}function En(o,t){if(!o||!o.getBoundingClientRect)return rn();var e=o,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var i=ot(e);if(e.clientWidth<e.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return rn();if(n||t)return e;n=!0}}while(e=e.parentNode);return rn()}function Fd(o,t){if(o&&t)for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);return o}function ur(o,t){return Math.round(o.top)===Math.round(t.top)&&Math.round(o.left)===Math.round(t.left)&&Math.round(o.height)===Math.round(t.height)&&Math.round(o.width)===Math.round(t.width)}var Eo;function Ja(o,t){return function(){if(!Eo){var e=arguments,n=this;e.length===1?o.call(n,e[0]):o.apply(n,e),Eo=setTimeout(function(){Eo=void 0},t)}}}function Ld(){clearTimeout(Eo),Eo=void 0}function Qa(o,t,e){o.scrollLeft+=t,o.scrollTop+=e}function hr(o){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(o).cloneNode(!0):e?e(o).clone(!0)[0]:o.cloneNode(!0)}function Ka(o,t){ot(o,"position","absolute"),ot(o,"top",t.top),ot(o,"left",t.left),ot(o,"width",t.width),ot(o,"height",t.height)}function dr(o){ot(o,"position",""),ot(o,"top",""),ot(o,"left",""),ot(o,"width",""),ot(o,"height","")}function tl(o,t,e){var n={};return Array.from(o.children).forEach(function(i){var r,s,a,l;if(!(!Ye(i,t.draggable,o,!1)||i.animated||i===e)){var c=Bt(i);n.left=Math.min((r=n.left)!==null&&r!==void 0?r:1/0,c.left),n.top=Math.min((s=n.top)!==null&&s!==void 0?s:1/0,c.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var we="Sortable"+new Date().getTime();function _d(){var o=[],t;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var e=[].slice.call(this.el.children);e.forEach(function(n){if(!(ot(n,"display")==="none"||n===st.ghost)){o.push({target:n,rect:Bt(n)});var i=on({},o[o.length-1].rect);if(n.thisAnimationDuration){var r=_n(n,!0);r&&(i.top-=r.f,i.left-=r.e)}n.fromRect=i}})}},addAnimationState:function(e){o.push(e)},removeAnimationState:function(e){o.splice(Rd(o,{target:e}),1)},animateAll:function(e){var n=this;if(!this.options.animation){clearTimeout(t),typeof e=="function"&&e();return}var i=!1,r=0;o.forEach(function(s){var a=0,l=s.target,c=l.fromRect,u=Bt(l),h=l.prevFromRect,d=l.prevToRect,p=s.rect,m=_n(l,!0);m&&(u.top-=m.f,u.left-=m.e),l.toRect=u,l.thisAnimationDuration&&ur(h,u)&&!ur(c,u)&&(p.top-u.top)/(p.left-u.left)===(c.top-u.top)/(c.left-u.left)&&(a=Pd(p,h,d,n.options)),ur(u,c)||(l.prevFromRect=c,l.prevToRect=u,a||(a=n.options.animation),n.animate(l,p,u,a)),a&&(i=!0,r=Math.max(r,a),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},a),l.thisAnimationDuration=a)}),clearTimeout(t),i?t=setTimeout(function(){typeof e=="function"&&e()},r):typeof e=="function"&&e(),o=[]},animate:function(e,n,i,r){if(r){ot(e,"transition",""),ot(e,"transform","");var s=_n(this.el),a=s&&s.a,l=s&&s.d,c=(n.left-i.left)/(a||1),u=(n.top-i.top)/(l||1);e.animatingX=!!c,e.animatingY=!!u,ot(e,"transform","translate3d("+c+"px,"+u+"px,0)"),this.forRepaintDummy=zd(e),ot(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),ot(e,"transform","translate3d(0,0,0)"),typeof e.animated=="number"&&clearTimeout(e.animated),e.animated=setTimeout(function(){ot(e,"transition",""),ot(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}function zd(o){return o.offsetWidth}function Pd(o,t,e,n){return Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}var no=[],fr={initializeByDefault:!0},Oo={mount:function(o){for(var t in fr)fr.hasOwnProperty(t)&&!(t in o)&&(o[t]=fr[t]);no.forEach(function(e){if(e.pluginName===o.pluginName)throw"Sortable: Cannot mount plugin ".concat(o.pluginName," more than once")}),no.push(o)},pluginEvent:function(o,t,e){var n=this;this.eventCanceled=!1,e.cancel=function(){n.eventCanceled=!0};var i=o+"Global";no.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](on({sortable:t},e)),t.options[r.pluginName]&&t[r.pluginName][o]&&t[r.pluginName][o](on({sortable:t},e)))})},initializePlugins:function(o,t,e,n){no.forEach(function(s){var a=s.pluginName;if(!(!o.options[a]&&!s.initializeByDefault)){var l=new s(o,t,o.options);l.sortable=o,l.options=o.options,o[a]=l,qe(e,l.defaults)}});for(var i in o.options)if(o.options.hasOwnProperty(i)){var r=this.modifyOption(o,i,o.options[i]);typeof r<"u"&&(o.options[i]=r)}},getEventProperties:function(o,t){var e={};return no.forEach(function(n){typeof n.eventProperties=="function"&&qe(e,n.eventProperties.call(t[n.pluginName],o))}),e},modifyOption:function(o,t,e){var n;return no.forEach(function(i){o[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[t]=="function"&&(n=i.optionListeners[t].call(o[i.pluginName],e))}),n}};function So(o){var t=o.sortable,e=o.rootEl,n=o.name,i=o.targetEl,r=o.cloneEl,s=o.toEl,a=o.fromEl,l=o.oldIndex,c=o.newIndex,u=o.oldDraggableIndex,h=o.newDraggableIndex,d=o.originalEvent,p=o.putSortable,m=o.extraEventProperties;if(t=t||e&&e[we],!!t){var f,g=t.options,b="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!gn&&!To?f=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent(n,!0,!0)),f.to=s||e,f.from=a||e,f.item=i||e,f.clone=r,f.oldIndex=l,f.newIndex=c,f.oldDraggableIndex=u,f.newDraggableIndex=h,f.originalEvent=d,f.pullMode=p?p.lastPutMode:void 0;var w=on(on({},m),Oo.getEventProperties(n,t));for(var T in w)f[T]=w[T];e&&e.dispatchEvent(f),g[b]&&g[b].call(t,f)}}var jd=["evt"],ke=function(o,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.evt,i=Md(e,jd);Oo.pluginEvent.bind(st)(o,t,on({dragEl:Q,parentEl:ne,ghostEl:dt,rootEl:Yt,nextEl:zn,lastDownEl:wi,cloneEl:Jt,cloneHidden:On,dragStarted:Do,putSortable:ge,activeSortable:st.active,originalEvent:n,oldIndex:oo,oldDraggableIndex:Mo,newIndex:He,newDraggableIndex:Sn,hideGhostForTarget:al,unhideGhostForTarget:ll,cloneNowHidden:function(){On=!0},cloneNowShown:function(){On=!1},dispatchSortableEvent:function(r){Ee({sortable:t,name:r,originalEvent:n})}},i))};function Ee(o){So(on({putSortable:ge,cloneEl:Jt,targetEl:Q,rootEl:Yt,oldIndex:oo,oldDraggableIndex:Mo,newIndex:He,newDraggableIndex:Sn},o))}var Q,ne,dt,Yt,zn,wi,Jt,On,oo,He,Mo,Sn,$i,ge,io=!1,Ti=!1,xi=[],Pn,Ue,pr,mr,el,nl,Do,ro,ko,Co=!1,Ei=!1,Oi,$e,gr=[],br=!1,Si=[],Mi=typeof document<"u",Di=Xa,ol=To||gn?"cssFloat":"float",Wd=Mi&&!qa&&!Xa&&"draggable"in document.createElement("div"),il=function(){if(Mi){if(gn)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),rl=function(o,t){var e=ot(o),n=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),i=eo(o,0,t),r=eo(o,1,t),s=i&&ot(i),a=r&&ot(r),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Bt(i).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Bt(r).width;if(e.display==="flex")return e.flexDirection==="column"||e.flexDirection==="column-reverse"?"vertical":"horizontal";if(e.display==="grid")return e.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return r&&(a.clear==="both"||a.clear===u)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||l>=n&&e[ol]==="none"||r&&e[ol]==="none"&&l+c>n)?"vertical":"horizontal"},Bd=function(o,t,e){var n=e?o.left:o.top,i=e?o.right:o.bottom,r=e?o.width:o.height,s=e?t.left:t.top,a=e?t.right:t.bottom,l=e?t.width:t.height;return n===s||i===a||n+r/2===s+l/2},Xd=function(o,t){var e;return xi.some(function(n){var i=n[we].options.emptyInsertThreshold;if(!(!i||cr(n))){var r=Bt(n),s=o>=r.left-i&&o<=r.right+i,a=t>=r.top-i&&t<=r.bottom+i;if(s&&a)return e=n}}),e},sl=function(o){function t(i,r){return function(s,a,l,c){var u=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(i==null&&(r||u))return!0;if(i==null||i===!1)return!1;if(r&&i==="clone")return i;if(typeof i=="function")return t(i(s,a,l,c),r)(s,a,l,c);var h=(r?s:a).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var e={},n=o.group;(!n||vi(n)!="object")&&(n={name:n}),e.name=n.name,e.checkPull=t(n.pull,!0),e.checkPut=t(n.put),e.revertClone=n.revertClone,o.group=e},al=function(){!il&&dt&&ot(dt,"display","none")},ll=function(){!il&&dt&&ot(dt,"display","")};Mi&&!qa&&document.addEventListener("click",function(o){if(Ti)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),Ti=!1,!1},!0);var jn=function(o){if(Q){o=o.touches?o.touches[0]:o;var t=Xd(o.clientX,o.clientY);if(t){var e={};for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);e.target=e.rootEl=t,e.preventDefault=void 0,e.stopPropagation=void 0,t[we]._onDragOver(e)}}},qd=function(o){Q&&Q.parentNode[we]._isOutsideThisEl(o.target)};function st(o,t){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=t=qe({},t),o[we]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return rl(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:st.supportPointer!==!1&&"PointerEvent"in window&&!xo,emptyInsertThreshold:5};Oo.initializePlugins(this,o,e);for(var n in e)!(n in t)&&(t[n]=e[n]);sl(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:Wd,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ot(o,"pointerdown",this._onTapStart):(Ot(o,"mousedown",this._onTapStart),Ot(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ot(o,"dragover",this),Ot(o,"dragenter",this)),xi.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),qe(this,_d())}st.prototype={constructor:st,_isOutsideThisEl:function(o){!this.el.contains(o)&&o!==this.el&&(ro=null)},_getDirection:function(o,t){return typeof this.options.direction=="function"?this.options.direction.call(this,o,t,Q):this.options.direction},_onTapStart:function(o){if(o.cancelable){var t=this,e=this.el,n=this.options,i=n.preventOnFilter,r=o.type,s=o.touches&&o.touches[0]||o.pointerType&&o.pointerType==="touch"&&o,a=(s||o).target,l=o.target.shadowRoot&&(o.path&&o.path[0]||o.composedPath&&o.composedPath()[0])||a,c=n.filter;if(Kd(e),!Q&&!(/mousedown|pointerdown/.test(r)&&o.button!==0||n.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&xo&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Ye(a,n.draggable,e,!1),!(a&&a.animated)&&wi!==a)){if(oo=ee(a),Mo=ee(a,n.draggable),typeof c=="function"){if(c.call(this,o,a,this)){Ee({sortable:t,rootEl:l,name:"filter",targetEl:a,toEl:e,fromEl:e}),ke("filter",t,{evt:o}),i&&o.cancelable&&o.preventDefault();return}}else if(c&&(c=c.split(",").some(function(u){if(u=Ye(l,u.trim(),e,!1),u)return Ee({sortable:t,rootEl:u,name:"filter",targetEl:a,fromEl:e,toEl:e}),ke("filter",t,{evt:o}),!0}),c)){i&&o.cancelable&&o.preventDefault();return}n.handle&&!Ye(l,n.handle,e,!1)||this._prepareDragStart(o,s,a)}}},_prepareDragStart:function(o,t,e){var n=this,i=n.el,r=n.options,s=i.ownerDocument,a;if(e&&!Q&&e.parentNode===i){var l=Bt(e);if(Yt=i,Q=e,ne=Q.parentNode,zn=Q.nextSibling,wi=e,$i=r.group,st.dragged=Q,Pn={target:Q,clientX:(t||o).clientX,clientY:(t||o).clientY},el=Pn.clientX-l.left,nl=Pn.clientY-l.top,this._lastX=(t||o).clientX,this._lastY=(t||o).clientY,Q.style["will-change"]="all",a=function(){if(ke("delayEnded",n,{evt:o}),st.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Ba&&n.nativeDraggable&&(Q.draggable=!0),n._triggerDragStart(o,t),Ee({sortable:n,name:"choose",originalEvent:o}),Ut(Q,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){Ga(Q,c.trim(),vr)}),Ot(s,"dragover",jn),Ot(s,"mousemove",jn),Ot(s,"touchmove",jn),Ot(s,"mouseup",n._onDrop),Ot(s,"touchend",n._onDrop),Ot(s,"touchcancel",n._onDrop),Ba&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),ke("delayStart",this,{evt:o}),r.delay&&(!r.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(To||gn))){if(st.eventCanceled){this._onDrop();return}Ot(s,"mouseup",n._disableDelayedDrag),Ot(s,"touchend",n._disableDelayedDrag),Ot(s,"touchcancel",n._disableDelayedDrag),Ot(s,"mousemove",n._delayedDragTouchMoveHandler),Ot(s,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&Ot(s,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(a,r.delay)}else a()}},_delayedDragTouchMoveHandler:function(o){var t=o.touches?o.touches[0]:o;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&vr(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var o=this.el.ownerDocument;$t(o,"mouseup",this._disableDelayedDrag),$t(o,"touchend",this._disableDelayedDrag),$t(o,"touchcancel",this._disableDelayedDrag),$t(o,"mousemove",this._delayedDragTouchMoveHandler),$t(o,"touchmove",this._delayedDragTouchMoveHandler),$t(o,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(o,t){t=t||o.pointerType=="touch"&&o,!this.nativeDraggable||t?this.options.supportPointer?Ot(document,"pointermove",this._onTouchMove):t?Ot(document,"touchmove",this._onTouchMove):Ot(document,"mousemove",this._onTouchMove):(Ot(Q,"dragend",this),Ot(Yt,"dragstart",this._onDragStart));try{document.selection?Ci(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(o,t){if(io=!1,Yt&&Q){ke("dragStarted",this,{evt:t}),this.nativeDraggable&&Ot(document,"dragover",qd);var e=this.options;!o&&Ut(Q,e.dragClass,!1),Ut(Q,e.ghostClass,!0),st.active=this,o&&this._appendGhost(),Ee({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ue){this._lastX=Ue.clientX,this._lastY=Ue.clientY,al();for(var o=document.elementFromPoint(Ue.clientX,Ue.clientY),t=o;o&&o.shadowRoot&&(o=o.shadowRoot.elementFromPoint(Ue.clientX,Ue.clientY),o!==t);)t=o;if(Q.parentNode[we]._isOutsideThisEl(o),t)do{if(t[we]){var e=void 0;if(e=t[we]._onDragOver({clientX:Ue.clientX,clientY:Ue.clientY,target:o,rootEl:t}),e&&!this.options.dragoverBubble)break}o=t}while(t=t.parentNode);ll()}},_onTouchMove:function(o){if(Pn){var t=this.options,e=t.fallbackTolerance,n=t.fallbackOffset,i=o.touches?o.touches[0]:o,r=dt&&_n(dt,!0),s=dt&&r&&r.a,a=dt&&r&&r.d,l=Di&&$e&&Ua($e),c=(i.clientX-Pn.clientX+n.x)/(s||1)+(l?l[0]-gr[0]:0)/(s||1),u=(i.clientY-Pn.clientY+n.y)/(a||1)+(l?l[1]-gr[1]:0)/(a||1);if(!st.active&&!io){if(e&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<e)return;this._onDragStart(o,!0)}if(dt){r?(r.e+=c-(pr||0),r.f+=u-(mr||0)):r={a:1,b:0,c:0,d:1,e:c,f:u};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");ot(dt,"webkitTransform",h),ot(dt,"mozTransform",h),ot(dt,"msTransform",h),ot(dt,"transform",h),pr=c,mr=u,Ue=i}o.cancelable&&o.preventDefault()}},_appendGhost:function(){if(!dt){var o=this.options.fallbackOnBody?document.body:Yt,t=Bt(Q,!0,Di,!0,o),e=this.options;if(Di){for($e=o;ot($e,"position")==="static"&&ot($e,"transform")==="none"&&$e!==document;)$e=$e.parentNode;$e!==document.body&&$e!==document.documentElement?($e===document&&($e=rn()),t.top+=$e.scrollTop,t.left+=$e.scrollLeft):$e=rn(),gr=Ua($e)}dt=Q.cloneNode(!0),Ut(dt,e.ghostClass,!1),Ut(dt,e.fallbackClass,!0),Ut(dt,e.dragClass,!0),ot(dt,"transition",""),ot(dt,"transform",""),ot(dt,"box-sizing","border-box"),ot(dt,"margin",0),ot(dt,"top",t.top),ot(dt,"left",t.left),ot(dt,"width",t.width),ot(dt,"height",t.height),ot(dt,"opacity","0.8"),ot(dt,"position",Di?"absolute":"fixed"),ot(dt,"zIndex","100000"),ot(dt,"pointerEvents","none"),st.ghost=dt,o.appendChild(dt),ot(dt,"transform-origin",el/parseInt(dt.style.width)*100+"% "+nl/parseInt(dt.style.height)*100+"%")}},_onDragStart:function(o,t){var e=this,n=o.dataTransfer,i=e.options;if(ke("dragStart",this,{evt:o}),st.eventCanceled){this._onDrop();return}ke("setupClone",this),st.eventCanceled||(Jt=hr(Q),Jt.removeAttribute("id"),Jt.draggable=!1,Jt.style["will-change"]="",this._hideClone(),Ut(Jt,this.options.chosenClass,!1),st.clone=Jt),e.cloneId=Ci(function(){ke("clone",e),!st.eventCanceled&&(e.options.removeCloneOnHide||Yt.insertBefore(Jt,Q),e._hideClone(),Ee({sortable:e,name:"clone"}))}),!t&&Ut(Q,i.dragClass,!0),t?(Ti=!0,e._loopId=setInterval(e._emulateDragOver,50)):($t(document,"mouseup",e._onDrop),$t(document,"touchend",e._onDrop),$t(document,"touchcancel",e._onDrop),n&&(n.effectAllowed="move",i.setData&&i.setData.call(e,n,Q)),Ot(document,"drop",e),ot(Q,"transform","translateZ(0)")),io=!0,e._dragStartId=Ci(e._dragStarted.bind(e,t,o)),Ot(document,"selectstart",e),Do=!0,xo&&ot(document.body,"user-select","none")},_onDragOver:function(o){var t=this.el,e=o.target,n,i,r,s=this.options,a=s.group,l=st.active,c=$i===a,u=s.sort,h=ge||l,d,p=this,m=!1;if(br)return;function f(U,_){ke(U,p,on({evt:o,isOwner:c,axis:d?"vertical":"horizontal",revert:r,dragRect:n,targetRect:i,canSort:u,fromSortable:h,target:e,completed:b,onMove:function(j,J){return ki(Yt,t,Q,n,j,Bt(j),o,J)},changed:w},_))}function g(){f("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function b(U){return f("dragOverCompleted",{insertion:U}),U&&(c?l._hideClone():l._showClone(p),p!==h&&(Ut(Q,ge?ge.options.ghostClass:l.options.ghostClass,!1),Ut(Q,s.ghostClass,!0)),ge!==p&&p!==st.active?ge=p:p===st.active&&ge&&(ge=null),h===p&&(p._ignoreWhileAnimating=e),p.animateAll(function(){f("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(e===Q&&!Q.animated||e===t&&!e.animated)&&(ro=null),!s.dragoverBubble&&!o.rootEl&&e!==document&&(Q.parentNode[we]._isOutsideThisEl(o.target),!U&&jn(o)),!s.dragoverBubble&&o.stopPropagation&&o.stopPropagation(),m=!0}function w(){He=ee(Q),Sn=ee(Q,s.draggable),Ee({sortable:p,name:"change",toEl:t,newIndex:He,newDraggableIndex:Sn,originalEvent:o})}if(o.preventDefault!==void 0&&o.cancelable&&o.preventDefault(),e=Ye(e,s.draggable,t,!0),f("dragOver"),st.eventCanceled)return m;if(Q.contains(o.target)||e.animated&&e.animatingX&&e.animatingY||p._ignoreWhileAnimating===e)return b(!1);if(Ti=!1,l&&!s.disabled&&(c?u||(r=ne!==Yt):ge===this||(this.lastPutMode=$i.checkPull(this,l,Q,o))&&a.checkPut(this,l,Q,o))){if(d=this._getDirection(o,e)==="vertical",n=Bt(Q),f("dragOverValid"),st.eventCanceled)return m;if(r)return ne=Yt,g(),this._hideClone(),f("revert"),st.eventCanceled||(zn?Yt.insertBefore(Q,zn):Yt.appendChild(Q)),b(!0);var T=cr(t,s.draggable);if(!T||Vd(o,d,this)&&!T.animated){if(T===Q)return b(!1);if(T&&t===o.target&&(e=T),e&&(i=Bt(e)),ki(Yt,t,Q,n,e,i,o,!!e)!==!1)return g(),T&&T.nextSibling?t.insertBefore(Q,T.nextSibling):t.appendChild(Q),ne=t,w(),b(!0)}else if(T&&Gd(o,d,this)){var S=eo(t,0,s,!0);if(S===Q)return b(!1);if(e=S,i=Bt(e),ki(Yt,t,Q,n,e,i,o,!1)!==!1)return g(),t.insertBefore(Q,S),ne=t,w(),b(!0)}else if(e.parentNode===t){i=Bt(e);var O=0,M,y=Q.parentNode!==t,N=!Bd(Q.animated&&Q.toRect||n,e.animated&&e.toRect||i,d),C=d?"top":"left",R=Va(e,"top","top")||Va(Q,"top","top"),x=R?R.scrollTop:void 0;ro!==e&&(M=i[C],Co=!1,Ei=!N&&s.invertSwap||y),O=Ud(o,e,i,d,N?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ei,ro===e);var A;if(O!==0){var F=ee(Q);do F-=O,A=ne.children[F];while(A&&(ot(A,"display")==="none"||A===dt))}if(O===0||A===e)return b(!1);ro=e,ko=O;var I=e.nextElementSibling,H=!1;H=O===1;var P=ki(Yt,t,Q,n,e,i,o,H);if(P!==!1)return(P===1||P===-1)&&(H=P===1),br=!0,setTimeout(Zd,30),g(),H&&!I?t.appendChild(Q):e.parentNode.insertBefore(Q,H?I:e),R&&Qa(R,0,x-R.scrollTop),ne=Q.parentNode,M!==void 0&&!Ei&&(Oi=Math.abs(M-Bt(e)[C])),w(),b(!0)}if(t.contains(Q))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){$t(document,"mousemove",this._onTouchMove),$t(document,"touchmove",this._onTouchMove),$t(document,"pointermove",this._onTouchMove),$t(document,"dragover",jn),$t(document,"mousemove",jn),$t(document,"touchmove",jn)},_offUpEvents:function(){var o=this.el.ownerDocument;$t(o,"mouseup",this._onDrop),$t(o,"touchend",this._onDrop),$t(o,"pointerup",this._onDrop),$t(o,"touchcancel",this._onDrop),$t(document,"selectstart",this)},_onDrop:function(o){var t=this.el,e=this.options;if(He=ee(Q),Sn=ee(Q,e.draggable),ke("drop",this,{evt:o}),ne=Q&&Q.parentNode,He=ee(Q),Sn=ee(Q,e.draggable),st.eventCanceled){this._nulling();return}io=!1,Ei=!1,Co=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),yr(this.cloneId),yr(this._dragStartId),this.nativeDraggable&&($t(document,"drop",this),$t(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),xo&&ot(document.body,"user-select",""),ot(Q,"transform",""),o&&(Do&&(o.cancelable&&o.preventDefault(),!e.dropBubble&&o.stopPropagation()),dt&&dt.parentNode&&dt.parentNode.removeChild(dt),(Yt===ne||ge&&ge.lastPutMode!=="clone")&&Jt&&Jt.parentNode&&Jt.parentNode.removeChild(Jt),Q&&(this.nativeDraggable&&$t(Q,"dragend",this),vr(Q),Q.style["will-change"]="",Do&&!io&&Ut(Q,ge?ge.options.ghostClass:this.options.ghostClass,!1),Ut(Q,this.options.chosenClass,!1),Ee({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:o}),Yt!==ne?(He>=0&&(Ee({rootEl:ne,name:"add",toEl:ne,fromEl:Yt,originalEvent:o}),Ee({sortable:this,name:"remove",toEl:ne,originalEvent:o}),Ee({rootEl:ne,name:"sort",toEl:ne,fromEl:Yt,originalEvent:o}),Ee({sortable:this,name:"sort",toEl:ne,originalEvent:o})),ge&&ge.save()):He!==oo&&He>=0&&(Ee({sortable:this,name:"update",toEl:ne,originalEvent:o}),Ee({sortable:this,name:"sort",toEl:ne,originalEvent:o})),st.active&&((He==null||He===-1)&&(He=oo,Sn=Mo),Ee({sortable:this,name:"end",toEl:ne,originalEvent:o}),this.save()))),this._nulling()},_nulling:function(){ke("nulling",this),Yt=Q=ne=dt=zn=Jt=wi=On=Pn=Ue=Do=He=Sn=oo=Mo=ro=ko=ge=$i=st.dragged=st.ghost=st.clone=st.active=null,Si.forEach(function(o){o.checked=!0}),Si.length=pr=mr=0},handleEvent:function(o){switch(o.type){case"drop":case"dragend":this._onDrop(o);break;case"dragenter":case"dragover":Q&&(this._onDragOver(o),Yd(o));break;case"selectstart":o.preventDefault();break}},toArray:function(){for(var o=[],t,e=this.el.children,n=0,i=e.length,r=this.options;n<i;n++)t=e[n],Ye(t,r.draggable,this.el,!1)&&o.push(t.getAttribute(r.dataIdAttr)||Qd(t));return o},sort:function(o,t){var e={},n=this.el;this.toArray().forEach(function(i,r){var s=n.children[r];Ye(s,this.options.draggable,n,!1)&&(e[i]=s)},this),t&&this.captureAnimationState(),o.forEach(function(i){e[i]&&(n.removeChild(e[i]),n.appendChild(e[i]))}),t&&this.animateAll()},save:function(){var o=this.options.store;o&&o.set&&o.set(this)},closest:function(o,t){return Ye(o,t||this.options.draggable,this.el,!1)},option:function(o,t){var e=this.options;if(t===void 0)return e[o];var n=Oo.modifyOption(this,o,t);typeof n<"u"?e[o]=n:e[o]=t,o==="group"&&sl(e)},destroy:function(){ke("destroy",this);var o=this.el;o[we]=null,$t(o,"mousedown",this._onTapStart),$t(o,"touchstart",this._onTapStart),$t(o,"pointerdown",this._onTapStart),this.nativeDraggable&&($t(o,"dragover",this),$t(o,"dragenter",this)),Array.prototype.forEach.call(o.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),xi.splice(xi.indexOf(this.el),1),this.el=o=null},_hideClone:function(){if(!On){if(ke("hideClone",this),st.eventCanceled)return;ot(Jt,"display","none"),this.options.removeCloneOnHide&&Jt.parentNode&&Jt.parentNode.removeChild(Jt),On=!0}},_showClone:function(o){if(o.lastPutMode!=="clone"){this._hideClone();return}if(On){if(ke("showClone",this),st.eventCanceled)return;Q.parentNode==Yt&&!this.options.group.revertClone?Yt.insertBefore(Jt,Q):zn?Yt.insertBefore(Jt,zn):Yt.appendChild(Jt),this.options.group.revertClone&&this.animate(Q,Jt),ot(Jt,"display",""),On=!1}}};function Yd(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function ki(o,t,e,n,i,r,s,a){var l,c=o[we],u=c.options.onMove,h;return window.CustomEvent&&!gn&&!To?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=o,l.dragged=e,l.draggedRect=n,l.related=i||t,l.relatedRect=r||Bt(t),l.willInsertAfter=a,l.originalEvent=s,o.dispatchEvent(l),u&&(h=u.call(c,l,s)),h}function vr(o){o.draggable=!1}function Zd(){br=!1}function Gd(o,t,e){var n=Bt(eo(e.el,0,e.options,!0)),i=tl(e.el,e.options,dt),r=10;return t?o.clientX<i.left-r||o.clientY<n.top&&o.clientX<n.right:o.clientY<i.top-r||o.clientY<n.bottom&&o.clientX<n.left}function Vd(o,t,e){var n=Bt(cr(e.el,e.options.draggable)),i=tl(e.el,e.options,dt),r=10;return t?o.clientX>i.right+r||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>i.bottom+r||o.clientX>n.right&&o.clientY>n.top}function Ud(o,t,e,n,i,r,s,a){var l=n?o.clientY:o.clientX,c=n?e.height:e.width,u=n?e.top:e.left,h=n?e.bottom:e.right,d=!1;if(!s){if(a&&Oi<c*i){if(!Co&&(ko===1?l>u+c*r/2:l<h-c*r/2)&&(Co=!0),Co)d=!0;else if(ko===1?l<u+Oi:l>h-Oi)return-ko}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Jd(t)}return d=d||s,d&&(l<u+c*r/2||l>h-c*r/2)?l>u+c/2?1:-1:0}function Jd(o){return ee(Q)<ee(o)?1:-1}function Qd(o){for(var t=o.tagName+o.className+o.src+o.href+o.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function Kd(o){Si.length=0;for(var t=o.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&Si.push(n)}}function Ci(o){return setTimeout(o,0)}function yr(o){return clearTimeout(o)}Mi&&Ot(document,"touchmove",function(o){(st.active||io)&&o.cancelable&&o.preventDefault()}),st.utils={on:Ot,off:$t,css:ot,find:Ga,is:function(o,t){return!!Ye(o,t,o,!1)},extend:Fd,throttle:Ja,closest:Ye,toggleClass:Ut,clone:hr,index:ee,nextTick:Ci,cancelNextTick:yr,detectDirection:rl,getChild:eo},st.get=function(o){return o[we]},st.mount=function(){for(var o=arguments.length,t=new Array(o),e=0;e<o;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(st.utils=on(on({},st.utils),n.utils)),Oo.mount(n)})},st.create=function(o,t){return new st(o,t)},st.version=Nd;var ce=[],Io,wr,$r=!1,Tr,xr,Ii,Ao;function tf(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return o.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?Ot(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ot(document,"pointermove",this._handleFallbackAutoScroll):e.touches?Ot(document,"touchmove",this._handleFallbackAutoScroll):Ot(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;!this.options.dragOverBubble&&!e.rootEl&&this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?$t(document,"dragover",this._handleAutoScroll):($t(document,"pointermove",this._handleFallbackAutoScroll),$t(document,"touchmove",this._handleFallbackAutoScroll),$t(document,"mousemove",this._handleFallbackAutoScroll)),cl(),Ai(),Ld()},nulling:function(){Ii=wr=Io=$r=Ao=Tr=xr=null,ce.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(i,r);if(Ii=t,e||this.options.forceAutoScrollFallback||To||gn||xo){Er(t,this.options,s,e);var a=En(s,!0);$r&&(!Ao||i!==Tr||r!==xr)&&(Ao&&cl(),Ao=setInterval(function(){var l=En(document.elementFromPoint(i,r),!0);l!==a&&(a=l,Ai()),Er(t,n.options,l,e)},10),Tr=i,xr=r)}else{if(!this.options.bubbleScroll||En(s,!0)===rn()){Ai();return}Er(t,this.options,En(s,!1),!1)}}},qe(o,{pluginName:"scroll",initializeByDefault:!0})}function Ai(){ce.forEach(function(o){clearInterval(o.pid)}),ce=[]}function cl(){clearInterval(Ao)}var Er=Ja(function(o,t,e,n){if(t.scroll){var i=(o.touches?o.touches[0]:o).clientX,r=(o.touches?o.touches[0]:o).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=rn(),c=!1,u;wr!==e&&(wr=e,Ai(),Io=t.scroll,u=t.scrollFn,Io===!0&&(Io=En(e,!0)));var h=0,d=Io;do{var p=d,m=Bt(p),f=m.top,g=m.bottom,b=m.left,w=m.right,T=m.width,S=m.height,O=void 0,M=void 0,y=p.scrollWidth,N=p.scrollHeight,C=ot(p),R=p.scrollLeft,x=p.scrollTop;p===l?(O=T<y&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),M=S<N&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(O=T<y&&(C.overflowX==="auto"||C.overflowX==="scroll"),M=S<N&&(C.overflowY==="auto"||C.overflowY==="scroll"));var A=O&&(Math.abs(w-i)<=s&&R+T<y)-(Math.abs(b-i)<=s&&!!R),F=M&&(Math.abs(g-r)<=s&&x+S<N)-(Math.abs(f-r)<=s&&!!x);if(!ce[h])for(var I=0;I<=h;I++)ce[I]||(ce[I]={});(ce[h].vx!=A||ce[h].vy!=F||ce[h].el!==p)&&(ce[h].el=p,ce[h].vx=A,ce[h].vy=F,clearInterval(ce[h].pid),(A!=0||F!=0)&&(c=!0,ce[h].pid=setInterval(function(){n&&this.layer===0&&st.active._onTouchMove(Ii);var H=ce[this.layer].vy?ce[this.layer].vy*a:0,P=ce[this.layer].vx?ce[this.layer].vx*a:0;typeof u=="function"&&u.call(st.dragged.parentNode[we],P,H,o,Ii,ce[this.layer].el)!=="continue"||Qa(ce[this.layer].el,P,H)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&d!==l&&(d=En(d,!1)));$r=c}},30),ul=function(o){var t=o.originalEvent,e=o.putSortable,n=o.dragEl,i=o.activeSortable,r=o.dispatchSortableEvent,s=o.hideGhostForTarget,a=o.unhideGhostForTarget;if(t){var l=e||i;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(u)&&(r("spill"),this.onSpill({dragEl:n,putSortable:e}))}};function Or(){}Or.prototype={startIndex:null,dragStart:function(o){var t=o.oldDraggableIndex;this.startIndex=t},onSpill:function(o){var t=o.dragEl,e=o.putSortable;this.sortable.captureAnimationState(),e&&e.captureAnimationState();var n=eo(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),e&&e.animateAll()},drop:ul},qe(Or,{pluginName:"revertOnSpill"});function Sr(){}Sr.prototype={onSpill:function(o){var t=o.dragEl,e=o.putSortable,n=e||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:ul},qe(Sr,{pluginName:"removeOnSpill"});var Ze;function ef(){function o(){this.defaults={swapClass:"sortable-swap-highlight"}}return o.prototype={dragStart:function(t){var e=t.dragEl;Ze=e},dragOverValid:function(t){var e=t.completed,n=t.target,i=t.onMove,r=t.activeSortable,s=t.changed,a=t.cancel;if(r.options.swap){var l=this.sortable.el,c=this.options;if(n&&n!==l){var u=Ze;i(n)!==!1?(Ut(n,c.swapClass,!0),Ze=n):Ze=null,u&&u!==Ze&&Ut(u,c.swapClass,!1)}s(),e(!0),a()}},drop:function(t){var e=t.activeSortable,n=t.putSortable,i=t.dragEl,r=n||this.sortable,s=this.options;Ze&&Ut(Ze,s.swapClass,!1),Ze&&(s.swap||n&&n.options.swap)&&i!==Ze&&(r.captureAnimationState(),r!==e&&e.captureAnimationState(),nf(i,Ze),r.animateAll(),r!==e&&e.animateAll())},nulling:function(){Ze=null}},qe(o,{pluginName:"swap",eventProperties:function(){return{swapItem:Ze}}})}function nf(o,t){var e=o.parentNode,n=t.parentNode,i,r;!e||!n||e.isEqualNode(t)||n.isEqualNode(o)||(i=ee(o),r=ee(t),e.isEqualNode(n)&&i<r&&r++,e.insertBefore(t,e.children[i]),n.insertBefore(o,n.children[r]))}var ft=[],Re=[],No,Je,Ho=!1,Ce=!1,so=!1,Pt,Ro,Ni;function of(){function o(t){for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?Ot(document,"pointerup",this._deselectMultiDrag):(Ot(document,"mouseup",this._deselectMultiDrag),Ot(document,"touchend",this._deselectMultiDrag))),Ot(document,"keydown",this._checkKeyDown),Ot(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(n,i){var r="";ft.length&&Je===t?ft.forEach(function(s,a){r+=(a?", ":"")+s.textContent}):r=i.textContent,n.setData("Text",r)}}}return o.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;Pt=e},delayEnded:function(){this.isMultiDrag=~ft.indexOf(Pt)},setupClone:function(t){var e=t.sortable,n=t.cancel;if(this.isMultiDrag){for(var i=0;i<ft.length;i++)Re.push(hr(ft[i])),Re[i].sortableIndex=ft[i].sortableIndex,Re[i].draggable=!1,Re[i].style["will-change"]="",Ut(Re[i],this.options.selectedClass,!1),ft[i]===Pt&&Ut(Re[i],this.options.chosenClass,!1);e._hideClone(),n()}},clone:function(t){var e=t.sortable,n=t.rootEl,i=t.dispatchSortableEvent,r=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ft.length&&Je===e&&(hl(!0,n),i("clone"),r()))},showClone:function(t){var e=t.cloneNowShown,n=t.rootEl,i=t.cancel;this.isMultiDrag&&(hl(!1,n),Re.forEach(function(r){ot(r,"display","")}),e(),Ni=!1,i())},hideClone:function(t){var e=this;t.sortable;var n=t.cloneNowHidden,i=t.cancel;this.isMultiDrag&&(Re.forEach(function(r){ot(r,"display","none"),e.options.removeCloneOnHide&&r.parentNode&&r.parentNode.removeChild(r)}),n(),Ni=!0,i())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Je&&Je.multiDrag._deselectMultiDrag(),ft.forEach(function(e){e.sortableIndex=ee(e)}),ft=ft.sort(function(e,n){return e.sortableIndex-n.sortableIndex}),so=!0},dragStarted:function(t){var e=this,n=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){ft.forEach(function(r){r!==Pt&&ot(r,"position","absolute")});var i=Bt(Pt,!1,!0,!0);ft.forEach(function(r){r!==Pt&&Ka(r,i)}),Ce=!0,Ho=!0}n.animateAll(function(){Ce=!1,Ho=!1,e.options.animation&&ft.forEach(function(r){dr(r)}),e.options.sort&&Hi()})}},dragOver:function(t){var e=t.target,n=t.completed,i=t.cancel;Ce&&~ft.indexOf(e)&&(n(!1),i())},revert:function(t){var e=t.fromSortable,n=t.rootEl,i=t.sortable,r=t.dragRect;ft.length>1&&(ft.forEach(function(s){i.addAnimationState({target:s,rect:Ce?Bt(s):r}),dr(s),s.fromRect=r,e.removeAnimationState(s)}),Ce=!1,rf(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(t){var e=t.sortable,n=t.isOwner,i=t.insertion,r=t.activeSortable,s=t.parentEl,a=t.putSortable,l=this.options;if(i){if(n&&r._hideClone(),Ho=!1,l.animation&&ft.length>1&&(Ce||!n&&!r.options.sort&&!a)){var c=Bt(Pt,!1,!0,!0);ft.forEach(function(h){h!==Pt&&(Ka(h,c),s.appendChild(h))}),Ce=!0}if(!n)if(Ce||Hi(),ft.length>1){var u=Ni;r._showClone(e),r.options.animation&&!Ni&&u&&Re.forEach(function(h){r.addAnimationState({target:h,rect:Ro}),h.fromRect=Ro,h.thisAnimationDuration=null})}else r._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,i=t.activeSortable;if(ft.forEach(function(s){s.thisAnimationDuration=null}),i.options.animation&&!n&&i.multiDrag.isMultiDrag){Ro=qe({},e);var r=_n(Pt,!0);Ro.top-=r.f,Ro.left-=r.e}},dragOverAnimationComplete:function(){Ce&&(Ce=!1,Hi())},drop:function(t){var e=t.originalEvent,n=t.rootEl,i=t.parentEl,r=t.sortable,s=t.dispatchSortableEvent,a=t.oldIndex,l=t.putSortable,c=l||this.sortable;if(e){var u=this.options,h=i.children;if(!so)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ut(Pt,u.selectedClass,!~ft.indexOf(Pt)),~ft.indexOf(Pt))ft.splice(ft.indexOf(Pt),1),No=null,So({sortable:r,rootEl:n,name:"deselect",targetEl:Pt,originalEvent:e});else{if(ft.push(Pt),So({sortable:r,rootEl:n,name:"select",targetEl:Pt,originalEvent:e}),e.shiftKey&&No&&r.el.contains(No)){var d=ee(No),p=ee(Pt);if(~d&&~p&&d!==p){var m,f;for(p>d?(f=d,m=p):(f=p,m=d+1);f<m;f++)~ft.indexOf(h[f])||(Ut(h[f],u.selectedClass,!0),ft.push(h[f]),So({sortable:r,rootEl:n,name:"select",targetEl:h[f],originalEvent:e}))}}else No=Pt;Je=c}if(so&&this.isMultiDrag){if(Ce=!1,(i[we].options.sort||i!==n)&&ft.length>1){var g=Bt(Pt),b=ee(Pt,":not(."+this.options.selectedClass+")");if(!Ho&&u.animation&&(Pt.thisAnimationDuration=null),c.captureAnimationState(),!Ho&&(u.animation&&(Pt.fromRect=g,ft.forEach(function(T){if(T.thisAnimationDuration=null,T!==Pt){var S=Ce?Bt(T):g;T.fromRect=S,c.addAnimationState({target:T,rect:S})}})),Hi(),ft.forEach(function(T){h[b]?i.insertBefore(T,h[b]):i.appendChild(T),b++}),a===ee(Pt))){var w=!1;ft.forEach(function(T){if(T.sortableIndex!==ee(T)){w=!0;return}}),w&&(s("update"),s("sort"))}ft.forEach(function(T){dr(T)}),c.animateAll()}Je=c}(n===i||l&&l.lastPutMode!=="clone")&&Re.forEach(function(T){T.parentNode&&T.parentNode.removeChild(T)})}},nullingGlobal:function(){this.isMultiDrag=so=!1,Re.length=0},destroyGlobal:function(){this._deselectMultiDrag(),$t(document,"pointerup",this._deselectMultiDrag),$t(document,"mouseup",this._deselectMultiDrag),$t(document,"touchend",this._deselectMultiDrag),$t(document,"keydown",this._checkKeyDown),$t(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof so<"u"&&so)&&Je===this.sortable&&!(t&&Ye(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;ft.length;){var e=ft[0];Ut(e,this.options.selectedClass,!1),ft.shift(),So({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvent:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},qe(o,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[we];!e||!e.options.multiDrag||~ft.indexOf(t)||(Je&&Je!==e&&(Je.multiDrag._deselectMultiDrag(),Je=e),Ut(t,e.options.selectedClass,!0),ft.push(t))},deselect:function(t){var e=t.parentNode[we],n=ft.indexOf(t);!e||!e.options.multiDrag||!~n||(Ut(t,e.options.selectedClass,!1),ft.splice(n,1))}},eventProperties:function(){var t=this,e=[],n=[];return ft.forEach(function(i){e.push({multiDragElement:i,index:i.sortableIndex});var r;Ce&&i!==Pt?r=-1:Ce?r=ee(i,":not(."+t.options.selectedClass+")"):r=ee(i),n.push({multiDragElement:i,index:r})}),{items:Dd(ft),clones:[].concat(Re),oldIndicies:e,newIndicies:n}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function rf(o,t){ft.forEach(function(e,n){var i=t.children[e.sortableIndex+(o?Number(n):0)];i?t.insertBefore(e,i):t.appendChild(e)})}function hl(o,t){Re.forEach(function(e,n){var i=t.children[e.sortableIndex+(o?Number(n):0)];i?t.insertBefore(e,i):t.appendChild(e)})}function Hi(){ft.forEach(function(o){o!==Pt&&o.parentNode&&o.parentNode.removeChild(o)})}st.mount(new tf),st.mount(Sr,Or);function sf(o){let t,e;const n=o[47].default,i=ue(n,o,o[46],null);return{c(){t=k("div"),i&&i.c(),v(t,"class",o[0])},m(r,s){B(r,t,s),i&&i.m(t,null),o[48](t),e=!0},p(r,s){i&&i.p&&(!e||s[1]&32768)&&he(i,n,r,r[46],e?fe(n,r[46],s,null):de(r[46]),null),(!e||s[0]&1)&&v(t,"class",r[0])},i(r){e||(L(i,r),e=!0)},o(r){z(i,r),e=!1},d(r){r&&X(t),i&&i.d(r),o[48](null)}}}function af(o,t,e){let{$$slots:n={},$$scope:i}=t,r,s,{class:a}=t,{multiDragClass:l=null}=t,{swapClass:c=null}=t,{group:u=void 0}=t,{sort:h=!0}=t,{disabled:d=!1}=t,{store:p=void 0}=t,{handle:m=void 0}=t,{swapThreshold:f=1}=t,{invertSwap:g=!1}=t,{invertedSwapThreshold:b=void 0}=t,{removeCloneOnHide:w=!0}=t,{ghostClass:T="sortable-ghost"}=t,{chosenClass:S="sortable-chosen"}=t,{dragClass:O="sortable-drag"}=t,{ignore:M="a; img"}=t,{filter:y=void 0}=t,{preventOnFilter:N=!0}=t,{animation:C=0}=t,{easing:R=void 0}=t,{dataIdAttr:x="data-id"}=t,{delay:A=0}=t,{delayOnTouchOnly:F=!1}=t,{forceFallback:I=!1}=t,{fallbackClass:H="sortable-fallback"}=t,{fallbackOnBody:P=!1}=t,{fallbackTolerance:U=0}=t,{fallbackOffset:_={x:0,y:0}}=t,{emptyInsertThreshold:j=5}=t,{direction:J=void 0}=t,{touchStartThreshold:at=void 0}=t,{setData:yt=void 0}=t,{draggable:tt=null}=t,{onChoose:Rt=void 0}=t,{onUnchoose:K=void 0}=t,{onStart:Qt=void 0}=t,{onEnd:ie=void 0}=t,{onAdd:Oe=void 0}=t,{onUpdate:Zt=void 0}=t,{onRemove:Fe=void 0}=t,{onFilter:Y=void 0}=t,{onSort:Nt=void 0}=t,{onClone:jt=void 0}=t,{onMove:oe=void 0}=t,{onChange:lt=void 0}=t,re;Yo(()=>{if(re={group:u,sort:h,disabled:d,store:p,handle:m,swapThreshold:f,invertSwap:g,invertedSwapThreshold:b,removeCloneOnHide:w,ghostClass:T,chosenClass:S,dragClass:O,ignore:M,filter:y,preventOnFilter:N,animation:C,easing:R,dataIdAttr:x,delay:A,delayOnTouchOnly:F,forceFallback:I,fallbackClass:H,fallbackOnBody:P,fallbackTolerance:U,fallbackOffset:_,emptyInsertThreshold:j,direction:J,touchStartThreshold:at,setData:yt,onChoose:Rt,onUnchoose:K,onStart:Qt,onEnd:ie,onAdd:Oe,onUpdate:Zt,onRemove:Fe,onFilter:Y,onSort:Nt,onClone:jt,onMove:oe,onChange:lt},tt&&(re.draggable=tt),l){try{st.mount(new of)}catch{}re.multiDrag=!0,re.selectedClass=l,re.fallbackTolerance=3}if(c){try{st.mount(new ef)}catch{}re.swap=!0,re.swapClass=c}s=st.create(r,{...re})}),uo(()=>{s&&s.destroy()});function Se(Z){vt[Z?"unshift":"push"](()=>{r=Z,e(1,r)})}return o.$$set=Z=>{"class"in Z&&e(0,a=Z.class),"multiDragClass"in Z&&e(2,l=Z.multiDragClass),"swapClass"in Z&&e(3,c=Z.swapClass),"group"in Z&&e(4,u=Z.group),"sort"in Z&&e(5,h=Z.sort),"disabled"in Z&&e(6,d=Z.disabled),"store"in Z&&e(7,p=Z.store),"handle"in Z&&e(8,m=Z.handle),"swapThreshold"in Z&&e(9,f=Z.swapThreshold),"invertSwap"in Z&&e(10,g=Z.invertSwap),"invertedSwapThreshold"in Z&&e(11,b=Z.invertedSwapThreshold),"removeCloneOnHide"in Z&&e(12,w=Z.removeCloneOnHide),"ghostClass"in Z&&e(13,T=Z.ghostClass),"chosenClass"in Z&&e(14,S=Z.chosenClass),"dragClass"in Z&&e(15,O=Z.dragClass),"ignore"in Z&&e(16,M=Z.ignore),"filter"in Z&&e(17,y=Z.filter),"preventOnFilter"in Z&&e(18,N=Z.preventOnFilter),"animation"in Z&&e(19,C=Z.animation),"easing"in Z&&e(20,R=Z.easing),"dataIdAttr"in Z&&e(21,x=Z.dataIdAttr),"delay"in Z&&e(22,A=Z.delay),"delayOnTouchOnly"in Z&&e(23,F=Z.delayOnTouchOnly),"forceFallback"in Z&&e(24,I=Z.forceFallback),"fallbackClass"in Z&&e(25,H=Z.fallbackClass),"fallbackOnBody"in Z&&e(26,P=Z.fallbackOnBody),"fallbackTolerance"in Z&&e(27,U=Z.fallbackTolerance),"fallbackOffset"in Z&&e(28,_=Z.fallbackOffset),"emptyInsertThreshold"in Z&&e(29,j=Z.emptyInsertThreshold),"direction"in Z&&e(30,J=Z.direction),"touchStartThreshold"in Z&&e(31,at=Z.touchStartThreshold),"setData"in Z&&e(32,yt=Z.setData),"draggable"in Z&&e(33,tt=Z.draggable),"onChoose"in Z&&e(34,Rt=Z.onChoose),"onUnchoose"in Z&&e(35,K=Z.onUnchoose),"onStart"in Z&&e(36,Qt=Z.onStart),"onEnd"in Z&&e(37,ie=Z.onEnd),"onAdd"in Z&&e(38,Oe=Z.onAdd),"onUpdate"in Z&&e(39,Zt=Z.onUpdate),"onRemove"in Z&&e(40,Fe=Z.onRemove),"onFilter"in Z&&e(41,Y=Z.onFilter),"onSort"in Z&&e(42,Nt=Z.onSort),"onClone"in Z&&e(43,jt=Z.onClone),"onMove"in Z&&e(44,oe=Z.onMove),"onChange"in Z&&e(45,lt=Z.onChange),"$$scope"in Z&&e(46,i=Z.$$scope)},[a,r,l,c,u,h,d,p,m,f,g,b,w,T,S,O,M,y,N,C,R,x,A,F,I,H,P,U,_,j,J,at,yt,tt,Rt,K,Qt,ie,Oe,Zt,Fe,Y,Nt,jt,oe,lt,i,n,Se]}class lf extends Ct{constructor(t){super(),It(this,t,af,sf,Mt,{class:0,multiDragClass:2,swapClass:3,group:4,sort:5,disabled:6,store:7,handle:8,swapThreshold:9,invertSwap:10,invertedSwapThreshold:11,removeCloneOnHide:12,ghostClass:13,chosenClass:14,dragClass:15,ignore:16,filter:17,preventOnFilter:18,animation:19,easing:20,dataIdAttr:21,delay:22,delayOnTouchOnly:23,forceFallback:24,fallbackClass:25,fallbackOnBody:26,fallbackTolerance:27,fallbackOffset:28,emptyInsertThreshold:29,direction:30,touchStartThreshold:31,setData:32,draggable:33,onChoose:34,onUnchoose:35,onStart:36,onEnd:37,onAdd:38,onUpdate:39,onRemove:40,onFilter:41,onSort:42,onClone:43,onMove:44,onChange:45},null,[-1,-1])}}function dl(o,t,e){const n=o.slice();return n[12]=t[e],n[13]=t,n[14]=e,n}function fl(o,t){let e,n,i,r;function s(l){t[8](l,t[12],t[13],t[14])}let a={removeFn:t[4],index:t[14]};return t[12]!==void 0&&(a.component=t[12]),n=new ja({props:a}),vt.push(()=>At(n,"component",s)),{key:o,first:null,c(){e=De(),mt(n.$$.fragment),this.first=e},m(l,c){B(l,e,c),gt(n,l,c),r=!0},p(l,c){t=l;const u={};c&1&&(u.index=t[14]),!i&&c&1&&(i=!0,u.component=t[12],Ht(()=>i=!1)),n.$set(u)},i(l){r||(L(n.$$.fragment,l),r=!0)},o(l){z(n.$$.fragment,l),r=!1},d(l){l&&X(e),bt(n,l)}}}function pl(o){let t=[],e=new Map,n,i,r=wt(o[0].components);const s=a=>a[0].components.indexOf(a[12]);for(let a=0;a<r.length;a+=1){let l=dl(o,r,a),c=s(l);e.set(c,t[a]=fl(c,l))}return{c(){for(let a=0;a<t.length;a+=1)t[a].c();n=De()},m(a,l){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(a,l);B(a,n,l),i=!0},p(a,l){l&17&&(r=wt(a[0].components),Dt(),t=kn(t,l,s,1,a,r,e,n.parentNode,Zn,fl,n,dl),kt())},i(a){if(!i){for(let l=0;l<r.length;l+=1)L(t[l]);i=!0}},o(a){for(let l=0;l<t.length;l+=1)z(t[l]);i=!1},d(a){a&&X(n);for(let l=0;l<t.length;l+=1)t[l].d(a)}}}function cf(o){let t=o[3],e,n,i=pl(o);return{c(){i.c(),e=De()},m(r,s){i.m(r,s),B(r,e,s),n=!0},p(r,s){s&8&&Mt(t,t=r[3])?(Dt(),z(i,1,1,_t),kt(),i=pl(r),i.c(),L(i,1),i.m(e.parentNode,e)):i.p(r,s)},i(r){n||(L(i),n=!0)},o(r){z(i),n=!1},d(r){r&&X(e),i.d(r)}}}function uf(o){let t,e,n,i,r,s,a,l,c,u,h,d,p;return n=new lf({props:{animation:150,handle:".grab",onEnd:o[6],$$slots:{default:[cf]},$$scope:{ctx:o}}}),{c(){t=k("div"),e=k("ul"),mt(n.$$.fragment),i=W(),r=k("footer"),s=k("button"),s.innerHTML='<i class="fas fa-plus"></i>',a=W(),l=k("button"),l.innerHTML='<i class="fas fa-pencil"></i>',c=W(),u=k("button"),u.innerHTML='<i class="fas fa-trash"></i>',v(e,"class","svelte-obsu-1y384ub"),v(t,"class","scroll svelte-obsu-1y384ub"),v(s,"class","add"),v(s,"title","Add new Component"),v(s,"type","button"),v(l,"class","add"),v(l,"title","Edit Overlay Style"),v(l,"type","button"),v(u,"class","remove-tab svelte-obsu-1y384ub"),v(u,"title","Remove Overlay"),v(u,"type","button"),v(r,"class","svelte-obsu-1y384ub")},m(m,f){B(m,t,f),E(t,e),gt(n,e,null),B(m,i,f),B(m,r,f),E(r,s),E(r,a),E(r,l),E(r,c),E(r,u),h=!0,d||(p=[G(s,"click",o[9]),G(l,"click",o[10]),G(u,"click",o[11])],d=!0)},p(m,[f]){const g={};f&32777&&(g.$$scope={dirty:f,ctx:m}),n.$set(g)},i(m){h||(L(n.$$.fragment,m),h=!0)},o(m){z(n.$$.fragment,m),h=!1},d(m){m&&(X(t),X(i),X(r)),bt(n),d=!1,Vt(p)}}}function hf(o,t,e){let{overlay:n}=t,{removeFn:i}=t,{componentindex:r}=t;function s(f){e(0,n.components=[...n.components.slice(0,f),...n.components.slice(f+1,n.components.length)],n)}function a(){e(0,n.components=n.components.concat(new wc),n)}let l=0;function c(f){e(0,[n.components[f.oldDraggableIndex],n.components[f.newDraggableIndex]]=[n.components[f.newDraggableIndex],n.components[f.oldDraggableIndex]],n),e(3,l++,l)}function u(){new _a(n.style,f=>{e(0,n.style=f,n)}).render(!0)}function h(f,g,b,w){b[w]=f,e(0,n)}const d=()=>a(),p=()=>u(),m=()=>i(r);return o.$$set=f=>{"overlay"in f&&e(0,n=f.overlay),"removeFn"in f&&e(1,i=f.removeFn),"componentindex"in f&&e(2,r=f.componentindex)},[n,i,r,l,s,a,c,u,h,d,p,m]}class df extends Ct{constructor(t){super(),It(this,t,hf,uf,Mt,{overlay:0,removeFn:1,componentindex:2})}}function ml(o,t,e){const n=o.slice();return n[14]=t[e],n[15]=t,n[16]=e,n}function gl(o,t,e){const n=o.slice();return n[14]=t[e],n[16]=e,n}function bl(o,t){let e,n=t[16]+"",i,r,s,a,l,c;function u(){return t[10](t[16])}return{key:o,first:null,c(){e=k("a"),i=pt(n),v(e,"role","tab"),v(e,"tabindex",r=t[16]),v(e,"class",s="item "+(t[16]===t[1]?"active":"")+" svelte-obsu-11n1roe"),v(e,"data-tab",a=t[16]),this.first=e},m(h,d){B(h,e,d),E(e,i),l||(c=G(e,"click",u),l=!0)},p(h,d){t=h,d&4&&n!==(n=t[16]+"")&&Me(i,n),d&4&&r!==(r=t[16])&&v(e,"tabindex",r),d&6&&s!==(s="item "+(t[16]===t[1]?"active":"")+" svelte-obsu-11n1roe")&&v(e,"class",s),d&4&&a!==(a=t[16])&&v(e,"data-tab",a)},d(h){h&&X(e),l=!1,c()}}}function vl(o,t){let e,n,i,r,s,a,l;function c(h){t[11](h,t[14],t[15],t[16])}let u={removeFn:t[5],componentindex:t[16]};return t[14]!==void 0&&(u.overlay=t[14]),n=new df({props:u}),vt.push(()=>At(n,"overlay",c)),{key:o,first:null,c(){e=k("div"),mt(n.$$.fragment),r=W(),v(e,"class",s="tab "+(t[16]===t[1]?"active":"")),v(e,"data-tab",a=t[16]),v(e,"data-group","primary-tabs"),this.first=e},m(h,d){B(h,e,d),gt(n,e,null),E(e,r),l=!0},p(h,d){t=h;const p={};d&4&&(p.componentindex=t[16]),!i&&d&4&&(i=!0,p.overlay=t[14],Ht(()=>i=!1)),n.$set(p),(!l||d&6&&s!==(s="tab "+(t[16]===t[1]?"active":"")))&&v(e,"class",s),(!l||d&4&&a!==(a=t[16]))&&v(e,"data-tab",a)},i(h){l||(L(n.$$.fragment,h),l=!0)},o(h){z(n.$$.fragment,h),l=!1},d(h){h&&X(e),bt(n)}}}function ff(o){let t,e,n,i,r,s,a,l,c,u=[],h=new Map,d,p,m,f,g=[],b=new Map,w,T,S,O,M,y,N,C;n=new Tc({props:{actorIDs:o[4],overlays:o[2]}});let R=wt(o[2]);const x=I=>I[2].indexOf(I[14]);for(let I=0;I<R.length;I+=1){let H=gl(o,R,I),P=x(H);h.set(P,u[I]=bl(P,H))}let A=wt(o[2]);const F=I=>I[2].indexOf(I[14]);for(let I=0;I<A.length;I+=1){let H=ml(o,A,I),P=F(H);b.set(P,g[I]=vl(P,H))}return{c(){t=k("div"),e=k("div"),mt(n.$$.fragment),i=W(),r=k("div"),s=k("div"),a=k("button"),a.innerHTML='<i class="fas fa-plus"></i>',l=W(),c=k("nav");for(let I=0;I<u.length;I+=1)u[I].c();d=W(),p=k("hr"),m=W(),f=k("section");for(let I=0;I<g.length;I+=1)g[I].c();w=W(),T=k("hr"),S=W(),O=k("footer"),M=k("button"),M.textContent="Close",v(e,"class","preview svelte-obsu-11n1roe"),v(a,"class","add svelte-obsu-11n1roe"),v(a,"title","Add new Overlay"),v(a,"type","button"),v(c,"class","tabs svelte-obsu-11n1roe"),v(c,"data-group","primary-tabs"),v(s,"class","nav-with-add-button svelte-obsu-11n1roe"),v(f,"class","content svelte-obsu-11n1roe"),v(r,"class","editor svelte-obsu-11n1roe"),v(t,"class","grid svelte-obsu-11n1roe"),v(O,"class","svelte-obsu-11n1roe")},m(I,H){B(I,t,H),E(t,e),gt(n,e,null),E(t,i),E(t,r),E(r,s),E(s,a),E(s,l),E(s,c);for(let P=0;P<u.length;P+=1)u[P]&&u[P].m(c,null);E(r,d),E(r,p),E(r,m),E(r,f);for(let P=0;P<g.length;P+=1)g[P]&&g[P].m(f,null);B(I,w,H),B(I,T,H),B(I,S,H),B(I,O,H),E(O,M),y=!0,N||(C=[G(a,"click",o[9]),G(M,"click",o[8])],N=!0)},p(I,H){const P={};H&4&&(P.overlays=I[2]),n.$set(P),H&134&&(R=wt(I[2]),u=kn(u,H,x,1,I,R,h,c,xc,bl,null,gl)),H&38&&(A=wt(I[2]),Dt(),g=kn(g,H,F,1,I,A,b,f,Zn,vl,null,ml),kt())},i(I){if(!y){L(n.$$.fragment,I);for(let H=0;H<A.length;H+=1)L(g[H]);y=!0}},o(I){z(n.$$.fragment,I);for(let H=0;H<g.length;H+=1)z(g[H]);y=!1},d(I){I&&(X(t),X(w),X(T),X(S),X(O)),bt(n);for(let H=0;H<u.length;H+=1)u[H].d();for(let H=0;H<g.length;H+=1)g[H].d();N=!1,Vt(C)}}}function pf(o){let t,e,n;function i(s){o[12](s)}let r={$$slots:{default:[ff]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,[a]){const l={};a&262150&&(l.$$scope={dirty:a,ctx:s}),!e&&a&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function mf(o,t,e){let n,i=ae("streamOverlays");xt(o,i,b=>e(2,n=b));let r=en("overlayActors"),s=0;function a(b){n.splice(b,1),i.set(n),s===b&&e(1,s=Math.max(0,b-1))}function l(){n.push(new $c),i.set(n)}function c(b){e(1,s=b)}let{elementRoot:u=void 0}=t;const h=je("#external");async function d(){h.application.close()}const p=()=>l(),m=b=>c(b);function f(b,w,T,S){T[S]=b,i.set(n)}function g(b){u=b,e(0,u)}return o.$$set=b=>{"elementRoot"in b&&e(0,u=b.elementRoot)},[u,s,n,i,r,a,l,c,d,p,m,f,g]}class gf extends Ct{constructor(t){super(),It(this,t,mf,pf,Mt,{elementRoot:0})}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class bf extends Ve{dataArray=[];static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["overlayeditor"],id:"overlayeditor-application",title:"Overlay Editor",height:600,width:1e3,zIndex:95,resizable:!0,focusAuto:!1,svelte:{class:gf,target:document.body}})}_getHeaderButtons(){const t=super._getHeaderButtons();return t.unshift({icon:"fas fa-file-import",title:"Import",label:"Import",onPress:async function(){new Dialog({title:"Import Data: Overlays",content:await renderTemplate("templates/apps/import-data.html",{hint1:"You are about to import an exported Overlay configuration. Please ensure that it was exported in the same system or AV Overlays may not work.",hint2:"Please choose if you want to replace your existing overlays or add the imported list."}),buttons:{replace:{icon:'<i class="fas fa-file-import"></i>',label:"Replace",callback:e=>{const n=e.find("form")[0];if(!n.data.files.length)return ui.notifications.error("You did not upload a data file!");readTextFromFile(n.data.files[0]).then(i=>yl(i,!1))}},append:{icon:'<i class="fas fa-file-import"></i>',label:"Append",callback:e=>{const n=e.find("form")[0];if(!n.data.files.length)return ui.notifications.error("You did not upload a data file!");readTextFromFile(n.data.files[0]).then(i=>yl(i,!0))}},no:{icon:'<i class="fas fa-times"></i>',label:"Cancel"}},default:"import"},{width:400}).render(!0)}},{icon:"fas fa-file-export",title:"Export",label:"Export",onPress:function(){new Dialog({title:"Export your settings?",content:"Do you want to export your Overlay Settings?",buttons:{yes:{label:"Yes",callback:()=>vf()},no:{label:"No"}}}).render(!0)}}),t}}function vf(){let o={type:"ObsUtilsOverlays",version:1,overlays:foundry.utils.deepClone(en("streamOverlays")),system:game.system?.id};const t=["obsu",game.system?.id,game.world.id,"overlays",new Date().toString()].filterJoin("-");saveDataToFile(JSON.stringify(o,null,2),"text/json",`${t}.json`)}async function yl(o,t){const e=JSON.parse(o);if(e.type!=="ObsUtilsOverlays")throw new Error("Imported file is not an OBS Utils Export");if(e.version!==1)throw new Error("Version unsupported");if(t){const n=en("streamOverlays");n.push(...e.overlays),await hn("streamOverlays",n)}else await hn("streamOverlays",e.overlays)}function wl(o,t,e){const n=o.slice();return n[18]=t[e].id,n[19]=t[e].name,n}function $l(o,t,e){const n=o.slice();return n[18]=t[e].id,n[22]=t[e].tooltip,n[23]=t[e].icon,n}function Tl(o,t,e){const n=o.slice();return n[18]=t[e].id,n[22]=t[e].tooltip,n[23]=t[e].icon,n}function xl(o){let t,e,n,i,r,s,a;return r=qr(o[13][1]),{c(){t=k("input"),e=W(),n=k("label"),i=k("i"),v(t,"type","radio"),v(t,"id","radioic"+o[18]),v(t,"name","currentIC"),t.__value=o[18],et(t,t.__value),v(t,"class","svelte-obsu-wkr2xp"),v(i,"class",fo(o[23])+" svelte-obsu-wkr2xp"),v(n,"class","button svelte-obsu-wkr2xp"),v(n,"for","radioic"+o[18]),v(n,"title",o[22]),r.p(t)},m(l,c){B(l,t,c),t.checked=t.__value===o[1],B(l,e,c),B(l,n,c),E(n,i),s||(a=[G(t,"change",o[12]),G(t,"change",o[9])],s=!0)},p(l,c){c&2&&(t.checked=t.__value===l[1])},d(l){l&&(X(t),X(e),X(n)),r.r(),s=!1,Vt(a)}}}function El(o){let t,e,n,i,r,s,a;return r=qr(o[13][0]),{c(){t=k("input"),e=W(),n=k("label"),i=k("i"),v(t,"type","radio"),v(t,"id","radioooc"+o[18]),v(t,"name","currentOOC"),t.__value=o[18],et(t,t.__value),v(t,"class","svelte-obsu-wkr2xp"),v(i,"class",fo(o[23])+" svelte-obsu-wkr2xp"),v(n,"class","button svelte-obsu-wkr2xp"),v(n,"for","radioooc"+o[18]),v(n,"title",o[22]),r.p(t)},m(l,c){B(l,t,c),t.checked=t.__value===o[2],B(l,e,c),B(l,n,c),E(n,i),s||(a=[G(t,"change",o[14]),G(t,"change",o[10])],s=!0)},p(l,c){c&4&&(t.checked=t.__value===l[2])},d(l){l&&(X(t),X(e),X(n)),r.r(),s=!1,Vt(a)}}}function Ol(o){let t,e=o[19]+"",n;return{c(){t=k("option"),n=pt(e),t.__value=o[18],et(t,t.__value)},m(i,r){B(i,t,r),E(t,n)},p:_t,d(i){i&&X(t)}}}function yf(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S,O,M,y,N,C,R,x,A,F,I,H,P,U=wt(o[5]),_=[];for(let tt=0;tt<U.length;tt+=1)_[tt]=xl(Tl(o,U,tt));let j=wt(o[6]),J=[];for(let tt=0;tt<j.length;tt+=1)J[tt]=El($l(o,j,tt));let at=wt(o[7]),yt=[];for(let tt=0;tt<at.length;tt+=1)yt[tt]=Ol(wl(o,at,tt));return{c(){t=k("main"),e=k("b"),e.textContent="In Combat Type",n=W(),i=k("div");for(let tt=0;tt<_.length;tt+=1)_[tt].c();r=W(),s=k("hr"),a=W(),l=k("b"),l.textContent="Out of Combat Types",c=W(),u=k("div");for(let tt=0;tt<J.length;tt+=1)J[tt].c();h=W(),d=k("div"),p=k("hr"),m=W(),f=k("b"),f.textContent="Canvas Options",g=W(),b=k("hr"),w=W(),T=k("input"),S=W(),O=k("label"),O.innerHTML='<i class="fas fa-arrows-maximize svelte-obsu-wkr2xp"></i>',M=W(),y=k("div"),N=k("hr"),C=W(),R=k("b"),R.textContent="Tracked Player",x=W(),A=k("hr"),F=W(),I=k("select");for(let tt=0;tt<yt.length;tt+=1)yt[tt].c();v(T,"name","limitcanvas"),v(T,"id","limitcanvas"),v(T,"type","checkbox"),v(T,"class","svelte-obsu-wkr2xp"),v(O,"class","button svelte-obsu-wkr2xp"),v(O,"title","Limit Canvas to Screen Edges"),v(O,"for","limitcanvas"),v(I,"name","trackedPlayer"),v(I,"id","trackedPlayer"),o[3]===void 0&&yn(()=>o[16].call(I))},m(tt,Rt){B(tt,t,Rt),E(t,e),E(t,n),E(t,i);for(let K=0;K<_.length;K+=1)_[K]&&_[K].m(i,null);E(t,r),E(t,s),E(t,a),E(t,l),E(t,c),E(t,u);for(let K=0;K<J.length;K+=1)J[K]&&J[K].m(u,null);E(t,h),E(t,d),E(d,p),E(d,m),E(d,f),E(d,g),E(d,b),E(d,w),E(d,T),T.checked=o[4],E(d,S),E(d,O),E(t,M),E(t,y),E(y,N),E(y,C),E(y,R),E(y,x),E(y,A),E(y,F),E(y,I);for(let K=0;K<yt.length;K+=1)yt[K]&&yt[K].m(I,null);wn(I,o[3],!0),H||(P=[G(T,"change",o[15]),G(I,"change",o[16]),G(I,"change",o[11])],H=!0)},p(tt,Rt){if(Rt&546){U=wt(tt[5]);let K;for(K=0;K<U.length;K+=1){const Qt=Tl(tt,U,K);_[K]?_[K].p(Qt,Rt):(_[K]=xl(Qt),_[K].c(),_[K].m(i,null))}for(;K<_.length;K+=1)_[K].d(1);_.length=U.length}if(Rt&1092){j=wt(tt[6]);let K;for(K=0;K<j.length;K+=1){const Qt=$l(tt,j,K);J[K]?J[K].p(Qt,Rt):(J[K]=El(Qt),J[K].c(),J[K].m(u,null))}for(;K<J.length;K+=1)J[K].d(1);J.length=j.length}if(Rt&16&&(T.checked=tt[4]),Rt&128){at=wt(tt[7]);let K;for(K=0;K<at.length;K+=1){const Qt=wl(tt,at,K);yt[K]?yt[K].p(Qt,Rt):(yt[K]=Ol(Qt),yt[K].c(),yt[K].m(I,null))}for(;K<yt.length;K+=1)yt[K].d(1);yt.length=at.length}Rt&136&&wn(I,tt[3])},d(tt){tt&&X(t),Ie(_,tt),Ie(J,tt),Ie(yt,tt),H=!1,Vt(P)}}}function wf(o){let t,e,n;function i(s){o[17](s)}let r={$$slots:{default:[yf]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,[a]){const l={};a&268435486&&(l.$$scope={dirty:a,ctx:s}),!e&&a&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function $f(o,t,e){let n,{ic:i,ooc:r,players:s}=Gi(),a=en("defaultInCombat"),l=en("defaultOutOfCombat"),c=en("trackedUser"),u=ae("clampCanvas");xt(o,u,O=>e(4,n=O));async function h(O){await hn("defaultInCombat",O.target.value)}async function d(O){await hn("defaultOutOfCombat",O.target.value)}async function p(O){await hn("trackedUser",O.target.value)}let{elementRoot:m=void 0}=t;const f=[[],[]];function g(){a=this.__value,e(1,a)}function b(){l=this.__value,e(2,l)}function w(){n=this.checked,u.set(n)}function T(){c=Bo(this),e(3,c),e(7,s)}function S(O){m=O,e(0,m)}return o.$$set=O=>{"elementRoot"in O&&e(0,m=O.elementRoot)},[m,a,l,c,n,i,r,s,u,h,d,p,g,f,b,w,T,S]}class Tf extends Ct{constructor(t){super(),It(this,t,$f,wf,Mt,{elementRoot:0})}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class xf extends Ve{sidebarButton;constructor(t){super(),this.sidebarButton=t}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["obsdirector"],minimizable:!0,width:275,id:"director-application",title:"Director",positionOrtho:!1,transformOrigin:null,svelte:{class:Tf,target:document.body,intro:!0}})}async close(t){await super.close(t),$("[data-tool=openStreamDirector]").removeClass("active"),this.sidebarButton.active=!1}}function Fo(o){return class Nl extends FormApplication{static#t;static showSettings(){return this.#t=this.#t?this.#t:new o,this.#t.render(!0,{focus:!0}),this.#t}constructor(e={}){super({},e),Nl.showSettings()}async _updateObject(){}render(){this.close()}}}function Ef(o){let t,e,n,i,r;function s(c){o[4](c)}function a(c){o[5](c)}let l={containerStyles:"background-color: white;",closeListOnChange:"false",floatingConfig:{strategy:"fixed"},items:o[1],value:o[0]};return o[2]!==void 0&&(l.filterText=o[2]),o[0]!==void 0&&(l.justValue=o[0]),t=new Ln({props:l}),vt.push(()=>At(t,"filterText",s)),vt.push(()=>At(t,"justValue",a)),t.$on("filter",o[3]),{c(){e=k("div"),mt(t.$$.fragment),se(e,"display","contents"),se(e,"--height","30px")},m(c,u){B(c,e,u),gt(t,e,null),r=!0},p(c,[u]){const h={};u&2&&(h.items=c[1]),u&1&&(h.value=c[0]),!n&&u&4&&(n=!0,h.filterText=c[2],Ht(()=>n=!1)),!i&&u&1&&(i=!0,h.justValue=c[0],Ht(()=>i=!1)),t.$set(h)},i(c){r||(L(t.$$.fragment,c),r=!0)},o(c){z(t.$$.fragment,c),r=!1},d(c){c&&t&&X(e),bt(t,c)}}}function Of(o,t,e){let{data:n}=t,i=Vo(),r=[...i],s="";function a(u){u.detail.length===0&&s.length>0&&e(1,r=[...i,s])}function l(u){s=u,e(2,s)}function c(u){n=u,e(0,n)}return o.$$set=u=>{"data"in u&&e(0,n=u.data)},[n,r,s,a,l,c]}class Mr extends Ct{constructor(t){super(),It(this,t,Of,Ef,Mt,{data:0})}}function Sf(o){let t,e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S,O,M,y,N,C,R,x,A,F,I,H,P,U,_,j,J,at,yt,tt,Rt,K,Qt,ie,Oe,Zt,Fe,Y,Nt,jt,oe,lt,re,Se,Z,bn,sn,me,Dn,Le,St,Qe,Ke,Ft,pe,rt,_e,_o,Te,Bn,Xn,zo;function Fi(ct){o[40](ct)}let Po={id:"preview",postRollShow:o[2],preRollShow:o[2],rollShow:o[2]};return o[1]!==void 0&&(Po.rollValue=o[1]),n=new Ec({props:Po}),vt.push(()=>At(n,"rollValue",Fi)),{c(){t=k("div"),e=k("section"),mt(n.$$.fragment),r=W(),s=k("button"),s.textContent="Test",a=W(),l=k("section"),c=k("div"),u=k("section"),h=k("input"),d=W(),p=k("span"),p.textContent="Pre Roll Image",m=W(),f=k("section"),g=pt(`Image URL
          `),b=k("section"),w=k("input"),T=W(),S=k("button"),S.innerHTML='<i class="fa-solid fa-file"></i>',O=pt(`
          Delay (ms)
          `),M=k("input"),y=pt(`
          Fade In (ms)
          `),N=k("input"),C=pt(`
          Duration (ms)
          `),R=k("input"),x=pt(`
          Fade Out (ms)
          `),A=k("input"),F=W(),I=k("div"),H=k("section"),H.innerHTML="<span>Roll</span>",P=W(),U=k("section"),_=pt(`Foreground Image URL
          `),j=k("section"),J=k("input"),at=W(),yt=k("button"),yt.innerHTML='<i class="fa-solid fa-file"></i>',tt=pt(`
          Background Image URL
          `),Rt=k("section"),K=k("input"),Qt=W(),ie=k("button"),ie.innerHTML='<i class="fa-solid fa-file"></i>',Oe=pt(`
          Fade In (ms)
          `),Zt=k("input"),Fe=pt(`
          Duration (ms)
          `),Y=k("input"),Nt=pt(`
          Fade Out (ms)
          `),jt=k("input"),oe=W(),lt=k("div"),re=k("section"),Se=k("input"),Z=W(),bn=k("span"),bn.textContent="Post Roll Image",sn=W(),me=k("section"),Dn=pt(`Image URL
          `),Le=k("section"),St=k("input"),Qe=W(),Ke=k("button"),Ke.innerHTML='<i class="fa-solid fa-file"></i>',Ft=pt(`
          Fade In (ms)
          `),pe=k("input"),rt=pt(`
          Duration (ms)
          `),_e=k("input"),_o=pt(`
          Fade Out (ms)
          `),Te=k("input"),v(s,"class","svelte-obsu-sem819"),v(e,"class","preview obs-utils roll-overlay svelte-obsu-sem819"),v(h,"type","checkbox"),v(u,"class","header svelte-obsu-sem819"),v(w,"type","text"),v(S,"class","svelte-obsu-sem819"),v(b,"class","filepicker svelte-obsu-sem819"),v(M,"min","0"),v(M,"type","number"),v(N,"min","0"),v(N,"type","number"),v(R,"min","0"),v(R,"type","number"),v(A,"min","0"),v(A,"type","number"),v(f,"class","content svelte-obsu-sem819"),v(c,"class","pre svelte-obsu-sem819"),v(H,"class","header svelte-obsu-sem819"),v(J,"type","text"),v(yt,"class","svelte-obsu-sem819"),v(j,"class","filepicker svelte-obsu-sem819"),v(K,"type","text"),v(ie,"class","svelte-obsu-sem819"),v(Rt,"class","filepicker svelte-obsu-sem819"),v(Zt,"min","0"),v(Zt,"type","number"),v(Y,"min","0"),v(Y,"type","number"),v(jt,"min","0"),v(jt,"type","number"),v(U,"class","content svelte-obsu-sem819"),v(I,"class","roll svelte-obsu-sem819"),v(Se,"type","checkbox"),v(re,"class","header svelte-obsu-sem819"),v(St,"type","text"),v(Ke,"class","svelte-obsu-sem819"),v(Le,"class","filepicker svelte-obsu-sem819"),v(pe,"min","0"),v(pe,"type","number"),v(_e,"min","0"),v(_e,"type","number"),v(Te,"min","0"),v(Te,"type","number"),v(me,"class","content svelte-obsu-sem819"),v(lt,"class","post svelte-obsu-sem819"),v(l,"class","menu svelte-obsu-sem819"),v(t,"class","editor svelte-obsu-sem819")},m(ct,Xt){B(ct,t,Xt),E(t,e),gt(n,e,null),E(e,r),E(e,s),E(t,a),E(t,l),E(l,c),E(c,u),E(u,h),h.checked=o[7],E(u,d),E(u,p),E(c,m),E(c,f),E(f,g),E(f,b),E(b,w),et(w,o[6]),E(b,T),E(b,S),E(f,O),E(f,M),et(M,o[8]),E(f,y),E(f,N),et(N,o[9]),E(f,C),E(f,R),et(R,o[10]),E(f,x),E(f,A),et(A,o[11]),E(l,F),E(l,I),E(I,H),E(I,P),E(I,U),E(U,_),E(U,j),E(j,J),et(J,o[5]),E(j,at),E(j,yt),E(U,tt),E(U,Rt),E(Rt,K),et(K,o[4]),E(Rt,Qt),E(Rt,ie),E(U,Oe),E(U,Zt),et(Zt,o[12]),E(U,Fe),E(U,Y),et(Y,o[13]),E(U,Nt),E(U,jt),et(jt,o[14]),E(l,oe),E(l,lt),E(lt,re),E(re,Se),Se.checked=o[15],E(re,Z),E(re,bn),E(lt,sn),E(lt,me),E(me,Dn),E(me,Le),E(Le,St),et(St,o[3]),E(Le,Qe),E(Le,Ke),E(me,Ft),E(me,pe),et(pe,o[16]),E(me,rt),E(me,_e),et(_e,o[17]),E(me,_o),E(me,Te),et(Te,o[18]),Bn=!0,Xn||(zo=[G(s,"click",o[35]),G(h,"change",o[41]),G(w,"input",o[42]),G(S,"click",o[36]),G(M,"input",o[43]),G(N,"input",o[44]),G(R,"input",o[45]),G(A,"input",o[46]),G(J,"input",o[47]),G(yt,"click",o[37]),G(K,"input",o[48]),G(ie,"click",o[38]),G(Zt,"input",o[49]),G(Y,"input",o[50]),G(jt,"input",o[51]),G(Se,"change",o[52]),G(St,"input",o[53]),G(Ke,"click",o[39]),G(pe,"input",o[54]),G(_e,"input",o[55]),G(Te,"input",o[56])],Xn=!0)},p(ct,Xt){const vn={};Xt[0]&4&&(vn.postRollShow=ct[2]),Xt[0]&4&&(vn.preRollShow=ct[2]),Xt[0]&4&&(vn.rollShow=ct[2]),!i&&Xt[0]&2&&(i=!0,vn.rollValue=ct[1],Ht(()=>i=!1)),n.$set(vn),Xt[0]&128&&(h.checked=ct[7]),Xt[0]&64&&w.value!==ct[6]&&et(w,ct[6]),Xt[0]&256&&Kt(M.value)!==ct[8]&&et(M,ct[8]),Xt[0]&512&&Kt(N.value)!==ct[9]&&et(N,ct[9]),Xt[0]&1024&&Kt(R.value)!==ct[10]&&et(R,ct[10]),Xt[0]&2048&&Kt(A.value)!==ct[11]&&et(A,ct[11]),Xt[0]&32&&J.value!==ct[5]&&et(J,ct[5]),Xt[0]&16&&K.value!==ct[4]&&et(K,ct[4]),Xt[0]&4096&&Kt(Zt.value)!==ct[12]&&et(Zt,ct[12]),Xt[0]&8192&&Kt(Y.value)!==ct[13]&&et(Y,ct[13]),Xt[0]&16384&&Kt(jt.value)!==ct[14]&&et(jt,ct[14]),Xt[0]&32768&&(Se.checked=ct[15]),Xt[0]&8&&St.value!==ct[3]&&et(St,ct[3]),Xt[0]&65536&&Kt(pe.value)!==ct[16]&&et(pe,ct[16]),Xt[0]&131072&&Kt(_e.value)!==ct[17]&&et(_e,ct[17]),Xt[0]&262144&&Kt(Te.value)!==ct[18]&&et(Te,ct[18])},i(ct){Bn||(L(n.$$.fragment,ct),Bn=!0)},o(ct){z(n.$$.fragment,ct),Bn=!1},d(ct){ct&&X(t),bt(n),Xn=!1,Vt(zo)}}}function Mf(o){let t,e,n;function i(s){o[57](s)}let r={$$slots:{default:[Sf]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,a){const l={};a[0]&524286|a[2]&1&&(l.$$scope={dirty:a,ctx:s}),!e&&a[0]&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function Df(o,t,e){let n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T=ae("rollOverlayPreRollDelay");xt(o,T,rt=>e(8,l=rt));let S=ae("rollOverlayPreRollStay");xt(o,S,rt=>e(10,u=rt));let O=ae("rollOverlayPreRollFadeIn");xt(o,O,rt=>e(9,c=rt));let M=ae("rollOverlayPreRollFadeOut");xt(o,M,rt=>e(11,h=rt));let y=ae("rollOverlayRollStay");xt(o,y,rt=>e(13,p=rt));let N=ae("rollOverlayRollFadeIn");xt(o,N,rt=>e(12,d=rt));let C=ae("rollOverlayRollFadeOut");xt(o,C,rt=>e(14,m=rt));let R=ae("rollOverlayPostRollStay");xt(o,R,rt=>e(17,b=rt));let x=ae("rollOverlayPostRollFadeIn");xt(o,x,rt=>e(16,g=rt));let A=ae("rollOverlayPostRollFadeOut");xt(o,A,rt=>e(18,w=rt));let F=ae("rollOverlayPreRollImage");xt(o,F,rt=>e(6,s=rt));let I=ae("rollOverlayRollBackground");xt(o,I,rt=>e(4,i=rt));let H=ae("rollOverlayRollForeground");xt(o,H,rt=>e(5,r=rt));let P=ae("rollOverlayPostRollImage");xt(o,P,rt=>e(3,n=rt));let U=ae("rollOverlayPostRollEnabled");xt(o,U,rt=>e(7,a=rt));let _=ae("rollOverlayPreRollEnabled");xt(o,_,rt=>e(15,f=rt));let j="20",J=!1,{elementRoot:at=void 0}=t;function yt(){e(1,j=Math.round(Math.random()*20)),e(2,J=!1),e(2,J=!0)}let tt;function Rt(){tt?tt.bringToTop():tt=new FilePicker({type:"image",callback:rt=>{ho(F,s=rt,s),tt=null},title:"Select an Image"}).render(!0)}let K;function Qt(){K?K.bringToTop():K=new FilePicker({type:"image",callback:rt=>{ho(H,r=rt,r),K=null},title:"Select an Image"}).render(!0)}let ie;function Oe(){ie?(ie.bringToTop(),ie=null):ie=new FilePicker({type:"image",callback:rt=>{ho(I,i=rt,i)},title:"Select an Image"}).render(!0)}let Zt;function Fe(){Zt?(Zt.bringToTop(),Zt=null):Zt=new FilePicker({type:"image",callback:rt=>{ho(P,n=rt,n)},title:"Select an Image"}).render(!0)}function Y(rt){j=rt,e(1,j)}function Nt(){a=this.checked,U.set(a)}function jt(){s=this.value,F.set(s)}function oe(){l=Kt(this.value),T.set(l)}function lt(){c=Kt(this.value),O.set(c)}function re(){u=Kt(this.value),S.set(u)}function Se(){h=Kt(this.value),M.set(h)}function Z(){r=this.value,H.set(r)}function bn(){i=this.value,I.set(i)}function sn(){d=Kt(this.value),N.set(d)}function me(){p=Kt(this.value),y.set(p)}function Dn(){m=Kt(this.value),C.set(m)}function Le(){f=this.checked,_.set(f)}function St(){n=this.value,P.set(n)}function Qe(){g=Kt(this.value),x.set(g)}function Ke(){b=Kt(this.value),R.set(b)}function Ft(){w=Kt(this.value),A.set(w)}function pe(rt){at=rt,e(0,at)}return o.$$set=rt=>{"elementRoot"in rt&&e(0,at=rt.elementRoot)},[at,j,J,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S,O,M,y,N,C,R,x,A,F,I,H,P,U,_,yt,Rt,Qt,Oe,Fe,Y,Nt,jt,oe,lt,re,Se,Z,bn,sn,me,Dn,Le,St,Qe,Ke,Ft,pe]}class kf extends Ct{constructor(t){super(),It(this,t,Df,Mf,Mt,{elementRoot:0},null,[-1,-1,-1])}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class Cf extends Ve{dataArray=[];static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["rolloverlayeditor"],id:"rolloverlayeditor-application",title:"Roll Overlay Editor",height:600,width:1e3,zIndex:95,resizable:!0,focusKeep:!0,svelte:{class:kf,target:document.body}})}}const Ri=[{id:4,title:"Tagging Changes",text:["This update has removed the dependency on Tagger (and socketlib).","Because Tagger was used to track the manual tracking, all tokens will now be untracked.","If you were using manual tracking, please make sure to tag your tokens again."],link:[{title:"Patreon",url:"https://www.patreon.com/voidmonster"},{title:"Github",url:"https://github.com/FaeyUmbrea/obs-utils"},{title:"Discord",url:"https://discord.com/invite/WfMaKPPdeM"}]},{id:3,title:"Discord and Settings Changes",text:["OBS Websocket Settings are now stored in the browser instead of the world. If you were using them, please load up the GM client and use the new sync button to transfer them to your stream client.","You can also now run OBS Utils outside of a browser source using Manual Mode!","Finally, I have created a discord for users of my modules, that you can join to chat and ask questions. Find the link below!"],link:[{title:"Patreon",url:"https://www.patreon.com/voidmonster"},{title:"Github",url:"https://github.com/FaeyUmbrea/obs-utils"},{title:"Discord",url:"https://discord.com/invite/WfMaKPPdeM"}]},{id:2,title:"New Feature!",text:["Hi Everyone! Thanks for you continued support of OBS Utils!","This Version introduces a new Trigger Event for the OBS Remote Control. You can now fire OBS Events on loading a specific Foundry Scene.","The events will also be triggered during the initial start of Foundry and on reload, so please be careful what Scenes you attach Events to!"],link:[{title:"Patreon",url:"https://www.patreon.com/voidmonster"},{title:"Github",url:"https://github.com/FaeyUmbrea/obs-utils"}]},{id:1,title:"Welcome to OBS Utils",text:["Hello and thank you so much for using OBS Utils!","This right here is the notification panel.","You will only see this if there is any news that are worth sharing.","If you have any Questions, do not hesitate to contact me. Either open an Issue on Github or join the Foundry Discord and ping me there @faey.","Finally, I'd be stoked if you'd consider supporting me on Patreon! The link is in the clicky below this."],link:[{title:"Patreon",url:"https://www.patreon.com/voidmonster"},{title:"Github",url:"https://github.com/FaeyUmbrea/obs-utils"}]}];function If(o){let t,e;return{c(){t=k("span"),e=pt(o[1]),v(t,"class","svelte-obsu-1lfrir9")},m(n,i){B(n,t,i),E(t,e)},p(n,i){i&2&&Me(e,n[1])},d(n){n&&X(t)}}}function Af(o){let t,e,n;return{c(){t=k("input"),v(t,"type","text")},m(i,r){B(i,t,r),et(t,o[1]),e||(n=G(t,"input",o[6]),e=!0)},p(i,r){r&2&&t.value!==i[1]&&et(t,i[1])},d(i){i&&X(t),e=!1,n()}}}function Sl(o){let t,e,n,i;const r=o[5].default,s=ue(r,o,o[4],null);return{c(){t=k("section"),s&&s.c(),v(t,"class",fo("content")+" svelte-obsu-1lfrir9")},m(a,l){B(a,t,l),s&&s.m(t,null),i=!0},p(a,l){s&&s.p&&(!i||l&16)&&he(s,r,a,a[4],i?fe(r,a[4],l,null):de(a[4]),null)},i(a){i||(L(s,a),a&&yn(()=>{i&&(n&&n.end(1),e=Wr(t,Yr,{}),e.start())}),i=!0)},o(a){z(s,a),e&&e.invalidate(),a&&(n=Br(t,Yr,{})),i=!1},d(a){a&&X(t),s&&s.d(a),a&&n&&n.end()}}}function Nf(o){let t,e,n,i,r,s,a,l;function c(p,m){return p[2]?Af:If}let u=c(o),h=u(o),d=!o[0]&&Sl(o);return{c(){t=k("div"),e=k("section"),n=pt("\u25BC"),h.c(),i=pt("\u25BC"),r=W(),d&&d.c(),v(e,"class","header svelte-obsu-1lfrir9"),v(t,"class","collapsable-section")},m(p,m){B(p,t,m),E(t,e),E(e,n),h.m(e,null),E(e,i),E(t,r),d&&d.m(t,null),s=!0,a||(l=G(e,"click",o[3]),a=!0)},p(p,[m]){u===(u=c(p))&&h?h.p(p,m):(h.d(1),h=u(p),h&&(h.c(),h.m(e,i))),p[0]?d&&(Dt(),z(d,1,1,()=>{d=null}),kt()):d?(d.p(p,m),m&1&&L(d,1)):(d=Sl(p),d.c(),L(d,1),d.m(t,null))},i(p){s||(L(d),s=!0)},o(p){z(d),s=!1},d(p){p&&X(t),h.d(),d&&d.d(),a=!1,l()}}}function Hf(o,t,e){let{$$slots:n={},$$scope:i}=t,{collapsed:r=!0}=t,{title:s="Section"}=t,{editableTitle:a=!1}=t;function l(){e(0,r=!r)}function c(){s=this.value,e(1,s)}return o.$$set=u=>{"collapsed"in u&&e(0,r=u.collapsed),"title"in u&&e(1,s=u.title),"editableTitle"in u&&e(2,a=u.editableTitle),"$$scope"in u&&e(4,i=u.$$scope)},[r,s,a,l,i,n,c]}class Rf extends Ct{constructor(t){super(),It(this,t,Hf,Nf,Mt,{collapsed:0,title:1,editableTitle:2})}}function Ml(o,t,e){const n=o.slice();return n[3]=t[e],n[5]=e,n}function Dl(o,t,e){const n=o.slice();return n[6]=t[e].url,n[7]=t[e].title,n}function Ff(o,t,e){const n=o.slice();return n[10]=t[e],n}function Lf(o){let t;return{c(){t=k("p"),t.textContent=`${o[10]}`},m(e,n){B(e,t,n)},p:_t,d(e){e&&X(t)}}}function kl(o){let t,e,n;function i(){return o[1](o[6])}return{c(){t=k("button"),t.textContent=`${o[7]}`},m(r,s){B(r,t,s),e||(n=G(t,"click",i),e=!0)},p(r,s){o=r},d(r){r&&X(t),e=!1,n()}}}function _f(o){let t,e,n,i,r,s=wt(o[3].text),a=[];for(let u=0;u<s.length;u+=1)a[u]=Lf(Ff(o,s,u));let l=wt(o[3].link),c=[];for(let u=0;u<l.length;u+=1)c[u]=kl(Dl(o,l,u));return{c(){t=k("div");for(let u=0;u<a.length;u+=1)a[u].c();e=W(),n=k("br"),i=W();for(let u=0;u<c.length;u+=1)c[u].c();r=W(),v(t,"class","news svelte-obsu-1g7wphm")},m(u,h){B(u,t,h);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(t,null);E(t,e),E(t,n),E(t,i);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(t,null);B(u,r,h)},p(u,h){if(h&0){l=wt(u[3].link);let d;for(d=0;d<l.length;d+=1){const p=Dl(u,l,d);c[d]?c[d].p(p,h):(c[d]=kl(p),c[d].c(),c[d].m(t,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}},d(u){u&&(X(t),X(r)),Ie(a,u),Ie(c,u)}}}function Cl(o){let t,e;return t=new Rf({props:{title:o[3].title,collapsed:!(o[5]<=0),$$slots:{default:[_f]},$$scope:{ctx:o}}}),{c(){mt(t.$$.fragment)},m(n,i){gt(t,n,i),e=!0},p(n,i){const r={};i&8192&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i(n){e||(L(t.$$.fragment,n),e=!0)},o(n){z(t.$$.fragment,n),e=!1},d(n){bt(t,n)}}}function zf(o){let t,e,n=wt(Ri),i=[];for(let s=0;s<n.length;s+=1)i[s]=Cl(Ml(o,n,s));const r=s=>z(i[s],1,1,()=>{i[s]=null});return{c(){t=k("main");for(let s=0;s<i.length;s+=1)i[s].c()},m(s,a){B(s,t,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(t,null);e=!0},p(s,a){if(a&0){n=wt(Ri);let l;for(l=0;l<n.length;l+=1){const c=Ml(s,n,l);i[l]?(i[l].p(c,a),L(i[l],1)):(i[l]=Cl(c),i[l].c(),L(i[l],1),i[l].m(t,null))}for(Dt(),l=n.length;l<i.length;l+=1)r(l);kt()}},i(s){if(!e){for(let a=0;a<n.length;a+=1)L(i[a]);e=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)z(i[a]);e=!1},d(s){s&&X(t),Ie(i,s)}}}function Pf(o){let t,e,n;function i(s){o[2](s)}let r={$$slots:{default:[zf]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.elementRoot=o[0]),t=new $n({props:r}),vt.push(()=>At(t,"elementRoot",i)),{c(){mt(t.$$.fragment)},m(s,a){gt(t,s,a),n=!0},p(s,[a]){const l={};a&8192&&(l.$$scope={dirty:a,ctx:s}),!e&&a&1&&(e=!0,l.elementRoot=s[0],Ht(()=>e=!1)),t.$set(l)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){bt(t,s)}}}function jf(o){window.open(o,"_blank").focus()}function Wf(o,t,e){let{elementRoot:n=void 0}=t;uo(()=>{hn("lastReadNotification",Ri[0].id)});const i=s=>jf(s);function r(s){n=s,e(0,n)}return o.$$set=s=>{"elementRoot"in s&&e(0,n=s.elementRoot)},[n,i,r]}class Bf extends Ct{constructor(t){super(),It(this,t,Wf,Pf,Mt,{elementRoot:0})}get elementRoot(){return this.$$.ctx[0]}set elementRoot(t){this.$$set({elementRoot:t}),Wt()}}class Xf extends Ve{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["notification-center"],id:"notification-application",title:"OBS Utils Notification Center",height:420,width:520,resizable:!0,svelte:{class:Bf,target:document.body}})}}function qf(o){let t=o[11]()+"",e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S;function O(x){o[13](x)}function M(x){o[14](x)}let y={containerStyles:"background-color: white;",closeListOnChange:"false",floatingConfig:{strategy:"fixed"},items:o[4],value:o[0]};o[6]!==void 0&&(y.filterText=o[6]),o[0]!==void 0&&(y.justValue=o[0]),r=new Ln({props:y}),vt.push(()=>At(r,"filterText",O)),vt.push(()=>At(r,"justValue",M)),r.$on("filter",o[9]),r.$on("change",o[8]);function N(x){o[16](x)}function C(x){o[17](x)}let R={containerStyles:"background-color: white;",closeListOnChange:"false",floatingConfig:{strategy:"fixed"},items:o[5],value:o[1]};return o[7]!==void 0&&(R.filterText=o[7]),o[1]!==void 0&&(R.justValue=o[1]),d=new Ln({props:R}),vt.push(()=>At(d,"filterText",N)),vt.push(()=>At(d,"justValue",C)),d.$on("filter",o[10]),d.$on("change",o[8]),{c(){e=pt(t),n=W(),i=k("div"),s=k("div"),mt(r.$$.fragment),c=W(),u=k("input"),h=W(),p=k("div"),mt(d.$$.fragment),g=W(),b=k("input"),se(s,"display","contents"),se(s,"--height","30px"),v(u,"type","text"),v(u,"class","svelte-obsu-qfndnh"),se(p,"display","contents"),se(p,"--height","30px"),v(b,"type","text"),v(b,"class","svelte-obsu-qfndnh"),v(i,"class","input svelte-obsu-qfndnh")},m(x,A){B(x,e,A),B(x,n,A),B(x,i,A),E(i,s),gt(r,s,null),E(i,c),E(i,u),et(u,o[2]),E(i,h),E(i,p),gt(d,p,null),E(i,g),E(i,b),et(b,o[3]),w=!0,T||(S=[G(u,"change",o[8]),G(u,"input",o[15]),G(b,"change",o[8]),G(b,"input",o[18])],T=!0)},p(x,[A]){const F={};A&16&&(F.items=x[4]),A&1&&(F.value=x[0]),!a&&A&64&&(a=!0,F.filterText=x[6],Ht(()=>a=!1)),!l&&A&1&&(l=!0,F.justValue=x[0],Ht(()=>l=!1)),r.$set(F),A&4&&u.value!==x[2]&&et(u,x[2]);const I={};A&32&&(I.items=x[5]),A&2&&(I.value=x[1]),!m&&A&128&&(m=!0,I.filterText=x[7],Ht(()=>m=!1)),!f&&A&2&&(f=!0,I.justValue=x[1],Ht(()=>f=!1)),d.$set(I),A&8&&b.value!==x[3]&&et(b,x[3])},i(x){w||(L(r.$$.fragment,x),L(d.$$.fragment,x),w=!0)},o(x){z(r.$$.fragment,x),z(d.$$.fragment,x),w=!1},d(x){x&&(X(e),X(n),X(i)),bt(r),bt(d),T=!1,Vt(S)}}}function Yf(o,t,e){let{data:n=""}=t,i,r,s,a,l=Vo(),c=[...l],u=[...l],h="",d="";function p(){e(12,n=`${i};${s};${r};${a}`)}function m(y){y.detail.length===0&&h.length>0&&e(4,c=[...l,h])}function f(y){y.detail.length===0&&d.length>0&&e(5,u=[...l,d])}function g(){return e(0,i=n.split(";")[0]),e(2,s=n.split(";")[1]),e(1,r=n.split(";")[2]),e(3,a=n.split(";")[3]),""}function b(y){h=y,e(6,h)}function w(y){i=y,e(0,i)}function T(){s=this.value,e(2,s)}function S(y){d=y,e(7,d)}function O(y){r=y,e(1,r)}function M(){a=this.value,e(3,a)}return o.$$set=y=>{"data"in y&&e(12,n=y.data)},[i,r,s,a,c,u,h,d,p,m,f,g,n,b,w,T,S,O,M]}class Il extends Ct{constructor(t){super(),It(this,t,Yf,qf,Mt,{data:12})}}function Zf(o){let t=o[9]()+"",e,n,i,r,s,a,l,c,u,h,d,p,m;function f(O){o[11](O)}function g(O){o[12](O)}let b={containerStyles:"background-color: white;",closeListOnChange:"false",floatingConfig:{strategy:"fixed"},items:o[2],value:o[0]};o[4]!==void 0&&(b.filterText=o[4]),o[0]!==void 0&&(b.justValue=o[0]),r=new Ln({props:b}),vt.push(()=>At(r,"filterText",f)),vt.push(()=>At(r,"justValue",g)),r.$on("filter",o[7]),r.$on("change",o[6]);function w(O){o[13](O)}function T(O){o[14](O)}let S={containerStyles:"background-color: white;",closeListOnChange:"false",floatingConfig:{strategy:"fixed"},items:o[3],value:o[1]};return o[5]!==void 0&&(S.filterText=o[5]),o[1]!==void 0&&(S.justValue=o[1]),u=new Ln({props:S}),vt.push(()=>At(u,"filterText",w)),vt.push(()=>At(u,"justValue",T)),u.$on("filter",o[8]),u.$on("change",o[6]),{c(){e=pt(t),n=W(),i=k("div"),s=k("div"),mt(r.$$.fragment),c=W(),h=k("div"),mt(u.$$.fragment),se(s,"display","contents"),se(s,"--height","30px"),se(h,"display","contents"),se(h,"--height","30px"),v(i,"class","input svelte-obsu-19nkt0c")},m(O,M){B(O,e,M),B(O,n,M),B(O,i,M),E(i,s),gt(r,s,null),E(i,c),E(i,h),gt(u,h,null),m=!0},p(O,[M]){const y={};M&4&&(y.items=O[2]),M&1&&(y.value=O[0]),!a&&M&16&&(a=!0,y.filterText=O[4],Ht(()=>a=!1)),!l&&M&1&&(l=!0,y.justValue=O[0],Ht(()=>l=!1)),r.$set(y);const N={};M&8&&(N.items=O[3]),M&2&&(N.value=O[1]),!d&&M&32&&(d=!0,N.filterText=O[5],Ht(()=>d=!1)),!p&&M&2&&(p=!0,N.justValue=O[1],Ht(()=>p=!1)),u.$set(N)},i(O){m||(L(r.$$.fragment,O),L(u.$$.fragment,O),m=!0)},o(O){z(r.$$.fragment,O),z(u.$$.fragment,O),m=!1},d(O){O&&(X(e),X(n),X(i)),bt(r),bt(u)}}}function Gf(o,t,e){let{data:n=""}=t,i,r,s=Vo(),a=[...s],l=[...s],c="",u="";function h(){e(10,n=`${i};${r}`)}function d(T){T.detail.length===0&&c.length>0&&e(2,a=[...s,c])}function p(T){T.detail.length===0&&u.length>0&&e(3,l=[...s,u])}function m(){return e(0,i=n.split(";")[0]),e(1,r=n.split(";")[1]),""}function f(T){c=T,e(4,c)}function g(T){i=T,e(0,i)}function b(T){u=T,e(5,u)}function w(T){r=T,e(1,r)}return o.$$set=T=>{"data"in T&&e(10,n=T.data)},[i,r,a,l,c,u,h,d,p,m,n,f,g,b,w]}class Vf extends Ct{constructor(t){super(),It(this,t,Gf,Zf,Mt,{data:10})}}function Uf(o){let t=o[7]()+"",e,n,i,r,s,a,l,c,u,h,d,p,m,f,g,b,w,T,S,O;function M(C){o[9](C)}function y(C){o[10](C)}let N={containerStyles:"background-color: white;",closeListOnChange:"false",floatingConfig:{strategy:"fixed"},items:o[3],value:o[0]};return o[4]!==void 0&&(N.filterText=o[4]),o[0]!==void 0&&(N.justValue=o[0]),r=new Ln({props:N}),vt.push(()=>At(r,"filterText",M)),vt.push(()=>At(r,"justValue",y)),r.$on("filter",o[6]),r.$on("change",o[5]),{c(){e=pt(t),n=W(),i=k("div"),s=k("div"),mt(r.$$.fragment),c=W(),u=k("div"),h=k("label"),h.textContent="True",d=W(),p=k("input"),m=W(),f=k("div"),g=k("label"),g.textContent="False",b=W(),w=k("input"),se(s,"display","contents"),se(s,"--height","30px"),v(h,"for","bool-icon1"),v(h,"class","svelte-obsu-gcyo46"),v(p,"id","bool-icon1"),v(p,"type","text"),v(u,"class","labeled svelte-obsu-gcyo46"),v(g,"for","bool-icon2"),v(g,"class","svelte-obsu-gcyo46"),v(w,"id","bool-icon2"),v(w,"type","text"),v(f,"class","labeled svelte-obsu-gcyo46"),v(i,"class","input svelte-obsu-gcyo46")},m(C,R){B(C,e,R),B(C,n,R),B(C,i,R),E(i,s),gt(r,s,null),E(i,c),E(i,u),E(u,h),E(u,d),E(u,p),et(p,o[1]),E(i,m),E(i,f),E(f,g),E(f,b),E(f,w),et(w,o[2]),T=!0,S||(O=[G(p,"change",o[5]),G(p,"input",o[11]),G(w,"change",o[5]),G(w,"input",o[12])],S=!0)},p(C,[R]){const x={};R&8&&(x.items=C[3]),R&1&&(x.value=C[0]),!a&&R&16&&(a=!0,x.filterText=C[4],Ht(()=>a=!1)),!l&&R&1&&(l=!0,x.justValue=C[0],Ht(()=>l=!1)),r.$set(x),R&2&&p.value!==C[1]&&et(p,C[1]),R&4&&w.value!==C[2]&&et(w,C[2])},i(C){T||(L(r.$$.fragment,C),T=!0)},o(C){z(r.$$.fragment,C),T=!1},d(C){C&&(X(e),X(n),X(i)),bt(r),S=!1,Vt(O)}}}function Jf(o,t,e){let{data:n=""}=t,i,r,s,a=Vo(),l=[...a],c="";function u(){e(8,n=`${i};${r};${s}`)}function h(b){b.detail.length===0&&c.length>0&&e(3,l=[...a,c])}function d(){return e(0,i=n.split(";")[0]),e(1,r=n.split(";")[1]),e(2,s=n.split(";")[2]),""}function p(b){c=b,e(4,c)}function m(b){i=b,e(0,i)}function f(){r=this.value,e(1,r)}function g(){s=this.value,e(2,s)}return o.$$set=b=>{"data"in b&&e(8,n=b.data)},[i,r,s,l,c,u,h,d,n,p,m,f,g]}class Al extends Ct{constructor(t){super(),It(this,t,Jf,Uf,Mt,{data:8})}}let Lo;async function Qf(o){Lo||(Lo=new xf(o)),Lo.rendered?Lo.close():Lo.render(!0)}function Kf(){game.settings.registerMenu(le,"obsRemoteMenu",{name:`${le}.settings.obsRemoteMenu.Name`,label:`${le}.settings.obsRemoteMenu.Label`,hint:`${le}.settings.obsRemoteMenu.Hint`,type:Fo(td),icon:"fas fa-bars",restricted:!0}),game.settings.registerMenu(le,"obsWebsocketMenu",{name:`${le}.settings.obsWebsocketMenu.Name`,label:`${le}.settings.obsWebsocketMenu.Label`,hint:`${le}.settings.obsWebsocketMenu.Hint`,type:Fo(rd),icon:"fas fa-bars",restricted:!0}),game.settings.registerMenu(le,"overlayActorSelect",{name:`${le}.settings.overlayActorSelect.Name`,label:`${le}.settings.overlayActorSelect.Label`,hint:`${le}.settings.overlayActorSelect.Hint`,type:Fo(gd),icon:"fas fa-bars",restricted:!0}),game.settings.registerMenu(le,"overlayEditor",{name:`${le}.settings.overlayEditor.Name`,label:`${le}.settings.overlayEditor.Label`,hint:`${le}.settings.overlayEditor.Hint`,type:Fo(bf),icon:"fas fa-bars",restricted:!0}),game.settings.registerMenu(le,"rollOverlayEditor",{name:`${le}.settings.rollOverlayEditor.Name`,label:`${le}.settings.rollOverlayEditor.Label`,hint:`${le}.settings.rollOverlayEditor.Hint`,icon:"fas fa-bars",type:Fo(Cf),restricted:!0}),We().overlayTypes.get("sl").registerOverlayEditor(ja),We().overlayTypes.get("sl").registerComponentEditor("pt",Mr),We().overlayTypes.get("sl").registerComponentEditor("fai",Mr),We().overlayTypes.get("sl").registerComponentEditor("img",Mr),We().overlayTypes.get("sl").registerComponentEditor("bav",Al,!0),We().overlayTypes.get("sl").registerComponentEditor("bavimg",Al,!0),We().overlayTypes.get("sl").registerComponentEditor("micoav",Il,!0),We().overlayTypes.get("sl").registerComponentEditor("mimgav",Il,!0),We().overlayTypes.get("sl").registerComponentEditor("pb",Vf,!0)}function tp(){game.user.isGM&&en("lastReadNotification")<Ri[0].id&&new Xf().render(!0)}export{Qf as openDirector,Kf as registerUI,tp as showNotifications};
//# sourceMappingURL=ui-C9-cmR-L.js.map
